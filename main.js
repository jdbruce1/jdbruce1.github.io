function startWait(e,t){try{e=e||_W.utl("html.weebly.libraries.weebly_utils_ajax_1"),window.pushLoading(),jQuery("#pleaseWait").toggleClass("no-delay",!!t).find(".loading-text").text(e)}catch(i){}}function endWait(){var e;try{window.popLoading(),e=jQuery("#pleaseWait").find(".loading-text").text(_W.utl("html.weebly.libraries.weebly_utils_ajax_2"))}catch(t){}}function setSetting(setting,value){"string"==typeof value&&value.match(/{/)&&(value=value.replace(/^'/,""),value=value.replace(/'$/,"")),eval(setting+" = "+value+";")}function handleLogout(e,t){var i;try{i=e.getHeader("Weebly-Auth-Msg")}catch(n){}if(i=i||"",i.match("not-logged-in"))window.onbeforeunload=null,document.location="/?session-expired=1";else if(i.match("database-error"))retriableErrFunc(t,e,i);else if(i.match("query-error"))retriableErrFunc(t,e,i);else if(i.match("account-deleted"))window.onbeforeunload=null,document.location="logout.php";else if(i.match("refresh-build"))"undefined"!=typeof currentBlog&&currentBlog.postId&&1==currentBlog.postId||(window.onbeforeunload=null,refreshMe());else if(i.match("maintenance-soon")){var o=i.match(/maintenance-soon\(([^\)]+)\)/);window.onbeforeunload=null,maintenanceSoon(o[1])}}function maintenanceSoon(e){$("maintenanceLength").innerHTML=e,Element.show("maintenanceDiv")}function refreshMe(){Element.show("refreshingDiv"),Element.show("grayedOut"),setTimeout("window.location.reload();",4e3)}function retriableErrFunc(e,t,i){endWait(),e.options.failSilently||exiting||(0==t.status?showRetriableError(_W.utl("html.weebly.libraries.weebly_utils_ajax_3"),e,!1):i.match("database-error")?showRetriableError(_W.utl("html.weebly.libraries.weebly_utils_ajax_4"),e,!1):i.match("query-error")&&showRetriableError(_W.utl("html.weebly.libraries.weebly_utils_ajax_5"),e,!0))}function errFunc(e){e&&e.request&&e.request.isRetriable()||showError(_W.utl("html.weebly.libraries.weebly_utils_ajax_6"),e)}function exceptionFunc(e,t,i){if(!e.isRetriable())if(e&&(!e.getStatus||!e.getStatus()||e.getStatus()<100||e.getStatus()>500))try{var n=e.options||{},o=n._retryCount||0;1>=o?(n._retryCount=++o,new Ajax.Request(e.url,n)):showError(_W.utl("html.weebly.libraries.weebly_utils_ajax_7")+t.message)}catch(r){}else if(window.console&&console.log)if("object"==typeof t)for(var s in t)"function"!=typeof t[s]&&console.log(s+": "+t[s]);else console.log(t)}function checkAjaxRequestStatus(e){e._complete||!Prototype.Browser.IE||e.times.sent||e.abort()}function done(){return!1}function checkContentEditable(){var e=new Element("div"),t="undefined"==typeof e.contentEditable||"undefined"!=typeof document.documentMode&&document.documentMode<10;t&&showError('<div style="text-align:center;">'+_W.utl("html.weebly.libraries.weebly_utils_18")+"<br/><br/><div style='width:350px; margin:10px auto; background:#FEEFDA;'><a href='http://www.firefox.com' target='_blank' style='margin-right:15px;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-firefox.jpg' style='border: none;' alt='Get Firefox'/></a><a href='http://www.browserforthebetter.com/download.html' target='_blank' style='margin-right:15px;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-ie8.jpg' style='border: none;' alt='Get Internet Explorer'/></a><a href='http://www.apple.com/safari/download/' target='_blank' style='margin-right:15px;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-safari.jpg' style='border: none;' alt='Get Safari'/></a><a href='http://www.google.com/chrome' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-chrome.jpg' style='border: none;' alt='Get Google Chrome'/></a></div></div>")}function fireTrackingEvent(e,t,i,n){try{if(n=n?n:0,!doTrackingEvent(e,t,i,n))throw"Did not process tracking event";if(Weebly.trackingArray.length>0){for(var o=0;o<Weebly.trackingArray.length;o++){var r=Weebly.trackingArray[o];doTrackingEvent(r.category,r.action,r.optional_label,r.optional_value)}Weebly.trackingArray=Array()}}catch(s){Weebly.trackingArray.push({category:e,action:t,optional_label:i,optional_value:n})}}function doTrackingEvent(e,t,i,n){try{"object"==typeof pageTracker?pageTracker("send","event",e,t,i,parseInt(n)):window.ga("send","event",e,t,i,parseInt(n)),mpmetrics.track(e,{type:t})}catch(o){return!1}return!0}function fireTransactionEvent(e,t,i,n,o){try{"object"==typeof pageTracker?(pageTracker("require","ecommerce"),pageTracker("ecommerce:addTransaction",{id:e,affiliation:n,revenue:i,shipping:0,tax:0}),pageTracker("ecommerce:addItem",{id:e,name:t,sku:t,category:o,price:i,quantity:1}),pageTracker("ecommerce:send")):window.ga&&(window.ga("require","ecommerce"),window.ga("ecommerce:addTransaction",{id:e,affiliation:n,revenue:i,shipping:0,tax:0}),window.ga("ecommerce:addItem",{id:e,name:t,sku:t,category:o,price:i,quantity:1}),window.ga("ecommerce:send")),mpmetrics.track("Purchase "+o)}catch(r){}}function showError(e,t,i){"string"==typeof e?($("red-error-title").update(_W.utl("html.weebly.libraries.weebly_utils_3")),$("red-error-text").update(e)):($("red-error-title").update(e.title),$("red-error-text").update(e.message)),errorDialog||(errorDialog=new Weebly.Dialog($("red-error"),{inner_class:"weebly-dialog-inner-red",zIndex:9999,modal:1})),errorDialog.open(),i||fireTrackingEvent("WeeblyError","Error",e);var n={pos:"oopserror",message:e,token:Weebly.RequestToken};return"object"==typeof t&&t.request&&(n.ajax_request=t.request.body.match(/^.*?&cookie/)[0],n.ajax_response=t.responseText,n.ajax_status=t.status,n.server=t.getHeader("X-Host"),t.request.times&&(n.ajax_start=t.request.times.start,n.ajax_initialized=t.request.times.initialized,n.ajax_sent=t.request.times.sent,n.ajax_response_start=t.request.times.response,n.ajax_complete=(new Date).getTime()-t.request.times.start,n.current_upload=t.request.concurrentUpload?1:0)),n.cookie=document.cookie,new Ajax.Request(ajax,{parameters:n,bgRequest:!0}),errorDialog}function hideError(){errorDialog&&errorDialog.close()}function showRetriableError(e,t,i){"object"==typeof retriableErrorDialog&&retriableErrorDialog.close();var n=require("editor/Branding"),o=n.isWhiteLabeled()?"":"<br/><br/>"+_W.utl("html.weebly.libraries.weebly_utils_4");o+="<br/><br/>",o+="<a href='#' onclick='window.location.href=\"/editor/exitEditor.php\"' class='big-grey-button'><span class='button-inner'>"+_W.utl("html.weebly.libraries.weebly_utils_5")+"</span></a>&nbsp;&nbsp;",o+="<a href='#' onclick='retryRetriableError();' class='big-blue-button'><span class='button-inner'>"+_W.utl("html.weebly.libraries.weebly_utils_6")+"</span></a>","string"==typeof e?($("red-error-title").update(_W.utl("html.weebly.libraries.weebly_utils_7")),$("red-error-text").update(e+o),fireTrackingEvent("WeeblyError","Retriable Error",e)):($("red-error-title").update(e.title),$("red-error-text").update(e.message+o),fireTrackingEvent("WeeblyError","Retriable Error",e.message)),retriableErrorDialog=new Weebly.Dialog($("red-error"),{inner_class:"weebly-dialog-inner-red",modal:1,showClose:i}),retriableErrorDialog.open();try{var r={pos:"oopserror",message:"string"==typeof e?e:e.message,token:Weebly.RequestToken};"object"!=typeof t||t.body.match(/oopserror/)||(r.ajax_request=t.body.match(/^.*?&cookie/)[0],r.ajax_response=t.transport.responseText,r.ajax_status=t.transport.status,r.server=t.getHeader("X-Host"),t.times&&(r.ajax_start=t.times.start,r.ajax_initialized=t.times.initialized,r.ajax_sent=t.times.sent,r.ajax_response_start=t.times.response,r.ajax_complete=(new Date).getTime()-t.times.start,r.current_upload=0),r.cookie=document.cookie,new Ajax.Request("/weebly/getElements.php",{parameters:r,bgRequest:!0}),retriableAjax=t)}catch(s){}return retriableErrorDialog}function retryRetriableError(){hideRetriableError(),retriableAjax.retry(!0)}function hideRetriableError(){retriableErrorDialog&&retriableErrorDialog.close()}function showWarning(e,t){return t=Object.extend({width:"585px",titleFontSize:"36px",showClose:!0,closeFunction:null},t),$("orange-error").setStyle({width:t.width}),$("orange-error-title").setStyle({fontSize:t.titleFontSize}),"string"==typeof e?($("orange-error-title").update(_W.utl("html.weebly.libraries.weebly_utils_8")),$("orange-error-text").update(e),fireTrackingEvent("WeeblyError","Warning",e)):($("orange-error-title").update(e.title),$("orange-error-text").update(e.message),fireTrackingEvent("WeeblyError","Warning",e.message)),t.okButton?$("orange-error-button").show().stopObserving("click").observe("click",function(){warningDialog.close()}):$("orange-error-button").hide(),warningDialog=new Weebly.Dialog($("orange-error"),{inner_class:"weebly-dialog-inner-orange",modal:1,showClose:t.showClose,closeFunction:t.closeFunction}),warningDialog.open(),warningDialog}function showDeniedAction(e){jQuery("orange-error-title").setStyle({fontSize:"30px"}).update("Text Not Allowed"),jQuery("orange-error-text").setStyle({marginTop:"25px",marginBottom:"25px"});var t=new Element("a",{"class":"orange-button-29",href:"#",id:"closeWarning"}).update('<span class="bi">'+window._W.utl("html.weebly.libraries.weebly_utils_9")+"</span>").setStyle({marginBottom:"10px"}).observe("click",function(){window.warningDialog.close(),jQuery("closeWarning").hide()});jQuery("orange-error-text").insert({after:t}),window.showWarning(e)}function hideWarning(){warningDialog&&warningDialog.close()}function showDialog(e,t){if(t=t||{},!showDialogElement){var i=new Element("div",{id:"showDialogElement","class":"orange-error weebly-text w-ui"}),n="";t.title&&(n+="<div class='orange-error-heading'><span class='orange-error-title' style='font-size:24px'>"+t.title+"</span></div>"),n+="<div class='orange-error-text'>"+e+"<div class='orange-error-buttons' style='margin-top:2em'></div></div>",i.update(n),showDialogElement=new Weebly.Dialog(i,{inner_class:"weebly-dialog-inner-orange"})}showDialogElement.open()}function showConfirm(e){var t;lastConfirmOk=!1,confirmDialog?t=$("confirmDialogContent"):(t=new Element("div",{id:"confirmDialogContent","class":"orange-error weebly-text w-ui"}),confirmDialog=new Weebly.Dialog(t,{inner_class:"weebly-dialog-inner-orange"})),confirmDialog.options.onClose=function(){!lastConfirmOk&&e.onCancel&&e.onCancel()},t.update("<div class='orange-error-heading'><div class='orange-error-title'>"+e.title+"</div></div><div class='orange-error-text'>"+e.message+"<div class='orange-error-buttons' style='margin-top:2em'></div></div>");var i=new Element("button",{style:"padding:.5em 1em;cursor:pointer","class":"btn btn-default"}).update(e.okText||"OK").observe("click",function(){e.onConfirm(),lastConfirmOk=!0,confirmDialog.close()}),n=new Element("button",{style:"padding:.5em 1em;cursor:pointer","class":"btn btn-primary"}).update(e.cancelText||_W.utl("html.weebly.libraries.weebly_utils_10")).observe("click",function(){confirmDialog.close()});t.select("div.orange-error-buttons")[0].insert(i).insert(" ").insert(n),confirmDialog.open()}function showUpdateWhois(e,t,i,n,o,r,s,a,l){$("CCState").value=$("whois-state").value,Event.fire($("CCState"),"liszt:updated"),$("whois-complete").onclick=function(){return submitWhois(),!1},$("whois-complete").style.opacity="1",$("whois-complete").disabled=!1,$("whois-error").innerHTML="";var c=s&&s.amountFormatted?s.amountFormatted:10*r+".00",d=s&&s.yearlyAmountFormatted?s.yearlyAmountFormatted:"$10";s&&s.tax&&(c+='<br><span class="whois-TaxAmount">(includes '+s.taxFormatted+" tax)</span>",$("whois-totalContainer").addClassName("has-tax")),$("whois-totalAmount").update(c),$("yearly-whois-price").update(d),$("whois-fields-domain").innerText=n+"."+o,$("whois-fields-userServiceID").value=i,e.match(/customDomainWhois/)?($("whoisProtectContainer-public").style.display="none",$("whoisProtect-public").name="whois-blank",$("whoisProtectContainer-private").style.display="none",$("whoisProtect-private").name="whois-blank",$("whoisProtectContainer-purchasedPrivate").style.display="block",$("whoisProtect-purchasedPrivate").name="whois-protect"):"PayPal"==t&&($("whoisProtectContainer-public").style.display="none",$("whoisProtect-public").name="whois-blank",$("whoisProtectContainer-private").style.display="none",$("whoisProtect-private").name="whois-blank",$("whoisProtect-purchasedPayPal").name="whois-protect"),whoisDialog=new Weebly.Dialog($("update-whois"),{modal:1,closeFunction:a||Weebly.goHome}),whoisDialog.successFunction=l,whoisDialog.open()}function submitWhois(){$("whois-complete").onclick=function(){return!1},$("whois-complete").style.opacity="0.5",$("whois-complete").disabled=!0,$("whois-error").innerHTML="";for(var e=[],t=["whois-name","whois-email","whois-address","whois-city","whois-state","whois-zip","CCState","CCCountry","whois-phone"],i=0;i<t.length;i++)"CCCountry"!=t[i]&&"CCState"!=t[i],$(t[i]).parentNode.style.border="1px solid #999",""==$(t[i]).value&&("CCState"==t[i]&&"US"==$("CCCountry").value||"whois-state"==t[i]&&"US"!=$("CCCountry").value||"CCState"!=t[i]&&"whois-state"!=t[i])&&e.push(t[i]),"whois-name"!=t[i]||$(t[i]).value.match(" ")||e.push(t[i]);if(e.length>0){for(var i=0;i<e.length;i++)$(e[i]).parentNode.style.border="1px solid red";$("whois-complete").onclick=function(){return submitWhois(),!1},$("whois-complete").style.opacity="1",$("whois-complete").disabled=!1,$("whois-error").innerHTML=_W.utl("html.weebly.libraries.weebly_utils_19")}else{var n=$("whois-form").serialize(!0);n.pos="updatedomainwhois",n.cookie=document.cookie,n.token=Weebly.RequestToken,new Ajax.Request(ajax,{parameters:n,onSuccess:handlerSubmitWhois,onFailure:errFunc})}}function handlerSubmitWhois(e){e.responseText.match("%%SUCCESS%")?(whoisDialog.close(),whoisDialog.successFunction&&whoisDialog.successFunction()):($("whois-complete").onclick=function(){return submitWhois(),!1},$("whois-complete").style.opacity="1",$("whois-complete").disabled=!1,$("whois-error").innerHTML=e.responseText)}function selectWhoisSetting(e){"public"==e?($("whoisProtectContainer-private").removeClassName("multiple-choice-box-selected"),$("whoisProtectContainer-public").addClassName("multiple-choice-box-selected"),$("whoisProtect-public").checked=!0,$("whois-totalContainer").style.display="none"):($("whoisProtectContainer-public").removeClassName("multiple-choice-box-selected"),$("whoisProtectContainer-private").addClassName("multiple-choice-box-selected"),$("whoisProtect-private").checked=!0,$("whois-totalContainer").style.display="inline-block")}function showError2(e){$("errorText2").innerHTML=e,Effect.Appear("error2")}function hoverOn(e,t){if(isIn(lastEventID,e));else if(1==settingTooltips){var i;1==t&&(i=_W.utl("html.weebly.libraries.weebly_utils_12")),2==t&&(i=_W.utl("html.weebly.libraries.weebly_utils_13")),3==t&&(i=_W.utl("html.weebly.libraries.weebly_utils_14")),showTip(i,e,"y",e,1),lastEventID.push(e)}}function hoverOff(e){1==settingTooltips&&hideTip("tip"+e),isIn(lastEventID,e)&&lastEventID.splice(isIn(lastEventID,e),1)}function preloadImages(e){for(var t=e.split(","),i=0;i<t.length;i++){var n=preloadedImages.length;preloadedImages[n]=new Image,preloadedImages[n].src=t[i]}}function duplicateStyle(e,t,i){if(e.currentStyle)for(var n in e.currentStyle){var o=e.currentStyle[n];""==o||o instanceof Object||"length"==n||"parentRule"==n||"display"==n||n.match(/border/)||n.match(/margin/)||n.match(/line/)||("display"==n||n.match(/border/)||n.match(/margin/)||(t.style[n]=o),"width"==n||"height"==n||n.match(/padding/)||n.match(/border/)||(i.style[n]=o))}else{var r=document.defaultView.getComputedStyle(e,"");for(var n in r){var o=r[n];""==o||o instanceof Object||"length"==n||"parentRule"==n||"display"==n||n.match(/border/)||n.match(/margin/)||(n.match(/^[0-9]+$/)&&(n=o,o=r[n]),"cssText"==n||"display"==n||n.match(/border/)||n.match(/margin/)||n.match(/webkit/)||(t.style[n]=o),"width"==n||"height"==n||"maxWidth"==n||"maxHeight"==n||n.match(/padding/)||n.match(/border/)||(i.style[n]=o))}}t.style.margin="0"}function tryStealMouse(e){var t=document.getElementById(e);t&&t.contentWindow&&t.contentWindow.document&&t.contentWindow.document.body&&t.contentWindow.document.body.innerHTML&&""!=t.contentWindow.document.body.innerHTML?$.StealMouse.on(t):setTimeout("tryStealMouse('"+e+"');",250)}function isAParent(e,t){if("object"!=typeof t&&(t=$(t)),"object"!=typeof e&&(e=$(e)),t==e)return!0;for(;t.parentNode;){if(t.parentNode==e)return!0;t=t.parentNode}return!1}function isAParentByClass(e,t){var i;if("object"!=typeof t&&(t=$(t)),t.hasClassName(e))return t;for(i=t.up();i&&i!==document;){if(i.hasClassName(e))return i;t=i,i=t.up()}return!1}function isAParentMatch(e,t){if("object"!=typeof t&&(t=$(t)),"string"!=typeof t.id)return!1;if(t.id.match(e))return t;for(;"body"!=t.id;){if(!t.parentNode)return!1;if(t.parentNode&&t.parentNode.id&&t.parentNode.id.match&&t.parentNode.id.match(e))return t.parentNode;t=t.parentNode}return!1}function getXML(e){var t=Try.these(function(){return(new DOMParser).parseFromString(e,"text/xml")},function(){var t=new ActiveXObject("Microsoft.XMLDOM");return t.loadXML(e),t});return t}function getValueXML(e,t){return e.getElementsByTagName(t)[0].firstChild.nodeValue}function getInnerHeight(){return self.innerHeight?self.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body?document.body.clientHeight:void 0}function isPro(){return Weebly.Restrictions.hasPro()}function modalProFeatures(e,t,i){if("reseller"==window.source){var n=require("components/views/ConfirmView");return void editorApp.showDialog(new n({title:_W.utl("html.weebly.libraries.weebly_utils_20"),message:e,confirmText:_W.utl("html.weebly.libraries.weebly_utils_21"),dialogClass:"ui-dialog-overlay-wsite-dialog",callback:function(e){e&&showPremiumPurchaseScreen({refer:t,level:i})}}))}var o=new Weebly.Dialog("pro-upgrade-modal",{modal:!0,onClose:function(){$("pro-upgrade-accept").stopObserving(),$("pro-upgrade-okay").stopObserving()}});$("pro-upgrade-accept").observe("click",function(e){o.close(),showPremiumPurchaseScreen({refer:t,level:i}),e.preventDefault()}),$("pro-upgrade-okay").observe("click",function(e){o.close(),e.preventDefault()}),$("pro-upgrade-modal-body").update(e),o.open()}function monitorHref(e){var t=(new Date).getTime();if(!(firstTime+500>t)&&(document.location.href!=currentHref||e)){if(e)var i=e;else{var i=document.location.href.replace(/.*#/,"");document.location.href=document.location.href.replace(/(.*#)[^#]*$/,"$1"),currentHref=document.location.href}if(i.match("refresh"))document.location.reload();else if(i.match("addService")){i.replace("addService:","");updateList()}else"closePollDaddy"==i&&(Pages.openPages.indexOf("goBlogPost")>-1?Pages.go("goBlogPost"):Pages.go("main"))}}function alertPremiumFeature(e,t){showPremiumPurchaseScreen({restrictionID:e,refer:t})}function showPremiumPurchaseScreen(e){if(e=e||{},"reseller"==window.source)return void editorApp.billing.resellerPaymentRedirect(e);if(Weebly.Developer&&Weebly.Developer.isMaster)return void editorApp.designer.showPlanChooser(function(e){Weebly.Restrictions.level=e},e.level);if(Weebly.Permissions&&Weebly.Permissions.isContributor)return void alert("The site owner must upgrade this site in order for this feature to be available.");if(!e.level&&e.restrictionID&&(e.level=Weebly.Restrictions.requiredService(e.restrictionID),e.level==Weebly.Restrictions.freeLevel&&Weebly.Restrictions.isUpgradable(e.restrictionID)&&(e.level=Weebly.Restrictions.isUpgradable(e.restrictionID))),e.level||e.type||(e.type="premium"),void 0===e.siteID&&window.location.href.match(/\/userHome\.php(\?|#|$)/)&&(e.siteID=!1),e.isPublishModal===!0){var t=require("analytics/Tracking");t.trackEvent("publish.modal","upgrade_button",e.refer)}showPurchaseScreen(e)}function showDesignerPurchaseScreen(e){showPurchaseScreen({type:Weebly.Restrictions.designerSitesService,refer:e})}function showUpdateBillingScreen(e,t,i,n,o,r,s){showPurchaseScreen({refer:e,userServiceID:t,type:n||"update",hideCard:o,deleteCard:r,extraArgs:s})}function showPurchaseScreen(e){e=e||{};var t=null;e.closeCallback&&(t=e.closeCallback);var i="/weebly/apps/purchasePage.php?s="+encodeURIComponent(configSiteName)+(e.type?"&type="+encodeURIComponent(e.type):"")+(e.level?"&level="+encodeURIComponent(e.level):"")+(e.restrictionID?"&restrictionID="+encodeURIComponent(e.restrictionID):"")+(e.refer?"&refer="+encodeURIComponent(e.refer):"")+(void 0!==e.siteID?"&siteID="+encodeURIComponent(e.siteID):"")+(e.forceComparison?"&comparison=1":"")+(e.userServiceID?"&userServiceID="+e.userServiceID:"")+(e.customTitle?"&customTitle="+e.customTitle:"")+(e.startTrial?"&startTrial=1":"")+(e.hideCard?"&hideCard="+e.hideCard:"")+(e.deleteCard?"&deleteCard="+e.deleteCard:"")+(e.extraArgs?"&"+e.extraArgs:""),n=buildSecureUrl(i);if(isProtocolSecure())_wAMD.require(["billing/views/BillingTakeoverView"],function(e){var i=new e({url:n});i.open(),i.on("close",function(){t?t():loadLastTransaction()})});else{var o=window.open(n,"_blank");e.makePopupGlobal&&(window.billingPopup=o),monitorBillingWindow(o,t)}}function buildSecureUrl(e){var t=window.secureBase;return t&&t.length&&(e="https://"+t+"/weebly/setSession.php?WeeblySession="+sid+"&redirect="+encodeURIComponent(e)),e}function monitorBillingWindow(e,t){t=t||function(){loadLastTransaction()},e&&e.closed?t():setTimeout(function(){monitorBillingWindow(e,t)},200)}function loadLastTransaction(e,t){preventAJAX()||(e=e||function(){},new Ajax.Request(ajax,{parameters:{pos:"getlasttransaction",cookie:document.cookie,transaction:JSON.stringify(t),token:Weebly.RequestToken},onFailure:errFunc,onException:exceptionFunc,onSuccess:function(e){var t=e.responseText;if(t.isJSON){var i=t.evalJSON();i.action&&processLastTransaction(i)}},onComplete:e}))}function fireBillingTransactionEvent(e,t){fireTransactionEvent(e.transaction_id,e.service_id,e.amount,e.payment_type,t)}function showTrackingFrame(e,t){$(document.body).insert('<iframe frameborder="0" style="position:absolute; display:block; top:0; left:0; width:0; height:0; border:0; overflow:hidden" src="/editor/apps/tracking_frame_dynamic.php?trigger='+e+(t||"")+'"></iframe>')}function processLastTransaction(e){if(e.action&&Weebly.Transactions&&Weebly.Transactions[e.action])return Weebly.Transactions[e.action](e);switch(e.action){case"successBillingPremium":if(fireBillingTransactionEvent(e,e.other_vars.plan.title),window.inEditor&&inEditor()){if(makePremium(e.other_vars.plan,e.service_id),isDomainChooserOpen?domainChoiceContinue():Pages.openPages.indexOf("exportSite")>-1?Pages.go("exportSite"):window.editorApp&&window.editorApp.isStorePanelOpen||Pages.go("main"),e.other_vars.freeDomainIssued&&(hasDomainCredit=!0),e.other_vars.bundled_domain){fireBillingTransactionEvent(e,"Domain");var t=e.other_vars.bundled_domain.domain,i=t.fqdn;Weebly.Location.all_purchased_domains.push(i),Weebly.Location.custom_domain=i,Weebly.Location.purchased_domain=!0,settingQuickExport=1,domainDialog.close(),domainChoiceFinish()}e.other_vars.plan.level>=10?editorApp.vent.trigger("billing:upgrade:proElement"):e.other_vars.plan.level>=5&&editorApp.vent.trigger("billing:upgrade:starter"),e.other_vars.plan.level>0&&editorApp.vent.trigger("billing:upgrade:feature")}else window.location.reload();break;case"successBilling":fireBillingTransactionEvent(e,"Other"),window.location.reload();break;case"successBillingExtend":fireBillingTransactionEvent(e,"Extend"),window.location.reload();break;case"successBillingUpdate":"object"==typeof editorApp?editorApp.vent.trigger("billing:profile:updated",e):homeApp&&homeApp.vent&&homeApp.vent.trigger("billing:profile:updated",e);break;case"successTrialPlanChange":window.location.reload();break;case"successBillingDomainTransfer":if(window.useOwnDialog.close(),window.inEditor&&inEditor()){var n="/home/domains/transfers/"+e.other_vars.domain_transfer_model.domain_transfer_id;window.open(n,"_blank")}domainChoiceFinish();break;case"successBillingDomain":if(e.other_vars.bundled_plan){var o=e.other_vars.bundled_plan;window.inEditor&&inEditor()&&makePremium(o.other_vars.plan,o.other_vars.service_id)}fireBillingTransactionEvent(e,"Domain");var i="www."+e.other_vars.sld+"."+e.other_vars.tld;Weebly.Location.all_purchased_domains.push(i),Weebly.Location.custom_domain=i,Weebly.Location.purchased_domain=!0,domainDialog.close(),settingQuickExport=1;var r={};e.other_vars.whoisTax&&(r.tax=e.other_vars.whoisTax,r.amount=e.other_vars.whoisAmount),domainChoiceFinish();break;case"successStockMedia":fireBillingTransactionEvent(e,"StockMedia"),stockMediaPurchased(e.other_vars.media_info);break;case"successSimpleChat":"function"==typeof window.inEditor&&window.inEditor()&&editorApp?(editorApp.vent.triggerCascade("settings:general"),updatList()):homeApp&&homeApp.vent&&homeApp.vent.trigger("simplechat:purchase:success");break;case"designerBillingSetup":fireBillingTransactionEvent(e,"DesignerBilling"),Weebly.Restrictions.designerBillingSetup=!0,Weebly.AllDialogs["designer-billing-setup"]&&(Weebly.AllDialogs["designer-billing-setup"].close(),$("designerBillingSuccessMessage")&&$("designerBillingSuccessMessage").show(),"function"==typeof openDomainContainer?openDomainContainer():exportSite())}if(e.other_vars&&e.other_vars.plan&&e.other_vars.plan.level){var s=e.other_vars.plan.level;Weebly.Restrictions.level=s,"object"==typeof editorApp&&editorApp.vent.trigger("user:upgrade")}}function removeService(e){$("serviceError").innerHTML="",new Ajax.Request(ajax,{parameters:{pos:"removeservice",userServiceId:e,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(t){handlerRemoveService(t,e)},onFailure:errFunc})}function handlerRemoveService(e,t){e.responseText.match("%%SUCCESS%%")?$(t).innerHTML="<em>This service has been removed.</em>":e.responseText.match("%%SUCCESSREFUND%%")?$(t).innerHTML="<em>"+_W.utl("html.weebly.libraries.weebly_utils_16")+"</em>":$("serviceError").innerHTML=e.responseText}function onDropElements(e){var t=e.getElementsByTagName("input");if(t&&t[0]&&t[0].value&&t[0].value.startsWith("def:")){var i=t[0].value.match(/def:(\d*)/)[1];allowProElementsTrial||Weebly.Restrictions.hasAccess(i)||alertPremiumFeature(i)}}function deleteAccount(){new Ajax.Request(ajax,{parameters:{pos:"deleteaccount",feedback:$("deleteAccountComments").value,email:$("deleteAccountEmailPref").checked,token:Weebly.RequestToken,cookie:document.cookie},onSuccess:handlerDeleteAccount,onFailure:errFunc})}function handlerDeleteAccount(e){e.responseText.match("%%SUCCESS%%")&&(document.location="/index.html?account-deleted")}function goModerateBlog(e,t,i){currentBlog.saving=0,currentBlog.blogId=e,currentBlog.params=t,i=i||"comments",new Ajax.Request(ajax,{parameters:{pos:"blogmoderateblog",blogid:e,params:t,cookie:document.cookie,token:Weebly.RequestToken},onFailure:errFunc,onException:exceptionFunc,onSuccess:handlerModerateBlog(i)})}function handlerModerateBlog(e){return function(t){var i=new Weebly.Dialog("blog-manage-"+e+"-dialog",{modal:!1,showClose:!0,closeFunction:function(){i.close(),Pages.go("main")}});i.open(),currentBlog.settingsDialog=i,$("blog-manage-"+e+"-dialog-content").update(t.responseText),"comments"==e&&($("blog_moderation_iframe").addClassName("is-overlay"),$$(".blog-moderation-filter a.all")[0].onclick())}}function showBlogComments(e,t){if(null===e){var i=$$(".blog-moderation-filter")[0].select("a.selected");e=i?i[0].readAttribute("class").replace("selected","").strip():"all"}var n=$("site-blogs-select").select("option[selected]")[0],t=n.readAttribute("value"),o=n.readAttribute("data-site-id"),r=n.readAttribute("data-user-id"),i=$$(".blog-moderation-filter a.selected");i.length&&i[0].removeClassName("selected"),$$(".blog-moderation-filter a."+e)[0].addClassName("selected");var s=getBlogCommentsUrl(e,t,o,r);$("blog_moderation_iframe").src=s}function getBlogCommentsUrl(e,t,i,n){var o=new Hash({blog_id:t,type:e,site_id:i,user_id:n,size:"slim",r:parseInt(99999999*Math.random())});return"viewBlogModeration.php?"+o.toQueryString()}function blogModerationAction(e){var t=$("blog_moderation_iframe");if(t){var i=t.contentWindow;if(i){var n={approve:i.approveComments,"delete":i.deleteComments,spam:i.markSpamComments};n[e]&&n[e]()}}}function changeUserLanguage(e){new Ajax.Request(ajax,{parameters:{pos:"changeuserlanguage",lang:e,cookie:document.cookie,token:Weebly.RequestToken},onFailure:errFunc})}function ieVersion(){var e=navigator.appVersion.match(/MSIE.*?(\d+)/i);return e?parseInt(e[1]):!1}function clearPrefilledInput(e,t){e.value==t&&(e.value="",$(e).setStyle({color:""}))}function getPagePermissionHtml(e,t){return e.each(function(e){t+="<label>",t+="store"!==e.kind&&""===e.extlink?'<input type="checkbox" name="allowed_pages[]" value="'+e.id+'" /> ':"-- ",t+=e.title+"</label>",e.children.size()>0&&(t+='<div class="subpages">',t=getPagePermissionHtml(e.children,t),t+="</div>")}),t}function pushLoading(){_loadingLevel||$("pleaseWait")&&jQuery("#pleaseWait").addClass("loading"),window.W_DEBUG&&window.loadingQueue.push(arguments.callee.caller.toString()),_loadingLevel++}function popLoading(){_loadingLevel>0&&(_loadingLevel--,window.W_DEBUG&&window.loadingQueue.pop()),_loadingLevel||$("pleaseWait")&&jQuery("#pleaseWait").removeClass("loading")}function htmlEscape(e){return void 0===e||null===e?"":"number"==typeof e?e.toString():e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;")}function eventStop(e){e.stop()}function handleDesignerPublishCodes(e,t,i){if(i=i&&$(i)||$("exportText"),e.responseText.match(/%%PURCHASESITES%%/)&&(Weebly.AllDialogs["publishing-status"]&&Weebly.AllDialogs["publishing-status"].close(),showDesignerBillingSetup()),e.responseText.match(/%%GOLIVEWARNING%%/)){var n=i.up(".titled-box");i.show().innerHTML=$("designer-publish-message").innerHTML,Weebly.AllDialogs[n.id].positionDialog()}e.responseText.match(/%%CARDSETUPREQUIRED%%/)&&(i.show().innerHTML='<div style="font-family: Helvetica, Arial, Verdana, sans-serif; font-size: 16px; line-height:1.5; text-align:left; margin-bottom:10px;">Sites cannot be published live until the account holder has setup a credit card</div>'),e.responseText.match(/%%CANTCREATECHARGE%%/)&&(i.show().innerHTML="Error:E119190")}function showDesignerBillingSetup(){Weebly.Restrictions.isDesignerMaster?($("designer-billing-setup-body").update("Before publishing your first website live, you need to setup a billing method."),$("setup-buttons-master").show(),$("setup-buttons-admin").hide()):($("designer-billing-setup-body").update(_W.utl("html.weebly.libraries.weebly_utils_17")),$("setup-buttons-master").hide()),new Weebly.Dialog($("designer-billing-setup"),{modal:!0}).open()}function getInnerWidth(e){return e.offsetWidth-(parseInt(e.getStyle("border-left-width"))||0)-(parseInt(e.getStyle("border-right-width"))||0)-(parseInt(e.getStyle("padding-left"))||0)-(parseInt(e.getStyle("padding-right"))||0)}function ensureObject(e){return e=e||{},0===e.length&&(e={}),e}function hashEach(e,t){$H(e).each(function(e){t(e.key,e.value)})}function hashMap(e,t){var i={};return $H(e).each(function(e){i[e.key]=t(e.key,e.value)}),i}function hashSearch(e,t){if(!t)return $H(e).values()[0];if("object"!=typeof t)return e[t];for(var i in e){var n=e[i];if("object"==typeof n)for(var o in t){var r=t[o];if("function"!=typeof r&&n[o]==r)return n}}}function arraySearch(e,t){if(!t)return e[0];if("object"==typeof t)for(var i=0;i<e.length;i++){var n=e[i];if("object"==typeof n)for(var o in t){var r=t[o];if("function"!=typeof r&&n[o]==r)return n}}}function preventParentScroll(e){attachMousewheelListener(e,function(t,i){Event.stop(t),e.scrollTop-=i})}function attachMousewheelListener(e,t){var i=function(e){var i=e.wheelDelta?e.wheelDelta/4:-(e.detail||0);return t.call(this,e,i)};e.observe(getMousewheelEventName(),i)}function getMousewheelEventName(){var e="_mousewheelEventName",t="mousewheel",i="DOMMouseScroll";if(!window[e]){var n=document.createElement("div");window[e]=void 0!==n["on"+t]?t:i,n=null}return window[e]}function getTextNodesIn(e,t){function i(e){if(3==e.nodeType)(t||!o.test(e.nodeValue))&&n.push(e);else for(var r=0,s=e.childNodes.length;s>r;++r)i(e.childNodes[r]);
}var n=[],o=/^\s*$/;return i(e),n}function doEvent(e){new Ajax.Request(ajax,{parameters:{pos:"doevent",event:e,cookie:document.cookie,token:Weebly.RequestToken}})}function confirmBouncedEmail(e,t){var i=e.getOffsetParent().id.replace("user-note-","");removeUserNote(i),new Ajax.Request(ajax,{parameters:{pos:"confirmBouncedEmail",email:t,cookie:document.cookie,token:Weebly.RequestToken}})}function preventAJAX(){if(window.inEditor&&inEditor()){var e=require("config");if(e.chromeless)try{throw new Error("Invalid ajax request attempted in script")}catch(t){return console.log(t.message),!0}}return!1}function formatMoney(e,t,i){var n="",t=t||"USD",o=parseFloat(e);i=i?i.replace("_","-"):"en-US";try{n=o.toLocaleString(i,{style:"currency",currency:t})}catch(r){n=o.toLocaleString("en-US",{style:"currency",currency:t})}return"MXN"==t&&(n=n.replace(/(MX)?\$/,"MX$")),"CAD"==t&&(n=n.replace(/(CA)?\$/,"CA$")),"AUD"==t&&(n=n.replace(/(A)?\$/,"A$")),n}function isProtocolSecure(){return"https:"==document.location.protocol}function getInnerHeight(){return self.innerHeight?self.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body?document.body.clientHeight:void 0}function RGBColor(e){this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var i in t)e==i&&(e=t[i]);for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],o=0;o<n.length;o++){var r=n[o].re,s=n[o].process,a=r.exec(e);a&&(channels=s(a),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),i=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==i.length&&(i="0"+i),"#"+e+t+i},this.getHelpXML=function(){for(var e=new Array,i=0;i<n.length;i++)for(var o=n[i].example,r=0;r<o.length;r++)e[e.length]=o[r];for(var s in t)e[e.length]=s;var a=document.createElement("ul");a.setAttribute("id","rgbcolor-examples");for(var i=0;i<e.length;i++)try{var l=document.createElement("li"),c=new RGBColor(e[i]),d=document.createElement("div");d.style.cssText="margin: 3px; border: 1px solid black; background:"+c.toHex()+"; color:"+c.toHex(),d.appendChild(document.createTextNode("test"));var u=document.createTextNode(" "+e[i]+" -> "+c.toRGB()+" -> "+c.toHex());l.appendChild(d),l.appendChild(u),a.appendChild(l)}catch(h){}return a}}function onYouTubePlayerAPIReady(){mejs.YouTubeApi.iFrameReady()}function onYouTubePlayerReady(e){mejs.YouTubeApi.flashReady(e)}function showTip(e,t,i,n,o,r,s){var a=jQuery;n||(n=tipsShown,tipsShown++);var l=a("string"==typeof t?"#"+t:t);if(1==l.length){1==o?r=r||200:r||(r=400);var c=r+11+11,d=a(document.body).width(),u=l.offset(),h={height:l.height(),width:l.width()},p=u.top+h.height+12,f=u.left+h.width/2-c/2;20>f?f=20:f+c>d-20&&(f=d-20-c);var m=u.left+h.width/2-13-f;a("#tips").prepend("<div id='tip"+n+"' class='tooltip' style='display:none'><div class='carrot' style='left:"+m+"px'></div><a class='close'></a><div class='content' style='width:"+r+"px'>"+e+"</div></div>");var g=a("#tip"+n).outerHeight();p+g>a(window).height()&&(p=u.top-g-10,a("#tip"+n+" .carrot").remove()),s&&(tooltipCallbacks["tip"+n]=s),a("#tip"+n).css({position:"absolute",top:p+"px",left:f+"px"}).on("mouseup",function(e){e.stop()}),a("#tip"+n+" a.close").on("click",function(){hideTip("tip"+n,1)}),1==o?a("#tip"+n).show():2==o?a("#tip"+n).fadeIn():setTimeout(function(){a("#tip"+n).css({position:"absolute",left:f+"px",top:getInnerHeight()/2+h.height+"px"}),a("#tip"+n).show(),a("#tip"+n).animate({top:p+"px"},1e3,"easeOutBounce")},500)}}function hideTip(e,t){var i=jQuery;if(e&&i("#"+e).length){var n=tooltipCallbacks[e];n&&delete tooltipCallbacks[e],1==t?(i("#"+e).hide(),i("#tips").remove("#"+e),n&&n()):i("#"+e).fadeOut(function(){i("#"+e).length&&i("#"+e).parent()==i("#tips")&&(i("#tips").remove(i("#"+e)),n&&n())})}}function hideAllTips(){for(var e=jQuery,t=0;t<e("#tips").children().length;t++)hideTip(e("#tips").children()[t].id)}function inEditor(){return!0}function submitExternal(e){$(e+"ErrorDiv").style.display="none",$("externalSubmitBtn").style.opacity=.5,$("externalSubmitBtn").style.filter="alpha(opacity=50)",$("externalSubmitBtn").style.display="inline-block";var t=Form.serialize(e+"_form",!0);t.pos="externalaccount",t.type=e,t.cookie=document.cookie,t.token=Weebly.RequestToken,new Ajax.Request(ajax,{parameters:t,onSuccess:function(t){handlerSubmitExternal(t,e)},onFailure:errFunc,bgRequest:!0})}function handlerSubmitExternal(e,t){if(e.responseText.match("SUCCESS")){var i=e.responseText.replace("SUCCESS:","");remoteAccounts[t]={remoteSite:t,remoteId:i},Relay.execute("remoteAccount:update",t,i),updateList(),Pages.go("main"),Weebly.AllDialogs[t].close(),$(t+"ErrorDiv").style.display="none",$("externalSubmitBtn").style.opacity=1,$("externalSubmitBtn").style.filter="alpha(opacity=100)",$("externalSubmitBtn").style.display="none"}else e.responseText.match("ERROR")||(e.responseText=_W.utl("html.weebly.libraries.weebly_main_1")),$(t+"ErrorDiv").innerHTML=e.responseText,$(t+"ErrorDiv").style.display="block",$(t+"ErrorDiv").setStyle({color:"#FF0000"}),$("externalSubmitBtn").style.opacity=1,$("externalSubmitBtn").style.filter="alpha(opacity=100)",$("externalSubmitBtn").style.display="none"}function safeCumulativeOffset(e){return jQuery(e).offset()}function handlerDragEndSplitpane(e,t,i,n){for(var o=e.serialize(),r=o.split(/&/),s=new Array,a=0;a<r.length;a++){var l=r[a].split(/=/);s[l[0]]=l[1]}for(var c=i.split(/-/),d=new Array,a=0;a<c.length;a++)d.push(c[a]+"-"+s["div"+(a+1)+"_width"]);var u=d.join(":");Weebly.Slideshow.updateSize()&&$(n).select(".columnlist").each(MultiColumnElement.resizeColumns),new Ajax.Request(ajax,{parameters:{pos:"savecolumn",elementid:n,width:u,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:handlerFuncDragEndSplitpane,onFailure:errFunc,bgRequest:!0})}function handlerFuncDragEndSplitpane(e){}function flashMouseUpHandler(e,t){if(document.createEvent){var i=document.createEvent("MouseEvents");i.initMouseEvent("mouseup",!0,!1,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,null),t.parentNode.dispatchEvent(i)}}function clickHandler(e,t){if(hideAllTips(!0),!Weebly.ImageGallery.isSorting){var i;if(t)i=$(t+"");else{if(!e)var e=window.event;e.target?i=e.target:e.srcElement&&(i=e.srcElement),3==i.nodeType&&(i=i.parentNode)}if(!i||"weebly_image_extras_helper"!==i.id){if(i&&"string"==typeof i.id){if(i.id.match(/coverbox/)&&(i=i.up(".element")),jQuery(i).closest("#form-cover, #link-info-box, .weebly-dialog, #image-chooser, .w-element-controls").length)return;var n=jQuery(i).closest(".editable-text")}if(n.is("h2, p, div")&&!n.hasClass("wsite-button-inner")){var o=n.get(0);o&&o.ondblclick&&o.ondblclick(),Weebly.Elements.unselectElement()}else if(n.attr("id")&&n.attr("id").match(/[0-9]Edit/));else if(i===document.body||isAParent("editMenu",i)||isAParent("commerce_editor_product_short_description_controls",i)||isAParent("createLink",i)||isAParent("editmenu-color-chooser",i)||isAParentMatch(/menuBar(Advanced)?Div/,i)||isAParent("notifications",i)||isAParentByClass("customhtml_textarea",i)||isAParent("flashContainer",i)||isInitialImage(i)||isInitialImage(i.previous(".galleryImage"))||isPageLayoutImage(i)||isInitialVideo(i)||isAPlatformElement(i)||isAParentByClass("product-pagination",i)||isAParentByClass("js-single-row-controls",i)||!isAParent(document,i))"string"==typeof i.id&&"colorSwatch"==i.id&&myColorPicker.toggle(e);else{if(editBoxSelectingText||optionsBoxSelectingText)return void(optionsBoxSelectingText=!1);var r=i.up("li");if(r&&r.hasClassName("wsite-multicol-li"))return void Weebly.Elements.unselectElement();if(isAParentByClass("element",i)){var s=$(jQuery(i).closest(".element")[0]);Weebly.Elements.selectElement(s)}else isAParentByClass("wsite-header",i)?Weebly.Elements.unselectElement():0===jQuery("#elementSettingsWrapper").find(e.target).length&&0===jQuery("#orbitDialogContainer").find(e.target).length&&0===jQuery("#element-ui-container").find(e.target).length&&Weebly.Elements.unselectElement()}editBoxSelectingText=!1}}}function saveProperties(e,t,i){if(uploadInProgress>0)showError(_W.utl("html.weebly.libraries.weebly_main_2"));else{Element.setStyle("errorProperties",{display:"none"});for(var n="",o="",r=$("propertiesBasic").getElementsByTagName("td"),s=r.length,a=!1,l=0;s>l;l++)for(var c=r[l].getElementsByTagName("form"),d=0;d<c.length;d++){var u,h=c[d].childNodes[0],p=h.name;if(u="checkbox"==h.type?c[d].childNodes[0].checked?1:0:c[d].childNodes[0].value,o+=p+String.fromCharCode(3)+u+String.fromCharCode(2),"enable_nav_more"==p&&(DISABLE_NAV_MORE=!u,Relay.execute("theme:DISABLE_NAV_MORE",window.DISABLE_NAV_MORE,!1)),"site_title"==p){currentSiteTitle=c[d].childNodes[0].value;var f=$("wsite-title");f&&(f.innerHTML=currentSiteTitle)}"hide_title"==p&&(hideTitle="1"==c[d].childNodes[0].value),"copyright_show"==p&&(!a&&parseInt(c[d].childNodes[0].value)?updateFooterTextShown(!0):updateFooterTextShown(!1)),"copyright_text"==p&&(updateFooterText(c[d].childNodes[0].value),c[d].childNodes[0].value||(a=!0)),"site_password"==p&&Weebly.Restrictions.hasAccess("editable_site_password")&&(newSitePassword=c[d].childNodes[0].value,editorApp.request("site-password:set",newSitePassword))}for(var m=$("propertiesAdvanced").getElementsByTagName("td"),g=m.length,l=0;g>l;l++)for(var c=m[l].getElementsByTagName("form"),d=0;d<c.length;d++)n+=c[d].childNodes[0].name+String.fromCharCode(3)+c[d].childNodes[0].value+String.fromCharCode(2);new Ajax.Request(ajax,{parameters:{pos:e,reqid:t,keys:o+n,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){handlerFuncSaveProperties(e,i)},onFailure:errFunc,bgRequest:!0})}}function handlerFuncSaveProperties(e,t){if(1==e.responseText.isJSON()){var i=e.responseText.evalJSON();0==i.result&&showDeniedAction(i.error)}e.responseText.indexOf("RELOAD")>=0&&window.location.reload(),e.responseText.indexOf("the following problems")>0?($("errorProperties").innerHTML=e.responseText,Effect.Appear("errorProperties",{duration:.5})):(updateList(),t||Pages.go("main"))}function isAPlatformElement(e){return jQuery(e).closest(".platform-element-settings").length>0}function goBlogPage(e){resetScrollTop=1,e=e.startsWith("/")?e:"/"+e;var t=currentPage.replace(/^(\d+).*$/,"$1")+e;Pages.go("updateList",t)}function goCommercePage(e){return require("config").chromeless?void Relay.trigger(RELAY_CONST.EVENTS.NAV_CLICKED,e):(resetScrollTop=1,e=e.startsWith("/")?e:"/"+e,Pages.pageConstructor.editMenu.go(),Pages.go("updateList","0"+e),void clearTimeout(Weebly.Commerce.Editor.shouldUpdateListTimer))}function goNewBlogPost(){currentBlog.saving=0,Pages.go("goBlogPost",1)}function goBlogPost(e,t){Pages.go("goBlogPost",e)}function goPublishPost(e){return 0==settingQuickExport&&!isClientSite&&currentPagePublished?(Weebly.BlogEditor.allowSwitch=!0,_W.domainMenuLocation="repeat-use",Pages.go("domainMenu","blogpostpublish",jQuery.extend(!0,{},currentBlog)),void(Weebly.BlogEditor.allowSwitch=!1)):void(1!=currentBlog.publishingPost&&(currentBlog.publishingPost=1,1==currentBlog.postId&&(currentBlog.saving=1),Weebly.BlogEditor.updateCurrentBlog(),new Ajax.Request(ajax,{bgRequest:!0,parameters:{pos:"blogpublish",pageid:e,title:currentBlog.title,categories:"",comments:"",date:currentBlog.date,shares:currentBlog.shares,cookie:document.cookie,token:Weebly.RequestToken},onComplete:function(){currentBlog.publishingPost=0},onFailure:errFunc,onException:exceptionFunc,onCreate:function(){currentPagePublished&&PublishWindow.open(NewBlogPost)},onSuccess:function(e){var t=e.responseText.evalJSON(!0);t&&(currentPagePublished?(PublishWindow.defer(t.html),Weebly.BlogEditor.allowSwitch=!0,Pages.go("blogPostPublishSuccess"),Weebly.BlogEditor.allowSwitch=!1):Pages.go("updateList",currentPage))}})))}function goDeleteComment(e,t){t=t?"1":"0";var i="data-blog-comment-parent-id",n=$(e),o=n.readAttribute(i),r=$$("div["+i+"="+o+"]"),s=function(e){var t=[];return $$("div["+i+"="+e+"]").each(function(e){t.push(e),t=t.concat(s(e.readAttribute("id")))}),t},a=function(t){var i=t.responseText.evalJSON(!0);if(i)if(updateCommentCount(-1),"deleted"==i.action){if(o&&1==r.length){var a=$(o).select("span.delete-replies")[0];if(a){var l=a.select("input")[0];l.writeAttribute("checked"),a.hide()}}i.deletedReplies&&s(e).each(Element.remove),new Effect.Fade(n,{afterFinish:Element.remove.curry(n)})}else if("hidden"==i.action){var c=n.select(".blogCommentText p")[0];c.update("<em>"+i.hiddenText+"</em>");var d=n.select(".delete-replies input[type=checkbox]")[0];d.writeAttribute("checked"),d.writeAttribute("disabled")}};new Ajax.Request(ajax,{parameters:{pos:"blogdeletecomment",commentid:e,deleteReplies:t,cookie:document.cookie,token:Weebly.RequestToken},onFailure:errFunc,onException:exceptionFunc,onSuccess:a})}function updateCommentCount(e){var t=document.getElementsByClassName("blog-comments")[0].children[0],i=document.getElementsByClassName("blog-comments-bottom")[0].children[0],n=Number(t.innerHTML.split(" ")[0])+e,o=formatCommentCount(n);t.innerHTML=o,i.innerHTML=o}function formatCommentCount(e){if(1==e)return _W.utl("html.weebly.libraries.weebly_main_32");var t=_W.utl("html.weebly.libraries.weebly_main_33","plural or 0");return t.replace("{{numberOfComments}}",e)}function resetBlogGlobals(){currentBlog.postId=0,currentBlog.title="",currentBlog.date="",currentBlog.shares=""}function handlerTrackback(e){$("trackback-url").value="",e.responseText.match("%%SUCCESS%")?$("trackback-status").innerHTML=_W.utl("html.weebly.libraries.weebly_main_3"):$("trackback-status").innerHTML=_W.utl("html.weebly.libraries.weebly_main_4")}function calendarCallback(e,t){var i=$("blogTable").select(".blog-date span.date-text")[0];i.innerHTML=t;var n=$("blog-date-field");n.value=t,n.hidden_change&&n.hidden_change()}function handlerDisplayPageProperties(e){$("saveProperties").innerHTML="<div style='height: 50px; margin-top: 20px;'><a href='#' style='float: left;' onClick=\"saveProperties('editpage', '"+currentPage+"'); return false;\"><img src='https://"+editorStatic+_W.tli("/weebly/images/savebtn.jpg")+"' border='0'/></a><div style='margin: 23px 0 0 5px; font-size: 14px; float: left;'> "+_W.utl("html.weebly.libraries.weebly_main_5")+"&nbsp;<a href='#' onClick=\"Pages.go('main'); return false;\" style='position: absolute; font-weight: bold; font-size: 14px; color: #CE2424; text-decoration: underline;'>cancel</a></div></div>",$("propertiesTitle").innerHTML=_W.utl("html.weebly.libraries.weebly_main_6");var t=$("propertiesBasic");t.innerHTML="<br/><p>"+_W.utl("html.weebly.libraries.weebly_main_7")+"</p><br/>"+e.responseText,Element.hide("propertiesBasicHeader"),Element.hide("textEditBox"),$("textEditorBox").value="",Element.hide("propertiesAdvancedHeader"),Element.hide("propertiesAdvanced"),$("propertiesAdvanced").innerHTML="",showProperties(45),Element.show("propertiesBasic")}function displayUserSettings(){new Ajax.Request(ajax,{parameters:{pos:"usersettings",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:handlerDisplayUserSettings,onFailure:errFunc,onException:exceptionFunc})}function handlerDisplayUserSettings(e){$("saveProperties").innerHTML="<div style='height: 50px; margin-top: 20px;'><a href='#' style='float: left;' onClick=\"saveProperties('usersettings', ''); return false;\"><img src='https://"+editorStatic+_W.tli("/weebly/images/savebtn.jpg")+"' border='0'/></a><div style='margin: 23px 0 0 5px; font-size: 14px; float: left;'> "+_W.utl("html.weebly.libraries.weebly_main_8")+"&nbsp;<a href='#' onClick=\"Pages.go('main'); return false;\" style='position: absolute; font-weight: bold; font-size: 14px; color: #CE2424; text-decoration: underline;'>"+_W.utl("html.weebly.libraries.weebly_main_9")+"</a></div></div>",$("propertiesTitle").innerHTML=_W.utl("html.weebly.libraries.weebly_main_10");var t=$("propertiesBasic");t.innerHTML=e.responseText,Element.hide("propertiesBasicHeader"),Element.hide("textEditBox"),$("textEditorBox").value="",Element.hide("propertiesAdvancedHeader"),Element.hide("propertiesAdvanced"),$("propertiesAdvanced").innerHTML="",showProperties(),Element.show("propertiesBasic")}function displaySiteSettings(e){Weebly.SlidingPanel.show("site-settings-container")}function handlerFunctionHttps(e){if(e.match(/%%SUCCESS%%/)){var t=e.split("|");t=t[1],completeDomainPurchase(t)}else $("purchaseDomainLoading")&&$("purchaseDomainLoading").parentNode&&$("purchaseDomainLoading").parentNode.removeChild($("purchaseDomainLoading")),$("purchaseDomain").style.display="block",$("domainError").innerHTML=e}function doClick(e){var t,i=document.getElementById(e);document.createEvent&&(t=document.createEvent("MouseEvents"),t.initMouseEvent?t.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null):t=!1),t?i.dispatchEvent(t):i.click&&i.click()}function exportSite(){0!=settingQuickExport||isDeveloperSite?Pages.go("doExport"):(_W.domainMenuLocation="pre-publish",Pages.go("domainMenu","publish"))}function doExport(e){function t(){new Ajax.Request(ajax,{parameters:Object.extend({pos:"exportsite",cookie:document.cookie,token:Weebly.RequestToken},e),onSuccess:function(e){var t;t=e.responseJSON?e.responseJSON:!1,t&&t.blocked?(Weebly.AllDialogs["publishing-status"].close(),editorApp.bootstrap.publishBlockers=t.blockers,editorApp.vent.trigger("editor:publishBlockers:updated"),editorApp.vent.trigger("editor:publishBlockers:display",t.blockers)):_W.Commerce.RPC.Overview.getUsedCommerceFeatures().done(function(t){t.data=t.data||{},PublishWindow.success(e.responseText,t.data)})},onFailure:errFunc,bgRequest:!0})}e=e||{};var i=0;showPublishingAnimation(),i?setTimeout(t,350):t()}function openVerifyWindow(e){window.open("https://www.weebly.com/weebly/verify.php","Verify","height=600,width=910,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes,dependent=yes");pollMemberVerify(void 0,void 0,e)}function pollMemberVerify(e,t,i){"undefined"==typeof e&&(e=$("memberId").innerHTML,t=$("memberVerifyToken").innerHTML);var n;n="action=checkVerify",n+="&token="+t,n+="&memberId="+e,new Ajax.Request("apps/verifyJSON.php",{parameters:n,evalJSON:!0,bgRequest:!0,onSuccess:function(n){1==n.responseJSON.verified&&(i&&exportSite(),clearTimeout(verifyPoller)),0==n.responseJSON.verified&&(verifyPoller=setTimeout(function(){pollMemberVerify(e,t,i)},3e3))}})}function submitPublishCaptcha(e,t){var i;i="action=verifyResponse&token="+Weebly.RequestToken+"&recaptcha_challenge_field="+e+"&recaptcha_response_field="+t+"&location=sitePublish",new Ajax.Request("apps/captchaJSON.php",{parameters:i,evalJSON:!0,bgRequest:!0,onSuccess:function(e){1==e.responseJSON.verified&&(showPublishingAnimation(),doExport()),0==e.responseJSON.verified&&(Recaptcha.reload(),$("publish-captcha-error").show())}})}function submitPublishRecaptcha(e){var t,i=jQuery("#recaptcha-button");i.hasClass("disabled")||(i.addClass("disabled"),t="action=verifyResponse&token="+Weebly.RequestToken+"&g_recaptcha_response="+e+"&location=sitePublish",new Ajax.Request("/spam/captcha/verify",{parameters:t,evalJSON:!0,bgRequest:!0,onSuccess:function(e){if(i.removeClass("disabled"),1==e.responseJSON.verified&&(showPublishingAnimation(),doExport()),0==e.responseJSON.verified){var t=jQuery(".g-recaptcha").attr("id");grecaptcha.reset(t),$("publish-captcha-error").show()}},onFailure:errFunc}))}function handlerPreviewSite(e){e.responseText&&window.open("https://"+configSiteName+"/weebly/previewSite.php?req_id="+e.responseText)}function exportSiteZip(){new Ajax.Request(ajax,{parameters:{pos:"exportsitezip",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:handlerExportSiteZip,onFailure:errFunc})}function handlerExportSiteZip(e){e.responseText.match("error")?showError(e.responseText):window.open("https://"+configSiteName+"/weebly/exports/"+userID+"/"+e.responseText+".zip")}function showAbout(){showTip("Thanks for using Weebly!",$("weebly_tab_edit"),"y","101"),setTimeout("hideTip('tip101'); showTip('Weebly was created by David Rusenko, Dan Veltri, and Chris Fanini.', $('weebly_tab_themes'), 'y', '102');",4e3),setTimeout("hideTip('tip102'); showTip('We are!', $('weebly_tab_pages'), 'y', '103');",8e3),setTimeout("hideTip('tip103'); showTip('Penn State!<br/><br/><img src=\"https://rusenko.weebly.com/drusenko/pennstate.jpg\" width=\"300\" height=\"220\"/>', $('weebly_tab_settings'), 'w', '104');",14e3),setTimeout("hideTip('tip104');",2e4)}function showPublishingAnimation(){publishingAnim=1,$("publishing-status-title").update(_W.utl("html.weebly.libraries.weebly_main_11")),Weebly.Restrictions.hasAccess("ftp_publish")?$("exportText").innerHTML='<div style="text-align: center;"><img src="https://'+editorStatic+'/weebly/images/ajax-loader.gif"/><br/><br/>'+_W.utl("html.weebly.libraries.weebly_main_12")+"</div><br/><br/>":$("exportText").innerHTML='<div style="text-align: center;"><img src="https://'+editorStatic+'/weebly/images/ajax-loader.gif"/><br/><br/>'+_W.utl("html.weebly.libraries.weebly_main_13")+"</div><br/><br/>"}function expandAdvanced(){$("propertiesAdvancedHeader").innerHTML='<br/><h3><a href="#" onClick="collapseAdvanced();" style="color: black;"><img border="0" src="https://'+editorStatic+'/weebly/images/arrow_down.gif"/> '+_W.utl("html.weebly.libraries.weebly_main_14")+"</a></h3>",Element.setStyle("propertiesAdvanced",{display:"block"})}function collapseAdvanced(){Element.setStyle("propertiesAdvanced",{display:"none"}),$("propertiesAdvancedHeader").innerHTML='<br/><h3><a href="#" onClick="expandAdvanced();" style="color: black;"><img border="0" src="https://'+editorStatic+'/weebly/images/arrow_right.gif"/> '+_W.utl("html.weebly.libraries.weebly_main_15")+"</a></h3>"}function showProperties(e){e=e?e:145,$("textEditor").style.top=e+"px",Element.show("scroll_container_properties"),1==settingAnimations?window.setTimeout("Effect.Appear('textEditor')",1e3):Element.show("textEditor")}function fadeProperties(){var e=require("editor/app");e.execute("linker:close"),Element.hide("scroll_container_properties")}function fadeMain(){Element.setStyle("grayedOut",{height:getInnerHeight()-35+"px"}),1==settingAnimations?Effect.Appear("grayedOut"):Element.show("grayedOut")}function showMain(){1==settingAnimations?(setTimeout("Effect.Fade('grayedOut')",1e3),Element.setStyle("grayedOut",{visibility:"visible"})):Element.hide("grayedOut")}function displayThemes(){Element.setStyle("themes",{top:Position.realOffset(window)[1]+30+"px"}),1==settingAnimations?(Effect.Appear("themes"),Effect.Appear("themeChoices",{duration:.5})):(Element.show("themes"),Element.show("themeChoices")),currentThemesPage=1}function fadeThemes(){1==settingAnimations?window.setTimeout("Effect.Fade('themes')",1e3):Element.hide("themes"),Element.setStyle("nextThemes",{display:"block"}),Element.setStyle("previousThemes",{display:"none"}),currentThemesPage=0}function refreshAllCustomHtml(){$$("iframe.custom-html-frame").each(function(e){e.src&&(e.src=e.src+"&w="+(new Date).getTime())})}function hideElement(e){Element.hide(e)}function showElement(e){Element.setStyle(e,{display:"block",visibility:"visible"})}function validateNoGo(e){}function contentDecode(e){return e=e.replace(new RegExp("\\+","g")," "),unescape(e)}function contentEncode(e){return e=escape(e),e=e.replace(new RegExp("\\+","g"),"%2B"),e.replace(new RegExp("%20","g"),"+")}function showUploader(e){Element.hide("uploadSize"),Element.show("imageUploader"),imageUploadSize=e}function getScrollTop(){var e;return self.pageYOffset?e=self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e}function setProperty(e,t,i){if("string"==typeof t)document.getElementsByClassName(t).each(function(t){$(t).style[e]=i});else if("object"==typeof t)for(var n=0;n<t.length;n++)setProperty(e,t[n],i)}function makePremium(e,t){if(Weebly.Restrictions.level!=e.level){var i=require("editor/app");Weebly.Restrictions.addService(t),Weebly.Restrictions.level=e.level,Weebly.Restrictions.is_trial=!1,Weebly.Restrictions.days_left=-1,initPlanDropdown(),hideUpgradePrompts(),hideAllTips(),showTip(_W.utl("html.weebly.libraries.weebly_main_28").replace("{{plan_name}}",e.noun),jQuery("#w-editor-top .plan-dropdown-toggle")[0],"y"),i.build.syncRestrictions(),Weebly.SiteSettings&&Weebly.SiteSettings.updatePremium(e.level),i.vent.trigger("plan:upgraded")}}function hideUpgradePrompts(){jQuery(".upgrade_prompt").hide()}function saveSiteTitle(){currentSiteTitle=$("newSiteTitle").value,new Ajax.Request(ajax,{parameters:{pos:"sitetitle",newtitle:currentSiteTitle,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:handlerSaveSiteTitle,onFailure:errFunc});var e=$("wsite-title");e&&(e.innerHTML=currentSiteTitle)}function handlerSaveSiteTitle(e){settingQuickExport||isClientSite||"edstudent"==source?Pages.go("main"):(_W.domainMenuLocation="repeat-use",Pages.go("domainMenu"))}function load_twitter(){$("twitterMessage").value="I just updated my "+Weebly.PROPERTY_NAME+" website, check it out: "+currentSiteLocation,$("twitter-publish").style.display="block"}function tweet(){new Ajax.Request(ajax,{parameters:{pos:"tweet",username:$("twitterUser").value,password:$("twitterPass").value,message:$("twitterMessage").value,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:handlerTweet,onFailure:errFunc})}function handlerTweet(e){$("twitter-publish").style.display="none"}function load_email(){new Ajax.Request(ajax,{parameters:{pos:"doevent",event:"tellFriendsPublish",cookie:document.cookie,token:Weebly.RequestToken}});var e="I just updated my website, "+currentSiteTitle+", and thought you'd like to check it out. You can get to the site by visiting: \n\n"+currentSiteLocation+"\n\n"+Weebly.EMAIL_FOOTER;abookwin=window.open("/weebly/apps/abook.php?type=update&message="+encodeURIComponent(e),"abook","toolbar=0,status=0,width=700,height=526"),setTimeout("abookwin.focus()",300)}function uploadFaviconStart(){if(!faviconUploading&&$("favicon-path").value.length>0){var e=new Element("iframe",{id:"favicon-iframe",name:"favicon-iframe",src:"about:blank"}).setStyle({display:"none"});return e.observe("load",uploadFaviconFinish),$("body").insert({bottom:e}),$("favicon-loading").show(),faviconUploading=!0,!0}return!1}function uploadFaviconFinish(){var e=$("favicon-iframe").contentWindow.document.body.innerHTML,t=e.evalJSON();"success"===t.status?($("current-favicon").show().setAttribute("src",t.imagePath+"?"+Math.floor(10000000001*Math.random())),$("remove-favicon").show(),$("upload-favicon-link").update(_W.utl("html.weebly.libraries.weebly_main_18")),$("favicon-upload-area").hide()):alert(t.message),$("favicon-iframe").remove(),$("favicon-loading").hide(),faviconUploading=!1}function updateProductButton(e,t){var i=$(""+e).down(".product-button"),n=i.src.match(/small|big/),o="buy_now";"add_to_cart"===t&&(o="add_to_cart"),i.src="https://"+editorStatic+"/weebly/images/"+o+"_"+n+".gif"}function makeProductEditable(e){jQuery("#"+e+" .product-image").off("mouseover",initialImageMouseover).on("mouseover",initialImageMouseover);var t=$(""+e).down(".product-title");t&&(t.onclick=function(){showEditBox(t.id,null,{saveCallback:saveProductField,redrawOptions:!0,showOptions:!0})},t.addClassName("editable-text").writeAttribute("contentEditable","true"));var i=$(""+e).down(".product-price");i&&(i.onclick=function(e){showEditBox(i.id,null,{saveCallback:saveProductField,redrawOptions:!0,showOptions:!1})},i.addClassName("editable-text").writeAttribute("contentEditable","true"));var n=$(""+e).down(".product-description");n&&(n.onclick=function(e){showEditBox(n.id,null,{saveCallback:saveProductField,redrawOptions:!0,showOptions:!0})},n.addClassName("editable-text").writeAttribute("contentEditable","true"));var o=$(""+e).down("form");o&&(o.onsubmit=function(){return!1})}function setUserPreference(e,t){new Ajax.Request(ajax,{parameters:{pos:"setuserpreference",key:e,value:t,cookie:document.cookie,token:Weebly.RequestToken},onFailure:errFunc})}function loadExternalLibraries(){if(externalLibariesLoaded=!0,checkContentEditable(),Weebly.Permissions&&Weebly.Permissions.hasContributors){var e;document.observe("mousemove",_.throttle(function(){if(!e||"pending"!==e.state()){var t=(new Date).getTime(),i=Weebly.lastMouseMove||t;t-i>3e5&&(e=checkForPageUpdate()),Weebly.lastMouseMove=t}},1e3))}}function showMerchantSettingsOption(){if($("site_settings_merchantaccount"))switch($("site_settings_paypal").hide(),$F("site_settings_merchantaccount")){case"paypal":$("site_settings_paypal").show(),$("site_settings_curr_warning").hide(),
$("site_settings_currency").enable()}}function editPollDaddy(e,t,i){Relay.execute("polldaddy:edit",t,i)}function checkClientDomain(){new Ajax.Request(ajax,{parameters:{pos:"checkclientdomain",domain:$("client-domain").value,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){$("purchaseClientSiteTitlePreview").hide(),$("purchaseClientSiteTitleSetup").show(),$("purchaseClientSiteBodyPreview").hide(),"%%SUCCESS%%"==e.responseText?($("purchaseClientSiteBodySuccess").show(),$("purchaseClientSiteBodyInstructions").hide()):($("purchaseClientSiteBodySuccess").hide(),$("purchaseClientSiteBodyInstructions").show()),$$(".client-chosen-domain").invoke("update",$("client-domain").value)}})}function saveClientDomain(){new Ajax.Request(ajax,{parameters:{pos:"savedomain",domain:$("client-domain").value,type:"domain",continue_not_configured:"1",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){e.responseText.length<2||e.responseText.match("%%notconfigured%%")?(clientPreviewDialog.close(),Pages.go("exportSite")):$("client-domain-error").update(e.responseText)},onError:errFunc,onException:errFunc})}function loadClientPreview(){$("purchaseClientSiteTitlePreview").show(),$("purchaseClientSiteTitleSetup").hide(),$("purchaseClientSiteBodyPreview").show(),$("purchaseClientSiteBodySuccess").hide(),$("purchaseClientSiteBodyInstructions").hide(),new Ajax.Request(ajax,{parameters:{pos:"getclientpreviewaddress",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){var t='<a href="'+e.responseText+'" target="_blank">'+e.responseText+"</a>";$("previewAddress").update(t)}}),clientPreviewDialog=new Weebly.Dialog($("purchaseClientSite"),{modal:!0}),clientPreviewDialog.open()}function isInitialVideo(e){return isInitialVideoSrc(e.src||"")}function isInitialVideoSrc(e){return e.match(/video_click_to_upload\.jpg/)&&!e.match(/uploading=1/)}function updateContributorsList(e){if(Weebly.Contributors=$H(e.evalJSON()),!e.match(/^\[\]/)&&Weebly.Contributors.size()>0){var t="";Weebly.Contributors.each(function(e){var i=e.value,n="<tr>";n+='<td class="email-cell">'+i.email+"</td>",n+='<td class="role-cell">'+i.display_role+' <a href="#" onclick="editContributor(\''+e.key+"', "+!i.user_id+')" class="btn edit-contributor"><span class="bi">Edit</span></a></td>',n+='<td class="login-cell">'+(i.last_login||'Emailed. <a href="http://www.weebly.com/weebly/contributors.php?user='+userID+"&pc="+e.key+'" target="_blank" class="invitation-link">Invitation</a> not accepted yet.')+"</td>",n+='<td class="remove-column"><a href="#" onclick="deleteContributor(\''+e.key+"', "+!i.user_id+')" class="btn remove-contributor"><span class="bi">Remove Access</span></a></td>',n+="</tr>",t+=n}),$("contributor-table-body").update(t),$("empty-contributor-list").hide()}else $("contributor-table-body").update(""),$("empty-contributor-list").show()}function openEditContributors(){new Weebly.Dialog("edit-contributors",{modal:!0}).open();var e=require("editor/page-manager/pages");$("author-pages-selector").update(getPagePermissionHtml(e.toJSON(),"")),resetEditContributors()}function resetEditContributors(){$("contributor-emails").show(),$("editors-emails").update("").value="",$("editors-invitation").update("").value="",$("edit-contributors-title").update(_W.utl("html.weebly.libraries.weebly_main_19")),$("contributors-customize-email").show(),$("edit-contributor-user-id").value="",$("edit-contributor-pc-id").value="",$("edit-contributors-button").update("Add Editors"),roleSelect("admin",!0),$$(".multiple-choice-box-selected").invoke("removeClassName","multiple-choice-box-selected");var e=$("role-admin").select(".multiple-choice-box-inner-left input")[0];e.checked=!0,e.checked=!1,$("edit-contributors-form").disable_select_pages[0].checked=!0,$("author-page-chooser").hide(),$("edit-contributors-form").disable_stats.checked=!1,$("edit-contributors-form").disable_form.checked=!1,$("edit-contributors-form").disable_comments.checked=!1,$("edit-contributors-error").update("")}function editContributor(e,t){openEditContributors(),$("contributor-emails").hide(),$("contributors-customize-email").hide(),t?$("edit-contributor-pc-id").value=e:$("edit-contributor-user-id").value=e,$("edit-contributors-button").update("Save Settings");var i=Weebly.Contributors.get(e);switch($("edit-contributors-title").update("Edit: "+i.email.truncate(20)),i.role){case"admin":roleSelect("admin");break;case"author":roleSelect("author"),i.restrict_pages||i.allowed_pages?($("edit-contributors-form").disable_select_pages[1].checked=!0,$("author-page-chooser").show(),$("author-page-chooser").select("input").each(function(e){i.allowed_pages.include(e.value)?e.checked=!0:e.checked=!1})):($("author-page-chooser").hide(),$("edit-contributors-form").disable_select_pages.checked=!1),$("edit-contributors-form").disable_publish.checked=!!i.disable_publishing;break;case"dashboard":roleSelect("dashboard"),i.view_stats||($("edit-contributors-form").disable_stats.checked=!0),i.manage_form_entries||($("edit-contributors-form").disable_form.checked=!0),i.moderate_comments||($("edit-contributors-form").disable_comments.checked=!0)}Weebly.AllDialogs["edit-contributors"].positionDialog()}function resizeContributorInput(e){e=$(e);var t=Math.min(30*Math.floor(e.textLength/70)+30,90);e.setStyle({height:t+"px"})}function roleSelect(e,t){if(Weebly.Restrictions.hasAccess("allow_"+e+"_contributors")){$$(".contributors-role-detail").invoke("hide");var i=$("role-"+e),n=i.select(".contributors-role-detail");n=n&&n[0]?n[0]:null,n&&n.show(),$$(".multiple-choice-box-selected").invoke("removeClassName","multiple-choice-box-selected"),i.addClassName("multiple-choice-box-selected"),t||setTimeout(function(){i.select(".multiple-choice-box-inner-left input")[0].checked=!0},10),resizeRoleBoxes(i)}else editorApp.vent.trigger("billing:upgrade:window",{restrictionID:"allow_"+e+"_contributors",restrictionType:"feature",refer:"contributors"})}function resizeRoleBoxes(e){$$(".multiple-choice-box-inner-left").invoke("setStyle",{height:"auto"});var t=e.select(".multiple-choice-box-inner-left")[0],i=e.select(".multiple-choice-box-inner-right")[0];t.setStyle({height:i.getHeight()-48+"px"}),Weebly.AllDialogs["edit-contributors"].positionDialog()}function submitContributors(){var e=$("edit-contributors-form"),t=e.serialize(!0),i=Weebly.Contributors._object,n=t.emails.replace(/\s/g,"").split(","),o=$("contributor-emails").style.display;if(""===t.emails&&"none"!==o)return void $("edit-contributors-error").update("Please enter at least one email address.");if(!t["contributor-role"])return void $("edit-contributors-error").update(_W.utl("html.weebly.libraries.weebly_main_20"));for(id in i)for(var r=0;r<n.length;r++)if(n[r]===i[id].email)return void $("edit-contributors-error").update(_W.utl("html.weebly.libraries.weebly_main_21")+" "+i[id].email);new Ajax.Request(ajax,{parameters:Object.extend({pos:"savecontributors",cookie:document.cookie,token:Weebly.RequestToken},t),onSuccess:function(e){e.responseText?e.responseText.isJSON()?(updateContributorsList(e.responseText),Weebly.AllDialogs["edit-contributors"].close()):$("edit-contributors-error").update(e.responseText):Weebly.AllDialogs["edit-contributors"].close()}})}function deleteContributor(e,t){var i=Weebly.Contributors.get(e);confirm("Are you sure you want to remove access for "+i.email+"?")&&new Ajax.Request(ajax,{parameters:{pos:"deletecontributor",contributor_user_id:t?null:e,pc_id:t?e:null,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){updateContributorsList(e.responseText)}})}function getPageChooser(e){var t='<div class="page-chooser">',i=require("editor/page-manager/pages");return t+=_getPageChooserHelper(i.toJSON(),e,"",0),t+"</div>"}function _getPageChooserHelper(e,t,i,n){var o=0;switch(n){case 0:break;case 1:o=30;break;default:o=30+25*(n-1)}return e.each(function(e){alt=!alt;var r=pageIsLocked(e.id,t),s=canGoToPage(e.id,t),a='<span class="page-chooser-icon page-chooser-stop"></span>',l=_W.utl("html.weebly.libraries.weebly_main_29");if(r){var c=t[e.id];a='<span class="page-chooser-icon page-locked page-chooser-locked"></span>',l=_W.utl("html.weebly.libraries.weebly_main_30",c.email)}else s&&(a='<span class="page-chooser-icon page-chooser-editable"></span>',l=_W.utl("html.weebly.libraries.weebly_main_31"));i+='<div title="'+l+'" class="page-chooser-page '+(s?"page-chooser-allowed-page":"page-chooser-denied-page")+" "+(alt?"page-chooser-alt-row":"")+'" onclick="'+(s?"hideWarning(); goUpdateList('"+e.id+"', 1); return false;":"return false;")+'"><div class="page-chooser-page-inner '+(n>0?"page-chooser-subpage":"")+'" style="margin-left:'+o+'px">'+a+e.title+"</div></div>\n",e.children.size()>0&&(i=_getPageChooserHelper(e.children,t,i,n+1))}),i}function canGoToPage(e,t){var i=pageIsLocked(e,t);return!i&&isAllowedPage(e)}function isAllowedPage(e){return!Weebly.Permissions.allowed_pages||0==Weebly.Permissions.allowed_pages.size()||Weebly.Permissions.allowed_pages.include(e)}function hasAllowedPages(){return Weebly.Permissions.allowed_pages&&Weebly.Permissions.allowed_pages.size()>0}function pageIsLocked(e,t){var i=t[e];return i&&i.user_id!=Weebly.Permissions.true_user_id}function reloadAllowedPages(){new Ajax.Request(ajax,{parameters:{pos:"getallowedpages",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){Weebly.Permissions.allowed_pages=e.responseText.evalJSON()},asynchronous:!1})}function checkForPageUpdate(){return Relay.request("pages:get",currentPage).done(function(e){!e||e.blog||jQuery("#contributor-page-updated").length||new Ajax.Request(ajax,{parameters:{pos:"checkpageupdates",page_id:currentPage,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){var t=e.responseText.evalJSON();t.last_updated_by&&t.last_updated_by!=Weebly.Permissions.true_user_id&&Relay.execute("dialog:open","contributor-page-updated")}})})}function showPageChooser(e,t,i){i=Object.extend({page_locked:!1,page_locks:{},load_page_locks:!1,initial_load:!1},i),i.load_page_locks?new Ajax.Request(ajax,{parameters:{pos:"getpagelocks",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(n){_finishShowPageChooser(e,t,Object.extend(i,{page_locks:n.responseText.evalJSON()}))}}):_finishShowPageChooser(e,t,i)}function _finishShowPageChooser(e,t,i){var n={title:e,message:'<div class="page-chooser-text">'+t+"</div>"+getPageChooser(i.page_locks)};showWarning(n,{width:"613px",titleFontSize:"26px",showClose:!0,closeFunction:function(){!obtainedPage&&i.initial_load?window.location.href="/weebly/userHome.php":window.goUpdateList(window.currentPage,1),hideWarning()}})}function checkForPageChanges(){new Ajax.Request(ajax,{parameters:{pos:"checkpagedata",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){e.responseText.match(/%%CHANGED%%/)||addNotification('The number of pages has been chaged by another editor. <a style="display:inline;" href="#" onclick="window.location.reload(); return false;">Click here</a> to reload Weebly and view the updated pages.<br /><br /><a href="#" onclick="$(this).up(\'li\').remove(); return false;">Close Message</a>')}})}function addNotification(e){var t=new Element("li").update(e);$("notifications").appendChild(t)}function openPlanningInfo(){var e=new Weebly.Dialog("planning-info",{modal:!0,blackoutOpacity:.4,outerClass:"chromeless chromeless-outer-close w-ui",onClose:function(e){jQuery("#planning-info").remove(),e&&(Weebly.SlidingPanel.isOpened("site-store-container")||setTimeout(function(){window.showEvent("x-elements")},100))}});e.open();var t=jQuery("#planning-info iframe");t[0].src=t.data("src"),jQuery("#planning-info .planning-info-close").on("click",function(){e.close(),Weebly.SlidingPanel.isOpened("site-store-container")||setTimeout(function(){window.showEvent("x-elements")},100)}),"function"==typeof window.ga&&window.ga("send","pageview",{page:"/welcome-video?location=onboarding",title:"Welcome Video"})}function chooseMobileColor(){var e=$("mobile_color_chooser"),t=jQuery(e);if(t.is(":hidden")){e.update().show(),t.show();var i=new Weebly.ColorChooser(e,{closeOnClick:!1,onUpdate:function(e){$("mobile_color_square").style.background=e,$("mobile_color").value=e,t.hide()}});i.draw(),e.select("table")[0].style.width="auto"}else t.hide()}function showNoEditablePagesWarning(){showWarning({title:_W.utl("html.weebly.libraries.weebly_main_25"),message:_W.utl("html.weebly.libraries.weebly_main_26")},{closeFunction:Weebly.goHome})}var _wAMD;!function(){if(!_wAMD||!_wAMD.requirejs){_wAMD?t=_wAMD:_wAMD={};var e,t,i;!function(n){function o(e,t){return w.call(e,t)}function r(e,t){var i,n,o,r,s,a,l,c,d,u,h=t&&t.split("/"),p=b.map,f=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(h=h.slice(0,h.length-1),e=h.concat(e.split("/")),c=0;c<e.length;c+=1)if(u=e[c],"."===u)e.splice(c,1),c-=1;else if(".."===u){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||f)&&p){for(i=e.split("/"),c=i.length;c>0;c-=1){if(n=i.slice(0,c).join("/"),h)for(d=h.length;d>0;d-=1)if(o=p[h.slice(0,d).join("/")],o&&(o=o[n])){r=o,s=c;break}if(r)break;!a&&f&&f[n]&&(a=f[n],l=c)}!r&&a&&(r=a,s=l),r&&(i.splice(0,s,r),e=i.join("/"))}return e}function s(e,t){return function(){return p.apply(n,_.call(arguments,0).concat([e,t]))}}function a(e){return function(t){return r(t,e)}}function l(e){return function(t){g[e]=t}}function c(e){if(o(v,e)){var t=v[e];delete v[e],y[e]=!0,h.apply(n,t)}if(!o(g,e)&&!o(y,e))throw new Error("No "+e);return g[e]}function d(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function u(e){return function(){return b&&b.config&&b.config[e]||{}}}var h,p,f,m,g={},v={},b={},y={},w=Object.prototype.hasOwnProperty,_=[].slice;f=function(e,t){var i,n=d(e),o=n[0];return e=n[1],o&&(o=r(o,t),i=c(o)),o?e=i&&i.normalize?i.normalize(e,a(t)):r(e,t):(e=r(e,t),n=d(e),o=n[0],e=n[1],o&&(i=c(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:i}},m={require:function(e){return s(e)},exports:function(e){var t=g[e];return"undefined"!=typeof t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:u(e)}}},h=function(e,t,i,r){var a,d,u,h,p,b,w=[];if(r=r||e,"function"==typeof i){for(t=!t.length&&i.length?["require","exports","module"]:t,p=0;p<t.length;p+=1)if(h=f(t[p],r),d=h.f,"require"===d)w[p]=m.require(e);else if("exports"===d)w[p]=m.exports(e),b=!0;else if("module"===d)a=w[p]=m.module(e);else if(o(g,d)||o(v,d)||o(y,d))w[p]=c(d);else{if(!h.p)throw new Error(e+" missing "+d);h.p.load(h.n,s(r,!0),l(d),{}),w[p]=g[d]}u=i.apply(g[e],w),e&&(a&&a.exports!==n&&a.exports!==g[e]?g[e]=a.exports:u===n&&b||(g[e]=u))}else e&&(g[e]=i)},e=t=p=function(e,t,i,o,r){return"string"==typeof e?m[e]?m[e](t):c(f(e,t).f):(e.splice||(b=e,t.splice?(e=t,t=i,i=null):e=n),t=t||function(){},"function"==typeof i&&(i=o,o=r),o?h(n,e,t,i):setTimeout(function(){h(n,e,t,i)},4),p)},p.config=function(e){return b=e,b.deps&&p(b.deps,b.callback),p},i=function(e,t,i){t.splice||(i=t,t=[]),o(g,e)||o(v,e)||(v[e]=[e,t,i])},i.amd={jQuery:!0}}(),_wAMD.requirejs=e,_wAMD.require=t,_wAMD.define=i}}(),_wAMD.define("vendor/almond",function(){}),function(){function e(e,t){r>0&&0>=s?e():t?a.unshift(e):a.push(e)}function t(){var e=Array.prototype.slice.apply(arguments);if(1===e.length&&"string"==typeof e[0]);else{var t;"function"==typeof e[e.length-1]&&(t=e.pop()),r++,s++,e.push(function(){var e;if(t&&(e=t.apply(this,arguments)),s--,r>0&&0>=s)for(;a.length;)a.shift()();return e})}return p.apply(this,e)}function i(){window.define=l,window.require=c,window.requirejs=d}function n(){Weebly.jQuery.noConflict(!0),window.jQuery=window.jQuery||Weebly.jQuery}function o(){i(),n()}_W=Weebly=window.Weebly||{},_W.utl=_W.utl||function(e){return _W.failedTls=_W.failedTls||[],_W.failedTls.push(e),e},_W.ftl=_W.ftl||function(e){return _W.failedFtls=_W.failedFtls||[],_W.failedFtls.push(e),""},_W.utl=_W.utl||function(e){return _W.failedUtls=_W.failedUtls||[],_W.failedUtls.push(e),""},_W.stl=_W.stl||function(e){return _W.failedStls=_W.failedStls||[],_W.failedStls.push(e),""};var r=0,s=0,a=[];Weebly.ready=e;var l=window.define,c=window.require,d=window.requirejs,u=window._wAMD||{},h=u.define||window.define,p=u.require||window.require,f=u.requirejs||window.requirejs;window.define=u.define=h,window.require=u.require=t,window.requirejs=u.requirejs=f,Weebly.relinquishAMD=i,Weebly.jQuery=jQuery,Weebly.relinquishJQuery=n;var m=jQuery.fn.ready;jQuery.fn.ready=function(){var t=this,i=arguments;return e(function(){m.apply(t,i)}),t},Weebly.relinquish=o,Weebly.setCookie=function(e,t,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var o="expires="+n.toUTCString();document.cookie=e+"="+t+"; "+o},Weebly.clearCookie=function(e){setCookie(e,"",-1)},Weebly.getCookie=function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}}(),window.console||(window.console={}),window.console.log||(window.console.log=function(){},window.console.warn=window.console.log,window.console.info=window.console.log,window.console.error=window.console.log),_wAMD.define("init",function(){}),_wAMD.define("jquery",[],function(){return void 0!==window.Weebly&&void 0!==window.Weebly.jQuery?window.Weebly.jQuery:window.jQuery}),function(){function e(e){function t(t,i,n,o,r,s){for(;r>=0&&s>r;r+=e){var a=o?o[r]:r;n=i(n,t[a],a,t)}return n}return function(i,n,o,r){n=y(n,r,4);var s=!D(i)&&b.keys(i),a=(s||i).length,l=e>0?0:a-1;return arguments.length<3&&(o=i[s?s[l]:l],l+=e),t(i,n,o,s,l,a)}}function t(e){return function(t,i,n){i=w(i,n);for(var o=S(t),r=e>0?0:o-1;r>=0&&o>r;r+=e)if(i(t[r],r,t))return r;return-1}}function i(e,t,i){return function(n,o,r){var s=0,a=S(n);if("number"==typeof r)e>0?s=r>=0?r:Math.max(r+a,s):a=r>=0?Math.min(r+1,a):r+a+1;else if(i&&r&&a)return r=i(n,o),n[r]===o?r:-1;if(o!==o)return r=t(d.call(n,s,a),b.isNaN),r>=0?r+s:-1;for(r=e>0?s:a-1;r>=0&&a>r;r+=e)if(n[r]===o)return r;return-1}}function n(e,t){var i=x.length,n=e.constructor,o=b.isFunction(n)&&n.prototype||a,r="constructor";for(b.has(e,r)&&!b.contains(t,r)&&t.push(r);i--;)r=x[i],r in e&&e[r]!==o[r]&&!b.contains(t,r)&&t.push(r)}var o=this,r=o._,s=Array.prototype,a=Object.prototype,l=Function.prototype,c=s.push,d=s.slice,u=a.toString,h=a.hasOwnProperty,p=Array.isArray,f=Object.keys,m=l.bind,g=Object.create,v=function(){},b=function(e){return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports._=b):o._=b,b.VERSION="1.8.3";var y=function(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,o){return e.call(t,i,n,o)};case 4:return function(i,n,o,r){return e.call(t,i,n,o,r)}}return function(){return e.apply(t,arguments)}},w=function(e,t,i){return null==e?b.identity:b.isFunction(e)?y(e,t,i):b.isObject(e)?b.matcher(e):b.property(e)};b.iteratee=function(e,t){return w(e,t,1/0)};var _=function(e,t){return function(i){var n=arguments.length;if(2>n||null==i)return i;for(var o=1;n>o;o++)for(var r=arguments[o],s=e(r),a=s.length,l=0;a>l;l++){var c=s[l];t&&void 0!==i[c]||(i[c]=r[c])}return i}},E=function(e){if(!b.isObject(e))return{};if(g)return g(e);v.prototype=e;var t=new v;return v.prototype=null,t},T=function(e){return function(t){return null==t?void 0:t[e]}},C=Math.pow(2,53)-1,S=T("length"),D=function(e){var t=S(e);return"number"==typeof t&&t>=0&&C>=t};b.each=b.forEach=function(e,t,i){t=y(t,i);var n,o;if(D(e))for(n=0,o=e.length;o>n;n++)t(e[n],n,e);else{var r=b.keys(e);for(n=0,o=r.length;o>n;n++)t(e[r[n]],r[n],e)}return e},b.map=b.collect=function(e,t,i){t=w(t,i);for(var n=!D(e)&&b.keys(e),o=(n||e).length,r=Array(o),s=0;o>s;s++){var a=n?n[s]:s;r[s]=t(e[a],a,e)}return r},b.reduce=b.foldl=b.inject=e(1),b.reduceRight=b.foldr=e(-1),b.find=b.detect=function(e,t,i){var n;return n=D(e)?b.findIndex(e,t,i):b.findKey(e,t,i),void 0!==n&&-1!==n?e[n]:void 0},b.filter=b.select=function(e,t,i){var n=[];return t=w(t,i),b.each(e,function(e,i,o){t(e,i,o)&&n.push(e)}),n},b.reject=function(e,t,i){return b.filter(e,b.negate(w(t)),i)},b.every=b.all=function(e,t,i){t=w(t,i);for(var n=!D(e)&&b.keys(e),o=(n||e).length,r=0;o>r;r++){var s=n?n[r]:r;if(!t(e[s],s,e))return!1}return!0},b.some=b.any=function(e,t,i){t=w(t,i);for(var n=!D(e)&&b.keys(e),o=(n||e).length,r=0;o>r;r++){var s=n?n[r]:r;if(t(e[s],s,e))return!0}return!1},b.contains=b.includes=b.include=function(e,t,i,n){return D(e)||(e=b.values(e)),("number"!=typeof i||n)&&(i=0),b.indexOf(e,t,i)>=0},b.invoke=function(e,t){var i=d.call(arguments,2),n=b.isFunction(t);return b.map(e,function(e){var o=n?t:e[t];return null==o?o:o.apply(e,i)})},b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matcher(t))},b.findWhere=function(e,t){return b.find(e,b.matcher(t))},b.max=function(e,t,i){var n,o,r=-(1/0),s=-(1/0);if(null==t&&null!=e){e=D(e)?e:b.values(e);for(var a=0,l=e.length;l>a;a++)n=e[a],n>r&&(r=n)}else t=w(t,i),b.each(e,function(e,i,n){o=t(e,i,n),(o>s||o===-(1/0)&&r===-(1/0))&&(r=e,s=o)});return r},b.min=function(e,t,i){var n,o,r=1/0,s=1/0;if(null==t&&null!=e){e=D(e)?e:b.values(e);for(var a=0,l=e.length;l>a;a++)n=e[a],r>n&&(r=n)}else t=w(t,i),b.each(e,function(e,i,n){o=t(e,i,n),(s>o||o===1/0&&r===1/0)&&(r=e,s=o)});return r},b.shuffle=function(e){for(var t,i=D(e)?e:b.values(e),n=i.length,o=Array(n),r=0;n>r;r++)t=b.random(0,r),t!==r&&(o[r]=o[t]),o[t]=i[r];return o},b.sample=function(e,t,i){return null==t||i?(D(e)||(e=b.values(e)),e[b.random(e.length-1)]):b.shuffle(e).slice(0,Math.max(0,t))},b.sortBy=function(e,t,i){return t=w(t,i),b.pluck(b.map(e,function(e,i,n){return{value:e,index:i,criteria:t(e,i,n)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var I=function(e){return function(t,i,n){var o={};return i=w(i,n),b.each(t,function(n,r){var s=i(n,r,t);e(o,n,s)}),o}};b.groupBy=I(function(e,t,i){b.has(e,i)?e[i].push(t):e[i]=[t]}),b.indexBy=I(function(e,t,i){e[i]=t}),b.countBy=I(function(e,t,i){b.has(e,i)?e[i]++:e[i]=1}),b.toArray=function(e){return e?b.isArray(e)?d.call(e):D(e)?b.map(e,b.identity):b.values(e):[]},b.size=function(e){return null==e?0:D(e)?e.length:b.keys(e).length},b.partition=function(e,t,i){t=w(t,i);var n=[],o=[];return b.each(e,function(e,i,r){(t(e,i,r)?n:o).push(e)}),[n,o]},b.first=b.head=b.take=function(e,t,i){return null!=e?null==t||i?e[0]:b.initial(e,e.length-t):void 0},b.initial=function(e,t,i){return d.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},b.last=function(e,t,i){return null!=e?null==t||i?e[e.length-1]:b.rest(e,Math.max(0,e.length-t)):void 0},b.rest=b.tail=b.drop=function(e,t,i){return d.call(e,null==t||i?1:t)},b.compact=function(e){return b.filter(e,b.identity)};var k=function(e,t,i,n){for(var o=[],r=0,s=n||0,a=S(e);a>s;s++){var l=e[s];if(D(l)&&(b.isArray(l)||b.isArguments(l))){t||(l=k(l,t,i));var c=0,d=l.length;for(o.length+=d;d>c;)o[r++]=l[c++]}else i||(o[r++]=l)}return o};b.flatten=function(e,t){return k(e,t,!1)},b.without=function(e){return b.difference(e,d.call(arguments,1))},b.uniq=b.unique=function(e,t,i,n){b.isBoolean(t)||(n=i,i=t,t=!1),null!=i&&(i=w(i,n));for(var o=[],r=[],s=0,a=S(e);a>s;s++){var l=e[s],c=i?i(l,s,e):l;t?(s&&r===c||o.push(l),r=c):i?b.contains(r,c)||(r.push(c),o.push(l)):b.contains(o,l)||o.push(l)}return o},b.union=function(){return b.uniq(k(arguments,!0,!0))},b.intersection=function(e){for(var t=[],i=arguments.length,n=0,o=S(e);o>n;n++){var r=e[n];if(!b.contains(t,r)){for(var s=1;i>s&&b.contains(arguments[s],r);s++);s===i&&t.push(r)}}return t},b.difference=function(e){var t=k(arguments,!0,!0,1);return b.filter(e,function(e){return!b.contains(t,e)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(e){for(var t=e&&b.max(e,S).length||0,i=Array(t),n=0;t>n;n++)i[n]=b.pluck(e,n);return i},b.object=function(e,t){for(var i={},n=0,o=S(e);o>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},b.findIndex=t(1),b.findLastIndex=t(-1),b.sortedIndex=function(e,t,i,n){i=w(i,n,1);for(var o=i(t),r=0,s=S(e);s>r;){var a=Math.floor((r+s)/2);i(e[a])<o?r=a+1:s=a}return r},b.indexOf=i(1,b.findIndex,b.sortedIndex),b.lastIndexOf=i(-1,b.findLastIndex),b.range=function(e,t,i){null==t&&(t=e||0,e=0),i=i||1;for(var n=Math.max(Math.ceil((t-e)/i),0),o=Array(n),r=0;n>r;r++,e+=i)o[r]=e;return o};var O=function(e,t,i,n,o){if(!(n instanceof t))return e.apply(i,o);var r=E(e.prototype),s=e.apply(r,o);return b.isObject(s)?s:r};b.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,d.call(arguments,1));if(!b.isFunction(e))throw new TypeError("Bind must be called on a function");var i=d.call(arguments,2),n=function(){return O(e,n,t,this,i.concat(d.call(arguments)))};return n},b.partial=function(e){var t=d.call(arguments,1),i=function(){for(var n=0,o=t.length,r=Array(o),s=0;o>s;s++)r[s]=t[s]===b?arguments[n++]:t[s];for(;n<arguments.length;)r.push(arguments[n++]);return O(e,i,this,this,r)};return i},b.bindAll=function(e){var t,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(t=1;n>t;t++)i=arguments[t],e[i]=b.bind(e[i],e);return e},b.memoize=function(e,t){var i=function(n){var o=i.cache,r=""+(t?t.apply(this,arguments):n);return b.has(o,r)||(o[r]=e.apply(this,arguments)),o[r]};return i.cache={},i},b.delay=function(e,t){var i=d.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},b.defer=b.partial(b.delay,b,1),b.throttle=function(e,t,i){var n,o,r,s=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:b.now(),s=null,r=e.apply(n,o),s||(n=o=null)};return function(){var c=b.now();a||i.leading!==!1||(a=c);var d=t-(c-a);return n=this,o=arguments,0>=d||d>t?(s&&(clearTimeout(s),s=null),a=c,r=e.apply(n,o),s||(n=o=null)):s||i.trailing===!1||(s=setTimeout(l,d)),r}},b.debounce=function(e,t,i){var n,o,r,s,a,l=function(){var c=b.now()-s;t>c&&c>=0?n=setTimeout(l,t-c):(n=null,i||(a=e.apply(r,o),n||(r=o=null)))};return function(){r=this,o=arguments,s=b.now();var c=i&&!n;return n||(n=setTimeout(l,t)),c&&(a=e.apply(r,o),r=o=null),a}},b.wrap=function(e,t){return b.partial(t,e)},b.negate=function(e){return function(){return!e.apply(this,arguments)}},b.compose=function(){var e=arguments,t=e.length-1;return function(){for(var i=t,n=e[t].apply(this,arguments);i--;)n=e[i].call(this,n);return n}},b.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},b.before=function(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),1>=e&&(t=null),i}},b.once=b.partial(b.before,2);var R=!{toString:null}.propertyIsEnumerable("toString"),x=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(e){if(!b.isObject(e))return[];if(f)return f(e);var t=[];for(var i in e)b.has(e,i)&&t.push(i);return R&&n(e,t),t},b.allKeys=function(e){if(!b.isObject(e))return[];var t=[];for(var i in e)t.push(i);return R&&n(e,t),t},b.values=function(e){for(var t=b.keys(e),i=t.length,n=Array(i),o=0;i>o;o++)n[o]=e[t[o]];return n},b.mapObject=function(e,t,i){t=w(t,i);for(var n,o=b.keys(e),r=o.length,s={},a=0;r>a;a++)n=o[a],s[n]=t(e[n],n,e);return s},b.pairs=function(e){for(var t=b.keys(e),i=t.length,n=Array(i),o=0;i>o;o++)n[o]=[t[o],e[t[o]]];return n},b.invert=function(e){for(var t={},i=b.keys(e),n=0,o=i.length;o>n;n++)t[e[i[n]]]=i[n];return t},b.functions=b.methods=function(e){var t=[];for(var i in e)b.isFunction(e[i])&&t.push(i);return t.sort()},b.extend=_(b.allKeys),b.extendOwn=b.assign=_(b.keys),b.findKey=function(e,t,i){t=w(t,i);for(var n,o=b.keys(e),r=0,s=o.length;s>r;r++)if(n=o[r],t(e[n],n,e))return n},b.pick=function(e,t,i){var n,o,r={},s=e;if(null==s)return r;b.isFunction(t)?(o=b.allKeys(s),n=y(t,i)):(o=k(arguments,!1,!1,1),n=function(e,t,i){return t in i},s=Object(s));for(var a=0,l=o.length;l>a;a++){var c=o[a],d=s[c];n(d,c,s)&&(r[c]=d)}return r},b.omit=function(e,t,i){if(b.isFunction(t))t=b.negate(t);else{var n=b.map(k(arguments,!1,!1,1),String);t=function(e,t){return!b.contains(n,t)}}return b.pick(e,t,i)},b.defaults=_(b.allKeys,!0),b.create=function(e,t){var i=E(e);return t&&b.extendOwn(i,t),i},b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.tap=function(e,t){return t(e),e},b.isMatch=function(e,t){var i=b.keys(t),n=i.length;if(null==e)return!n;for(var o=Object(e),r=0;n>r;r++){var s=i[r];if(t[s]!==o[s]||!(s in o))return!1}return!0};var A=function(e,t,i,n){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped);var o=u.call(e);if(o!==u.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var r="[object Array]"===o;if(!r){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(b.isFunction(s)&&s instanceof s&&b.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===e)return n[l]===t;if(i.push(e),n.push(t),r){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!A(e[l],t[l],i,n))return!1}else{var c,d=b.keys(e);if(l=d.length,b.keys(t).length!==l)return!1;for(;l--;)if(c=d[l],!b.has(t,c)||!A(e[c],t[c],i,n))return!1}return i.pop(),n.pop(),!0};b.isEqual=function(e,t){return A(e,t)},b.isEmpty=function(e){return null==e?!0:D(e)&&(b.isArray(e)||b.isString(e)||b.isArguments(e))?0===e.length:0===b.keys(e).length},b.isElement=function(e){return!(!e||1!==e.nodeType)},b.isArray=p||function(e){return"[object Array]"===u.call(e)},b.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){b["is"+e]=function(t){return u.call(t)==="[object "+e+"]"}}),b.isArguments(arguments)||(b.isArguments=function(e){return b.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(e){return"function"==typeof e||!1}),b.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&e!==+e},b.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===u.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){return null!=e&&h.call(e,t)},b.noConflict=function(){return o._=r,this},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.noop=function(){},b.property=T,b.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},b.matcher=b.matches=function(e){return e=b.extendOwn({},e),function(t){return b.isMatch(t,e)}},b.times=function(e,t,i){var n=Array(Math.max(0,e));t=y(t,i,1);for(var o=0;e>o;o++)n[o]=t(o);return n},b.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},b.now=Date.now||function(){return(new Date).getTime()};var P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},M=b.invert(P),N=function(e){var t=function(t){return e[t]},i="(?:"+b.keys(e).join("|")+")",n=RegExp(i),o=RegExp(i,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(o,t):e}};b.escape=N(P),b.unescape=N(M),b.result=function(e,t,i){var n=null==e?void 0:e[t];return void 0===n&&(n=i),b.isFunction(n)?n.call(e):n};var L=0;b.uniqueId=function(e){var t=++L+"";return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\u2028|\u2029/g,F=function(e){return"\\"+j[e]};b.template=function(e,t,i){!t&&i&&(t=i),t=b.defaults({},t,b.templateSettings);var n=RegExp([(t.escape||B).source,(t.interpolate||B).source,(t.evaluate||B).source].join("|")+"|$","g"),o=0,r="__p+='";
e.replace(n,function(t,i,n,s,a){return r+=e.slice(o,a).replace(K,F),o=a+t.length,i?r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?r+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),t}),r+="';\n",t.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var s=new Function(t.variable||"obj","_",r)}catch(a){throw a.source=r,a}var l=function(e){return s.call(this,e,b)},c=t.variable||"obj";return l.source="function("+c+"){\n"+r+"}",l},b.chain=function(e){var t=b(e);return t._chain=!0,t};var H=function(e,t){return e._chain?b(t).chain():t};b.mixin=function(e){b.each(b.functions(e),function(t){var i=b[t]=e[t];b.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),H(this,i.apply(b,e))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];b.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0],H(this,i)}}),b.each(["concat","join","slice"],function(e){var t=s[e];b.prototype[e]=function(){return H(this,t.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof _wAMD.define&&_wAMD.define.amd&&_wAMD.define("underscore",[],function(){return b})}.call(this),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof _wAMD.define&&_wAMD.define.amd)_wAMD.define("raven-js",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Raven=e()}}(function(){return function e(t,i,n){function o(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[s]={exports:{}};t[s][0].call(d.exports,function(e){var i=t[s][1][e];return o(i?i:e)},d,d.exports,e,t,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,i){function n(e,t,i,n){return JSON.stringify(e,o(t,n),i)}function o(e,t){var i=[],n=[];return null==t&&(t=function(e,t){return i[0]===t?"[Circular ~]":"[Circular ~."+n.slice(0,i.indexOf(t)).join(".")+"]"}),function(o,r){if(i.length>0){var s=i.indexOf(this);~s?i.splice(s+1):i.push(this),~s?n.splice(s,1/0,o):n.push(o),~i.indexOf(r)&&(r=t.call(this,o,r))}else i.push(r);return null==e?r:e.call(this,o,r)}}i=t.exports=n,i.getSerialize=o},{}],2:[function(e,t,i){function n(e){this.name="RavenConfigError",this.message=e}n.prototype=new Error,n.prototype.constructor=n,t.exports=n},{}],3:[function(e,t,i){var n=function(e,t,i){var n=e[t],o=e;if(t in e){var r="warn"===t?"warning":t;e[t]=function(){var e=[].slice.call(arguments),t=""+e.join(" "),s={level:r,logger:"console",extra:{arguments:e}};i&&i(t,s),n&&Function.prototype.apply.call(n,o,e)}}};t.exports={wrapMethod:n}},{}],4:[function(e,t,i){function n(){return+new Date}function o(){this._hasJSON=!("object"!=typeof JSON||!JSON.stringify),this._hasDocument=!r(O),this._lastCapturedException=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],crossOrigin:"anonymous",collectWindowErrors:!0,maxMessageLength:0,stackTraceLimit:50,autoBreadcrumbs:!0},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=k.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=n(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=k.location,this._lastHref=this._location&&this._location.href;for(var e in this._originalConsole)this._originalConsoleMethods[e]=this._originalConsole[e]}function r(e){return void 0===e}function s(e){return"function"==typeof e}function a(e){return"[object String]"===R.toString.call(e)}function l(e){return"object"==typeof e&&null!==e}function c(e){for(var t in e)return!1;return!0}function d(e){var t=R.toString.call(e);return l(e)&&"[object Error]"===t||"[object Exception]"===t||e instanceof Error}function u(e,t){var i,n;if(r(e.length))for(i in e)f(e,i)&&t.call(null,i,e[i]);else if(n=e.length)for(i=0;n>i;i++)t.call(null,i,e[i])}function h(e,t){return t?(u(t,function(t,i){e[t]=i}),e):e}function p(e,t){return!t||e.length<=t?e:e.substr(0,t)+"…"}function f(e,t){return R.hasOwnProperty.call(e,t)}function m(e){for(var t,i=[],n=0,o=e.length;o>n;n++)t=e[n],a(t)?i.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&i.push(t.source);return new RegExp(i.join("|"),"i")}function g(e){var t=[];return u(e,function(e,i){t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}),t.join("&")}function v(e){var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var i=t[6]||"",n=t[8]||"";return{protocol:t[2],host:t[4],path:t[5],relative:t[5]+i+n}}function b(){var e=window.crypto||window.msCrypto;if(!r(e)&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t),t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;var i=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return i(t[0])+i(t[1])+i(t[2])+i(t[3])+i(t[4])+i(t[5])+i(t[6])+i(t[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,i="x"===e?t:3&t|8;return i.toString(16)})}function y(e){for(var t,i=5,n=80,o=[],r=0,s=0,a=" > ",l=a.length;e&&r++<i&&(t=w(e),!("html"===t||r>1&&s+o.length*l+t.length>=n));)o.push(t),s+=t.length,e=e.parentNode;return o.reverse().join(a)}function w(e){var t,i,n,o,r,s=[];if(!e||!e.tagName)return"";if(s.push(e.tagName.toLowerCase()),e.id&&s.push("#"+e.id),t=e.className,t&&a(t))for(i=t.split(" "),r=0;r<i.length;r++)s.push("."+i[r]);var l=["type","name","title","alt"];for(r=0;r<l.length;r++)n=l[r],o=e.getAttribute(n),o&&s.push("["+n+'="'+o+'"]');return s.join("")}function _(e,t,i,n){var o=e[t];e[t]=i(o),n&&n.push([e,t,o])}var E=e(6),T=e(2),C=e(1),S=e(3).wrapMethod,D="source protocol user pass host port path".split(" "),I=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/,k="undefined"!=typeof window?window:void 0,O=k&&k.document;o.prototype={VERSION:"3.8.0",debug:!1,TraceKit:E,config:function(e,t){var i=this;if(i._globalServer)return this._logDebug("error","Error: Raven has already been configured"),i;if(!e)return i;var n=i._globalOptions;t&&u(t,function(e,t){"tags"===e||"extra"===e?i._globalContext[e]=t:n[e]=t}),i.setDSN(e),n.ignoreErrors.push(/^Script error\.?$/),n.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),n.ignoreErrors=m(n.ignoreErrors),n.ignoreUrls=n.ignoreUrls.length?m(n.ignoreUrls):!1,n.whitelistUrls=n.whitelistUrls.length?m(n.whitelistUrls):!1,n.includePaths=m(n.includePaths),n.maxBreadcrumbs=Math.max(0,Math.min(n.maxBreadcrumbs||100,100));var o={xhr:!0,console:!0,dom:!0,location:!0},r=n.autoBreadcrumbs;return"[object Object]"==={}.toString.call(r)?r=h(o,r):r!==!1&&(r=o),n.autoBreadcrumbs=r,E.collectWindowErrors=!!n.collectWindowErrors,i},install:function(){var e=this;return e.isSetup()&&!e._isRavenInstalled&&(E.report.subscribe(function(){e._handleOnErrorStackInfo.apply(e,arguments)}),e._instrumentTryCatch(),e._globalOptions.autoBreadcrumbs&&e._instrumentBreadcrumbs(),e._drainPlugins(),e._isRavenInstalled=!0),Error.stackTraceLimit=e._globalOptions.stackTraceLimit,this},setDSN:function(e){var t=this,i=t._parseDSN(e),n=i.path.lastIndexOf("/"),o=i.path.substr(1,n);t._dsn=e,t._globalKey=i.user,t._globalSecret=i.pass&&i.pass.substr(1),t._globalProject=i.path.substr(n+1),t._globalServer=t._getGlobalServer(i),t._globalEndpoint=t._globalServer+"/"+o+"api/"+t._globalProject+"/store/"},context:function(e,t,i){return s(e)&&(i=t||[],t=e,e=void 0),this.wrap(e,t).apply(this,i)},wrap:function(e,t,i){function n(){var n=[],r=arguments.length,a=!e||e&&e.deep!==!1;for(i&&s(i)&&i.apply(this,arguments);r--;)n[r]=a?o.wrap(e,arguments[r]):arguments[r];try{return t.apply(this,n)}catch(l){throw o._ignoreNextOnError(),o.captureException(l,e),l}}var o=this;if(r(t)&&!s(e))return e;if(s(e)&&(t=e,e=void 0),!s(t))return t;try{if(t.__raven__)return t;if(t.__raven_wrapper__)return t.__raven_wrapper__}catch(a){return t}for(var l in t)f(t,l)&&(n[l]=t[l]);return n.prototype=t.prototype,t.__raven_wrapper__=n,n.__raven__=!0,n.__inner__=t,n},uninstall:function(){return E.report.uninstall(),this._restoreBuiltIns(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},captureException:function(e,t){if(!d(e))return this.captureMessage(e,h({trimHeadFrames:1,stacktrace:!0},t));this._lastCapturedException=e;try{var i=E.computeStackTrace(e);this._handleStackInfo(i,t)}catch(n){if(e!==n)throw n}return this},captureMessage:function(e,t){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(e)){var i=h({message:e+""},t);if(t&&t.stacktrace){var n;try{throw new Error(e)}catch(o){n=o}n.name=null,t=h({fingerprint:e,trimHeadFrames:(t.trimHeadFrames||0)+1},t);var r=E.computeStackTrace(n),s=this._prepareFrames(r,t);i.stacktrace={frames:s.reverse()}}return this._send(i),this}},captureBreadcrumb:function(e){var t=h({timestamp:n()/1e3},e);return this._breadcrumbs.push(t),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function(e){var t=[].slice.call(arguments,1);return this._plugins.push([e,t]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function(e){return this._globalContext.user=e,this},setExtraContext:function(e){return this._mergeContext("extra",e),this},setTagsContext:function(e){return this._mergeContext("tags",e),this},clearContext:function(){return this._globalContext={},this},getContext:function(){return JSON.parse(C(this._globalContext))},setEnvironment:function(e){return this._globalOptions.environment=e,this},setRelease:function(e){return this._globalOptions.release=e,this},setDataCallback:function(e){var t=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=s(e)?function(i){return e(i,t)}:e,this},setShouldSendCallback:function(e){var t=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=s(e)?function(i){return e(i,t)}:e,this},setTransport:function(e){return this._globalOptions.transport=e,this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){return this._hasJSON?this._globalServer?!0:(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),!1):!1},afterLoad:function(){var e=k.RavenConfig;e&&this.config(e.dsn,e.config).install()},showReportDialog:function(e){if(O){e=e||{};var t=e.eventId||this.lastEventId();if(!t)throw new T("Missing eventId");var i=e.dsn||this._dsn;if(!i)throw new T("Missing DSN");var n=encodeURIComponent,o="";o+="?eventId="+n(t),o+="&dsn="+n(i);var r=e.user||this._globalContext.user;r&&(r.name&&(o+="&name="+n(r.name)),r.email&&(o+="&email="+n(r.email)));var s=this._getGlobalServer(this._parseDSN(i)),a=O.createElement("script");a.async=!0,a.src=s+"/api/embed/error-page/"+o,(O.head||O.body).appendChild(a)}},_ignoreNextOnError:function(){var e=this;this._ignoreOnError+=1,setTimeout(function(){e._ignoreOnError-=1})},_triggerEvent:function(e,t){var i,n;if(this._hasDocument){t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),O.createEvent?(i=O.createEvent("HTMLEvents"),i.initEvent(e,!0,!0)):(i=O.createEventObject(),i.eventType=e);for(n in t)f(t,n)&&(i[n]=t[n]);if(O.createEvent)O.dispatchEvent(i);else try{O.fireEvent("on"+i.eventType.toLowerCase(),i)}catch(o){}}},_breadcrumbEventHandler:function(e){var t=this;return function(i){if(t._keypressTimeout=null,t._lastCapturedEvent!==i){t._lastCapturedEvent=i;var n,o=i.target;try{n=y(o)}catch(r){n="<unknown>"}t.captureBreadcrumb({category:"ui."+e,message:n})}}},_keypressEventHandler:function(){var e=this,t=1e3;return function(i){var n=i.target,o=n&&n.tagName;if(o&&("INPUT"===o||"TEXTAREA"===o||n.isContentEditable)){var r=e._keypressTimeout;r||e._breadcrumbEventHandler("input")(i),clearTimeout(r),e._keypressTimeout=setTimeout(function(){e._keypressTimeout=null},t)}}},_captureUrlChange:function(e,t){var i=v(this._location.href),n=v(t),o=v(e);this._lastHref=t,i.protocol===n.protocol&&i.host===n.host&&(t=n.relative),i.protocol===o.protocol&&i.host===o.host&&(e=o.relative),this.captureBreadcrumb({category:"navigation",data:{to:t,from:e}})},_instrumentTryCatch:function(){function e(e){return function(t,n){for(var o=new Array(arguments.length),r=0;r<o.length;++r)o[r]=arguments[r];var a=o[0];return s(a)&&(o[0]=i.wrap(a)),e.apply?e.apply(this,o):e(o[0],o[1])}}function t(e){var t=k[e]&&k[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(_(t,"addEventListener",function(t){return function(n,r,s,a){try{r&&r.handleEvent&&(r.handleEvent=i.wrap(r.handleEvent))}catch(l){}var c;return o&&o.dom&&("EventTarget"===e||"Node"===e)&&("click"===n?c=i._breadcrumbEventHandler(n):"keypress"===n&&(c=i._keypressEventHandler())),t.call(this,n,i.wrap(r,void 0,c),s,a)}},n),_(t,"removeEventListener",function(e){return function(t,i,n,o){try{i=i&&(i.__raven_wrapper__?i.__raven_wrapper__:i)}catch(r){}return e.call(this,t,i,n,o)}},n))}var i=this,n=i._wrappedBuiltIns,o=this._globalOptions.autoBreadcrumbs;_(k,"setTimeout",e,n),_(k,"setInterval",e,n),k.requestAnimationFrame&&_(k,"requestAnimationFrame",function(e){return function(t){return e(i.wrap(t))}},n);for(var r=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],a=0;a<r.length;a++)t(r[a]);var l=k.jQuery||k.$;l&&l.fn&&l.fn.ready&&_(l.fn,"ready",function(e){return function(t){return e.call(this,i.wrap(t))}},n)},_instrumentBreadcrumbs:function(){function e(e,i){e in i&&s(i[e])&&_(i,e,function(e){return t.wrap(e)})}var t=this,i=this._globalOptions.autoBreadcrumbs,n=t._wrappedBuiltIns;if(i.xhr&&"XMLHttpRequest"in k){var o=XMLHttpRequest.prototype;_(o,"open",function(e){return function(i,n){return a(n)&&-1===n.indexOf(t._globalKey)&&(this.__raven_xhr={method:i,url:n,status_code:null}),e.apply(this,arguments)}},n),_(o,"send",function(i){return function(n){function o(){if(r.__raven_xhr&&(1===r.readyState||4===r.readyState)){try{r.__raven_xhr.status_code=r.status}catch(e){}t.captureBreadcrumb({type:"http",category:"xhr",data:r.__raven_xhr})}}for(var r=this,a=["onload","onerror","onprogress"],l=0;l<a.length;l++)e(a[l],r);return"onreadystatechange"in r&&s(r.onreadystatechange)?_(r,"onreadystatechange",function(e){return t.wrap(e,void 0,o)}):r.onreadystatechange=o,i.apply(this,arguments)}},n)}i.xhr&&"fetch"in k&&_(k,"fetch",function(e){return function(i,n){for(var o=new Array(arguments.length),r=0;r<o.length;++r)o[r]=arguments[r];var s="GET";o[1]&&o[1].method&&(s=o[1].method);var a={method:s,url:o[0],status_code:null};return t.captureBreadcrumb({type:"http",category:"fetch",data:a}),e.apply(this,o).then(function(e){return a.status_code=e.status,e})}},n),i.dom&&this._hasDocument&&(O.addEventListener?(O.addEventListener("click",t._breadcrumbEventHandler("click"),!1),O.addEventListener("keypress",t._keypressEventHandler(),!1)):(O.attachEvent("onclick",t._breadcrumbEventHandler("click")),O.attachEvent("onkeypress",t._keypressEventHandler())));var r=k.chrome,l=r&&r.app&&r.app.runtime,c=!l&&k.history&&history.pushState;if(i.location&&c){var d=k.onpopstate;k.onpopstate=function(){var e=t._location.href;return t._captureUrlChange(t._lastHref,e),d?d.apply(this,arguments):void 0},_(history,"pushState",function(e){return function(){var i=arguments.length>2?arguments[2]:void 0;return i&&t._captureUrlChange(t._lastHref,i+""),e.apply(this,arguments)}},n)}if(i.console&&"console"in k&&console.log){var h=function(e,i){t.captureBreadcrumb({message:e,level:i.level,category:"console"})};u(["debug","info","warn","error","log"],function(e,t){S(console,t,h)})}},_restoreBuiltIns:function(){for(var e;this._wrappedBuiltIns.length;){e=this._wrappedBuiltIns.shift();var t=e[0],i=e[1],n=e[2];t[i]=n}},_drainPlugins:function(){var e=this;u(this._plugins,function(t,i){var n=i[0],o=i[1];n.apply(e,[e].concat(o))})},_parseDSN:function(e){var t=I.exec(e),i={},n=7;try{for(;n--;)i[D[n]]=t[n]||""}catch(o){throw new T("Invalid DSN: "+e)}if(i.pass&&!this._globalOptions.allowSecretKey)throw new T("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return i},_getGlobalServer:function(e){var t="//"+e.host+(e.port?":"+e.port:"");return e.protocol&&(t=e.protocol+":"+t),t},_handleOnErrorStackInfo:function(){this._ignoreOnError||this._handleStackInfo.apply(this,arguments)},_handleStackInfo:function(e,t){var i=this._prepareFrames(e,t);this._triggerEvent("handle",{stackInfo:e,options:t}),this._processException(e.name,e.message,e.url,e.lineno,i,t)},_prepareFrames:function(e,t){var i=this,n=[];if(e.stack&&e.stack.length&&(u(e.stack,function(e,t){var o=i._normalizeFrame(t);o&&n.push(o)}),t&&t.trimHeadFrames))for(var o=0;o<t.trimHeadFrames&&o<n.length;o++)n[o].in_app=!1;return n=n.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(e){if(e.url){var t={filename:e.url,lineno:e.line,colno:e.column,"function":e.func||"?"};return t.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(t.filename)||/(Raven|TraceKit)\./.test(t["function"])||/raven\.(min\.)?js$/.test(t.filename)),t}},_processException:function(e,t,i,n,o,r){var s;if((!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t))&&(t+="",o&&o.length?(i=o[0].filename||i,o.reverse(),s={frames:o}):i&&(s={frames:[{filename:i,lineno:n,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(i))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(i)))){var a=h({exception:{values:[{type:e,value:t,stacktrace:s}]},culprit:i},r);this._send(a)}},_trimPacket:function(e){var t=this._globalOptions.maxMessageLength;if(e.message&&(e.message=p(e.message,t)),e.exception){var i=e.exception.values[0];i.value=p(i.value,t)}return e},_getHttpData:function(){if(this._hasDocument&&O.location&&O.location.href){var e={headers:{"User-Agent":navigator.userAgent}};return e.url=O.location.href,O.referrer&&(e.headers.Referer=O.referrer),e}},_send:function(e){var t=this._globalOptions,i={project:this._globalProject,logger:t.logger,platform:"javascript"},o=this._getHttpData();o&&(i.request=o),e.trimHeadFrames&&delete e.trimHeadFrames,e=h(i,e),e.tags=h(h({},this._globalContext.tags),e.tags),e.extra=h(h({},this._globalContext.extra),e.extra),e.extra["session:duration"]=n()-this._startTime,this._breadcrumbs&&this._breadcrumbs.length>0&&(e.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),c(e.tags)&&delete e.tags,this._globalContext.user&&(e.user=this._globalContext.user),t.environment&&(e.environment=t.environment),t.release&&(e.release=t.release),t.serverName&&(e.server_name=t.serverName),s(t.dataCallback)&&(e=t.dataCallback(e)||e),e&&!c(e)&&(!s(t.shouldSendCallback)||t.shouldSendCallback(e))&&this._sendProcessedPayload(e)},_getUuid:function(){return b()},_sendProcessedPayload:function(e,t){var i=this,n=this._globalOptions;if(this._lastEventId=e.event_id||(e.event_id=this._getUuid()),e=this._trimPacket(e),this._logDebug("debug","Raven about to send:",e),this.isSetup()){var o={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(o.sentry_secret=this._globalSecret);var r=e.exception&&e.exception.values[0];this.captureBreadcrumb({category:"sentry",message:r?(r.type?r.type+": ":"")+r.value:e.message,event_id:e.event_id,level:e.level||"error"});var s=this._globalEndpoint;(n.transport||this._makeRequest).call(this,{url:s,auth:o,data:e,options:n,onSuccess:function(){i._triggerEvent("success",{data:e,src:s}),t&&t()},onError:function(n){i._triggerEvent("failure",{data:e,src:s}),n=n||new Error("Raven send failed (no additional details provided)"),t&&t(n)}})}},_makeRequest:function(e){function t(){200===i.status?e.onSuccess&&e.onSuccess():e.onError&&e.onError(new Error("Sentry error code: "+i.status))}var i=new XMLHttpRequest,n="withCredentials"in i||"undefined"!=typeof XDomainRequest;if(n){var o=e.url;"withCredentials"in i?i.onreadystatechange=function(){4===i.readyState&&t()}:(i=new XDomainRequest,o=o.replace(/^https?:/,""),i.onload=t),i.open("POST",o+"?"+g(e.auth)),i.send(C(e.data))}},_logDebug:function(e){this._originalConsoleMethods[e]&&this.debug&&Function.prototype.apply.call(this._originalConsoleMethods[e],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function(e,t){r(t)?delete this._globalContext[e]:this._globalContext[e]=h(this._globalContext[e]||{},t)}};var R=Object.prototype;"undefined"!=typeof __DEV__&&__DEV__&&(o.utils={isUndefined:r,isFunction:s,isString:a,isObject:l,isEmptyObject:c,isError:d,each:u,objectMerge:h,truncate:p,hasKey:f,joinRegExp:m,urlencode:g,uuid4:b,htmlTreeAsString:y,htmlElementAsString:w,parseUrl:v,fill:_}),o.prototype.setUser=o.prototype.setUserContext,o.prototype.setReleaseContext=o.prototype.setRelease,t.exports=o},{1:1,2:2,3:3,6:6}],5:[function(e,t,i){var n=e(4),o=window.Raven,r=new n;r.noConflict=function(){return window.Raven=o,r},r.afterLoad(),t.exports=r},{4:4}],6:[function(e,t,i){function n(){return"undefined"==typeof document?"":document.location.href}var o={collectWindowErrors:!0,debug:!1},r=[].slice,s="?",a=/^(?:Uncaught (?:exception: )?)?((?:Eval|Internal|Range|Reference|Syntax|Type|URI)Error): ?(.*)$/;o.report=function(){function e(e){d(),g.push(e)}function t(e){for(var t=g.length-1;t>=0;--t)g[t]===e&&g.splice(t,1)}function i(){u(),g=[]}function l(e,t){var i=null;if(!t||o.collectWindowErrors){for(var n in g)if(g.hasOwnProperty(n))try{g[n].apply(null,[e].concat(r.call(arguments,2)))}catch(s){i=s}if(i)throw i}}function c(e,t,i,r,c){var d=null;if(y)o.computeStackTrace.augmentStackTraceWithInitialElement(y,t,i,e),h();else if(c)d=o.computeStackTrace(c),l(d,!0);else{var u,p={url:t,line:i,column:r},m=void 0,g=e;if("[object String]"==={}.toString.call(e)){var u=e.match(a);u&&(m=u[1],g=u[2])}p.func=s,d={name:m,message:g,url:n(),stack:[p]},l(d,!0)}return f?f.apply(this,arguments):!1}function d(){m||(f=window.onerror,window.onerror=c,m=!0)}function u(){m&&(window.onerror=f,m=!1,f=void 0)}function h(){var e=y,t=v;v=null,y=null,b=null,l.apply(null,[e,!1].concat(t))}function p(e,t){var i=r.call(arguments,1);if(y){if(b===e)return;h()}var n=o.computeStackTrace(e);if(y=n,b=e,v=i,setTimeout(function(){b===e&&h()},n.incomplete?2e3:0),t!==!1)throw e}var f,m,g=[],v=null,b=null,y=null;return p.subscribe=e,p.unsubscribe=t,p.uninstall=i,p}(),o.computeStackTrace=function(){function e(e){if("undefined"!=typeof e.stack&&e.stack){for(var t,i,o=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,r=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,a=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,l=e.stack.split("\n"),c=[],d=(/^(.*) is undefined$/.exec(e.message),0),u=l.length;u>d;++d){if(t=o.exec(l[d])){var h=t[2]&&-1!==t[2].indexOf("native");i={url:h?null:t[2],func:t[1]||s,args:h?[t[2]]:[],line:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}else if(t=a.exec(l[d]))i={url:t[2],func:t[1]||s,args:[],line:+t[3],column:t[4]?+t[4]:null};else{if(!(t=r.exec(l[d])))continue;i={url:t[3],func:t[1]||s,args:t[2]?t[2].split(","):[],line:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}!i.func&&i.line&&(i.func=s),c.push(i)}return c.length?(c[0].column||"undefined"==typeof e.columnNumber||(c[0].column=e.columnNumber+1),{name:e.name,message:e.message,url:n(),stack:c}):null}}function t(e,t,i,n){var o={url:t,line:i};if(o.url&&o.line){if(e.incomplete=!1,o.func||(o.func=s),e.stack.length>0&&e.stack[0].url===o.url){if(e.stack[0].line===o.line)return!1;if(!e.stack[0].line&&e.stack[0].func===o.func)return e.stack[0].line=o.line,!1}return e.stack.unshift(o),e.partial=!0,!0}return e.incomplete=!0,!1}function i(e,a){for(var l,c,d=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,u=[],h={},p=!1,f=i.caller;f&&!p;f=f.caller)if(f!==r&&f!==o.report){if(c={url:null,func:s,line:null,column:null},f.name?c.func=f.name:(l=d.exec(f.toString()))&&(c.func=l[1]),"undefined"==typeof c.func)try{c.func=l.input.substring(0,l.input.indexOf("{"))}catch(m){}h[""+f]?p=!0:h[""+f]=!0,u.push(c)}a&&u.splice(0,a);var g={name:e.name,message:e.message,url:n(),stack:u};return t(g,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),g}function r(t,r){var s=null;r=null==r?0:+r;try{if(s=e(t))return s}catch(a){if(o.debug)throw a}try{if(s=i(t,r+1))return s}catch(a){if(o.debug)throw a}return{name:t.name,message:t.message,url:n()}}return r.augmentStackTraceWithInitialElement=t,r.computeStackTraceFromStackProp=e,r}(),t.exports=o},{}]},{},[5])(5)}),jsonrpc={},jsonrpc.CallStack=function(e,t,i,n){this._counter=0,this._enterFn=e,this._exitFn=i,this._enterScope=t,this._exitScope=n},jsonrpc.CallStack.prototype={enter:function(){this._counter=this._counter<0?1:this._counter+1,1===this._counter&&this._enterFn.apply(this._enterScope,arguments)},exit:function(e){this._counter-=1,0===this._counter&&this._exitFn.apply(this._exitScope,arguments)}},jsonrpc.DelayedTask=function(e,t,i){this._fn=e||function(){},this._scope=t||void 0,this._args=i||[],this._id=null},jsonrpc.Observable=function(){this._listeners=[]},jsonrpc.Observable.prototype={bind:function(e,t){var i={fn:e,scope:t||this};return this._listeners.push(i),i},unbind:function(e){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)},trigger:function(){var e;for(e=0;e<this._listeners.length;e+=1)this._listeners[e].fn.apply(this._listeners[e].scope,arguments)}},jsonrpc.DelayedTask.prototype={delay:function(e,t,i,n){var o=this;this._fn=t||this._fn,this._scope=i||this._scope,this._args=n||this._args,this.cancel(),this._id=window.setInterval(function(){window.clearInterval(o._id),o._id=null,o._fn.apply(o._scope,o._args)},e)},cancel:function(){this._id&&(window.clearInterval(this._id),this._id=null)}},jsonrpc.JsonRpc=function(e){var t=e.split("/");this._url=e,this._end=t[t.length-2],this.loading=new jsonrpc.Observable,this.loaded=new jsonrpc.Observable,this.unhandledFailure=new jsonrpc.Observable,this._loadingState=new jsonrpc.CallStack(this.loading.trigger,this.loading,this.loaded.trigger,this.loaded),this._requests=[],this._batchingMilliseconds=10,this._delayedTask=new jsonrpc.DelayedTask},jsonrpc.JsonRpc.prototype={setBatchingMilliseconds:function(e){this._batchingMilliseconds=e},call:function(){var e=this._getParams.apply(this,arguments);this._loadingState.enter(),e.standalone?this._sendRequests([e]):(this._requests.push(e),this._batchingMilliseconds?this._delayedTask.delay(this._batchingMilliseconds,this._sendRequests,this):this._sendRequests())},_sendRequests:function(e){function t(t,n,r){var s;if(t)s=o._isArray(n)?n:[n];else for(s=[],i=0;i<e.length;i+=1)s[i]={id:i,error:{message:n}};o._handleResponses(e,s,r)}var i,n,o=this,r=[],s=[],a=[],l=[],c=!0;for("undefined"==typeof e&&(e=o._requests,o._requests=[]),i=0;i<e.length;i+=1)e[i].request.id=i,e[i].secure?(l.push(e[i].request.method),s.push(e[i].request)):(a.push(e[i].request.method),r.push(e[i].request));r.length>0&&(1===r.length&&(r=r[0]),n=o._url+(c?"?"+this._end+"["+a.join()+"]":""),o._doJsonPost(n,r,t)),s.length>0&&(1===s.length&&(s=s[0]),n=o._url+(c?"?"+this._end+"["+l.join()+"]":""),o._doJsonpGet(n,s,t))},_handleResponses:function(e,t,i){var n,o,r;for(n=0;n<t.length;n+=1)o=t[n],r=e[o.id],this._handleResponse(r,o,i)},_handleResponse:function(e,t,i){var n=!t.error,o=n?t.result:t.error.message;this._loadingState.exit(),n?e.success.call(e.scope,o,i):e.failure.call(e.scope,o,i),e.callback.call(e.scope,n,o,i)},_getParams:function(){var e=this,t=Array.prototype.slice.call(arguments),i={request:{jsonrpc:"2.0",method:t.shift()}};for(i.request.params=[];t.length>1&&!this._isFunction(t[0]);)i.request.params.push(t.shift());return this._isFunction(t[0])?(i.success=t[0],i.scope=t[1]):(i.success=t[0].success,i.failure=t[0].failure,i.callback=t[0].callback,i.scope=t[0].scope,i.secure=!!t[0].secure,i.standalone=!!t[0].standalone),i.success=i.success||function(){},i.failure=i.failure||function(){e.unhandledFailure.trigger.apply(e.unhandledFailure,arguments)},i.callback=i.callback||function(){},i},_isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},_isFunction:function(e){return"[object Function]"===Object.prototype.toString.apply(e)},_beforeSend:function(e){},_doJsonPost:function(e,t,i){var n=Weebly.jQuery||require("jquery"),o=n.ajax({type:"POST",url:e,cache:!1,contentType:"application/json; charset=UTF-8",dataType:"json",beforeSend:this._beforeSend,data:JSON.stringify(t),headers:{"x-wtok":Weebly.RequestToken}}).done(function(e){var t=o.getResponseHeader("Content-Type");200!==o.status?i(!1,'Expected HTTP response "200 OK", found "'+o.status+" "+o.statusText+'"',o):0!==t.indexOf("application/json")?i(!1,'Expected JSON encoded response, found "'+t+'"',o):i(!0,e,o)}).fail(function(){i(!1,"HTTP request failed",o)})},_doJsonpGet:function(e,t,i){e="https://"+_W.securePrefix+e;var n=Weebly.jQuery||require("jquery"),o=n.ajax({type:"GET",url:e,cache:!1,jsonpCallback:"WJsonp",dataType:"jsonp",beforeSend:this._beforeSend,data:t,headers:{"x-wtok":Weebly.RequestToken}}).done(function(e){i(!0,e,o)}).fail(function(){i(!1,"HTTP request failed",o)})}},_wAMD.define("vendor/jsonrpc",function(e){return function(){var t;return t||e.jsonrpc}}(this)),function(e,t){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("lumberjack",["jquery","vendor/jsonrpc"],t):void 0!==typeof exports?t(require("jQuery"),require("vendor/jsonrpc")):t(e.jQuery,e.jsonrpc)}(this,function(e,t){var i=function(e){this.rpc=new t.JsonRpc(e.url),e.delay&&this.rpc.setBatchingMilliseconds(e.delay),this.secure=!!e.secure,this.standalone=!!e.standalone};return i.prototype.log=function(){var t=Array.prototype.slice.call(arguments),i=e.Deferred();return t.length?(t.unshift("Logger::log"),t.push({success:i.resolve,failure:i.reject,scope:i,secure:this.secure,standalone:this.standalone}),this.rpc.call.apply(this.rpc,t)):i.reject(),i.promise()},new i({url:"/api/JsonRPC/Ocular/",standalone:!1,delay:500})}),_wAMD.define("util/Corax",["underscore","raven-js","lumberjack"],function(e,t,i){var n={LEVEL:{INFO:"info",WARNING:"warning",ERROR:"error"}},o=25,r=6e4,s=null,a={},l=[/dev.weebly.net$/],c=[/^https?:\/\/([A-Za-z0-9-]+\.)*(?:weebly.net|weebly.com|weeblycloud.com|editmysite.com)/],d={dataCallback:function(e){return e},shouldSendCallback:e.noop};n.isBlacklisted=function(e){return l.length?h(l).test(e):!1},n.install=function(l){return l=e.extend({},d,l),n.isBlacklisted(document.location.hostname)?t:e.isString(l.project)?e.isUndefined(l.release)?(console.warn("Release tag not defined"),t):t.config("https://ocular@editmysite.com/"+l.project,{release:l.release,whitelistUrls:c,autoBreadcrumbs:!1,dataCallback:function(e){return e=l.dataCallback(e)},shouldSendCallback:function(e){var t=l.shouldSendCallback(e);return t!==!1&&(u(e.message)>=o?t=!1:s||(s=setTimeout(function(){s=null,a={}},r))),t!==!1},transport:function(e){
i.log(e.data).done(e.onSuccess).fail(e.onError)}}).install():(console.warn("Project name not defined"),t)};var u=function(e){return"number"==typeof a[e]?a[e]++:a[e]=1,a[e]},h=function(t){for(var i,n=[],o=0,r=t.length;r>o;o++)i=t[o],e.isString(i)?n.push(i.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):i&&i.source&&n.push(i.source);return new RegExp(n.join("|"),"i")};return n}),function(e,t){if("function"==typeof _wAMD.define&&_wAMD.define.amd)_wAMD.define("backbone",["underscore","jquery","exports"],function(i,n,o){e.Backbone=t(e,o,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");t(e,exports,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,i,n){var o=e.Backbone,r=[],s=(r.push,r.slice);r.splice;t.VERSION="1.1.2",t.$=n,t.noConflict=function(){return e.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=t.Events={on:function(e,t,i){if(!c(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var o=this,r=i.once(function(){o.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)},off:function(e,t,n){var o,r,s,a,l,d,u,h;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(a=e?[e]:i.keys(this._events),l=0,d=a.length;d>l;l++)if(e=a[l],s=this._events[e]){if(this._events[e]=o=[],t||n)for(u=0,h=s.length;h>u;u++)r=s[u],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&o.push(r);o.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!c(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&d(i,t),n&&d(n,arguments),this},stopListening:function(e,t,n){var o=this._listeningTo;if(!o)return this;var r=!t&&!n;n||"object"!=typeof t||(n=this),e&&((o={})[e._listenId]=e);for(var s in o)e=o[s],e.off(t,n,this),(r||i.isEmpty(e._events))&&delete this._listeningTo[s];return this}},l=/\s+/,c=function(e,t,i,n){if(!i)return!0;if("object"==typeof i){for(var o in i)e[t].apply(e,[o,i[o]].concat(n));return!1}if(l.test(i)){for(var r=i.split(l),s=0,a=r.length;a>s;s++)e[t].apply(e,[r[s]].concat(n));return!1}return!0},d=function(e,t){var i,n=-1,o=e.length,r=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++n<o;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r);return;case 2:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r,s);return;case 3:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r,s,a);return;default:for(;++n<o;)(i=e[n]).callback.apply(i.ctx,t);return}},u={listenTo:"on",listenToOnce:"once"};i.each(u,function(e,t){a[t]=function(t,n,o){var r=this._listeningTo||(this._listeningTo={}),s=t._listenId||(t._listenId=i.uniqueId("l"));return r[s]=t,o||"object"!=typeof n||(o=this),t[e](n,o,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(t,a);var h=t.Model=function(e,t){var n=e||{};t||(t={}),this.cid=i.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(h.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var o,r,s,a,l,c,d,u;if(null==e)return this;if("object"==typeof e?(r=e,n=t):(r={})[e]=t,n||(n={}),!this._validate(r,n))return!1;s=n.unset,l=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),u=this.attributes,d=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(o in r)t=r[o],i.isEqual(u[o],t)||a.push(o),i.isEqual(d[o],t)?delete this.changed[o]:this.changed[o]=t,s?delete u[o]:u[o]=t;if(!l){a.length&&(this._pending=n);for(var h=0,p=a.length;p>h;h++)this.trigger("change:"+a[h],this,u[a[h]],n)}if(c)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?i.clone(this.changed):!1;var t,n=!1,o=this._changing?this._previousAttributes:this.attributes;for(var r in e)i.isEqual(o[r],t=e[r])||((n||(n={}))[r]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(n&&n(t,i,e),void t.trigger("sync",t,i,e)):!1},B(this,e),this.sync("read",this,e)},save:function(e,t,n){var o,r,s,a=this.attributes;if(null==e||"object"==typeof e?(o=e,n=t):(o={})[e]=t,n=i.extend({validate:!0},n),o&&!n.wait){if(!this.set(o,n))return!1}else if(!this._validate(o,n))return!1;o&&n.wait&&(this.attributes=i.extend({},a,o)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(e){l.attributes=a;var t=l.parse(e,n);return n.wait&&(t=i.extend(o||{},t)),i.isObject(t)&&!l.set(t,n)?!1:(c&&c(l,e,n),void l.trigger("sync",l,e,n))},B(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=o),s=this.sync(r,this,n),o&&n.wait&&(this.attributes=a),s},destroy:function(e){e=e?i.clone(e):{};var t=this,n=e.success,o=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(i){(e.wait||t.isNew())&&o(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)},this.isNew())return e.success(),!1;B(this,e);var r=this.sync("delete",this,e);return e.wait||o(),r},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||L();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,i.extend(t,{validationError:n})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];i.each(p,function(e){h.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.attributes),i[e].apply(i,t)}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};i.extend(f.prototype,a,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,g))},remove:function(e,t){var n=!i.isArray(e);e=n?[e]:i.clone(e),t||(t={});var o,r,s,a;for(o=0,r=e.length;r>o;o++)a=e[o]=this.get(e[o]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,t.silent||(t.index=s,a.trigger("remove",a,this,t)),this._removeReference(a,t));return n?e[0]:e},set:function(e,t){t=i.defaults({},t,m),t.parse&&(e=this.parse(e,t));var n=!i.isArray(e);e=n?e?[e]:[]:i.clone(e);var o,r,s,a,l,c,d,u=t.at,p=this.model,f=this.comparator&&null==u&&t.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,v=[],b=[],y={},w=t.add,_=t.merge,E=t.remove,T=!f&&w&&E?[]:!1;for(o=0,r=e.length;r>o;o++){if(l=e[o]||{},s=l instanceof h?a=l:l[p.prototype.idAttribute||"id"],c=this.get(s))E&&(y[c.cid]=!0),_&&(l=l===a?a.attributes:l,t.parse&&(l=c.parse(l,t)),c.set(l,t),f&&!d&&c.hasChanged(g)&&(d=!0)),e[o]=c;else if(w){if(a=e[o]=this._prepareModel(l,t),!a)continue;v.push(a),this._addReference(a,t)}a=c||a,!T||!a.isNew()&&y[a.id]||T.push(a),y[a.id]=!0}if(E){for(o=0,r=this.length;r>o;++o)y[(a=this.models[o]).cid]||b.push(a);b.length&&this.remove(b,t)}if(v.length||T&&T.length)if(f&&(d=!0),this.length+=v.length,null!=u)for(o=0,r=v.length;r>o;o++)this.models.splice(u+o,0,v[o]);else{T&&(this.models.length=0);var C=T||v;for(o=0,r=C.length;r>o;o++)this.models.push(C[o])}if(d&&this.sort({silent:!0}),!t.silent){for(o=0,r=v.length;r>o;o++)(a=v[o]).trigger("add",a,this,t);(d||T&&T.length)&&this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,o=this.models.length;o>n;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return s.apply(this.models,arguments)},get:function(e){return null!=e?this._byId[e]||this._byId[e.id]||this._byId[e.cid]:void 0},at:function(e){return this.models[e]},where:function(e,t){return i.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return i.invoke(this.models,"get",e)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var o=e.reset?"reset":"set";n[o](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},B(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?i.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,o=t.success;return t.success=function(e,i){t.wait&&n.add(e,t),o&&o(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e;t=t?i.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_addReference:function(e,t){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(v,function(e){f.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.models),i[e].apply(i,t)}});var b=["groupBy","countBy","sortBy","indexBy"];i.each(b,function(e){f.prototype[e]=function(t,n){var o=i.isFunction(t)?t:function(e){return e.get(t)};return i[e](this.models,o,n)}});var y=t.View=function(e){this.cid=i.uniqueId("view"),e||(e={}),i.extend(this,i.pick(e,_)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];i.extend(y.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=i.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(i.isFunction(n)||(n=this[e[t]]),n){var o=t.match(w),r=o[1],s=o[2];n=i.bind(n,this),r+=".delegateEvents"+this.cid,""===s?this.$el.on(r,n):this.$el.on(r,s,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e["class"]=i.result(this,"className"));var n=t.$("<"+i.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,o){var r=T[e];i.defaults(o||(o={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:r,dataType:"json"};if(o.url||(s.url=i.result(n,"url")||L()),null!=o.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(o.attrs||n.toJSON(o))),o.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),o.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST",o.emulateJSON&&(s.data._method=r);var a=o.beforeSend;o.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),a?a.apply(this,arguments):void 0}}"GET"===s.type||o.emulateJSON||(s.processData=!1),"PATCH"===s.type&&E&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=o.xhr=t.ajax(i.extend(s,o));return n.trigger("request",n,l,o),l};var E=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,I=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(C.prototype,a,{initialize:function(){},route:function(e,n,o){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(n)&&(o=n,n=""),o||(o=this[n]);var r=this;return t.history.route(e,function(i){var s=r._extractParameters(e,i);r.execute(o,s),r.trigger.apply(r,["route:"+n].concat(s)),r.trigger("route",n,s),t.history.trigger("route",r,n,s)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(k,"\\$&").replace(S,"(?:$1)?").replace(D,function(e,t){return t?e:"([^/?]+)"}).replace(I,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return i.map(n,function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null})}});var O=t.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,x=/^\/+|\/+$/g,A=/msie [\w.]+/,P=/\/$/,M=/#.*$/;O.started=!1,i.extend(O.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(P,"");e.indexOf(i)||(e=e.slice(i.length))}else e=this.getHash();return e.replace(R,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),o=document.documentMode,r=A.exec(navigator.userAgent.toLowerCase())&&(!o||7>=o);if(this.root=("/"+this.root+"/").replace(x,"/"),r&&this._wantsHashChange){var s=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(R,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),i.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!O.started)return!1;t&&t!==!0||(t={trigger:!!t});var i=this.root+(e=this.getFragment(e||""));if(e=e.replace(M,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new O;var N=function(e,t){var n,o=this;n=e&&i.has(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},i.extend(n,o,t);var r=function(){this.constructor=n};return r.prototype=o.prototype,n.prototype=new r,e&&i.extend(n.prototype,e),n.__super__=o.prototype,n};h.extend=f.extend=C.extend=y.extend=O.extend=N;var L=function(){throw new Error('A "url" property or function must be specified')},B=function(e,t){var i=t.error;t.error=function(n){i&&i(e,n,t),e.trigger("error",e,n,t)}};return t}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("underscore"),require("backbone")):"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("backbone-radio",["underscore","backbone"],t):(e.Backbone=e.Backbone||{},e.Backbone.Radio=t(e._,e.Backbone))}(this,function(e,t){function i(e,t,i,n){var o=e[t];return i&&i!==o.callback&&i!==o.callback._callback||n&&n!==o.context?void 0:(delete e[t],!0)}function n(t,n,o,r){t||(t={});for(var s=n?[n]:e.keys(t),a=!1,l=0,c=s.length;c>l;l++)n=s[l],t[n]&&i(t,n,o,r)&&(a=!0);return a}function o(t){return d[t]||(d[t]=e.bind(l.log,l,t))}function r(t){return e.isFunction(t)?t:function(){return t}}e="default"in e?e["default"]:e,t="default"in t?t["default"]:t;var s={};s["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var a=t.Radio,l=t.Radio={};l.VERSION="1.0.4",l.noConflict=function(){return t.Radio=a,this},l.DEBUG=!1,l._debugText=function(e,t,i){return e+(i?" on the "+i+" channel":"")+': "'+t+'"'},l.debugLog=function(e,t,i){l.DEBUG&&console&&console.warn&&console.warn(l._debugText(e,t,i))};var c=/\s+/;l._eventsApi=function(t,i,n,o){if(!n)return!1;var r={};if("object"===("undefined"==typeof n?"undefined":s["typeof"](n))){for(var a in n){var l=t[i].apply(t,[a,n[a]].concat(o));c.test(a)?e.extend(r,l):r[a]=l}return r}if(c.test(n)){for(var d=n.split(c),u=0,h=d.length;h>u;u++)r[d[u]]=t[i].apply(t,[d[u]].concat(o));return r}return!1},l._callHandler=function(e,t,i){var n=i[0],o=i[1],r=i[2];switch(i.length){case 0:return e.call(t);case 1:return e.call(t,n);case 2:return e.call(t,n,o);case 3:return e.call(t,n,o,r);default:return e.apply(t,i)}};var d={};e.extend(l,{log:function(t,i){if("undefined"!=typeof console){var n=e.toArray(arguments).slice(2);console.log("["+t+'] "'+i+'"',n)}},tuneIn:function(e){var t=l.channel(e);return t._tunedIn=!0,t.on("all",o(e)),this},tuneOut:function(e){var t=l.channel(e);return t._tunedIn=!1,t.off("all",o(e)),delete d[e],this}}),l.Requests={request:function(t){var i=e.toArray(arguments).slice(1),n=l._eventsApi(this,"request",t,i);if(n)return n;var o=this.channelName,r=this._requests;if(o&&this._tunedIn&&l.log.apply(this,[o,t].concat(i)),r&&(r[t]||r["default"])){var s=r[t]||r["default"];return i=r[t]?i:arguments,l._callHandler(s.callback,s.context,i)}l.debugLog("An unhandled request was fired",t,o)},reply:function(e,t,i){return l._eventsApi(this,"reply",e,[t,i])?this:(this._requests||(this._requests={}),this._requests[e]&&l.debugLog("A request was overwritten",e,this.channelName),this._requests[e]={callback:r(t),context:i||this},this)},replyOnce:function(t,i,n){if(l._eventsApi(this,"replyOnce",t,[i,n]))return this;var o=this,s=e.once(function(){return o.stopReplying(t),r(i).apply(this,arguments)});return this.reply(t,s,n)},stopReplying:function(e,t,i){return l._eventsApi(this,"stopReplying",e)?this:(e||t||i?n(this._requests,e,t,i)||l.debugLog("Attempted to remove the unregistered request",e,this.channelName):delete this._requests,this)}},l._channels={},l.channel=function(e){if(!e)throw new Error("You must provide a name for the channel.");return l._channels[e]?l._channels[e]:l._channels[e]=new l.Channel(e)},l.Channel=function(e){this.channelName=e},e.extend(l.Channel.prototype,t.Events,l.Requests,{reset:function(){return this.off(),this.stopListening(),this.stopReplying(),this}});var u,h,p=[t.Events,l.Requests];return e.each(p,function(t){e.each(t,function(t,i){l[i]=function(t){return h=e.toArray(arguments).slice(1),u=this.channel(t),u[i].apply(u,h)}})}),l.reset=function(t){var i=t?[this._channels[t]]:this._channels;e.each(i,function(e){e.reset()})},l}),function(e){if("object"==typeof exports)module.exports=e(require("underscore"),require("backbone"));else if("function"==typeof define&&define.amd)_wAMD.define("backbone-pageable",["underscore","backbone"],e);else if("undefined"!=typeof _&&"undefined"!=typeof Backbone){var t=Backbone.PageableCollection,i=e(_,Backbone);Backbone.PageableCollection.noConflict=function(){return Backbone.PageableCollection=t,i}}}(function(e,t){function i(t,i){if(!e.isNumber(t)||e.isNaN(t)||!e.isFinite(t)||~~t!==t)throw new TypeError("`"+i+"` must be a finite integer");return t}function n(e){for(var t,i,n,o,r={},s=decodeURIComponent,a=e.split("&"),l=0,c=a.length;c>l;l++){var d=a[l];t=d.split("="),i=t[0],n=t[1]||!0,i=s(i),n=s(n),o=r[i],f(o)?o.push(n):o?r[i]=[o,n]:r[i]=n}return r}function o(e,t,i){var n=e._events[t];if(n&&n.length){var o=n[n.length-1],r=o.callback;o.callback=function(){try{r.apply(this,arguments),i()}catch(e){throw e}finally{o.callback=r}}}else i()}var r=e.extend,s=e.omit,a=e.clone,l=e.each,c=e.pick,d=e.contains,u=e.isEmpty,h=e.pairs,p=e.invert,f=e.isArray,m=e.isFunction,g=e.isObject,v=e.keys,b=e.isUndefined,y=e.result,w=Math.ceil,_=Math.floor,E=Math.max,T=t.Collection.prototype,C=/[\s'"]/g,S=/[<>\s'"]/g,D=t.PageableCollection=t.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(e,t){T.constructor.apply(this,arguments),t=t||{};var i=this.mode=t.mode||this.mode||I.mode,n=r({},I.queryParams,this.queryParams,t.queryParams||{});n.directions=r({},I.queryParams.directions,this.queryParams.directions,n.directions||{}),this.queryParams=n;var o=this.state=r({},I.state,this.state,t.state||{});o.currentPage=null==o.currentPage?o.firstPage:o.currentPage,f(e)||(e=e?[e]:[]),"server"==i||null!=o.totalRecords||u(e)||(o.totalRecords=e.length),this.switchMode(i,r({fetch:!1,resetState:!1,models:e},t));var s=t.comparator;if(o.sortKey&&!s&&this.setSorting(o.sortKey,o.order,t),"server"!=i){var l=this.fullCollection;s&&t.full&&(this.comparator=null,l.comparator=s),t.full&&l.sort(),e&&!u(e)&&(this.reset([].slice.call(e),r({silent:!0},t)),this.getPage(o.currentPage),e.splice.apply(e,[0,e.length].concat(this.models)))}this._initState=a(this.state)},_makeFullCollection:function(e,i){var n,o,r,s=["url","model","sync","comparator"],a=this.constructor.prototype,l={};for(n=0,o=s.length;o>n;n++)r=s[n],b(a[r])||(l[r]=a[r]);var c=new(t.Collection.extend(l))(e,i);for(n=0,o=s.length;o>n;n++)r=s[n],this[r]!==a[r]&&(c[r]=this[r]);return c},_makeCollectionEventHandler:function(e,t){return function(i,n,s,c){var d=e._handlers;l(v(d),function(i){var n=d[i];e.off(i,n),t.off(i,n)});var u=a(e.state),h=u.firstPage,p=0===h?u.currentPage:u.currentPage-1,f=u.pageSize,m=p*f,g=m+f;if("add"==i){var y,_,E,T,c=c||{};if(s==t)_=t.indexOf(n),_>=m&&g>_&&(T=e,y=E=_-m);else{y=e.indexOf(n),_=m+y,T=t;var E=b(c.at)?_:c.at+m}if(c.onRemove||(++u.totalRecords,delete c.onRemove),e.state=e._checkState(u),T){T.add(n,r({},c||{},{at:E}));var C=y>=f?n:!b(c.at)&&g>E&&e.length>f?e.at(f):null;C&&o(s,i,function(){e.remove(C,{onAdd:!0})})}}if("remove"==i)if(c.onAdd)delete c.onAdd;else{if(--u.totalRecords){var S=u.totalPages=w(u.totalRecords/f);u.lastPage=0===h?S-1:S||h,u.currentPage>S&&(u.currentPage=u.lastPage)}else u.totalRecords=null,u.totalPages=null;e.state=e._checkState(u);var D,I=c.index;s==e?((D=t.at(g))&&o(e,i,function(){e.push(D,{onRemove:!0})}),t.remove(n)):I>=m&&g>I&&((D=t.at(g-1))&&o(e,i,function(){e.push(D,{onRemove:!0})}),e.remove(n))}if("reset"==i)if(c=s,s=n,s==e&&null==c.from&&null==c.to){var k=t.models.slice(0,m),O=t.models.slice(m+e.models.length);t.reset(k.concat(e.models).concat(O),c)}else s==t&&((u.totalRecords=t.models.length)||(u.totalRecords=null,u.totalPages=null),"client"==e.mode&&(u.lastPage=u.currentPage=u.firstPage),e.state=e._checkState(u),e.reset(t.models.slice(m,g),r({},c,{parse:!1})));"sort"==i&&(c=s,s=n,s===t&&e.reset(t.models.slice(m,g),r({},c,{parse:!1}))),l(v(d),function(i){var n=d[i];l([e,t],function(e){e.on(i,n);var t=e._events[i]||[];t.unshift(t.pop())})})}},_checkState:function(e){var t=this.mode,n=this.links,o=e.totalRecords,r=e.pageSize,s=e.currentPage,a=e.firstPage,l=e.totalPages;if(null!=o&&null!=r&&null!=s&&null!=a&&("infinite"==t?n:!0)){if(o=i(o,"totalRecords"),r=i(r,"pageSize"),s=i(s,"currentPage"),a=i(a,"firstPage"),1>r)throw new RangeError("`pageSize` must be >= 1");if(l=e.totalPages=w(o/r),0>a||a>1)throw new RangeError("`firstPage must be 0 or 1`");if(e.lastPage=0===a?E(0,l-1):l||a,"infinite"==t){if(!n[s+""])throw new RangeError("No link found for page "+s)}else if(a>s||l>0&&(a?s>l:s>=l))throw new RangeError("`currentPage` must be firstPage <= currentPage "+(a?">":">=")+" totalPages if "+a+"-based. Got "+s+".")}return e},setPageSize:function(e,t){e=i(e,"pageSize"),t=t||{first:!1};var n=this.state,o=w(n.totalRecords/e),a=o?E(n.firstPage,_(o*(n.firstPage?n.currentPage:n.currentPage+1)/n.totalPages)):n.firstPage;return n=this.state=this._checkState(r({},n,{pageSize:e,currentPage:t.first?n.firstPage:a,totalPages:o})),this.getPage(n.currentPage,s(t,["first"]))},switchMode:function(t,i){if(!d(["server","client","infinite"],t))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');i=i||{fetch:!0,resetState:!0};var n=this.state=i.resetState?a(this._initState):this._checkState(r({},this.state));this.mode=t;var o,c=this,u=this.fullCollection,h=this._handlers=this._handlers||{};if("server"==t||u)"server"==t&&u&&(l(v(h),function(e){o=h[e],c.off(e,o),u.off(e,o)}),delete this._handlers,this._fullComparator=u.comparator,delete this.fullCollection);else{u=this._makeFullCollection(i.models||[],i),u.pageableCollection=this,this.fullCollection=u;var p=this._makeCollectionEventHandler(this,u);l(["add","remove","reset","sort"],function(t){h[t]=o=e.bind(p,{},t),c.on(t,o),u.on(t,o)}),u.comparator=this._fullComparator}if("infinite"==t)for(var f=this.links={},m=n.firstPage,g=w(n.totalRecords/n.pageSize),b=0===m?E(0,g-1):g||m,y=n.firstPage;b>=y;y++)f[y]=this.url;else this.links&&delete this.links;return i.fetch?this.fetch(s(i,"fetch","resetState")):this},hasPrevious:function(){var e=this.state,t=e.currentPage;return"infinite"!=this.mode?t>e.firstPage:!!this.links[t-1]},hasNext:function(){var e=this.state,t=this.state.currentPage;return"infinite"!=this.mode?t<e.lastPage:!!this.links[t+1]},getFirstPage:function(e){return this.getPage("first",e)},getPreviousPage:function(e){return this.getPage("prev",e)},getNextPage:function(e){return this.getPage("next",e)},getLastPage:function(e){return this.getPage("last",e)},getPage:function(e,t){var n=this.mode,o=this.fullCollection;t=t||{fetch:!1};var a=this.state,l=a.firstPage,c=a.currentPage,d=a.lastPage,h=a.pageSize,p=e;switch(e){case"first":p=l;break;case"prev":p=c-1;break;case"next":p=c+1;break;case"last":p=d;break;default:p=i(e,"index")}this.state=this._checkState(r({},a,{currentPage:p})),t.from=c,t.to=p;var f=(0===l?p:p-1)*h,m=o&&o.length?o.models.slice(f,f+h):[];return"client"!=n&&("infinite"!=n||u(m))||t.fetch?("infinite"==n&&(t.url=this.links[p]),this.fetch(s(t,"fetch"))):(this.reset(m,s(t,"fetch")),this)},getPageByOffset:function(e,t){if(0>e)throw new RangeError("`offset must be > 0`");e=i(e);var n=_(e/this.state.pageSize);return 0!==this.state.firstPage&&n++,n>this.state.lastPage&&(n=this.state.lastPage),this.getPage(n,t)},sync:function(e,i,n){var o=this;if("infinite"==o.mode){var s=n.success,a=o.state.currentPage;n.success=function(e,t,i){var l=o.links,c=o.parseLinks(e,r({xhr:i},n));c.first&&(l[o.state.firstPage]=c.first),c.prev&&(l[a-1]=c.prev),c.next&&(l[a+1]=c.next),s&&s(e,t,i)}}return(T.sync||t.sync).call(o,e,i,n)},parseLinks:function(e,t){var i={},n=t.xhr.getResponseHeader("Link");if(n){var o=["first","prev","next"];l(n.split(","),function(e){var t=e.split(";"),n=t[0].replace(S,""),r=t.slice(1);l(r,function(e){var t=e.split("="),r=t[0].replace(C,""),s=t[1].replace(C,"");"rel"==r&&d(o,s)&&(i[s]=n)})})}return i},parse:function(e,t){var i=this.parseState(e,a(this.queryParams),a(this.state),t);return i&&(this.state=this._checkState(r({},this.state,i))),this.parseRecords(e,t)},parseState:function(t,i,n,o){if(t&&2===t.length&&g(t[0])&&f(t[1])){var r=a(n),c=t[0];return l(h(s(i,"directions")),function(t){var i=t[0],n=t[1],o=c[n];b(o)||e.isNull(o)||(r[i]=c[n])}),c.order&&(r.order=1*p(i.directions)[c.order]),r}},parseRecords:function(e,t){
return e&&2===e.length&&g(e[0])&&f(e[1])?e[1]:e},fetch:function(e){e=e||{};var t=this._checkState(this.state),i=this.mode;"infinite"!=i||e.url||(e.url=this.links[t.currentPage]);var o=e.data||{},l=y(e,"url")||y(this,"url")||"",d=l.indexOf("?");-1!=d&&(r(o,n(l.slice(d+1))),l=l.slice(0,d)),e.url=l,e.data=o;var u,p,f,g,w="client"==this.mode?c(this.queryParams,"sortKey","order"):s(c(this.queryParams,v(I.queryParams)),"directions"),_=h(w),E=a(this);for(u=0;u<_.length;u++)p=_[u],f=p[0],g=p[1],g=m(g)?g.call(E):g,null!=t[f]&&null!=g&&(o[g]=t[f]);t.sortKey&&t.order?o[w.order]=this.queryParams.directions[t.order+""]:t.sortKey||delete o[w.order];var C=h(s(this.queryParams,v(I.queryParams)));for(u=0;u<C.length;u++)p=C[u],g=p[1],g=m(g)?g.call(E):g,null!=g&&(o[p[0]]=g);if("server"!=i){var S=this,D=this.fullCollection,k=e.success;return e.success=function(t,n,o){o=o||{},b(e.silent)?delete o.silent:o.silent=e.silent;var s=t.models;"client"==i?D.reset(s,o):(D.add(s,r({at:D.length},r(o,{parse:!1}))),S.trigger("reset",S,o)),k&&k(t,n,o)},T.fetch.call(this,r({},e,{silent:!0}))}return T.fetch.call(this,e)},_makeComparator:function(e,t,i){var n=this.state;return e=e||n.sortKey,t=t||n.order,e&&t?(i||(i=function(e,t){return e.get(t)}),function(n,o){var r,s=i(n,e),a=i(o,e);return 1===t&&(r=s,s=a,a=r),s===a?0:a>s?-1:1}):void 0},setSorting:function(t,i,n){var o=this.state;o.sortKey=t,o.order=i=i||o.order;var s=this.fullCollection,a=!1,l=!1;t||(a=l=!0);var c=this.mode;n=r({side:"client"==c?c:"server",full:!0},n);var d=this._makeComparator(t,i,n.sortValue),u=n.full,h=n.side;return"client"==h?u?(s&&(s.comparator=d),a=!0):(this.comparator=d,l=!0):"server"!=h||u||(this.comparator=d),a&&(this.comparator=null),l&&s&&(s.comparator=null),this.fetchOptions=e.extend({},this.fetchOptions,{sort:[{property:t,direction:i>0?"ASC":"DESC"}]}),this}}),I=D.prototype;return D}),function(e){"object"==typeof exports?module.exports=e(require("backbone"),require("underscore")):"function"==typeof _wAMD.define&&_wAMD.define.amd&&_wAMD.define("backbone-validation",["backbone","underscore"],e)}(function(e,t){return e.Validation=function(t){var i={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},n={formatLabel:function(e,t){return c[i.labelFormatter](e,t)},format:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.replace(/\{(\d+)\}/g,function(t,i){return"undefined"!=typeof e[i]?e[i]:t})}},o=function(i,n,r){return n=n||{},r=r||"",t.each(i,function(t,s){i.hasOwnProperty(s)&&(t&&"object"==typeof t&&!(t instanceof Array||t instanceof Date||t instanceof RegExp||t instanceof e.Model||t instanceof e.Collection)?o(t,n,r+s+"."):n[r+s]=t)}),n},r=function(){var e=function(e){return t.reduce(t.keys(t.result(e,"validation")||{}),function(e,t){return e[t]=void 0,e},{})},r=function(e,i){var n=e.validation?t.result(e,"validation")[i]||{}:{};return(t.isFunction(n)||t.isString(n))&&(n={fn:n}),t.isArray(n)||(n=[n]),t.reduce(n,function(e,i){return t.each(t.without(t.keys(i),"msg"),function(t){e.push({fn:d[t],val:i[t],msg:i.msg})}),e},[])},a=function(e,i,o,s){return t.reduce(r(e,i),function(r,a){var l=t.extend({},n,d),c=a.fn.call(l,o,i,a.val,e,s);return c===!1||r===!1?!1:c&&!r?t.result(a,"msg")||c:r},"")},l=function(e,i){var n,r={},s=!0,l=t.clone(i),c=o(i);return t.each(c,function(t,i){n=a(e,i,t,l),n&&(r[i]=n,s=!1)}),{invalidAttrs:r,isValid:s}},c=function(i,n){return{preValidate:function(e,i){var n,o=this,r={};return t.isObject(e)?(t.each(e,function(e,t){n=o.preValidate(t,e),n&&(r[t]=n)}),t.isEmpty(r)?void 0:r):a(this,e,i,t.extend({},this.attributes))},isValid:function(e){var i=o(this.attributes);return t.isString(e)?!a(this,e,i[e],t.extend({},this.attributes)):t.isArray(e)?t.reduce(e,function(e,n){return e&&!a(this,n,i[n],t.extend({},this.attributes))},!0,this):(e===!0&&this.validate(),this.validation?this._isValid:!0)},validate:function(r,s){var a=this,c=!r,d=t.extend({},n,s),u=e(a),h=t.extend({},u,a.attributes,r),p=o(r||h),f=l(a,h);return a._isValid=f.isValid,t.each(u,function(e,t){var n=f.invalidAttrs.hasOwnProperty(t);n||d.valid(i,t,d.selector)}),t.each(u,function(e,t){var n=f.invalidAttrs.hasOwnProperty(t),o=p.hasOwnProperty(t);n&&(o||c)&&d.invalid(i,t,f.invalidAttrs[t],d.selector)}),t.defer(function(){a.trigger("validated",a._isValid,a,f.invalidAttrs),a.trigger("validated:"+(a._isValid?"valid":"invalid"),a,f.invalidAttrs)}),!d.forceUpdate&&t.intersection(t.keys(f.invalidAttrs),t.keys(p)).length>0?f.invalidAttrs:void 0}}},u=function(e,i,n){t.extend(i,c(e,n))},h=function(e){delete e.validate,delete e.preValidate,delete e.isValid},p=function(e){u(this.view,e,this.options)},f=function(e){h(e)};return{version:"0.9.1",configure:function(e){t.extend(i,e)},bind:function(e,n){n=t.extend({},i,s,n);var o=n.model||e.model,r=n.collection||e.collection;if("undefined"==typeof o&&"undefined"==typeof r)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";o?u(e,o,n):r&&(r.each(function(t){u(e,t,n)}),r.bind("add",p,{view:e,options:n}),r.bind("remove",f))},unbind:function(e,i){i=t.extend({},i);var n=i.model||e.model,o=i.collection||e.collection;n?h(n):o&&(o.each(function(e){h(e)}),o.unbind("add",p),o.unbind("remove",f))},mixin:c(null,i)}}(),s=r.callbacks={valid:function(e,t,i){e.$("["+i+'~="'+t+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(e,t,i,n){e.$("["+n+'~="'+t+'"]').addClass("invalid").attr("data-error",i)}},a=r.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i,domain:/^(?:[a-zA-Z0-9]+(?:\-*[a-zA-Z0-9])*\.)+[a-zA-Z]{2,6}$/},l=r.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",digits:"{0} must only contain digits",number:"{0} must be a number","int":"{0} must be a whole number",email:"{0} must be a valid email",url:"{0} must be a valid url",domain:"{0} must be a valid domain",inlinePattern:"{0} is invalid"},c=r.labelFormatters={none:function(e){return e},sentenceCase:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toUpperCase():" "+e.toLowerCase()}).replace(/_/g," ")},label:function(e,t){return t.labels&&t.labels[e]||c.sentenceCase(e,t)}},d=r.validators=function(){var e=String.prototype.trim?function(e){return null===e?"":String.prototype.trim.call(e)}:function(e){var t=/^\s+/,i=/\s+$/;return null===e?"":e.toString().replace(t,"").replace(i,"")},i=function(e){return t.isNumber(e)||t.isString(e)&&e.match(a.number)},n=function(i){return!(t.isNull(i)||t.isUndefined(i)||t.isString(i)&&""===e(i)||t.isArray(i)&&t.isEmpty(i))};return{fn:function(e,i,n,o,r){return t.isString(n)&&(n=o[n]),n.call(o,e,i,r)},required:function(e,i,o,r,s){var a=t.isFunction(o)?o.call(r,e,i,s):o;return a||n(e)?a&&!n(e)?this.format(l.required,this.formatLabel(i,r)):void 0:!1},acceptance:function(e,i,n,o){return"true"===e||t.isBoolean(e)&&e!==!1?void 0:this.format(l.acceptance,this.formatLabel(i,o))},min:function(e,t,n,o){return!i(e)||n>e?this.format(l.min,this.formatLabel(t,o),n):void 0},max:function(e,t,n,o){return!i(e)||e>n?this.format(l.max,this.formatLabel(t,o),n):void 0},range:function(e,t,n,o){return!i(e)||e<n[0]||e>n[1]?this.format(l.range,this.formatLabel(t,o),n[0],n[1]):void 0},length:function(e,i,n,o){return t.isString(e)&&e.length===n?void 0:this.format(l.length,this.formatLabel(i,o),n)},minLength:function(e,i,n,o){return!t.isString(e)||e.length<n?this.format(l.minLength,this.formatLabel(i,o),n):void 0},maxLength:function(e,i,n,o){return!t.isString(e)||e.length>n?this.format(l.maxLength,this.formatLabel(i,o),n):void 0},rangeLength:function(e,i,n,o){return!t.isString(e)||e.length<n[0]||e.length>n[1]?this.format(l.rangeLength,this.formatLabel(i,o),n[0],n[1]):void 0},oneOf:function(e,i,n,o){return t.include(n,e)?void 0:this.format(l.oneOf,this.formatLabel(i,o),n.join(", "))},equalTo:function(e,t,i,n,o){return e!==o[i]?this.format(l.equalTo,this.formatLabel(t,n),this.formatLabel(i,n)):void 0},pattern:function(e,t,i,o){return n(e)&&e.toString().match(a[i]||i)?void 0:this.format(l[i]||l.inlinePattern,this.formatLabel(t,o),i)},url:function(e,t,i,n){return a.url.test(e)?void 0:this.format(l.url,this.formatLabel(t,n))},domain:function(e,t,i,n){return a.domain.test(e)?void 0:this.format(l.domain,this.formatLabel(t,n))},email:function(e,t,i,n){return a.email.test(e)?void 0:this.format(l.email,this.formatLabel(t,n))},number:function(e,t,i,n){return isNaN(parseFloat(e))||!isFinite(e)?this.format(l.number,this.formatLabel(t,n)):void 0},"int":function(e,t,i,n){return e%1!==0?this.format(l["int"],this.formatLabel(t,n)):void 0}}}();return t.each(d,function(e,i){d[i]=t.bind(d[i],t.extend({},n,d))}),r}(t),e.Validation}),function(e,t){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("backbone-relational",["exports","backbone","underscore"],t):"undefined"!=typeof exports?t(exports,require("backbone"),require("underscore")):t(e,e.Backbone,e._)}(this,function(e,t,i){t.Relational={showWarnings:!0},t.Semaphore={_class:"Backbone.Semaphore",_permitsAvailable:null,_permitsUsed:0,acquire:function(){if(this._permitsAvailable&&this._permitsUsed>=this._permitsAvailable)throw new Error("Max permits acquired");this._permitsUsed++},release:function(){if(0===this._permitsUsed)throw new Error("All permits released");this._permitsUsed--},isLocked:function(){return this._permitsUsed>0},setAvailablePermits:function(e){if(this._permitsUsed>e)throw new Error("Available permits cannot be less than used permits");this._permitsAvailable=e}},t.BlockingQueue=function(){this._queue=[]},i.extend(t.BlockingQueue.prototype,t.Semaphore,{_class:"Backbone.BlockingQueue",_queue:null,add:function(e){this.isBlocked()?this._queue.push(e):e()},process:function(){var e=this._queue;for(this._queue=[];e&&e.length;)e.shift()()},block:function(){this.acquire()},unblock:function(){this.release(),this.isBlocked()||this.process()},isBlocked:function(){return this.isLocked()}}),t.Relational.eventQueue=new t.BlockingQueue,t.Store=function(){this._collections=[],this._reverseRelations=[],this._orphanRelations=[],this._subModels=[],this._modelScopes=[e]},i.extend(t.Store.prototype,t.Events,{_class:"Backbone.Store",initializeRelation:function(e,n,o){var r=i.isString(n.type)?t[n.type]||this.getObjectByName(n.type):n.type;r&&r.prototype instanceof t.Relation?new r(e,n,o):t.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Relation=%o; missing or invalid relation type!",n)},addModelScope:function(e){this._modelScopes.push(e)},removeModelScope:function(e){this._modelScopes=i.without(this._modelScopes,e)},addSubModels:function(e,t){this._subModels.push({superModelType:t,subModels:e})},setupSuperModel:function(e){i.find(this._subModels,function(t){return i.each(t.subModels||[],function(i,n){var o=this.getObjectByName(i);return e===o?(t.superModelType._subModels[n]=e,e._superModel=t.superModelType,e._subModelTypeValue=n,e._subModelTypeAttribute=t.superModelType.prototype.subModelTypeAttribute,!0):void 0},this)},this)},addReverseRelation:function(e){var t=i.any(this._reverseRelations,function(t){return i.all(e||[],function(e,i){return e===t[i]})});!t&&e.model&&e.type&&(this._reverseRelations.push(e),this._addRelation(e.model,e),this.retroFitRelation(e))},addOrphanRelation:function(e){var t=i.any(this._orphanRelations,function(t){return i.all(e||[],function(e,i){return e===t[i]})});!t&&e.model&&e.type&&this._orphanRelations.push(e)},processOrphanRelations:function(){i.each(this._orphanRelations.slice(0),function(e){var n=t.Relational.store.getObjectByName(e.relatedModel);n&&(this.initializeRelation(null,e),this._orphanRelations=i.without(this._orphanRelations,e))},this)},_addRelation:function(e,t){e.prototype.relations||(e.prototype.relations=[]),e.prototype.relations.push(t),i.each(e._subModels||[],function(e){this._addRelation(e,t)},this)},retroFitRelation:function(e){var t=this.getCollection(e.model,!1);t&&t.each(function(t){t instanceof e.model&&new e.type(t,e)},this)},getCollection:function(e,n){e instanceof t.RelationalModel&&(e=e.constructor);for(var o=e;o._superModel;)o=o._superModel;var r=i.find(this._collections,function(e){return e.model===o});return r||n===!1||(r=this._createCollection(o)),r},getObjectByName:function(e){var t=e.split("."),n=null;return i.find(this._modelScopes,function(e){return n=i.reduce(t||[],function(e,t){return e?e[t]:void 0},e),n&&n!==e?!0:void 0},this),n},_createCollection:function(e){var i;return e instanceof t.RelationalModel&&(e=e.constructor),e.prototype instanceof t.RelationalModel&&(i=new t.Collection,i.model=e,this._collections.push(i)),i},resolveIdForItem:function(e,n){var o=i.isString(n)||i.isNumber(n)?n:null;return null===o&&(n instanceof t.RelationalModel?o=n.id:i.isObject(n)&&(o=e.prototype._getNewId(n))),o||0===o||(o=null),o},find:function(e,t){var i=this.resolveIdForItem(e,t),n=this.getCollection(e);if(n){var o=n.get(i);if(o instanceof e)return o}return null},register:function(e){var t=this.getCollection(e);if(t){var i=e.collection;t.add(e),e.collection=i}},checkId:function(e,i){var n=this.getCollection(e),o=n&&n.get(i);if(o&&e!==o)throw t.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Duplicate id! Old RelationalModel=%o, new RelationalModel=%o",o,e),new Error("Cannot instantiate more than one Backbone.RelationalModel with the same id per type!")},update:function(e){var t=this.getCollection(e);t.contains(e)||this.register(e),t._onModelEvent("change:"+e.idAttribute,e,t),e.trigger("relational:change:id",e,t)},unregister:function(e){var n,o;e instanceof t.Model?(n=this.getCollection(e),o=[e]):e instanceof t.Collection?(n=this.getCollection(e.model),o=i.clone(e.models)):(n=this.getCollection(e),o=i.clone(n.models)),i.each(o,function(e){this.stopListening(e),i.invoke(e.getRelations(),"stopListening")},this),i.contains(this._collections,e)?n.reset([]):i.each(o,function(e){n.get(e)?n.remove(e):n.trigger("relational:remove",e,n)},this)},reset:function(){this.stopListening(),i.each(this._collections,function(e){this.unregister(e)},this),this._collections=[],this._subModels=[],this._modelScopes=[e]}}),t.Relational.store=new t.Store,t.Relation=function(e,n,o){if(this.instance=e,n=i.isObject(n)?n:{},this.reverseRelation=i.defaults(n.reverseRelation||{},this.options.reverseRelation),this.options=i.defaults(n,this.options,t.Relation.prototype.options),this.reverseRelation.type=i.isString(this.reverseRelation.type)?t[this.reverseRelation.type]||t.Relational.store.getObjectByName(this.reverseRelation.type):this.reverseRelation.type,this.key=this.options.key,this.keySource=this.options.keySource||this.key,this.keyDestination=this.options.keyDestination||this.keySource||this.key,this.model=this.options.model||this.instance.constructor,this.relatedModel=this.options.relatedModel,!i.isFunction(this.relatedModel)||this.relatedModel.prototype instanceof t.RelationalModel||(this.relatedModel=i.result(this,"relatedModel")),i.isString(this.relatedModel)&&(this.relatedModel=t.Relational.store.getObjectByName(this.relatedModel)),this.checkPreconditions()&&(!this.options.isAutoRelation&&this.reverseRelation.type&&this.reverseRelation.key&&t.Relational.store.addReverseRelation(i.defaults({isAutoRelation:!0,model:this.relatedModel,relatedModel:this.model,reverseRelation:this.options},this.reverseRelation)),e)){var r=this.keySource;r!==this.key&&"object"==typeof this.instance.get(this.key)&&(r=this.key),this.setKeyContents(this.instance.get(r)),this.relatedCollection=t.Relational.store.getCollection(this.relatedModel),this.keySource!==this.key&&delete this.instance.attributes[this.keySource],this.instance._relations[this.key]=this,this.initialize(o),this.options.autoFetch&&this.instance.fetchRelated(this.key,i.isObject(this.options.autoFetch)?this.options.autoFetch:{}),this.listenTo(this.instance,"destroy",this.destroy).listenTo(this.relatedCollection,"relational:add relational:change:id",this.tryAddRelated).listenTo(this.relatedCollection,"relational:remove",this.removeRelated)}},t.Relation.extend=t.Model.extend,i.extend(t.Relation.prototype,t.Events,t.Semaphore,{_class:"Backbone.Relation",options:{createModels:!0,includeInJSON:!0,isAutoRelation:!1,autoFetch:!1,parse:!1},instance:null,key:null,keyContents:null,relatedModel:null,relatedCollection:null,reverseRelation:null,related:null,checkPreconditions:function(){var e=this.instance,n=this.key,o=this.model,r=this.relatedModel,s=t.Relational.showWarnings&&"undefined"!=typeof console;if(!o||!n||!r)return s&&console.warn("Relation=%o: missing model, key or relatedModel (%o, %o, %o).",this,o,n,r),!1;if(!(o.prototype instanceof t.RelationalModel))return s&&console.warn("Relation=%o: model does not inherit from Backbone.RelationalModel (%o).",this,e),!1;if(!(r.prototype instanceof t.RelationalModel))return s&&console.warn("Relation=%o: relatedModel does not inherit from Backbone.RelationalModel (%o).",this,r),!1;if(this instanceof t.HasMany&&this.reverseRelation.type===t.HasMany)return s&&console.warn("Relation=%o: relation is a HasMany, and the reverseRelation is HasMany as well.",this),!1;if(e&&i.keys(e._relations).length){var a=i.find(e._relations,function(e){return e.key===n},this);if(a)return s&&console.warn("Cannot create relation=%o on %o for model=%o: already taken by relation=%o.",this,n,e,a),!1}return!0},setRelated:function(e){this.related=e,this.instance.attributes[this.key]=e},_isReverseRelation:function(e){return e.instance instanceof this.relatedModel&&this.reverseRelation.key===e.key&&this.key===e.reverseRelation.key},getReverseRelations:function(e){var t=[],n=i.isUndefined(e)?this.related&&(this.related.models||[this.related]):[e];return i.each(n||[],function(e){i.each(e.getRelations()||[],function(e){this._isReverseRelation(e)&&t.push(e)},this)},this),t},destroy:function(){this.stopListening(),this instanceof t.HasOne?this.setRelated(null):this instanceof t.HasMany&&this.setRelated(this._prepareCollection()),i.each(this.getReverseRelations(),function(e){e.removeRelated(this.instance)},this)}}),t.HasOne=t.Relation.extend({_class:"Backbone.HasOne",options:{reverseRelation:{type:"HasMany"}},initialize:function(e){this.listenTo(this.instance,"relational:change:"+this.key,this.onChange);var t=this.findRelated(e);this.setRelated(t),i.each(this.getReverseRelations(),function(t){t.addRelated(this.instance,e)},this)},findRelated:function(e){var t=null;if(e=i.defaults({parse:this.options.parse},e),this.keyContents instanceof this.relatedModel)t=this.keyContents;else if(this.keyContents||0===this.keyContents){var n=i.defaults({create:this.options.createModels},e);t=this.relatedModel.findOrCreate(this.keyContents,n)}return t&&(this.keyId=null),t},setKeyContents:function(e){this.keyContents=e,this.keyId=t.Relational.store.resolveIdForItem(this.relatedModel,this.keyContents)},onChange:function(e,n,o){if(!this.isLocked()){this.acquire(),o=o?i.clone(o):{};var r=i.isUndefined(o.__related),s=r?this.related:o.__related;if(r){this.setKeyContents(n);var a=this.findRelated(o);this.setRelated(a)}if(s&&this.related!==s&&i.each(this.getReverseRelations(s),function(e){e.removeRelated(this.instance,null,o)},this),i.each(this.getReverseRelations(),function(e){e.addRelated(this.instance,o)},this),!o.silent&&this.related!==s){var l=this;this.changed=!0,t.Relational.eventQueue.add(function(){l.instance.trigger("change:"+l.key,l.instance,l.related,o,!0),l.changed=!1})}this.release()}},tryAddRelated:function(e,t,i){!this.keyId&&0!==this.keyId||e.id!==this.keyId||(this.addRelated(e,i),this.keyId=null)},addRelated:function(e,t){var n=this;e.queue(function(){if(e!==n.related){var o=n.related||null;n.setRelated(e),n.onChange(n.instance,e,i.defaults({__related:o},t))}})},removeRelated:function(e,t,n){if(this.related&&e===this.related){var o=this.related||null;this.setRelated(null),this.onChange(this.instance,e,i.defaults({__related:o},n))}}}),t.HasMany=t.Relation.extend({_class:"Backbone.HasMany",collectionType:null,options:{reverseRelation:{type:"HasOne"},collectionType:t.Collection,collectionKey:!0,collectionOptions:{}},initialize:function(e){if(this.listenTo(this.instance,"relational:change:"+this.key,this.onChange),this.collectionType=this.options.collectionType,!i.isFunction(this.collectionType)||this.collectionType===t.Collection||this.collectionType.prototype instanceof t.Collection||(this.collectionType=i.result(this,"collectionType")),i.isString(this.collectionType)){var n=this.collectionType;this.collectionType=t.Relational.store.getObjectByName(this.collectionType)}if(this.collectionType||(n&&t.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("`collectionType` of "+n+" not found, using Backbone.Collection in its place."),this.collectionType=t.Collection),this.collectionType!==t.Collection&&!(this.collectionType.prototype instanceof t.Collection))throw new Error("`collectionType` must inherit from Backbone.Collection");var o=this.findRelated(e);this.setRelated(o)},_prepareCollection:function(e){if(this.related&&this.stopListening(this.related),!(e&&e instanceof t.Collection)){var n=i.isFunction(this.options.collectionOptions)?this.options.collectionOptions(this.instance):this.options.collectionOptions;e=new this.collectionType(null,n)}if(e.model=this.relatedModel,this.options.collectionKey){var o=this.options.collectionKey===!0?this.options.reverseRelation.key:this.options.collectionKey;e[o]&&e[o]!==this.instance?t.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Relation=%o; collectionKey=%s already exists on collection=%o",this,o,this.options.collectionKey):o&&(e[o]=this.instance)}return this.listenTo(e,"relational:add",this.handleAddition).listenTo(e,"relational:remove",this.handleRemoval).listenTo(e,"relational:reset",this.handleReset),e},findRelated:function(e){var n=null;if(e=i.defaults({parse:this.options.parse},e),this.keyContents instanceof t.Collection)this._prepareCollection(this.keyContents),n=this.keyContents;else{var o=[];i.each(this.keyContents,function(t){if(t instanceof this.relatedModel)var n=t;else n=this.relatedModel.findOrCreate(t,i.extend({merge:!0},e,{create:this.options.createModels}));n&&o.push(n)},this),n=this.related instanceof t.Collection?this.related:this._prepareCollection(),n.set(o,i.defaults({merge:!1,parse:!1},e))}return this.keyIds=i.difference(this.keyIds,i.pluck(n.models,"id")),n},setKeyContents:function(e){this.keyContents=e instanceof t.Collection?e:null,this.keyIds=[],this.keyContents||!e&&0!==e||(this.keyContents=i.isArray(e)?e:[e],i.each(this.keyContents,function(e){var i=t.Relational.store.resolveIdForItem(this.relatedModel,e);(i||0===i)&&this.keyIds.push(i)},this))},onChange:function(e,n,o){o=o?i.clone(o):{},this.setKeyContents(n),this.changed=!1;var r=this.findRelated(o);if(this.setRelated(r),!o.silent){var s=this;t.Relational.eventQueue.add(function(){s.changed&&(s.instance.trigger("change:"+s.key,s.instance,s.related,o,!0),s.changed=!1)})}},handleAddition:function(e,n,o){o=o?i.clone(o):{},this.changed=!0,i.each(this.getReverseRelations(e),function(e){e.addRelated(this.instance,o)},this);var r=this;!o.silent&&t.Relational.eventQueue.add(function(){r.instance.trigger("add:"+r.key,e,r.related,o)})},handleRemoval:function(e,n,o){o=o?i.clone(o):{},this.changed=!0,i.each(this.getReverseRelations(e),function(e){e.removeRelated(this.instance,null,o)},this);var r=this;!o.silent&&t.Relational.eventQueue.add(function(){r.instance.trigger("remove:"+r.key,e,r.related,o)})},handleReset:function(e,n){var o=this;n=n?i.clone(n):{},!n.silent&&t.Relational.eventQueue.add(function(){o.instance.trigger("reset:"+o.key,o.related,n)})},tryAddRelated:function(e,t,n){var o=i.contains(this.keyIds,e.id);o&&(this.addRelated(e,n),this.keyIds=i.without(this.keyIds,e.id))},addRelated:function(e,t){var n=this;e.queue(function(){n.related&&!n.related.get(e)&&n.related.add(e,i.defaults({parse:!1},t))})},removeRelated:function(e,t,i){this.related.get(e)&&this.related.remove(e,i)}}),t.RelationalModel=t.Model.extend({_class:"Backbone.RelationalModel",relations:null,_relations:null,_isInitialized:!1,_deferProcessing:!1,_queue:null,_attributeChangeFired:!1,subModelTypeAttribute:"type",subModelTypes:null,keydefs:{},compoundKeyDelim:"-",constructor:function(e,n){if(n&&n.collection){var o=this,r=this.collection=n.collection;delete n.collection,this._deferProcessing=!0;var s=function(e){e===o&&(o._deferProcessing=!1,o.processQueue(),r.off("relational:add",s))};r.on("relational:add",s),i.defer(function(){s(o)})}t.Relational.store.processOrphanRelations(),t.Relational.store.listenTo(this,"relational:unregister",t.Relational.store.unregister),this._queue=new t.BlockingQueue,this._queue.block(),t.Relational.eventQueue.block();try{t.Model.apply(this,arguments)}finally{t.Relational.eventQueue.unblock()}this.createSavepoint(),this.on("sync",this.createSavepoint,this)},createSavepoint:function(){return this.savepoint=JSON.parse(JSON.stringify(this)),this},rollback:function(e){e=e||{},this.set(this.savepoint),this.changed=[],e.silent||this.trigger("rollback",this,e)},commit:function(e){e=e||{};var n=this,o=n.isNew(),r=[],s=[];return(o||n.hasChangedDeepSinceSavepoint())&&(o||i.each(n.relations,function(t){if(t.includeInJSON&&(r.push(t),t.includeInJSON=!1,!t.isAutoRelation)){var i=n.get(t.key);s.push(i.commit(e))}}),s.push(n.save(null,e)),i.each(r,function(e){e.includeInJSON=!0}),e.silent||n.trigger("commit",n,e)),t.$.when.apply(t.$,s)},hasChangedDeepSinceSavepoint:function(){return!i.isEqual(this.toJSON(),this.savepoint)},trigger:function(e){if(e.length>5&&0===e.indexOf("change")){var i=this,n=arguments;t.Relational.eventQueue.add(function(){if(i._isInitialized){var o=!0;if("change"===e)o=i.hasChanged()||i._attributeChangeFired,i._attributeChangeFired=!1;else{var r=e.slice(7),s=i.getRelation(r);s?(o=n[4]===!0,o?i.changed[r]=n[2]:s.changed||delete i.changed[r]):o&&(i._attributeChangeFired=!0)}o&&t.Model.prototype.trigger.apply(i,n)}})}else"destroy"===e?(t.Model.prototype.trigger.apply(this,arguments),t.Relational.store.unregister(this)):t.Model.prototype.trigger.apply(this,arguments);return this},initializeRelations:function(e){this.acquire(),this._relations={},i.each(this.relations||[],function(i){t.Relational.store.initializeRelation(this,i,e)},this),this._isInitialized=!0,this.release(),this.processQueue()},updateRelations:function(e,t){this._isInitialized&&!this.isLocked()&&i.each(this._relations,function(i){if(!e||i.keySource in e||i.key in e){var n=this.attributes[i.keySource]||this.attributes[i.key],o=e&&(e[i.keySource]||e[i.key]);(i.related!==n||null===n&&null===o)&&this.trigger("relational:change:"+i.key,this,n,t||{})}i.keySource!==i.key&&delete this.attributes[i.keySource]},this)},queue:function(e){this._queue.add(e)},processQueue:function(){this._isInitialized&&!this._deferProcessing&&this._queue.isBlocked()&&this._queue.unblock()},getRelation:function(e){return this._relations[e]},getRelations:function(){return i.values(this._relations)},fetchRelated:function(e,n,o){n=i.extend({update:!0,remove:!1},n);var r,s,a=[],l=this.getRelation(e),c=l&&(l.keyIds&&l.keyIds.slice(0)||(l.keyId||0===l.keyId?[l.keyId]:[]));if(o&&(r=l.related instanceof t.Collection?l.related.models:[l.related],i.each(r,function(e){(e.id||0===e.id)&&c.push(e.id)})),c&&c.length){var d=[];if(r=i.map(c,function(e){var t=l.relatedModel.findModel(e);if(!t){var i={};i[l.relatedModel.prototype.idAttribute]=e,t=l.relatedModel.findOrCreate(i,n),d.push(t)}return t},this),l.related instanceof t.Collection&&i.isFunction(l.related.url)&&(s=l.related.url(r)),s&&s!==l.related.url()){var u=i.defaults({error:function(){var e=arguments;i.each(d,function(t){t.trigger("destroy",t,t.collection,n),n.error&&n.error.apply(t,e)})},url:s},n);a=[l.related.fetch(u)]}else a=i.map(r,function(e){var t=i.defaults({error:function(){i.contains(d,e)&&(e.trigger("destroy",e,e.collection,n),n.error&&n.error.apply(e,arguments))}},n);return e.fetch(t)},this)}return a},get:function(e){var n=t.Model.prototype.get.call(this,e);if(!this.dotNotation||-1===e.indexOf("."))return n;var o=e.split("."),r=i.reduce(o,function(e,n){if(!i.isNull(e)&&!i.isUndefined(e)){if(e instanceof t.Model)return t.Model.prototype.get.call(e,n);if(e instanceof t.Collection)return t.Collection.prototype.at.call(e,n);throw new Error("Attribute must be an instanceof Backbone.Model or Backbone.Collection. Is: "+e+", currentSplit: "+n)}},this);if(void 0!==n&&void 0!==r)throw new Error("Ambiguous result for '"+e+"'. direct result: "+n+", dotNotation: "+r);return n||r},_getNewId:function(e){var t,i=this,n=null,o="",r=!1,s=i.keydefs.PRIMARY;return s&&(s.forEach(function(n,s){t=e[n]||i.attributes&&i.attributes[n],t||0===t?o+=(o?i.compoundKeyDelim:"")+(e[n]||i.attributes&&i.attributes[n]):r=!0}),r||(n=o)),n||(n=e&&i.idAttribute in e&&e[i.idAttribute]),n},set:function(e,n,o){t.Relational.eventQueue.block();var r;i.isObject(e)||null==e?(r=e,o=n):(r={},r[e]=n);try{var s=this.id,a=this._getNewId(r);t.Relational.store.checkId(this,a);var l=t.Model.prototype.set.apply(this,arguments);a&&(this.id=a),this._isInitialized||this.isLocked()?a&&a!==s&&t.Relational.store.update(this):(this.constructor.initializeModelHierarchy(),(a||0===a)&&t.Relational.store.register(this),this.initializeRelations(o)),r&&this.updateRelations(r,o)}finally{t.Relational.eventQueue.unblock()}return l},clone:function(){var e=i.clone(this.attributes);return i.isUndefined(e[this.idAttribute])||(e[this.idAttribute]=null),i.each(this.getRelations(),function(t){delete e[t.key]}),new this.constructor(e)},toJSON:function(e){if(this.isLocked())return this.id;this.acquire();var n=t.Model.prototype.toJSON.call(this,e);return!this.constructor._superModel||this.constructor._subModelTypeAttribute in n||(n[this.constructor._subModelTypeAttribute]=this.constructor._subModelTypeValue),i.each(this._relations,function(o){var r=n[o.key],s=o.options.includeInJSON,a=null;s===!0?r&&i.isFunction(r.toJSON)&&(a=r.toJSON(e)):i.isString(s)?(r instanceof t.Collection?a=r.pluck(s):r instanceof t.Model&&(a=r.get(s)),s===o.relatedModel.prototype.idAttribute&&(o instanceof t.HasMany?a=a.concat(o.keyIds):o instanceof t.HasOne&&(a=a||o.keyId,a||i.isObject(o.keyContents)||(a=o.keyContents||null)))):i.isArray(s)?r instanceof t.Collection?(a=[],
r.each(function(e){var t={};i.each(s,function(i){t[i]=e.get(i)}),a.push(t)})):r instanceof t.Model&&(a={},i.each(s,function(e){a[e]=r.get(e)})):delete n[o.key],s&&(n[o.keyDestination]=a),o.keyDestination!==o.key&&delete n[o.key]}),this.release(),n}},{setup:function(e){return this.prototype.relations=(this.prototype.relations||[]).slice(0),this._subModels={},this._superModel=null,this.prototype.hasOwnProperty("subModelTypes")?t.Relational.store.addSubModels(this.prototype.subModelTypes,this):this.prototype.subModelTypes=null,i.each(this.prototype.relations||[],function(e){if(e.model||(e.model=this),e.reverseRelation&&e.model===this){var n=!0;if(i.isString(e.relatedModel)){var o=t.Relational.store.getObjectByName(e.relatedModel);n=o&&o.prototype instanceof t.RelationalModel}n?t.Relational.store.initializeRelation(null,e):i.isString(e.relatedModel)&&t.Relational.store.addOrphanRelation(e)}},this),this},build:function(e,t){this.initializeModelHierarchy();var i=this._findSubModelType(this,e)||this;return new i(e,t)},_findSubModelType:function(e,t){if(e._subModels&&e.prototype.subModelTypeAttribute in t){var i=t[e.prototype.subModelTypeAttribute],n=e._subModels[i];if(n)return n;for(i in e._subModels)if(n=this._findSubModelType(e._subModels[i],t))return n}return null},initializeModelHierarchy:function(){if(this.inheritRelations(),this.prototype.subModelTypes){var e=i.keys(this._subModels),n=i.omit(this.prototype.subModelTypes,e);i.each(n,function(e){var i=t.Relational.store.getObjectByName(e);i&&i.initializeModelHierarchy()})}},inheritRelations:function(){if(i.isUndefined(this._superModel)||i.isNull(this._superModel))if(t.Relational.store.setupSuperModel(this),this._superModel){if(this._superModel.inheritRelations(),this._superModel.prototype.relations){var e=i.filter(this._superModel.prototype.relations||[],function(e){return!i.any(this.prototype.relations||[],function(t){return e.relatedModel===t.relatedModel&&e.key===t.key},this)},this);this.prototype.relations=e.concat(this.prototype.relations)}}else this._superModel=!1},findOrCreate:function(e,t){t||(t={});var n=i.isObject(e)&&t.parse&&this.prototype.parse?this.prototype.parse(i.clone(e)):e,o=this.findModel(n);return i.isObject(e)&&(o&&t.merge!==!1?(delete t.collection,delete t.url,o.set(n,t)):o||t.create===!1||(o=this.build(e,t))),o},find:function(e,t){return t||(t={}),t.create=!1,this.findOrCreate(e,t)},findModel:function(e){return t.Relational.store.find(this,e)}}),i.extend(t.RelationalModel.prototype,t.Semaphore);var n=t.Collection.prototype.__initialize=t.Collection.prototype.initialize;t.Collection.prototype.initialize=function(e,t){n.apply(this,arguments),this.createSavepoint(),this.on("sync",this.createSavepoint,this)},t.Collection.prototype.createSavepoint=function(){return this._added=[],this._removed=[],this},t.Collection.prototype.rollback=function(e){return e=e||{},this.add(this._removed,{silent:!0}),i.each(this.models,function(e){e.rollback()}),this.remove(this._added,{silent:!0}),this.createSavepoint(),e.silent||this.trigger("rollback",this,e),this},t.Collection.prototype.hasChangedDeepSinceSavepoint=function(){return this._removed.length||this._added.length?!0:!!i.find(this.models,function(e){return e.hasChangedDeepSinceSavepoint()})},t.Collection.prototype.commit=function(e){var n=[];return this.hasChangedDeepSinceSavepoint()&&(e=e||{},i.each(this._removed,function(e){n.push(e.destroy())}),i.each(this.models,function(e){n.push(e.commit())}),this.createSavepoint(),e.silent||this.trigger("commit",this,e)),t.$.when.apply(t.$,n)},t.Collection.prototype._class="Backbone.Collection",t.Collection.prototype.__prepareModel=t.Collection.prototype._prepareModel,t.Collection.prototype._prepareModel=function(e,n){var o;return e instanceof t.Model?(e.collection||(e.collection=this),o=e):(n=n?i.clone(n):{},n.collection=this,o="undefined"!=typeof this.model.findOrCreate?this.model.findOrCreate(e,n):new this.model(e,n),o&&o.validationError&&(this.trigger("invalid",this,e,n),o=!1)),o};var o=t.Collection.prototype.__set=t.Collection.prototype.set;t.Collection.prototype.set=function(e,n){if(!(this.model.prototype instanceof t.RelationalModel))return o.apply(this,arguments);n&&n.parse&&(e=this.parse(e,n));var r=!i.isArray(e),s=[],a=[];e=r?e?[e]:[]:i.clone(e),i.each(e,function(e){e instanceof t.Model||(e=t.Collection.prototype._prepareModel.call(this,e,n)),e&&(a.push(e),this.get(e)||this.get(e.cid)?null!=e.id&&(this._byId[e.id]=e):s.push(e))},this),a=r?a.length?a[0]:null:a;var l=o.call(this,a,i.defaults({parse:!1},n));return i.each(s,function(e){(this.get(e)||this.get(e.cid))&&this.trigger("relational:add",e,this,n)},this),l};var r=t.Collection.prototype.__get=t.Collection.prototype.get;t.Collection.prototype.get=function(e){if(!(this.model.prototype instanceof t.RelationalModel))return r.apply(this,arguments);if(null!=e){var i=t.Relational.store.resolveIdForItem(this.model,e);return this._byId[null!=i?i:e.cid||e]}};var s=t.Collection.prototype.__add=t.Collection.prototype.add;t.Collection.prototype.add=function(e,n){if(!(this.model.prototype instanceof t.RelationalModel))return s.apply(this,arguments);var o=s.call(this,e,i.defaults(n||{},{add:!0,merge:!1,remove:!1}));return this._added=this._added.concat(o),o};var a=t.Collection.prototype.__remove=t.Collection.prototype.remove;t.Collection.prototype.remove=function(e,n){if(!(this.model.prototype instanceof t.RelationalModel))return this._removed=this._removed.concat(e),a.apply(this,arguments);var o=!i.isArray(e),r=[];e=o?e?[e]:[]:i.clone(e),n||(n={}),i.each(e,function(e){e=this.get(e)||e&&this.get(e.cid),e&&r.push(e)},this);var s=a.call(this,o?r.length?r[0]:null:r,n);return i.each(r,function(e){this.trigger("relational:remove",e,this,n)},this),this._removed=this._removed.concat(r),s};var l=t.Collection.prototype.__reset=t.Collection.prototype.reset;t.Collection.prototype.reset=function(e,n){n=i.extend({merge:!0},n);var o=l.call(this,e,n);return this._added=[],this._removed=[],this.model.prototype instanceof t.RelationalModel&&this.trigger("relational:reset",this,n),this.createSavepoint(),o};var c=t.Collection.prototype.__sort=t.Collection.prototype.sort;t.Collection.prototype.sort=function(e){var i=c.call(this,e);return this.model.prototype instanceof t.RelationalModel&&this.trigger("relational:reset",this,e),i};var d=t.Collection.prototype.__trigger=t.Collection.prototype.trigger;t.Collection.prototype.trigger=function(e){if(!(this.model.prototype instanceof t.RelationalModel))return d.apply(this,arguments);if("add"===e||"remove"===e||"reset"===e||"sort"===e){var n=this,o=arguments;i.isObject(o[3])&&(o=i.toArray(o),o[3]=i.clone(o[3])),t.Relational.eventQueue.add(function(){d.apply(n,o)})}else d.apply(this,arguments);return this},t.RelationalModel.extend=function(e,i){var n=t.Model.extend.apply(this,arguments);return n.setup(this),n}}),function(e){!function(e,t){"object"==typeof exports&&exports?module.exports=t:"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("mustache-vendor",t):e.Mustache=t}(this,function(){function e(e,t){return b.call(e,t)}function t(t){return!e(f,t)}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(e){return String(e).replace(/[&<>"'\/]/g,function(e){return _[e]})}function o(e){this.string=e,this.tail=e,this.pos=0}function r(e,t){this.view=e,this.parent=t,this._cache={}}function s(){this.clearCache()}function a(e,t,i,n){for(var o,r,s,l="",c=0,d=e.length;d>c;++c)switch(o=e[c],r=o[1],o[0]){case"#":if(s=i.lookup(r),"object"==typeof s)if(w(s))for(var h=0,p=s.length;p>h;++h)l+=a(o[4],t,i.push(s[h]),n);else s&&(l+=a(o[4],t,i.push(s),n));else if("function"==typeof s){var f=null==n?null:n.slice(o[3],o[5]);s=s.call(i.view,f,function(e){return t.render(e,i)}),null!=s&&(l+=s)}else s&&(l+=a(o[4],t,i,n));break;case"^":s=i.lookup(r),(!s||w(s)&&0===s.length)&&(l+=a(o[4],t,i,n));break;case">":s=t.getPartial(r),"function"==typeof s&&(l+=s(i));break;case"&":s=i.lookup(r),null!=s&&(l+=s);break;case"name":s=i.lookup(r),null!=s&&(l+=u.escape(s));break;case"text":l+=r}return l}function l(e){for(var t,i=[],n=i,o=[],r=0,s=e.length;s>r;++r)switch(t=e[r],t[0]){case"#":case"^":o.push(t),n.push(t),n=t[4]=[];break;case"/":var a=o.pop();a[5]=t[2],n=o.length>0?o[o.length-1][4]:i;break;default:n.push(t)}return i}function c(e){for(var t,i,n=[],o=0,r=e.length;r>o;++o)t=e[o],t&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(i=t,n.push(t)));return n}function d(e){return[new RegExp(i(e[0])+"\\s*"),new RegExp("\\s*"+i(e[1]))]}var u={};u.name="mustache.js",u.version="0.7.2",u.tags=["{{","}}"],u.Scanner=o,u.Context=r,u.Writer=s;var h=/\s*/,p=/\s+/,f=/\S/,m=/\s*=/,g=/\s*\}/,v=/#|\^|\/|>|\{|&|=|!/,b=RegExp.prototype.test,y=Object.prototype.toString,w=Array.isArray||function(e){return"[object Array]"===y.call(e)},_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};u.escape=n,o.prototype.eos=function(){return""===this.tail},o.prototype.scan=function(e){var t=this.tail.match(e);return t&&0===t.index?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},o.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i),this.pos+=i}return t},r.make=function(e){return e instanceof r?e:new r(e)},r.prototype.push=function(e){return new r(e,this)},r.prototype.lookup=function(e){var t=this._cache[e];if(!t){if("."==e)t=this.view;else for(var i=this;i;){if(e.indexOf(".")>0){t=i.view;for(var n=e.split("."),o=0;t&&o<n.length;)t=t[n[o++]]}else t=i.view[e];if(null!=t)break;i=i.parent}this._cache[e]=t}return"function"==typeof t&&(t=t.call(this.view)),t},s.prototype.clearCache=function(){this._cache={},this._partialCache={}},s.prototype.compile=function(e,t){var i=this._cache[e];if(!i){var n=u.parse(e,t);i=this._cache[e]=this.compileTokens(n,e)}return i},s.prototype.compilePartial=function(e,t,i){var n=this.compile(t,i);return this._partialCache[e]=n,n},s.prototype.getPartial=function(e){return e in this._partialCache||!this._loadPartial||this.compilePartial(e,this._loadPartial(e)),this._partialCache[e]},s.prototype.compileTokens=function(e,t){var i=this;return function(n,o){if(o)if("function"==typeof o)i._loadPartial=o;else for(var s in o)i.compilePartial(s,o[s]);return a(e,i,r.make(n),t)}},s.prototype.render=function(e,t,i){return this.compile(e)(t,i)},u.parse=function(e,n){function r(){if(S&&!D)for(;C.length;)delete T[C.pop()];else C=[];S=!1,D=!1}if(e=e||"",n=n||u.tags,"string"==typeof n&&(n=n.split(p)),2!==n.length)throw new Error("Invalid tags: "+n.join(", "));for(var s,a,f,b,y,w=d(n),_=new o(e),E=[],T=[],C=[],S=!1,D=!1;!_.eos();){if(s=_.pos,f=_.scanUntil(w[0]))for(var I=0,k=f.length;k>I;++I)b=f.charAt(I),t(b)?C.push(T.length):D=!0,T.push(["text",b,s,s+1]),s+=1,"\n"==b&&r();if(!_.scan(w[0]))break;if(S=!0,a=_.scan(v)||"name",_.scan(h),"="===a?(f=_.scanUntil(m),_.scan(m),_.scanUntil(w[1])):"{"===a?(f=_.scanUntil(new RegExp("\\s*"+i("}"+n[1]))),_.scan(g),_.scanUntil(w[1]),a="&"):f=_.scanUntil(w[1]),!_.scan(w[1]))throw new Error("Unclosed tag at "+_.pos);if(y=[a,f,s,_.pos],T.push(y),"#"===a||"^"===a)E.push(y);else if("/"===a){if(0===E.length)throw new Error('Unopened section "'+f+'" at '+s);var O=E.pop();if(O[1]!==f)throw new Error('Unclosed section "'+O[1]+'" at '+s)}else if("name"===a||"{"===a||"&"===a)D=!0;else if("="===a){if(n=f.split(p),2!==n.length)throw new Error("Invalid tags at "+s+": "+n.join(", "));w=d(n)}}var O=E.pop();if(O)throw new Error('Unclosed section "'+O[1]+'" at '+_.pos);return T=c(T),l(T)};var E=new s;return u.clearCache=function(){return E.clearCache()},u.compile=function(e,t){return E.compile(e,t)},u.compilePartial=function(e,t,i){return E.compilePartial(e,t,i)},u.compileTokens=function(e,t){return E.compileTokens(e,t)},u.render=function(e,t,i){return E.render(e,t,i)},u.to_html=function(e,t,i,n){var o=u.render(e,t,i);return"function"!=typeof n?o:void n(o)},u}()),e.mustache=function(e,t,i){return Mustache.render(e,t,i)},e.fn.mustache=function(t,i){return e(this).map(function(n,o){var r=e.trim(e(o).html()),s=e.mustache(r,t,i);return e(s).get()})}}(jQuery),function(e){function t(e,t,i){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:i;default:throw new Error("Implement me")}}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function n(e){ve.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function o(e,t){var i=!0;return u(function(){return i&&(n(e),i=!1),t.apply(this,arguments)},t)}function r(e,t){pt[e]||(n(t),pt[e]=!0)}function s(e,t){return function(i){return f(e.call(this,i),t)}}function a(e,t){return function(i){return this.localeData().ordinal(e.call(this,i),t)}}function l(){}function c(e,t){t!==!1&&R(e),h(this,e),this._d=new Date(+e._d)}function d(e){var t=T(e),i=t.year||0,n=t.quarter||0,o=t.month||0,r=t.week||0,s=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._milliseconds=+d+1e3*c+6e4*l+36e5*a,this._days=+s+7*r,this._months=+o+3*n+12*i,this._data={},this._locale=ve.localeData(),this._bubble()}function u(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t){var i,n,o;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),xe.length>0)for(i in xe)n=xe[i],o=t[n],"undefined"!=typeof o&&(e[n]=o);return e}function p(e){return 0>e?Math.ceil(e):Math.floor(e)}function f(e,t,i){for(var n=""+Math.abs(e),o=e>=0;n.length<t;)n="0"+n;return(o?i?"+":"":"-")+n}function m(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function g(e,t){var i;return t=N(t,e),e.isBefore(t)?i=m(e,t):(i=m(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function v(e,t){return function(i,n){var o,s;return null===n||isNaN(+n)||(r(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=i,i=n,n=s),i="string"==typeof i?+i:i,o=ve.duration(i,n),b(this,o,e),this}}function b(e,t,i,n){var o=t._milliseconds,r=t._days,s=t._months;n=null==n?!0:n,o&&e._d.setTime(+e._d+o*i),r&&ue(e,"Date",de(e,"Date")+r*i),s&&ce(e,de(e,"Month")+s*i),n&&ve.updateOffset(e,r||s)}function y(e){return"[object Array]"===Object.prototype.toString.call(e)}function w(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function _(e,t,i){var n,o=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),s=0;for(n=0;o>n;n++)(i&&e[n]!==t[n]||!i&&S(e[n])!==S(t[n]))&&s++;return s+r}function E(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=st[e]||at[t]||t}return e}function T(e){var t,i,n={};for(i in e)e.hasOwnProperty(i)&&(t=E(i),t&&(n[t]=e[i]));return n}function C(t){var i,n;if(0===t.indexOf("week"))i=7,n="day";else{if(0!==t.indexOf("month"))return;i=12,n="month"}ve[t]=function(o,r){var s,a,l=ve._locale[t],c=[];if("number"==typeof o&&(r=o,o=e),a=function(e){var t=ve().utc().set(n,e);return l.call(ve._locale,t,o||"")},null!=r)return a(r);for(s=0;i>s;s++)c.push(a(s));return c}}function S(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function D(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function I(e,t,i){return re(ve([e,11,31+t-i]),t,i).week}function k(e){return O(e)?366:365}function O(e){return e%4===0&&e%100!==0||e%400===0}function R(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Ce]<0||e._a[Ce]>11?Ce:e._a[Se]<1||e._a[Se]>D(e._a[Te],e._a[Ce])?Se:e._a[De]<0||e._a[De]>23?De:e._a[Ie]<0||e._a[Ie]>59?Ie:e._a[ke]<0||e._a[ke]>59?ke:e._a[Oe]<0||e._a[Oe]>999?Oe:-1,e._pf._overflowDayOfYear&&(Te>t||t>Se)&&(t=Se),e._pf.overflow=t)}function x(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function A(e){return e?e.toLowerCase().replace("_","-"):e}function P(e){for(var t,i,n,o,r=0;r<e.length;){for(o=A(e[r]).split("-"),t=o.length,i=A(e[r+1]),i=i?i.split("-"):null;t>0;){if(n=M(o.slice(0,t).join("-")))return n;if(i&&i.length>=t&&_(o,i,!0)>=t-1)break;t--}r++}return null}function M(e){var t=null;if(!Re[e]&&Ae)try{t=ve.locale(),require("./locale/"+e),ve.locale(t)}catch(i){}return Re[e]}function N(e,t){return t._isUTC?ve(e).zone(t._offset||0):ve(e).local()}function L(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function B(e){var t,i,n=e.match(Le);for(t=0,i=n.length;i>t;t++)ht[n[t]]?n[t]=ht[n[t]]:n[t]=L(n[t]);return function(o){var r="";for(t=0;i>t;t++)r+=n[t]instanceof Function?n[t].call(o,e):n[t];return r}}function j(e,t){return e.isValid()?(t=K(t,e.localeData()),lt[t]||(lt[t]=B(t)),lt[t](e)):e.localeData().invalidDate()}function K(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(Be.lastIndex=0;n>=0&&Be.test(e);)e=e.replace(Be,i),Be.lastIndex=0,n-=1;return e}function F(e,t){var i,n=t._strict;switch(e){case"Q":return Ge;case"DDDD":return Xe;case"YYYY":case"GGGG":case"gggg":return n?Je:Fe;case"Y":case"G":case"g":return Ze;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?Qe:He;case"S":if(n)return Ge;case"SS":if(n)return Ye;case"SSS":if(n)return Xe;case"DDD":return Ke;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return $e;case"a":case"A":return t._locale._meridiemParse;case"X":return Ue;case"Z":case"ZZ":return Ve;case"T":return ze;case"SSSS":return We;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Ye:je;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return je;case"Do":return qe;default:return i=new RegExp(Y(G(e.replace("\\","")),"i"))}}function H(e){e=e||"";var t=e.match(Ve)||[],i=t[t.length-1]||[],n=(i+"").match(ot)||["-",0,0],o=+(60*n[1])+S(n[2]);return"+"===n[0]?-o:o}function W(e,t,i){var n,o=i._a;switch(e){case"Q":null!=t&&(o[Ce]=3*(S(t)-1));break;case"M":case"MM":null!=t&&(o[Ce]=S(t)-1);break;case"MMM":case"MMMM":n=i._locale.monthsParse(t),null!=n?o[Ce]=n:i._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(o[Se]=S(t));break;case"Do":null!=t&&(o[Se]=S(parseInt(t,10)));break;case"DDD":case"DDDD":null!=t&&(i._dayOfYear=S(t));break;case"YY":o[Te]=ve.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":o[Te]=S(t);break;case"a":case"A":i._isPm=i._locale.isPM(t);break;case"H":case"HH":case"h":case"hh":o[De]=S(t);break;case"m":case"mm":o[Ie]=S(t);break;case"s":case"ss":o[ke]=S(t);break;case"S":case"SS":case"SSS":case"SSSS":o[Oe]=S(1e3*("0."+t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=H(t);break;case"dd":case"ddd":case"dddd":n=i._locale.weekdaysParse(t),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(i._w=i._w||{},i._w[e]=S(t));break;case"gg":case"GG":i._w=i._w||{},i._w[e]=ve.parseTwoDigitYear(t)}}function $(e){var i,n,o,r,s,a,l;i=e._w,null!=i.GG||null!=i.W||null!=i.E?(s=1,a=4,n=t(i.GG,e._a[Te],re(ve(),1,4).year),o=t(i.W,1),r=t(i.E,1)):(s=e._locale._week.dow,a=e._locale._week.doy,n=t(i.gg,e._a[Te],re(ve(),s,a).year),o=t(i.w,1),null!=i.d?(r=i.d,s>r&&++o):r=null!=i.e?i.e+s:s),l=se(n,o,r,a,s),e._a[Te]=l.year,e._dayOfYear=l.dayOfYear}function V(e){var i,n,o,r,s=[];if(!e._d){for(o=U(e),e._w&&null==e._a[Se]&&null==e._a[Ce]&&$(e),e._dayOfYear&&(r=t(e._a[Te],o[Te]),e._dayOfYear>k(r)&&(e._pf._overflowDayOfYear=!0),n=te(r,0,e._dayOfYear),e._a[Ce]=n.getUTCMonth(),e._a[Se]=n.getUTCDate()),i=0;3>i&&null==e._a[i];++i)e._a[i]=s[i]=o[i];for(;7>i;i++)e._a[i]=s[i]=null==e._a[i]?2===i?1:0:e._a[i];e._d=(e._useUTC?te:ee).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}}function z(e){var t;e._d||(t=T(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],V(e))}function U(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function q(e){if(e._f===ve.ISO_8601)return void J(e);e._a=[],e._pf.empty=!0;var t,i,n,o,r,s=""+e._i,a=s.length,l=0;for(n=K(e._f,e._locale).match(Le)||[],t=0;t<n.length;t++)o=n[t],i=(s.match(F(o,e))||[])[0],i&&(r=s.substr(0,s.indexOf(i)),r.length>0&&e._pf.unusedInput.push(r),s=s.slice(s.indexOf(i)+i.length),l+=i.length),ht[o]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(o),W(o,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(o);e._pf.charsLeftOver=a-l,s.length>0&&e._pf.unusedInput.push(s),e._isPm&&e._a[De]<12&&(e._a[De]+=12),e._isPm===!1&&12===e._a[De]&&(e._a[De]=0),V(e),R(e)}function G(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,o){return t||i||n||o})}function Y(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function X(e){var t,n,o,r,s;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)s=0,t=h({},e),t._pf=i(),t._f=e._f[r],q(t),x(t)&&(s+=t._pf.charsLeftOver,s+=10*t._pf.unusedTokens.length,t._pf.score=s,(null==o||o>s)&&(o=s,n=t));u(e,n||t)}function J(e){var t,i,n=e._i,o=et.exec(n);if(o){for(e._pf.iso=!0,t=0,i=it.length;i>t;t++)if(it[t][1].exec(n)){e._f=it[t][0]+(o[6]||" ");break}for(t=0,i=nt.length;i>t;t++)if(nt[t][1].exec(n)){e._f+=nt[t][0];break}n.match(Ve)&&(e._f+="Z"),q(e)}else e._isValid=!1}function Q(e){J(e),e._isValid===!1&&(delete e._isValid,ve.createFromInputFallback(e))}function Z(t){var i,n=t._i;n===e?t._d=new Date:w(n)?t._d=new Date(+n):null!==(i=Pe.exec(n))?t._d=new Date(+i[1]):"string"==typeof n?Q(t):y(n)?(t._a=n.slice(0),V(t)):"object"==typeof n?z(t):"number"==typeof n?t._d=new Date(n):ve.createFromInputFallback(t)}function ee(e,t,i,n,o,r,s){var a=new Date(e,t,i,n,o,r,s);return 1970>e&&a.setFullYear(e),a}function te(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function ie(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function ne(e,t,i,n,o){return o.relativeTime(t||1,!!i,e,n)}function oe(e,t,i){var n=ve.duration(e).abs(),o=Ee(n.as("s")),r=Ee(n.as("m")),s=Ee(n.as("h")),a=Ee(n.as("d")),l=Ee(n.as("M")),c=Ee(n.as("y")),d=o<ct.s&&["s",o]||1===r&&["m"]||r<ct.m&&["mm",r]||1===s&&["h"]||s<ct.h&&["hh",s]||1===a&&["d"]||a<ct.d&&["dd",a]||1===l&&["M"]||l<ct.M&&["MM",l]||1===c&&["y"]||["yy",c];return d[2]=t,d[3]=+e>0,d[4]=i,ne.apply({},d)}function re(e,t,i){var n,o=i-t,r=i-e.day();return r>o&&(r-=7),o-7>r&&(r+=7),n=ve(e).add(r,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function se(e,t,i,n,o){var r,s,a=te(e,0,1).getUTCDay();return a=0===a?7:a,i=null!=i?i:o,r=o-a+(a>n?7:0)-(o>a?7:0),s=7*(t-1)+(i-o)+r+1,{year:s>0?e:e-1,dayOfYear:s>0?s:k(e-1)+s}}function ae(t){var i=t._i,n=t._f;return t._locale=t._locale||ve.localeData(t._l),null===i||n===e&&""===i?ve.invalid({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),ve.isMoment(i)?new c(i,!0):(n?y(n)?X(t):q(t):Z(t),new c(t)))}function le(e,t){var i,n;if(1===t.length&&y(t[0])&&(t=t[0]),!t.length)return ve();for(i=t[0],n=1;n<t.length;++n)t[n][e](i)&&(i=t[n]);return i}function ce(e,t){var i;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(i=Math.min(e.date(),D(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e)}function de(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function ue(e,t,i){return"Month"===t?ce(e,i):e._d["set"+(e._isUTC?"UTC":"")+t](i)}function he(e,t){return function(i){return null!=i?(ue(this,e,i),ve.updateOffset(this,t),this):de(this,e)}}function pe(e){return 400*e/146097}function fe(e){return 146097*e/400}function me(e){ve.duration.fn[e]=function(){return this._data[e]}}function ge(e){"undefined"==typeof ender&&(be=_e.moment,e?_e.moment=o("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",ve):_e.moment=ve)}for(var ve,be,ye,we="2.8.1",_e="undefined"!=typeof global?global:this,Ee=Math.round,Te=0,Ce=1,Se=2,De=3,Ie=4,ke=5,Oe=6,Re={},xe=[],Ae="undefined"!=typeof module&&module.exports,Pe=/^\/?Date\((\-?\d+)/i,Me=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ne=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Le=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Be=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,je=/\d\d?/,Ke=/\d{1,3}/,Fe=/\d{1,4}/,He=/[+\-]?\d{1,6}/,We=/\d+/,$e=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ve=/Z|[\+\-]\d\d:?\d\d/gi,ze=/T/i,Ue=/[\+\-]?\d+(\.\d{1,3})?/,qe=/\d{1,2}/,Ge=/\d/,Ye=/\d\d/,Xe=/\d{3}/,Je=/\d{4}/,Qe=/[+-]?\d{6}/,Ze=/[+-]?\d+/,et=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tt="YYYY-MM-DDTHH:mm:ssZ",it=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],nt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ot=/([\+\-]|\d\d)/gi,rt=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),st={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},at={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},lt={},ct={s:45,m:45,h:22,d:26,M:11},dt="DDD w W M D d".split(" "),ut="M D H h m s w W".split(" "),ht={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return f(this.year()%100,2)},YYYY:function(){return f(this.year(),4)},YYYYY:function(){return f(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+f(Math.abs(e),6)},gg:function(){return f(this.weekYear()%100,2)},gggg:function(){return f(this.weekYear(),4)},ggggg:function(){return f(this.weekYear(),5)},GG:function(){return f(this.isoWeekYear()%100,2)},GGGG:function(){return f(this.isoWeekYear(),4)},GGGGG:function(){return f(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return S(this.milliseconds()/100)},SS:function(){return f(S(this.milliseconds()/10),2)},SSS:function(){return f(this.milliseconds(),3)},SSSS:function(){return f(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+f(S(e/60),2)+":"+f(S(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+f(S(e/60),2)+f(S(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},pt={},ft=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];dt.length;)ye=dt.pop(),ht[ye+"o"]=a(ht[ye],ye);for(;ut.length;)ye=ut.pop(),ht[ye+ye]=s(ht[ye],2);ht.DDDD=s(ht.DDD,3),u(l.prototype,{set:function(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,i,n;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(i=ve.utc([2e3,t]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[t]=new RegExp(n.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=ve([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var i=this._calendar[e];return"function"==typeof i?i.apply(t):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(e,t,i,n):o.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return re(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ve=function(t,n,o,r){var s;return"boolean"==typeof o&&(r=o,o=e),s={},s._isAMomentObject=!0,s._i=t,s._f=n,s._l=o,s._strict=r,s._isUTC=!1,s._pf=i(),ae(s)},ve.suppressDeprecationWarnings=!1,ve.createFromInputFallback=o("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){
e._d=new Date(e._i)}),ve.min=function(){var e=[].slice.call(arguments,0);return le("isBefore",e)},ve.max=function(){var e=[].slice.call(arguments,0);return le("isAfter",e)},ve.utc=function(t,n,o,r){var s;return"boolean"==typeof o&&(r=o,o=e),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=o,s._i=t,s._f=n,s._strict=r,s._pf=i(),ae(s).utc()},ve.unix=function(e){return ve(1e3*e)},ve.duration=function(e,t){var i,n,o,r,s=e,a=null;return ve.isDuration(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(a=Me.exec(e))?(i="-"===a[1]?-1:1,s={y:0,d:S(a[Se])*i,h:S(a[De])*i,m:S(a[Ie])*i,s:S(a[ke])*i,ms:S(a[Oe])*i}):(a=Ne.exec(e))?(i="-"===a[1]?-1:1,o=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},s={y:o(a[2]),M:o(a[3]),d:o(a[4]),h:o(a[5]),m:o(a[6]),s:o(a[7]),w:o(a[8])}):"object"==typeof s&&("from"in s||"to"in s)&&(r=g(ve(s.from),ve(s.to)),s={},s.ms=r.milliseconds,s.M=r.months),n=new d(s),ve.isDuration(e)&&e.hasOwnProperty("_locale")&&(n._locale=e._locale),n},ve.version=we,ve.defaultFormat=tt,ve.ISO_8601=function(){},ve.momentProperties=xe,ve.updateOffset=function(){},ve.relativeTimeThreshold=function(t,i){return ct[t]===e?!1:i===e?ct[t]:(ct[t]=i,!0)},ve.lang=o("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return ve.locale(e,t)}),ve.locale=function(e,t){var i;return e&&(i="undefined"!=typeof t?ve.defineLocale(e,t):ve.localeData(e),i&&(ve.duration._locale=ve._locale=i)),ve._locale._abbr},ve.defineLocale=function(e,t){return null!==t?(t.abbr=e,Re[e]||(Re[e]=new l),Re[e].set(t),ve.locale(e),Re[e]):(delete Re[e],null)},ve.langData=o("moment.langData is deprecated. Use moment.localeData instead.",function(e){return ve.localeData(e)}),ve.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return ve._locale;if(!y(e)){if(t=M(e))return t;e=[e]}return P(e)},ve.isMoment=function(e){return e instanceof c||null!=e&&e.hasOwnProperty("_isAMomentObject")},ve.isDuration=function(e){return e instanceof d};for(ye=ft.length-1;ye>=0;--ye)C(ft[ye]);ve.normalizeUnits=function(e){return E(e)},ve.invalid=function(e){var t=ve.utc(NaN);return null!=e?u(t._pf,e):t._pf.userInvalidated=!0,t},ve.parseZone=function(){return ve.apply(null,arguments).parseZone()},ve.parseTwoDigitYear=function(e){return S(e)+(S(e)>68?1900:2e3)},u(ve.fn=c.prototype,{clone:function(){return ve(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=ve(this).utc();return 0<e.year()&&e.year()<=9999?j(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):j(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&_(this._a,(this._isUTC?ve.utc(this._a):ve(this._a)).toArray())>0:!1},parsingFlags:function(){return u({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._d.getTimezoneOffset(),"m")),this},format:function(e){var t=j(this,e||ve.defaultFormat);return this.localeData().postformat(t)},add:v(1,"add"),subtract:v(-1,"subtract"),diff:function(e,t,i){var n,o,r=N(e,this),s=6e4*(this.zone()-r.zone());return t=E(t),"year"===t||"month"===t?(n=432e5*(this.daysInMonth()+r.daysInMonth()),o=12*(this.year()-r.year())+(this.month()-r.month()),o+=(this-ve(this).startOf("month")-(r-ve(r).startOf("month")))/n,o-=6e4*(this.zone()-ve(this).startOf("month").zone()-(r.zone()-ve(r).startOf("month").zone()))/n,"year"===t&&(o/=12)):(n=this-r,o="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-s)/864e5:"week"===t?(n-s)/6048e5:n),i?o:p(o)},from:function(e,t){return ve.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(ve(),e)},calendar:function(e){var t=e||ve(),i=N(t,this).startOf("day"),n=this.diff(i,"days",!0),o=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.localeData().calendar(o,this))},isLeapYear:function(){return O(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=ie(e,this.localeData()),this.add(e-t,"d")):t},month:he("Month",!0),startOf:function(e){switch(e=E(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=E(e),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+ve(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+ve(e).startOf(t)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+N(e,this).startOf(t)},min:o("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=ve.apply(null,arguments),this>e?this:e}),max:o("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=ve.apply(null,arguments),e>this?this:e}),zone:function(e,t){var i,n=this._offset||0;return null==e?this._isUTC?n:this._d.getTimezoneOffset():("string"==typeof e&&(e=H(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(i=this._d.getTimezoneOffset()),this._offset=e,this._isUTC=!0,null!=i&&this.subtract(i,"m"),n!==e&&(!t||this._changeInProgress?b(this,ve.duration(n-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ve.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?ve(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return D(this.year(),this.month())},dayOfYear:function(e){var t=Ee((ve(this).startOf("day")-ve(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=re(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=re(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=re(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return I(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return I(this.year(),e.dow,e.doy)},get:function(e){return e=E(e),this[e]()},set:function(e,t){return e=E(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){return t===e?this._locale._abbr:(this._locale=ve.localeData(t),this)},lang:o("moment().lang() is deprecated. Use moment().localeData() instead.",function(t){return t===e?this.localeData():(this._locale=ve.localeData(t),this)}),localeData:function(){return this._locale}}),ve.fn.millisecond=ve.fn.milliseconds=he("Milliseconds",!1),ve.fn.second=ve.fn.seconds=he("Seconds",!1),ve.fn.minute=ve.fn.minutes=he("Minutes",!1),ve.fn.hour=ve.fn.hours=he("Hours",!0),ve.fn.date=he("Date",!0),ve.fn.dates=o("dates accessor is deprecated. Use date instead.",he("Date",!0)),ve.fn.year=he("FullYear",!0),ve.fn.years=o("years accessor is deprecated. Use year instead.",he("FullYear",!0)),ve.fn.days=ve.fn.day,ve.fn.months=ve.fn.month,ve.fn.weeks=ve.fn.week,ve.fn.isoWeeks=ve.fn.isoWeek,ve.fn.quarters=ve.fn.quarter,ve.fn.toJSON=ve.fn.toISOString,u(ve.duration.fn=d.prototype,{_bubble:function(){var e,t,i,n=this._milliseconds,o=this._days,r=this._months,s=this._data,a=0;s.milliseconds=n%1e3,e=p(n/1e3),s.seconds=e%60,t=p(e/60),s.minutes=t%60,i=p(t/60),s.hours=i%24,o+=p(i/24),a=p(pe(o)),o-=p(fe(a)),r+=p(o/30),o%=30,a+=p(r/12),r%=12,s.days=o,s.months=r,s.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return p(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*S(this._months/12)},humanize:function(e){var t=oe(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var i=ve.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(e,t){var i=ve.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(e){return e=E(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,i;if(e=E(e),t=this._days+this._milliseconds/864e5,"month"===e||"year"===e)return i=this._months+12*pe(t),"month"===e?i:i/12;switch(t+=fe(this._months/12),e){case"week":return t/7;case"day":return t;case"hour":return 24*t;case"minute":return 24*t*60;case"second":return 24*t*60*60;case"millisecond":return 24*t*60*60*1e3;default:throw new Error("Unknown unit "+e)}},lang:ve.fn.lang,locale:ve.fn.locale,toIsoString:o("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),o=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||o||r?"T":"")+(n?n+"H":"")+(o?o+"M":"")+(r?r+"S":""):"P0D"},localeData:function(){return this._locale}});for(ye in rt)rt.hasOwnProperty(ye)&&me(ye.toLowerCase());ve.duration.fn.asMilliseconds=function(){return this.as("ms")},ve.duration.fn.asSeconds=function(){return this.as("s")},ve.duration.fn.asMinutes=function(){return this.as("m")},ve.duration.fn.asHours=function(){return this.as("h")},ve.duration.fn.asDays=function(){return this.as("d")},ve.duration.fn.asWeeks=function(){return this.as("weeks")},ve.duration.fn.asMonths=function(){return this.as("M")},ve.duration.fn.asYears=function(){return this.as("y")},ve.locale("en",{ordinal:function(e){var t=e%10,i=1===S(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),Ae?module.exports=ve:"function"==typeof _wAMD.define&&_wAMD.define.amd?(_wAMD.define("moment",["require","exports","module"],function(e,t,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(_e.moment=be),ve}),ge(!0)):ge()}.call(this),_wAMD.define("mustache",["jquery","mustache-vendor","moment"],function(e,t,i){function n(){return function(e,t){return t(_W.stl(e))}}window.Mustache=t;var o="undefined"!=typeof Weebly?Weebly.AdminType:"",r={date:"MMMM D, YYYY",shortDate:"M/D/YY",longDate:"M/D/YYYY",time:"h:mm a"},s=function(e){return function(t,n){var o=n(t),s=i.unix(o);return s.format(r[e])}},a={expireCookie:function(e){document.cookie=e+"=; expires=Thu, 18 Dec 2000 12:00:00 UTC"},setCookie:function(e,t){a.expireCookie(e),document.cookie=e+"="+t+"; path=/; domain="+window.location.hostname}},l={buildTime:"undefined"!=typeof buildTime?buildTime:null,ASSETS_BASE:"undefined"!=typeof ASSETS_BASE?ASSETS_BASE:null,tl:function(){return function(e,t){return t(_W.utl(e))}},ftl:n,stl:n,esc_attr:function(){return function(e,t){return _.escape(t(e))}},fmt:{date:function(){return s("date")},shortDate:function(){return s("shortDate")},longDate:function(){return s("longDate")},time:function(){return s("time")}},isWeeblyAdmin:function(){return"weebly"===o},td:function(){return function(e,t){var n=["d","j","m","n","y","Y","a","A","g","h","G","H","i","s"],o=["DD","D","MM","M","YY","YYYY","a","A","hh","h","HH","H","mm","ss"];_.each(n,function(t,i){e=e.replace(t,o[i])});var r=e.split(/\|/),s=r[0],a=t("{{"+r[1]+"}}"),l=i(a).format(s);return l}},csrf_input:function(){var e=window.csrfToken;return e||(e=Math.random().toString(36).substring(2),a.setCookie("_csrf",e)),"<input type='hidden' name='_csrf' value='"+e+"' />"}};t.origRender=t.render,t.render=function(i,n){return n=e.extend({},n,l),t.origRender.apply(this,arguments)};var c=t.Writer.prototype;return c.origCompile=c.compile,c.compile=function(t){var i=c.origCompile.apply(this,[t]);return function(t){var n=Array.prototype.slice.call(arguments);return n[0]=e.extend(n[0]||{},l),i.apply(this,n)}},t}),function(e,t){if("object"==typeof exports){var i=require("underscore"),n=require("backbone");module.exports=t(i,n)}else"function"==typeof _wAMD.define&&_wAMD.define.amd&&_wAMD.define("backbone.wreqr",["underscore","backbone"],t)}(this,function(e,t){return t.Wreqr=function(e,t,i){var n={};return n.Handlers=function(e,t){var i=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,i){var n=null;t.isObject(e)&&!t.isFunction(e)&&(n=e.context,e=e.callback),this.setHandler(i,e,n)},this)},setHandler:function(e,t,i){var n={callback:t,context:i};this._wreqrHandlers[e]=n,this.trigger("handler:add",e,t,i)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t)throw new Error("Handler not found for '"+e+"'");return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(e,i),n.CommandStorage=function(){var t=function(e){this.options=e,this._commands={},i.isFunction(this.initialize)&&this.initialize(e)};return i.extend(t.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var i=this.getCommands(e);i.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),t}(),n.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,i)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,t,n){var o=this.storage.getCommands(e);i.each(o.instances,function(e){t.apply(n,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var t,n=e.storageType||this.storageType;t=i.isFunction(n)?new n:n,this.storage=t}})}(n),n.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.getHandler(e).apply(this,t)}})}(n),n.EventAggregator=function(e,t){var i=function(){};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events),i}(e,i),n}(t,t.Marionette,e),t.Wreqr}),function(e,t){if("object"==typeof exports){var i=require("underscore"),n=require("backbone");module.exports=t(i,n)}else"function"==typeof _wAMD.define&&_wAMD.define.amd&&_wAMD.define("backbone.babysitter",["underscore","backbone"],t)}(this,function(e,t){"option strict";return t.ChildViewContainer=function(e,t){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(i.prototype,{add:function(e,t){var i=e.cid;return this._views[i]=e,e.model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var i=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===i?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[i],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,i){t.each(this._views,function(n){t.isFunction(n[e])&&n[e].apply(n,i||[])})},_updateLength:function(){this.length=t.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(n,function(e){i.prototype[e]=function(){var i=t.values(this._views),n=[i].concat(t.toArray(arguments));return t[e].apply(t,n)}}),i}(t,e),t.ChildViewContainer}),function(e,t){if("object"==typeof exports){var i=require("underscore"),n=require("backbone"),o=require("backbone.wreqr"),r=require("backbone.babysitter");module.exports=t(i,n,o,r)}else"function"==typeof _wAMD.define&&_wAMD.define.amd&&_wAMD.define("backbone-marionette-vendor",["underscore","backbone","backbone.wreqr","backbone.babysitter"],t)}(this,function(e,t){(function(e,t,i){function n(e,t){var i=new Error(e);throw i.name=t||"Error",i}var o={};t.Marionette=o,o.$=t.$;var r=Array.prototype.slice;return o.extend=t.Model.extend,o.getOption=function(e,t){if(e&&t){var i;return i=e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},o.normalizeMethods=function(e){var t,n={};return i.each(e,function(e,o){t=e,i.isFunction(t)||(t=this[t]),t&&(n[o]=t)},this),n},o.normalizeUIKeys=function(e,t){return"undefined"!=typeof e?(i.each(i.keys(e),function(i){var n=/@ui.[a-zA-Z_$0-9]*/g;i.match(n)&&(e[i.replace(n,function(e){return t[e.slice(4)]})]=e[i],delete e[i])}),e):void 0},o.triggerMethod=function(){function e(e,t,i){return i.toUpperCase()}var t=/(^|:)(\w)/gi,n=function(n){var o="on"+n.replace(t,e),r=this[o];return i.isFunction(this.trigger)&&this.trigger.apply(this,arguments),i.isFunction(r)?r.apply(this,i.tail(arguments)):void 0};return n}(),o.MonitorDOMRefresh=function(e){function t(e){e._isShown=!0,o(e)}function n(e){e._isRendered=!0,o(e)}function o(e){e._isShown&&e._isRendered&&r(e)&&i.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}function r(t){return e.contains(t.el)}return function(e){e.listenTo(e,"show",function(){t(e)}),e.listenTo(e,"render",function(){n(e)})}}(document.documentElement),function(e){function t(e,t,o,r){var s=r.split(/\s+/);i.each(s,function(i){var r=e[i];r||n("Method '"+i+"' was configured as an event handler, but does not exist."),e.listenTo(t,o,r)})}function o(e,t,i,n){e.listenTo(t,i,n)}function r(e,t,n,o){var r=o.split(/\s+/);i.each(r,function(i){var o=e[i];e.stopListening(t,n,o)})}function s(e,t,i,n){e.stopListening(t,i,n)}function a(e,t,n,o,r){t&&n&&(i.isFunction(n)&&(n=n.call(e)),i.each(n,function(n,s){i.isFunction(n)?o(e,t,s,n):r(e,t,s,n)}))}e.bindEntityEvents=function(e,i,n){a(e,i,n,o,t)},e.unbindEntityEvents=function(e,t,i){a(e,t,i,s,r)}}(o),o.Callbacks=function(){this._deferred=o.$.Deferred(),this._callbacks=[]},i.extend(o.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(i,n){t&&(i=t),e.call(i,n)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=o.$.Deferred(),this._callbacks=[],i.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),o.Controller=function(e){this.triggerMethod=o.triggerMethod,this.options=e||{},i.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,i.extend(o.Controller.prototype,t.Events,{close:function(){this.stopListening();var e=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["close"].concat(e)),this.unbind()}}),o.Region=function(e){if(this.options=e||{},this.el=o.getOption(this,"el"),this.el||n("An 'el' must be specified for a region.","NoElError"),this.initialize){var t=Array.prototype.slice.apply(arguments);this.initialize.apply(this,t)}},i.extend(o.Region,{buildRegion:function(e,t){var o=i.isString(e),r=i.isString(e.selector),s=i.isUndefined(e.regionType),a=i.isFunction(e);a||o||r||n("Region must be specified as a Region type, a selector string or an object with selector property");var l,c;o&&(l=e),e.selector&&(l=e.selector,delete e.selector),a&&(c=e),!a&&s&&(c=t),e.regionType&&(c=e.regionType,delete e.regionType),(o||a)&&(e={}),e.el=l;var d=new c(e);return e.parentEl&&(d.getEl=function(t){var n=e.parentEl;return i.isFunction(n)&&(n=n()),n.find(t)}),d}}),i.extend(o.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||i.isUndefined(e.$el),n=e!==this.currentView;n&&this.close(),e.render(),o.triggerMethod.call(this,"before:show",e),o.triggerMethod.call(e,"before:show"),(n||t)&&this.open(e),this.currentView=e,o.triggerMethod.call(this,"show",e),o.triggerMethod.call(e,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return o.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),o.triggerMethod.call(this,"close",e),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),o.Region.extend=o.extend,o.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var n={};return i.each(e,function(e,o){i.isString(e)&&(e={selector:e}),e.selector&&(e=i.defaults({},e,t));var r=this.addRegion(o,e);n[o]=r},this),n},addRegion:function(t,n){var o,r=i.isObject(n),s=i.isString(n),a=!!n.selector;return o=s||r&&a?e.Region.buildRegion(n,e.Region):i.isFunction(n)?e.Region.buildRegion(n,e.Region):n,this._store(t,o),this.triggerMethod("region:add",t,o),o},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){i.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){i.each(this._regions,function(e,t){e.close()},this)},close:function(){this.removeRegions(),e.Controller.prototype.close.apply(this,arguments)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=i.size(this._regions)}}),n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return i.each(n,function(e){t.prototype[e]=function(){var t=i.values(this._regions),n=[t].concat(i.toArray(arguments));return i[e].apply(i,n)}}),t}(o),o.TemplateCache=function(e){this.templateId=e},i.extend(o.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new o.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=r.call(arguments),i=t.length;if(i>0)for(e=0;i>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),i.extend(o.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var t=o.$(e).html();return t&&0!==t.length||n("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return i.template(e)}}),o.Renderer={render:function(e,t){e||n("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError");var i;return(i="function"==typeof e?e:o.TemplateCache.get(e))(t)}},o.View=t.View.extend({constructor:function(e){i.bindAll(this,"render"),i.isObject(this.behaviors)&&new o.Behaviors(this),this.options=i.extend({},i.result(this,"options"),i.isFunction(e)?e.call(this):e),this.events=this.normalizeUIKeys(i.result(this,"events")),t.View.prototype.constructor.apply(this,arguments),o.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},triggerMethod:o.triggerMethod,normalizeMethods:o.normalizeMethods,getTemplate:function(){return o.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=o.getOption(this,"templateHelpers");return i.isFunction(t)&&(t=t.call(this)),i.extend(e,t)},normalizeUIKeys:function(e){var t=i.result(this,"ui");return o.normalizeUIKeys(e,t)},configureTriggers:function(){if(this.triggers){var e={},t=this.normalizeUIKeys(i.result(this,"triggers"));return i.each(t,function(t,n){var o=i.isObject(t),r=o?t.event:t;e[n]=function(e){if(e){var i=e.preventDefault,n=e.stopPropagation,s=o?t.preventDefault:i,a=o?t.stopPropagation:n;s&&i&&i.apply(e),a&&n&&n.apply(e)}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(r,l)}},this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),o.bindEntityEvents(this,this.model,o.getOption(this,"modelEvents")),o.bindEntityEvents(this,this.collection,o.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,i.isFunction(e)&&(e=e.call(this));var n={},o=i.result(this,"behaviorEvents")||{},r=this.configureTriggers();i.extend(n,o,e,r),t.View.prototype.delegateEvents.call(this,n)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),o.unbindEntityEvents(this,this.model,o.getOption(this,"modelEvents")),o.unbindEntityEvents(this,this.collection,o.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var e=Array.prototype.slice.call(arguments),t=this.triggerMethod.apply(this,["before:close"].concat(e));t!==!1&&(this.isClosed=!0,this.triggerMethod.apply(this,["close"].concat(e)),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=i.result(this,"_uiBindings");this.ui={},i.each(i.keys(e),function(t){var i=e[t];this.ui[t]=this.$(i)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),o.ItemView=o.View.extend({constructor:function(){o.View.prototype.constructor.apply(this,arguments)},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),i=o.Renderer.render(t,e);return this.$el.html(i),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),o.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"))}}),o.CollectionView=o.View.extend({itemViewEventPrefix:"itemview",constructor:function(e){this._initChildViewStorage(),o.View.prototype.constructor.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(i.each(this._bufferedChildren,function(e){o.triggerMethod.call(e,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this.render))},addChildView:function(e,t,i){this.closeEmptyView();var n=this.getItemView(e),o=this.collection.indexOf(e);this.addItemView(e,n,o)},onShowCalled:function(){this.children.each(function(e){o.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var e;this.collection.each(function(t,i){e=this.getItemView(t),this.addItemView(t,e,i)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var i=new t.Model;this.addItemView(i,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return o.getOption(this,"emptyView")},getItemView:function(e){var t=o.getOption(this,"itemView");return t||n("An `itemView` must be specified","NoItemViewError"),t},addItemView:function(e,t,n){var r=o.getOption(this,"itemViewOptions");i.isFunction(r)&&(r=r.call(this,e,n));var s=this.buildItemView(e,t,r);return this.addChildViewEventForwarding(s),this.triggerMethod("before:item:added",s),this.children.add(s),this.renderItemView(s,n),this._isShown&&!this.isBuffering&&o.triggerMethod.call(s,"show"),this.triggerMethod("after:item:added",s),s},addChildViewEventForwarding:function(e){var t=o.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var n=r.call(arguments),s=n[0],a=this.normalizeMethods(this.getItemEvents());n[0]=t+":"+s,n.splice(1,0,e),"undefined"!=typeof a&&i.isFunction(a[s])&&a[s].apply(this,n),o.triggerMethod.apply(this,n)},this)},getItemEvents:function(){return i.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,n){var o=i.extend({model:e},n);return new t(o)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},isEmpty:function(e){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(e,t){e.$el.append(t)},appendHtml:function(e,t,i){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e.$el.append(t.el)},_initChildViewStorage:function(){
this.children=new t.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),o.View.prototype.close.apply(this,arguments))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this._renderChildren))})},getItemView:function(e){var t=o.getOption(this,"itemView")||this.constructor;return t||n("An `itemView` must be specified","NoItemViewError"),t},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),o.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return o.Renderer.render(t,e)},appendBuffer:function(e,t){var i=this.getItemViewContainer(e);i.append(t)},appendHtml:function(e,t,i){if(e.isBuffering)e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t);else{var n=this.getItemViewContainer(e);n.append(t.el)}},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,r=o.getOption(e,"itemViewContainer");if(r){var s=i.isFunction(r)?r.call(this):r;t=e.$(s),t.length<=0&&n("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),o.Layout=o.ItemView.extend({regionType:o.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),o.ItemView.prototype.constructor.call(this,e)},render:function(){return this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions(),o.ItemView.prototype.render.apply(this,arguments)},close:function(){this.isClosed||(this.regionManager.close(),o.ItemView.prototype.close.apply(this,arguments))},addRegion:function(e,t){var i={};return i[e]=t,this._buildRegions(i)[e]},addRegions:function(e){return this.regions=i.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,i={regionType:o.getOption(this,"regionType"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,i)},_initializeRegions:function(e){var t;this._initRegionManager(),t=i.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new o.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),o.Behavior=function(e,t){function i(t,i){this.view=i,this.defaults=e.result(this,"defaults")||{},this.options=e.extend({},this.defaults,t),this.$=function(){return this.view.$.apply(this.view,arguments)},this.initialize.apply(this,arguments)}return e.extend(i.prototype,{initialize:function(){},triggerMethod:o.triggerMethod}),e.extend(i,{extend:t.View.extend}),i}(i,t),o.Behaviors=function(e,t){function i(e){this.behaviors=i.parseBehaviors(e,e.behaviors),i.wrap(e,this.behaviors,["bindUIElements","unbindUIElements","delegateEvents","undelegateEvents","onShow","onClose","behaviorEvents","triggerMethod","setElement"])}var n={setElement:function(e,i){e.apply(this,t.tail(arguments,2)),t.each(i,function(e){e.$el=this.$el},this)},onShow:function(i,n){var o=t.tail(arguments,2);t.each(n,function(t){e.triggerMethod.apply(t,["show"].concat(o))}),t.isFunction(i)&&i.apply(this,o)},onClose:function(i,n){var o=t.tail(arguments,2);t.each(n,function(t){e.triggerMethod.apply(t,["close"].concat(o))}),t.isFunction(i)&&i.apply(this,o)},bindUIElements:function(e,i){e.apply(this),t.invoke(i,e)},unbindUIElements:function(e,i){e.apply(this),t.invoke(i,e)},triggerMethod:function(e,i){var n=t.tail(arguments,2);e.apply(this,n),t.each(i,function(t){e.apply(t,n)})},delegateEvents:function(i,n){var o=t.tail(arguments,2);i.apply(this,o),t.each(n,function(t){e.bindEntityEvents(this,this.model,e.getOption(t,"modelEvents")),e.bindEntityEvents(this,this.collection,e.getOption(t,"collectionEvents"))},this)},undelegateEvents:function(i,n){var o=t.tail(arguments,2);i.apply(this,o),t.each(n,function(t){e.unbindEntityEvents(this,this.model,e.getOption(t,"modelEvents")),e.unbindEntityEvents(this,this.collection,e.getOption(t,"collectionEvents"))},this)},behaviorEvents:function(i,n){var o={},r=t.result(this,"ui");return t.each(n,function(i,n){var s={},a=t.result(i,"events")||{},l=t.result(i,"ui"),c=t.extend({},r,l);a=e.normalizeUIKeys(a,c),t.each(t.keys(a),function(e){var o=new Array(n+2).join(" "),r=e+o,l=t.isFunction(a[e])?a[e]:i[a[e]];s[r]=t.bind(l,i)}),o=t.extend(o,s)}),o}};return t.extend(i,{behaviorsLookup:function(){throw new Error("You must define where your behaviors are stored. See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")},getBehaviorClass:function(e,n){return e.behaviorClass?e.behaviorClass:t.isFunction(i.behaviorsLookup)?i.behaviorsLookup.apply(this,arguments)[n]:i.behaviorsLookup[n]},parseBehaviors:function(e,n){return t.map(n,function(t,n){var o=i.getBehaviorClass(t,n);return new o(t,e)})},wrap:function(e,i,o){t.each(o,function(o){e[o]=t.partial(n[o],e[o],i)})}}),i}(o,i),o.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,arguments),this.options=e||{};var i=o.getOption(this,"appRoutes"),n=this._getController();this.processAppRoutes(n,i)},appRoute:function(e,t){var i=this._getController();this._addAppRoute(i,e,t)},processAppRoutes:function(e,t){if(t){var n=i.keys(t).reverse();i.each(n,function(i){this._addAppRoute(e,i,t[i])},this)}},_getController:function(){return o.getOption(this,"controller")},_addAppRoute:function(e,t,o){var r=e[o];r||n("Method '"+o+"' was not found on the controller"),this.route(t,o,i.bind(r,e))}}),o.Application=function(e){this._initRegionManager(),this._initCallbacks=new o.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},i.extend(this,e),this.triggerMethod=o.triggerMethod},i.extend(o.Application.prototype,t.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(e,t){var i=o.Module.getClass(t),n=r.call(arguments);return n.unshift(this),i.create.apply(i,n)},_initRegionManager:function(){this._regionManager=new o.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e,t){delete this[e]})}}),o.Application.extend=o.extend,o.Module=function(e,t,n){this.moduleName=e,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=o.triggerMethod,i.isFunction(this.initialize)&&this.initialize(this.options,e,t)},o.Module.extend=o.extend,i.extend(o.Module.prototype,t.Events,{initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(i.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,o.triggerMethod.call(this,"before:stop"),i.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),o.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,n){if(e){var r=i.flatten([this,this.app,t,o,o.$,i,n]);e.apply(this,r)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks}}),i.extend(o.Module,{create:function(e,t,n){var o=e,s=r.call(arguments);s.splice(0,3),t=t.split(".");var a=t.length,l=[];return l[a-1]=n,i.each(t,function(t,i){var r=o;o=this._getModule(r,t,e,n),this._addModuleDefinition(r,o,l[i],s)},this),o},_getModule:function(e,t,n,o,r){var s=i.extend({},o),a=this.getClass(o),l=e[t];return l||(l=new a(t,n,s),e[t]=l,e.submodules[t]=l),l},getClass:function(e){var t=o.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,i,n){var o=this._getDefine(i),r=this._getStartWithParent(i,t);o&&t.addDefinition(o,n),this._addStartWithParent(e,t,r)},_getStartWithParent:function(e,t){var n;return i.isFunction(e)&&e.prototype instanceof o.Module?(n=t.constructor.prototype.startWithParent,i.isUndefined(n)?!0:n):i.isObject(e)?(n=e.startWithParent,i.isUndefined(n)?!0:n):!0},_getDefine:function(e){return!i.isFunction(e)||e.prototype instanceof o.Module?i.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,i){t.startWithParent=t.startWithParent&&i,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),o})(this,t,e);return t.Marionette}),_wAMD.define("backbone-marionette",["mustache","backbone-marionette-vendor"],function(e,t){return t.Renderer.render=function(t,i){if(!t){var n=new Error("Cannot render the template since it's false, null or undefined.");throw n.name="TemplateNotFoundError",n}return"function"==typeof t?t(i):e.render(t,i)},t}),_wAMD.define("util/backbone-prevent",["jquery","underscore","backbone"],function(e,t,i){i.preventClose=function(n){var o=this;if(!this.defer){if(this.defer=e.Deferred(),i.preventClose.preventer){var r=i.preventClose.preventer();r&&r.promise?this.defer=r:r?this.defer.resolve():this.defer.reject(),this.defer.fail(function(){delete i.preventClose.preventer})}else this.defer.reject();this.defer.always(function(){t.defer(function(){delete o.defer})})}this.defer.fail(function(){n()})},i.preventClose.ifModelChanged=function(i,n){if(!i.hasChangedDeepSinceSavepoint())return!1;var o=e.Deferred();return n?n(function(){o.reject()},function(){o.resolve()}):t.defer(function(){confirm("Are you sure? You'll lose your current changes.")?o.reject():o.resolve()}),o.promise()};var n=i.View.prototype.constructor;i.View.prototype.constructor=function(){n.apply(this,arguments),this.preventClose&&(i.preventClose.preventer=t.bind(this.preventClose,this))}}),function(e,t){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/backbone-rpc",["underscore","backbone","vendor/jsonrpc"],t):t(e._,e.Backbone)}(this,function(e,t,i){var n=t.sync;e.extend(t,{sync:function(i,o,r){if(!o.rpc)return n.apply(t,arguments);var s;switch(i){case"delete":i="destroy";case"create":case"update":case"patch":s=r.attrs||o.toJSON(r);break;case"read":if(o.rpc&&"read"==i){r=e.extend({},e.omit(r,"data"),r.data),s=e.extend({filter:[]},r);var a=o.keydefs||o.model.prototype.keydefs;if(a.PRIMARY)for(var l=0;l<a.PRIMARY.length;l++){var c=a.PRIMARY[l];void 0==o.get(c)||e.findWhere(s.filter,{property:c})||s.filter.push({property:c,value:o.get(c)})}}break;default:console.warn(i+" params not defined for this model ",o),s=r.attrs||o.toJSON()}if(o.rpc[i]){var d=o.rpc[i](s);return d.done(function(e){return e.success===!1?r.error(e):r.success(e)}),d.fail(function(e){return r.error(e)}),d}console.warn(i+" not defined for this model ",o)}})}),function(e){e.ns=function(e,t){for(var t=t||window,i=e.split("."),n=0,o=i.length;o>n;n++){var r=i[n];"string"!=typeof r?t=r:(t[r]||(t[r]={}),t=t[r])}return t},e.setup_rpc=function(t){var i=e.ns(t.namespace),n=new jsonrpc.JsonRpc(t.url),o=e.jQuery||require("jquery"),r=function(e,t,i,r,s){return function(){var r=Array.prototype.slice.call(arguments);if(r.length<t)return void console.error("Wrong number of args for "+e);i=!!i,r.unshift(e);var a=o.Deferred();return r.push({success:a.resolve,failure:a.reject,scope:a,secure:i,standalone:s}),n.call.apply(n,r),a}};for(var s in t.actions)if(t.actions.hasOwnProperty(s))for(var a=e.ns(s,i),l=t.actions[s]||[],c=0;c<l.length;c++){var d=l[c];a[d.name]=r(s+"::"+d.name,d.len,d.secure,d.multiple,d.standalone)}},e.setup_model_rpc=function(t){var i=e.ns(t.rpc_namespace),n=e.ns(t.model_namespace),o=e.ns(t.collection_namespace),r=e.ns(t.bootstrap_namespace);_.extend(n,t.models),_.extend(o,t.collections),_.extend(r,t.bootstrap);for(var s in o)i[s]&&(o[s].rpc=i[s]);for(var s in n)if(i[s]){n[s].rpc=i[s];var a=n[s].relations;if(a)for(var l=0;l<a.length;l++){var c=a[l];o[c.relatedModel]&&(c.collectionType=c.relatedModel+"Collection")}}}}(window.Weebly||{}),_wAMD.define("backbone-all",["backbone","backbone-radio","backbone-pageable","backbone-validation","backbone-relational","backbone-marionette","util/backbone-prevent","util/backbone-rpc"],function(e){var t={},i=e.RelationalModel.extend;return e.Relational.store.addModelScope(t),e.RelationalModel.extend=function(e,n){var o=i.apply(this,arguments),r=e._class;return r&&(r=r.split("."),r=r[r.length-1],t[r]=o),o},e.Wreqr.Handlers.prototype.removeHandlers=function(e){for(var t=0;t<e.length;t++)this.removeHandler(e[t])},e}),_wAMD.define("w-global",[],function(){return window.Weebly=window._W=window._W||{},window._W}),_wAMD.define("get-bootstrap",["jquery"],function(e){function t(t){var n=i;if(!n){var o=e(".__bootstrapdata__");if(0===o.length)throw new Error("Bootstrap data not found on page");if(o.length>1)throw new Error("Multiple bootstrap data found on page");n=o.html()}var r;try{r=JSON.parse(n)}catch(s){throw new Error("Could not parse bootstrap data.")}return i=n,r[t]}var i;return t}),_wAMD.define("editor-site-shared/RelayConstructor",["underscore","backbone-all"],function(e,t){var i=function(){var i=this.incoming={vent:new t.Wreqr.EventAggregator,reqres:new t.Wreqr.RequestResponse,commands:new t.Wreqr.Commands};this.outgoing={vent:new t.Wreqr.EventAggregator,reqres:new t.Wreqr.RequestResponse,commands:new t.Wreqr.Commands};this.on=e.bind(i.vent.on,i.vent),this.off=e.bind(i.vent.off,i.vent),this.once=e.bind(i.vent.once,i.vent),this.reqres={request:this.request,setHandler:e.bind(i.reqres.setHandler,i.reqres),setHandlers:e.bind(i.reqres.setHandlers,i.reqres),removeHandler:e.bind(i.reqres.removeHandler,i.reqres),removeHandlers:e.bind(i.reqres.removeHandlers,i.reqres),removeAllHandlers:e.bind(i.reqres.removeAllHandlers,i.reqres)},this.commands={execute:this.execute,setHandler:e.bind(i.commands.setHandler,i.commands),setHandlers:e.bind(i.commands.setHandlers,i.commands),removeHandler:e.bind(i.commands.removeHandler,i.commands),removeHandlers:e.bind(i.commands.removeHandlers,i.commands),removeAllHandlers:e.bind(i.commands.removeAllHandlers,i.commands)}};return i.prototype.trigger=function(){return this.outgoing.vent.trigger.apply(this.outgoing.vent,arguments)},i.prototype.request=function(){return this.outgoing.reqres.request.apply(this.outgoing.reqres,arguments)},i.prototype.execute=function(){return this.outgoing.commands.execute.apply(this.outgoing.commands,arguments)},i.prototype.ajax=function(){return Array.prototype.unshift.call(arguments,"ajax:request"),this.request.apply(this,arguments)},i.prototype.RPC=function(){return Array.prototype.unshift.call(arguments,"ajax:rpc"),this.request.apply(this,arguments)},i}),_wAMD.define("editor-site-shared/relay",["editor-site-shared/RelayConstructor"],function(e){var t=new e;return t}),_wAMD.define("editor-site-shared/ui/constants",[],function(){return{EDITOR_FRAME_ID:"editor-frame",HEADER_SECTION_TAG_NAME:"__header_section",HEADER_SECTION_AREA_ID:"_editor-header-section-area",HEADER_SECTION_CLASS_NAME:"wsite-header-section",HEADER_SECTION_PARENT_STRING_NAME:"header-section-parent-string",HEADER_SECTION_BACKGROUND_CLASS_NAME:"wsite-background-header-section",SECTION_EDGE_CLASS:"section-edge-wrapper",SECTION_WRAP_NAME:"wsite-section-wrap",SECTION_HIGHLIGHT_CLASS_NAME:"wsite-element-section-highlight",SECTION_BACKGROUND_CLASS_NAME:"wsite-background-section-",SECTION_BACKGROUND_VIDEO_CLASS_NAME:"wsite-section-bg-video",SECTION_BACKGROUND_COLOR_CLASS_NAME:"wsite-section-bg-color",SECTION_BACKGROUND_IMAGE_CLASS_NAME:"wsite-section-bg-image",SECTION_CONTENT_CLASS_NAME:"wsite-section-content",SECTION_SPOTLIGHT_REPOSITION_INTERVAL:50,MIN_EMPTY_MESSAGE_HEIGHT:90,POSITION_TOP:0,POSITION_RIGHT:1,POSITION_BOTTOM:2,POSITION_LEFT:3,REBUILD_EDGE_INTERVAL:100,SECTION_ELEMENT:"99990000",CURRENT_PARAGRAPH_IMAGE_ELEMENT:"94464494",STANDALONE_IMAGE_ELEMENTS:["30621876","87358824","26608449"],PARAGRAPH_IMAGE_ELEMENTS:["20731748","66604512","94464494","73827406"],SIMPLE_IMAGE_ELEMENTS:["61719152","17854681","18383940","36582085","32818409","86229831","93090942","98937909","85957680","44744975","11138764"],BUTTON_ELEMENT_ID:"57909285",SLIDESHOW_ELEMENT_ID:"31574711",CONTENT_AREA_ELEMENT_ID:"92226769",PLATFORM_ELEMENT_ID:"75699656",PRODUCT_ELEMENT_ID:"5699726",IMAGE_LINK_LIGHTBOX_CFPIDS:["59252592","62258083","18452221"],FORM_CONFIRMATION_LINK_CFPID:"785459072261824",FORM_CONFIRMATION_MESSAGE_CFPID:"693737017417606279",MOBILE_EDITOR_BODY_CLASS:"wsite-native-mobile-editor"}}),_wAMD.define("editor-site-shared/ui/context",["jquery","editor-site-shared/ui/constants"],function(e,t){var i={};return i.getScrollContainer=function(){var i=e("#"+t.EDITOR_FRAME_ID).eq(0);return i.length?i:e(window)},i.inSiteContext=function(){return i.getScrollContainer()[0]===window},i.inEditorContext=function(){return!i.inSiteContext()},i}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/LoadingIndicator",["jquery"],e):window.LoadingIndicator=e(window.jQuery)}(function(e){var t=function(t){this.queue={},this.options=t||{},this.options.delay=t.delay||0,this.timeout=t.timeout||15e3,this.timeoutCallback=t.timeoutCallback,this.debug=this.options.debug,this.delayTimeout=null,this.pauseTimeout=null,this.$loadingText=e("<div/>",{"class":"loading-indicator-text",text:this.options.defaultText||"Loading"}),this.$el=e("<div/>",{"class":"loading-indicator"}).append('<div class="circular-loader"></div>','<span class="loading-dismiss"></span>').append(this.$loadingText),this.$el.appendTo(this.options.appendTo||"body").on("click",".loading-dismiss",function(){this.__stopAll()}.bind(this))};return t.prototype.start=function(e,t){return t=t||{},t.delay=t.delay||this.options.delay,clearTimeout(this.pauseTimeout),this.$el.removeClass("pause"),e?this.queue[e]?void(this.debug&&console.warn("Attempting to show loading indicator with preexisting key:",e)):(this.queue[e]=!0,"full"===this.debug&&console.info("➕ Pushing loading state:",e),t.text&&this.$loadingText.text(t.text),0!==this.timeout&&(clearTimeout(this.dismissTimeout),this.dismissTimeout=setTimeout(function(){this.debug&&console.warn("LoadingIndicator is stuck after %ims",this.timeout,Object.keys(this.queue)),"function"==typeof this.timeoutCallback&&this.timeoutCallback(Object.keys(this.queue)),this.$el.addClass("timeout")}.bind(this),this.timeout)),void(this.delayTimeout=setTimeout(function(){Object.keys(this.queue).length&&this.$el.addClass("show")}.bind(this),t.delay))):void(this.debug&&console.warn("Attemping to show loading indicator without a key! Please provide a key"))},t.prototype.stop=function(e,t){return this.queue[e]?("full"===this.debug&&console.info("➖ Popping loading state:",e),delete this.queue[e],void(0===Object.keys(this.queue).length&&this.__complete())):void(this.debug&&console.warn("Attempting to hide loading indicator that does not exist:",e))},t.prototype.__complete=function(){this.$loadingText.text()!==this.options.defaultText&&this.$el.on("transitionend.loadingIndicator",function(e){"opacity"===e.originalEvent.propertyName&&(this.$el.off("transitionend.loadingIndicator"),this.$loadingText.text(this.options.defaultText))}.bind(this)),clearTimeout(this.dismissTimeout),clearTimeout(this.delayTimeout),this.$el.removeClass("show timeout"),this.pauseTimeout=setTimeout(function(){this.$el.hasClass("show")||(clearTimeout(this.pauseTimeout),this.$el.addClass("pause"))}.bind(this),2e3)},t.prototype.__stopAll=function(){this.debug&&console.warn("You should not be calling `stopAll` in production!"),this.queue={},this.__complete()},t}),_wAMD.define("text",{}),_wAMD.define("tpl",["text"],function(e){function t(e){return e.match(/\.tpl$/i)||(e+=".tpl"),e}var i={};return{load:function(n,o,r,s){if(s.isBuild&&s.inlineTpl===!1)return r();var a=function(e){s.isBuild&&(i[n]=e),r(e)};e.get(o.toUrl("templates/"+t(n)),a,r.error)},write:function(t,n,o,r){if(i.hasOwnProperty(n)){var s=e.jsEscape(i[n]);o.asModule(t+"!"+n,"define(function () { return '"+s+"'; });\n")}}}}),_wAMD.define("tpl!components/views/confirm.tpl",[],function(){return"<p>{{{message}}}</p>\n"}),_wAMD.define("components/views/ConfirmView",["jquery","underscore","backbone-all","mustache","tpl!components/views/confirm.tpl"],function(e,t,i,n,o){var r=i.Marionette.ItemView.extend({template:n.compile(o),events:{"click .btn-cancel":"cancel","click .btn-confirm":"confirm"},templateHelpers:function(){var e=this;return{message:function(){return e.message}}},defaultDialog:{buttons:[{group:"control-buttons pull-right",buttons:[{className:"btn-cancel btn-com"},{className:"btn-confirm btn-com btn-success"}]}]},message:void 0,title:_W.utl("javascript.components.views.ConfirmView_1"),confirmText:_W.utl("javascript.components.views.ConfirmView_2"),cancelText:_W.utl("javascript.components.views.ConfirmView_3"),size:"600x250",modal:!0,callback:function(){},initialize:function(e){var i,n=this;i=n.dialog=t.extend({},n.defaultDialog),n.message=e.message||n.message,i.size=e.size||n.size,i.title=e.title||n.title,e.dialogClass&&(i.dialogClass=e.dialogClass),n.className=e.className||n.classname,n.dialog.modal=t.isUndefined(e.modal)?n.modal:e.modal,i.buttons[0].buttons[0].text=e.cancelText||n.cancelText,i.buttons[0].buttons[1].text=e.confirmText||n.confirmText,e.cancelClass&&(n.dialog.buttons[0].buttons[0].className=e.cancelClass+" btn-cancel"),e.confirmClass&&(n.dialog.buttons[0].buttons[1].className=e.confirmClass+" btn-confirm"),n.responseCallback=e.callback||n.callback},confirm:function(){this.trigger("dialog:close"),this.responseCallback(!0)},cancel:function(){this.trigger("dialog:close"),this.responseCallback(!1)}});return r}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("jquery-ui/core",["jquery"],e):e(jQuery)}(function(e){function t(t,n){var o,r,s,a=t.nodeName.toLowerCase();return"area"===a?(o=t.parentNode,r=o.name,t.href&&r&&"map"===o.nodeName.toLowerCase()?(s=e("img[usemap='#"+r+"']")[0],!!s&&i(s)):!1):(/^(input|select|textarea|button|object)$/.test(a)?!t.disabled:"a"===a?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),n="absolute"===i,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=e(this);return n&&"static"===t.css("position")?!1:o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&r.length?r:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var n=e.attr(i,"tabindex"),o=isNaN(n);return(o||n>=0)&&t(i,!o)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function n(t,i,n,r){return e.each(o,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var o="Width"===i?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?s["inner"+i].call(this):this.each(function(){e(this).css(r,n(this,t)+"px")})},e.fn["outer"+i]=function(t,o){return"number"!=typeof t?s["outer"+i].call(this,t):this.each(function(){e(this).css(r,n(this,t,!0,o)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,n,o=e(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0}}),e.ui.plugin={add:function(t,i,n){var o,r=e.ui[t].prototype;for(o in n)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([i,n[o]])},call:function(e,t,i,n){var o,r=e.plugins[t];if(r&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)e.options[r[o][0]]&&r[o][1].apply(e.element,i)}}}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("jquery-ui/widget",["jquery"],e):e(jQuery)}(function(e){var t=0,i=Array.prototype.slice;return e.cleanData=function(t){return function(i){var n,o,r;for(r=0;null!=(o=i[r]);r++)try{n=e._data(o,"events"),n&&n.remove&&e(o).triggerHandler("remove")}catch(s){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var o,r,s,a,l={},c=t.split(".")[0];return t=t.split(".")[1],o=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[c]=e[c]||{},r=e[c][t],s=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},o=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=n.apply(this,arguments),this._super=i,this._superApply=r,t}}()):void(l[t]=n)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix||t:t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:o}),r?(e.each(r._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete r._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var n,o,r=i.call(arguments,1),s=0,a=r.length;a>s;s++)for(n in r[s])o=r[s][n],r[s].hasOwnProperty(n)&&void 0!==o&&(e.isPlainObject(o)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],o):e.widget.extend({},o):t[n]=o);return t},e.widget.bridge=function(t,n){var o=n.prototype.widgetFullName||t;e.fn[t]=function(r){var s="string"==typeof r,a=i.call(arguments,1),l=this;return s?this.each(function(){var i,n=e.data(this,o);return"instance"===r?(l=n,!1):n?e.isFunction(n[r])&&"_"!==r.charAt(0)?(i=n[r].apply(n,a),i!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")}):(a.length&&(r=e.widget.extend.apply(null,[r].concat(a))),this.each(function(){var t=e.data(this,o);t?(t.option(r||{}),t._init&&t._init()):e.data(this,o,new n(r,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(i,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,o,r,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},n=t.split("."),t=n.shift(),n.length){for(o=s[t]=e.widget.extend({},this.options[t]),r=0;r<n.length-1;r++)o[n[r]]=o[n[r]]||{},o=o[n[r]];if(t=n.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);
return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,n){var o,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,function(n,s){function a(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,d=l[2];d?o.delegate(d,c,a):i.bind(c,a)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var o,r,s=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(e.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?o===!0||"number"==typeof o?i:o.effect||i:t;o=o||{},"number"==typeof o&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,r):n.queue(function(i){e(this)[t](),r&&r.call(n[0]),i()})}}),e.widget}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("jquery-ui/button",["jquery","./core","./widget"],e):e(jQuery)}(function(e){var t,i="ui-button ui-widget ui-state-default ui-corner-all",n="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",o=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},r=function(t){var i=t.name,n=t.form,o=e([]);return i&&(i=i.replace(/'/g,"\\'"),o=n?e(n).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),o};return e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,o),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var n=this,s=this.options,a="checkbox"===this.type||"radio"===this.type,l=a?"":"ui-state-active";null===s.label&&(s.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(i).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){s.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){s.disabled||e(this).removeClass(l)}).bind("click"+this.eventNamespace,function(e){s.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),a&&this.element.bind("change"+this.eventNamespace,function(){n.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return s.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(s.disabled)return!1;e(this).addClass("ui-state-active"),n.buttonElement.attr("aria-pressed","true");var t=n.element[0];r(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return s.disabled?!1:(e(this).addClass("ui-state-active"),t=this,void n.document.one("mouseup",function(){t=null}))}).bind("mouseup"+this.eventNamespace,function(){return s.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return s.disabled?!1:void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",s.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(i+" ui-state-active "+n).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),void(t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")))):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?r(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(n),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),o=this.options.icons,r=o.primary&&o.secondary,s=[];o.primary||o.secondary?(this.options.text&&s.push("ui-button-text-icon"+(r?"s":o.primary?"-primary":"-secondary")),o.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+o.primary+"'></span>"),o.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+o.secondary+"'></span>"),this.options.text||(s.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),n=i.filter(":ui-button");i.not(":ui-button").button(),n.button("refresh"),this.buttons=i.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),e.ui.button}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("jquery-ui/mouse",["jquery","./widget"],e):e(jQuery)}(function(e){var t=!1;return e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,o=1===i.which,r="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return o&&!r&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(i){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&e.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),t=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("jquery-ui/draggable",["jquery","./core","./mouse","./widget"],e):e(jQuery)}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(n){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper),o=n?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options,r=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,e(r).width()-this.helperProportions.width-this.margins.left,(e(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),i=e(o.containment),n=i[0],void(n&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var o=e.extend({},i,{item:n.element});n.sortables=[],e(n.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i,n){var o=e.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,e.each(n.sortables,function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,o))})},drag:function(t,i,n){e.each(n.sortables,function(){var o=!1,r=this;r.positionAbs=n.positionAbs,r.helperProportions=n.helperProportions,r.offset.click=n.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,e.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&e.contains(r.element[0],this.element[0])&&(o=!1),o})),o?(r.isOver||(r.isOver=1,n._parent=i.helper.parent(),r.currentItem=i.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return i.helper[0]},t.target=r.currentItem[0],r._mouseCapture(t,!0),r._mouseStart(t,!0,!0),r.offset.click.top=n.offset.click.top,r.offset.click.left=n.offset.click.left,r.offset.parent.left-=n.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=n.offset.parent.top-r.offset.parent.top,n._trigger("toSortable",t),n.dropped=r.element,e.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,r.fromOutside=n),r.currentItem&&(r._mouseDrag(t),i.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",t,r._uiHash(r)),r._mouseStop(t,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(t),i.position=n._generatePosition(t,!0),n._trigger("fromSortable",t),n.dropped=!1,e.each(n.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var o=e("body"),r=n.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(t,i,n){var o=n.options;o._cursor&&e("body").css("cursor",o._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var o=e(i.helper),r=n.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(t,i,n){var o=n.options;o._opacity&&e(i.helper).css("opacity",o._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,n){var o=n.options,r=!1,s=n.scrollParentNotHidden[0],a=n.document[0];s!==a&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(n.overflowOffset.top+s.offsetHeight-t.pageY<o.scrollSensitivity?s.scrollTop=r=s.scrollTop+o.scrollSpeed:t.pageY-n.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(n.overflowOffset.left+s.offsetWidth-t.pageX<o.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+o.scrollSpeed:t.pageX-n.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(t.pageY-e(a).scrollTop()<o.scrollSensitivity?r=e(a).scrollTop(e(a).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<o.scrollSensitivity&&(r=e(a).scrollTop(e(a).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(t.pageX-e(a).scrollLeft()<o.scrollSensitivity?r=e(a).scrollLeft(e(a).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<o.scrollSensitivity&&(r=e(a).scrollLeft(e(a).scrollLeft()+o.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var o=n.options;n.snapElements=[],e(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var t=e(this),i=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,n){var o,r,s,a,l,c,d,u,h,p,f=n.options,m=f.snapTolerance,g=i.offset.left,v=g+n.helperProportions.width,b=i.offset.top,y=b+n.helperProportions.height;for(h=n.snapElements.length-1;h>=0;h--)l=n.snapElements[h].left-n.margins.left,c=l+n.snapElements[h].width,d=n.snapElements[h].top-n.margins.top,u=d+n.snapElements[h].height,l-m>v||g>c+m||d-m>y||b>u+m||!e.contains(n.snapElements[h].item.ownerDocument,n.snapElements[h].item)?(n.snapElements[h].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(o=Math.abs(d-y)<=m,r=Math.abs(u-b)<=m,s=Math.abs(l-v)<=m,a=Math.abs(c-g)<=m,o&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),p=o||r||s||a,"outer"!==f.snapMode&&(o=Math.abs(d-b)<=m,r=Math.abs(u-y)<=m,s=Math.abs(l-g)<=m,a=Math.abs(c-v)<=m,o&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[h].snapping&&(o||r||s||a||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=o||r||s||a||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var o,r=n.options,s=e.makeArray(e(r.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});s.length&&(o=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(t){e(this).css("zIndex",o+t)}),this.css("zIndex",o+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var o=e(i.helper),r=n.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(t,i,n){var o=n.options;o._zIndex&&e(i.helper).css("zIndex",o._zIndex)}}),e.ui.draggable}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("jquery-ui/position",["jquery"],e):e(jQuery)}(function(e){return function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function n(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var o,r,s=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,d=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,f=e.fn.position;
e.position={scrollbarWidth:function(){if(void 0!==o)return o;var t,i,n=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=n.children()[0];return e("body").append(n),t=r.offsetWidth,n.css("overflow","scroll"),i=r.offsetWidth,t===i&&(i=n[0].clientWidth),n.remove(),o=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,r="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:r?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n||o?i.width():i.outerWidth(),height:n||o?i.height():i.outerHeight()}}},e.fn.position=function(o){if(!o||!o.of)return f.apply(this,arguments);o=e.extend({},o);var p,m,g,v,b,y,w=e(o.of),_=e.position.getWithinInfo(o.within),E=e.position.getScrollInfo(_),T=(o.collision||"flip").split(" "),C={};return y=n(w),w[0].preventDefault&&(o.at="left top"),m=y.width,g=y.height,v=y.offset,b=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(o[this]||"").split(" ");1===i.length&&(i=c.test(i[0])?i.concat(["center"]):d.test(i[0])?["center"].concat(i):["center","center"]),i[0]=c.test(i[0])?i[0]:"center",i[1]=d.test(i[1])?i[1]:"center",e=u.exec(i[0]),t=u.exec(i[1]),C[this]=[e?e[0]:0,t?t[0]:0],o[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]}),1===T.length&&(T[1]=T[0]),"right"===o.at[0]?b.left+=m:"center"===o.at[0]&&(b.left+=m/2),"bottom"===o.at[1]?b.top+=g:"center"===o.at[1]&&(b.top+=g/2),p=t(C.at,m,g),b.left+=p[0],b.top+=p[1],this.each(function(){var n,c,d=e(this),u=d.outerWidth(),h=d.outerHeight(),f=i(this,"marginLeft"),y=i(this,"marginTop"),S=u+f+i(this,"marginRight")+E.width,D=h+y+i(this,"marginBottom")+E.height,I=e.extend({},b),k=t(C.my,d.outerWidth(),d.outerHeight());"right"===o.my[0]?I.left-=u:"center"===o.my[0]&&(I.left-=u/2),"bottom"===o.my[1]?I.top-=h:"center"===o.my[1]&&(I.top-=h/2),I.left+=k[0],I.top+=k[1],r||(I.left=l(I.left),I.top=l(I.top)),n={marginLeft:f,marginTop:y},e.each(["left","top"],function(t,i){e.ui.position[T[t]]&&e.ui.position[T[t]][i](I,{targetWidth:m,targetHeight:g,elemWidth:u,elemHeight:h,collisionPosition:n,collisionWidth:S,collisionHeight:D,offset:[p[0]+k[0],p[1]+k[1]],my:o.my,at:o.at,within:_,elem:d})}),o.using&&(c=function(e){var t=v.left-I.left,i=t+m-u,n=v.top-I.top,r=n+g-h,l={target:{element:w,left:v.left,top:v.top,width:m,height:g},element:{element:d,left:I.left,top:I.top,width:u,height:h},horizontal:0>i?"left":t>0?"right":"center",vertical:0>r?"top":n>0?"bottom":"middle"};u>m&&a(t+i)<m&&(l.horizontal="center"),h>g&&a(n+r)<g&&(l.vertical="middle"),s(a(t),a(i))>s(a(n),a(r))?l.important="horizontal":l.important="vertical",o.using.call(this,e,l)}),d.offset(e.extend(I,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,a=e.left-t.collisionPosition.marginLeft,l=o-a,c=a+t.collisionWidth-r-o;t.collisionWidth>r?l>0&&0>=c?(i=e.left+l+t.collisionWidth-r-o,e.left+=l-i):c>0&&0>=l?e.left=o:l>c?e.left=o+r-t.collisionWidth:e.left=o:l>0?e.left+=l:c>0?e.left-=c:e.left=s(e.left-a,e.left)},top:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollTop:n.offset.top,r=t.within.height,a=e.top-t.collisionPosition.marginTop,l=o-a,c=a+t.collisionHeight-r-o;t.collisionHeight>r?l>0&&0>=c?(i=e.top+l+t.collisionHeight-r-o,e.top+=l-i):c>0&&0>=l?e.top=o:l>c?e.top=o+r-t.collisionHeight:e.top=o:l>0?e.top+=l:c>0?e.top-=c:e.top=s(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,o=t.within,r=o.offset.left+o.scrollLeft,s=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=e.left-t.collisionPosition.marginLeft,d=c-l,u=c+t.collisionWidth-s-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>d?(i=e.left+h+p+f+t.collisionWidth-s-r,(0>i||i<a(d))&&(e.left+=h+p+f)):u>0&&(n=e.left-t.collisionPosition.marginLeft+h+p+f-l,(n>0||a(n)<u)&&(e.left+=h+p+f))},top:function(e,t){var i,n,o=t.within,r=o.offset.top+o.scrollTop,s=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=e.top-t.collisionPosition.marginTop,d=c-l,u=c+t.collisionHeight-s-l,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>d?(n=e.top+p+f+m+t.collisionHeight-s-r,(0>n||n<a(d))&&(e.top+=p+f+m)):u>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-l,(i>0||a(i)<u)&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,o,s,a=document.getElementsByTagName("body")[0],l=document.createElement("div");t=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in n)t.style[s]=n[s];t.appendChild(l),i=a||document.documentElement,i.insertBefore(t,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",o=e(l).offset().left,r=o>10&&11>o,t.innerHTML="",i.removeChild(t)}()}(),e.ui.position}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("jquery-ui/resizable",["jquery","./core","./mouse","./widget"],e):e(jQuery)}(function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return t[n]>0?!0:(t[n]=1,o=t[n]>0,t[n]=0,o)},_create:function(){var t,i,n,o,r,s=this,a=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)n=e.trim(t[i]),r="ui-resizable-"+n,o=e("<div class='ui-resizable-handle "+r+"'></div>"),o.css({zIndex:a.zIndex}),"se"===n&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(o);this._renderAxis=function(t){var i,n,o,r;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=e(this.handles[i],this.element),r=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(o,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(e(this).removeClass("ui-resizable-autohide"),s._handles.show())}).mouseleave(function(){a.disabled||s.resizing||(e(this).addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,o=!1;for(i in this.handles)n=e(this.handles[i])[0],(n===t.target||e.contains(n,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(t){var i,n,o,r=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),r.containment&&(i+=e(r.containment).scrollLeft()||0,n+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,n,o=this.originalMousePosition,r=this.axis,s=t.pageX-o.left||0,a=t.pageY-o.top||0,l=this._change[r];return this._updatePrevProperties(),l?(i=l.apply(this,[t,s,a]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,n,o,r,s,a,l,c=this.options,d=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),o=n&&this._hasScroll(i[0],"left")?0:d.sizeDiff.height,r=n?0:d.sizeDiff.width,s={width:d.helper.width()-r,height:d.helper.height()-o},a=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null,c.animate||this.element.css(e.extend(s,{top:l,left:a})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,n,o,r,s=this.options;r={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,n=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),n>r.minHeight&&(r.minHeight=n),i<r.maxWidth&&(r.maxWidth=i),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return r&&(e.width=t.minWidth),s&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),r&&c&&(e.left=a-t.minWidth),n&&c&&(e.left=a-t.maxWidth),s&&d&&(e.top=l-t.minHeight),o&&d&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],o=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(n[t],10)||0,i[t]+=parseInt(o[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,o=this.originalPosition;return{top:o.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),n=i.options,o=i._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&i._hasScroll(o[0],"left")?0:i.sizeDiff.height,a=r?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-s},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,d=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,d&&c?{top:d,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};o&&o.length&&e(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,n,o,r,s,a,l=e(this).resizable("instance"),c=l.options,d=l.element,u=c.containment,h=u instanceof e?u.get(0):/parent/.test(u)?d.parent().get(0):u;h&&(l.containerElement=e(h),/document/.test(u)||u===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){i[e]=l._num(t.css("padding"+n))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},n=l.containerOffset,o=l.containerSize.height,r=l.containerSize.width,s=l._hasScroll(h,"left")?h.scrollWidth:r,a=l._hasScroll(h)?h.scrollHeight:o,l.parentData={element:h,left:n.left,top:n.top,width:s,height:a}))},resize:function(t){var i,n,o,r,s=e(this).resizable("instance"),a=s.options,l=s.containerOffset,c=s.position,d=s._aspectRatio||t.shiftKey,u={top:0,left:0},h=s.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(u=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-u.left),d&&(s.size.height=s.size.width/s.aspectRatio,p=!1),s.position.left=a.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),d&&(s.size.width=s.size.height*s.aspectRatio,p=!1),s.position.top=s._helper?l.top:0),o=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),o&&r?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),i=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-u.left:s.offset.left-l.left)),n=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-u.top:s.offset.top-l.top)),i+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-i,d&&(s.size.height=s.size.width/s.aspectRatio,p=!1)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,d&&(s.size.width=s.size.height*s.aspectRatio,p=!1)),p||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,n=t.containerOffset,o=t.containerPosition,r=t.containerElement,s=e(t.helper),a=s.offset(),l=s.outerWidth()-t.sizeDiff.width,c=s.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(r.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(r.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,i){var n=e(this).resizable("instance"),o=n.options,r=n.originalSize,s=n.originalPosition,a={height:n.size.height-r.height||0,width:n.size.width-r.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0};e(o.alsoResize).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),o={},r=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(e,t){var i=(n[t]||0)+(a[t]||0);i&&i>=0&&(o[t]=i||null)}),t.css(o)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),n=i.options,o=i.size,r=i.originalSize,s=i.originalPosition,a=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,c=l[0]||1,d=l[1]||1,u=Math.round((o.width-r.width)/c)*c,h=Math.round((o.height-r.height)/d)*d,p=r.width+u,f=r.height+h,m=n.maxWidth&&n.maxWidth<p,g=n.maxHeight&&n.maxHeight<f,v=n.minWidth&&n.minWidth>p,b=n.minHeight&&n.minHeight>f;n.grid=l,v&&(p+=c),b&&(f+=d),m&&(p-=c),g&&(f-=d),/^(se|s|e)$/.test(a)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(a)?(i.size.width=p,i.size.height=f,i.position.top=s.top-h):/^(sw)$/.test(a)?(i.size.width=p,i.size.height=f,i.position.left=s.left-u):((0>=f-d||0>=p-c)&&(t=i._getPaddingPlusBorderDimensions(this)),f-d>0?(i.size.height=f,i.position.top=s.top-h):(f=d-t.height,i.size.height=f,i.position.top=s.top+r.height-f),p-c>0?(i.size.width=p,i.position.left=s.left-u):(p=c-t.width,i.size.width=p,i.position.left=s.left+r.width-p))}}),e.ui.resizable}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("jquery-ui/dialog",["jquery","./core","./widget","./button","./draggable","./mouse","./position","./resizable"],e):e(jQuery)}(function(e){return e.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,n=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(o){}this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var n=!1,o=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),r=Math.max.apply(null,o);return r>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),n=!0),n&&!i&&this._trigger("focus",t),n},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),o=i.filter(":last");t.target!==o[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){o.focus()}),t.preventDefault()):(this._delay(function(){n.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(i,function(i,n){var o,r;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),o=n.click,n.click=function(){o.apply(t.element[0],arguments)},r={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,e("<button></button>",n).button(r).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,o){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(o))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(o,r){var s=r.offset.left-i.document.scrollLeft(),a=r.offset.top-i.document.scrollTop();n.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(a>=0?"+":"")+a,of:i.window},e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",o,t(r))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,o=n.resizable,r=this.uiDialog.css("position"),s="string"==typeof o?o:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,o){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(o))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(o,r){var s=i.uiDialog.offset(),a=s.left-i.document.scrollLeft(),l=s.top-i.document.scrollTop();
n.height=i.uiDialog.height(),n.width=i.uiDialog.width(),n.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:i.window},e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",o,t(r))}}).css("position",r)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,n=!1,o={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(n=!0),e in i.resizableRelatedOptions&&(o[e]=t)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var i,n,o=this.uiDialog;"dialogClass"===e&&o.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=o.is(":data(ui-draggable)"),i&&!t&&o.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(n=o.is(":data(ui-resizable)"),n&&!t&&o.resizable("destroy"),n&&"string"==typeof t&&o.resizable("option","handles",t),n||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}})}),_wAMD.define("components/regions/Dialog",["jquery","backbone-all","underscore","jquery-ui/dialog"],function(e,t,i){return t.Marionette.Region.extend({defaults:{title:"Default Title",closeOnEscape:!0,draggable:!1,modal:!0,resizable:!1,position:{my:"center",at:"center",of:window}},constructor:function(){i.extend(this,t.Events)},el:"#dialog-region",dialogClass:"popup-modal",onShow:function(e){var t=i.extend({},e.dialog);this.view=e,this.dialogOptions=i.result(e,"dialog"),this.$el.dialog(this.getDefaultOptions(this.dialogOptions,e)),this.updateDialogCss(e),t.titleIcon&&this.createTitleIcon(t.titleIcon),this.namespace=".dialog-"+Math.floor(1e6*Math.random()+1),this.setupBindings(e),i.result(this.view.options,"onShow")},onClose:function(){i.result(this.view.options,"onClose"),this.stopListening(),e("body").off("keydown"+this.namespace),e("body").off("click"+this.namespace),e(window).off("resize"+this.namespace)},updateDialogCss:function(t){var i=this.$el.find(".dialog-body");if(i.length){var n=i.height(),o=i.parent().height(),r=e(window).height()-170;n>o&&r>o&&(r=o-30),this.$el.addClass("hasBody"),i.css({maxHeight:this.$el.outerHeight()-this.$el.find(".dialog-footer").outerHeight()})}else this.$el.removeClass("hasBody");if(t&&this.dialogOptions&&this.dialogOptions.size){var s=this.dialogOptions.size.split("x");if(2==s.length){var a=this.$el.parent(),l=s[0]+"px",c=s[1]+"px";a.css({width:l,minWidth:l,maxWidth:l,height:c,minHeight:c,maxHeight:c,left:(e(window).width()-s[0])/2,top:(e(window).height()-s[1])/2})}}t&&this.dialogOptions&&this.dialogOptions.enableScrolling&&($dialogContent=e(".ui-dialog-content div:first"),$dialogContent.css({"max-height":s[1]-e(".ui-dialog-titlebar").height(),"padding-bottom":0}))},setupBindings:function(t){this.listenTo(t,"render",function(){this.updateView(t),this.updateDialogCss(t)}),this.previousView?this.listenTo(t,"dialog:close",this.restoreMainView):this.listenTo(t,"dialog:close",this.closeDialog),this.listenTo(t,"dialog:update:css",this.updateDialogCss),this.$el.dialog("option",{close:i.bind(this.closeDialog,this)}),this.listenTo(t,"dialog:update:buttons",this.createFooter),this.listenTo(t,"dialog:update:title",this.updateDialogTitle),this.listenTo(t,"dialog:reposition",this.reposition),e("body").on("keydown"+this.namespace,i.bind(this.handleKeydown,this)),e("body").on("click"+this.namespace,".ui-widget-overlay",i.bind(this.handleBackgroundClick,this));var n=i.bind(this.reposition,this);e(window).on("resize"+this.namespace,i.throttle(n,100))},reposition:function(e){var t=this;t.$el.dialog({position:t.defaults.position})},closeDialog:function(){this.close(),this.$el.dialog("destroy")},cancelDialog:function(e){e&&e.preventDefault(),"function"==typeof this.view.dialogCancel?this.view.dialogCancel():(this.closeDialog(),this.previousView&&(this.previousView.close(),this.previousView=null))},handleKeydown:function(e){27==e.which&&this.$el.dialog("option","closeOnEscape")&&(e&&e.preventDefault(),this.cancelDialog(e))},handleBackgroundClick:function(){this.dialogOptions&&(this.dialogOptions.cancelAll||this.dialogOptions.cancelBg)&&this.cancelDialog()},getDefaultOptions:function(e,t){return this.updateView(t),e=e||{},e.buttons&&this.updateView(t),e.dialogClass=i.compact(["w-ui",e.dialogClass,this.dialogClass]).join(" "),e=i.defaults(e,this.defaults),e=i.omit(e,"buttons")},updateView:function(e){if(e.dialog){var t=i.isFunction(e.dialog)?e.dialog():e.dialog;(t.cancelX||t.cancelAll)&&this.createCancelX(e),t.cancelXThin&&this.createCancelXThin(e),t.buttons&&this.createFooter(t.buttons,e),e.bindUIElements()}},createCancelX:function(e){e.$el.find("a.close-x").length||(e.$el.prepend('<a autofocus href="#"></a>'),e.$el.prepend('<a href="#" class="close-x w-icon-delete"></a>'),e.events=e.events||{},e.events["click a.close-x"]=i.bind(this.cancelDialog,this),e.delegateEvents())},createCancelXThin:function(e){e.$el.find("a.close-x").length||(e.$el.prepend('<a autofocus href="#"></a>'),e.$el.prepend('<a href="#" class="close-x close-x-thin">&times;</a>'),e.events=e.events||{},e.events["click a.close-x"]=i.bind(this.cancelDialog,this),e.delegateEvents())},createFooter:function(t,i){var n,i=i||this.currentView;n=this.$el.find(".dialog-footer").length?this.$el.find(".dialog-footer").empty():e('<div class="dialog-footer" />'),n=this.createButtonFooter(n,t),n.append(i.$el.find(".footer")),i.$el.append(n)},createButtonFooter:function(e,t){return i.each(t,function(t){t.group&&t.buttons?e.append(this.createButtonGroup(t)):(t.html||t.text)&&e.append(this.createButton(t))},this),e},createButtonGroup:function(t){var n=e('<div class="'+t.group+'"/>');return i.each(t.buttons,function(e){n.append(this.createButton(e))},this),n},createButton:function(t){var i=t.type||"button",n=e(document.createElement(i));return t.text?n.text(t.text):t.html&&n.html(t.html),n.addClass(t.className||""),n},createTitleIcon:function(t){var i=e("<span/>",{"class":"icon"}).addClass(t);this.$el.dialog("widget").find(".ui-dialog-title").append(i)},updateDialogTitle:function(e){this.$el.dialog("option","title",e)},showSecondaryDialog:function(e,n){this.ensureEl();var o=this.$el.parent(),r=e.isClosed||i.isUndefined(e.$el),s=e!==this.currentView;if(n=null!==n&&"object"==typeof n?n:{},s)if(1==this.$el.find(">div").length){var a=["width","minWidth","maxWidth","height","minHeight","maxHeight","left","top"],l={};i.each(a,function(e){l[e]=o.css(e)}),this.previousCss=l,this.previousView=this.currentView,this.$el.find(">div").hide()}else this.close();e.render(),(s||r)&&this.$el.append(e.el),this.currentView=e,n.silentReplace||(t.Marionette.triggerMethod.call(this,"show",e),t.Marionette.triggerMethod.call(e,"show"))},restoreMainView:function(e){e=null!==e&&"object"==typeof e?e:{},this.previousView&&(this.currentView.close(),this.$el.find(">div").show(),e.silentReplace||(t.Marionette.triggerMethod.call(this,"show",this.previousView),t.Marionette.triggerMethod.call(this.previousView,"reloadDialog"),t.Marionette.triggerMethod.call(this.previousView,"show")),this.$el.parent().css(this.previousCss),this.currentView=this.previousView,this.previousView=null)}})}),function(e){var t="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof _wAMD.define&&_wAMD.define.amd)_wAMD.define("analytics-js/js/sender",["underscore"],function(i){return e(t,i)});else if("undefined"!=typeof exports){var i=require("underscore");exports=e(t,i)}else t._W=t._W||{},t._W.Sender=e(t,t._)}(function(e,t){var i={GALib:"//www.google-analytics.com/analytics.js",SPProdLib:"//cdn2.editmysite.com/js/wsnbn/snowday261.js",SPDevLib:"//d1fc8wv8zag5ca.cloudfront.net/2.6.1/sp.js",SPProdEndpoint:"ec.weebly.com",SPDevEndpoint:"52.24.132.34:8080",GATrackerName:"_w",SPTrackerName:"_w"},n=function(e){t.extend(this,i,{GAID:null,SPID:null,uidFn:function(){return null},contextFn:function(){return null},updateUIDForAction:function(){},cookieDomain:document.location.hostname,GAColumnMapping:{},dontRecord:!1},e),this.gaCommerceLoaded=!1,this.HasUID=!1,this.lastPageView=null,this.trackers={GA:"ga",SP:"_wsp"},this.initialize()};return t.extend(n.prototype,{trackEvent:function(t,i,n,o){o=o||{};var r=o.contexts||{};o.model&&(r.context_changeset=this.modelChangelog(o.model)),r=this.buildContext(r),this.updateUIDForAction(i),this.identify(),this.dontRecord||(this.trackers.GA&&e[this.trackers.GA](this.GATrackerName+".send","event",t,i,n,r.GA),this.trackers.SP&&e[this.trackers.SP]("trackStructEvent:"+this.SPTrackerName,t,i,n,null,null,r.SP))},pageView:function(t,i,n){this.identify(),n=this.buildContext(n),i=i||document.title;var o=t||e.location.pathname+e.location.hash;this.lastPageView!==o&&(this.dontRecord||(this.trackers.GA&&(t&&(n.GA.page=t),e[this.trackers.GA](this.GATrackerName+".send","pageview",n.GA)),this.trackers.SP&&(t&&e[this.trackers.SP]("setCustomUrl:"+this.SPTrackerName,t),e[this.trackers.SP]("trackPageView:"+this.SPTrackerName,i,n.SP)),this.lastPageView=o))},trackPurchase:function(i,n){!this.gaCommerceLoaded&&this.trackers.GA&&(e[this.trackers.GA](this.GATrackerName+".require","ec"),this.gaCommerceLoaded=!0),this.identify();var o=this.buildContext();this.dontRecord||(this.trackers.GA&&(e[this.trackers.GA](this.GATrackerName+".set","&cu",i.currency),t.each(n,function(t){e[this.trackers.GA](this.GATrackerName+".ec:addProduct",{id:t.id,name:t.name,price:t.price,quantity:t.quantity||1})},this),e[this.trackers.GA](this.GATrackerName+".ec:setAction","purchase",{id:i.id,revenue:i.total,tax:i.tax}),e[this.trackers.GA](this.GATrackerName+".send","event","billing","purchase")),this.trackers.SP&&(e[this.trackers.SP]("addTrans:"+this.SPTrackerName,i.id,null,i.total,i.shipping||"0.00",i.city||null,i.state||null,i.country,i.currency,o.SP),t.each(n,function(t){e[this.trackers.SP]("addItem:"+this.SPTrackerName,i.id,t.id,t.name,null,t.price,t.quantity||1)},this),e[this.trackers.SP]("trackTrans:"+this.SPTrackerName)))},buildContext:function(e){var i=this.contextFn()||{};t.isObject(e)&&(i=t.extendOwn({},i,e));var n=t.flatten(t.values(i),!0),o={};return t.each(i,function(e,i){t.isObject(e)&&t.each(e.data,function(e,n){n=i+":"+n,t.has(this.GAColumnMapping,n)&&(n=this.GAColumnMapping[n],o[n]=e)},this)},this),{GA:o,SP:n}},initialize:function(){var i=function(e){var t=document.createElement("script");t.async=1,t.src=e;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)};if(this.GAID){var n=e.GoogleAnalyticsObject=e.GoogleAnalyticsObject||this.trackers.GA;this.trackers.GA=n,void 0===e[n]&&(e[n]=function(){(e[n].q=e[n].q||[]).push(arguments)},e[n].l=(new Date).getTime(),i(this.GALib)),e[this.trackers.GA]("create",{trackingId:this.GAID,name:this.GATrackerName,cookieDomain:this.cookieDomain})}else this.trackers.GA=null;if(this.SPID){var o=this.useDebugEndpoint?this.SPDevEndpoint:this.SPProdEndpoint,r=this.useDebugEndpoint?this.SPDevLib:this.SPProdLib;if(t.isFunction(e[this.trackers.SP]))e[this.trackers.SP]("newTracker",this.SPTrackerName,o,{appId:this.SPID,cookieDomain:this.cookieDomain,post:!0,contexts:{webPage:!0,gaCookies:!0}});else{var s=this.trackers.SP;e.GlobalSnowplowNamespace=e.GlobalSnowplowNamespace||[],e.GlobalSnowplowNamespace.push(this.trackers.SP),e[s]=function(){(e[s].q=e[s].q||[]).push(arguments)},e[this.trackers.SP]("newTracker",this.SPTrackerName,o,{appId:this.SPID,cookieDomain:this.cookieDomain,post:!0,contexts:{webPage:!0,gaCookies:!0}}),i(r)}}else this.trackers.SP=null},identify:function(t){(!this.HasUID||t)&&(t||(t=this.uidFn()),t&&(this.HasUID=!0,this.trackers.GA&&e[this.trackers.GA](this.GATrackerName+".set","&uid",t),this.trackers.SP&&e[this.trackers.SP]("setUserId:"+this.SPTrackerName,t)))},wrapData:function(e,t,i){return{schema:"iglu:com.weebly/"+e+"/jsonschema/"+t,data:i}},modelChangelog:function(e){var i=e.changedAttributes(),n=t.map(i,function(t,i){var n=e.previous(i);return""===t?t=null:("string"==typeof t||t instanceof String)&&(t=t.replace(/\0/g,""),t=t.replace(/\\u0000/g,"")),""===n?n=null:("string"==typeof n||n instanceof String)&&(n=n.replace(/\0/g,""),n=n.replace(/\\u0000/g,"")),t===n?null:this.wrapData("context_changeset","2-0-0",{key:i,to:t,from:n})},this);return n=t.filter(n,t.isObject)}}),n}),_wAMD.define("analytics/Tracking",["jquery","underscore","analytics-js/js/sender"],function(e,t,i){if(window._W&&window._W.Tracking)return window._W.Tracking;var n,o={"context_base:mode":"dimension1","context_base:site_id":"dimension2","context_site:page_id":"dimension3"},r="1-0-0",s=["signup_ok"],a=function(e,t){var i,n=t.length;for(i=0;"object"==typeof e&&n>i;i++)e=e[t[i]];return e},l=function(e){for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];(null===i||void 0===i||"number"==typeof i&&isNaN(i))&&delete e[t]}},c=document.location.hostname;(n=c.match(/\.weebly\.(net|com)$/))&&(c=n[0]);var d=function(e){return document.cookie.length>0&&(c_start=document.cookie.indexOf(e+"="),-1!=c_start)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""},u=-1!=document.cookie.indexOf("force-automated-segment"),h=new i({SPID:"w1",GAColumnMapping:o,cookieDoomain:c,dontRecord:u,uidFn:function(){var e=null;if(_W.Permissions instanceof Object&&(e=_W.Permissions.true_user_id),!e&&window._wctx instanceof Object&&(e=window._wctx.user_id),e||(e=window.userID),e||(e=d("wuid")),!e){var t=d("srv_domainuserid");t&&(e=t)}return e},trackLegacyPageView:function(){for(var e=["send","pageview"],t=0;t<arguments.length;t++)e.push(arguments[t]);window.ga.apply(window,e)},contextFn:function(){var e={},i=this.wrapData("context_base","1-0-1",{domain:document.domain,language:a(_W,["userLang"]),mode:"unknown",location:window.location.pathname,campaign:d("campaign")});if(e.context_base=i,_W.LANDING)i.data.mode="landing";else if(_W.Home instanceof Object)i.data.mode="userhome";else if(_W.EDITOR){i.data.mode="editor";var n=null;_W.Location instanceof Object&&(n=_W.Location.custom_domain?_W.Location.custom_domain:_W.Location.weebly_subdomain+".weebly.com");var o=this.wrapData("context_site","1-0-2",{site_id:(window.currentSite||a(_W,["initMainData","currentSite"]))+"",site_level:a(_W,["Restrictions","level"]),published:!!a(_W,["Restrictions","published"]),is_trial:!!a(_W,["Restrictions","is_trial"]),domain:n,theme:window.currentTheme||a(_W,["initMainData","currentTheme"]),source:window.source,owner_id:window.com_userID?parseInt(window.com_userID,10):null});e.context_site=o;var s=_W.pageContext||{};try{if(s.pageID||a(_W,["initMainData","pageid"])){var c=this.wrapData("context_site_page","1-0-0",{page_id:s.pageID||a(_W,["initMainData","pageid",1]),site_id:window.currentSite||a(_W,["initMainData","currentSite"]),kind:s.kind});e.context_site_page=c}}catch(u){}}else if(window._wctx instanceof Object){i.data.mode="purchasepage";var h={site_id:window._wctx.site_id?window._wctx.site_id+"":null,page_state:window._wctx.page_state,service_id:window._wctx.service_id,user_service_id:window._wctx.user_service_id,refer:window._wctx.refer,type:window._wctx.type,required_level:parseInt(window._wctx.desired_level),selected_level:parseInt(window._wctx.selected_level),recurring_period:parseInt(window._wctx.recurring_period),restriction_id:window._wctx.restriction_id,referer_cookie:d("referer")};l(h),e.context_purchasepage=this.wrapData("context_purchasepage","1-0-0",h)}else if(window.Bootstrap instanceof Object){i.data.mode="onboarding";var o=this.wrapData("context_site","1-0-0",{site_id:a(window.Bootstrap,["siteId"])+"",site_level:a(_W,["Restrictions","level"]),published:!1,is_trial:!1});e.context_site=o}var p=[];return t.isObject(window.abSegments)&&t.each(window.abSegments,function(e,t){p.push(this.wrapData("context_ab_segment",r,{test_id:t,segment:e}))},this),t.size(p)>0&&(e.context_ab=p),e},updateUIDForAction:function(e){e&&t.each(s,function(t){t==e&&(this.HasUID=!1)},this)}});return window._W=window._W||{},window._W.Tracking=h,h}),_wAMD.define("editor-site-shared/ui/EventManager",[],function(){function e(){this.events={},this.logging=!1}return e.prototype={fireEvent:function(e){var t=this.events[e];if(this.log(e,"firing",[t]),!t)return this;var i=Array.from(arguments);i.shift();for(var n=t.length-1;n>=0;n--){var o=t[n],r=o.$event;this.log(e,"calling",[o,r]),o.apply(r.bind,i.concat(r.args)),r.once&&this.removeListener(e,o)}return this},addListener:function(e,t){if("function"==typeof t&&(t={func:t}),!t||"function"!=typeof t.func)return this;this.log(e,"adding listener",[e,t]);var i={};i.args=Array.from(t.args)||[],i.bind=t.bind||null,i.once=t.once||!1;var n=t.func;return n.$event=i,t.removeOn&&(n=this.wrapListenerRemoval(e,n,t.removeOn)),this.events[e]=this.events[e]||[],this.events[e].push(n),this},removeListener:function(e,t){this.log(e,"removing listener",[t]);var i=this.events[e];if(!i)return this;var n=i.indexOf(t);if(-1==n)return this;var t=i[n],o=t.$event;return o.removeOn&&this.removeListener(o.removeOn[0],o.removeOn[1]),i.splice(n,1),this},wrapListenerRemoval:function(e,t,i){this.log(e,"wrapping removal",[t,i]);var n=this,o=function(){n.removeListener(e,t)};return this.addListener(i,o),t.$event.removeOn=[i,o],t},log:function(e,t,i){this.logging&&console.log(e+": "+t,i||[])}},e}),_wAMD.define("editor-site-shared/ui/Events",["editor-site-shared/ui/EventManager"],function(e){var t=new e;return t}),_wAMD.define("editor-site-shared/ui/Pages",["w-global","backbone-all","editor-site-shared/relay","editor-site-shared/ui/Events"],function(e,t,i,n){window.noJump=0;var o,r={Version:"0.5",Author:"David Rusenko",Company:"Weebly, Inc.",openPages:new Array("main"),currentNavPage:"load",optConfirmLoad:0,optAnimations:1,history:[],lastPage:"",queue:[],load:function(){},pageConstructor:{main:{}},pageDestructor:{main:{}},pageWindows:{main:["main"]},currentVar1:"empty",currentVar2:"empty",currentVar3:"empty",currentVar4:"empty",currentVar5:"empty",go:function(){var i=arguments,n=function(){this._go.apply(this,i),this.queue.forEach(function(e){this._go.apply(this,e)},this)}.bind(this);e.Commerce&&window.editorApp&&editorApp.isStorePanelOpen?t.preventClose(n):n(),this.clearQueue()},setQueue:function(){this.queue.push(Array.prototype.slice.call(arguments))},clearQueue:function(){this.queue=[]},removeQueue:function(){var e=Array.prototype.slice.call(arguments),t=0;e.forEach(function(e){this.queue.forEach(function(i,n){t=i.indexOf(e),t>-1&&this.goDestination.splice(n,1)},this)},this)},_go:function(t,o,r,s,a,l){if(window.editorApp&&editorApp.vent.trigger("editor:pages:go",arguments),this.updateHistory(t),e.Elements&&i.execute("editor:elements:unselect"),!e.BlogEditor||e.BlogEditor.tryPageSwitch(arguments)){if("saveBlogPost"!==t&&e.BlogEditor&&e.BlogEditor.isEditing&&e.mobile.isMobileEditor())return e.mobile.isMobileEditor(!1),void this.go("mobileView");var c="undefined"==typeof o||""==o||"undefined"==o?0:1,d="undefined"==typeof r||""==r||"undefined"==r?0:1,u="undefined"==typeof s||""==s||"undefined"==s?0:1,h="undefined"==typeof a||""==a||"undefined"==a?0:1,p="undefined"==typeof l||""==l||"undefined"==l?0:1;if(t!=this.currentNavPage||o!=this.currentVar1&&c||r!=this.currentVar2&&d||s!=this.currentVar3&&u||a!=this.currentVar4&&h||l!=this.currentVar5&&p){this.handleMain(t),this.closeAll(t),i.execute("closeCurrentSpotlight"),1==window.noJump?window.noJump=0:window.scrollTo(0,0);var f=this.pageConstructor[t];f&&"main"!=t&&(f.element&&this.showElement(f.element),f.go&&f.go(o,r,s,a,l)),window.litePageChange||this.optConfirmLoad||this.confirmLoad(t,o,r,s,a,l),this.currentNavPage=t,"undefined"==typeof o||""==o||"undefined"==o?this.currentVar1="empty":this.currentVar1=o,"undefined"==typeof r||""==r||"undefined"==r?this.currentVar2="empty":this.currentVar2=r,"undefined"==typeof s||""==r||"undefined"==s?this.currentVar3="empty":this.currentVar3=s,"undefined"==typeof a||""==r||"undefined"==a?this.currentVar4="empty":this.currentVar4=a,"undefined"==typeof l||""==r||"undefined"==l?this.currentVar5="empty":this.currentVar5=l,n.fireEvent("navPageChange",t)}-1==this.openPages.indexOf(t)&&this.openPages.push(t)}},showElement:function(e,t){this.optAnimations?setTimeout("Effect.Appear('"+e+"');",1e3):Element.show(e)},handleMain:function(e){if(this.pageWindows[e].indexOf("main")>-1)this.pageConstructor.main&&(this.pageConstructor.main.element&&(this.optAnimations?setTimeout("Effect.Fade('"+this.pageConstructor.main.element+"')",1e3):Element.hide(this.pageConstructor.main.element)),this.pageConstructor.main.go&&this.pageConstructor.main.go()),-1==this.openPages.indexOf("main")&&this.openPages.push("main");else{if(this.pageDestructor.main){if(this.pageDestructor.main.element){var t="100%";Element.setStyle(this.pageDestructor.main.element,{height:t}),this.optAnimations?Effect.Appear(this.pageDestructor.main.element):Element.show(this.pageDestructor.main.element)}this.pageDestructor.main.go&&this.pageDestructor.main.go()}-1==this.openPages.indexOf("main")&&this.openPages.push("main")}"main"==e&&"visible"==$("grayedOut").style.visibility&&Element.hide("grayedOut")},confirmLoad:function(e,t,i,n,o,r){-1==this.openPages.indexOf(e)&&this.openPages.push(e),"function"==typeof t&&(t=""),_goPageHistory("page="+e+"&1="+encodeURIComponent(t)+"&2="+encodeURIComponent(i)+"&3="+encodeURIComponent(n)+"&4="+encodeURIComponent(o)+"&5="+encodeURIComponent(r))},closeAll:function(e){for(j=this.openPages.length-1;j>=0;j--){var t=this.pageWindows[e].indexOf(this.openPages[j]);if(-1==t&&"main"!=this.openPages[j]){var i=this.pageDestructor[this.openPages[j]];i&&(i.element&&(this.optAnimations?Effect.Fade($(i.element)):Element.hide($(i.element))),i.go&&i.go()),this.openPages.splice(j,1)}}},returnToEditor:function(){this.openPages.indexOf("goBlogPost")>-1?this.go("goBlogPost"):this.go("main")},updateHistory:function(e){e!=this.lastPage&&(this.history.push(e),this.history.size()>10&&this.history.shift()),this.lastPage=e},goToPreviousPage:function(){if(this.history.size()>1){var e=(this.history.pop(),this.history.pop());this.go(e)}else this.go("editMenu")}};return window._goPageHistory=function(e){var t="/weebly/goPage.php?"+e;o?o.contentWindow.location.href=t:(o=new Element("iframe",{style:"height:0;width:0;border:0;overflow:hidden;position:absolute;top:0px;left:0px;",frameBorder:0}),$(document.body).insert(o),o.src=t)},window.Pages=r,r}),_wAMD.define("editor/app",["underscore","w-global","get-bootstrap","backbone-all","jquery","editor-site-shared/relay","editor-site-shared/ui/context","util/LoadingIndicator","components/views/ConfirmView","components/regions/Dialog","analytics/Tracking","raven-js","editor-site-shared/ui/Pages"],function(e,t,i,n,o,r,s,a,l,c,d,u,h){var p=new n.Marionette.Application,f=!1;return p.addRegions({nav:"#w-editor-top",pmRegion:"#w-page-manager",dialogRegion:c,domainDialog:"#domain-dialog",userNoticeRegion:"#user-notice"}),p.navigate=function(e,t){t=t||{},f&&n.history.navigate(e,t)},p.getCurrentRoute=function(){return f?n.history.fragment:""},p.loading={start:o.noop,stop:o.noop},p.on("start",function(){p.bootstrap=i("editor/app"),p.bootstrap?p.site=new n.Model(p.bootstrap.site):p.site=null,Weebly.themeCache.insert(p.bootstrap.currentThemeObject.theme,p.bootstrap.currentThemeObject.data),s.inEditorContext()&&(p.loading=new a({delay:500,debug:window.W_DEBUG,defaultText:t.utl("javascript.editor.app_5"),timeout:3e4}),r.commands.setHandlers({"loading:start":function(){p.loading.start.apply(p.loading,arguments)},"loading:stop":function(){p.loading.stop.apply(p.loading,arguments)}})),d.pageView(),o(window).on("resize",e.throttle(p.utils.updateDimensions,100));var l;try{l=window.self!==window.top}catch(c){l=!0}l&&u.captureMessage("Editor was loaded in an iframe.",{level:"info",logger:"dragons",extra:{referrer:document.referrer}})}),p.preventClose=function(e,i){p.dialogRegion.showSecondaryDialog(new l({message:t.utl("javascript.editor.app_1"),title:t.utl("javascript.editor.app_2"),cancelText:t.utl("javascript.editor.app_3"),confirmText:t.utl("javascript.editor.app_4"),callback:function(t){t?e():i()}}))},p.on("initialize:after",function(e){f&&(n.history.start(),""===p.getCurrentRoute()&&p.vent.trigger("build:desktop")),p.vent.triggerCascade=function(e){for(var t=e?e.split(":"):[],i="",n=Array.prototype.slice.apply(arguments),o=0,r=t.length;r>o;o++)i=i?i+":"+t[o]:t[o],n[0]=i,p.vent.trigger.apply(p.vent,n)},p.vent.on({"editor:toolbar:collapse":function(){p.vent.trigger("editor:toolbar:toggleCollapse",!0)},"editor:toolbar:uncollapse":function(){p.vent.trigger("editor:toolbar:toggleCollapse",!1)},"editor:toolbar:toggleCollapse":function(e){o(document.body).toggleClass("editor-collapsed",e)},"editor:toolbar:show":function(){p.vent.trigger("editor:toolbar:toggle",!0)},"editor:toolbar:hide":function(){p.vent.trigger("editor:toolbar:toggle",!1)},"editor:toolbar:toggle":function(e){o(document.body).toggleClass("editor-revealed",e)},"editor:change:siteLanguage":function(e){r.execute("editor:change:siteLanguage",e),o.getScript(t.getSiteLanguageURL(e)).done(function(){p.vent.trigger("settings:reload:cookie")})},"editor:publishBlockers:display":function(e){p.billing.displayBlockerDialog(e)}}),p.reqres.setHandlers({"editor:toolbar:isCollapsed":function(){return/editor-collapsed/.test(document.body.className)},"editor:toolbar:isRevealed":function(){return/editor-revealed/.test(document.body.className)},"editor:toolbar:isHidden":function(){var e=p.reqres;return e.request("editor:toolbar:isCollapsed")&&e.request("editor:toolbar:isRevealed")}})}),r.commands.setHandlers({"editor:screen:change":function(){h.go.apply(h,arguments)},"user:doEvent":function(e){Weebly.Editor.RPC.User.doEvent(e),window.userEvents[e]=1}}),r.reqres.setHandlers({"editor:hostname:get":function(){return window.location.host},"user:hasDoneEvent":function(e){return 1==window.userEvents[e]}}),window.editorApp=p,window.inEditor=function(){return!0},p}),_wAMD.define("editor-site-shared/eventSync",["underscore"],function(e){return function(t,i){e.each(i,function(i){var n=i.events,o=i.from,r=i.to;t.listenTo(o,e.reduce(n,function(t,i){return t[i]=function(){var t=e.toArray(arguments);t.unshift(i),r.trigger.apply(r,t)},t},{}))})}}),_wAMD.define("config",["require","exports","module"],function(e,t,i){return{chromeless:!1,content_field_js_render:!1,defaultPlaceholderText:_W.stl("javascript.editor.config_1"),areaDefaultPlaceholderText:{phone:_W.stl("javascript.editor.config_2"),headline:_W.stl("javascript.editor.config_3"),"headline-paragraph":_W.stl("javascript.editor.config_4")}}}),_wAMD.define("editor-site-shared/design/Font",["underscore","w-global","config"],function(e,t,i){function n(e,t){this.family=e,this._variants=t}function o(e){var t=r(e);t&&t.load()}function r(e){var t=s(e,n.data.google_fonts);if(t)t.source="google";else{var t=s(e,n.data.standalone_fonts);if(t){var i=n.data.system_families[t.family];i&&(t.systemFamily=i)}}return t}function s(e,t){e=e.replace(/(^['"\s]*|['"\s]*$)/g,""),"Comic Sans MS"===e&&(e="Comic Sans");var i,o=t[e];if(o)i=e;else{e=e.toLowerCase();for(var r in t)"string"==typeof r&&r.toLowerCase()==e&&(i=r,o=t[r])}return i?new n(i,o):void 0}var a={};return n.prototype.hasRegular=function(){return 1&this._variants},n.prototype.hasBold=function(){return 2&this._variants},n.prototype.hasItalic=function(){return 4&this._variants},n.prototype.hasBoldItalic=function(){return 8&this._variants},n.prototype.hasLight=function(){return 16&this._variants},n.prototype.hasLightItalic=function(){return 32&this._variants},n.prototype.hasUltraLight=function(){return 64&this._variants},n.prototype.hasUltraLightItalic=function(){return 128&this._variants},n.prototype.getLinkTag=function(){if(!this.systemFamily){var e="";if(n.data.familyCSSBaseURL)e=n.data.familyCSSBaseURL+escape(this.family);else if(i.chromeless&&0!=window.currentSite)e="x-com-weebly-font-css:///"+window.currentSite+"/"+escape(this.family);else if("google"==this.source){var t=[];this.hasRegular()&&t.push("400"),this.hasLight()&&t.push("300"),this.hasLightItalic()&&t.push("300italic"),this.hasUltraLight()&&t.push("200"),this.hasUltraLightItalic()&&t.push("200italic"),this.hasBold()&&t.push("700"),this.hasItalic()&&t.push("400italic"),this.hasBoldItalic()&&t.push("700italic");var o="";(t.length>1||"400"!=t[0])&&(o=":"+t.join(",")),e="https://fonts.googleapis.com/css?family="+escape(this.family)+o}else e="//"+ASSETS_BASE+"/fonts/"+this.family.replace(/ /g,"_")+"/font.css?2";return"<link href='"+e+"' rel='stylesheet' type='text/css' />"}},n.prototype.load=function(){if(!a[this.family]){a[this.family]=!0;var e=this.getLinkTag();if(e){var t=new Element("div").update(e);$$("head")[0].insert(t.down())}}},n.loadFont=o,n.getFont=r,t.Font=e.extend(n,t.Font),t.Font}),_wAMD.define("site/editor/relay-constants",[],function(){return{EVENTS:{DOCUMENT_READY:"documentReady",DOCUMENT_RESIZED:"documentSizeChanged",AREA_TEXT_EDITING_START:"startedEditingAreaText",AREA_TEXT_EDITING_END:"finishedEditingAreaText",TEXT_EDITING_START:"startedEditingText",TEXT_EDITING_END:"finishedEditingText",TEXT_EDITING_TOOLBAR_UPDATE:"updateToolbarStates",SUBNAV_SHOWN:"navShown",SUBNAV_HIDDEN:"navHidden",NAV_CLICKED:"navClicked",NAV_PREVIOUS_PAGE_CLICKED:"navPreviousPageClicked",NAV_NEXT_PAGE_CLICKED:"navNextPageClicked",PAGE_RENDER_FAIL:"renderPageFailed",
SITE_INIT_FAIL:"initializeEditorFailed",EDITING_POST_TITLE:"startedEditingPostTitle",EDITED_POST_TITLE:"finishedEditingPostTitle",INITIALIZE_BLOG_POST_EDITOR_FAILED:"initializeBlogPostEditorFailed"},COMMANDS:{},REQUESTS:{}}}),_wAMD.define("site/editor/app",["jquery","underscore","backbone-all","editor/app","editor-site-shared/relay","editor-site-shared/eventSync","editor-site-shared/design/Font","site/editor/relay-constants","editor-site-shared/ui/Pages"],function(e,t,i,n,o,r,s,a,l){function c(){o.trigger("frame:overlays:hide")}function d(){if(!window.isDraggingElement){var e=p.outerHeight(!0),t=h.outerHeight(!0);(v||e!=m||t!=g)&&(v=!1,m=e,g=t,o.trigger(a.EVENTS.DOCUMENT_RESIZED),u.vent.trigger("editor:elements:changed"))}}var u=new i.Marionette.Application;u.addRegions({elementSettings:"#elementSettingsWrapper",sectionDialog:"#section-dialogs"});var h,p,f=!1,m=0,g=0,v=!1;return u.on("start",function(){p=e("html"),h=e(document),r(u,[{from:h,to:u.vent,events:["click","keydown","mouseup","mousedown","selectstart","selectionchange","keypress","keyup"]},{from:u.vent,to:n.vent,events:["editor:elements:changed"]},{from:u.vent,to:o,events:["page:startRender"]}]),u.listenTo(u.vent,{navClicked:function(e){o.trigger(a.EVENTS.NAV_CLICKED,e),o.request("page:navigate:go",e,1)},"editor:elements:changed":function(){f&&o.trigger("editor:elements:changed")},pageRendered:function(){f=!0},forceDocumentSizeChange:function(){v=!0}}),setInterval(d,500),o.commands.setHandlers({loadFont:function(e){t.each(e,function(e){s.loadFont(e)})},"remoteAccount:update":function(e,t){window.remoteAccounts[e]={remoteSite:e,remoteId:t}},"editor:change:siteLanguage":function(t){e.getScript(_W.getSiteLanguageURL(t))}}),l.go=function(){var e=Array.prototype.slice.call(arguments);e.unshift("editor:screen:change"),o.execute.apply(o,e)},h.on("click",c)}).on("stop",function(){o.commands.removeHandlers(["loadFont","remoteAccount:update"]),h.off("click",c)}),u}),_wAMD.define("util/general-utils",[],function(){var e={htmlDecode:function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},isIE:function(){return/(MSIE|Trident)/.test(navigator.userAgent)},isChrome:function(){return/(Chrome)/.test(navigator.userAgent)},getURLParameter:function(e,t){for(var i=t||window.location.search.substring(1),n=i.split("&"),o=0;o<n.length;o++){var r=n[o].split("=");if(r[0]==e)return decodeURIComponent(r[1])}return""},splitName:function(e){var t;return/^[^\s]*\s[^\s]*\s?$/i.test(e)?e.split(" "):(t=e.match(/^([^\s]*\s[^\s]\.?)\s(.*)\s?$/i))?t.slice(1):(t=e.match(/^(.*)\s([^\s]*)\s(jr|sr|ii|iii|iv|v|vi|vii|viii|ix|x)\.?\s?$/i))?t.slice(1):(t=e.match(/^([^\s]*\s[^\s]*)\s(.*)\s?$/i))?t.slice(1):[e,""]},isValidEmail:function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},numberWithCommas:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},getSiteDomain:function(){var e=!1;return Weebly.Location.custom_domain?e=Weebly.Location.custom_domain:Weebly.Location.weebly_subdomain&&(e=Weebly.Location.weebly_subdomain+".weebly.com"),e},generateTimeInterval:function(e,t){var i,n,o=[],e=e||12,t=t||30;for(i=0;23>=i;i++)for(n=0;60>n;n+=t){var r=("00"+n).slice(-2),s=i,a="";12===e?(a="am",0===i?s=12:12===i?(s=i,a="pm"):i>12&&(s=i-e,a="pm")):s=("00"+i).slice(-2),o.push(s+":"+r+" "+a)}return o},hasValidUrl:function(e){return/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(e)},isCyclic:function(e){try{JSON.stringify(e,function(e,t){return"object"==typeof t?t:void 0})}catch(t){if(t instanceof TypeError)return!0;throw t}return!1},setDropEffect:function(e){var t;e.originalEvent&&(e=e.originalEvent),e.dataTransfer&&(t=-1!==["move","linkMove"].indexOf(e.dataTransfer.effectAllowed),e.dataTransfer.dropEffect=t?"move":"copy")},getCookie:function(e){var t="; "+document.cookie,i=t.split("; "+e+"=");return 2==i.length?unescape(i.pop().split(";").shift()):null},roundNumber:function(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},getNestedValue:function(e,t,i){for(var n=e,o=0;o<t.length;o++){var r=t[o];if(!(r in n))return i;n=n[r]}return n},isProtocolSecure:function(){return"https:"==document.location.protocol},mapObjectValues:function(e,t){for(var i=[e];i.length;){var n=i[0],o=Object.keys(n);o.forEach(function(e){_.isObject(n[e])?i.push(n[e]):(n[e]=t(n[e]),_.isUndefined(n[e])&&delete n[e])}),i.shift()}return e}};return e}),_wAMD.define("editor-site-shared/BridgeConstructor",["jquery","underscore","raven-js","util/general-utils"],function(e,t,i,n){function o(i){switch(typeof i){case"boolean":case"undefined":case"number":case"string":case"PixelArray":case"ImageData":case"Blob":case"File":return i;case"function":return window.W_DEBUG&&console.warn("Removed function from postMessage message:",i),null}return t.isNull(i)?i:t.isArray(i)?t.map(i,o):e.isPlainObject(i)?i.overrideMimeType&&i.readyState&&i.status?null:(window.W_DEBUG&&n.isCyclic(i)&&console.warn("Tried to clone cyclic object in postMessage",i),t.chain(i).clone().each(r).value()):(window.W_DEBUG&&console.warn("Removed the following object from postMessage message:",i),null)}function r(e,t,i){i[t]=o(e)}var s;try{s=!0,window.postMessage({toString:function(){s=!1}},"*")}catch(a){}var l=function(e){this.targetOrigin=e};l.prototype.outgoingQueue=[],l.prototype.outgoingWindow=null,l.prototype.outgoingChannel=null,l.prototype.outgoingDeferreds={},l.prototype.incomingChannel=null;var c=1;return l.prototype.runOutgoingQueue=function(){for(var e,t=this.outgoingQueue.length,i=0;t>i;i++)e=this.outgoingQueue.shift(),this.postMessage.apply(this,e)},l.prototype.setReqResState=function(e,t){var i=this.outgoingDeferreds[t.uid];i&&(i[e].apply(i,t.value),delete this.outgoingDeferreds[t.uid])},l.prototype.postMessage=function(e,i,n,r){var a={messenger:e,name:i,args:t.map(n,o),uid:c++};return this.outgoingWindow.postMessage&&this.outgoingReady?(r&&(this.outgoingDeferreds[a.uid]=r),s||(a=JSON.stringify(a)),void this.outgoingWindow.postMessage(a,this.targetOrigin)):void this.outgoingQueue.push(t.toArray(arguments))},l.prototype.listener=function(n){var o=this;if(n.origin===o.targetOrigin&&n.source===o.outgoingWindow){var r=n.data;s||(r=JSON.parse(r));var a=r.messenger,l=r.name,c=r.args,d=r.uid;if(a&&l){var u;switch(a){case"vent":u=o.incomingChannel.vent.trigger;break;case"commands":u=o.incomingChannel.commands.execute;break;case"reqres":u=o.incomingChannel.reqres.request;break;default:return}c||(c=[]),c.unshift(l);try{var h=u.apply(o.incomingChannel[a],c);"reqres"===a&&e.when(h).done(function(){var e=t.toArray(arguments);o.outgoingChannel.commands.execute("reqres:resolve",{value:e,uid:d})}).fail(function(){var e=t.toArray(arguments);o.outgoingChannel.commands.execute("reqres:reject",{value:e,uid:d})})}catch(p){i.captureException(p),console.error(p.stack),"reqres"===a&&o.outgoingChannel.commands.execute("reqres:reject",{value:[p.message],uid:d})}}}},l.prototype.readyPing=null,l.prototype.outgoingReady=!1,l.prototype.numPings=0,l.prototype.maxPings=120,l.prototype.pingInterval=500,l.prototype.setup=function(n,o,r){var a=this,l=e.Deferred();a.incomingChannel=n,a.incomingChannel.commands.setHandlers({"reqres:resolve":t.partial(a.setReqResState.bind(a),"resolve"),"reqres:reject":t.partial(a.setReqResState.bind(a),"reject")}),a.incomingChannel.vent.once("ready",function(){a.outgoingReady=!0}),a.boundListener=a.listener.bind(a),window.addEventListener("message",a.boundListener),a.outgoingWindow=o,a.outgoingChannel=r,a.outgoingChannel.vent.trigger=function(){var e=t.toArray(arguments),i=e.shift();return a.postMessage("vent",i,e),a.outgoingChannel.vent},a.outgoingChannel.commands.execute=function(){var e=t.toArray(arguments),i=e.shift();a.postMessage("commands",i,e)},a.outgoingChannel.reqres.request=function(){var i=t.toArray(arguments),n=i.shift(),o=e.Deferred();return a.postMessage("reqres",n,i,o),o.promise()};var c={messenger:"vent",name:"ready"};return s||(c=JSON.stringify(c)),a.readyPing=setInterval(function(){++a.numPings>a.maxPings&&(clearInterval(a.readyPing),a.readyPing=null,l.reject()),a.outgoingReady&&(clearInterval(a.readyPing),a.readyPing=null,a.runOutgoingQueue(),l.resolve());try{a.outgoingWindow.postMessage(c,a.targetOrigin)}catch(e){i.captureMessage("Exception during handshake: "+e.message,{level:"info"})}},a.pingInterval),l.promise()},l.prototype.destroy=function(){clearInterval(this.readyPing),window.removeEventListener("message",this.boundListener)},l}),_wAMD.define("editor-site-shared/bridge",["editor-site-shared/BridgeConstructor"],function(e){var t=new e(window.bridgeTarget);return t}),_wAMD.define("editor/page-manager/entities/Defaults",["underscore"],function(e){var t={"for":function(t){var i=["blog","link","nonclickable","store","category","product"],n=e.contains(i,t)?this[t]:this.page;return n.layout=n.layout||getDefaultPageType(currentThemeData,Weebly.view.isMobileView),n},page:{title:_W.stl("javascript.editor.page-manager.entities.Defaults_2"),kind:"page"},nonclickable:{title:_W.stl("javascript.editor.page-manager.entities.Defaults_8"),kind:"nonclickable",nonclickable:1},link:{title:_W.stl("javascript.editor.page-manager.entities.Defaults_3"),kind:"page",extlink:"http://"},blog:{title:_W.stl("javascript.editor.page-manager.entities.Defaults_4"),kind:"blog"},store:{title:_W.stl("javascript.editor.page-manager.entities.Defaults_5"),kind:"store",layout:"no-header",store_page_kind:"category",store_page_kind_id:"1"},category:{title:_W.stl("javascript.editor.page-manager.entities.Defaults_6"),kind:"store",layout:"no-header",store_page_kind:"category"},product:{title:_W.stl("javascript.editor.page-manager.entities.Defaults_7"),kind:"store",layout:"no-header",store_page_kind:"product"}};return t}),_wAMD.define("editor/page-manager/entities/PageHash",["underscore"],function(e){var t={initialize:function(e){return this.length=0,this.items={},e.length>0&&this.flatten(e),this},flatten:function(e){var t=this;e.each(function(e){t.add(e),t.flatten(e.get("children"))})},toJSON:function(){return hash={},e.each(this.items,function(e){hash[e.id]=e.toJSON()}),hash},get:function(e){return this.items[e]},add:function(e){this.items[e.id]||(this.length+=1,this.items[e.id]=e)},remove:function(e){this.length-=1,delete this.items[e.id]},each:function(t){return e.each(this.items,function(e,i){t.call(null,e,i)}),this},some:function(t){return e.some(this.items,function(e,i){return t.call(null,e,i)})},map:function(t){return e.map(this.items,function(e,i){return t.call(null,e,i)})},find:function(t){return e.find(this.items,function(e,i){return t.call(null,e,i)})}};return t}),_wAMD.define("editor/page-manager/entities/Pages",["jquery","underscore","backbone","editor/page-manager/entities/Defaults","editor/page-manager/entities/PageHash"],function(e,t,i,n,o){var r=i.Model.extend({defaults:function(e){return this.isNew()&&e?n["for"](e):{}},initialize:function(e){e=e||{},this.set(this.defaults(e.page_kind)),this.initChildren(),this.on("change",this.onModelChange.bind(this)),this.listenTo(this.get("children"),{changed:function(e){this.trigger("changed",e)},"page:go":function(e){this.trigger("page:go",e)},removed:function(e){this.trigger("removed",e)}})},onModelChange:function(){var e=t.keys(this.changedAttributes()),i=["title","hidden","pwprotected","membership_required","nav_menu"],n=t.intersection(i,e).length>0;n&&this.trigger("changed",this);var o=["title","hidden","layout","store_page_kind_id"],r=t.intersection(o,e).length>0;r&&this.trigger("page:go",this)},initChildren:function(){var e=this.get("children");e instanceof s==!1&&this.set("children",new s(e,{subcollection:!0}))},isCommercePage:function(){return t.contains(["store","category","product"],this.get("page_kind"))},hasCommerceModel:function(e){return this.hasCategory(e)||this.hasProduct(e)},hasProduct:function(e){return this.get("store_page_kind_id")==e.get("site_product_id")},hasCategory:function(e){return this.get("store_page_kind_id")==e.get("site_category_id")},commerceCleanup:function(){var e=this;Weebly.Editor.RPC.Page.cleanupCommercePage(e.id).done(function(){e.set({hidden:1,kind:"page",page_kind:"page",store_page_kind:null,store_page_kind_id:null})})},unescapedAttr:function(t){var i=this.get(t);return e("<div/>").html(i).text()},sync:function(e,i,n){var o=i.hasChanged("store_page_kind_id");return i.collection&&i.set("order",i.collection.indexOf(i)+1),i.isNew()&&i.collection.allPagesProtected()&&i.set("pwprotected",1),Weebly.Editor.RPC.Page.savePage(currentSite,i.id,i.attributes).then(function(e){e=t.mapObject(e,function(e,t){return("0"===e||"1"===e)&&(e=parseInt(e,10)),e});var n=i.isNew(),r=n?"save":"sync",s=!t.isEqual(i.toJSON(),e);return i.set(e,{silent:!0}),i.trigger(r,i),s&&i.trigger("change",i),o&&i.trigger("page:go",i),i})},destroy:function(e){return this.trigger("destroy",this,this.collection,this.collection.indexOf(this)),Weebly.Editor.RPC.Page.removePage(currentSite,this.id)},copy:function(){var e=this,i=Weebly.Editor.RPC.Page.copyPage(currentSite,e.id);return i.then(function(i){var n=t.extend(e.toJSON(),{id:i.page_id,children:[]});return new r(n)})},toJSON:function(e){var i=t.clone(this.attributes);return i.children=this.get("children").toJSON(),i},canBeHomepage:function(){var e=this.get("page_kind");return"nonclickable"!==e&&"link"!==e},trackEvent:function(e){Tracking.trackEvent("page",e,this.get("page_kind"))}}),s=i.Collection.extend({model:r,initialize:function(e,t){t=t||{},t.subcollection||this.on({"save add":function(e){e.isNew()||this.getHash().add(e)},removed:function(e){this.getHash().remove(e)}},this),this.on("destroy",this.relocateChildren,this),i.Collection.prototype.initialize.apply(this,arguments)},saveHierarchy:function(e){return this.mirrorHierarchy(e),Weebly.Editor.RPC.Page.saveHierarchy(currentSite,e)},mirrorHierarchy:function(e){function i(e,o){var r=1;t.each(o,function(t){var o=n.get(t.id);o.collection.remove(o,{silent:!0}),e.add(o,{silent:!0}),o.set("order",r++),i(o.get("children"),t.children)})}var n=this.getHash();i(this,e)},relocateChildren:function(e,t,i){for(var n=e.get("children"),o=n.at(0);o;)n.remove(o),t.add(o,{at:i++}),o=n.at(0);this.trigger("removed",e)},onSitePasswordChange:function(e,t){var i=this.getHash();if(!t)return void i.each(function(e){e.set("pwprotected",0)});var n=i.find(function(e){return e.get("pwprotected")});e||n||i.each(function(e){e.set("pwprotected",1)})},allPagesProtected:function(){return t.all(this.getHash().items,function(e){return 1==parseInt(e.get("pwprotected"))})},reset:function(e,t){delete this.pageHash,i.Collection.prototype.reset.call(this,e,t)},getHash:function(){return this.pageHash=this.pageHash||o.initialize(this),this.pageHash},getPage:function(e){return this.getHash().get(e)},getHomepage:function(){return this.at(0)},isHomepage:function(e){return e.id===this.getHomepage().id},canDeleteHomepage:function(){var e=this.at(1);return e&&"external"!==e.get("page_kind")&&"nonclickable"!==e.get("page_kind")},cleanupCommercePages:function(e){this.getHash().each(function(t){t.isCommercePage()&&t.hasCommerceModel(e)&&t.commerceCleanup()})}});return{PageModel:r,PageCollection:s}}),_wAMD.define("editor/page-manager/pages",["./entities/Pages"],function(e){var t=function(){return new e.PageCollection};return t()}),window.Weebly=window.Weebly||{};var settingAnimations=0,settingQuickExport=0,settingTooltips=0,uploadInProgress=0,exiting=0,ajax="/weebly/getElements.php",ajaxStatusCheckTimeout=4e3,ajaxStatusTimeoutGrowthFactor=1;Weebly.ajaxLog=[],window.onbeforeunload=function(){exiting=1},jQuery.ajaxPrefilter(function(e,t,i){var n=/\/(weebly|editor)\/getElements\.php(\?.*)?$/;if(n.test(e.url))if(i.setRequestHeader("X-CSRF-TOKEN",Weebly.CSRFRequestToken),t.data)if("object"==typeof t.data)e.data=jQuery.param(jQuery.extend(t.data,{_csrf:Weebly.CSRFRequestToken}));else try{var o=JSON.parse(t.data);o instanceof Array?e.data=JSON.stringify(o.each(function(e){jQuery.extend(e,{_csrf:Weebly.CSRFRequestToken})})):e.data=JSON.stringify(jQuery.extend(o,{_csrf:Weebly.CSRFRequestToken}))}catch(r){if(!(r instanceof SyntaxError))throw r;e.data+="&_csrf="+Weebly.CSRFRequestToken}else e.data=JSON.stringify({_csrf:Weebly.CSRFRequestToken})});var myGlobalHandlers={onCreate:function(e,t){t.request.times={start:(new Date).getTime()},e.options.bgRequest||startWait(),e.parameters&&e.parameters.pos&&(Weebly.ajaxLog.push(e.parameters.pos),Weebly.ajaxLog.size()>10&&Weebly.ajaxLog.shift()),e.options.requestHeaders=e.options.requestHeaders||{};var i=/\/(weebly|editor)\/getElements\.php(\?.*)?$/;if(i.test(e.url)&&(e.options.requestHeaders["X-CSRF-TOKEN"]=Weebly.CSRFRequestToken,e.url+=(e.url.include("?")?"&":"?")+"_csrf="+Weebly.CSRFRequestToken),"undefined"!=typeof currentSite&&(e.options.requestHeaders["Weebly-Site-ID"]=currentSite),!e.options.requestHeaders["x-ajax-request-id"]){var n=(new Date).getTime()+""+Math.floor(999*Math.random());e.options.requestHeaders["x-ajax-request-id"]=n}e.options.isRetry&&e.options.previouslyAborted&&(e.options.requestHeaders["x-ajax-abort-retry"]=ajaxStatusCheckTimeout),e.options.isRetry||Prototype.Browser.IE6||setTimeout(function(){checkAjaxRequestStatus(e)},ajaxStatusCheckTimeout)},onLoading:function(e,t){t.request.times&&t.request.times.start&&(t.request.times.initialized=(new Date).getTime()-t.request.times.start)},onLoaded:function(e,t){t.request.times&&t.request.times.start&&(t.request.times.sent=(new Date).getTime()-t.request.times.start,e.options.isRetry&&t.request.times.sent>ajaxStatusCheckTimeout/2&&(ajaxStatusCheckTimeout+=ajaxStatusCheckTimeout*ajaxStatusTimeoutGrowthFactor,ajaxStatusTimeoutGrowthFactor=.9*ajaxStatusTimeoutGrowthFactor))},onInteractive:function(e,t){t.request.times&&t.request.times.start&&!t.request.times.response&&(t.request.times.response=(new Date).getTime()-t.request.times.start)},onComplete:function(e,t){return 0!=t.status||e.aborted?(t.request.times&&t.request.times.start&&(t.request.times.end=(new Date).getTime(),t.request.times.complete=t.request.times.end-t.request.times.start),e.options.bgRequest||endWait(),void(e.isRetriable()?e.retry():handleLogout(t,e))):(retriableErrFunc(e,t),!1)},onException:endWait};window.Ajax&&Ajax.Responders.register(myGlobalHandlers),window.Ajax&&Ajax.Request.addMethods({abort:function(){if(!this._complete){this.transport.onreadystatechange=Prototype.emptyFunction,this.transport.abort(),this._complete=!0,this.aborted=!0;var e=new Ajax.Response(this);["Abort","Complete"].each(function(t){try{(this.options["on"+t]||Prototype.emptyFunction)(e,e.headerJSON),Ajax.Responders.dispatch("on"+t,this,e,e.headerJSON)}catch(i){this.dispatchException(i)}},this)}},retry:function(e){if(e||this.isRetriable()){var t=this.options||{};t._retryCount=(t._retryCount||0)+1,t.isRetry=!0,t.previouslyAborted=this.aborted?!0:!1,new Ajax.Request(this.url,t)}},isRetriable:function(){if(!this._complete)return!1;var e=this.getStatus(),t=this.options||{},i=t.maxRetries||1,n=t._retryCount||0;return(408==e||e>1e4||this.aborted)&&i>n}}),_wAMD.define("legacy/weebly_utils_ajax",function(){}),_wAMD.define("editor-site-shared/ajax/AjaxBaseModule",["backbone-all","legacy/weebly_utils_ajax"],function(e){var t=e.Marionette.Module.extend({ajax:window.ajax,errFunc:window.errFunc,exceptionFunc:window.exceptionFunc,startWait:window.startWait,endWait:window.endWait});return t}),_wAMD.define("editor-site-shared/ajax/AjaxResponseMessage",["underscore"],function(e){var t=function(t){return e.pick(t,this.constructor.fields)};return t.fields=["readyState","responseText","status","statusText"],t}),_wAMD.define("shared/permissions/restrictions",["underscore","w-global"],function(e,t){var i={settings:{},services:[],source:"main",userSource:window.source,level:0,freeLevel:0,defaultSource:"main",disabledLevel:1e7,defaultLevel:"all",starterLevel:5,proLevel:10,businessLevel:15,performanceLevel:20,designerSitesService:"Weebly.designerSites",unlimitedValue:"-1",freeTrialBlockedFeatures:["existing_domain","site_ssl"],allowedPerformanceCommerceSources:["main","developer"],hasAccess:function(e){var n=i,o=n.getMinimumLevel(e),r=t.Location&&1===t.Location.google_domains.length;return r&&"existing_domain"===e?!0:n.featureBlockedByFreeTrial(e)?!1:n.level>=o},hasService:function(e){var t=i;return t.level==e?!0:-1!=t.services.indexOf(e)},getPlans:function(){var e=i,t=[e.freeLevel,e.starterLevel,e.proLevel,e.businessLevel,e.performanceLevel],n=[];for(index in t)planid=t[index],n.push({plan:planid,name:e.levelToName(planid)});return n},accessValue:function(e){var t=i;if(!t.settings[e])return"";for(var n="",o=t.level;o>=t.freeLevel;o--)if(n=t.settings[e][source]&&"undefined"!=typeof t.settings[e][source][o]?t.settings[e][source][o]:t.settings[e][t.defaultSource][o],"undefined"!=typeof n)return n;return""},isUnlimited:function(e){var t=i,n=t.accessValue(e);return n==t.unlimitedValue},featureEnabled:function(e){var t=i,n=t.getMinimumLevel(e);return t.featureBlockedByFreeTrial(e)?!1:n!=t.disabledLevel},isUpgradable:function(e){var t=i;if(!t.settings[e])return!1;var n=t.settings[e][source]?source:t.defaultSource,o=!1;if(!t.settings[e][n])return!1;var r=t.settings[e][n].minimum_level;return void 0!==r?r===t.disabledLevel||r<=t.level?!1:r:(Object.keys(t.settings[e][n]).forEach(function(e){!o&&!isNaN(parseFloat(e))&&e>t.level&&(o=e)}),o)},getMinimumLevel:function(e){var t=i;if(!t.settings[e])return t.freeLevel;var n=t.settings[e][source]?source:t.defaultSource,o=t.settings[e][n].minimum_level;return o||t.freeLevel},requiredService:function(e){var t=i;return t.getMinimumLevel(e)},requiresUpgrade:function(e){var t=i,n=t.getMinimumLevel(e);return n&&n!=t.freeLevel},addService:function(e){var t=i;t.services.push(e)},removeService:function(e){var t=i;t.services=t.services.without(e)},hasNewElementAccess:function(e){var t=i;return t.requiresUpgrade(e)&&t.expired_trial?!1:t.hasAccess(e)},getSiteLimit:function(){var e=i;return e.siteLimit&&e.siteLimit>0?e.siteLimit:e.accessValue("site_limit")},levelToName:function(e){var n=i;switch("string"==typeof e&&(e=parseInt(e)),e){case n.freeLevel:return t.utl("html.weebly.libraries.weebly_restrictions_1");case n.proLevel:return t.utl("html.weebly.libraries.weebly_restrictions_2");case n.starterLevel:return t.utl("html.weebly.libraries.weebly_restrictions_3");case n.businessLevel:return t.utl("html.weebly.libraries.weebly_restrictions_4");case n.performanceLevel:return t.utl("html.weebly.libraries.weebly_restrictions_5");default:return""}},getNextLevel:function(e){var t=i;switch(e){case t.freeLevel:return t.starterLevel;case t.starterLevel:return t.proLevel;case t.proLevel:return t.businessLevel;case t.businessLevel:return t.performanceLevel;case t.performanceLevel:default:return!1}},hasStarter:function(){var e=i;return e.level>=e.starterLevel},hasPro:function(){var e=i;return e.level>=e.proLevel},hasBusiness:function(){var e=i;return e.level>=e.businessLevel},hasPerformance:function(){var e=i;return e.level>=e.performanceLevel},hasFreeRestrictions:function(){var e=i;return 0==e.level||e.is_trial},featureBlockedByFreeTrial:function(e){var t=i;if(!t.is_trial)return!1;for(var n=0;n<t.freeTrialBlockedFeatures.length;n++)if(t.freeTrialBlockedFeatures[n]==e)return!0;return!1},canAcceptPayments:function(){var e=i;return e.hasBusiness()||e.migrated_paypal}};return i=e.extend(i,t.Restrictions),t.Restrictions=i,i}),_wAMD.define("ui-framework/js/components/base-view",["jquery","backbone","mustache"],function(e,t,i){function n(t,i,n){var r=t.options,s="on"+i.replace(/(^|\:)([a-zA-Z])/g,function(e,t,i){return i.toUpperCase()}),a="_"+s;return t.trigger.apply(t,[i].concat(n)),e.when(o(t[a]?t[a].apply(t,n):null),o(t[s]?t[s].apply(t,n):null),o(r&&r[s]?r[s].apply(t,n):null))}function o(t){return t===!1?e.Deferred().reject().promise():t}var r=t.View.extend({template:null,options:null,constructor:function(e){this.options=e||{},this._initialize(),t.View.call(this,e)},_initialize:function(){},showWithin:function(t){this._trigger("before:attach"),e(t).append(this.render().$el),this._trigger("attach"),this.updateSize(),this._trigger("show")},queryOption:function(e){var t=this.options[e];return null==t&&(t=this[e]),t},queryOptionOverride:function(e,t){var i;return t&&(i=t[e]),null==i&&(i=this.queryOption(e)),i},extendOptions:function(t){e.extend(this.options,t)},extendEvents:function(e){if(e&&e.events){var t=_.values(e.events);_.extend(this.events,e.events),_.each(t,function(t){var i=e.context||this;this[t]=function(n){return e[t].apply(i,arguments)}},this),this.delegateEvents()}},_trigger:function(e){var t=Array.prototype.slice.call(arguments,1);return n(this,e,t)},render:function(){var t,n=this.getRenderData();return this.template&&(t=e.isFunction(this.template)?this.template(n):i.render(this.template,n),this.$el.html(t)),this.delegateEvents(),this},updateSize:function(){},getRenderData:function(){return{}},destroy:function(){this._trigger("before:destroy"),this._trigger("before:detach"),this.executeDestroy.apply(this,arguments),this._trigger("detach"),this._trigger("destroy")},executeDestroy:function(){this.remove(),this.el=null,this.$el=null,this._ensureElement()},renderProceedButtonHtml:function(){return this.renderButtonHtml(this.normalizeButtonRenderData("btn--primary js-proceed-btn",this.queryOption("proceedButton"),this.queryOption("proceedText")))},renderCancelButtonHtml:function(){return this.renderButtonHtml(this.normalizeButtonRenderData("btn--cancel btn--secondary js-cancel-btn",this.queryOption("cancelButton"),this.queryOption("cancelText")))},normalizeButtonRenderData:function(e,t,i){return t=t||{},"string"==typeof t&&(t={text:t}),null==t.text&&"string"==typeof i&&(t.text=i),t.mainClassName=e,t},renderButtonHtml:function(e){return i.render("<button class='btn {{mainClassName}} {{className}}' {{#icon}}data-icon-before='{{icon}}'{{/icon}}>{{text}}</button>",e)}});return r.triggerOn=n,r}),function(e){return"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("nanoscroller",["jquery"],function(t){return e(t,window,document)}):"object"==typeof exports?module.exports=e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,i){var n,o,r,s,a,l,c,d,u,h,p,f,m,g,v,b,y,w,_,E,T,C,S,D,I,k,O,R,x,A,P;S={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",enabledClass:"has-scrollbar",flashedClass:"flashed",activeClass:"active",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},w="scrollbar",y="scroll",u="mousedown",h="mouseenter",p="mousemove",m="mousewheel",f="mouseup",b="resize",a="drag",l="enter",E="up",v="panedown",r="DOMMouseScroll",s="down",T="wheel",c="keydown",d="keyup",_="touchmove",n="Microsoft Internet Explorer"===t.navigator.appName&&/msie 7./i.test(t.navigator.appVersion)&&t.ActiveXObject,o=null,O=t.requestAnimationFrame,C=t.cancelAnimationFrame,x=i.createElement("div").style,P=function(){var e,t,i,n,o,r;for(n=["t","webkitT","MozT","msT","OT"],e=o=0,r=n.length;r>o;e=++o)if(i=n[e],t=n[e]+"ransform",t in x)return n[e].substr(0,n[e].length-1);return!1}(),A=function(e){return P===!1?!1:""===P?e:P+e.charAt(0).toUpperCase()+e.substr(1)},R=A("transform"),I=R!==!1,D=function(){var e,t,n;return e=i.createElement("div"),t=e.style,t.position="absolute",t.width="100px",t.height="100px",t.overflow=y,t.top="-9999px",i.body.appendChild(e),n=e.offsetWidth-e.clientWidth,i.body.removeChild(e),n},k=function(){var e,i,n;return i=t.navigator.userAgent,(e=/(?=.+Mac OS X)(?=.+Firefox)/.test(i))?(n=/Firefox\/\d{2}\./.exec(i),n&&(n=n[0].replace(/\D+/g,"")),e&&+n>23):!1},g=function(){function c(n,r){this.el=n,this.options=r,o||(o=D()),this.$el=e(this.el),this.doc=e(this.options.documentContext||i),this.win=e(this.options.windowContext||t),this.body=this.doc.find("body"),this.$content=this.$el.children("."+this.options.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return c.prototype.preventScrolling=function(e,t){if(this.isActive)if(e.type===r)(t===s&&e.originalEvent.detail>0||t===E&&e.originalEvent.detail<0)&&e.preventDefault();else if(e.type===m){if(!e.originalEvent||!e.originalEvent.wheelDelta)return;(t===s&&e.originalEvent.wheelDelta<0||t===E&&e.originalEvent.wheelDelta>0)&&e.preventDefault()}},c.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},c.prototype.updateScrollValues=function(){var e,t;e=this.content,this.maxScrollTop=e.scrollHeight-e.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=e.scrollTop,t=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==t&&this.$el.trigger("update:nano",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:t}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},c.prototype.setOnScrollStyles=function(){var e;I?(e={},e[R]="translate(0, "+this.sliderTop+"px)"):e={top:this.sliderTop},O?(C&&this.scrollRAF&&C(this.scrollRAF),this.scrollRAF=O(function(t){return function(){return t.scrollRAF=null,t.slider.css(e)}}(this))):this.slider.css(e)},c.prototype.createEvents=function(){this.events={down:function(e){return function(t){return e.isBeingDragged=!0,e.offsetY=t.pageY-e.slider.offset().top,e.slider.is(t.target)||(e.offsetY=0),e.pane.addClass(e.options.activeClass),e.doc.bind(p,e.events[a]).bind(f,e.events[E]),e.body.bind(h,e.events[l]),!1}}(this),drag:function(e){return function(t){return e.sliderY=t.pageY-e.$el.offset().top-e.paneTop-(e.offsetY||.5*e.sliderHeight),e.scroll(),e.contentScrollTop>=e.maxScrollTop&&e.prevScrollTop!==e.maxScrollTop?e.$el.trigger("scrollend"):0===e.contentScrollTop&&0!==e.prevScrollTop&&e.$el.trigger("scrolltop"),!1}}(this),up:function(e){return function(t){return e.isBeingDragged=!1,e.pane.removeClass(e.options.activeClass),e.doc.unbind(p,e.events[a]).unbind(f,e.events[E]),e.body.unbind(h,e.events[l]),!1}}(this),resize:function(e){return function(t){e.reset()}}(this),panedown:function(e){return function(t){return e.sliderY=(t.offsetY||t.originalEvent.layerY)-.5*e.sliderHeight,e.scroll(),e.events.down(t),!1}}(this),scroll:function(e){return function(t){e.updateScrollValues(),e.isBeingDragged||(e.iOSNativeScrolling||(e.sliderY=e.sliderTop,e.setOnScrollStyles()),null!=t&&(e.contentScrollTop>=e.maxScrollTop?(e.options.preventPageScrolling&&e.preventScrolling(t,s),e.prevScrollTop!==e.maxScrollTop&&e.$el.trigger("scrollend")):0===e.contentScrollTop&&(e.options.preventPageScrolling&&e.preventScrolling(t,E),0!==e.prevScrollTop&&e.$el.trigger("scrolltop"))))}}(this),wheel:function(e){return function(t){var i;if(null!=t)return i=t.delta||t.wheelDelta||t.originalEvent&&t.originalEvent.wheelDelta||-t.detail||t.originalEvent&&-t.originalEvent.detail,
i&&(e.sliderY+=-i/3),e.scroll(),!1}}(this),enter:function(e){return function(t){var i;if(e.isBeingDragged)return 1!==(t.buttons||t.which)?(i=e.events)[E].apply(i,arguments):void 0}}(this)}},c.prototype.addEvents=function(){var e;this.removeEvents(),e=this.events,this.options.disableResize||this.win.bind(b,e[b]),this.iOSNativeScrolling||(this.slider.bind(u,e[s]),this.pane.bind(u,e[v]).bind(""+m+" "+r,e[T])),this.$content.bind(""+y+" "+m+" "+r+" "+_,e[y])},c.prototype.removeEvents=function(){var e;e=this.events,this.win.unbind(b,e[b]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+y+" "+m+" "+r+" "+_,e[y])},c.prototype.generate=function(){var e,i,n,r,s,a,l;return r=this.options,a=r.paneClass,l=r.sliderClass,e=r.contentClass,(s=this.$el.children("."+a)).length||s.children("."+l).length||this.$el.append('<div class="'+a+'"><div class="'+l+'" /></div>'),this.pane=this.$el.children("."+a),this.slider=this.pane.find("."+l),0===o&&k()?(n=t.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),i={right:-14,paddingRight:+n+14}):o&&(i={right:-o},this.$el.addClass(r.enabledClass)),null!=i&&this.$content.css(i),this},c.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},c.prototype.reset=function(){var e,t,i,r,s,a,l,c,d,u,h,p;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),e=this.content,r=e.style,s=r.overflowY,n&&this.$content.css({height:this.$content.height()}),t=e.scrollHeight+o,u=parseInt(this.$el.css("max-height"),10),u>0&&(this.$el.height(""),this.$el.height(e.scrollHeight>u?u:e.scrollHeight)),l=this.pane.outerHeight(!1),d=parseInt(this.pane.css("top"),10),a=parseInt(this.pane.css("bottom"),10),c=l+d+a,p=Math.round(c/t*l),p<this.options.sliderMinHeight?p=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&p>this.options.sliderMaxHeight&&(p=this.options.sliderMaxHeight),s===y&&r.overflowX!==y&&(p+=o),this.maxSliderTop=c-p,this.contentHeight=t,this.paneHeight=l,this.paneOuterHeight=c,this.sliderHeight=p,this.paneTop=d,this.slider.height(p),this.events.scroll(),this.pane.show(),this.isActive=!0,e.scrollHeight===e.clientHeight||this.pane.outerHeight(!0)>=e.scrollHeight&&s!==y?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===e.scrollHeight&&s===y?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),i=this.$content.css("position"),("static"===i||"relative"===i)&&(h=parseInt(this.$content.css("right"),10),h&&this.$content.css({right:"",marginRight:h})),this)},c.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this):void 0},c.prototype.scrollBottom=function(e){return this.isActive?(this.$content.scrollTop(this.contentHeight-this.$content.height()-e).trigger(m),this.stop().restore(),this):void 0},c.prototype.scrollTop=function(e){return this.isActive?(this.$content.scrollTop(+e).trigger(m),this.stop().restore(),this):void 0},c.prototype.scrollTo=function(e){return this.isActive?(this.scrollTop(this.$el.find(e).get(0).offsetTop),this):void 0},c.prototype.stop=function(){return C&&this.scrollRAF&&(C(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},c.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),n&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass(this.options.enabledClass)&&(this.$el.removeClass(this.options.enabledClass),this.$content.css({right:""})),this},c.prototype.flash=function(){return!this.iOSNativeScrolling&&this.isActive?(this.reset(),this.pane.addClass(this.options.flashedClass),setTimeout(function(e){return function(){e.pane.removeClass(e.options.flashedClass)}}(this),this.options.flashDelay),this):void 0},c}(),e.fn.nanoScroller=function(t){return this.each(function(){var i,n;if((n=this.nanoscroller)||(i=e.extend({},S,t),this.nanoscroller=n=new g(this,i)),t&&"object"==typeof t){if(e.extend(n.options,t),null!=t.scrollBottom)return n.scrollBottom(t.scrollBottom);if(null!=t.scrollTop)return n.scrollTop(t.scrollTop);if(t.scrollTo)return n.scrollTo(t.scrollTo);if("bottom"===t.scroll)return n.scrollBottom(0);if("top"===t.scroll)return n.scrollTop(0);if(t.scroll&&t.scroll instanceof e)return n.scrollTo(t.scroll);if(t.stop)return n.stop();if(t.destroy)return n.destroy();if(t.flash)return n.flash()}return n.reset()})},e.fn.nanoScroller.Constructor=g}),_wAMD.define("ui-framework/js/components/panel",["jquery","underscore","backbone","./base-view","nanoscroller"],function(e,t,i,n){var o=n.extend({contentHtml:null,contentView:null,contentFunc:null,contentViewTriggerPrefix:"",sizeToWidthMap:{small:290,medium:470,large:620},width:null,height:null,minHeight:null,providesOwnHeight:null,windowResizeHandler:null,$headerEl:null,$contentEl:null,$contentInnerEl:null,innerOverlay:null,innerOverlayClassName:"",constructor:function(e){e instanceof i.View&&(e={content:e}),e=e||{};var t=e.content;null==t&&(t=this.content),"function"==typeof t?this.contentFunc=t:t instanceof i.View?this.contentView=t:"string"==typeof t&&(this.contentHtml=t),n.call(this,e)},_initialize:function(){this.contentView&&this.processContentView(this.contentView),this.width=this.queryOption("width"),this.height=this.queryOption("height"),this.minHeight=this.queryOption("minHeight")},processContentView:function(e){},_trigger:function(t){var i=Array.prototype.slice.call(arguments,1),o=this.contentView,r=this.contentViewTriggerPrefix;return e.when(o&&r?n.triggerOn(o,r+":"+t,i):null,n.prototype._trigger.apply(this,arguments))},render:function(){return this.renderSkeleton(),this.$headerEl=this.queryHeaderOuterEl(),this.$headerInnerEl=this.queryHeaderInnerEl(),this.$contentEl=this.queryContentOuterEl(),this.$contentInnerEl=this.queryContentInnerEl(),this.renderHeader(this.$headerInnerEl),this.renderContent(this.$contentInnerEl),this.delegateEvents(),this},renderSkeleton:function(){n.prototype.render.call(this)},queryHeaderOuterEl:function(){},queryHeaderInnerEl:function(){},queryContentOuterEl:function(){},queryContentInnerEl:function(){},renderHeader:function(e){},queryScrollEl:function(){},renderContent:function(e){var t,n,o,r=this.contentFunc;r?(t=r.call(this),t instanceof i.View?n=t:"string"==typeof t&&(o=t)):(n=this.contentView,o=this.contentHtml),n?(this.processContentView(n),n.render(),n.delegateEvents(),n.$el.appendTo(e)):o&&e.html(o)},updateSize:function(){this.updateWidth(),this.updateHeight()},setWidth:function(e){this.width=e,this.updateWidth()},updateWidth:function(){this.applyWidth(this.width)},applyWidth:function(e){var t=null==e||"auto"==e;this.$el.width(t?"":e).css("max-width",t?"":"none")},setHeight:function(e){this.height=e,this.updateHeight()},setMinHeight:function(e){this.minHeight=e,this.updateHeight()},updateHeight:function(){this.applyHeight(this.height,this.minHeight)},applyHeight:function(e,t){var i=this.$headerEl.outerHeight();i&&(null===this.providesOwnHeight&&(this.providesOwnHeight=this.$el.outerHeight()>2*i),null!=e||this.providesOwnHeight||(e=this.computeHeight()),this.$contentEl.css({top:i,height:"calc(100% - "+i+"px)"}),this.$el.css({height:null!=e?e:"","min-height":null!=t?t:""}),this.applyScrollbar())},computeHeight:function(){return this.$headerEl.outerHeight()+this.queryContentNaturalHeight()},queryContentNaturalHeight:function(){return this.$contentInnerEl.outerHeight()},applyScrollbar:function(){var t=this.queryScrollEl();t&&e(t).nanoScroller({alwaysVisible:!0,preventPageScrolling:!0,contentClass:"dialog__scroll",paneClass:"dialog__scrollbar",sliderClass:"dialog__scrollbar-slider"})},openOverlay:function(t,i){var n=this;return this.innerOverlay&&this.innerOverlay.destroy(),this.innerOverlay=t,t.once("close",function(){n.innerOverlay=null}),i=e.extend({parent:this.getContainerEl(),outerClassName:this.innerOverlayClassName},i),t.open(i)},getContainerEl:function(){return this.$el},_onBeforeAttach:function(){this.contentView&&(this.contentView.trigger("before:attach"),this.contentView.onBeforeAttach&&this.contentView.onBeforeAttach())},_onAttach:function(){var i=this;this.contentView&&(this.contentView.trigger("attach"),this.contentView.onAttach&&this.contentView.onAttach()),"100%"==this.height&&e(window).on("resize",this.windowResizeHandler=t.debounce(function(){i.updateSize()},100))},_onDetach:function(){this.windowResizeHandler&&e(window).off("resize",this.windowResizeHandler)},_onShow:function(){this.contentView&&(this.contentView.trigger("show"),this.contentView.onShow&&this.contentView.onShow())},executeDestroy:function(e){var t=this.contentView;t&&(t instanceof n?t.destroy():e&&e.preventContentViewDestroy||(t.destroy?t.destroy():t.close&&t.close()),t.$el&&(t.$el.remove(),t.$el=null,t.el=null,t._ensureElement())),n.prototype.executeDestroy.call(this),this.$headerEl&&(this.$headerEl.remove(),this.$headerEl=null),this.$contentEl&&(this.$contentEl.remove(),this.$contentEl=null)}});return o}),_wAMD.define("ui-framework/js/components/utils",["jquery"],function(e){var t={};return t.promiseTransition=function(t){var i=e.Deferred();return t.one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(e){i.resolve()}),setTimeout(function(){i.resolve()},1e3),i.promise()},t.promiseTimeout=function(t){var i=e.Deferred();return setTimeout(function(){i.resolve()},t),i.promise()},t.getViewportRect=function(){var t=e(document).scrollLeft(),i=e(document).scrollTop();return{left:t,right:t+e(window).width(),top:i,bottom:i+e(window).height()}},t.getElementRect=function(e){return e[0].getBoundingClientRect()},t.getElDimensions=function(e){var t="none"===e.css("display");t&&e.css("display","block");var i=this.getElementRect(e),n=e.offset(),o=n.left,r=n.top,s=i.width/2,a=i.height/2;return t&&e.css("display","none"),{width:i.width,height:i.height,docLeft:o,docRight:o+i.width,docTop:r,docBottom:r+i.height,docCenterX:o+s,docCenterY:r+a,viewportLeft:i.left,viewportRight:i.right,viewportTop:i.top,viewportBottom:i.bottom,viewportCenterX:i.left+s,viewportCenterY:i.top+a}},t.toCamelCase=function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})},t.getElDataAttributes=function(t,i){t instanceof e&&(t=t.get(0)),"undefined"==typeof i?i="data-":"-"!==i.slice(-1)&&console.warn("Did you mean to leave off the hyphen at the end of the prefix value?");var n=this,o=t.attributes,r={};return e.each(o,function(e,t){if(0===t.name.indexOf(i)){var o=t.name.slice(i.length);o=n.toCamelCase(o),r[o]=t.value||""}}),r},t.detectInputWidth=function(t,i){if(t=e(t),!t.is("input"))throw new Error("Not an input");var n,o=t.val();i&&(n=t.attr("placeholder")||"",o=o.length>n.length?o:n);for(var r=["font-family","font-size","font-style","font-variant","font-weight","letter-spacing","text-indent","text-rendering","text-transform","word-spacing"],s=e("<span>"),a=0;a<r.length;a++)s.css(r[a],t.css(r[a]));return s.css({position:"absolute",width:"auto",visibility:"hidden",whiteSpace:"pre"}).text(o).appendTo(document.body),width=s[0].getBoundingClientRect().width+1,s.remove(),width},t.unescapeHtmlEntities=function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},t}),_wAMD.define("ui-framework/js/components/overlay",["jquery","underscore","./utils"],function(e,t,i){var n=(e("body"),16),o={isOpen:!1,isModal:!1,closeOnEsc:!1,closeOnEnter:!1,closeOnClickAway:!1,allowLeftRight:!0,preferTop:!1,preferBottom:!1,positionRefresh:!1,isDraggable:!1,draggableSelector:"*",gutter:20,arrowSize:10,arrowGap:0,showPointAtArrow:!0,outerClassName:null,wrapClassName:null,hAlignment:null,vAlignment:null,vAlignmentTopClassName:null,vAlignmentCenterClassName:null,$alignmentWrapperEl:null,draggableClassName:"is-draggable",arrowClassName:"popover__arrow",$arrow:null,$modalEl:null,$outerEl:null,escHandler:null,enterHandler:null,closeOnClickHandler:null,clickAwayHandler:null,currentOpenOptions:null,open:function(t){var i=this;if(!i.isOpen)return e.when(this._trigger("before:open")).then(function(){var n,o=e(i.queryOptionOverride("parent",t)||"body"),r=o.is("body");i.isOpen=!0,i.isModalLight=!r,t=t||!1,i._trigger("before:attach"),n=i.$outerEl=i.renderOverlay(t,r),o.append(n),i._trigger("attach"),i.updateSize(t),i.updatePosition(t),i._trigger("show"),i.$el.add(i.$modalEl).addClass("is-transitionable"),n[0].offsetWidth,i.currentOpenOptions=t,i.queryOptionOverride("follow",t)&&i.initializeFollow(t);var s=i.queryOptionOverride("delay",t);s?(s="true"===s?500:parseInt(s),i.delay=setTimeout(function(){i.$el.add(i.$modalEl).addClass("is-in")},s)):i.$el.add(i.$modalEl).addClass("is-in"),setTimeout(function(){i.initializeCloseOnEsc(),i.initializeCloseOnEnter(),i.initializeCloseOnClick(t),i.initializeCloseOnClickAway(t),i.initializeRepositioning(t),i.initializeDragging(t)},200),i.resetFocus(),i._trigger("open")})},resetFocus:function(){document.activeElement&&t.isElement(document.activeElement)&&document.activeElement!==document.body&&document.activeElement.blur()},renderOverlay:function(t,i){var n,o=this.queryOptionOverride("isPositionFixed",t),r=this.queryOptionOverride("zIndex",t),s=this.queryOptionOverride("isModal",t),a=this.queryOptionOverride("isModalLight",t),l=this.queryOptionOverride("outerClassName",t),c=this.queryOptionOverride("wrapClassName",t);return this.render(),n=this.$el,this.vAlignment=this.queryOptionOverride("vAlignment",t),this.hAlignment=this.queryOptionOverride("hAlignment",t),this.queryOptionOverride("isTop",t)&&(this.vAlignment="top"),!this.vAlignment&&!this.hAlignment||this.queryOptionOverride("pointAt",t)||(n=this.$alignmentWrapperEl=e('<div class="alignment-wrapper"></div>').append(n.addClass("alignment-wrapper__subject"))),s&&(n=this.$modalEl=e('<div class="modal" />').toggleClass("modal--light",a).append(n.addClass("modal__subject"))),null==o&&(o=i&&(this.$alignmentWrapperEl||s)),o&&n.css("position","fixed"),null!=r&&n.css("z-index",r),n.addClass(l),c&&(n=e("<div>").addClass(c).append(n)),n},initializeCloseOnEsc:function(){var t=this;this.queryOption("closeOnEsc")&&e(document).on("keyup",this.escHandler=function(e){27!==e.keyCode||t.innerOverlay||t.close()})},destroyCloseOnEsc:function(){this.escHandler&&e(document).off("keyup",this.escHandler)},initializeCloseOnEnter:function(){var t=this;this.queryOption("closeOnEnter")&&e(document).on("keyup",this.enterHandler=function(e){13===e.keyCode&&t.close()})},destroyCloseOnEnter:function(){this.enterHandler&&e(document).off("keyup",this.enterHandler)},initializeCloseOnClick:function(t){var i=this,n=this.queryOptionOverride("closeOnClick",t);null!=n&&e(document).on("click",this.closeOnClickHandler=function(t){e(t.target).closest(i.el).length&&(!n||"string"!=typeof n||e(ev.target).closest(n).length)&&i.close()})},destroyCloseOnClick:function(){this.closeOnClickHandler&&e(document).off("mousedown",this.closeOnClickHandler)},initializeCloseOnClickAway:function(t){var i=this;this.queryOptionOverride("closeOnClickAway",t)&&(this.$modalEl&&this.$modalEl.addClass("is-clickable"),e(document).on("mousedown",this.clickAwayHandler=function(t){e(t.target).closest(i.el).length||i.close()}))},destroyCloseOnClickAway:function(){this.clickAwayHandler&&e(document).off("mousedown",this.clickAwayHandler)},initializeDragging:function(t){if(this.queryOptionOverride("isDraggable",t)){var i=this.queryOptionOverride("draggableSelector",t),n=this;this.$el.on("mousedown",function(t){e(t.target).closest(i).length&&n.startDragListening(t)}).addClass(this.draggableClassName)}},startDragListening:function(t){function i(e){o=e.pageX-w,r=e.pageY-_,!d&&o*o+r*r>c*c&&(d=!0,l._trigger("dragStart")),d&&(s=y.top+r,a=y.left+o,s=Math.max(m,Math.min(v,s)),a=Math.max(g,Math.min(b,a)),u.css({top:s,left:a}))}function n(){e(document).off("mousemove",i),l._trigger("dragEnd")}var o,r,s,a,l=this,c=10,d=!1,u=this.$el,h=u.outerWidth(),p=u.outerHeight(),f=u.offsetParent().offset(),m=-f.top,g=-f.left,v=e(document).height()-f.top-p,b=e(document).width()-f.left-h,y=u.position(),w=t.pageX,_=t.pageY;e(document).on("mousemove",i).on("mouseup",n)},_onDragStart:function(){this.removeArrow()},initializeFollow:function(t){var i=e(this.queryOptionOverride("pointAt",t));i.on("mousemove.follow",this.followMouse.bind(this))},followMouse:function(e){this.$el.css({top:e.pageY+n,left:e.pageX+n})},initializeRepositioning:function(i){var n=this;this.queryOptionOverride("positionRefresh",i)&&e(window).on("resize scroll",this.repositionHandler=t.debounce(function(){n.updatePosition()},100))},destroyRepositioning:function(){this.repositionHandler&&e(window).off("resize scroll",this.repositionHandler)},updatePosition:function(t){null==t&&(t=this.currentOpenOptions);var i=this.queryOptionOverride("pointAt",t);if("string"==typeof i||i instanceof e)i=e(i),i.length||(i=null);else if("object"==typeof i)for(var n=["docTop","docLeft","width","height"],o=0;o<n.length;o++)if(!(n[o]in i))throw new Error("Missing property on pointAt object. Required: docTop, docLeft, width, height");this.$alignmentWrapperEl&&(this.$el.toggleClass(this.vAlignmentTopClassName,"top"===this.vAlignment),this.$el.toggleClass(this.vAlignmentCenterClassName,"center"===this.vAlignment),this.$alignmentWrapperEl.toggleClass("alignment-wrapper--v-center","center"===this.vAlignment));var r=this.queryOptionOverride("follow",t);i&&!r&&this._pointAtElement(i,t)},_pointAtElement:function(t,n){this.$el.css("position","absolute");var o=this.queryOptionOverride("placement",n),r=parseInt(this.queryOptionOverride("gutter",n),10),s=this.queryOptionOverride("arrowClassName",n),a=parseInt(this.queryOptionOverride("arrowSize",n),10),l=parseInt(this.queryOptionOverride("arrowGap",n),10),c=this.queryOptionOverride("allowLeftRight",n),d=this.queryOptionOverride("preferTop",n),u=this.queryOptionOverride("preferBottom",n),h=this.queryOptionOverride("showPointAtArrow",n),p=this.queryOptionOverride("boundingContainer",n);if(p)var f=e(p);var m,g=i.getViewportRect(),v=g.bottom-g.top,b=g.right-g.left,y=e(window).width(),w=e(window).height(),_=e(window).scrollTop(),E=e(window).scrollLeft(),T=i.getElDimensions(this.$el);if(t instanceof e)m=i.getElDimensions(t);else{var C=t.width/2,S=t.height/2;m={width:t.width,height:t.height,docLeft:t.docLeft,docRight:t.docLeft+t.width,docTop:t.docTop,docBottom:t.docTop+t.height,docCenterX:t.docLeft+C,docCenterY:t.docTop+S,viewportLeft:t.docLeft-g.left,viewportRight:t.docLeft-g.left+t.width,viewportTop:t.docTop-g.top,viewportBottom:t.docTop-g.top+t.height,viewportCenterX:t.docLeft-g.left+C,viewportCenterY:t.docTop-g.top+S}}if("auto"===o||!o){var D=Math.max(0,m.viewportTop),I=Math.max(0,v-m.viewportBottom),k=Math.max(0,m.viewportLeft),O=Math.max(0,b-m.viewportRight);if(d&&D>=T.height)o="top";else if(u&&I>=T.height)o="bottom";else{var R,x=[],A=0;for(c&&(x.push(["right",O]),x.push(["left",k])),u?(x.push(["top",D]),x.push(["bottom",I])):(x.push(["bottom",I]),x.push(["top",D])),R=0;R<x.length;R++)x[R][1]>=A&&(A=x[R][1],o=x[R][0])}}var P,M;this.removeArrow();var N=this.$arrow=e('<span class="'+s+'"></span>');switch(o){case"top":P=m.docTop-T.height-a-l,M=m.docCenterX-T.width/2,N.addClass(s+"--down");break;case"bottom":P=m.docBottom+a+l,M=m.docCenterX-T.width/2,N.addClass(s+"--up");break;case"left":P=m.docCenterY-T.height/2,M=m.docLeft-T.width-a-l,N.addClass(s+"--right");break;case"right":P=m.docCenterY-T.height/2,M=m.docRight+a+l,N.addClass(s+"--left")}if(f){var L=i.getElDimensions(f);P=Math.max(P,L.docTop+r),P=Math.min(P,L.docBottom-T.height-r),M=Math.max(M,L.docLeft+r),M=Math.min(M,L.docRight-T.width-r)}else P=Math.max(P,_+r),P=Math.min(P,_+w-T.height-r),M=Math.max(M,E+r),M=Math.min(M,E+y-T.width-r);if(h){switch(o){case"top":case"bottom":N.css({left:m.docCenterX-M-a});break;case"left":case"right":N.css({top:m.docCenterY-P-a})}this.$el.append(N)}this.$el.offset({top:P,left:M})},removeArrow:function(){this.$arrow&&(this.$arrow.remove(),this.$arrow=null)},close:function(){var e=this;return e.delay&&clearTimeout(e.delay),e.isOpen?this._trigger("before:close").then(function(){e.executeClose(),e._trigger("close"),e.isOpen=!1}):void 0},_onBeforeClose:function(){return this.internalOverlay?this.internalOverlay.close():void 0},executeClose:function(){var e=this,t=this.$el,n=this.$modalEl;return this.currentOpenOptions=null,this.destroyCloseOnEsc(),this.destroyCloseOnEnter(),this.destroyCloseOnClick(),this.destroyCloseOnClickAway(),this.destroyRepositioning(),t.removeClass("is-in").add(n||null).addClass("is-out"),i.promiseTransition(t).then(function(){e.destroy(),t.removeClass("is-out").removeClass("modal__subject"),e.$outerEl&&(e.$outerEl.remove(),e.$outerEl=null)})}};return{Mixin:o}}),_wAMD.define("ui-framework/js/components/topbar",["jquery","underscore","./base-view"],function(e,t,i){var n=i.extend({className:"topbar",template:'{{#hasContainer}}<div class="topbar__container">{{/hasContainer}}\n	<h1 class="topbar__title">{{title}}</h1>\n	{{#backLink}}\n		<div class="topbar__left">\n			<a class="{{backClassNames}}">\n				{{#html}}\n					{{{html}}}\n				{{/html}}\n				{{^html}}\n					{{#isClose}}\n						<span class="icon">xlarge</span>\n					{{/isClose}}\n					{{#isDirectional}}\n						<span class="icon">leftarrowlarge</span>\n					{{/isDirectional}}\n					{{#icon}}\n						<span class="icon">{{icon}}</span>\n					{{/icon}}\n					{{#text}}\n						{{text}}\n					{{/text}}\n				{{/html}}\n			</a>\n		</div>\n	{{/backLink}}\n	{{#forwardLink}}\n		<div class="topbar__right">\n			<a class="{{forwardClassNames}}">\n				{{#html}}\n					{{{html}}}\n				{{/html}}\n				{{^html}}\n					{{#text}}\n						{{text}}\n					{{/text}}\n					{{#icon}}\n						<span class="icon">{{icon}}</span>\n					{{/icon}}\n					{{#isDirectional}}\n						<span class="icon">rightarrowlarge</span>\n					{{/isDirectional}}\n				{{/html}}\n			</a>\n		</div>\n	{{/forwardLink}}\n{{#hasContainer}}</div>{{/hasContainer}}',title:"Topbar",isDark:!1,isEditMode:!1,hasContainer:!1,hasTopbarBorder:!0,backLink:null,forwardLink:null,isBackEnabled:!0,isForwardEnabled:!0,events:{"click .topbar__close":"onBackClick","click .topbar__back":"onBackClick","click .topbar__forward":"onForwardClick"},_initialize:function(){this.title=this.queryOption("title"),this.isEditMode=this.queryOption("isEditMode"),this.setBackLink(this.queryOption("backLink")),this.setForwardLink(this.queryOption("forwardLink"))},getRenderData:function(){var e=[this.backLink.isClose?"topbar__close":"topbar__action topbar__back",this.isBackEnabled?"":"is-inactive",this.backLink.className||""].join(" "),t=["topbar__action topbar__forward",this.isForwardEnabled?"":"is-inactive",this.forwardLink.className||""].join(" ");return this.backLink.isClose&&"xlarge"===this.backLink.icon&&(this.backLink.icon=null),{title:this.title,backLink:this.backLink,forwardLink:this.forwardLink,backClassNames:e,forwardClassNames:t,hasContainer:this.queryOption("hasContainer")}},render:function(){return this.$el.toggleClass("topbar--dark",this.queryOption("isDark")).toggleClass("topbar--editmode",this.queryOption("isEditMode")).toggleClass("dialog__topbar--borderless",!this.queryOption("hasTopbarBorder")),i.prototype.render.call(this)},onBackClick:function(){this.isBackEnabled&&this._trigger("back")},onForwardClick:function(){this.isForwardEnabled&&this._trigger("forward")},setTitle:function(e){this.title=e,this.rerender()},setBackLink:function(e){this.backLink=this.getNormalizedLink(e),this.extendEvents(e),void 0!==this.backLink.isEnabled&&(this.isBackEnabled=this.backLink.isEnabled,delete this.backLink.isEnabled),this.rerender()},setForwardLink:function(e){this.forwardLink=this.getNormalizedLink(e),this.extendEvents(e),void 0!==this.forwardLink.isEnabled&&(this.isForwardEnabled=this.forwardLink.isEnabled,delete this.forwardLink.isEnabled),this.rerender()},setBackEnabled:function(e){e!=this.isBackEnabled&&(this.isBackEnabled=e,this.rerender())},setForwardEnabled:function(e){e!=this.isForwardEnabled&&(this.isForwardEnabled=e,this.rerender())},rerender:function(){this.getIsRendered()&&this.render()},getIsRendered:function(){return Boolean(this.$el&&this.$el.find(".topbar__title").length)},getNormalizedLink:function(e){return"string"==typeof e?{text:e}:e||!1}});return n}),_wAMD.define("ui-framework/js/components/interval",[],function(){function e(){i.forEach(function(e){e()})}var t,i=[];return{add:function(n){return-1===i.indexOf(n)?(i.push(n),t||(t=setInterval(e,250)),this):void 0},remove:function(e){var n=i.indexOf(e);return n>-1&&(i.splice(n,1),0===i.length&&(clearInterval(t),t=null)),this}}}),_wAMD.define("ui-framework/js/components/takeover",["jquery","underscore","./panel","./overlay","./topbar","./interval","nanoscroller"],function(e,t,i,n,o,r){var s=i.extend(e.extend({},n.Mixin,{className:"takeover",innerOverlayClassName:"takeover__overlay",contentViewTriggerPrefix:"takeover",topbar:null,title:"Takeover",isTopbarDark:!0,backLink:{action:"close",text:"Close",isClose:!0},loadingText:"Loading content...",_initialize:function(){var e=this;i.prototype._initialize.call(this),this.watchContentSize=this.watchContentSize.bind(this),this.topbar=new o({title:this.queryOption("title"),isDark:this.queryOption("isTopbarDark"),hasContainer:!0}).on("back",function(){e.back()}).on("forward",function(){e.forward()})},processContentView:function(e){this.extendOptions(t.result(e,"takeoverOptions",{})),e.takeover=this,this.topbar&&(this.topbar.setTitle(this.queryOption("title")),this.topbar.setBackLink(this.getBackLink()),this.topbar.setForwardLink(this.getForwardLink()))},destroy:function(){r.remove(this.watchContentSize),this.topbar.destroy(),i.prototype.destroy.call(this)},renderSkeleton:function(){var e=this.topbar;e.setBackLink(this.getBackLink()),e.setForwardLink(this.getForwardLink()),e.render().$el.addClass("takeover__topbar").appendTo(this.$el),this.$el.append('<div class="takeover__scroll"><div class="takeover__content"></div><div class="takeover-loading"><div class="takeover-loading__container"><div class="takeover-spinner"><div class="takeover-spinner__bg"></div></div><span class="takeover-loading__text">'+this.queryOption("loadingText")+"</span></div></div></div>")},getBackLink:function(){return this.queryOption("backLink")},getForwardLink:function(){return this.queryOption("forwardLink")},queryHeaderOuterEl:function(){return this.topbar.$el},queryContentOuterEl:function(){return this.$el.find(".takeover__scroll")},queryContentInnerEl:function(){return this.$el.find(".takeover__content")},queryScrollEl:function(){return this.queryContentOuterEl()},applyScrollbar:function(){var e=this.queryScrollEl();e.nanoScroller({alwaysVisible:!0,preventPageScrolling:!0,contentClass:"takeover__content",paneClass:"takeover__scrollbar",sliderClass:"takeover__scrollbar-slider"}),r.add(this.watchContentSize)},watchContentSize:function(){var e=this.queryContentInnerEl().children(),t=e.height();this._contentHeight!==t&&this.applyScrollbar(),this._contentHeight=t},back:function(){var t=this,i=this.queryOption("backLink"),n=(i||{}).action;return this.topbar.isBackEnabled?this._trigger("before:back").then(function(){n&&t[n].call(t),t._trigger("back")}):e.Deferred().reject().promise()},forward:function(){var t=this,i=this.queryOption("forwardLink"),n=(i||{}).action;return this.topbar.isForwardEnabled?this._trigger("before:forward").then(function(){n&&t[n].call(this),t._trigger("forward")}):e.Deferred().reject().promise()},setIsLoading:function(e){e=!!e,this.$el.find(".takeover-loading").toggleClass("is-visible",e),this.$el.find(".takeover__content").toggle()},updatePosition:function(){},_onBeforeOpen:function(){s.visibleCnt++||e("body").css("overflow","hidden")},_onClose:function(){--s.visibleCnt||(this.$el.css("overflow","hidden"),this.$("> *").each(function(){var t=e(this);t.width(t.width())}),e("body").css("overflow",""))}}));return s.visibleCnt=0,e.each(["setTitle","setBackLink","setForwardLink","setBackEnabled","setForwardEnabled"],function(e,t){s.prototype[t]=function(){this.topbar[t].apply(this.topbar,arguments)}}),s.takeover=function(e){var t=new s(e);t.open()},i.prototype.takeover=function(e){var t=new s(e);this.openOverlay(t)},s}),_wAMD.define("tpl!billing/billing-takeover/takeover.tpl",[],function(){return'<iframe id="billing-frame" src={{{url}}} frameborder="0"></iframe>\n\n<div class="dialog-loading">\n	<div class="dialog-loading__container">\n		<div class="dialog-spinner">\n			<div class="dialog-spinner__bg"></div>\n		</div>\n		<span class="dialog-loading__text">{{#tl}}templates.billing.billing-takeover.takeover_1{{/tl}}</span>\n	</div>\n</div>'}),_wAMD.define("billing/views/BillingTakeoverView",["jquery","underscore","mustache","ui-framework/js/components/takeover","tpl!billing/billing-takeover/takeover.tpl"],function(e,t,i,n,o){return n.extend({wrapClassName:"ui-framework billing-takeover-container",hasContentLegacyStyles:!1,renderContent:function(e){var t=this,n=i.render(o,{url:t.options.url});e.html(n)},ui:{iframe:"#billing-frame"},topbar:null,initialize:function(){var t=this;e(window).on("message",null,{view:t},t.onWindowMessage)},onShow:function(){this.setIsLoading(!0),this.topbar.destroy()},onWindowMessage:function(e){var i=e.data.view,n=e.originalEvent.data,o="";switch(t.isObject(n)?(o=n.message,i.lastTransaction=n.last_transaction):o=n,o){case"billingFrameClose":i.close();break;case"billingFrameReady":i.setIsLoading(!1)}},setIsLoading:function(e){this.$el.find(".dialog-loading").toggleClass("is-visible",e)}})}),Weebly=window.Weebly||{};var currentBlog={postId:0,newPost:0,title:"",categories:"",saving:0,permalink:"",comments:"",date:""},preloadedImages=Array(),lastEventID;lastEventID=Array(),Weebly.trackingArray=Array();var errorDialog,retriableErrorDialog,retriableAjax,warningDialog,showDialogElement,confirmDialog,lastConfirmOk=!1,whoisDialog;shortcut={all_shortcuts:{},add:function(e,t,i){var n={type:"keydown",propagate:!1,disable_in_input:!1,target:document,keycode:!1};if(i)for(var o in n)"undefined"==typeof i[o]&&(i[o]=n[o]);else i=n;var r=i.target;"string"==typeof i.target&&(r=document.getElementById(i.target));e=e.toLowerCase();var s=function(n){if(n=n||window.event,i.disable_in_input){var o;if(n.target?o=n.target:n.srcElement&&(o=n.srcElement),3==o.nodeType&&(o=o.parentNode),"INPUT"==o.tagName||"TEXTAREA"==o.tagName)return}var r;n.keyCode?r=n.keyCode:n.which&&(r=n.which);var s=String.fromCharCode(r).toLowerCase();188==r&&(s=","),190==r&&(s=".");var a=e.split("+"),l=0,c={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},d={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},u={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}};n.ctrlKey&&(u.ctrl.pressed=!0),n.shiftKey&&(u.shift.pressed=!0),n.altKey&&(u.alt.pressed=!0),n.metaKey&&(u.meta.pressed=!0);for(var h=0;k=a[h],h<a.length;h++)"ctrl"==k||"control"==k?(l++,u.ctrl.wanted=!0):"shift"==k?(l++,u.shift.wanted=!0):"alt"==k?(l++,u.alt.wanted=!0):"meta"==k?(l++,u.meta.wanted=!0):k.length>1?d[k]==r&&l++:i.keycode?i.keycode==r&&l++:s==k?l++:c[s]&&n.shiftKey&&(s=c[s],s==k&&l++);return l==a.length&&u.ctrl.pressed==u.ctrl.wanted&&u.shift.pressed==u.shift.wanted&&u.alt.pressed==u.alt.wanted&&u.meta.pressed==u.meta.wanted?(t(n),
Event.stop(n),!1):!0};this.all_shortcuts[e]={callback:s,target:r,event:i.type},r.addEventListener?r.addEventListener(i.type,s,!1):r.attachEvent?r.attachEvent("on"+i.type,s):r["on"+i.type]=s},remove:function(e){e=e.toLowerCase();var t=this.all_shortcuts[e];if(delete this.all_shortcuts[e],t){var i=t.event,n=t.target,o=t.callback;n.detachEvent?n.detachEvent("on"+i,o):n.removeEventListener?n.removeEventListener(i,o,!1):n["on"+i]=!1}}},Weebly.keyTracker={},window.disableBackspaceExit=!0,document.observe("keydown",function(e){if(!Event.element(e).hasClassName("editable-text")){e.keyCode?code=e.keyCode:e.which&&(code=e.which);var t,i=String.fromCharCode(code).toLowerCase();if(e.target?t=e.target:e.srcElement&&(t=e.srcElement),3==t.nodeType&&(t=t.parentNode),disableBackspaceExit&&8==code&&"INPUT"!=t.tagName&&"TEXTAREA"!=t.tagName)return e.keyCode=0,event.keyCode=0,e.returnValue=!1,event.returnValue=!1,Event.stop(e),!1;Weebly.keyTracker[i]=1,Weebly.keyTracker.p&&Weebly.keyTracker.s&&Weebly.keyTracker.u&&showAbout()}}),document.observe("keyup",function(e){if(!Event.element(e).hasClassName("editable-text")){e.keyCode?code=e.keyCode:e.which&&(code=e.which);var t=String.fromCharCode(code).toLowerCase();Weebly.keyTracker[t]=0}}),$.StealMouse=Class.create(),$.StealMouse.__class_name="$.StealMouse",$.StealMouse.prototype.__class_name="$.StealMouse",$_StealMouse=$.StealMouse,Object.extend($.StealMouse,{on:function(e){e.__steal_mouseup=function(t){$.StealMouse._sendMouseEvent(t,"mouseup",e)},Event.observe(e.contentWindow.document,"mouseup",e.__steal_mouseup),e.__steal_mousedown=function(t){$.StealMouse._sendMouseEvent(t,"mousedown",e)},Event.observe(e.contentWindow.document,"mousedown",e.__steal_mousedown),e.__steal_mousemove=function(t){$.StealMouse._sendMouseEvent(t,"mousemove",e)}},off:function(){Event.stopObserving(ifr.contentWindow.document,"mouseup",ifr.__steal_mouseup),Event.stopObserving(ifr.contentWindow.document,"mousedown",ifr.__steal_mousedown),Event.stopObserving(ifr.contentWindow.document,"mousemove",ifr.__steal_mousemove)},_sendMouseEvent:function(e,t,i){var n=Position.cumulativeOffset(i),o=[0,0],r={x:n[0]+o[0],y:n[1]+o[1]};if(document.createEvent){var s=document.createEvent("MouseEvents");s.initMouseEvent(t,!0,!1,window,e.detail,e.screenX,e.screenY,e.clientX+r.x,e.clientY+r.y,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,null),i.dispatchEvent(s)}else{var s=document.createEventObject();s.detail=e.detail,s.screenX=e.screenX,s.screenY=e.screenY,s.clientX=e.clientX+r.x,s.clientY=e.clientY+r.y,s.ctrlKey=e.ctrlKey,s.altKey=e.altKey,s.shiftKey=e.shiftKey,s.metaKey=e.metaKey,s.button=e.button,s.relatedTarget=e.relatedTarget,s.target=i,s.srcElement=i}}});var toJsonString;!function(){function e(e){return/[\x00-\x19\'\\]/.test(e)?e.replace(/([\\'])/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/[\x00-\x19]/g,""):e}toJsonString=function(t){var i;switch(typeof t){case"string":return"'"+e(t)+"'";case"number":return String(t);case"object":if(t){var n=[];if(t.constructor==Array){for(var o=0;o<t.length;o++){var r=toJsonString(t[o]);r!=i&&(n[n.length]=r)}return"["+n.join(",")+"]"}if(t.constructor==Date)return"new Date("+t.getTime()+")";for(var s in t){var r=toJsonString(t[s]);r!=i&&(n[n.length]=(/^[A-Za-z_]\w*$/.test(s)?"'"+s+"':":"'"+e(s)+"':")+r)}return"{"+n.join(",")+"}"}return"null";case"boolean":return String(t);case"function":return;case"undefined":return"null"}}}(),Weebly.on={textIsChanging:0,currentTextElement:null,currentTextCallBack:null,textChange:function(e,t,i,n){e=$(e),i||(i=1500),e!=Weebly.on.currentTextElement&&"function"==typeof Weebly.on.currentTextElement&&Weebly.on.currentTextCallBack(),(Weebly.on.currentTextElement!=e||"undefined"!=typeof n)&&("undefined"==typeof n?(Weebly.on.currentTextElement=e,Weebly.on.currentTextCallBack=t,Weebly.on.myFunction=Weebly.on.textChange.bind(Weebly.on.textChange,e,t,i,e.value),setTimeout("Weebly.on.myFunction();",i)):e&&e.value&&e.value==n||""==e.value&&""==n?(Weebly.on.currentTextCallBack(e.value),Weebly.on.currentTextElement=null,Weebly.on.currentTextCallBack=null):(Weebly.on.myFunction=Weebly.on.textChange.bind(Weebly.on.textChange,e,t,i,e.value),setTimeout("Weebly.on.myFunction();",i)))}};var currentHref=document.location.href.replace(/#.*$/,""),firstTime=(new Date).getTime(),publishAfterPro=!1,ElementExtensions={center:function(e,t,i){e=$(e);var n=e.getDimensions(),o=document.viewport.getDimensions(),r=document.viewport.getScrollOffsets(),s=o.width/2+r.left-n.width/2,a=o.height/2+r.top-n.height/2;return t&&t>s&&(s=parseInt(t)),i&&i>a&&(a=parseInt(i)),e.setStyle({position:"absolute",top:Math.floor(a)+"px",left:Math.floor(s)+"px"}),e},getInnerText:function(e){return Weebly.jQuery(e).text()},setInnerText:function(e,t){return Weebly.jQuery(e).text(t)}};Element.addMethods(ElementExtensions),String.prototype.safeReplace=function(e,t){return this.replace(e,(t+"").replace(/\$/g,"$$$$"))},_loadingLevel=0,window.W_DEBUG&&(window.loadingQueue=[]),_wAMD.define("legacy/weebly_utils",["analytics/Tracking","shared/permissions/restrictions","editor-site-shared/relay"],function(){}),_wAMD.define("editor/ajax/module",["jquery","underscore","editor/app","editor-site-shared/relay","editor-site-shared/ajax/AjaxBaseModule","editor-site-shared/ajax/AjaxResponseMessage","editor-site-shared/ui/context","legacy/weebly_utils"],function(e,t,i,n,o,r,s){function a(e){var i={};return e=decodeURI(e),e=e.replace(/"/g,'\\"'),e=e.replace(/'/g,"\\"),e=e.split("&"),t.each(e,function(e){e=e.split(/=(.+)/),i[e[0]]=e[1]}),i}var l={},c=function(o){function l(e,i){var n=c[e];return-1!==t.indexOf(n,i)}var c={rpc:["Weebly.Editor.RPC.ThemeOption.getSavedThemeOptions","Weebly.Section.RPC.HeaderSection.getConnectedHeaderBackgroundPages","Weebly.Section.RPC.HeaderSection.setConnectedHeaderBackgroundPages","Weebly.Editor.RPC.Elements.saveProperties","Weebly.Editor.RPC.Elements.removeImageTextImage","Weebly.Editor.RPC.Elements.combineImageTextElements","Weebly.Editor.RPC.Elements.combineTextImageElements","Weebly.Editor.RPC.Elements.moveImageTextElementImage","Weebly.Editor.RPC.Elements.moveElement","Weebly.Editor.RPC.Elements.splitImageTextElement","Weebly.Editor.RPC.Elements.removeElement","Weebly.Editor.RPC.Elements.removeEmptyColumns","Weebly.Editor.RPC.Elements.getElementDefinition","Weebly.Editor.RPC.PlatformElementInstance.getEditorSettings","Weebly.Editor.RPC.PlatformElementInstance.updateSettings","Weebly.Editor.RPC.PlatformElementInstance.getSettingsJWT","Weebly.Editor.RPC.PlatformElementInstance.completeTutorial","Weebly.Editor.RPC.Linker.getFiles","Weebly.Editor.RPC.Blog.getBlogPosts","Weebly.Section.RPC.Section.copyToPage","Weebly.Section.RPC.Section.moveToPage","Weebly.Editor.RPC.BackgroundVideo.getBackgroundVideosByCategory","Weebly.Editor.RPC.ImageEditor.resizeImageArea","Weebly.Editor.RPC.ImageEditor.resizeImageElement","Weebly.Editor.RPC.ImageEditor.resetHeaderImage","Weebly.Commerce.RPC.Product.read","Weebly.Commerce.RPC.Product.update","Weebly.Commerce.RPC.Category.read","Weebly.Commerce.RPC.Category.update","Weebly.Commerce.RPC.Category.saveHierarchy","Weebly.Commerce.RPC.Category.getHierarchy","Weebly.Commerce.RPC.Category.generateProductList","Weebly.Commerce.RPC.Overview.getUsedCommerceFeatures"],ajax:["blogdeletecomment","gettheme","getmobiletheme","saveproperties","content","sitetitle","savearea","getareas","savecustomhtml","saveadsense","checkpageupdates","flickergetid","redrawproduct","setuserpreference","updateproduct"]},d={getWhitelist:function(){return e.extend(!0,{},c)},rpc:function(i){var n,o=e.Deferred(),r=Array.prototype.slice.call(arguments,1);if(!i||!l("rpc",i))return window.W_DEBUG&&console.error("RPC request `"+i+"` not allowed!"),o.reject(),o.promise();t.has(r[0]||{},"filter")&&t.each(r[0].filter,function(e){"owner_id"===e.property?e.value=window.userID:"site_id"===e.property&&(e.value=window.currentSite)});var s,a=i.split("."),c=(a.shift(),a.shift()),d=a.shift();return d&&"RPC"===d?(s=Weebly[c]?Weebly[c].RPC:{},a.every(function(e,t){return s=s[e]}),t.isUndefined(s)?(window.W_DEBUG&&console.error("The RPC method is not defined: "+i),o.reject(),n=o.promise()):n=s.apply(this,r),n):(window.W_DEBUG&&console.error("Prototcol `"+d+"` is invalid!"),o.reject(),o.promise())},ajax:function(i){var n,o=e.Deferred(),s={};return"string"==typeof i.parameters&&(i.parameters=a(i.parameters)),n=t.result(i.parameters,"pos"),n&&l("ajax",n)?(t.has(i.parameters,"cookie")&&(i.parameters.cookie=document.cookie),t.has(i.parameters,"token")&&(i.parameters.token=Weebly.RequestToken),t.isUndefined(i.asynchronous)||(s.asynchronous=i.asynchronous),t.isUndefined(i.bgRequest)||(s.bgRequest=i.bgRequest),s.parameters=i.parameters,s.onSuccess=function(e){o.resolve(new r(e))},s.onFailure=function(e){e&&e.request&&e.request.isRetriable()||o.reject(new r(e))},s.onComplete=function(){},new window.Ajax.Request(window.ajax,s),o.promise()):(window.W_DEBUG&&console.error("Ajax request `"+n+"` not allowed!"),o.reject(),o.promise())}};o.on("start",function(){i.reqres.setHandlers({"ajax:whitelist":d.getWhitelist}),n.reqres.setHandlers({"ajax:rpc":d.rpc,"ajax:request":d.ajax}),n.commands.setHandlers({"ajax:showError":function(e,t,i){window.showError(e,t,i)},"ajax:showRetriableError":function(e,t,i){window.showRetriableError(e,t,i)}})}),o.on("stop",function(){i.reqres.removeHandlers(["ajax:whitelist"]),n.reqres.removeHandlers(["ajax:rpc","ajax:request"]),n.commands.removeHandlers(["ajax:showError","ajax:showRetriableError"])}),s.inEditorContext()&&(window.startWait=o.startWait=function(){i.loading.start("AjaxUtilsStub::startWait")},window.endWait=o.endWait=function(){i.loading.stop("AjaxUtilsStub::startWait")})};return l=i.module("Ajax",{moduleClass:o,define:c})}),_wAMD.define("editor/build/themes/weebly_cache",["editor/ajax/module"],function(e){function t(t,i,n,o){return function(r,s){var a=o?jQuery.extend({},o):{};a.pos=t,a[i||"keys"]=r,a.cookie=document.cookie,a.token=Weebly.RequestToken,new Ajax.Request(e.ajax,{parameters:a,onSuccess:function(e){s(n?e.responseText.evalJSON():e.responseText)},onFailure:e.errFunc})}}function i(e){var t=this,i={};t.getCachedValue=function(e){return e in i?i[e]:null},t.get=function(t,n){t in i?n(i[t]):e(t,function(e){e[t]&&(e=e[t]),i[t]=e,n(e)})},t.insert=function(e,t){i[e]=t},t.clear=function(e){void 0!==e?delete i[e]:i={}}}var n={themeCache:new i(t("gettheme","",!0,{format:"mustache"})),mobileThemeCache:new i(t("getmobiletheme","",!0,{format:"mustache"}))};return Weebly.themeCache=n.themeCache,n}),_wAMD.define("editor/build/themes/data",["jquery","underscore","editor/build/themes/weebly_cache","util/general-utils"],function(e,t,i,n){var o={currentThemeData:{},currentTheme:"",currentMobileTheme:"legacy",currentStandardTheme:"",currentThemeColor:window.currentThemeColor};return o.setCurrentTheme=function(e,t){t?window.currentMobileTheme=e:window.currentStandardTheme=e,window.currentTheme=e},o.setCurrentThemeColor=function(e){window.currentThemeColor=e},o.setCurrentThemeData=function(e){if(o.currentThemeData!==e){for(var i in o.currentThemeData)delete o.currentThemeData[i];t.extend(o.currentThemeData,e)}},o.getCurrentThemeData=function(t){var n=t?i.mobileThemeCache:i.themeCache,o=t?window.currentMobileTheme:window.currentTheme,r=e.Deferred();return n.get(o,function(e){e.is_mobile=t,e.current_theme_color=window.currentThemeColor,r.resolve(e)}),r.promise()},o.getCurrentThemeHeaderSectionSettingValue=function(e,t,i){var r={};if(r=o.currentThemeData?o.currentThemeData:o.getCurrentThemeData(!1)){var s=n.getNestedValue(r,["page-types",i,"header-section",e],null);return null!==s?s:n.getNestedValue(r,["header-section",e],t)}return t},t.extend(window,o),o}),function(e,t){_wAMD.define("vendor/bower_components/mobile-detect/mobile-detect",[],function(){function e(e,t){return null!=e&&null!=t&&e.toLowerCase()===t.toLowerCase()}function i(e,t){var i,n,o=e.length;if(!o||!t)return!1;for(i=t.toLowerCase(),n=0;o>n;++n)if(i===e[n].toLowerCase())return!0;return!1}function n(e){for(var t in e)a.call(e,t)&&(e[t]=new RegExp(e[t],"i"))}function o(e,t){this.ua=e||"",this._cache={},this.maxPhoneWidth=t||600}var r={};r.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",Dell:"Dell.*Streak|Dell.*Aero|Dell.*Venue|DELL.*Venue Pro|Dell Flash|Dell Smoke|Dell Mini 3iX|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b",Samsung:"\\bSamsung\\b|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323)",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533",Asus:"Asus.*Galaxy|PadFone.*Mobile",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo 3DS",Amoi:"Amoi",INQ:"INQ",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y|SM-T280",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI)\\b",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP612|SOT31",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris [E|M]10)|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android.*\\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",
ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Puffin:"Puffin",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]","UC Browser":"UC Browser[VER]",MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},r.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var s,a=Object.prototype.hasOwnProperty;return r.FALLBACK_PHONE="UnknownPhone",r.FALLBACK_TABLET="UnknownTablet",r.FALLBACK_MOBILE="UnknownMobile",s="isArray"in Array?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},function(){var e,t,i,o,l,c,d=r.mobileDetectRules;for(e in d.props)if(a.call(d.props,e)){for(t=d.props[e],s(t)||(t=[t]),l=t.length,o=0;l>o;++o)i=t[o],c=i.indexOf("[VER]"),c>=0&&(i=i.substring(0,c)+"([\\w._\\+]+)"+i.substring(c+5)),t[o]=new RegExp(i,"i");d.props[e]=t}n(d.oss),n(d.phones),n(d.tablets),n(d.uas),n(d.utils),d.oss0={WindowsPhoneOS:d.oss.WindowsPhoneOS,WindowsMobileOS:d.oss.WindowsMobileOS}}(),r.findMatch=function(e,t){for(var i in e)if(a.call(e,i)&&e[i].test(t))return i;return null},r.findMatches=function(e,t){var i=[];for(var n in e)a.call(e,n)&&e[n].test(t)&&i.push(n);return i},r.getVersionStr=function(e,t){var i,n,o,s,l=r.mobileDetectRules.props;if(a.call(l,e))for(i=l[e],o=i.length,n=0;o>n;++n)if(s=i[n].exec(t),null!==s)return s[1];return null},r.getVersion=function(e,t){var i=r.getVersionStr(e,t);return i?r.prepareVersionNo(i):NaN},r.prepareVersionNo=function(e){var t;return t=e.split(/[a-z._ \/\-]/i),1===t.length&&(e=t[0]),t.length>1&&(e=t[0]+".",t.shift(),e+=t.join("")),Number(e)},r.isMobileFallback=function(e){return r.detectMobileBrowsers.fullPattern.test(e)||r.detectMobileBrowsers.shortPattern.test(e.substr(0,4))},r.isTabletFallback=function(e){return r.detectMobileBrowsers.tabletPattern.test(e)},r.prepareDetectionCache=function(e,i,n){if(e.mobile===t){var s,a,l;return(a=r.findMatch(r.mobileDetectRules.tablets,i))?(e.mobile=e.tablet=a,void(e.phone=null)):(s=r.findMatch(r.mobileDetectRules.phones,i))?(e.mobile=e.phone=s,void(e.tablet=null)):void(r.isMobileFallback(i)?(l=o.isPhoneSized(n),l===t?(e.mobile=r.FALLBACK_MOBILE,e.tablet=e.phone=null):l?(e.mobile=e.phone=r.FALLBACK_PHONE,e.tablet=null):(e.mobile=e.tablet=r.FALLBACK_TABLET,e.phone=null)):r.isTabletFallback(i)?(e.mobile=e.tablet=r.FALLBACK_TABLET,e.phone=null):e.mobile=e.tablet=e.phone=null)}},r.mobileGrade=function(e){var t=null!==e.mobile();return e.os("iOS")&&e.version("iPad")>=4.3||e.os("iOS")&&e.version("iPhone")>=3.1||e.os("iOS")&&e.version("iPod")>=3.1||e.version("Android")>2.1&&e.is("Webkit")||e.version("Windows Phone OS")>=7||e.is("BlackBerry")&&e.version("BlackBerry")>=6||e.match("Playbook.*Tablet")||e.version("webOS")>=1.4&&e.match("Palm|Pre|Pixi")||e.match("hp.*TouchPad")||e.is("Firefox")&&e.version("Firefox")>=12||e.is("Chrome")&&e.is("AndroidOS")&&e.version("Android")>=4||e.is("Skyfire")&&e.version("Skyfire")>=4.1&&e.is("AndroidOS")&&e.version("Android")>=2.3||e.is("Opera")&&e.version("Opera Mobi")>11&&e.is("AndroidOS")||e.is("MeeGoOS")||e.is("Tizen")||e.is("Dolfin")&&e.version("Bada")>=2||(e.is("UC Browser")||e.is("Dolfin"))&&e.version("Android")>=2.3||e.match("Kindle Fire")||e.is("Kindle")&&e.version("Kindle")>=3||e.is("AndroidOS")&&e.is("NookTablet")||e.version("Chrome")>=11&&!t||e.version("Safari")>=5&&!t||e.version("Firefox")>=4&&!t||e.version("MSIE")>=7&&!t||e.version("Opera")>=10&&!t?"A":e.os("iOS")&&e.version("iPad")<4.3||e.os("iOS")&&e.version("iPhone")<3.1||e.os("iOS")&&e.version("iPod")<3.1||e.is("Blackberry")&&e.version("BlackBerry")>=5&&e.version("BlackBerry")<6||e.version("Opera Mini")>=5&&e.version("Opera Mini")<=6.5&&(e.version("Android")>=2.3||e.is("iOS"))||e.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||e.version("Opera Mobi")>=11&&e.is("SymbianOS")?"B":(e.version("BlackBerry")<5||e.match("MSIEMobile|Windows CE.*Mobile")||e.version("Windows Mobile")<=5.2,"C")},r.detectOS=function(e){return r.findMatch(r.mobileDetectRules.oss0,e)||r.findMatch(r.mobileDetectRules.oss,e)},r.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},o.prototype={constructor:o,mobile:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===t&&(this._cache.userAgent=r.findMatch(r.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===t&&(this._cache.userAgents=r.findMatches(r.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===t&&(this._cache.os=r.detectOS(this.ua)),this._cache.os},version:function(e){return r.getVersion(e,this.ua)},versionStr:function(e){return r.getVersionStr(e,this.ua)},is:function(t){return i(this.userAgents(),t)||e(t,this.os())||e(t,this.phone())||e(t,this.tablet())||i(r.findMatches(r.mobileDetectRules.utils,this.ua),t)},match:function(e){return e instanceof RegExp||(e=new RegExp(e,"i")),e.test(this.ua)},isPhoneSized:function(e){return o.isPhoneSized(e||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===t&&(this._cache.grade=r.mobileGrade(this)),this._cache.grade}},"undefined"!=typeof window&&window.screen?o.isPhoneSized=function(e){return 0>e?t:r.getDeviceSmallerSide()<=e}:o.isPhoneSized=function(){},o._impl=r,o.version="1.3.5 2016-11-14",o})}(function(e){if("undefined"!=typeof module&&module.exports)return function(e){module.exports=e()};if("function"==typeof _wAMD.define&&_wAMD.define.amd)return define;if("undefined"!=typeof window)return function(e){window.MobileDetect=e()};throw new Error("unknown environment")}()),function(){"use strict";function e(i){return"undefined"==typeof this||Object.getPrototypeOf(this)!==e.prototype?new e(i):(C=this,C.version="3.3.1",C.tools=new T,C.isSupported()?(C.tools.extend(C.defaults,i||{}),t(C.defaults),C.store={elements:{},containers:[]},C.sequences={},C.history=[],C.uid=0,C.initialized=!1):"undefined"!=typeof console&&null!==console&&console.log("ScrollReveal is not supported in this browser."),C)}function t(e){if(e&&e.container){if("string"==typeof e.container)return window.document.documentElement.querySelector(e.container);if(C.tools.isNode(e.container))return e.container;console.log('ScrollReveal: invalid container "'+e.container+'" provided.'),console.log("ScrollReveal: falling back to default container.")}return C.defaults.container}function i(e,t){return"string"==typeof e?Array.prototype.slice.call(t.querySelectorAll(e)):C.tools.isNode(e)?[e]:C.tools.isNodeList(e)?Array.prototype.slice.call(e):[]}function n(){return++C.uid}function o(e,t,i){t.container&&(t.container=i),e.config?e.config=C.tools.extendClone(e.config,t):e.config=C.tools.extendClone(C.defaults,t),"top"===e.config.origin||"bottom"===e.config.origin?e.config.axis="Y":e.config.axis="X"}function r(e){var t=window.getComputedStyle(e.domEl);e.styles||(e.styles={transition:{},transform:{},computed:{}},e.styles.inline=e.domEl.getAttribute("style")||"",e.styles.inline+="; visibility: visible; ",e.styles.computed.opacity=t.opacity,t.transition&&"all 0s ease 0s"!==t.transition?e.styles.computed.transition=t.transition+", ":e.styles.computed.transition=""),e.styles.transition.instant=s(e,0),e.styles.transition.delayed=s(e,e.config.delay),e.styles.transform.initial=" -webkit-transform:",e.styles.transform.target=" -webkit-transform:",a(e),e.styles.transform.initial+="transform:",e.styles.transform.target+="transform:",a(e)}function s(e,t){var i=e.config;return"-webkit-transition: "+e.styles.computed.transition+"-webkit-transform "+i.duration/1e3+"s "+i.easing+" "+t/1e3+"s, opacity "+i.duration/1e3+"s "+i.easing+" "+t/1e3+"s; transition: "+e.styles.computed.transition+"transform "+i.duration/1e3+"s "+i.easing+" "+t/1e3+"s, opacity "+i.duration/1e3+"s "+i.easing+" "+t/1e3+"s; "}function a(e){var t,i=e.config,n=e.styles.transform;t="top"===i.origin||"left"===i.origin?/^-/.test(i.distance)?i.distance.substr(1):"-"+i.distance:i.distance,parseInt(i.distance)&&(n.initial+=" translate"+i.axis+"("+t+")",n.target+=" translate"+i.axis+"(0)"),i.scale&&(n.initial+=" scale("+i.scale+")",n.target+=" scale(1)"),i.rotate.x&&(n.initial+=" rotateX("+i.rotate.x+"deg)",n.target+=" rotateX(0)"),i.rotate.y&&(n.initial+=" rotateY("+i.rotate.y+"deg)",n.target+=" rotateY(0)"),i.rotate.z&&(n.initial+=" rotateZ("+i.rotate.z+"deg)",n.target+=" rotateZ(0)"),n.initial+="; opacity: "+i.opacity+";",n.target+="; opacity: "+e.styles.computed.opacity+";"}function l(e){var t=e.config.container;t&&-1===C.store.containers.indexOf(t)&&C.store.containers.push(e.config.container),C.store.elements[e.id]=e}function c(e,t,i){var n={target:e,config:t,interval:i};C.history.push(n)}function d(){if(C.isSupported()){p();for(var e=0;e<C.store.containers.length;e++)C.store.containers[e].addEventListener("scroll",u),C.store.containers[e].addEventListener("resize",u);C.initialized||(window.addEventListener("scroll",u),window.addEventListener("resize",u),C.initialized=!0)}return C}function u(){S(p)}function h(){var e,t,i,n;C.tools.forOwn(C.sequences,function(o){n=C.sequences[o],e=!1;for(var r=0;r<n.elemIds.length;r++)i=n.elemIds[r],t=C.store.elements[i],E(t)&&!e&&(e=!0);n.active=e})}function p(){var e,t;h(),C.tools.forOwn(C.store.elements,function(i){t=C.store.elements[i],e=v(t),g(t)?(t.config.beforeReveal(t.domEl),e?t.domEl.setAttribute("style",t.styles.inline+t.styles.transform.target+t.styles.transition.delayed):t.domEl.setAttribute("style",t.styles.inline+t.styles.transform.target+t.styles.transition.instant),m("reveal",t,e),t.revealing=!0,t.seen=!0,t.sequence&&f(t,e)):b(t)&&(t.config.beforeReset(t.domEl),t.domEl.setAttribute("style",t.styles.inline+t.styles.transform.initial+t.styles.transition.instant),m("reset",t),t.revealing=!1)})}function f(e,t){var i=0,n=0,o=C.sequences[e.sequence.id];o.blocked=!0,t&&"onload"===e.config.useDelay&&(n=e.config.delay),e.sequence.timer&&(i=Math.abs(e.sequence.timer.started-new Date),window.clearTimeout(e.sequence.timer)),e.sequence.timer={started:new Date},e.sequence.timer.clock=window.setTimeout(function(){o.blocked=!1,e.sequence.timer=null,u()},Math.abs(o.interval)+n-i)}function m(e,t,i){var n=0,o=0,r="after";switch(e){case"reveal":o=t.config.duration,i&&(o+=t.config.delay),r+="Reveal";break;case"reset":o=t.config.duration,r+="Reset"}t.timer&&(n=Math.abs(t.timer.started-new Date),window.clearTimeout(t.timer.clock)),t.timer={started:new Date},t.timer.clock=window.setTimeout(function(){t.config[r](t.domEl),t.timer=null},o-n)}function g(e){if(e.sequence){var t=C.sequences[e.sequence.id];return t.active&&!t.blocked&&!e.revealing&&!e.disabled}return E(e)&&!e.revealing&&!e.disabled}function v(e){var t=e.config.useDelay;return"always"===t||"onload"===t&&!C.initialized||"once"===t&&!e.seen}function b(e){if(e.sequence){var t=C.sequences[e.sequence.id];return!t.active&&e.config.reset&&e.revealing&&!e.disabled}return!E(e)&&e.config.reset&&e.revealing&&!e.disabled}function y(e){return{width:e.clientWidth,height:e.clientHeight}}function w(e){if(e&&e!==window.document.documentElement){var t=_(e);return{x:e.scrollLeft+t.left,y:e.scrollTop+t.top}}return{x:window.pageXOffset,y:window.pageYOffset}}function _(e){var t=0,i=0,n=e.offsetHeight,o=e.offsetWidth;do isNaN(e.offsetTop)||(t+=e.offsetTop),isNaN(e.offsetLeft)||(i+=e.offsetLeft),e=e.offsetParent;while(e);return{top:t,left:i,height:n,width:o}}function E(e){function t(){var t=c+a*s,i=d+l*s,n=u-a*s,p=h-l*s,f=r.y+e.config.viewOffset.top,m=r.x+e.config.viewOffset.left,g=r.y-e.config.viewOffset.bottom+o.height,v=r.x-e.config.viewOffset.right+o.width;return g>t&&n>f&&i>m&&v>p}function i(){return"fixed"===window.getComputedStyle(e.domEl).position}var n=_(e.domEl),o=y(e.config.container),r=w(e.config.container),s=e.config.viewFactor,a=n.height,l=n.width,c=n.top,d=n.left,u=c+a,h=d+l;return t()||i()}function T(){}var C,S;e.prototype.defaults={origin:"bottom",distance:"20px",duration:500,delay:0,rotate:{x:0,y:0,z:0},opacity:0,scale:.9,easing:"cubic-bezier(0.6, 0.2, 0.1, 1)",container:window.document.documentElement,mobile:!0,reset:!1,useDelay:"always",viewFactor:.2,viewOffset:{top:0,right:0,bottom:0,left:0},beforeReveal:function(e){},afterReveal:function(e){},beforeReset:function(e){},afterReset:function(e){}},e.prototype.isSupported=function(){var e=document.documentElement.style;return"WebkitTransition"in e&&"WebkitTransform"in e||"transition"in e&&"transform"in e},e.prototype.reveal=function(e,s,a,u){var h,p,f,m,g,v;if(void 0!==s&&"number"==typeof s?(a=s,s={}):(void 0===s||null===s)&&(s={}),h=t(s),p=i(e,h),!p.length)return console.log('ScrollReveal: reveal on "'+e+'" failed, no elements found.'),C;a&&"number"==typeof a&&(v=n(),g=C.sequences[v]={id:v,interval:a,elemIds:[],active:!1});for(var b=0;b<p.length;b++)m=p[b].getAttribute("data-sr-id"),m?f=C.store.elements[m]:(f={id:n(),domEl:p[b],seen:!1,revealing:!1},f.domEl.setAttribute("data-sr-id",f.id)),g&&(f.sequence={id:g.id,index:g.elemIds.length},g.elemIds.push(f.id)),o(f,s,h),r(f),l(f),C.tools.isMobile()&&!f.config.mobile||!C.isSupported()?(f.domEl.setAttribute("style",f.styles.inline),f.disabled=!0):f.revealing||f.domEl.setAttribute("style",f.styles.inline+f.styles.transform.initial);return!u&&C.isSupported()&&(c(e,s,a),C.initTimeout&&window.clearTimeout(C.initTimeout),C.initTimeout=window.setTimeout(d,0)),C},e.prototype.sync=function(){if(C.history.length&&C.isSupported()){for(var e=0;e<C.history.length;e++){var t=C.history[e];C.reveal(t.target,t.config,t.interval,!0)}d()}else console.log("ScrollReveal: sync failed, no reveals found.");return C},T.prototype.isObject=function(e){return null!==e&&"object"==typeof e&&e.constructor===Object},T.prototype.isNode=function(e){return"object"==typeof window.Node?e instanceof window.Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},T.prototype.isNodeList=function(e){var t=Object.prototype.toString.call(e),i=/^\[object (HTMLCollection|NodeList|Object)\]$/;return"object"==typeof window.NodeList?e instanceof window.NodeList:e&&"object"==typeof e&&i.test(t)&&"number"==typeof e.length&&(0===e.length||this.isNode(e[0]))},T.prototype.forOwn=function(e,t){if(!this.isObject(e))throw new TypeError('Expected "object", but received "'+typeof e+'".');for(var i in e)e.hasOwnProperty(i)&&t(i)},T.prototype.extend=function(e,t){return this.forOwn(t,function(i){this.isObject(t[i])?(e[i]&&this.isObject(e[i])||(e[i]={}),this.extend(e[i],t[i])):e[i]=t[i]}.bind(this)),e},T.prototype.extendClone=function(e,t){return this.extend(this.extend({},e),t)},T.prototype.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},S=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},"function"==typeof _wAMD.define&&"object"==typeof _wAMD.define.amd&&_wAMD.define.amd?_wAMD.define("vendor/bower_components/scrollreveal/dist/scrollreveal",[],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:window.ScrollReveal=e}(),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(e,t,i){var n=function(e){var n=i.createElement("script"),r=i.getElementsByTagName("head")[0];"file://"==t.location.origin?n.src="http://www.youtube.com/iframe_api":n.src="//www.youtube.com/iframe_api",r.appendChild(n),r=null,n=null,o(e)},o=function(i){"undefined"==typeof YT&&"undefined"==typeof t.loadingPlayer?(t.loadingPlayer=!0,t.dfd=e.Deferred(),t.onYouTubeIframeAPIReady=function(){t.onYouTubeIframeAPIReady=null,t.dfd.resolve("done"),i()}):"object"==typeof YT?i():t.dfd.done(function(e){i()})};YTPlayer={player:null,defaults:{ratio:16/9,videoId:"LSmgKRx5pBo",mute:!0,repeat:!0,width:e(t).width(),playButtonClass:"YTPlayer-play",pauseButtonClass:"YTPlayer-pause",muteButtonClass:"YTPlayer-mute",volumeUpClass:"YTPlayer-volume-up",volumeDownClass:"YTPlayer-volume-down",start:0,pauseOnScroll:!1,fitToBackground:!0,playerVars:{iv_load_policy:3,modestbranding:1,autoplay:1,controls:0,showinfo:0,wmode:"opaque",branding:0,autohide:0},events:null},init:function(i,o){var r=this;return r.userOptions=o,r.$node=e(i),r.$window=e(t),r.defaults.events={onReady:function(e){r.onPlayerReady(e),r.options.pauseOnScroll&&r.pauseOnScroll(),"function"==typeof r.options.callback&&r.options.callback.call(this)},onStateChange:function(e){1===e.data?r.$node.addClass("loaded"):0===e.data&&r.options.repeat&&r.player.seekTo(r.options.start)}},r.options=e.extend(!0,{},r.defaults,r.userOptions),r.options.height=Math.ceil(r.options.width/r.options.ratio),r.ID=(new Date).getTime(),r.holderID="YTPlayer-ID-"+r.ID,r.createBackgroundVideo(),r.$window.on("resize.YTplayer"+r.ID,function(){r.resize(r)}),n(r.onYouTubeIframeAPIReady.bind(r)),r.resize(r),r},pauseOnScroll:function(){var e=this;e.$window.on("scroll.YTplayer"+e.ID,function(){var t=e.player.getPlayerState();1===t&&e.player.pauseVideo()}),e.$window.scrollStopped(function(){var t=e.player.getPlayerState();2===t&&e.player.playVideo()})},createBackgroundVideo:function(){var t=this,i=e('<div id="ytplayer-container'+t.ID+'">									<div id="'+t.holderID+'" class="ytplayer-player"></div>									</div>									<div id="ytplayer-shield" class="ytplayer-shield"></div>');t.$node.append(i),t.$YTPlayerString=i,i=null},resize:function(i){var n=e(t);i.options.fitToBackground||(n=i.$node);var o,r,s=n.outerWidth(),a=n.outerHeight(),l=e("#"+i.holderID);s/i.options.ratio<a?(o=Math.ceil(a*i.options.ratio),l.width(o).height(a).css({left:(s-o)/2,top:0})):(r=Math.ceil(s/i.options.ratio),l.width(s).height(r).css({left:0,top:(a-r)/2})),l=null,n=null},onYouTubeIframeAPIReady:function(){var e=this;e.player=new t.YT.Player(e.holderID,e.options)},onPlayerReady:function(e){this.options.mute&&e.target.mute(),this.options.playerVars&&this.options.playerVars.autoplay&&e.target.playVideo()},getPlayer:function(){return this.player},destroy:function(){var i=this;i.$node.removeData("yt-init").removeData("ytPlayer").removeClass("loaded"),i.$YTPlayerString.remove(),e(t).off("resize.YTplayer"+i.ID),e(t).off("scroll.YTplayer"+i.ID),i.$node=null,i.$YTPlayerString=null,i.player.destroy(),i.player=null}},e.fn.scrollStopped=function(t){var i=e(this),n=this;i.scroll(function(){i.data("scrollTimeout")&&clearTimeout(i.data("scrollTimeout")),i.data("scrollTimeout",setTimeout(t,250,n))})},e.fn.YTPlayer=function(t){return this.each(function(){var i=this;e(i).data("yt-init",!0);var n=Object.create(YTPlayer);n.init(i,t),e.data(i,"ytPlayer",n)})}}(jQuery,window,document),_wAMD.define("vendor/bower_components/ytBackground/src/jquery.youtubebackground",function(){}),function(e,t,i){VimeoPlayer={player:null,defaults:{videoId:"139480129",mute:!0,loop:!0,autoplay:!0},init:function(t,i){var n=this;return n.userOptions=i,n.$node=e(t),n.options=e.extend(!0,{},n.defaults,n.userOptions),n.ID=(new Date).getTime(),n.createBackgroundVideo(),n},createBackgroundVideo:function(){var i=this,n="https://player.vimeo.com/video/{video-id}?title=0&byline=0&portrait=0&badge=0&autoplay={autoplay}&loop={loop}";n=n.replace("{video-id}",i.options.videoId),n=n.replace("{autoplay}",i.options.autoplay),n=n.replace("{loop}",i.options.loop);var o=e("<div/>",{"class":"vimeoplayer-container",id:"vimeoplayer-container-"+i.ID}),r=e("<div/>",{"class":"vimeoplayer-shield"}),s=e("<iframe/>",{src:n,id:i.ID,"class":"vimeoplayer-player",frameborder:0});i.resize(s),o.append(s,r),i.$container=o,i.$node.append(o);var a=this.onIframeReady.bind(this);t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a,!1)},destroy:function(){var e=this;e.$node.removeData("VimeoPlayer"),e.$container.remove(),e.$node=null,e.$container=null},resize:function(e){var t=this.$node.outerWidth(),i=16/9,n=Math.ceil(t/i);e.prop({width:t,height:n})},onIframeReady:function(t){if("string"==typeof t.data){var i=this,n=JSON.parse(t.data);if("ready"===n.event&&i.volumeSet!==!0){i.volumeSet=!0;var o=e('iframe[id="'+i.ID+'"]'),r=i.options.mute?"0":"100",n=JSON.stringify({method:"setVolume",value:r});o[0].contentWindow.postMessage(n,o.attr("src"))}}}},e.fn.VimeoPlayer=function(t){return this.each(function(){var i=this,n=Object.create(VimeoPlayer);n.init(i,t),e.data(i,"VimeoPlayer",n)})}}(jQuery,window,document),_wAMD.define("vendor/bower_components/vimeoBackground/src/jquery.vimeobackground",function(){}),function(){function m(){return function(){}}function p(e){return function(){return this[e]}}function s(e){return function(){return e}}function u(e,t,i){if("string"==typeof e){if(0===e.indexOf("#")&&(e=e.slice(1)),u.wa[e])return u.wa[e];e=u.v(e)}if(!e||!e.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");
return e.player||new u.w(e,t,i)}function D(e){e.t("vjs-lock-showing")}function E(e,t,i,n){return i!==b?(e.a.style[t]=-1!==(""+i).indexOf("%")||-1!==(""+i).indexOf("px")?i:"auto"===i?"":i+"px",n||e.j("resize"),e):e.a?(i=e.a.style[t],n=i.indexOf("px"),-1!==n?parseInt(i.slice(0,n),10):parseInt(e.a["offset"+u.$(t)],10)):0}function F(e,t){var i,n,o,r;return i=e.a,n=u.Zc(i),r=o=i.offsetWidth,i=e.handle,e.g.Ad?(r=n.top,n=t.changedTouches?t.changedTouches[0].pageY:t.pageY,i&&(i=i.v().offsetHeight,r+=i/2,o-=i),Math.max(0,Math.min(1,(r-n+o)/o))):(o=n.left,n=t.changedTouches?t.changedTouches[0].pageX:t.pageX,i&&(i=i.v().offsetWidth,o+=i/2,r-=i),Math.max(0,Math.min(1,(n-o)/r)))}function ca(e,t){e.Z(t),t.d("click",u.bind(e,function(){D(this)}))}function H(e){e.oa=f,e.va.n("vjs-lock-showing"),e.a.setAttribute("aria-pressed",f),e.I&&0<e.I.length&&e.I[0].v().focus()}function G(e){e.oa=l,D(e.va),e.a.setAttribute("aria-pressed",l)}function da(e){var t={sources:[],tracks:[]};if(u.k.B(t,u.wb(e)),e.hasChildNodes()){var i,n,o,r;for(e=e.childNodes,o=0,r=e.length;r>o;o++)i=e[o],n=i.nodeName.toLowerCase(),"source"===n?t.sources.push(u.wb(i)):"track"===n&&t.tracks.push(u.wb(i))}return t}function J(e,t,i){e.h?(e.aa=l,e.h.D(),e.Db&&(e.Db=l,clearInterval(e.Qa)),e.Eb&&K(e),e.h=l):"Html5"!==t&&e.M&&(u.l.gc(e.M),e.M=j),e.ia=t,e.aa=l;var n=u.k.B({source:i,parentEl:e.a},e.g[t.toLowerCase()]);i&&(i.src==e.u.src&&0<e.u.currentTime&&(n.startTime=e.u.currentTime),e.u.src=i.src),e.h=new window.videojs[t](e,n),e.h.L(function(){if(this.b.Ta(),!this.m.progressEvents){var e=this.b;e.Db=f,e.Qa=setInterval(u.bind(e,function(){this.u.kb<this.buffered().end(0)?this.j("progress"):1==this.Ia()&&(clearInterval(this.Qa),this.j("progress"))}),500),e.h.U("progress",function(){this.m.progressEvents=f;var e=this.b;e.Db=l,clearInterval(e.Qa)})}this.m.timeupdateEvents||(e=this.b,e.Eb=f,e.d("play",e.Ac),e.d("pause",e.ya),e.h.U("timeupdate",function(){this.m.timeupdateEvents=f,K(this.b)}))})}function K(e){e.Eb=l,e.ya(),e.o("play",e.Ac),e.o("pause",e.ya)}function M(e,t,i){if(e.h&&!e.h.aa)e.h.L(function(){this[t](i)});else try{e.h[t](i)}catch(n){throw u.log(n),n}}function L(e,t){if(e.h&&e.h.aa)try{return e.h[t]()}catch(i){throw e.h[t]===b?u.log("Video.js: "+t+" method not defined for "+e.ia+" playback technology.",i):"TypeError"==i.name?(u.log("Video.js: "+t+" unavailable on "+e.ia+" playback technology element.",i),e.h.aa=l):u.log(i),i}}function N(e){e.ad=l,u.o(document,"keydown",e.ic),document.documentElement.style.overflow=e.Wc,u.t(document.body,"vjs-full-window"),e.j("exitFullWindow")}function I(e,t){return t!==b?(t=!!t,t!==e.Ob&&((e.Ob=t)?(e.ja=f,e.t("vjs-user-inactive"),e.n("vjs-user-active"),e.j("useractive")):(e.ja=l,e.h.U("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),e.t("vjs-user-active"),e.n("vjs-user-inactive"),e.j("userinactive"))),e):e.Ob}function ea(){var e=u.media.Ua[i];return function(){throw Error('The "'+e+"\" method is not available on the playback technology's API")}}function fa(){var e=S[U],t=e.charAt(0).toUpperCase()+e.slice(1);R["set"+t]=function(t){return this.a.vjs_setProperty(e,t)}}function V(e){R[e]=function(){return this.a.vjs_getProperty(e)}}function W(e){return e.za=e.za||[],e.za}function X(e,t,i){for(var n,o,r=e.za,s=0,a=r.length;a>s;s++)n=r[s],n.id()===t?(n.show(),o=n):i&&n.J()==i&&0<n.mode()&&n.disable();(t=o?o.J():i?i:l)&&e.j(t+"trackchange")}function Y(e){0===e.ha&&e.load(),0===e.ga&&(e.b.d("timeupdate",u.bind(e,e.update,e.Q)),e.b.d("ended",u.bind(e,e.reset,e.Q)),("captions"===e.A||"subtitles"===e.A)&&e.b.V.textTrackDisplay.Z(e))}function ga(e){var t=e.split(":");e=0;var i,n,o;return 3==t.length?(i=t[0],n=t[1],t=t[2]):(i=0,n=t[0],t=t[1]),t=t.split(/\s+/),t=t.splice(0,1)[0],t=t.split(/\.|,/),o=parseFloat(t[1]),t=t[0],e+=3600*parseFloat(i),e+=60*parseFloat(n),e+=parseFloat(t),o&&(e+=o/1e3),e}function $(e,t){var i=e.split("."),n=ha;!(i[0]in n)&&n.execScript&&n.execScript("var "+i[0]);for(var o;i.length&&(o=i.shift());)i.length||t===b?n=n[o]?n[o]:n[o]={}:n[o]=t}var b=void 0,f=!0,j=null,l=!1,t;document.createElement("video"),document.createElement("audio"),document.createElement("track");var v=u;window.Rd=window.Sd=u,u.Rb="4.2",u.Dc="https:"==document.location.protocol?"https://":"http://",u.options={techOrder:["html5","flash"],html5:{},flash:{},width:300,height:150,defaultVolume:0,children:{mediaLoader:{},posterImage:{},textTrackDisplay:{},loadingSpinner:{},bigPlayButton:{},controlBar:{}},notSupportedMessage:'Sorry, no compatible source and playback technology were found for this video. Try using another browser like <a href="http://bit.ly/ccMUEC">Chrome</a> or download the latest <a href="http://adobe.ly/mwfN1">Adobe Flash Player</a>.'},"GENERATED_CDN_VSN"!==u.Rb&&(v.options.flash.swf=u.Dc+"vjs.zencdn.net/"+u.Rb+"/video-js.swf"),u.wa={},u.ka=u.CoreObject=m(),u.ka.extend=function(e){var t,i;e=e||{},t=e.init||e.i||this.prototype.init||this.prototype.i||m(),i=function(){t.apply(this,arguments)},i.prototype=u.k.create(this.prototype),i.prototype.constructor=i,i.extend=u.ka.extend,i.create=u.ka.create;for(var n in e)e.hasOwnProperty(n)&&(i.prototype[n]=e[n]);return i},u.ka.create=function(){var e=u.k.create(this.prototype);return this.apply(e,arguments),e},u.d=function(e,t,i){var n=u.getData(e);n.z||(n.z={}),n.z[t]||(n.z[t]=[]),i.s||(i.s=u.s++),n.z[t].push(i),n.W||(n.disabled=l,n.W=function(t){if(!n.disabled){t=u.hc(t);var i=n.z[t.type];if(i)for(var i=i.slice(0),o=0,r=i.length;r>o&&!t.mc();o++)i[o].call(e,t)}}),1==n.z[t].length&&(document.addEventListener?e.addEventListener(t,n.W,l):document.attachEvent&&e.attachEvent("on"+t,n.W))},u.o=function(e,t,i){if(u.lc(e)){var n=u.getData(e);if(n.z)if(t){var o=n.z[t];if(o){if(i){if(i.s)for(n=0;n<o.length;n++)o[n].s===i.s&&o.splice(n--,1)}else n.z[t]=[];u.dc(e,t)}}else for(o in n.z)t=o,n.z[t]=[],u.dc(e,t)}},u.dc=function(e,t){var i=u.getData(e);0===i.z[t].length&&(delete i.z[t],document.removeEventListener?e.removeEventListener(t,i.W,l):document.detachEvent&&e.detachEvent("on"+t,i.W)),u.Ab(i.z)&&(delete i.z,delete i.W,delete i.disabled),u.Ab(i)&&u.sc(e)},u.hc=function(e){function t(){return f}function i(){return l}if(!e||!e.Bb){var n=e||window.event;e={};for(var o in n)"layerX"!==o&&"layerY"!==o&&(e[o]=n[o]);if(e.target||(e.target=e.srcElement||document),e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement,e.preventDefault=function(){n.preventDefault&&n.preventDefault(),e.returnValue=l,e.zb=t},e.zb=i,e.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),e.cancelBubble=f,e.Bb=t},e.Bb=i,e.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),e.mc=t,e.stopPropagation()},e.mc=i,e.clientX!=j){o=document.documentElement;var r=document.body;e.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}e.which=e.charCode||e.keyCode,e.button!=j&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e},u.j=function(e,t){var i=u.lc(e)?u.getData(e):{},n=e.parentNode||e.ownerDocument;return"string"==typeof t&&(t={type:t,target:e}),t=u.hc(t),i.W&&i.W.call(e,t),n&&!t.Bb()&&t.bubbles!==l?u.j(n,t):n||t.zb()||(i=u.getData(t.target),!t.target[t.type])||(i.disabled=f,"function"==typeof t.target[t.type]&&t.target[t.type](),i.disabled=l),!t.zb()},u.U=function(e,t,i){function n(){u.o(e,t,n),i.apply(this,arguments)}n.s=i.s=i.s||u.s++,u.d(e,t,n)};var w=Object.prototype.hasOwnProperty;u.e=function(e,t){var i,n;i=document.createElement(e||"div");for(n in t)w.call(t,n)&&(-1!==n.indexOf("aria-")||"role"==n?i.setAttribute(n,t[n]):i[n]=t[n]);return i},u.$=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},u.k={},u.k.create=Object.create||function(e){function t(){}return t.prototype=e,new t},u.k.ta=function(e,t,i){for(var n in e)w.call(e,n)&&t.call(i||this,n,e[n])},u.k.B=function(e,t){if(!t)return e;for(var i in t)w.call(t,i)&&(e[i]=t[i]);return e},u.k.fc=function(e,t){var i,n,o;e=u.k.copy(e);for(i in t)w.call(t,i)&&(n=e[i],o=t[i],e[i]=u.k.nc(n)&&u.k.nc(o)?u.k.fc(n,o):t[i]);return e},u.k.copy=function(e){return u.k.B({},e)},u.k.nc=function(e){return!!e&&"object"==typeof e&&"[object Object]"===e.toString()&&e.constructor===Object},u.bind=function(e,t,i){function n(){return t.apply(e,arguments)}return t.s||(t.s=u.s++),n.s=i?i+"_"+t.s:t.s,n},u.qa={},u.s=1,u.expando="vdata"+(new Date).getTime(),u.getData=function(e){var t=e[u.expando];return t||(t=e[u.expando]=u.s++,u.qa[t]={}),u.qa[t]},u.lc=function(e){return e=e[u.expando],!(!e||u.Ab(u.qa[e]))},u.sc=function(e){var t=e[u.expando];if(t){delete u.qa[t];try{delete e[u.expando]}catch(i){e.removeAttribute?e.removeAttribute(u.expando):e[u.expando]=j}}},u.Ab=function(e){for(var t in e)if(e[t]!==j)return l;return f},u.n=function(e,t){-1==(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className=""===e.className?t:e.className+" "+t)},u.t=function(e,t){var i,n;if(-1!=e.className.indexOf(t)){for(i=e.className.split(" "),n=i.length-1;n>=0;n--)i[n]===t&&i.splice(n,1);e.className=i.join(" ")}},u.ma=u.e("video"),u.F=navigator.userAgent,u.Jc=/iPhone/i.test(u.F),u.Ic=/iPad/i.test(u.F),u.Kc=/iPod/i.test(u.F),u.Hc=u.Jc||u.Ic||u.Kc;var aa=u,x,y=u.F.match(/OS (\d+)_/i);x=y&&y[1]?y[1]:b,aa.Dd=x,u.Fc=/Android/i.test(u.F);var ba=u,z,A=u.F.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i),B,C;A?(B=A[1]&&parseFloat(A[1]),C=A[2]&&parseFloat(A[2]),z=B&&C?parseFloat(A[1]+"."+A[2]):B?B:j):z=j,ba.Ec=z,u.Lc=u.Fc&&/webkit/i.test(u.F)&&2.3>u.Ec,u.Gc=/Firefox/i.test(u.F),u.Ed=/Chrome/i.test(u.F),u.Oc="ontouchstart"in window,u.wb=function(e){var t,i,n,o;if(t={},e&&e.attributes&&0<e.attributes.length){i=e.attributes;for(var r=i.length-1;r>=0;r--)n=i[r].name,o=i[r].value,("boolean"==typeof e[n]||-1!==",autoplay,controls,loop,muted,default,".indexOf(","+n+","))&&(o=o!==j?f:l),t[n]=o}return t},u.Id=function(e,t){var i="";return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,"").getPropertyValue(t):e.currentStyle&&(i=e["client"+t.substr(0,1).toUpperCase()+t.substr(1)]+"px"),i},u.yb=function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},u.Nb={},u.v=function(e){return 0===e.indexOf("#")&&(e=e.slice(1)),document.getElementById(e)},u.Ka=function(e,t){t=t||e;var i=Math.floor(e%60),n=Math.floor(e/60%60),o=Math.floor(e/3600),r=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||1/0===e)&&(o=n=i="-"),o=o>0||s>0?o+":":"",o+(((o||r>=10)&&10>n?"0"+n:n)+":")+(10>i?"0"+i:i)},u.Rc=function(){document.body.focus(),document.onselectstart=s(l)},u.zd=function(){document.onselectstart=s(f)},u.trim=function(e){return(e+"").replace(/^\s+|\s+$/g,"")},u.round=function(e,t){return t||(t=0),Math.round(e*Math.pow(10,t))/Math.pow(10,t)},u.sb=function(e,t){return{length:1,start:function(){return e},end:function(){return t}}},u.get=function(e,t,i){var n,o;"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(i){}throw Error("This browser does not support XMLHttpRequest.")}),o=new XMLHttpRequest;try{o.open("GET",e)}catch(r){i(r)}n=0===e.indexOf("file:")||0===window.location.href.indexOf("file:")&&-1===e.indexOf("http"),o.onreadystatechange=function(){4===o.readyState&&(200===o.status||n&&0===o.status?t(o.responseText):i&&i())};try{o.send()}catch(s){i&&i(s)}},u.rd=function(e){try{var t=window.localStorage||l;t&&(t.volume=e)}catch(i){22==i.code||1014==i.code?u.log("LocalStorage Full (VideoJS)",i):18==i.code?u.log("LocalStorage not allowed (VideoJS)",i):u.log("LocalStorage Error (VideoJS)",i)}},u.jc=function(e){return e.match(/^https?:\/\//)||(e=u.e("div",{innerHTML:'<a href="'+e+'">x</a>'}).firstChild.href),e},u.log=function(){u.log.history=u.log.history||[],u.log.history.push(arguments),window.console&&window.console.log(Array.prototype.slice.call(arguments))},u.Zc=function(e){var t,i;return e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),t?(e=document.documentElement,i=document.body,{left:t.left+(window.pageXOffset||i.scrollLeft)-(e.clientLeft||i.clientLeft||0),top:t.top+(window.pageYOffset||i.scrollTop)-(e.clientTop||i.clientTop||0)}):{left:0,top:0}},u.c=u.ka.extend({i:function(e,t,i){if(this.b=e,this.g=u.k.copy(this.g),t=this.options(t),this.Q=t.id||(t.el&&t.el.id?t.el.id:e.id()+"_component_"+u.s++),this.ed=t.name||j,this.a=t.el||this.e(),this.G=[],this.pb={},this.V={},(e=this.g)&&e.children){var n=this;u.k.ta(e.children,function(e,t){t!==l&&!t.loadEvent&&(n[e]=n.Z(e,t))})}this.L(i)}}),t=u.c.prototype,t.D=function(){if(this.j("dispose"),this.G)for(var e=this.G.length-1;e>=0;e--)this.G[e].D&&this.G[e].D();this.V=this.pb=this.G=j,this.o(),this.a.parentNode&&this.a.parentNode.removeChild(this.a),u.sc(this.a),this.a=j},t.K=p("b"),t.options=function(e){return e===b?this.g:this.g=u.k.fc(this.g,e)},t.e=function(e,t){return u.e(e,t)},t.v=p("a"),t.id=p("Q"),t.name=p("ed"),t.children=p("G"),t.Z=function(e,t){var i,n;return"string"==typeof e?(n=e,t=t||{},i=t.componentClass||u.$(n),t.name=n,i=new window.videojs[i](this.b||this,t)):i=e,this.G.push(i),"function"==typeof i.id&&(this.pb[i.id()]=i),(n=n||i.name&&i.name())&&(this.V[n]=i),"function"==typeof i.el&&i.el()&&(this.ra||this.a).appendChild(i.el()),i},t.removeChild=function(e){if("string"==typeof e&&(e=this.V[e]),e&&this.G){for(var t=l,i=this.G.length-1;i>=0;i--)if(this.G[i]===e){t=f,this.G.splice(i,1);break}t&&(this.pb[e.id]=j,this.V[e.name]=j,(t=e.v())&&t.parentNode===(this.ra||this.a)&&(this.ra||this.a).removeChild(e.v()))}},t.T=s(""),t.d=function(e,t){return u.d(this.a,e,u.bind(this,t)),this},t.o=function(e,t){return u.o(this.a,e,t),this},t.U=function(e,t){return u.U(this.a,e,u.bind(this,t)),this},t.j=function(e,t){return u.j(this.a,e,t),this},t.L=function(e){return e&&(this.aa?e.call(this):(this.Ra===b&&(this.Ra=[]),this.Ra.push(e))),this},t.Ta=function(){this.aa=f;var e=this.Ra;if(e&&0<e.length){for(var t=0,i=e.length;i>t;t++)e[t].call(this);this.Ra=[],this.j("ready")}},t.n=function(e){return u.n(this.a,e),this},t.t=function(e){return u.t(this.a,e),this},t.show=function(){return this.a.style.display="block",this},t.C=function(){return this.a.style.display="none",this},t.disable=function(){this.C(),this.show=m()},t.width=function(e,t){return E(this,"width",e,t)},t.height=function(e,t){return E(this,"height",e,t)},t.Vc=function(e,t){return this.width(e,f).height(t)},u.q=u.c.extend({i:function(e,t){u.c.call(this,e,t);var i=l;this.d("touchstart",function(e){e.preventDefault(),i=f}),this.d("touchmove",function(){i=l});var n=this;this.d("touchend",function(e){i&&n.p(e),e.preventDefault()}),this.d("click",this.p),this.d("focus",this.Na),this.d("blur",this.Ma)}}),t=u.q.prototype,t.e=function(e,t){return t=u.k.B({className:this.T(),innerHTML:'<div class="vjs-control-content"><span class="vjs-control-text">'+(this.pa||"Need Text")+"</span></div>",od:"button","aria-live":"polite",tabIndex:0},t),u.c.prototype.e.call(this,e,t)},t.T=function(){return"vjs-control "+u.c.prototype.T.call(this)},t.p=m(),t.Na=function(){u.d(document,"keyup",u.bind(this,this.ba))},t.ba=function(e){(32==e.which||13==e.which)&&(e.preventDefault(),this.p())},t.Ma=function(){u.o(document,"keyup",u.bind(this,this.ba))},u.O=u.c.extend({i:function(e,t){u.c.call(this,e,t),this.Qc=this.V[this.g.barName],this.handle=this.V[this.g.handleName],e.d(this.qc,u.bind(this,this.update)),this.d("mousedown",this.Oa),this.d("touchstart",this.Oa),this.d("focus",this.Na),this.d("blur",this.Ma),this.d("click",this.p),this.b.d("controlsvisible",u.bind(this,this.update)),e.L(u.bind(this,this.update)),this.P={}}}),t=u.O.prototype,t.e=function(e,t){return t=t||{},t.className+=" vjs-slider",t=u.k.B({od:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},t),u.c.prototype.e.call(this,e,t)},t.Oa=function(e){e.preventDefault(),u.Rc(),this.P.move=u.bind(this,this.Gb),this.P.end=u.bind(this,this.Hb),u.d(document,"mousemove",this.P.move),u.d(document,"mouseup",this.P.end),u.d(document,"touchmove",this.P.move),u.d(document,"touchend",this.P.end),this.Gb(e)},t.Hb=function(){u.zd(),u.o(document,"mousemove",this.P.move,l),u.o(document,"mouseup",this.P.end,l),u.o(document,"touchmove",this.P.move,l),u.o(document,"touchend",this.P.end,l),this.update()},t.update=function(){if(this.a){var e,t=this.xb(),i=this.handle,n=this.Qc;if(isNaN(t)&&(t=0),e=t,i){e=this.a.offsetWidth;var o=i.v().offsetWidth;e=o?o/e:0,t*=1-e,e=t+e/2,i.v().style.left=u.round(100*t,2)+"%"}n.v().style.width=u.round(100*e,2)+"%"}},t.Na=function(){u.d(document,"keyup",u.bind(this,this.ba))},t.ba=function(e){37==e.which?(e.preventDefault(),this.wc()):39==e.which&&(e.preventDefault(),this.xc())},t.Ma=function(){u.o(document,"keyup",u.bind(this,this.ba))},t.p=function(e){e.stopImmediatePropagation(),e.preventDefault()},u.ea=u.c.extend(),u.ea.prototype.defaultValue=0,u.ea.prototype.e=function(e,t){return t=t||{},t.className+=" vjs-slider-handle",t=u.k.B({innerHTML:'<span class="vjs-control-text">'+this.defaultValue+"</span>"},t),u.c.prototype.e.call(this,"div",t)},u.la=u.c.extend(),u.la.prototype.e=function(){var e=this.options().Tc||"ul";return this.ra=u.e(e,{className:"vjs-menu-content"}),e=u.c.prototype.e.call(this,"div",{append:this.ra,className:"vjs-menu"}),e.appendChild(this.ra),u.d(e,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),e},u.N=u.q.extend({i:function(e,t){u.q.call(this,e,t),this.selected(t.selected)}}),u.N.prototype.e=function(e,t){return u.q.prototype.e.call(this,"li",u.k.B({className:"vjs-menu-item",innerHTML:this.g.label},t))},u.N.prototype.p=function(){this.selected(f)},u.N.prototype.selected=function(e){e?(this.n("vjs-selected"),this.a.setAttribute("aria-selected",f)):(this.t("vjs-selected"),this.a.setAttribute("aria-selected",l))},u.R=u.q.extend({i:function(e,t){u.q.call(this,e,t),this.va=this.Ja(),this.Z(this.va),this.I&&0===this.I.length&&this.C(),this.d("keyup",this.ba),this.a.setAttribute("aria-haspopup",f),this.a.setAttribute("role","button")}}),t=u.R.prototype,t.oa=l,t.Ja=function(){var e=new u.la(this.b);if(this.options().title&&e.v().appendChild(u.e("li",{className:"vjs-menu-title",innerHTML:u.$(this.A),xd:-1})),this.I=this.createItems())for(var t=0;t<this.I.length;t++)ca(e,this.I[t]);return e},t.sa=m(),t.T=function(){return this.className+" vjs-menu-button "+u.q.prototype.T.call(this)},t.Na=m(),t.Ma=m(),t.p=function(){this.U("mouseout",u.bind(this,function(){D(this.va),this.a.blur()})),this.oa?G(this):H(this)},t.ba=function(e){e.preventDefault(),32==e.which||13==e.which?this.oa?G(this):H(this):27==e.which&&this.oa&&G(this)},u.w=u.c.extend({i:function(e,t,i){this.M=e,t=u.k.B(da(e),t),this.u={},this.rc=t.poster,this.rb=t.controls,e.controls=l,u.c.call(this,this,t,i),this.controls()?this.n("vjs-controls-enabled"):this.n("vjs-controls-disabled"),this.U("play",function(e){u.j(this.a,{type:"firstplay",target:this.a})||(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}),this.d("ended",this.fd),this.d("play",this.Jb),this.d("firstplay",this.gd),this.d("pause",this.Ib),this.d("progress",this.jd),this.d("durationchange",this.pc),this.d("error",this.Fb),this.d("fullscreenchange",this.hd),u.wa[this.Q]=this,t.plugins&&u.k.ta(t.plugins,function(e,t){this[e](t)},this);var n,o,r,s;n=this.tc,e=function(){n(),clearInterval(o),o=setInterval(u.bind(this,n),250)},t=function(){n(),clearInterval(o)},this.d("mousedown",e),this.d("mousemove",n),this.d("mouseup",t),this.d("keydown",n),this.d("keyup",n),this.d("touchstart",e),this.d("touchmove",n),this.d("touchend",t),this.d("touchcancel",t),r=setInterval(u.bind(this,function(){this.ja&&(this.ja=l,I(this,f),clearTimeout(s),s=setTimeout(u.bind(this,function(){this.ja||I(this,l)}),2e3))}),250),this.d("dispose",function(){clearInterval(r),clearTimeout(s)})}}),t=u.w.prototype,t.g=u.options,t.D=function(){this.j("dispose"),this.o("dispose"),u.wa[this.Q]=j,this.M&&this.M.player&&(this.M.player=j),this.a&&this.a.player&&(this.a.player=j),clearInterval(this.Qa),this.ya(),this.h&&this.h.D(),u.c.prototype.D.call(this)},t.e=function(){var e=this.a=u.c.prototype.e.call(this,"div"),t=this.M;if(t.removeAttribute("width"),t.removeAttribute("height"),t.hasChildNodes()){var i,n,o,r,s;for(i=t.childNodes,n=i.length,s=[];n--;)o=i[n],r=o.nodeName.toLowerCase(),"track"===r&&s.push(o);for(i=0;i<s.length;i++)t.removeChild(s[i])}return t.id=t.id||"vjs_video_"+u.s++,e.id=t.id,e.className=t.className,t.id+="_html5_api",t.className="vjs-tech",t.player=e.player=this,this.n("vjs-paused"),this.width(this.g.width,f),this.height(this.g.height,f),t.parentNode&&t.parentNode.insertBefore(e,t),u.yb(t,e),e},t.Ac=function(){this.ec&&this.ya(),this.ec=setInterval(u.bind(this,function(){this.j("timeupdate")}),250)},t.ya=function(){clearInterval(this.ec)},t.fd=function(){this.g.loop&&(this.currentTime(0),this.play())},t.Jb=function(){u.t(this.a,"vjs-paused"),u.n(this.a,"vjs-playing")},t.gd=function(){this.g.starttime&&this.currentTime(this.g.starttime),this.n("vjs-has-started")},t.Ib=function(){u.t(this.a,"vjs-playing"),u.n(this.a,"vjs-paused")},t.jd=function(){1==this.Ia()&&this.j("loadedalldata")},t.pc=function(){this.duration(L(this,"duration"))},t.Fb=function(e){u.log("Video Error",e)},t.hd=function(){this.H?this.n("vjs-fullscreen"):this.t("vjs-fullscreen")},t.play=function(){return M(this,"play"),this},t.pause=function(){return M(this,"pause"),this},t.paused=function(){return L(this,"paused")===l?l:f},t.currentTime=function(e){return e!==b?(this.u.oc=e,M(this,"setCurrentTime",e),this.Eb&&this.j("timeupdate"),this):this.u.currentTime=L(this,"currentTime")||0},t.duration=function(e){return e!==b?(this.u.duration=parseFloat(e),this):(this.u.duration===b&&this.pc(),this.u.duration)},t.buffered=function(){var e=L(this,"buffered"),t=e.length-1,i=this.u.kb=this.u.kb||0;return e&&t>=0&&e.end(t)!==i&&(i=e.end(t),this.u.kb=i),u.sb(0,i)},t.Ia=function(){return this.duration()?this.buffered().end(0)/this.duration():0},t.volume=function(e){return e!==b?(e=Math.max(0,Math.min(1,parseFloat(e))),this.u.volume=e,M(this,"setVolume",e),u.rd(e),this):(e=parseFloat(L(this,"volume")),isNaN(e)?1:e)},t.muted=function(e){return e!==b?(M(this,"setMuted",e),this):L(this,"muted")||l},t.Sa=function(){return L(this,"supportsFullScreen")||l},t.xa=function(){var e=u.Nb.xa;return this.H=f,e?(u.d(document,e.ub,u.bind(this,function(t){this.H=document[e.H],this.H===l&&u.o(document,e.ub,arguments.callee),this.j("fullscreenchange")})),this.a[e.uc]()):this.h.Sa()?M(this,"enterFullScreen"):(this.ad=f,this.Wc=document.documentElement.style.overflow,u.d(document,"keydown",u.bind(this,this.ic)),document.documentElement.style.overflow="hidden",u.n(document.body,"vjs-full-window"),this.j("enterFullWindow"),this.j("fullscreenchange")),this},t.nb=function(){var e=u.Nb.xa;return this.H=l,e?document[e.mb]():this.h.Sa()?M(this,"exitFullScreen"):(N(this),this.j("fullscreenchange")),this},t.ic=function(e){27===e.keyCode&&(this.H===f?this.nb():N(this))},t.src=function(e){if(e instanceof Array){var t;e:{t=e;for(var i=0,n=this.g.techOrder;i<n.length;i++){var o=u.$(n[i]),r=window.videojs[o];if(r.isSupported())for(var s=0,a=t;s<a.length;s++){var c=a[s];if(r.canPlaySource(c)){t={source:c,h:o};break e}}}t=l}t?(e=t.source,t=t.h,t==this.ia?this.src(e):J(this,t,e)):this.a.appendChild(u.e("p",{innerHTML:this.options().notSupportedMessage}))}else e instanceof Object?window.videojs[this.ia].canPlaySource(e)?this.src(e.src):this.src([e]):(this.u.src=e,this.aa?(M(this,"src",e),"auto"==this.g.preload&&this.load(),this.g.autoplay&&this.play()):this.L(function(){this.src(e)}));return this},t.load=function(){return M(this,"load"),this},t.currentSrc=function(){return L(this,"currentSrc")||this.u.src||""},t.Pa=function(e){return e!==b?(M(this,"setPreload",e),this.g.preload=e,this):L(this,"preload")},t.autoplay=function(e){return e!==b?(M(this,"setAutoplay",e),this.g.autoplay=e,this):L(this,"autoplay")},t.loop=function(e){return e!==b?(M(this,"setLoop",e),this.g.loop=e,this):L(this,"loop")},t.poster=function(e){return e!==b&&(this.rc=e),this.rc},t.controls=function(e){return e!==b?(e=!!e,this.rb!==e&&((this.rb=e)?(this.t("vjs-controls-disabled"),this.n("vjs-controls-enabled"),this.j("controlsenabled")):(this.t("vjs-controls-enabled"),this.n("vjs-controls-disabled"),this.j("controlsdisabled"))),this):this.rb},u.w.prototype.Qb,t=u.w.prototype,t.Pb=function(e){return e!==b?(e=!!e,this.Qb!==e&&((this.Qb=e)?(this.n("vjs-using-native-controls"),this.j("usingnativecontrols")):(this.t("vjs-using-native-controls"),this.j("usingcustomcontrols"))),this):this.Qb},t.error=function(){return L(this,"error")},t.seeking=function(){return L(this,"seeking")},t.ja=f,t.tc=function(){this.ja=f},t.Ob=f;var O,P,Q;Q=document.createElement("div"),P={},Q.Fd!==b?(P.uc="requestFullscreen",P.mb="exitFullscreen",P.ub="fullscreenchange",P.H="fullScreen"):(document.mozCancelFullScreen?(O="moz",P.H=O+"FullScreen"):(O="webkit",P.H=O+"IsFullScreen"),Q[O+"RequestFullScreen"]&&(P.uc=O+"RequestFullScreen",P.mb=O+"CancelFullScreen"),P.ub=O+"fullscreenchange"),document[P.mb]&&(u.Nb.xa=P),u.Ea=u.c.extend(),u.Ea.prototype.g={Kd:"play",children:{playToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},progressControl:{},fullscreenToggle:{},volumeControl:{},muteToggle:{}}},u.Ea.prototype.e=function(){return u.e("div",{className:"vjs-control-bar"})},u.Wb=u.q.extend({i:function(e,t){u.q.call(this,e,t),e.d("play",u.bind(this,this.Jb)),e.d("pause",u.bind(this,this.Ib))}}),t=u.Wb.prototype,t.pa="Play",t.T=function(){return"vjs-play-control "+u.q.prototype.T.call(this)},t.p=function(){this.b.paused()?this.b.play():this.b.pause()},t.Jb=function(){u.t(this.a,"vjs-paused"),u.n(this.a,"vjs-playing"),this.a.children[0].children[0].innerHTML="Pause"},t.Ib=function(){u.t(this.a,"vjs-playing"),u.n(this.a,"vjs-paused"),this.a.children[0].children[0].innerHTML="Play"},u.Xa=u.c.extend({i:function(e,t){u.c.call(this,e,t),e.d("timeupdate",u.bind(this,this.Ba))}}),u.Xa.prototype.e=function(){var e=u.c.prototype.e.call(this,"div",{className:"vjs-current-time vjs-time-controls vjs-control"});return this.content=u.e("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00',"aria-live":"off"}),e.appendChild(u.e("div").appendChild(this.content)),e},u.Xa.prototype.Ba=function(){var e=this.b.Lb?this.b.u.currentTime:this.b.currentTime();this.content.innerHTML='<span class="vjs-control-text">Current Time </span>'+u.Ka(e,this.b.duration())},u.Ya=u.c.extend({i:function(e,t){u.c.call(this,e,t),e.d("timeupdate",u.bind(this,this.Ba))}}),u.Ya.prototype.e=function(){var e=u.c.prototype.e.call(this,"div",{className:"vjs-duration vjs-time-controls vjs-control"});return this.content=u.e("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">Duration Time </span>0:00',"aria-live":"off"}),e.appendChild(u.e("div").appendChild(this.content)),e},u.Ya.prototype.Ba=function(){var e=this.b.duration();e&&(this.content.innerHTML='<span class="vjs-control-text">Duration Time </span>'+u.Ka(e))},u.$b=u.c.extend({i:function(e,t){u.c.call(this,e,t)}}),u.$b.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},u.eb=u.c.extend({i:function(e,t){u.c.call(this,e,t),e.d("timeupdate",u.bind(this,this.Ba))}}),u.eb.prototype.e=function(){var e=u.c.prototype.e.call(this,"div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});return this.content=u.e("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">Remaining Time </span>-0:00',"aria-live":"off"}),e.appendChild(u.e("div").appendChild(this.content)),e},u.eb.prototype.Ba=function(){this.b.duration()&&(this.content.innerHTML='<span class="vjs-control-text">Remaining Time </span>-'+u.Ka(this.b.duration()-this.b.currentTime()))},u.Fa=u.q.extend({i:function(e,t){u.q.call(this,e,t)}}),u.Fa.prototype.pa="Fullscreen",u.Fa.prototype.T=function(){return"vjs-fullscreen-control "+u.q.prototype.T.call(this)},u.Fa.prototype.p=function(){this.b.H?(this.b.nb(),this.a.children[0].children[0].innerHTML="Fullscreen"):(this.b.xa(),this.a.children[0].children[0].innerHTML="Non-Fullscreen")},u.cb=u.c.extend({i:function(e,t){u.c.call(this,e,t)}}),u.cb.prototype.g={children:{seekBar:{}}},u.cb.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-progress-control vjs-control"})},u.Xb=u.O.extend({i:function(e,t){u.O.call(this,e,t),e.d("timeupdate",u.bind(this,this.Aa)),e.L(u.bind(this,this.Aa))}}),t=u.Xb.prototype,t.g={children:{loadProgressBar:{},playProgressBar:{},seekHandle:{}},barName:"playProgressBar",handleName:"seekHandle"},t.qc="timeupdate",t.e=function(){return u.O.prototype.e.call(this,"div",{className:"vjs-progress-holder","aria-label":"video progress bar"})},t.Aa=function(){var e=this.b.Lb?this.b.u.currentTime:this.b.currentTime();this.a.setAttribute("aria-valuenow",u.round(100*this.xb(),2)),this.a.setAttribute("aria-valuetext",u.Ka(e,this.b.duration()))},t.xb=function(){var e;return"Flash"===this.b.ia&&this.b.seeking()?(e=this.b.u,e=e.oc?e.oc:this.b.currentTime()):e=this.b.currentTime(),e/this.b.duration()},t.Oa=function(e){u.O.prototype.Oa.call(this,e),this.b.Lb=f,this.Bd=!this.b.paused(),this.b.pause()},t.Gb=function(e){e=F(this,e)*this.b.duration(),e==this.b.duration()&&(e-=.1),this.b.currentTime(e)},t.Hb=function(e){u.O.prototype.Hb.call(this,e),this.b.Lb=l,this.Bd&&this.b.play()},t.xc=function(){this.b.currentTime(this.b.currentTime()+5)},t.wc=function(){this.b.currentTime(this.b.currentTime()-5)},u.$a=u.c.extend({i:function(e,t){u.c.call(this,e,t),e.d("progress",u.bind(this,this.update))}}),u.$a.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text">Loaded: 0%</span>'})},u.$a.prototype.update=function(){this.a.style&&(this.a.style.width=u.round(100*this.b.Ia(),2)+"%")},u.Vb=u.c.extend({i:function(e,t){u.c.call(this,e,t)}}),u.Vb.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text">Progress: 0%</span>'})},u.fb=u.ea.extend(),u.fb.prototype.defaultValue="00:00",u.fb.prototype.e=function(){return u.ea.prototype.e.call(this,"div",{className:"vjs-seek-handle"})},u.hb=u.c.extend({i:function(e,t){u.c.call(this,e,t),e.h&&e.h.m&&e.h.m.volumeControl===l&&this.n("vjs-hidden"),e.d("loadstart",u.bind(this,function(){e.h.m&&e.h.m.volumeControl===l?this.n("vjs-hidden"):this.t("vjs-hidden")}))}}),u.hb.prototype.g={children:{volumeBar:{}}},u.hb.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-volume-control vjs-control"})},u.gb=u.O.extend({i:function(e,t){u.O.call(this,e,t),e.d("volumechange",u.bind(this,this.Aa)),e.L(u.bind(this,this.Aa)),setTimeout(u.bind(this,this.update),0)}}),t=u.gb.prototype,t.Aa=function(){this.a.setAttribute("aria-valuenow",u.round(100*this.b.volume(),2)),this.a.setAttribute("aria-valuetext",u.round(100*this.b.volume(),2)+"%")},t.g={children:{volumeLevel:{},volumeHandle:{}},barName:"volumeLevel",handleName:"volumeHandle"},t.qc="volumechange",t.e=function(){return u.O.prototype.e.call(this,"div",{className:"vjs-volume-bar","aria-label":"volume level"})},t.Gb=function(e){this.b.volume(F(this,e))},t.xb=function(){return this.b.muted()?0:this.b.volume()},t.xc=function(){this.b.volume(this.b.volume()+.1)},t.wc=function(){this.b.volume(this.b.volume()-.1)},u.ac=u.c.extend({i:function(e,t){u.c.call(this,e,t)}}),u.ac.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},u.ib=u.ea.extend(),u.ib.prototype.defaultValue="00:00",u.ib.prototype.e=function(){return u.ea.prototype.e.call(this,"div",{
className:"vjs-volume-handle"})},u.da=u.q.extend({i:function(e,t){u.q.call(this,e,t),e.d("volumechange",u.bind(this,this.update)),e.h&&e.h.m&&e.h.m.volumeControl===l&&this.n("vjs-hidden"),e.d("loadstart",u.bind(this,function(){e.h.m&&e.h.m.volumeControl===l?this.n("vjs-hidden"):this.t("vjs-hidden")}))}}),u.da.prototype.e=function(){return u.q.prototype.e.call(this,"div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})},u.da.prototype.p=function(){this.b.muted(this.b.muted()?l:f)},u.da.prototype.update=function(){var e=this.b.volume(),t=3;for(0===e||this.b.muted()?t=0:.33>e?t=1:.67>e&&(t=2),this.b.muted()?"Unmute"!=this.a.children[0].children[0].innerHTML&&(this.a.children[0].children[0].innerHTML="Unmute"):"Mute"!=this.a.children[0].children[0].innerHTML&&(this.a.children[0].children[0].innerHTML="Mute"),e=0;4>e;e++)u.t(this.a,"vjs-vol-"+e);u.n(this.a,"vjs-vol-"+t)},u.na=u.R.extend({i:function(e,t){u.R.call(this,e,t),e.d("volumechange",u.bind(this,this.update)),e.h&&e.h.m&&e.h.m.Bc===l&&this.n("vjs-hidden"),e.d("loadstart",u.bind(this,function(){e.h.m&&e.h.m.Bc===l?this.n("vjs-hidden"):this.t("vjs-hidden")})),this.n("vjs-menu-button")}}),u.na.prototype.Ja=function(){var e=new u.la(this.b,{Tc:"div"}),t=new u.gb(this.b,u.k.B({Ad:f},this.g.Td));return e.Z(t),e},u.na.prototype.p=function(){u.da.prototype.p.call(this),u.R.prototype.p.call(this)},u.na.prototype.e=function(){return u.q.prototype.e.call(this,"div",{className:"vjs-volume-menu-button vjs-menu-button vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})},u.na.prototype.update=u.da.prototype.update,u.bb=u.q.extend({i:function(e,t){u.q.call(this,e,t),(!e.poster()||!e.controls())&&this.C(),e.d("play",u.bind(this,this.C))}}),u.bb.prototype.e=function(){var e=u.e("div",{className:"vjs-poster",tabIndex:-1}),t=this.b.poster();return t&&("backgroundSize"in e.style?e.style.backgroundImage='url("'+t+'")':e.appendChild(u.e("img",{src:t}))),e},u.bb.prototype.p=function(){this.K().controls()&&this.b.play()},u.Ub=u.c.extend({i:function(e,t){u.c.call(this,e,t),e.d("canplay",u.bind(this,this.C)),e.d("canplaythrough",u.bind(this,this.C)),e.d("playing",u.bind(this,this.C)),e.d("seeked",u.bind(this,this.C)),e.d("seeking",u.bind(this,this.show)),e.d("seeked",u.bind(this,this.C)),e.d("error",u.bind(this,this.show)),e.d("waiting",u.bind(this,this.show))}}),u.Ub.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-loading-spinner"})},u.Va=u.q.extend(),u.Va.prototype.e=function(){return u.q.prototype.e.call(this,"div",{className:"vjs-big-play-button",innerHTML:"<span></span>","aria-label":"play video"})},u.Va.prototype.p=function(){this.b.play()},u.r=u.c.extend({i:function(e,t,i){u.c.call(this,e,t,i);var n,o;o=this,n=this.K(),e=function(){if(n.controls()&&!n.Pb()){var e,t;o.d("mousedown",o.p),o.d("touchstart",function(e){e.preventDefault(),e.stopPropagation(),t=I(this.b)}),e=function(e){e.stopPropagation(),t&&this.b.tc()},o.d("touchmove",e),o.d("touchleave",e),o.d("touchcancel",e),o.d("touchend",e);var i,r,s;i=0,o.d("touchstart",function(){i=(new Date).getTime(),s=f}),e=function(){s=l},o.d("touchmove",e),o.d("touchleave",e),o.d("touchcancel",e),o.d("touchend",function(){s===f&&(r=(new Date).getTime()-i,250>r&&this.j("tap"))}),o.d("tap",o.kd)}},t=u.bind(o,o.nd),this.L(e),n.d("controlsenabled",e),n.d("controlsdisabled",t)}}),u.r.prototype.nd=function(){this.o("tap"),this.o("touchstart"),this.o("touchmove"),this.o("touchleave"),this.o("touchcancel"),this.o("touchend"),this.o("click"),this.o("mousedown")},u.r.prototype.p=function(e){0===e.button&&this.K().controls()&&(this.K().paused()?this.K().play():this.K().pause())},u.r.prototype.kd=function(){I(this.K(),!I(this.K()))},u.r.prototype.m={volumeControl:f,fullscreenResize:l,progressEvents:l,timeupdateEvents:l},u.media={},u.media.Ua="play pause paused currentTime setCurrentTime duration buffered volume setVolume muted setMuted width height supportsFullScreen enterFullScreen src load currentSrc preload setPreload autoplay setAutoplay loop setLoop error networkState readyState seeking initialTime startOffsetTime played seekable ended videoTracks audioTracks videoWidth videoHeight textTracks defaultPlaybackRate playbackRate mediaGroup controller controls defaultMuted".split(" ");for(var i=u.media.Ua.length-1;i>=0;i--)u.r.prototype[u.media.Ua[i]]=ea();u.l=u.r.extend({i:function(e,t,i){if(this.m.volumeControl=u.l.Sc(),this.m.movingMediaElementInDOM=!u.Hc,this.m.fullscreenResize=f,u.r.call(this,e,t,i),(t=t.source)&&this.a.currentSrc===t.src&&0<this.a.networkState?e.j("loadstart"):t&&(this.a.src=t.src),u.Oc&&e.options().nativeControlsForTouch!==l){var n,o,r,s;n=this,o=this.K(),t=o.controls(),n.a.controls=!!t,r=function(){n.a.controls=f},s=function(){n.a.controls=l},o.d("controlsenabled",r),o.d("controlsdisabled",s),t=function(){o.o("controlsenabled",r),o.o("controlsdisabled",s)},n.d("dispose",t),o.d("usingcustomcontrols",t),o.Pb(f)}for(e.L(function(){this.M&&this.g.autoplay&&this.paused()&&(delete this.M.poster,this.play())}),e=u.l.Za.length-1;e>=0;e--)u.d(this.a,u.l.Za[e],u.bind(this.b,this.Yc));this.Ta()}}),t=u.l.prototype,t.D=function(){u.r.prototype.D.call(this)},t.e=function(){var e,t=this.b,i=t.M;i&&this.m.movingMediaElementInDOM!==l||(i?(e=i.cloneNode(l),u.l.gc(i),i=e,t.M=j):i=u.e("video",{id:t.id()+"_html5_api",className:"vjs-tech"}),i.player=t,u.yb(i,t.v())),e=["autoplay","preload","loop","muted"];for(var n=e.length-1;n>=0;n--){var o=e[n];t.g[o]!==j&&(i[o]=t.g[o])}return i},t.Yc=function(e){this.j(e),e.stopPropagation()},t.play=function(){this.a.play()},t.pause=function(){this.a.pause()},t.paused=function(){return this.a.paused},t.currentTime=function(){return this.a.currentTime},t.qd=function(e){try{this.a.currentTime=e}catch(t){u.log(t,"Video is not ready. (Video.js)")}},t.duration=function(){return this.a.duration||0},t.buffered=function(){return this.a.buffered},t.volume=function(){return this.a.volume},t.vd=function(e){this.a.volume=e},t.muted=function(){return this.a.muted},t.td=function(e){this.a.muted=e},t.width=function(){return this.a.offsetWidth},t.height=function(){return this.a.offsetHeight},t.Sa=function(){return"function"!=typeof this.a.webkitEnterFullScreen||!/Android/.test(u.F)&&/Chrome|Mac OS X 10.5/.test(u.F)?l:f},t.src=function(e){this.a.src=e},t.load=function(){this.a.load()},t.currentSrc=function(){return this.a.currentSrc},t.Pa=function(){return this.a.Pa},t.ud=function(e){this.a.Pa=e},t.autoplay=function(){return this.a.autoplay},t.pd=function(e){this.a.autoplay=e},t.controls=function(){return this.a.controls},t.loop=function(){return this.a.loop},t.sd=function(e){this.a.loop=e},t.error=function(){return this.a.error},t.seeking=function(){return this.a.seeking},u.l.isSupported=function(){return!!u.ma.canPlayType},u.l.lb=function(e){try{return!!u.ma.canPlayType(e.type)}catch(t){return""}},u.l.Sc=function(){var e=u.ma.volume;return u.ma.volume=e/2+.1,e!==u.ma.volume},u.l.Za="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange volumechange".split(" "),u.l.gc=function(e){if(e){for(e.player=j,e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&e.load()}},u.Lc&&(document.createElement("video").constructor.prototype.canPlayType=function(e){return e&&-1!=e.toLowerCase().indexOf("video/mp4")?"maybe":""}),u.f=u.r.extend({i:function(e,t,i){u.r.call(this,e,t,i);var n=t.source;i=t.parentEl;var o=this.a=u.e("div",{id:e.id()+"_temp_flash"}),r=e.id()+"_flash_api";e=e.g;var s=u.k.B({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:e.autoplay,preload:e.Pa,loop:e.loop,muted:e.muted},t.flashVars),a=u.k.B({wmode:"opaque",bgcolor:"#000000"},t.params),l=u.k.B({id:r,name:r,"class":"vjs-tech"},t.attributes);if(n&&(n.type&&u.f.cd(n.type)?(e=u.f.yc(n.src),s.rtmpConnection=encodeURIComponent(e.qb),s.rtmpStream=encodeURIComponent(e.Mb)):s.src=encodeURIComponent(u.jc(n.src))),u.yb(o,i),t.startTime&&this.L(function(){this.load(),this.play(),this.currentTime(t.startTime)}),t.iFrameMode!==f||u.Gc)u.f.Xc(t.swf,o,s,a,l);else{var c=u.e("iframe",{id:r+"_iframe",name:r+"_iframe",className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0});s.readyFunction="ready",s.eventProxyFunction="events",s.errorEventProxyFunction="errors",u.d(c,"load",u.bind(this,function(){var e,i=c.contentWindow;e=c.contentDocument?c.contentDocument:c.contentWindow.document,e.write(u.f.kc(t.swf,s,a,l)),i.player=this.b,i.ready=u.bind(this.b,function(t){var i=this.h;i.a=e.getElementById(t),u.f.ob(i)}),i.events=u.bind(this.b,function(e,t){this&&"flash"===this.ia&&this.j(t)}),i.errors=u.bind(this.b,function(e,t){u.log("Flash Error",t)})})),o.parentNode.replaceChild(c,o)}}}),t=u.f.prototype,t.D=function(){u.r.prototype.D.call(this)},t.play=function(){this.a.vjs_play()},t.pause=function(){this.a.vjs_pause()},t.src=function(e){if(u.f.bd(e)?(e=u.f.yc(e),this.Od(e.qb),this.Pd(e.Mb)):(e=u.jc(e),this.a.vjs_src(e)),this.b.autoplay()){var t=this;setTimeout(function(){t.play()},0)}},t.currentSrc=function(){var e=this.a.vjs_getProperty("currentSrc");if(e==j){var t=this.Md(),i=this.Nd();t&&i&&(e=u.f.wd(t,i))}return e},t.load=function(){this.a.vjs_load()},t.poster=function(){this.a.vjs_getProperty("poster")},t.buffered=function(){return u.sb(0,this.a.vjs_getProperty("buffered"))},t.Sa=s(l);var R=u.f.prototype,S="rtmpConnection rtmpStream preload currentTime defaultPlaybackRate playbackRate autoplay loop mediaGroup controller controls volume muted defaultMuted".split(" "),T="error currentSrc networkState readyState seeking initialTime duration startOffsetTime paused played seekable ended videoTracks audioTracks videoWidth videoHeight textTracks".split(" "),U;for(U=0;U<S.length;U++)V(S[U]),fa();for(U=0;U<T.length;U++)V(T[U]);if(u.f.isSupported=function(){return 10<=u.f.version()[0]},u.f.lb=function(e){return e.type in u.f.$c||e.type in u.f.zc?"maybe":void 0},u.f.$c={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},u.f.zc={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},u.f.onReady=function(e){e=u.v(e);var t=e.player||e.parentNode.player,i=t.h;e.player=t,i.a=e,u.f.ob(i)},u.f.ob=function(e){e.v().vjs_getProperty?e.Ta():setTimeout(function(){u.f.ob(e)},50)},u.f.onEvent=function(e,t){u.v(e).player.j(t)},u.f.onError=function(e,t){u.v(e).player.j("error"),u.log("Flash Error",t,e)},u.f.version=function(){var e="0,0,0";try{e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(i){}}return e.split(",")},u.f.Xc=function(e,t,i,n,o){e=u.f.kc(e,i,n,o),e=u.e("div",{innerHTML:e}).childNodes[0],i=t.parentNode,t.parentNode.replaceChild(e,t);var r=i.childNodes[0];setTimeout(function(){r.style.display="block"},1e3)},u.f.kc=function(e,t,i,n){var o="",r="",s="";return t&&u.k.ta(t,function(e,t){o+=e+"="+t+"&amp;"}),i=u.k.B({movie:e,flashvars:o,allowScriptAccess:"always",allowNetworking:"all"},i),u.k.ta(i,function(e,t){r+='<param name="'+e+'" value="'+t+'" />'}),n=u.k.B({data:e,width:"100%",height:"100%"},n),u.k.ta(n,function(e,t){s+=e+'="'+t+'" '}),'<object type="application/x-shockwave-flash"'+s+">"+r+"</object>"},u.f.wd=function(e,t){return e+"&"+t},u.f.yc=function(e){var t={qb:"",Mb:""};if(!e)return t;var i,n=e.indexOf("&");return-1!==n?i=n+1:(n=i=e.lastIndexOf("/")+1,0===n&&(n=i=e.length)),t.qb=e.substring(0,n),t.Mb=e.substring(i,e.length),t},u.f.cd=function(e){return e in u.f.zc},u.f.Nc=/^rtmp[set]?:\/\//i,u.f.bd=function(e){return u.f.Nc.test(e)},u.Mc=u.c.extend({i:function(e,t,i){if(u.c.call(this,e,t,i),e.g.sources&&0!==e.g.sources.length)e.src(e.g.sources);else for(t=0,i=e.g.techOrder;t<i.length;t++){var n=u.$(i[t]),o=window.videojs[n];if(o&&o.isSupported()){J(e,n);break}}}}),u.X=u.c.extend({i:function(e,t){u.c.call(this,e,t),this.Q=t.id||"vjs_"+t.kind+"_"+t.language+"_"+u.s++,this.vc=t.src,this.Uc=t["default"]||t.dflt,this.yd=t.title,this.Jd=t.srclang,this.dd=t.label,this.fa=[],this.bc=[],this.ga=this.ha=0,this.b.d("fullscreenchange",u.bind(this,this.Pc))}}),t=u.X.prototype,t.J=p("A"),t.src=p("vc"),t.tb=p("Uc"),t.title=p("yd"),t.label=p("dd"),t.readyState=p("ha"),t.mode=p("ga"),t.Pc=function(){this.a.style.fontSize=this.b.H?140*(screen.width/this.b.width())+"%":""},t.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-"+this.A+" vjs-text-track"})},t.show=function(){Y(this),this.ga=2,u.c.prototype.show.call(this)},t.C=function(){Y(this),this.ga=1,u.c.prototype.C.call(this)},t.disable=function(){2==this.ga&&this.C(),this.b.o("timeupdate",u.bind(this,this.update,this.Q)),this.b.o("ended",u.bind(this,this.reset,this.Q)),this.reset(),this.b.V.textTrackDisplay.removeChild(this),this.ga=0},t.load=function(){0===this.ha&&(this.ha=1,u.get(this.vc,u.bind(this,this.ld),u.bind(this,this.Fb)))},t.Fb=function(e){this.error=e,this.ha=3,this.j("error")},t.ld=function(e){var t,i;e=e.split("\n");for(var n="",o=1,r=e.length;r>o;o++)if(n=u.trim(e[o])){for(-1==n.indexOf("-->")?(t=n,n=u.trim(e[++o])):t=this.fa.length,t={id:t,index:this.fa.length},i=n.split(" --> "),t.startTime=ga(i[0]),t.ua=ga(i[1]),i=[];e[++o]&&(n=u.trim(e[o]));)i.push(n);t.text=i.join("<br/>"),this.fa.push(t)}this.ha=2,this.j("loaded")},t.update=function(){if(0<this.fa.length){var e=this.b.currentTime();if(this.Kb===b||e<this.Kb||this.La<=e){var t,i,n,o,r=this.fa,s=this.b.duration(),a=0,c=l,d=[];for(e>=this.La||this.La===b?o=this.vb!==b?this.vb:0:(c=f,o=this.Cb!==b?this.Cb:r.length-1);;){if(n=r[o],n.ua<=e)a=Math.max(a,n.ua),n.Ha&&(n.Ha=l);else if(e<n.startTime){if(s=Math.min(s,n.startTime),n.Ha&&(n.Ha=l),!c)break}else c?(d.splice(0,0,n),i===b&&(i=o),t=o):(d.push(n),t===b&&(t=o),i=o),s=Math.min(s,n.ua),a=Math.max(a,n.startTime),n.Ha=f;if(c){if(0===o)break;o--}else{if(o===r.length-1)break;o++}}for(this.bc=d,this.La=s,this.Kb=a,this.vb=t,this.Cb=i,e=this.bc,r="",s=0,a=e.length;a>s;s++)r+='<span class="vjs-tt-cue">'+e[s].text+"</span>";this.a.innerHTML=r,this.j("cuechange")}}},t.reset=function(){this.La=0,this.Kb=this.b.duration(),this.Cb=this.vb=0},u.Sb=u.X.extend(),u.Sb.prototype.A="captions",u.Yb=u.X.extend(),u.Yb.prototype.A="subtitles",u.Tb=u.X.extend(),u.Tb.prototype.A="chapters",u.Zb=u.c.extend({i:function(e,t,i){if(u.c.call(this,e,t,i),e.g.tracks&&0<e.g.tracks.length){t=this.b,e=e.g.tracks;var n;for(i=0;i<e.length;i++){n=e[i];var o=t,r=n.kind,s=n.label,a=n.language,l=n;n=o.za=o.za||[],l=l||{},l.kind=r,l.label=s,l.language=a,r=u.$(r||"subtitles"),o=new window.videojs[r+"Track"](o,l),n.push(o)}}}}),u.Zb.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-text-track-display"})},u.Y=u.N.extend({i:function(e,t){var i=this.ca=t.track;t.label=i.label(),t.selected=i.tb(),u.N.call(this,e,t),this.b.d(i.J()+"trackchange",u.bind(this,this.update))}}),u.Y.prototype.p=function(){u.N.prototype.p.call(this),X(this.b,this.ca.Q,this.ca.J())},u.Y.prototype.update=function(){this.selected(2==this.ca.mode())},u.ab=u.Y.extend({i:function(e,t){t.track={J:function(){return t.kind},K:e,label:function(){return t.kind+" off"},tb:s(l),mode:s(l)},u.Y.call(this,e,t),this.selected(f)}}),u.ab.prototype.p=function(){u.Y.prototype.p.call(this),X(this.b,this.ca.Q,this.ca.J())},u.ab.prototype.update=function(){for(var e,t=W(this.b),i=0,n=t.length,o=f;n>i;i++)e=t[i],e.J()==this.ca.J()&&2==e.mode()&&(o=l);this.selected(o)},u.S=u.R.extend({i:function(e,t){u.R.call(this,e,t),1>=this.I.length&&this.C()}}),u.S.prototype.sa=function(){var e,t=[];t.push(new u.ab(this.b,{kind:this.A}));for(var i=0;i<W(this.b).length;i++)e=W(this.b)[i],e.J()===this.A&&t.push(new u.Y(this.b,{track:e}));return t},u.Ca=u.S.extend({i:function(e,t,i){u.S.call(this,e,t,i),this.a.setAttribute("aria-label","Captions Menu")}}),u.Ca.prototype.A="captions",u.Ca.prototype.pa="Captions",u.Ca.prototype.className="vjs-captions-button",u.Ga=u.S.extend({i:function(e,t,i){u.S.call(this,e,t,i),this.a.setAttribute("aria-label","Subtitles Menu")}}),u.Ga.prototype.A="subtitles",u.Ga.prototype.pa="Subtitles",u.Ga.prototype.className="vjs-subtitles-button",u.Da=u.S.extend({i:function(e,t,i){u.S.call(this,e,t,i),this.a.setAttribute("aria-label","Chapters Menu")}}),t=u.Da.prototype,t.A="chapters",t.pa="Chapters",t.className="vjs-chapters-button",t.sa=function(){for(var e,t=[],i=0;i<W(this.b).length;i++)e=W(this.b)[i],e.J()===this.A&&t.push(new u.Y(this.b,{track:e}));return t},t.Ja=function(){for(var e,t,i=W(this.b),n=0,o=i.length,r=this.I=[];o>n;n++)if(e=i[n],e.J()==this.A&&e.tb()){if(2>e.readyState())return this.Gd=e,void e.d("loaded",u.bind(this,this.Ja));t=e;break}if(i=this.va=new u.la(this.b),i.a.appendChild(u.e("li",{className:"vjs-menu-title",innerHTML:u.$(this.A),xd:-1})),t){e=t.fa;for(var s,n=0,o=e.length;o>n;n++)s=e[n],s=new u.Wa(this.b,{track:t,cue:s}),r.push(s),i.Z(s)}return 0<this.I.length&&this.show(),i},u.Wa=u.N.extend({i:function(e,t){var i=this.ca=t.track,n=this.cue=t.cue,o=e.currentTime();t.label=n.text,t.selected=n.startTime<=o&&o<n.ua,u.N.call(this,e,t),i.d("cuechange",u.bind(this,this.update))}}),u.Wa.prototype.p=function(){u.N.prototype.p.call(this),this.b.currentTime(this.cue.startTime),this.update(this.cue.startTime)},u.Wa.prototype.update=function(){var e=this.cue,t=this.b.currentTime();this.selected(e.startTime<=t&&t<e.ua)},u.k.B(u.Ea.prototype.g.children,{subtitlesButton:{},captionsButton:{},chaptersButton:{}}),"undefined"!=typeof window.JSON&&"function"===window.JSON.parse)u.JSON=window.JSON;else{u.JSON={};var Z=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;u.JSON.parse=function(a,c){function d(e,t){var i,n,o=e[t];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n=d(o,i),n!==b?o[i]=n:delete o[i]);return c.call(e,t,o)}var e;if(a=String(a),Z.lastIndex=0,Z.test(a)&&(a=a.replace(Z,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"==typeof c?d({"":e},""):e;throw new SyntaxError("JSON.parse(): invalid or malformed JSON data")}}u.cc=function(){var e,t,i=document.getElementsByTagName("video");if(i&&0<i.length)for(var n=0,o=i.length;o>n;n++){if(!(t=i[n])||!t.getAttribute){u.jb();break}t.player===b&&(e=t.getAttribute("data-setup"),e!==j&&(e=u.JSON.parse(e||"{}"),v(t,e)))}else u.Cc||u.jb()},u.jb=function(){setTimeout(u.cc,1)},"complete"===document.readyState?u.Cc=f:u.U(window,"load",function(){u.Cc=f}),u.jb(),u.md=function(e,t){u.w.prototype[e]=t};var ha=this;ha.Cd=f,$("videojs",u),$("_V_",u),$("videojs.options",u.options),$("videojs.players",u.wa),$("videojs.cache",u.qa),$("videojs.Component",u.c),u.c.prototype.player=u.c.prototype.K,u.c.prototype.dispose=u.c.prototype.D,u.c.prototype.createEl=u.c.prototype.e,u.c.prototype.el=u.c.prototype.v,u.c.prototype.addChild=u.c.prototype.Z,u.c.prototype.children=u.c.prototype.children,u.c.prototype.on=u.c.prototype.d,u.c.prototype.off=u.c.prototype.o,u.c.prototype.one=u.c.prototype.U,u.c.prototype.trigger=u.c.prototype.j,u.c.prototype.triggerReady=u.c.prototype.Ta,u.c.prototype.show=u.c.prototype.show,u.c.prototype.hide=u.c.prototype.C,u.c.prototype.width=u.c.prototype.width,u.c.prototype.height=u.c.prototype.height,u.c.prototype.dimensions=u.c.prototype.Vc,u.c.prototype.ready=u.c.prototype.L,u.c.prototype.addClass=u.c.prototype.n,u.c.prototype.removeClass=u.c.prototype.t,$("videojs.Player",u.w),u.w.prototype.dispose=u.w.prototype.D,u.w.prototype.requestFullScreen=u.w.prototype.xa,u.w.prototype.cancelFullScreen=u.w.prototype.nb,u.w.prototype.bufferedPercent=u.w.prototype.Ia,u.w.prototype.usingNativeControls=u.w.prototype.Pb,$("videojs.MediaLoader",u.Mc),$("videojs.TextTrackDisplay",u.Zb),$("videojs.ControlBar",u.Ea),$("videojs.Button",u.q),$("videojs.PlayToggle",u.Wb),$("videojs.FullscreenToggle",u.Fa),$("videojs.BigPlayButton",u.Va),$("videojs.LoadingSpinner",u.Ub),$("videojs.CurrentTimeDisplay",u.Xa),$("videojs.DurationDisplay",u.Ya),$("videojs.TimeDivider",u.$b),$("videojs.RemainingTimeDisplay",u.eb),$("videojs.Slider",u.O),$("videojs.ProgressControl",u.cb),$("videojs.SeekBar",u.Xb),$("videojs.LoadProgressBar",u.$a),$("videojs.PlayProgressBar",u.Vb),$("videojs.SeekHandle",u.fb),$("videojs.VolumeControl",u.hb),$("videojs.VolumeBar",u.gb),$("videojs.VolumeLevel",u.ac),$("videojs.VolumeMenuButton",u.na),$("videojs.VolumeHandle",u.ib),$("videojs.MuteToggle",u.da),$("videojs.PosterImage",u.bb),$("videojs.Menu",u.la),$("videojs.MenuItem",u.N),$("videojs.MenuButton",u.R),u.R.prototype.createItems=u.R.prototype.sa,u.S.prototype.createItems=u.S.prototype.sa,u.Da.prototype.createItems=u.Da.prototype.sa,$("videojs.SubtitlesButton",u.Ga),$("videojs.CaptionsButton",u.Ca),$("videojs.ChaptersButton",u.Da),$("videojs.MediaTechController",u.r),u.r.prototype.features=u.r.prototype.m,u.r.prototype.m.volumeControl=u.r.prototype.m.Bc,u.r.prototype.m.fullscreenResize=u.r.prototype.m.Hd,u.r.prototype.m.progressEvents=u.r.prototype.m.Ld,u.r.prototype.m.timeupdateEvents=u.r.prototype.m.Qd,$("videojs.Html5",u.l),u.l.Events=u.l.Za,u.l.isSupported=u.l.isSupported,u.l.canPlaySource=u.l.lb,u.l.prototype.setCurrentTime=u.l.prototype.qd,u.l.prototype.setVolume=u.l.prototype.vd,u.l.prototype.setMuted=u.l.prototype.td,u.l.prototype.setPreload=u.l.prototype.ud,u.l.prototype.setAutoplay=u.l.prototype.pd,u.l.prototype.setLoop=u.l.prototype.sd,$("videojs.Flash",u.f),u.f.isSupported=u.f.isSupported,u.f.canPlaySource=u.f.lb,u.f.onReady=u.f.onReady,$("videojs.TextTrack",u.X),u.X.prototype.label=u.X.prototype.label,$("videojs.CaptionsTrack",u.Sb),$("videojs.SubtitlesTrack",u.Yb),$("videojs.ChaptersTrack",u.Tb),$("videojs.autoSetup",u.cc),$("videojs.plugin",u.md),$("videojs.createTimeRange",u.sb)}(),!function(e,t,i,n,o){o=t.location,e.src="//www.google-analytics.com/__utm.gif?utmwv=5.4.2&utmac=UA-16505296-2&utmn=1&utmhn="+n(o.hostname)+"&utmsr="+t.screen.availWidth+"x"+t.screen.availHeight+"&utmul="+(i.language||i.userLanguage||"").toLowerCase()+"&utmr="+n(o.href)+"&utmp="+n(o.hostname+o.pathname)+"&utmcc=__utma%3D1."+Math.floor(1e10*Math.random())+".1.1.1.1%3B&utme=8(vjsv)9(v4.2.2)"}(new Image,window,navigator,encodeURIComponent),_wAMD.define("legacy/videojs/video.4.3",function(){}),_wAMD.define("site/published/sections/uploadbackground",["jquery","underscore","legacy/videojs/video.4.3"],function(e,t){var i="UploadPlayer",n="uploadplayer",o=n+"-container",r=n+"-shield",s=n+"-player",a="/weebly/libraries/videojs/video-js.swf",l="objectFit"in document.documentElement.style,c={player:null,init:function(i,n){return window.videojs.options.flash.swf=a,this.$node=e(i),this.options=t.chain(n).pick(["video_url","background_url","autoplay","loop","mute"]).defaults({autoplay:!0,loop:!0,mute:!0,controls:!1,techOrder:["html5","flash"],preload:"none"}).value(),this.ID=this.$node.data("section")||(new Date).getTime(),this.createBackgroundVideo(),this},createBackgroundVideo:function(){var i=s+"-"+this.ID,a=window.videojs.players[i];a&&a.dispose();var c=o+"-"+this.ID,d=e("<div/>",{"class":o,id:c}),u=e("<div/>",{"class":r}),h=e("<video>",{"class":s+" video-js",id:i,poster:this.options.background_url,append:e("<source>",{src:this.options.video_url,type:"video/mp4"})});d.append(h,u),this.$video=h,this.$container=d,this.$node.append(d),this.player=window.videojs(i,this.options),this.player.muted(this.options.mute),l||(this.$video.addClass("js-no-object-fit"),this.cover(),e(window).on("resize."+n,t.throttle(this.cover.bind(this),25)))},destroy:function(){this.player.dispose(),this.$node.removeData(i),this.$container.remove(),this.$node=null,this.$container=null,l||e(window).off("resize."+n)},cover:function(){var e=this.$node.outerHeight(),t=this.$node.outerWidth();this.size(e,t),this.center(e,t)},size:function(e,t){var i={},n=e/t,o=this.$video.outerHeight(),r=this.$video.outerWidth(),s=o/r;s>=n?(i.width="100%",i.height=""):(i.width="",i.height=e+"px"),this.$video.css(i)},center:function(e,t){var i={},n=this.$video.outerHeight(),o=this.$video.outerWidth();Math.ceil(n)>Math.ceil(e)&&(i.marginTop=-(n-e)/2,i.marginLeft=""),Math.ceil(o)>Math.ceil(t)&&(i.marginTop="",i.marginLeft=-(o-t)/2),this.$video.css(i)}};e.fn[i]=function(t){return this.each(function(){if(!e.data(this,i)){var n=Object.create(c);n.init(this,t),e.data(this,i,n)}})}}),_wAMD.define("site/published/sections/utils",["jquery","underscore","vendor/bower_components/mobile-detect/mobile-detect","vendor/bower_components/scrollreveal/dist/scrollreveal","vendor/bower_components/ytBackground/src/jquery.youtubebackground","vendor/bower_components/vimeoBackground/src/jquery.vimeobackground","site/published/sections/uploadbackground"],function(e,t,i,n){var o,r={applyBackgroundVideo:function(e,t,n,o){if(e&&(o&&e.css("minHeight",270),e.data("properties",t),(o||n)&&!new i(window.navigator.userAgent).mobile())){switch(t.video_type){case"youtube":this.initYoutubeVideo(e,t);break;case"vimeo":this.initVimeoVideo(e,t);break;case"upload":this.initUploadedVideo(e,t);break;case"gallery":this.initGalleryVideo(e,t)}e.data("has-video",!0)}},initYoutubeVideo:function(e,t){e.YTPlayer({videoId:t.video_id,repeat:t.loop,mute:t.mute,fitToBackground:!1,pauseOnScroll:!1,playerVars:{autoplay:t.autoplay,controls:0,showinfo:0,modestbranding:1,wmode:"transparent",branding:0,rel:0,autohide:0,origin:window.location.origin}})},initVimeoVideo:function(e,t){e.VimeoPlayer({videoId:t.video_id,loop:t.loop,mute:t.mute,autoplay:t.autoplay})},initUploadedVideo:function(e,t){e.UploadPlayer(t)},initGalleryVideo:function(e,t){e.UploadPlayer(t)},toggleVideoBackground:function(e){e&&(e.data("ytPlayer")?e.find('[id^="ytplayer"]').toggle():e.data("VimeoPlayer")?e.find('[id^="vimeoplayer"]').toggle():e.data("UploadPlayer")&&e.find('[id^="uploadplayer"]').toggle())},destroyVideoBackground:function(e){e&&(e.data("ytPlayer")?e.data("ytPlayer").destroy():e.data("VimeoPlayer")?e.data("VimeoPlayer").destroy():e.data("UploadPlayer")&&e.data("UploadPlayer").destroy(),e.removeData("has-video"))},applyBackgroundEffects:function(r,s,a){Object.keys(s).forEach(function(l){var c=s[l];switch(t.isObject(c.css)&&!t.isArray(c.css)&&Object.keys(c.css).forEach(function(e){r.css(e,c.css[e])}),t.isArray(c.classes)&&c.classes.forEach(function(e){r.addClass(e)}),l){case"parallax":var d=new i(window.navigator.userAgent);(d.mobile()||d.tablet())&&r.css("background-attachment","");break;case"reveal":o||(o=n());var u=a?r.find(".weebly-content-area"):r.find(".wsite-section-elements"),h=a?u.children(':not(".wsite-spacer-li")'):u.children(':not(".wsite-spacer")');if(0===h.length)break;h.each(function(t,i){var n=e(i);a&&"empty-message"!==n.attr("id")&&n.data("before-reveal-style",i.style),n.addClass("sr-nodelist")});var p=u[0].querySelectorAll(".sr-nodelist"),f={opacity:0,scale:1,easing:"ease-in",afterReveal:function(t){var i=e(t);a&&(i.data("before-reveal-style")&&(t.style=i.data("before-reveal-style"),i.removeData("before-reveal-style")),i.removeAttr("data-sr-id")),i.removeClass("sr-nodelist")},sequenceInterval:100};f=r.hasClass("wsite-header-section")?t.extend({duration:700,delay:800},f):t.extend({duration:300,delay:300,origin:"top",distance:"10px"},f);var m=t.defaults({},f);o.reveal(p,m,m.sequenceInterval)}})},getSectionElement:function(t){return e('.wsite-section[data-section="'+t+'"]')}};return r}),_wAMD.define("ui-framework/js/components/dialog",["jquery","underscore","./base-view","./panel","./overlay","./topbar","./utils"],function(e,t,i,n,o,r,s){var a=n.extend({className:"dialog",innerOverlayClassName:"dialog__overlay",contentViewTriggerPrefix:"dialog",topbar:null,topbars:null,title:"Dialog",hasContentPadding:!0,hasTopbarBorder:!0,loadingText:"Loading content...",_initialize:function(){n.prototype._initialize.call(this),this.topbars=[];var e=this.queryOption("topbar");e instanceof r||(e=new r(e&&"object"==typeof e?e:this.getTopbarOptions())),this.topbar=e,this.addTopbar(e)},processContentView:function(e){this.extendOptions(t.result(e,"dialogOptions",{})),e.dialog=this,e.dialogPanel=this,e instanceof i&&(this.hasContentPadding=!1),this.topbar&&(this.topbar.setTitle(this.queryOption("title")),this.topbar.setBackLink(this.getBackLink()),this.topbar.setForwardLink(this.getForwardLink()))},getTopbarOptions:function(){return{title:this.queryOption("title"),hasTopbarBorder:this.queryOption("hasTopbarBorder")}},destroy:function(){n.prototype.destroy.apply(this,arguments)},renderSkeleton:function(){var e=this.queryOption("hasContentPadding")?"":" dialog__content--flush",t='<div class="dialog__header"></div><div class="dialog__scroll-mask"><div class="dialog__scroll"><div class="dialog__content'+e+'"></div></div><div class="dialog-loading"><div class="dialog-loading__container"><div class="dialog-spinner"><div class="dialog-spinner__bg"></div></div><span class="dialog-loading__text">'+this.queryOption("loadingText")+"</span></div></div></div>";this.$el.html(t)},renderHeader:function(e){this.topbar=this.topbars[0],this.topbar.setBackLink(this.queryOption("backLink")),this.topbar.setForwardLink(this.queryOption("forwardLink"));var i=t.extend({context:this},this.topbar.getNormalizedLink(this.getBackLink())),n=t.extend({context:this},this.topbar.getNormalizedLink(this.getForwardLink()));this.topbar.setBackLink(i),this.topbar.setForwardLink(n),this.topbar.render(),this.topbar.$el.addClass("dialog__topbar"),this.attachTopbar(this.topbar)},renderContent:function(){n.prototype.renderContent.apply(this,arguments),this.contentView instanceof i&&this.contentView.$el.addClass("dialog__component")},getBackLink:function(){return this.topbar.queryOption("backLink")},getForwardLink:function(){return this.topbar.queryOption("forwardLink")},queryHeaderOuterEl:function(){return this.$el.find(".dialog__header")},queryHeaderInnerEl:function(){return this.$el.find(".dialog__header")},queryContentOuterEl:function(){return this.$el.find(".dialog__scroll-mask")},queryContentInnerEl:function(){return this.$el.find(".dialog__content")},queryScrollEl:function(){return this.queryContentOuterEl()},queryDialogEl:function(){return this.comboDialog?this.comboDialog.$el:this.$el},back:function(){var t=this;return this.topbar.isBackEnabled?this._trigger("before:back").then(function(){t.executeBack(),t._trigger("back")}):e.Deferred().reject().promise()},executeBack:function(){var e=this.topbar.queryOption("backLink"),t=(e||{}).action;return t?(this[t].call(this),t):void 0},forward:function(){var t=this,i=this.topbar.queryOption("forwardLink");(i||{}).action;return this.topbar.isForwardEnabled?this._trigger("before:forward").then(function(){t.executeForward(),t._trigger("forward")}):e.Deferred().reject().promise()},executeForward:function(){var e=this.topbar.queryOption("forwardLink"),t=(e||{}).action;return t?(this[t].call(this),t):void 0},setIsLoading:function(e){this.$el.find(".dialog-loading").toggleClass("is-visible",e)},addTopbar:function(e){this.topbars.push(e);var t=this;e.on("back",function(){t.back()}).on("forward",function(){t.forward()})},pushTopbar:function(e){this.addTopbar(e),this.gotoTopbar(this.topbars.length-1,"add")},popTopbar:function(){var e=this.topbars.length;e>1&&this.gotoTopbar(e-2,"remove")},gotoTopbar:function(e,t){var i,n=this.topbars[e];null!=this.topbar&&(i=this.topbar);var o="add"===t?"up":"down";this.topbar=n,this.transitionTopbars(i,n,o)},attachTopbar:function(e){e.$el.appendTo(this.queryHeaderInnerEl())},transitionTopbars:function(e,t,i){
var n=this,o=this.queryHeaderOuterEl();return t.render(),t.$el.addClass("dialog__topbar"),o.addClass("is-transitioning").height(e.$el.outerHeight()),"up"===i&&this.attachTopbar(t),s.promiseTimeout(0).then(function(){if("up"===i)e.$el.addClass("is-sliding-up"),t.$el.addClass("is-entering");else{if("down"!==i)throw new Error('transitionTopbars direction argument accepts the following: "up" or "down"');t.$el.removeClass("is-sliding-up").addClass("is-entering is-sliding-down")}}).then(function(){return s.promiseTimeout(0)}).then(function(){return"up"===i?s.promiseTransition(e.$el):s.promiseTransition(t.$el)}).then(function(){t.$el.removeClass("is-sliding-up is-sliding-down is-entering"),"down"===i&&(e.$el.removeClass("is-sliding-up is-sliding-down is-entering"),e.destroy(),n.topbars=n.topbars.slice(0,n.topbars.length-1)),o.removeClass("is-transitioning").height("")})},enableEditMode:function(e){var i=t.extend({forwardLink:{context:this,text:"Done",action:"close"},isEditMode:!0},e);this.pushTopbar(new r(i)),this.queryDialogEl().addClass("is-edit-mode"),this._trigger("enableEditMode")},disableEditMode:function(){this.topbars.length>1&&(this.popTopbar(),this.queryDialogEl().removeClass("is-edit-mode"),this._trigger("disableEditMode"))}});e.each(["setTitle","setBackLink","setForwardLink","setBackEnabled","setForwardEnabled"],function(e,t){a.prototype[t]=function(){this.topbar[t].apply(this.topbar,arguments)}});var l=e.extend({},o.Mixin,{zIndex:9999,size:"large",isFullscreen:!1,isModal:!1,hAlignment:"center",vAlignment:"center",draggableSelector:".dialog__topbar",positionRefresh:!0,dialogResizeHandler:null,backLink:{isClose:!0,action:"close"},open:function(t){return this.isFullscreen=this.queryOptionOverride("isFullscreen",t),this.isFullscreen?(e("html,body").css({margin:0,padding:0,overflow:"hidden",height:"100%"}),this.$el.addClass("dialog--fullscreen"),this.showWithin("body")):o.Mixin.open.call(this,t),this.initializeResizeOnWindowResize(),this.isModal=this.queryOptionOverride("isModal",t),this.isModal&&(this.scrollPosition=e(window).scrollTop(),this.scrollbarWidth=window.innerWidth-document.body.clientWidth,this.defaultBodyAttr=e("body").attr("style")||"",e("body").css({position:"fixed",top:-this.scrollPosition,width:"calc(100% + "+this.scrollbarWidth+"px)","margin-left":-this.scrollbarWidth+"px"})),this},initializeResizeOnWindowResize:function(){var i=this;e(window).on("resize",i.dialogResizeHandler=t.debounce(function(){i.updateSize()},100))},destroyResizeOnWindowResize:function(){this.dialogResizeHandler&&e(window).off("resize",this.dialogResizeHandler)},executeClose:function(){return this.isFullscreen||o.Mixin.executeClose.call(this),this.destroyResizeOnWindowResize(),this.isModal&&e("body").attr("style",this.defaultBodyAttr).scrollTop(this.scrollPosition),this},updateSize:function(e){var t=this.queryOptionOverride("size",e);return t&&this.$el.removeClass("dialog--small dialog--medium dialog--large").addClass("dialog--"+t),n.prototype.updateSize.call(this),this}}),c=a.extend(l);return c.open=function(e){var t=new this(e);return t.open()},c.Panel=a,c.Mixin=l,c}),_wAMD.define("ui-framework/js/components/combo-dialog",["jquery","./panel","./dialog","./utils"],function(e,t,i,n){var o=t.extend(e.extend({},i.Mixin,{className:"dialog",template:'<div class="dialog__topbar-container"></div>\n{{#hasProgressBar}}\n	<div class="dialog__progress-bar progress-bar">\n		<div class="progress-bar__progress"></div>\n	</div>\n{{/hasProgressBar}}\n<div class="dialog__content-container"></div>',innerOverlayClassName:"dialog__overlay",contentViewTriggerPrefix:"dialog",backLink:{isClose:!0},panels:null,panelCount:null,currentPanel:null,currentPanelIndex:null,transitionPromise:null,_initialize:function(){t.prototype._initialize.call(this),this.panelCount=this.queryOption("panelCount"),this.panels=[],this.addGivenPanels()},destroy:function(){var e,i=this.panels;for(e=0;e<i.length;e++)i[e].destroy();return this.panels=[],this.currentPanel=null,this.currentPanelIndex=null,t.prototype.destroy.apply(this,arguments)},_onBeforeClose:function(){return this.currentPanel?this.currentPanel._trigger("before:leave"):void 0},_onClose:function(){this.currentPanel&&this.currentPanel._trigger("leave")},getRenderData:function(){return{hasProgressBar:this.queryOption("hasProgressBar")}},queryHeaderOuterEl:function(){return this.$el.find(".dialog__topbar-container")},queryContentOuterEl:function(){return this.$el.find(".dialog__content-container")},queryContentInnerEl:function(){return this.$el.find(".dialog__content-container")},queryScrollEl:function(){return this.$el.find(".dialog__scroll-mask")},renderContent:function(){if(this.panels.length){var e=this.options.initialPanelIndex;e&&this.panels[e]?this.gotoPanel(e):this.gotoPanel(0)}},_onAttach:function(){t.prototype._onAttach.apply(this,arguments),this.currentPanel&&this.currentPanel._trigger("attach")},_onShow:function(){t.prototype._onShow.apply(this,arguments),this.currentPanel&&(this.currentPanel._trigger("show"),this.updateHeight())},computeHeight:function(){var e=this.currentPanel.queryOption("height");return null!=e?e:this.$headerEl.outerHeight()+this.currentPanel.queryContentNaturalHeight()},queryContentNaturalHeight:function(){return this.currentPanel.queryContentNaturalHeight()},addGivenPanels:function(){var e,t=this.options,i=t.panels;if(t.initialPanel&&this.addPanel(t.initialPanel),i)for(e=0;e<i.length;e++)this.addPanel(i[e])},addPanel:function(e){e instanceof r||(e=new r(e)),e.comboDialog=this,!this.panels.length&&this.backLink&&e.setBackLink(this.backLink),this.panels.push(e)},pushPanel:function(t){var i=this,n=this.currentPanel;return e.when(n&&n._trigger("before:leave",t),n&&n._trigger("before:push",t),i._trigger("before:push",t,n)).then(function(){i.executePush(t),n&&n._trigger("leave",t),n&&n._trigger("push",t),i._trigger("push",t,n),t._trigger("enter")})},popPanel:function(){var t,i=this,n=this.currentPanel;return this.currentPanelIndex>0?(t=this.panels[this.currentPanelIndex-1],e.when(n&&n._trigger("before:leave",t),n&&n._trigger("before:pop",t),this._trigger("before:pop",t,n)).then(function(){i.executePop(),n&&n._trigger("leave",t),n&&n._trigger("pop",t),i._trigger("pop",t,n),t._trigger("enter")})):this.close()},forward:function(){var t,i=this,n=this.currentPanel;return n.topbar.isForwardEnabled?this.currentPanelIndex<this.panels.length-1?(t=this.panels[this.currentPanelIndex+1],e.when(n&&n._trigger("before:leave",t),n&&n._trigger("before:forward",t),i._trigger("before:forward",t)).then(function(){n.executeForward()||i.executeForward(),n&&n._trigger("leave",t),n&&n._trigger("forward",t),i._trigger("forward",t,n),t._trigger("enter")})):e.when(n&&n._trigger("before:forward")).then(function(){n&&n._trigger("forward")}):e.Deferred().reject().promise()},back:function(){var t,i=this,n=this.currentPanel;return n.wasPushed?this.popPanel():n.topbar.isBackEnabled?this.currentPanelIndex>0?(t=this.panels[this.currentPanelIndex-1],e.when(n&&n._trigger("before:leave",t),n&&n._trigger("before:back",t),this._trigger("before:back",t,n)).then(function(){n.executeBack()||i.executeBack(),n&&n._trigger("leave",t),n&&n._trigger("back",t),i._trigger("back",t,n),i.currentPanel._trigger("enter")})):e.when(i.currentPanel._trigger("before:close")).then(function(){i.currentPanel._trigger("close"),i.close()}):e.Deferred().reject().promise()},executePush:function(e){this.panels=this.panels.slice(0,this.currentPanelIndex+1),this.addPanel(e),e.wasPushed=!0,this.gotoPanel(this.currentPanelIndex+1)},executePop:function(){this.panels=this.panels.slice(0,this.currentPanelIndex),this.gotoPanel(this.currentPanelIndex-1)},executeForward:function(){this.gotoPanel(this.currentPanelIndex+1)},executeBack:function(){this.gotoPanel(this.currentPanelIndex-1)},gotoPanel:function(t){function i(){if(n.currentPanelIndex!==t){var e=n.panels,i=e[t],o=n.currentPanel,r=o?t-n.currentPanelIndex:0;return n.currentPanel=i,n.currentPanelIndex=t,i.hasBack=t>0,i.hasForward=t<e.length-1,n.updateProgress(),o?n.transitionPanels(o,i,r):(i.render(),i._trigger("before:attach"),n.attachPanelEls(i),void 0)}}var n=this;n.queryOption("hasProgressBar");return this.transitionPromise?this.transitionPromise=e.when(this.transitionPromise).then(i):this.transitionPromise=i()},attachPanelEls:function(e){this.$headerEl.append(e.$headerEl),this.$contentEl.append(e.$contentEl),e.setElement(e.$contentEl)},transitionPanels:function(t,i,o){var r,s,a=this;return i.render(),this.$headerEl.addClass("is-transitioning").height(t.$headerEl.outerHeight()),this.$contentEl.addClass("is-transitioning"),r=t.$headerEl.add(t.$contentEl).addClass("is-current").addClass("is-exiting"),s=i.$headerEl.add(i.$contentEl).addClass(0>o?"is-back":"is-forward").addClass("is-entering"),i._trigger("before:attach"),this.attachPanelEls(i),i._trigger("attach"),this.updateHeight(),n.promiseTimeout(0).then(function(){r.addClass(0>o?"is-forward":"is-back").removeClass("is-current"),s.removeClass("is-back is-forward").addClass("is-current"),a.$headerEl.height(i.$headerEl.outerHeight())}).then(function(){return n.promiseTimeout(0)}).then(function(){return e.when(n.promiseTransition(i.$headerEl),n.promiseTransition(i.$contentEl))}).then(function(){t.destroy({preventContentViewDestroy:!0}),s.removeClass("is-entering is-current"),r.removeClass("is-exiting is-back is-forward"),a.$headerEl&&a.$contentEl&&(a.$headerEl.removeClass("is-transitioning").height(""),a.$contentEl.removeClass("is-transitioning")),i._trigger("show")})},updateProgress:function(){var e,t,i=this.currentPanel.queryOption("progressPercentage"),n=this.queryOption("hasProgressBar")&&i!==!1;this.$el.find(".progress-bar").toggle(n),n&&(e=this.panelCount,null==e&&(e=this.panels.length),t=null!=i&&i!==!1?i:e>0?this.currentPanelIndex/(e-1)*100:0,this.$el.find(".progress-bar__progress").width(parseFloat(t).toFixed(2)+"%"))},setPanelCount:function(e){this.panelCount=e,this.updateProgress()}})),r=i.Panel.extend({backLink:{isDirectional:!0,text:"Back"},forwardLink:{isDirectional:!0,text:"Next"},comboDialog:null,hasBack:!1,hasForward:!1,wasPushed:!1,progressPercentage:null,getBackLink:function(){var e=this.queryOption("backLink");return e!==r.prototype.backLink?e:this.hasBack?e:this.comboDialog.backLink},getForwardLink:function(){var e=this.queryOption("forwardLink");return e!==r.prototype.forwardLink?e:this.hasForward?e:void 0},pushDialog:function(e,t){var n=this,r=n.comboDialog.$el,s=null,a=null,l=null,c=null,d=null,u=!1,t=t||{};if(e instanceof i||e instanceof o){if(r.css("overflow","hidden"),s=this.comboDialog.width||r.width(),a=this.comboDialog.height||r.height(),l=this.comboDialog.options.size,c=s,e.options.size&&e.options.size!==l&&(c=this.sizeToWidthMap[e.options.size],u=!0),e.width&&e.width!==s&&(c=e.width,u=!0),e.height&&e.height!==a?(d=e.height,u=!0):d=a,e.vAlignment=!1,e.hAlignment=!1,u){var h=r.position().left,p=r.position().top,f=h-(c-r.width())/2,m=d?p-(d-r.height()):p,g={"max-width":s,height:a},v={"max-width":c,height:d};this.comboDialog.queryOption("pointAt")&&(this.comboDialog.$arrow.hasClass("popover__arrow--up")&&(m=p),g.top=p,g.left=h,v.top=m,v.left=f),e.once("before:attach",function(){r.addClass("is-fading"),r.animate(v,500,function(){e.options.size&&(n.comboDialog.options.size=e.options.size),n.comboDialog.updatePosition(),r.removeClass("is-fading")})}),e.once("before:close",function(){r.addClass("is-fading"),r.animate(g,500,function(){e.options.size&&(n.comboDialog.options.size=l,n.comboDialog.updateSize()),n.comboDialog.updatePosition(),r.removeClass("is-fading"),r.css("overflow","visible")})})}return i.Panel.prototype.openOverlay.call(this,e,t)}},queryContentOuterEl:function(){return this.$el.is(".dialog__scroll-mask")?this.$el:this.$el.find(".dialog__scroll-mask")},queryHeaderInnerEl:function(){return this.$el.closest(".dialog").find(".dialog__header")}});return e.each(["close","back","forward","pushPanel","popPanel","setPanelCount","getContainerEl"],function(e,t){r.prototype[t]=function(){return this.comboDialog[t].apply(this.comboDialog,arguments)}}),o.Panel=r,o}),_wAMD.define("element/editor/model/ElementSettingModel",["backbone-all"],function(e){var t=e.Model.extend({isValid:function(e){void 0===e&&(e=this.get("value"));var t={"int":"validateInteger",slider:"validateInteger",string:"validateString",text:"validateString",checkbox:"validateBoolean",toggle:"validateBoolean"},i=t[this.get("type")];return i&&this.hasOwnProperty(i)?this[i](e):!0},getOptions:function(){var e=this.get("values"),t=[];return e?_.each(e,function(e,i){var n=jQuery.extend({},e);if(n.actionPaneIndex&&(n.optionActionPaneIndex=n.actionPaneIndex),"string"==typeof e)n={name:_W.utl(e),value:e};else if("number"==typeof e)n={name:e,value:e};else{var o=n["short"],r=n.name;o&&(n["short"]=_W.utl(o)),n.name=_W.utl(r)}t.push(n)}):t=null,t},validateInteger:function(e){var t=this.get("max"),i=this.get("min"),n=this.get("step"),o=!0;return null!=i&&void 0!=i&&i>e&&(o=!1),null!=t&&void 0!=t&&e>t&&(o=!1),null!=n&&void 0!=n&&e%n!=0&&(o=!1),o},validateString:function(e){var t=this.get("max"),i=this.get("min"),n=!0;return null!=i&&void 0!=i&&e.length<i&&(n=!1),null!=t&&void 0!=t&&e.length>t&&(n=!1),n},validateBoolean:function(e){return e===!0||e===!1},validateAsFalse:function(e){return!1}});return t}),_wAMD.define("element/editor/view/settings/utils",["jquery"],function(e){function t(e,i){var n=e.get?e.get("properties"):e.properties;if(n||(n=e.get?e.attributes:e),n.length)for(var o=0;o<n.length;o++){var r=i(n[o],n);if("undefined"!=typeof r)return r;if(r=t(n[o],i),"undefined"!=typeof r)return r}else if("undefined"==typeof n.actionPaneIndex){var r=i(n);if("undefined"!=typeof r)return r}}return{propertyIterator:function(e,i,n){t(e,i,n)},setPropertyByKey:function(e,i,n,o){if(e.models){var r=function(e){"undefined"!=typeof e[i]&&e[i]===n&&(e.value=o)};_.each(e.models,function(e){if(e.get("properties")){var s=JSON.parse(JSON.stringify(e.get("properties")));t(s,r),e.set("properties",s)}else n&&e.get(i)===n&&e.set("value",o)})}},getPropertyByKey:function(e,i,n){if(e.models){var o,r=function(e){if("undefined"!=typeof e[i]&&e[i]===n){var t=e.measure||"",o="undefined"!=typeof e.value?e.value+t:e;return o}};return _.each(e.models,function(e){var i=t(e,r);"undefined"!=typeof i&&(o=i)}),o}}}}),_wAMD.define("element/editor/view/settings/SettingsTooltipUtil",[],function(){var e=25;return{isLabelTooLong:function(t){return e<t.length},truncateLabel:function(e){return this.isLabelTooLong(e)?e.slice(0,21)+"...":e},formTooltip:function(e,t){if(!t)return"";var i="";return this.isLabelTooLong(e)&&(i="<label>"+e+"</label>"),i+"<p>"+t+"</p>"}}}),_wAMD.define("ui-framework/js/components/hover-tip",["jquery","./base-view","./overlay","./utils"],function(e,t,i,n){function o(t,i){var o=e(t),r=n.getElDataAttributes(t,"data-hover-tip-"),s=o.data("hover-tip");if("object"!=typeof s){if(!r.content&&!r.text)throw new Error("No Hover Tip content specified.");var a;a=e(r.cssclass?'<div class="hover-tip '+r.cssclass+'"></div>':'<div class="hover-tip"></div>'),r.content&&a.html(r.content),r.text&&a.text(r.text),s=new c({el:a,pointAt:o}),o.data("hover-tip",s)}s.toggle(r,i)}function r(e){o(this,"open")}function s(e){o(this,"close")}function a(){e(document).off("mouseenter.hoverTip","[data-hover-tip]").off("mouseleave.hoverTip","[data-hover-tip]").on("mouseenter.hoverTip","[data-hover-tip]",r).on("mouseleave.hoverTip","[data-hover-tip]",s)}function l(){e("[data-hover-tip]").each(function(){var t=e(this).data("hover-tip");t&&t.close()})}var c=t.extend(e.extend({},i.Mixin,{className:"hover-tip",arrowSize:0,arrowGap:10,showPointAtArrow:!1,constructor:function(i){t.call(this,i);var n=this.queryOption("el");n&&e(n).css("display","block").detach()},toggle:function(e,t){"close"===t?this.close():"open"===t&&(this.setElement(this.queryOption("el")),this.$el.removeClass("is-out"),this.open(e))},onDestroy:function(){this.options.pointAt.removeData("hover-tip")},resetFocus:function(){}}));return c.initialize=a,c.closeAll=l,c}),_wAMD.define("element/editor/view/settings/item-views/BaseSettingsItemView",["backbone-all","underscore","element/editor/view/settings/utils","ui-framework/js/components/hover-tip"],function(e,t,i,n){var o=e.Marionette.ItemView.extend({modelEvents:{change:"changeHandler"},attributes:function(){var e,i=this,n=i.model.get("type"),o=["select","radio","button"];return!i.options.isInGroup&&t.contains(o,n)||i.options.isExternal||"optionItems"===n&&!i.options.isInGroup||(e="group__item"),{"class":e}},initialize:function(){(this.model.get("hovertip")||this.model.get("tooltip"))&&(n.prototype.executeClose=function(){var e=this.$el,t=this.$modalEl;this.currentOpenOptions=null,this.destroyCloseOnEsc(),this.destroyCloseOnEnter(),this.destroyCloseOnClick(),this.destroyCloseOnClickAway(),this.destroyRepositioning(),e.removeClass("is-in").add(t||null),this.destroy(),e.removeClass("modal__subject"),this.$outerEl&&(this.$outerEl.remove(),this.$outerEl=null)},n.initialize())},onRender:function(){var e=this.model.get("hideOn"),n=!1;if(e){var o=e.propertyReference,r=Weebly.Elements.getPropertyByReference(o),s=i.getPropertyByKey(this.collection||this.model.collection,"cfpid",r.cfpid)||r.property_result,a=e.value;t.isArray(a)?t.each(a,function(e){e===s&&(this.close(),this.$el=null,n=!0)},this):a&&a===s&&(this.close(),this.$el=null,n=!0)}return n},getValue:function(){throw"ElementSettingsError: Failed to override BaseSettingsItemView.getValue in subclass"},isValid:function(e){var e=this.getValue();return this.model?this.model.isValid(e):!1},saveValue:function(){var e=this.model.get("ucfpid"),t=this.model.get("cfpid");if(this.isValid()){if(this.hideError(),this.model.get("value")===this.getValue())return;return this.model.set("value",this.getValue()),(e||t)&&Weebly.Elements.onChange(e,t),!0}return this.showError(),!1},showError:function(){this.$el.addClass("is-error")},hideError:function(){this.$el.removeClass("is-error"),this.$el.find(".error").removeClass("error")},changeHandler:function(){this.collection&&i.setPropertyByKey(this.collection,"actionPaneIndex",this.model.get("actionPaneIndex"),this.model.get("value"))}});return o}),_wAMD.define("ui-framework/js/components/input-placeholder",["jquery","underscore","./base-view","./utils"],function(e,t,i,n){function o(e){var t=e.data("adv-placeholder");t||(t=new a({el:e}),e.data("adv-placeholder",t)),t.refresh()}function r(t){o(e(this))}var s={},a=i.extend({slideDistance:20,placeholderGutter:20,initialize:function(){this.render()},render:function(){var e=this.$el.is(":focus");this.$el.after('<div class="form-control__placeholder">'+this.$el.attr("placeholder")+"</div>"),e&&this.$el.focus(),this.$placeholder=this.$el.siblings(".form-control__placeholder"),this.inputPaddingRight=parseInt(this.$el.css("padding-right").split("px")[0],10),this.$placeholder.css("line-height",this.$el.css("height"))},showPlaceholder:function(){this.$placeholder.addClass("is-visible").css("padding-right",this.inputPaddingRight+"px").on("click",this.$el.focus())},hidePlaceholder:function(){this.$placeholder.removeClass("is-visible").css("padding-right",this.inputPaddingRight+this.queryOption("slideDistance")+"px").off("click","**")},refresh:function(){if(this.$el.val()){var e=this.$el.width(),t=n.detectInputWidth(this.$el),i=this.$placeholder.width();t+i+this.queryOption("placeholderGutter")>e?this.hidePlaceholder():this.showPlaceholder()}else this.hidePlaceholder()}}),s={initialize:function(){var i=200;e(document).off("keyup.adv-placeholder").on("keyup.adv-placeholder","[data-adv-placeholder]",t.throttle(r,i))},updatePlaceholder:o};return s}),_wAMD.define("tpl!elements/settings/tooltip-string.tpl",[],function(){return'<label class="form-control form-control--borderless"{{#tooltip}} data-hover-tip="" data-hover-tip-wrap-class-name="ui-framework" data-hover-tip-cssclass="settings-tooltip" data-hover-tip-follow = "true" data-hover-tip-delay="true" data-hover-tip-content="{{tooltip}}" {{/tooltip}}>\n	<input id="{{ucfpid}}" data-adv-placeholder name="adv" placeholder="{{label}}" type="text" value="{{value}}">\n</label>\n'}),_wAMD.define("element/editor/view/settings/item-views/StringItemView",["backbone-all","underscore","mustache","editor-site-shared/ui/constants","element/editor/view/settings/SettingsTooltipUtil","element/editor/view/settings/item-views/BaseSettingsItemView","ui-framework/js/components/input-placeholder","tpl!elements/settings/tooltip-string.tpl"],function(e,t,i,n,o,r,s,a){var l=r.extend({template:i.compile(a),events:{"blur @ui.input":"blurHandler","keyup @ui.input":"handleKeyPress"},ui:{input:"input",remaining:".remaining"},initialize:function(){s.initialize()},templateHelpers:function(){var e=this,t=e.model.get("label"),i=e.model.get("tooltip");return{value:function(){return e.getTextValueFromModel()},remaining:function(){var t=parseInt(e.model.get("max"),10);return t?t-(e.model.get("value")||"").length:!1},show_limits:function(){return!(!e.model.get("min")&&!e.model.get("max"))},label:o.truncateLabel(_W.utl(t)),tooltip:o.formTooltip(_W.utl(t),i)}},onRender:function(){r.prototype.onRender.call(this),this.model.get("legacy")!==!0&&this.ui.input.val()&&"INPUT"===this.ui.input.prop("tagName")&&setTimeout(function(){s.updatePlaceholder(this.ui.input)}.bind(this),500)},blurHandler:function(e){var t=this;t.getTextValueFromModel()!==t.ui.input.val()&&t.saveValue()},handleKeyPress:function(e){this.updateCharacterCount(e),this.$el.removeClass("invalid")},updateCharacterCount:function(e){var t=parseInt(this.model.get("max"),10);if(t){var i=t-this.ui.input.val().length;0>i?this.ui.input.val(this.ui.input.val().slice(0,t)):this.ui.remaining.text(i)}},getValue:function(){var e=this.ui.input.val();return this.isStoredAsHtml()&&(e=t.escape(e)),e},isValid:function(){var e=this.getValue(),t=this.model.get("max"),i=this.model.get("min"),n=!0;return null!=i&&void 0!=i&&e.length<i&&(n=!1),null!=t&&void 0!=t&&e.length>t&&(n=!1),n},isStoredAsHtml:function(){return this.model&&this.model.get("cfpid")===n.BUTTON_ELEMENT_ID},convertLinesToSpaces:function(e){return e.replace(/(\<br\s?\/?\>)/g," ")},getTextValueFromModel:function(){var e,i=this,n=i.model.get("value");return n&&i.isStoredAsHtml()?e=t.unescape(i.convertLinesToSpaces(n)):n=n||i.model.get("default")||"",e||n}});return l}),_wAMD.define("tpl!elements/settings/tooltip-integer.tpl",[],function(){return'<div class="form-control form-control--stepper form-control--borderless">\n	<div class="form-control__item default-cursor"{{#tooltip}} data-hover-tip="" data-hover-tip-wrap-class-name="ui-framework" data-hover-tip-cssclass="settings-tooltip" data-hover-tip-follow = "true" data-hover-tip-delay="true" data-hover-tip-content="{{tooltip}}" {{/tooltip}}>{{label}}</div>\n	<div class="form-control__item form-control__item--right">\n		<div class="stepper">\n			<div class="stepper__step icon" data-role="decrease">minussmall</div>\n			<input class="stepper__field" id="{{ucfpid}}" type="text" value="{{value}}" placeholder="{{default}}" data-measure="{{measure}}">\n			<div class="stepper__step icon" data-role="increase">plussmall</div>\n		</div>\n	</div>\n</div>\n'}),_wAMD.define("element/editor/view/settings/item-views/IntegerItemView",["jquery","backbone-all","mustache","element/editor/view/settings/SettingsTooltipUtil","element/editor/view/settings/item-views/BaseSettingsItemView","tpl!elements/settings/tooltip-integer.tpl"],function(e,t,i,n,o,r){var s=o.extend({template:i.compile(r),events:{"keypress @ui.input":"onKeyPress","blur @ui.input":"inputBlur","click .stepper__step":"stepHandler"},ui:{input:"input",increase:"[data-role=increase]",decrease:"[data-role=decrease]"},initialize:function(){o.prototype.initialize.call(this),this.stepAmount=this.model.get("step")?this.model.get("step"):1},templateHelpers:function(){var e=this,t=e.model.get("label"),i=e.model.get("tooltip");return{"default":e.model.get("default")||0,label:n.truncateLabel(_W.utl(t)),tooltip:n.formTooltip(_W.utl(t),i)}},onKeyPress:function(e){this.isKeyNumeric(e.which)||e.preventDefault()},stepHandler:function(t){var i=e(t.target),n=i.attr("data-role")||i.parent().attr("data-role");"increase"===n?this.stepUp(t):"decrease"===n&&this.stepDown(t)},stepUp:function(e){e.preventDefault();var t=this.getValueOrDefault(),i=parseInt(this.model.get("max"))||Number.MAX_SAFE_INTEGER,n=parseInt(this.stepAmount,10);return t>=i?void this.ui.increase.addClass("is-disabled"):(this.ui.decrease.removeClass("is-disabled"),this.ui.input.val(t+n),void this.ui.input.blur())},stepDown:function(e){e.preventDefault();var t=this.getValueOrDefault(),i=parseInt(this.model.get("min"))||0,n=parseInt(this.stepAmount,10);return i>=t?void this.ui.decrease.addClass("is-disabled"):(this.ui.increase.removeClass("is-disabled"),this.ui.input.val(t-n),void this.ui.input.blur())},getValueOrDefault:function(){var e=this.getValue();return isNaN(e)||null===e||void 0===e?parseInt(this.model.get("default"),10)||0:e},getValue:function(){return parseInt(this.ui.input.val(),10)},isKeyNumeric:function(e){return String.fromCharCode(e)%1===0},inputBlur:function(){var e=this.getValueOrDefault(),t=parseInt(this.model.get("max"),10),i=parseInt(this.model.get("min"),10);this.model.get("step")&&(step=parseInt(this.model.get("step"),10)),e>t&&(e=t),i>e&&(e=i),this.ui.input.val(e),this.saveValue()}});return s}),_wAMD.define("tpl!elements/settings/tooltip-select.tpl",[],function(){return'{{#description}}\n	<p class="element-settings__description">{{description}}</p>\n{{/description}}\n{{^description}}\n	{{#label}}\n		<h3 class="form-header form-header__element-settings">{{label}}</h3>\n		{{#hovertip}}\n			<span class="icon element-settings__icon" data-hover-tip="" data-hover-tip-text="{{hovertip}}" data-hover-tip-wrap-class-name="ui-framework">tooltip</span>\n		{{/hovertip}}\n	{{/label}}\n{{/description}}\n<ul class="group group--flush {{#isButtonDropdown}}button-dropdown{{/isButtonDropdown}}">\n	{{#options}}\n		<li class="group__item js-item">\n			{{#isButtonDropdown}}\n				<label class="form-control form-control--radio-check form-control--borderless">\n					<span class="{{value}}">\n						<span class="wsite-button-inner editable-text">{{#tl}}templates.elements.settings.tooltip-select_2{{/tl}}</span>\n					</span>\n					<input type="radio" name="check" {{#checked}}checked{{/checked}} value="{{value}}" data-ucfpid="{{ucfpid}}">\n					<span class="form-control__indicator"></span>\n				</label>\n			{{/isButtonDropdown}}\n			{{^isButtonDropdown}}\n				<label class="form-control form-control--radio-check form-control--borderless">\n					<input type="radio" name="{{name}}" {{#checked}}checked{{/checked}} {{#optionActionPaneIndex}}data-action-index="{{optionActionPaneIndex}}" class="has-action"{{/optionActionPaneIndex}} value="{{value}}" data-ucfpid="{{ucfpid}}">\n					<span class="form-control__indicator"></span>\n					<span {{#icon}}data-icon-before="{{icon}}" class="form-control__option-icon"{{/icon}}>{{name}}</span>\n				</label>\n			{{/isButtonDropdown}}\n		</li>\n	{{/options}}\n</ul\n'}),_wAMD.define("element/editor/view/settings/item-views/SelectItemView",["backbone-all","jquery","mustache","element/editor/view/settings/item-views/BaseSettingsItemView","element/editor/view/settings/utils","editor-site-shared/ui/constants","tpl!elements/settings/tooltip-select.tpl"],function(e,t,i,n,o,r,s){var a=n.extend({template:i.compile(s),events:{"click .js-item":"clickHandler"},templateHelpers:function(){var e=this,t=e.model.get("label"),i=e.model.get("hovertip"),n=e.model.get("description");return{checked:function(){if("buttonDropdown"===e.model.get("special")){if(e.model.get("cfpid")){var t=e.model.get("value")||e.model.get("default");return this.value.toString()===t.toString()}var i=Weebly.Elements.uproperty.properties[62923320].property_result,n=Weebly.Elements.uproperty.properties[23060085].property_result;return this.name===i+" "+n}var t=e.model.get("value")||e.model.get("default");return t?this.value.toString()===t.toString():!1},options:function(){return e.model.getOptions()},isButtonDropdown:"buttonDropdown"===e.model.get("special"),label:_W.utl(t),hovertip:i?_W.utl(i):!1,description:n?_W.utl(n):!1}},onRender:function(){var e=n.prototype.onRender.call(this);if(!e){var t=this.model.get("special");"buttonDropdown"===t&&this.populateButtonDropdown()}},getValue:function(){var e=this.$el.find(":checked");return e.val()},clickHandler:function(e){var i=this,n=t(e.currentTarget).find("input[type=radio]");if(i.$el.find(":checked").removeAttr("checked"),i.$el.find('[value= "'+n.val()+'"]').attr("checked",!0),"resetLink"===i.model.get("special")&&"text"===n.val())Weebly.Elements.uproperty.properties[r.FORM_CONFIRMATION_LINK_CFPID].property_result="<a>",Weebly.Elements.saveProperties();else if("buttonDropdown"===i.model.get("special")){if(i.model.get("cfpid"))return void i.saveValue();var o=n.val().indexOf("wsite-button-small")>-1?"small":"large",s=n.val().indexOf("wsite-button-normal")>-1?"normal":"highlight";window.setContentFieldProperty(Weebly.Elements.ucfid,"<!SIZE!>",o),window.setContentFieldProperty(Weebly.Elements.ucfid,"<!COLOR!>",s),Weebly.Elements.continueOnChange()}else i.saveValue()},populateButtonDropdown:function(){var e=this,i=e.$el.find(".wsite-button"),n=["border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-color","border-right-color","border-bottom-color","border-left-color","background-color","background-image","background-position","background-repeat","color","padding-top","padding-right","padding-bottom","padding-left","border-top-left-radius","border-top-right-radius","border-bottom-left-radius","border-bottom-right-radius","text-decoration","font-family","font-size","font-weight","text-shadow","box-shadow","line-height"],o=t(Weebly.Elements.currentElement);_.each(i,function(e){e=t(e);var i,r,s=t(e.clone());o.append(s),i=t(e).find(".wsite-button-inner"),r=s.find(".wsite-button-inner"),_.each(n,function(t){i.css(t,r.css(t)),e.css(t,s.css(t))}),s.remove()})}});return a}),_wAMD.define("tpl!elements/settings/tooltip-text.tpl",[],function(){return'<label class="form-control form-control--borderless"{{#tooltip}} data-hover-tip="" data-hover-tip-wrap-class-name="ui-framework" data-hover-tip-cssclass="settings-tooltip" data-hover-tip-follow = "true" data-hover-tip-delay="true" data-hover-tip-content="{{tooltip}}" {{/tooltip}}>\n	<textarea id="{{ucfpid}}" placeholder="{{default}}" name="{{name}}">{{value}}</textarea>\n</label>\n'}),_wAMD.define("element/editor/view/settings/item-views/TextItemView",["backbone-all","mustache","element/editor/view/settings/item-views/StringItemView","tpl!elements/settings/tooltip-text.tpl"],function(e,t,i,n){var o=i.extend({template:t.compile(n),events:{"blur @ui.input":"saveValue","keyup @ui.input":"handleKeyPress"},ui:{input:"textarea",remaining:".remaining"}});return o}),_wAMD.define("tpl!elements/settings/tooltip-color.tpl",[],function(){return'<input id="{{ucfpid}}" id="platform-settings-tooltip-{{name}}" type="input" name="{{name}}" value="{{value}}" class="color-picker">\n'}),function(e,t,i){function n(e,t,i){for(var n=[],o=0;o<e.length;o++){var r=tinycolor(e[o]),s=r.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";s+=tinycolor.equals(t,e[o])?" sp-thumb-active":"";var a=g?"background-color:"+r.toRgbString():"filter:"+r.toFilter();n.push('<span title="'+r.toRgbString()+'" data-color="'+r.toRgbString()+'" class="'+s+'"><span class="sp-thumb-inner" style="'+a+';" /></span>')}return"<div class='sp-cf "+i+"'>"+n.join("")+"</div>"}function o(){for(var e=0;e<f.length;e++)f[e]&&f[e].hide()}function r(e,i){var n=t.extend({},p,e);return n.callbacks={move:d(n.move,i),change:d(n.change,i),show:d(n.show,i),hide:d(n.hide,i),beforeShow:d(n.beforeShow,i)},n}function s(s,l){function d(){Ce.toggleClass("sp-flat",U),Ce.toggleClass("sp-input-disabled",!z.showInput),
Ce.toggleClass("sp-alpha-enabled",z.showAlpha),Ce.toggleClass("sp-buttons-disabled",!z.showButtons||U),Ce.toggleClass("sp-palette-disabled",!z.showPalette),Ce.toggleClass("sp-palette-only",z.showPaletteOnly),Ce.toggleClass("sp-initial-disabled",!z.showInitial),Ce.addClass(z.className),Ce.attr("id",z.id),j()}function p(){function i(e){return e.data&&e.data.ignore?(R(t(this).data("color")),M()):(R(t(this).data("color")),B(!0),M(),X&&k()),!1}if(m&&Ce.find("*:not(input)").attr("unselectable","on"),d(),We&&Ee.hide().after($e),U?Ee.after(Ce).hide():t(_e).append(Ce),Q&&e.localStorage){try{var n=e.localStorage[Q].split(",#");n.length>1&&(delete e.localStorage[Q],t.each(n,function(e,t){y(t)}))}catch(o){}try{ve=e.localStorage[Q].split(";")}catch(o){}}Ve.bind("click.spectrum touchstart.spectrum",function(e){Te||D(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()}),(Ee.is(":disabled")||z.disabled===!0)&&W(),Ce.click(c),Ae.change(S),Ae.bind("paste",function(){setTimeout(S,1)}),Ae.keydown(function(e){13==e.keyCode&&(S(),e.preventDefault())}),Le.text(z.cancelText),Le.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),k("cancel")}),Be.text(z.chooseText),Be.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),A()&&(B(!0),k())}),je.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),V()}),Ke.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),$()}),u(Re,function(e,t,i){fe=e/le,i.shiftKey&&(fe=Math.round(10*fe)/10),M()}),u(Ie,function(e,t){ue=parseFloat(t/se),M()},T,C),u(Se,function(e,t){he=parseFloat(e/ne),pe=parseFloat((oe-t)/oe),M()},T,C),Ue?(R(Ue),N(),Ye=Ge||tinycolor(Ue).format,y(Ue)):N(),U&&I();var r=m?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Me.delegate(".sp-thumb-el",r,i),Ne.delegate(".sp-thumb-el:nth-child(1)",r,{ignore:!0},i)}function y(i){if(J){var n=tinycolor(i).toRgbString();if(-1===t.inArray(n,ve))for(ve.push(n);ve.length>be;)ve.shift();if(Q&&e.localStorage)try{e.localStorage[Q]=ve.join(";")}catch(o){}}}function w(){var e,t=[],i=ve,n={};if(z.showPalette){for(var o=0;o<ge.length;o++)for(var r=0;r<ge[o].length;r++)e=tinycolor(ge[o][r]).toRgbString(),n[e]=!0;for(o=0;o<i.length;o++)e=tinycolor(i[o]).toRgbString(),n.hasOwnProperty(e)||(t.push(i[o]),n[e]=!0)}return t.reverse().slice(0,z.maxSelectionSize)}function _(){var e=x(),i=t.map(ge,function(t,i){return n(t,e,"sp-palette-row sp-palette-row-"+i)});ve&&i.push(n(w(),e,"sp-palette-row sp-palette-row-selection")),Me.html(i.join(""))}function E(){if(z.showInitial){var e=qe,t=x();Ne.html(n([e,t],t,"sp-palette-row-initial"))}}function T(){(0===oe||0===ne||0===se)&&j(),Ce.addClass(ye)}function C(){Ce.removeClass(ye)}function S(){var e=tinycolor(Ae.val());e.ok?R(e)&&ee.move(e):Ae.addClass("sp-validation-error")}function D(){ie?k():I()}function I(){var i=t.Event("beforeShow.spectrum");return ie?void j():(Ee.trigger(i,[x()]),void(ee.beforeShow(x())===!1||i.isDefaultPrevented()||(o(),ie=!0,t(we).bind("click.spectrum",k),t(e).bind("resize.spectrum",te),$e.addClass("sp-active"),Ce.removeClass("sp-hidden"),z.autoExpand&&(P()?$():V()),z.showPalette&&_(),j(),N(),qe=x(),E(),ee.show(qe),Ee.trigger("show.spectrum",[qe]))))}function k(i){if((!i||"click"!=i.type||2!=i.button)&&ie&&!U){ie=!1,t(we).unbind("click.spectrum",k),t(e).unbind("resize.spectrum",te),$e.removeClass("sp-active"),Ce.addClass("sp-hidden");var n=!tinycolor.equals(x(),qe);n&&(Xe&&"cancel"!==i?B(!0):O()),ee.hide(x()),z.dontHideBoundElement||Ee.trigger("hide.spectrum",[x()])}}function O(){R(qe,!0)}function R(e,t){if(tinycolor.equals(e,x()))return!1;var i=tinycolor(e),n=i.toHsv();return ue=n.h,he=n.s,pe=n.v,fe=n.a,N(),i.ok&&!t&&(Ye=Ge||i.format),!0}function x(){return tinycolor.fromRatio({h:ue,s:he,v:pe,a:Math.round(100*fe)/100})}function A(){return!Ae.hasClass("sp-validation-error")}function P(e){var t=!1,e=e||x();e:for(var i=0;i<ge.length;i++)for(var n=0;n<ge[i].length;n++)if(t=tinycolor.equals(e,ge[i][n]))break e;return t}function M(){N(),ee.move(x()),Ee.trigger("move.spectrum",[x()])}function N(){Ae.removeClass("sp-validation-error"),L();var e=tinycolor({h:ue,s:"1.0",v:"1.0"});Se.css("background-color",e.toHexString());var t=Ye;1>fe&&("hex"===t||"name"===t)&&(t="rgb");var i=x(),n=i.toHexString(),o=i.toRgbString();if(g||1===i.alpha?ze.css("background-color",o):(ze.css("background-color","transparent"),ze.css("filter",i.toFilter())),z.showAlpha){var r=i.toRgb();r.a=0;var s=tinycolor(r).toRgbString(),a="linear-gradient(left, "+s+", "+n+")";m?Oe.css("filter",tinycolor(s).toFilter({gradientType:1},n)):(Oe.css("background","-webkit-"+a),Oe.css("background","-moz-"+a),Oe.css("background","-ms-"+a),Oe.css("background",a))}z.showInput&&(1>fe&&("hex"===t||"name"===t)&&(t="rgb"),Ae.val(i.toString(t))),Fe.css("background-color",i.toString(t)),z.showPalette&&_(),E()}function L(){var e=he,t=pe,i=e*ne,n=oe-t*oe;i=Math.max(-re,Math.min(ne-re,i-re)),n=Math.max(-re,Math.min(oe-re,n-re)),De.css({top:n,left:i});var o=fe*le;xe.css({left:o-ce/2});var r=ue*se;ke.css({top:r-de})}function B(e){var t=x();He&&Ee.val(t.toString(Ye)).change();var i=!tinycolor.equals(t,qe);qe=t,y(t),e&&i&&(ee.change(t),Ee.trigger("change.spectrum",[t]))}function j(){ne=Se.width(),oe=Se.height(),re=De.height(),ae=Ie.width(),se=Ie.height(),de=ke.height(),le=Re.width(),ce=xe.width(),U||Ce.offset(a(Ce,Ve,Y,G)),L()}function K(){Ee.show(),Ve.unbind("click.spectrum touchstart.spectrum"),Ce.remove(),$e.remove(),f[Je.id]=null}function F(e,n){return e===i?t.extend({},z):n===i?z[e]:(z[e]=n,void d())}function H(){Te=!1,Ee.attr("disabled",!1),Ve.removeClass("sp-disabled")}function W(){k(),Te=!0,Ee.attr("disabled",!0),Ve.addClass("sp-disabled")}function $(){Pe.hide(),je.show(),Ce.find(".sp-palette-input-container").show().find(".sp-custom-el").toggle(!P()),j()}function V(){Pe.show(),Ce.find(".sp-palette-input-container").hide(),j()}var z=r(l,s),U=z.flat,q=z.parent,G=z.containerOffsetY,Y=z.containerOffsetX,X=z.clickPaletteToClose,J=z.showSelectionPalette,Q=z.localStorageKey,Z=z.theme,ee=z.callbacks,te=h(j,10),ie=!1,ne=0,oe=0,re=0,se=0,ae=0,le=0,ce=0,de=0,ue=0,he=0,pe=0,fe=1,me=z.palette.slice(0),ge=t.isArray(me[0])?me:[me],ve=z.selectionPalette.slice(0),be=z.maxSelectionSize,ye="sp-dragging",we=s.ownerDocument,_e=(we.body,t(q).length?t(q):we.body),Ee=t(s),Te=!1,Ce=t(b,we).addClass(Z),Se=Ce.find(".sp-color"),De=Ce.find(".sp-dragger"),Ie=Ce.find(".sp-hue"),ke=Ce.find(".sp-slider"),Oe=Ce.find(".sp-alpha-inner"),Re=Ce.find(".sp-alpha"),xe=Ce.find(".sp-alpha-handle"),Ae=Ce.find(".sp-input"),Pe=Ce.find(".sp-picker-container"),Me=Ce.find(".sp-palette"),Ne=Ce.find(".sp-initial"),Le=Ce.find(".sp-cancel"),Be=Ce.find(".sp-choose"),je=Ce.find(".sp-expand"),Ke=Ce.find(".sp-collapse"),Fe=Ce.find(".sp-custom-inner"),He=Ee.is("input"),We=He&&!U,$e=We?t(v).addClass(Z):t([]),Ve=We?$e:Ee,ze=$e.find(".sp-preview-inner"),Ue=z.color||He&&Ee.val(),qe=!1,Ge=z.preferredFormat,Ye=Ge,Xe=!z.showButtons||z.clickoutFiresChange;p();var Je={show:I,hide:k,toggle:D,reflow:j,option:F,enable:H,disable:W,collapse:$,expand:V,set:function(e){R(e),B()},get:x,destroy:K,container:Ce,isPaletteColor:function(e){return P(e)}};return Je.id=f.push(Je)-1,Je}function a(e,i,n,o){var r=0,s=function(){var i=0;return e.children(":visible").each(function(){i+=t(this).outerWidth()}),i}(),a=e.outerHeight(),l=i.outerHeight(),c=i.outerWidth(),d=e[0].ownerDocument,u=d.documentElement,h=u.clientWidth+t(d).scrollLeft(),p=u.clientHeight+t(d).scrollTop(),f=i.offset();return f.top+=l,f.left-=Math.min(f.left,f.left+s>h&&h>s?Math.abs(f.left+s-h-(c+f.left-h)):0),f.left+=n,f.top-=Math.min(f.top,f.top+a>p&&p>a?Math.abs(a+l-r):r),f.top+=o,f}function l(){}function c(e){e.stopPropagation()}function d(e,t){var i=Array.prototype.slice,n=i.call(arguments,2);return function(){return e.apply(t,n.concat(i.call(arguments)))}}function u(i,n,o,r){function s(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function a(e){if(u){if(m&&document.documentMode<9&&!e.button)return c();var t=e.originalEvent.touches,o=t?t[0].pageX:e.pageX,r=t?t[0].pageY:e.pageY,a=Math.max(0,Math.min(o-h.left,f)),l=Math.max(0,Math.min(r-h.top,p));g&&s(e),n.apply(i,[a,l,e])}}function l(e){var n=e.which?3==e.which:2==e.button;e.originalEvent.touches;n||u||o.apply(i,arguments)!==!1&&(u=!0,p=t(i).height(),f=t(i).width(),h=t(i).offset(),t(d).bind(v),t(d.body).addClass("sp-dragging"),g||a(e),s(e))}function c(){u&&(t(d).unbind(v),t(d.body).removeClass("sp-dragging"),r.apply(i,arguments)),u=!1}n=n||function(){},o=o||function(){},r=r||function(){};var d=i.ownerDocument||document,u=!1,h={},p=0,f=0,g="ontouchstart"in e,v={};v.selectstart=s,v.dragstart=s,v[g?"touchmove":"mousemove"]=a,v[g?"touchend":"mouseup"]=c,t(i).bind(g?"touchstart":"mousedown",l)}function h(e,t,i){var n;return function(){var o=this,r=arguments,s=function(){n=null,e.apply(o,r)};i&&clearTimeout(n),(i||!n)&&(n=setTimeout(s,t))}}var p={beforeShow:l,move:l,change:l,show:l,hide:l,autoExpand:!1,color:!1,flat:!1,showInput:!1,showButtons:!0,containerOffsetX:0,containerOffsetY:0,clickoutFiresChange:!1,clickPaletteToClose:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,showSelectionPalette:!0,dontHideBoundElement:!1,localStorageKey:!1,maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",preferredFormat:!1,id:"",className:"",showAlpha:!1,theme:"sp-light",palette:["fff","000"],selectionPalette:[],disabled:!1},f=[],m=!!/msie/i.exec(e.navigator.userAgent),g=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div"),i=t.style;return i.cssText="background-color:rgba(0,0,0,.5)",e(i.backgroundColor,"rgba")||e(i.backgroundColor,"hsla")}(),v=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),b=function(){var e="";if(m)for(var t=1;6>=t;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-input-container'>","<span class='sp-custom-el' type='text' spellcheck='false'>","<span class='sp-custom-inner'></span>","</span>","<span class='sp-expand'><span class='sp-expand-inner'></span></span>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color-outer'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","</div>","<div class='sp-hue-outer'>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<span class='sp-custom-el' type='text' spellcheck='false'>","<span class='sp-custom-inner'></span>","</span>","<input class='sp-input' type='text' spellcheck='false'  />","<span class='sp-collapse'><span class='sp-collapse-inner'></span></span>","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),y="spectrum.id";t.fn.spectrum=function(e,i){if("string"==typeof e){var n=this,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=f[t(this).data(y)];if(i){var r=i[e];if(!r)throw new Error("Spectrum: no such method: '"+e+"'");"get"==e?n=i.get():"container"==e?n=i.container:"option"==e?n=i.option.apply(i,o):"destroy"==e?(i.destroy(),t(this).removeData(y)):"isPaletteColor"==e?n=i.isPaletteColor.apply(i,o):r.apply(i,o)}}),n}return this.spectrum("destroy").each(function(){var i=s(this,e);t(this).data(y,i.id)})},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=u,t.fn.spectrum.defaults=p,t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t("<input type='color' value='#ffffff' />")[0],i="color"===e.type&&"#ffffff"!=e.value;i||t("input[type=color]").spectrum({preferredFormat:"hex6"})},function(e){function t(e,n){if("object"==typeof e&&e.hasOwnProperty("_tc_id"))return e;var r=i(e),a=r.r,c=r.g,d=r.b,u=S(r.a),h=r.format;return{ok:r.ok,format:h,_tc_id:y++,alpha:u,toHsv:function(){var e=s(a,c,d);return{h:e.h,s:e.s,v:e.v,a:u}},toHsvString:function(){var e=s(a,c,d),t=_(360*e.h),i=_(100*e.s),n=_(100*e.v);return 1==u?"hsv("+t+", "+i+"%, "+n+"%)":"hsva("+t+", "+i+"%, "+n+"%, "+u+")"},toHsl:function(){var e=o(a,c,d);return{h:e.h,s:e.s,l:e.l,a:u}},toHslString:function(){var e=o(a,c,d),t=_(360*e.h),i=_(100*e.s),n=_(100*e.l);return 1==u?"hsl("+t+", "+i+"%, "+n+"%)":"hsla("+t+", "+i+"%, "+n+"%, "+u+")"},toHex:function(){return l(a,c,d)},toHexString:function(e){return"#"+l(a,c,d,e)},toRgb:function(){return{r:_(a),g:_(c),b:_(d),a:u}},toRgbString:function(){return 1==u?"rgb("+_(a)+", "+_(c)+", "+_(d)+")":"rgba("+_(a)+", "+_(c)+", "+_(d)+", "+u+")"},toName:function(){return I[l(a,c,d)]||!1},toFilter:function(e,i){var n=l(a,c,d,!0),o=n,r=Math.round(255*S(u)).toString(16),s=r,h=e&&e.gradientType?"GradientType = 1, ":"";if(i){var p=t(i);o=p.toHex(),s=Math.round(255*S(p.alpha)).toString(16)}return"progid:DXImageTransform.Microsoft.gradient("+h+"startColorstr=#"+m(r)+n+",endColorstr=#"+m(s)+o+")"},toString:function(e){e=e||this.format;var t=!1;return"rgb"===e&&(t=this.toRgbString()),"hex"===e&&(t=this.toHexString()),"hex6"===e&&(t=this.toHexString(!0)),"name"===e&&(t=this.toName()),"hsl"===e&&(t=this.toHslString()),"hsv"===e&&(t=this.toHsvString()),t||this.toHexString(!0)}}}function i(e){var t={r:0,g:0,b:0},i=1,o=!1,s=!1;return"string"==typeof e&&(e=g(e)),"object"==typeof e&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=n(e.r,e.g,e.b),o=!0,s="rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(t=a(e.h,e.s,e.v),o=!0,s="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(t=r(e.h,e.s,e.l),o=!0,s="hsl"),e.hasOwnProperty("a")&&(i=e.a)),t.r=E(255,T(t.r,0)),t.g=E(255,T(t.g,0)),t.b=E(255,T(t.b,0)),t.r<1&&(t.r=_(t.r)),t.g<1&&(t.g=_(t.g)),t.b<1&&(t.b=_(t.b)),{ok:o,format:e&&e.format||s,r:t.r,g:t.g,b:t.b,a:i}}function n(e,t,i){return{r:255*d(e,255),g:255*d(t,255),b:255*d(i,255)}}function o(e,t,i){e=d(e,255),t=d(t,255),i=d(i,255);var n,o,r=T(e,t,i),s=E(e,t,i),a=(r+s)/2;if(r==s)n=o=0;else{var l=r-s;switch(o=a>.5?l/(2-r-s):l/(r+s),r){case e:n=(t-i)/l+(i>t?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return{h:n,s:o,l:a}}function r(e,t,i){function n(e,t,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?e+6*(t-e)*i:.5>i?t:2/3>i?e+(t-e)*(2/3-i)*6:e}var o,r,s;if(e=d(e,360),t=d(t,100),i=d(i,100),0===t)o=r=s=i;else{var a=.5>i?i*(1+t):i+t-i*t,l=2*i-a;o=n(l,a,e+1/3),r=n(l,a,e),s=n(l,a,e-1/3)}return{r:255*o,g:255*r,b:255*s}}function s(e,t,i){e=d(e,255),t=d(t,255),i=d(i,255);var n,o,r=T(e,t,i),s=E(e,t,i),a=r,l=r-s;if(o=0===r?0:l/r,r==s)n=0;else{switch(r){case e:n=(t-i)/l+(i>t?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return{h:n,s:o,v:a}}function a(e,t,i){e=6*d(e,360),t=d(t,100),i=d(i,100);var n=w.floor(e),o=e-n,r=i*(1-t),s=i*(1-o*t),a=i*(1-(1-o)*t),l=n%6,c=[i,s,r,r,a,i][l],u=[a,i,i,s,r,r][l],h=[r,r,a,i,i,s][l];return{r:255*c,g:255*u,b:255*h}}function l(e,t,i,n){var o=[m(_(e).toString(16)),m(_(t).toString(16)),m(_(i).toString(16))];return n||o[0].charAt(0)!=o[0].charAt(1)||o[1].charAt(0)!=o[1].charAt(1)||o[2].charAt(0)!=o[2].charAt(1)?o.join(""):o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)}function c(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[e[i]]=i);return t}function d(e,t){p(e)&&(e="100%");var i=f(e);return e=E(t,T(0,S(e))),i&&(e*=t/100),w.abs(e-t)<1e-6?1:e>=1?e%t/S(t):e}function u(e){return E(1,T(0,e))}function h(e){return parseInt(e,16)}function p(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===S(e)}function f(e){return"string"==typeof e&&-1!=e.indexOf("%")}function m(e){return 1==e.length?"0"+e:""+e}function g(e){e=e.replace(v,"").replace(b,"").toLowerCase();var t=!1;if(D[e])e=D[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0};var i;return(i=k.rgb.exec(e))?{r:i[1],g:i[2],b:i[3]}:(i=k.rgba.exec(e))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=k.hsl.exec(e))?{h:i[1],s:i[2],l:i[3]}:(i=k.hsla.exec(e))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=k.hsv.exec(e))?{h:i[1],s:i[2],v:i[3]}:(i=k.hex6.exec(e))?{r:h(i[1]),g:h(i[2]),b:h(i[3]),format:t?"name":"hex"}:(i=k.hex3.exec(e))?{r:h(i[1]+""+i[1]),g:h(i[2]+""+i[2]),b:h(i[3]+""+i[3]),format:t?"name":"hex"}:!1}var v=/^[\s,#]+/,b=/\s+$/,y=0,w=Math,_=w.round,E=w.min,T=w.max,C=w.random,S=e.parseFloat;t.fromRatio=function(e){if("object"==typeof e)for(var i in e)1===e[i]&&(e[i]="1.0");return t(e)},t.equals=function(e,i){return e&&i?t(e).toRgbString()==t(i).toRgbString():!1},t.random=function(){return t.fromRatio({r:C(),g:C(),b:C()})},t.desaturate=function(e,i){var n=t(e).toHsl();return n.s-=(i||10)/100,n.s=u(n.s),t(n)},t.saturate=function(e,i){var n=t(e).toHsl();return n.s+=(i||10)/100,n.s=u(n.s),t(n)},t.greyscale=function(e){return t.desaturate(e,100)},t.lighten=function(e,i){var n=t(e).toHsl();return n.l+=(i||10)/100,n.l=u(n.l),t(n)},t.darken=function(e,i){var n=t(e).toHsl();return n.l-=(i||10)/100,n.l=u(n.l),t(n)},t.complement=function(e){var i=t(e).toHsl();return i.h=(i.h+.5)%1,t(i)},t.triad=function(e){var i=t(e).toHsl(),n=360*i.h;return[t(e),t({h:(n+120)%360,s:i.s,l:i.l}),t({h:(n+240)%360,s:i.s,l:i.l})]},t.tetrad=function(e){var i=t(e).toHsl(),n=360*i.h;return[t(e),t({h:(n+90)%360,s:i.s,l:i.l}),t({h:(n+180)%360,s:i.s,l:i.l}),t({h:(n+270)%360,s:i.s,l:i.l})]},t.splitcomplement=function(e){var i=t(e).toHsl(),n=360*i.h;return[t(e),t({h:(n+72)%360,s:i.s,l:i.l}),t({h:(n+216)%360,s:i.s,l:i.l})]},t.analogous=function(e,i,n){i=i||6,n=n||30;var o=t(e).toHsl(),r=360/n,s=[t(e)];for(o.h*=360,o.h=(o.h-(r*i>>1)+720)%360;--i;)o.h=(o.h+r)%360,s.push(t(o));return s},t.monochromatic=function(e,i){i=i||6;for(var n=t(e).toHsv(),o=n.h,r=n.s,s=n.v,a=[],l=1/i;i--;)a.push(t({h:o,s:r,v:s})),s=(s+l)%1;return a},t.readable=function(e,i){var n=t(e).toRgb(),o=t(i).toRgb();return(o.r-n.r)*(o.r-n.r)+(o.g-n.g)*(o.g-n.g)+(o.b-n.b)*(o.b-n.b)>10404};var D=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},I=t.hexNames=c(D),k=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",i="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?",o="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+n),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();e.tinycolor=t}(this),t(function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()}),t.ui&&t.ui.dialog&&t.widget("ui.dialog",t.ui.dialog,{_allowInteraction:function(e){return t(e.target).closest(".sp-container").length?!0:this._super(e)}})}(window,jQuery),_wAMD.define("vendor/spectrum",function(){}),_wAMD.define("element/editor/view/settings/item-views/ColorItemView",["backbone-all","mustache","jquery","element/editor/view/settings/item-views/BaseSettingsItemView","tpl!elements/settings/tooltip-color.tpl","vendor/spectrum"],function(e,t,i,n,o){var r=n.extend({template:t.compile(o),events:{"change @ui.input":"saveValue"},ui:{input:"input"},templateHelpers:function(){var e=this,t=e.model.get("label");return{label:_W.utl(t)}},onRender:function(){n.prototype.onRender.call(this);var e=this,t=e.getDefaultColor(),i=e.ui.input;void 0===e.model.get("value")&&e.model.set("value",e.getDefaultColor()),i.wColorChooser({color:t,flat:!0,showPaletteOnly:!0,showPalette:!0,togglePaletteOnly:!1,showInput:!0,showButtons:!1,onBeforeShow:function(){var t=e.getDefaultColor();i.wColorChooser("smart"),t&&i.spectrum("set",t)},onChange:function(){i.spectrum("hide")}}),e.$el.find(".sp-palette-input-container").prepend(e.ui.input),e.$el.find(".sp-expand").remove()},changeHandler:function(){var e=this;e.saveValue(),e.render()},getValue:function(){var e=this,t=e.model.get("stripPoundSign"),n="input"===e.ui.input?null:e.ui.input.val();if(n)if(n=n.trim(),t)n=n.replace("#","");else{var o=i("<div>").css("background-color",n);o.css("background-color")||(n="#"+n)}return n},getDefaultColor:function(){return this.model.get("value")||this.model.get("default")||"#FFF"}});return r}),_wAMD.define("tpl!elements/settings/tooltip-checkbox.tpl",[],function(){return'<label class="form-control form-control--checkbox">\n	<input id="{{ucfpid}}" type="checkbox" {{checked}}>\n	<span class="form-control__indicator"></span>\n	{{label}}\n</label>'}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/wInput",["jquery"],e):e(window.jQuery)}(function(e){function t(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}if("undefined"==typeof e.fn.wRadio&&"undefined"==typeof e.fn.wCheckbox&&"undefined"==typeof e.fn.wToggle){var i,n,o,r;i=t(Object,{inputName:"winput",bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(e){this.initializing=!0,this.opts=e=this.prepareOpts(e),e.element.data(this.inputName)&&this.destroy(),this.container=this.createContainer();var t=e.element.prop("checked")||e.element.prop("defaultChecked");t&&(this.opts.element.removeAttr("checked"),this.check());var i=e.element.prop("readonly");void 0===i&&(i=!1),this.readonly(i);var n=e.element.prop("disabled");void 0===n&&(n=!1),this.enable(!n),this.initContainer(),this.initializing=!1},initContainer:function(){this._tabindex=this.opts.element.attr("tabindex"),this.opts.element.addClass("w-input-offscreen").data(this.inputName,this).before(this.container).attr("tabindex","-1"),this.container.data(this.inputName,this).attr("tabindex",this._tabindex||0),this.container.on("keypress."+this.inputName,this.bind(function(e){32===e.which&&(this.toggleCheck(),e.preventDefault())})),this.opts.element.on("change",this.bind(function(e){var t=e.currentTarget.checked;e.internal||this.assign(t)}))},prepareOpts:function(e){return e},updateInterface:function(){var e=!this._readonly&&!!this._enabled;return this._enabledInterface===e?!1:(this._enabledInterface=e,this.container.toggleClass("disabled",!e),e)},readonly:function(e){return void 0===e&&(e=!1),this._readyonly===e?!1:(this._readonly=e,this.opts.element.prop("readonly",e),this.updateInterface(),e)},enable:function(e){return void 0===e&&(e=!0),this._enabled===e?!1:(this._enabled=e,this.opts.element.prop("disabled",!e),this.updateInterface(),e)},disable:function(){return this.enable(!1)},uncheck:function(){return this.checking(!1)},check:function(){return this.checking(!0)},checking:function(e){return this.opts.element.prop("defaultChecked")||this.opts.element.prop("checked")!==e?(this.assign(e),!0):!1},assign:function(e){return this._readonly===!0||this._enabled===!1?!1:(this.opts.element.prop("checked",e),this.opts.element.closest("label.box").toggleClass("checked",e),void this.container.toggleClass("checked",e))},toggleCheck:function(){this.opts.element.prop("checked")?this.uncheck():this.check()},reset:function(){var e=this.opts.element.prop("checked")||this.opts.element.prop("defaultChecked");this.opts.element.prop("checked",e),this.container.toggleClass("checked",e)},destroy:function(){var e=this.opts.element.data(this.inputName);void 0!==e&&(e.container.remove(),e.opts.element.attr("tabindex",this._tabindex).removeData(this.inputName).removeClass("w-input-offscreen")),this.opts.element.off("."+this.inputName)}}),n=t(i,{inputName:"wcheckbox",prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);return e},createContainer:function(){var t=e(document.createElement("span")).addClass("w-checkbox-container");return t},initContainer:function(){this.parent.initContainer.apply(this,arguments),this.container.on("click."+this.inputName,this.bind(function(e){e.preventDefault(),e.stopPropagation(),this.toggleCheck()}))},checking:function(t){var i=e.Event("change",{internal:!0});this.parent.checking.apply(this,arguments),this.initializing||this.opts.element.trigger(i)}}),o=t(i,{inputName:"wtoggle",prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);return e},createContainer:function(){var t=e(document.createElement("span")).addClass("w-toggle-container");return t},initContainer:function(){this.parent.initContainer.apply(this,arguments),this.container.on("click."+this.inputName,this.bind(function(e){e.preventDefault(),e.stopPropagation(),this.toggleCheck()}))},checking:function(t){var i=e.Event("change",{internal:!0});this.parent.checking.apply(this,arguments),this.initializing||this.opts.element.trigger(i)}}),r=t(i,{inputName:"wradio",prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);return e},createContainer:function(){var t=e(document.createElement("span")).addClass("w-radio-container");return t},initContainer:function(){this.parent.initContainer.apply(this,arguments),this.initSet(),this.container.on("click."+this.inputName,this.bind(function(t){t.preventDefault(),t.stopPropagation(),this.check(),this._readonly!==!0&&this._enabled!==!1&&this.opts.element.trigger(e.Event("click"))})),label=this.opts.element.closest("label"),0===label.length&&(label=e("label[for="+this.opts.element.attr("id")+"]")),label.on("click."+this.inputName,this.bind(function(e){e.preventDefault(),e.stopPropagation(),this.check()})),this.opts.label=label},check:function(){return this.opts.element.prop("checked")?void 0:(this._enabled&&!this._readonly&&this.uncheckAll(),this.parent.check.apply(this,arguments))},initSet:function(){var t=this.opts.element.closest("form"),i=this.opts.element.attr("name");if(t.length||i){t.length>0?inputs=t.find("input[type=radio][name="+i+"]"):inputs=e("input[type=radio][name="+i+"]");for(var n=[],o=0;o<inputs.length;o++)inputs.eq(o).data(this.inputName)&&n.push(inputs.eq(o).data(this.inputName));for(var o=0;o<n.length;o++)n[o]._set=n;this._set=n,inputs.off("reread").on("reread",this.bind(this.resetAll))}},resetAll:function(){for(var e=this._set,t=e.length,i=0;t>i;i++)e[i].reset()},uncheckAll:function(){void 0===this._set&&this.initSet();for(var e=0;e<this._set.length;e++)this._set[e].uncheck()},toggleCheck:function(){this.uncheckAll(),this.parent.toggleCheck.apply(this,arguments)},checking:function(t){if(this.initializing)return this.parent.checking.apply(this,arguments);if(!this._readonly&&this._enabled){var i=this.opts.element.prop("checked"),n=this.parent.checking.apply(this,arguments),o=i!==n;return o&&t&&this.opts.element.trigger(e.Event("change")),n}},destroy:function(){var e=this.opts.element.data(this.inputName);void 0!==e&&e.opts.label.off("."+this.inputName),this.parent.destroy.apply(this,arguments)}}),e.fn.wCheckbox=function(){var t,i,o=Array.prototype.slice.call(arguments,0),r=["check","uncheck","toggleCheck","enable","disable","readonly","destroy"];return this.each(function(s,a){if(0===o.length||"object"==typeof o[0]){if(i=0===o.length?{}:e.extend({},o[0]),"input"!==a.tagName.toLowerCase()||"checkbox"!==a.type.toLowerCase())throw"Invalid input, wCheckbox only allowed for checkboxes";i.element=e(a),t=new n,t.init(i)}else{if("string"!=typeof o[0])throw"Invalid arguments to wCheckbox: "+o;if(method=o[0],radio=e(a).data("wcheckbox"),-1===e.inArray(method,r))throw"Method not found: "+method;if(void 0===radio)throw"Element is not a wCheckbox element";radio[method].apply(radio,o.slice(1))}}),this},e.fn.wToggle=function(){var t,i,n=Array.prototype.slice.call(arguments,0),r=["check","uncheck","toggleCheck","enable","disable","readonly","destroy"];return this.each(function(s,a){if(0===n.length||"object"==typeof n[0]){if(i=0===n.length?{}:e.extend({},n[0]),"input"!==a.tagName.toLowerCase()||"checkbox"!==a.type.toLowerCase())throw"Invalid input, wToggle only allowed for checkboxes";i.element=e(a),t=new o,t.init(i)}else{if("string"!=typeof n[0])throw"Invalid arguments to wToggle: "+n;if(method=n[0],radio=e(a).data("wtoggle"),-1===e.inArray(method,r))throw"Method not found: "+method;if(void 0===radio)throw"Element is not a wToggle element";radio[method].apply(radio,n.slice(1))}}),this},e.fn.wRadio=function(){var t,i,n,o=Array.prototype.slice.call(arguments,0),s=["check","uncheck","enable","disable","readonly","destroy"];return this.each(function(a,l){if(0===o.length||"object"==typeof o[0])if(n=0===o.length?{}:e.extend({},o[0]),"input"===l.tagName.toLowerCase()&&"radio"===l.type.toLowerCase())n.element=e(l),i=new r,i.init(n);else{if("form"!==l.tagName.toLowerCase())throw"Invalid element, wRadio only allowed for radios and forms with radios";e(l).find("input[type=radio]").each(function(){e(this).wRadio()})}else{if("string"!=typeof o[0])throw"Invalid arguments to wRadio: "+o;if(t=o[0],i=e(l).data("wradio"),-1===e.inArray(t,s))throw"Method not found: "+t;if(void 0===i)throw"Element is not a wRadio element";i[t].apply(i,o.slice(1))}}),this}}}),_wAMD.define("element/editor/view/settings/item-views/CheckboxItemView",["backbone-all","mustache","element/editor/view/settings/item-views/BaseSettingsItemView","tpl!elements/settings/tooltip-checkbox.tpl","util/ui/wInput"],function(e,t,i,n){
var o=i.extend({template:t.compile(n),events:{"change @ui.input":"saveValue","click @ui.inputContainer":"saveValue"},ui:{input:"input",inputContainer:".w-checkbox-container"},templateHelpers:function(){var e=this,t=e.model.get("label");return{checked:function(){return e.getParsedValueFromModel()?'checked="checked"':""},label:_W.utl(t)}},getParsedValueFromModel:function(){var e=this.model.get("default")||!1,t="undefined"==typeof this.model.get("value")||null===this.model.get("value"),i=t?e:this.model.get("value");return"boolean"==typeof i?i:"true"===i||"false"===i?JSON.parse(i):isNaN(parseInt(i))?"form-required"===i||"form-not-required"===i?"form-required"===i?!0:!1:"yes"===i||"no"===i?"yes"===i?!0:!1:i.indexOf("weebly-image-full")>-1?!0:i.indexOf("http")>-1?!1:"<a>"===i?!1:void 0:JSON.parse(i)},onRender:function(e){var t=i.prototype.onRender.call(this);return e||(this.ui.input.wCheckbox(),this.bindUIElements()),t},getValue:function(){return this.ui.input.is(":checked")}});return o}),_wAMD.define("tpl!elements/settings/tooltip-toggle.tpl",[],function(){return'<label class="form-control form-control--toggle form-control--borderless">\n	<input type="checkbox" id="{{ucfpid}}" {{checked}}>\n	<div {{#tooltip}} data-hover-tip="" data-hover-tip-wrap-class-name="ui-framework" data-hover-tip-cssclass="settings-tooltip" data-hover-tip-follow = "true" data-hover-tip-delay="true" data-hover-tip-content="{{tooltip}}" {{/tooltip}}>\n		{{label}}\n		{{#hovertip}}\n			<span class="icon element-settings__icon" data-hover-tip="" data-hover-tip-text="{{hovertip}}" data-hover-tip-wrap-class-name="ui-framework">tooltip</span>\n		{{/hovertip}}\n	</div>\n	<span class="form-control--toggle__switch"></span>\n</label>\n\n'}),_wAMD.define("element/editor/view/settings/item-views/ToggleItemView",["backbone-all","mustache","editor-site-shared/ui/constants","element/editor/view/settings/SettingsTooltipUtil","element/editor/view/settings/item-views/CheckboxItemView","tpl!elements/settings/tooltip-toggle.tpl","util/ui/wInput"],function(e,t,i,n,o,r){var s=o.extend({template:t.compile(r),events:{"change @ui.input":"saveValue","click @ui.input":"updateToggleValue"},ui:{input:"input"},templateHelpers:function(){var e=this,t=e.model.get("label"),i=e.model.get("hovertip"),o=e.model.get("tooltip");return{checked:function(){return e.getParsedValueFromModel()?'checked="checked"':""},label:n.truncateLabel(_W.utl(t)),hovertip:i?_W.utl(i):!1,tooltip:n.formTooltip(_W.utl(t),o)}},onRender:function(){var e=o.prototype.onRender.call(this,!0);if(!e){var t=this,n=this.getParsedValueFromModel();if(i.STANDALONE_IMAGE_ELEMENTS.indexOf(Weebly.Elements.elementDef.elementid)>-1&&i.IMAGE_LINK_LIGHTBOX_CFPIDS.indexOf(t.model.get("cfpid"))>-1){var r=Weebly.Elements.getPropertyByReference("<!DATA!>").property_result||"{}";JSON.parse(r).hasOwnProperty("sprites")&&t.$el.hide()}t.ui.input.prop("checked",n),t.ui.input.toggleClass("checked",n)}},updateToggleValue:function(){this.ui.input.toggleClass("checked",this.ui.input.prop("checked"))},getValue:function(){var e=this,t=e.model.get("value"),i="1",n="0";return"true"===t||"false"===t?(i="true",n="false"):"form-not-required"===t||"form-required"===t?(i="form-required",n="form-not-required"):("yes"===t||"no"===t)&&(i="yes",n="no"),this.ui.input.is(":checked")?i:n},isValid:function(){return!0}});return s}),_wAMD.define("tpl!elements/settings/tooltip-slider.tpl",[],function(){return'<div class="form-control form-control--borderless form-control--selector element-option-slider">\n	<div class="form-control__item default-cursor"{{#tooltip}} data-hover-tip="" data-hover-tip-wrap-class-name="ui-framework" data-hover-tip-cssclass="settings-tooltip" data-hover-tip-follow = "true" data-hover-tip-delay="true" data-hover-tip-content="{{tooltip}}" {{/tooltip}}>{{label}}</div>\n	<div class="form-control__item form-control__item--right">\n		<div class="slider"></div>\n		<div id="{{ucfpid}}" class="slider-value" data-value="{{value}}">{{value}}</div>\n	</div>\n</div>\n'}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("jquery-ui/slider",["jquery","./core","./mouse","./widget"],e):e(jQuery)}(function(e){return e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",s=[];for(i=n.values&&n.values.length||1,o.length>i&&(o.slice(i).remove(),o=o.slice(0,i)),t=o.length;i>t;t++)s.push(r);this.handles=o.add(e(s.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,o,r,s,a,l,c,d=this,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-d.values(t));(o>i||o===i&&(t===d._lastChangedValue||d.values(t)===u.min))&&(o=i,r=e(this),s=t)}),a=this._start(t,s),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=s,r.addClass("ui-state-active").focus(),l=r.offset(),c=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-r.width()/2,top:t.pageY-l.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,o,r;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),o=this._valueMax()-this._valueMin(),r=this._valueMin()+n*o,this._trimAlignValue(r)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,o,r;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(o=this.values(),o[t]=i,r=this._trigger("slide",e,{handle:this.handles[t],value:i,values:o}),n=this.values(t?0:1),r!==!1&&this.values(t,i))):i!==this.value()&&(r=this._trigger("slide",e,{handle:this.handles[t],value:i}),r!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,o,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,o=arguments[0],r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(o[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,i){var n,o=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(o=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;o>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step,n=Math.floor(+(e-t).toFixed(this._precision())/i)*i;e=n+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,i,n,o,r,s=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,d={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,d["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](d,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:a.animate}))),t=i}):(n=this.value(),o=this._valueMin(),r=this._valueMax(),i=r!==o?(n-o)/(r-o)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](d,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(t){var i,n,o,r,s=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,s),i===!1))return}switch(r=this.options.step,n=o=this.options.values&&this.options.values.length?this.values(s):this.value(),t.keyCode){case e.ui.keyCode.HOME:o=this._valueMin();break;case e.ui.keyCode.END:o=this._valueMax();break;case e.ui.keyCode.PAGE_UP:o=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax())return;o=this._trimAlignValue(n+r);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin())return;o=this._trimAlignValue(n-r)}this._slide(t,s,o)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}),_wAMD.define("element/editor/view/settings/item-views/SliderItemView",["backbone-all","mustache","element/editor/view/settings/SettingsTooltipUtil","element/editor/view/settings/item-views/BaseSettingsItemView","tpl!elements/settings/tooltip-slider.tpl","jquery-ui/slider"],function(e,t,i,n,o){var r=n.extend({template:t.compile(o),ui:{input:".slider"},getValue:function(){return parseInt(this.ui.input.val(),10)},templateHelpers:function(){var e=this,t=e.model.get("label"),n=e.model.get("tooltip");return{value:this.model.get("value")||0,label:i.truncateLabel(_W.utl(t)),tooltip:i.formTooltip(_W.utl(t),n)}},onRender:function(){if(n.prototype.onRender.call(this),0===this.model.get("value")||"0"===this.model.get("value"))var e=this.model.get("value");else var e=this.model.get("value")||this.model.get("default")||this.model.get("min")||0;var t={range:"min",value:e};this.model.get("max")&&(t.max=this.model.get("max")),this.model.get("min")&&(t.min=this.model.get("min")),this.model.get("step")&&(t.step=this.model.get("step")||1),t.stop=function(e,t){var i=this.model.get("ucfpid"),n=this.model.get("cfpid");this.model.set("value",t.value),(i||n)&&Weebly.Elements.onChange(i,n)}.bind(this),this.listenTo(this.model,"change:value",this.render),this.ui.input.slider(t)},isValid:function(){var e=this.getValue(),t=this.model.get("max"),i=this.model.get("min"),n=this.model.get("step"),o=!0;return null!=i&&void 0!=i&&i>e&&(o=!1),null!=t&&void 0!=t&&e>t&&(o=!1),null!=n&&void 0!=n&&e%n!=0&&(o=!1),o},getValue:function(){return this.ui.input.slider("value")},isValid:function(){return!0}});return r}),_wAMD.define("tpl!elements/settings/tooltip-radio.tpl",[],function(){return'<h3 class="form-header">{{label}}</h3>\n<div class="group group--flush" {{#tooltip}} data-hover-tip="" data-hover-tip-wrap-class-name="ui-framework" data-hover-tip-text="{{tooltip}}" {{/tooltip}}>\n	{{#options}}\n		<div class="group__item">\n			<label class="form-control form-control--radio form-control--borderless">\n				<input id="radio-{{value}}" type="radio" name="r-opt" data-ucfpid="{{ucfpid}}" value="{{value}}" {{#checked}}checked{{/checked}}>\n				<span class="form-control__indicator"></span>\n				{{name}}\n			</label>\n		</div>\n	{{/options}}\n</div>\n'}),_wAMD.define("element/editor/view/settings/item-views/RadioItemView",["backbone-all","mustache","element/editor/view/settings/item-views/SelectItemView","tpl!elements/settings/tooltip-radio.tpl"],function(e,t,i,n){var o=i.extend({template:t.compile(n),events:{"change @ui.input":"saveValue"},templateHelpers:function(){var e=this,t=e.model.get("label");return _.extend({label:_W.utl(t)},i.prototype.templateHelpers.call(this))},ui:{input:"input"},getValue:function(){return this.$el.find("input:checked").val()},isValid:function(){return!0}});return o}),_wAMD.define("tpl!elements/settings/tooltip-align.tpl",[],function(){return'<div class="form-control form-control--selector form-control--borderless">\n	<div class="form-control__item default-cursor"{{#tooltip}} data-hover-tip="" data-hover-tip-wrap-class-name="ui-framework" data-hover-tip-cssclass="settings-tooltip" data-hover-tip-follow = "true" data-hover-tip-delay="true" data-hover-tip-content="{{tooltip}}" {{/tooltip}}>{{label}}</div>\n	<div class="form-control__item form-control__item--right">\n		<div class="inline-selector">\n			<span class="inline-selector__option" data-ucfpid="{{ucfpid}}" value="left" data-value="{{leftValue}}" class="inline-selector__option">\n				<span class="icon">textalignleft</span>\n			</span>\n			<span class="inline-selector__option" data-ucfpid="{{ucfpid}}" value="center" data-value="{{centerValue}}" class="inline-selector__option">\n				<span class="icon">textaligncenter</span>\n			</span>\n			<span class="inline-selector__option" data-ucfpid="{{ucfpid}}" value="right" data-value="{{rightValue}}" class="inline-selector__option">\n				<span class="icon">textalignright</span>\n			</span>\n		</div>\n	</div>\n</div>'}),_wAMD.define("element/editor/view/settings/item-views/AlignItemView",["jquery","underscore","backbone-all","mustache","element/editor/view/settings/SettingsTooltipUtil","element/editor/view/settings/item-views/BaseSettingsItemView","tpl!elements/settings/tooltip-align.tpl"],function(e,t,i,n,o,r,s){var a=r.extend({template:n.compile(s),events:{"click .inline-selector__option ":"setActive"},ui:{active:".is-selected",options:".inline-selector__option "},templateHelpers:function(){var e=this,t=e.model.get("label"),i=e.model.get("tooltip");return{leftValue:function(){return e.getValueFromValues("left")},centerValue:function(){return e.getValueFromValues("center")},rightValue:function(){return e.getValueFromValues("right")},label:o.truncateLabel(_W.utl(t)),tooltip:o.formTooltip(_W.utl(t),i)}},setActive:function(e){e.preventDefault(),this.ui.options.removeClass("is-selected"),this.ui.options.filter("[value="+e.currentTarget.getAttribute("value")+"]").addClass("is-selected"),this.saveValue()},onRender:function(){r.prototype.onRender.call(this);var e=this.model.get("value"),i=this.model.get("values");if(i){var n=t.find(i,function(t){return t.value===e.toString()});e=n?n.name:e}var o=e||this.model.get("default")||"left";this.ui.options.filter('*[value="'+o+'"]').addClass("is-selected")},getValue:function(){return this.model.get("ucfpid")?this.ui.options.filter(".is-selected").data("value"):this.ui.options.filter(".is-selected").attr("value")},getValueFromValues:function(e){var i=this,n=i.model.get("values");return n?t.find(n,function(t){return t.name===e}).value:e}});return a}),_wAMD.define("element/editor/view/settings/item-views/HiddenItemView",["backbone-all","mustache","element/editor/view/settings/item-views/BaseSettingsItemView"],function(e,t,i){var n=i.extend({template:t.compile("<div></div>"),attributes:function(){return{"class":"hidden"}},onBeforeRender:function(){this.$el.remove()},getValue:function(){return this.model.get("value")},isValid:function(){return!1}});return n}),_wAMD.define("tpl!elements/settings/tooltip-sublabel.tpl",[],function(){return'<button class="btn-control btn-control--borderless {{#isColor}}color-btn-control{{/isColor}}" data-action-index="{{actionPaneIndex}}">\n	{{^value}}\n		<div {{#tooltip}} data-hover-tip="" data-hover-tip-wrap-class-name="ui-framework" data-hover-tip-cssclass="settings-tooltip" data-hover-tip-follow = "true" data-hover-tip-delay="true" data-hover-tip-content="{{#esc_attr}}{{tooltip}}{{/esc_attr}}" {{/tooltip}}>\n			{{label}}\n		</div>\n	{{/value}}\n	{{#value}}\n		<div class="btn-control__label"{{#tooltip}} data-hover-tip="" data-hover-tip-wrap-class-name="ui-framework" data-hover-tip-cssclass="settings-tooltip" data-hover-tip-follow = "true" data-hover-tip-delay="true" data-hover-tip-content="{{tooltip}}" {{/tooltip}}>{{label}}</div>\n		{{^isColor}}\n			<span class="btn-control__sublabel">{{value}}</span>\n		{{/isColor}}\n	{{/value}}\n	{{#isColor}}\n		<span class="btn-control__sublabel">\n			{{value}}\n			<span class="btn-control__sublabel-color" style="background-color: {{value}}"></span>\n		</span>\n	{{/isColor}}\n</button>\n'}),_wAMD.define("element/editor/view/settings/item-views/SubLabelItemView",["underscore","jquery","backbone-all","mustache","ui-framework/js/components/hover-tip","element/editor/view/settings/SettingsTooltipUtil","element/editor/view/settings/item-views/BaseSettingsItemView","tpl!elements/settings/tooltip-sublabel.tpl"],function(e,t,i,n,o,r,s,a){var l=s.extend({template:n.compile(a),templateHelpers:function(){var i=this.model.get("value")||this.model.get("default"),n=["radio","select"],o=this.model.get("label"),s=this.model.get("tooltip"),a=this.model.get("type");return"buttonDropdown"===this.model.get("special")||"optionItems"===a||"social"===this.model.get("action")?{value:"",label:o?r.truncateLabel(_W.utl(o)):o,tooltip:r.formTooltip(_W.utl(o),s)}:(e.contains(n,a)&&("object"==typeof this.model.get("values")[0]?(i=e.find(this.model.get("values"),function(e){return e.value===i}),i=i?i["short"]||i.name:this.model.get("default")):i=e.find(this.model.get("values"),function(e){return e===i})),"color"!==a||null!==i&&void 0!==i||(i="#000000"),"color"!==a||-1!==i.indexOf("#")||t("<div>").css("background-color",i).css("background-color")||(i="#"+i),{value:i?_W.utl(i):i,label:o?_W.utl(o):o,isColor:"color"===a,tooltip:r.formTooltip(_W.utl(o),s)})},onShow:function(){o.initialize()}});return l}),_wAMD.define("site/editor/ui/beacon",["jquery","editor-site-shared/relay"],function(e,t){var i={},n={};return i.getDimensions=function(t,i){var o=i;if(o instanceof e||(o=e(i)),!t)return console.warn("Namespace not specified:",t),!1;if(!o.length)return console.warn("Target not found:",i),!1;var r=o.map(function(t,i){var n=e(i),o=n.offset(),r=n.outerHeight(),s=n.outerWidth();return{top:o.top,left:o.left,height:r,width:s}}).get();return n[t]={$el:o,target:i},r},i.show=function(n,o,r){var s=i.getDimensions(n,o);return s?t.request("beacon:show",n,s,r):e.Deferred().reject()},i.close=function(e,n){return t.request("beacon:close",e,n).done(function(){i.remove(e)})},i.refresh=function(t){var o,r=n[t]||{},s=e.Deferred(),a=r.$el;return Object.keys(r).length?e.contains(document,a)?(o=i.getDimensions(t,a),s.resolve(o)):(a=e(r.target)).length?(n[t].$el=a,o=i.getDimensions(t,r.target),s.resolve(o)):s.reject():s.reject(),s.promise()},i.find=function(t){var n=e.Deferred(),o=i.getDimensions(t,t);return o?n.resolve(t,o):n.reject(),n.promise()},i.remove=function(e){var t=n[e];t&&delete t[e]},t.reqres.setHandlers({"beacon:refresh":i.refresh,"beacon:remove":i.remove,"beacon:find":i.find}),i}),_wAMD.define("tpl!elements/settings/tooltip-button.tpl",[],function(){return'<button class="js-button {{#isExternal}}iframe-button{{/isExternal}} btn--action" {{#actionPaneIndex}}data-action-index="{{actionPaneIndex}}"{{/actionPaneIndex}}>\n	{{label}}\n	{{#showBadge}}<span class="label label--badge">{{badgeLabel}}</span>{{/showBadge}}\n</button>\n\n{{#customHTML}}\n	{{{customHTML}}}\n{{/customHTML}}\n'}),_wAMD.define("element/editor/view/settings/item-views/ButtonItemView",["w-global","jquery","mustache","underscore","site/editor/app","editor-site-shared/relay","site/editor/ui/beacon","element/editor/view/settings/item-views/BaseSettingsItemView","element/editor/view/settings/utils","editor-site-shared/ui/constants","tpl!elements/settings/tooltip-button.tpl"],function(e,t,i,n,o,r,s,a,l,c,d){var u=a.extend({template:i.compile(d),events:{"click .js-button":"clickHandler"},templateHelpers:function(){var t=this,n=t.model.get("external"),o=n?n.label:t.model.get("label");return{isExternal:t.isExternal,label:e.utl(o),showBadge:this.showBadge,badgeLabel:this.showBadge?e.utl(this.badgeLabel):"",customHTML:i.render(t.model.get("customHTML"),t.model.attributes),actionPaneIndex:"undefined"!=typeof t.model.get("actionPaneIndex")?t.model.get("actionPaneIndex").toString():""}},initialize:function(e){var t=this;Weebly.Elements.uproperty.eid!==c.PRODUCT_ELEMENT_ID||Weebly.Permissions.store_edit||"editProduct"!==t.model.get("name")||t.$el.hide(),a.prototype.initialize.call(t),t.peid=e.peid,t.isExternal=e.isExternal;var i=this.model.get("badge");this.showBadge=Boolean(i),this.showBadge&&(this.badgeLabel=i.label,i.userEvent&&(this.showBadge=!1,r.request("userEvent:hasDoneUserEvent",i.userEvent).done(function(e){i.userEventValue===e&&(this.showBadge=!0,this._isRendered&&this.render())}.bind(this))))},clickHandler:function(e){var i=this,a=i.model.get("action"),c=[],d=window,u=t(Weebly.Elements.currentElement);if("undefined"==typeof i.model.get("actionPaneIndex")&&"social"!==a){if(e.stopPropagation(),i.isExternal)i.options.parentView.openSettingsIframe();else if(a)switch(n.each(i.model.get("arguments"),function(e){var t,n=i.model.get(e);if("undefined"!=typeof n)t=n;else if("%%ELEMENTID%%"===e)t=u.attr("id");else if(e.toString().match(/<!.*!>\|value$/)){var o=e.split("|")[0],r=Weebly.Elements.getPropertyByReference(o),s=l.getPropertyByKey(i.collection||i.model.collection,"cfpid",r.cfpid)||r.property_result;t=s}else t=e.toString().match(/^<!.*!>$/)?Weebly.Elements.getPropertyByReference(e).ucfpid:e;c.push(t)}),a){case"require":if(!i.model.get("requireContext"))return;var h=i.model.get("requireContext"),p=i.model.get("requireFunction"),f="relay"===h?r:window;"relay"===h?r[p].apply(f,c):"beacon"===h?s[p].apply(f,[c.shift(),u,c]):require(h)[p].apply(f,c);break;default:i.model.get("isFlash")&&i.$el.addClass("uploadLink"),n.isArray(a)?(n.each(a,function(e){d=d[e]}),d.apply(window,c)):window[a].apply(window,c)}i.model.get("closeOnClick")&&o.vent.trigger("element:options:dialog:close")}}});return u}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("sortable",e):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=e():"undefined"!=typeof Package?Sortable=e():window.Sortable=e()}(function(){function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=v({},t),e[B]=this;var i={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var n in i)!(n in t)&&(t[n]=i[n]);q(t);for(var r in this)"_"===r.charAt(0)&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:H,o(e,"mousedown",this._onTapStart),o(e,"touchstart",this._onTapStart),this.nativeDraggable&&(o(e,"dragover",this),o(e,"dragenter",this)),z.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e){_&&_.state!==e&&(a(_,"display",e?"none":""),!e&&_.state&&E.insertBefore(_,b),_.state=e)}function i(e,t,i){if(e){i=i||K,t=t.split(".");var n=t.shift().toUpperCase(),o=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");do if(">*"===n&&e.parentNode===i||(""===n||e.nodeName.toUpperCase()==n)&&(!t.length||((" "+e.className+" ").match(o)||[]).length==t.length))return e;while(e!==i&&(e=e.parentNode))}return null}function n(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function o(e,t,i){e.addEventListener(t,i,!1)}function r(e,t,i){e.removeEventListener(t,i,!1)}function s(e,t,i){if(e)if(e.classList)e.classList[i?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(L," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(L," ")}}function a(e,t,i){var n=e&&e.style;if(n){if(void 0===i)return K.defaultView&&K.defaultView.getComputedStyle?i=K.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in n||(t="-webkit-"+t),n[t]=i+("string"==typeof i?"":"px")}}function l(e,t,i){if(e){var n=e.getElementsByTagName(t),o=0,r=n.length;if(i)for(;r>o;o++)i(n[o],o);return n}return[]}function c(e,t,i,n,o,r,s){var a=K.createEvent("Event"),l=(e||t[B]).options,c="on"+i.charAt(0).toUpperCase()+i.substr(1);a.initEvent(i,!0,!0),a.to=t,a.from=o||t,a.item=n||t,a.clone=_,a.oldIndex=r,a.newIndex=s,t.dispatchEvent(a),l[c]&&l[c].call(e,a)}function d(e,t,i,n,o,r){var s,a,l=e[B],c=l.options.onMove;return s=K.createEvent("Event"),s.initEvent("move",!0,!0),s.to=t,s.from=e,s.dragged=i,s.draggedRect=n,s.related=o||t,s.relatedRect=r||t.getBoundingClientRect(),e.dispatchEvent(s),c&&(a=c.call(l,s)),a}function u(e){e.draggable=!1}function h(){$=!1}function p(e,t){var i=e.lastElementChild,n=i.getBoundingClientRect();return(t.clientY-(n.top+n.height)>5||t.clientX-(n.right+n.width)>5)&&i}function f(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;i--;)n+=t.charCodeAt(i);return n.toString(36)}function m(e){var t=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&t++;return t}function g(e,t){var i,n;return function(){void 0===i&&(i=arguments,n=this,setTimeout(function(){1===i.length?e.call(n,i[0]):e.apply(n,i),i=void 0},t))}}function v(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}var b,y,w,_,E,T,C,S,D,I,k,O,R,x,A,P,M,N={},L=/\s+/g,B="Sortable"+(new Date).getTime(),j=window,K=j.document,F=j.parseInt,H=!!("draggable"in K.createElement("div")),W=function(e){return e=K.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),$=!1,V=Math.abs,z=([].slice,[]),U=g(function(e,t,i){if(i&&t.scroll){var n,o,r,s,a=t.scrollSensitivity,l=t.scrollSpeed,c=e.clientX,d=e.clientY,u=window.innerWidth,h=window.innerHeight;if(S!==i&&(C=t.scroll,S=i,C===!0)){C=i;do if(C.offsetWidth<C.scrollWidth||C.offsetHeight<C.scrollHeight)break;while(C=C.parentNode)}C&&(n=C,o=C.getBoundingClientRect(),r=(V(o.right-c)<=a)-(V(o.left-c)<=a),s=(V(o.bottom-d)<=a)-(V(o.top-d)<=a)),r||s||(r=(a>=u-c)-(a>=c),s=(a>=h-d)-(a>=d),(r||s)&&(n=j)),(N.vx!==r||N.vy!==s||N.el!==n)&&(N.el=n,N.vx=r,N.vy=s,clearInterval(N.pid),n&&(N.pid=setInterval(function(){n===j?j.scrollTo(j.pageXOffset+r*l,j.pageYOffset+s*l):(s&&(n.scrollTop+=s*l),r&&(n.scrollLeft+=r*l))},24)))}},30),q=function(e){
var t=e.group;t&&"object"==typeof t||(t=e.group={name:t}),["pull","put"].forEach(function(e){e in t||(t[e]=!0)}),e.groups=" "+t.name+(t.put.join?" "+t.put.join(" "):"")+" "};return e.prototype={constructor:e,_onTapStart:function(e){var t=this,n=this.el,o=this.options,r=e.type,s=e.touches&&e.touches[0],a=(s||e).target,l=a,d=o.filter;if(!("mousedown"===r&&0!==e.button||o.disabled)&&(a=i(a,o.draggable,n))){if(O=m(a),"function"==typeof d){if(d.call(this,e,a,this))return c(t,l,"filter",a,n,O),void e.preventDefault()}else if(d&&(d=d.split(",").some(function(e){return e=i(l,e.trim(),n),e?(c(t,e,"filter",a,n,O),!0):void 0})))return void e.preventDefault();(!o.handle||i(l,o.handle,n))&&this._prepareDragStart(e,s,a)}},_prepareDragStart:function(e,t,i){var n,r=this,a=r.el,c=r.options,d=a.ownerDocument;i&&!b&&i.parentNode===a&&(A=e,E=a,b=i,y=b.parentNode,T=b.nextSibling,x=c.group,n=function(){r._disableDelayedDrag(),b.draggable=!0,s(b,r.options.chosenClass,!0),r._triggerDragStart(t)},c.ignore.split(",").forEach(function(e){l(b,e.trim(),u)}),o(d,"mouseup",r._onDrop),o(d,"touchend",r._onDrop),o(d,"touchcancel",r._onDrop),c.delay?(o(d,"mouseup",r._disableDelayedDrag),o(d,"touchend",r._disableDelayedDrag),o(d,"touchcancel",r._disableDelayedDrag),o(d,"mousemove",r._disableDelayedDrag),o(d,"touchmove",r._disableDelayedDrag),r._dragStartTimer=setTimeout(n,c.delay)):n())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),r(e,"mouseup",this._disableDelayedDrag),r(e,"touchend",this._disableDelayedDrag),r(e,"touchcancel",this._disableDelayedDrag),r(e,"mousemove",this._disableDelayedDrag),r(e,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(e){e?(A={target:b,clientX:e.clientX,clientY:e.clientY},this._onDragStart(A,"touch")):this.nativeDraggable?(o(b,"dragend",this),o(E,"dragstart",this._onDragStart)):this._onDragStart(A,!0);try{K.selection?K.selection.empty():window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){E&&b&&(s(b,this.options.ghostClass,!0),e.active=this,c(this,E,"start",b,E,O))},_emulateDragOver:function(){if(P){if(this._lastX===P.clientX&&this._lastY===P.clientY)return;this._lastX=P.clientX,this._lastY=P.clientY,W||a(w,"display","none");var e=K.elementFromPoint(P.clientX,P.clientY),t=e,i=" "+this.options.group.name,n=z.length;if(t)do{if(t[B]&&t[B].options.groups.indexOf(i)>-1){for(;n--;)z[n]({clientX:P.clientX,clientY:P.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);W||a(w,"display","")}},_onTouchMove:function(t){if(A){e.active||this._dragStarted(),this._appendGhost();var i=t.touches?t.touches[0]:t,n=i.clientX-A.clientX,o=i.clientY-A.clientY,r=t.touches?"translate3d("+n+"px,"+o+"px,0)":"translate("+n+"px,"+o+"px)";M=!0,P=i,a(w,"webkitTransform",r),a(w,"mozTransform",r),a(w,"msTransform",r),a(w,"transform",r),t.preventDefault()}},_appendGhost:function(){if(!w){var e,t=b.getBoundingClientRect(),i=a(b),n=this.options;w=b.cloneNode(!0),s(w,n.ghostClass,!1),s(w,n.fallbackClass,!0),a(w,"top",t.top-F(i.marginTop,10)),a(w,"left",t.left-F(i.marginLeft,10)),a(w,"width",t.width),a(w,"height",t.height),a(w,"opacity","0.8"),a(w,"position","fixed"),a(w,"zIndex","100000"),a(w,"pointerEvents","none"),n.fallbackOnBody&&K.body.appendChild(w)||E.appendChild(w),e=w.getBoundingClientRect(),a(w,"width",2*t.width-e.width),a(w,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var i=e.dataTransfer,n=this.options;this._offUpEvents(),"clone"==x.pull&&(_=b.cloneNode(!0),a(_,"display","none"),E.insertBefore(_,b)),t?("touch"===t?(o(K,"touchmove",this._onTouchMove),o(K,"touchend",this._onDrop),o(K,"touchcancel",this._onDrop)):(o(K,"mousemove",this._onTouchMove),o(K,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(i&&(i.effectAllowed="move",n.setData&&n.setData.call(this,i,b)),o(K,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(e){var n,o,r,s=this.el,l=this.options,c=l.group,u=c.put,f=x===c,m=l.sort;if(void 0!==e.preventDefault&&(e.preventDefault(),!l.dragoverBubble&&e.stopPropagation()),M=!0,x&&!l.disabled&&(f?m||(r=!E.contains(b)):x.pull&&u&&(x.name===c.name||u.indexOf&&~u.indexOf(x.name)))&&(void 0===e.rootEl||e.rootEl===this.el)){if(U(e,l,this.el),$)return;if(n=i(e.target,l.draggable,s),o=b.getBoundingClientRect(),r)return t(!0),void(_||T?E.insertBefore(b,_||T):m||E.appendChild(b));if(0===s.children.length||s.children[0]===w||s===e.target&&(n=p(s,e))){if(n){if(n.animated)return;v=n.getBoundingClientRect()}t(f),d(E,s,b,o,n,v)!==!1&&(b.contains(s)||(s.appendChild(b),y=s),this._animate(o,b),n&&this._animate(v,n))}else if(n&&!n.animated&&n!==b&&void 0!==n.parentNode[B]){D!==n&&(D=n,I=a(n),k=a(n.parentNode));var g,v=n.getBoundingClientRect(),C=v.right-v.left,S=v.bottom-v.top,O=/left|right|inline/.test(I.cssFloat+I.display)||"flex"==k.display&&0===k["flex-direction"].indexOf("row"),R=n.offsetWidth>b.offsetWidth,A=n.offsetHeight>b.offsetHeight,P=(O?(e.clientX-v.left)/C:(e.clientY-v.top)/S)>.5,N=n.nextElementSibling,L=d(E,s,b,o,n,v);if(L!==!1){if($=!0,setTimeout(h,30),t(f),1===L||-1===L)g=1===L;else if(O){var j=b.offsetTop,K=n.offsetTop;g=j===K?n.previousElementSibling===b&&!R||P&&R:K>j}else g=N!==b&&!A||P&&A;b.contains(s)||(g&&!N?s.appendChild(b):n.parentNode.insertBefore(b,g?N:n)),y=b.parentNode,this._animate(o,b),this._animate(v,n)}}}},_animate:function(e,t){var i=this.options.animation;if(i){var n=t.getBoundingClientRect();a(t,"transition","none"),a(t,"transform","translate3d("+(e.left-n.left)+"px,"+(e.top-n.top)+"px,0)"),t.offsetWidth,a(t,"transition","all "+i+"ms"),a(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){a(t,"transition",""),a(t,"transform",""),t.animated=!1},i)}},_offUpEvents:function(){var e=this.el.ownerDocument;r(K,"touchmove",this._onTouchMove),r(e,"mouseup",this._onDrop),r(e,"touchend",this._onDrop),r(e,"touchcancel",this._onDrop)},_onDrop:function(t){var i=this.el,n=this.options;clearInterval(this._loopId),clearInterval(N.pid),clearTimeout(this._dragStartTimer),r(K,"mousemove",this._onTouchMove),this.nativeDraggable&&(r(K,"drop",this),r(i,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(M&&(t.preventDefault(),!n.dropBubble&&t.stopPropagation()),w&&w.parentNode.removeChild(w),b&&(this.nativeDraggable&&r(b,"dragend",this),u(b),s(b,this.options.ghostClass,!1),s(b,this.options.chosenClass,!1),E!==y?(R=m(b),R>=0&&(c(null,y,"sort",b,E,O,R),c(this,E,"sort",b,E,O,R),c(null,y,"add",b,E,O,R),c(this,E,"remove",b,E,O,R))):(_&&_.parentNode.removeChild(_),b.nextSibling!==T&&(R=m(b),R>=0&&(c(this,E,"update",b,E,O,R),c(this,E,"sort",b,E,O,R)))),e.active&&((null===R||-1===R)&&(R=O),c(this,E,"end",b,E,O,R),this.save())),E=b=y=w=T=_=C=S=A=P=M=R=D=I=x=e.active=null)},handleEvent:function(e){var t=e.type;"dragover"===t||"dragenter"===t?b&&(this._onDragOver(e),n(e)):("drop"===t||"dragend"===t)&&this._onDrop(e)},toArray:function(){for(var e,t=[],n=this.el.children,o=0,r=n.length,s=this.options;r>o;o++)e=n[o],i(e,s.draggable,this.el)&&t.push(e.getAttribute(s.dataIdAttr)||f(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach(function(e,o){var r=n.children[o];i(r,this.options.draggable,n)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return i(e,t||this.options.draggable,this.el)},option:function(e,t){var i=this.options;return void 0===t?i[e]:(i[e]=t,void("group"===e&&q(i)))},destroy:function(){var e=this.el;e[B]=null,r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),this.nativeDraggable&&(r(e,"dragover",this),r(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),z.splice(z.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},e.utils={on:o,off:r,css:a,find:l,is:function(e,t){return!!i(e,t,e)},extend:v,throttle:g,closest:i,toggleClass:s,index:m},e.create=function(t,i){return new e(t,i)},e.version="1.4.2",e}),_wAMD.define("ui-framework/js/components/sortable",["jquery","sortable","backbone"],function(e,t,i){var n={animation:200,draggable:".group__item",ghostClass:"group__ghost"},o=i.View.extend.call(t,{constructor:function(i,o){if(i=e(i),0===i.length)throw new Error("No element provided");o=e.extend({},n,o),t.call(this,i[0],o)}});return o.create=function(e,t){return new o(e,t)},o}),_wAMD.define("tpl!elements/settings/tooltip-option-items.tpl",[],function(){return'<div class="group group--flush group--sortable group--deletable form-option-group js-form-option-group">\n	{{#options}}\n		<div class="group__item js-option">\n			<span class="group--deletable__icon js-delete-option"></span>\n			<div class="form-control form-control--borderless">\n				<input name="std" value="{{.}}" type="text">\n			</div>\n		</div>\n	{{/options}}\n</div>\n\n<button class="btn-control js-add-option form-option-add-button">\n	<span class="icon">plussmall</span> {{#tl}}templates.elements.settings.tooltip-option-items_2{{/tl}}\n</button>\n\n<button class="btn--action open-predefined" style="margin-top:15px">\n	{{#tl}}templates.elements.settings.tooltip-option-items_3{{/tl}}\n</button>\n'}),_wAMD.define("tpl!elements/settings/tooltip-option-item.tpl",[],function(){return'<div class="group__item js-option">\n	<span class="group--deletable__icon js-delete-option"></span>\n	<div class="form-control form-control--borderless">\n		<input name="std" placeholder="{{#esc_attr}}{{#tl}}templates.elements.settings.tooltip-option-item_1{{/tl}}{{/esc_attr}}" type="text">\n	</div>\n</div>\n'}),_wAMD.define("element/editor/view/settings/item-views/OptionsItemView",["backbone-all","jquery","underscore","mustache","element/editor/model/ElementSettingModel","ui-framework/js/components/combo-dialog","ui-framework/js/components/sortable","element/editor/view/settings/utils","element/editor/view/settings/item-views/SelectItemView","element/editor/view/settings/item-views/BaseSettingsItemView","tpl!elements/settings/tooltip-option-items.tpl","tpl!elements/settings/tooltip-option-item.tpl"],function(e,t,i,n,o,r,s,a,l,c,d,u){var h=c.extend({template:n.compile(d),events:{"click @ui.addOption":"insertNewOption","blur @ui.options":"saveValue","click @ui.deleteButtons":"deleteOption","sort @ui.optionGroup":"saveValue","click .open-predefined":"openPredefinedOptions"},ui:{optionGroup:".js-form-option-group",addOption:".js-add-option",options:".js-option",deleteButtons:".js-delete-option"},onBeforeRender:function(){var e=this;e.dialog.onBeforeForward=function(){e.toggleEdit()}},onShow:function(){var e=this;e.isEditing=!1,e.initSortable()},templateHelpers:function(){var e=this;return{options:function(){var t=e.model.get("value")?e.model.get("value").split("||"):[];return t}}},getValue:function(){var e=this,t=[];return e.bindUIElements(),i.each(e.ui.options.find("input[name=std]"),function(e){var i=e.value.trim();i.length>0&&t.push(i)}),t.join("||")},insertNewOption:function(){var e=this,i=n.render(u);t(e.ui.options[0]).hasClass("is-editing")&&e.toggleEdit(),e.ui.options.last().after(i),e.bindUIElements(),e.$el.find(".group__item").eq(-1).find("input").focus()},deleteOption:function(e){var i=this;t(e.currentTarget).parent().remove(),i.bindUIElements(),i.saveValue()},initSortable:function(){var e=this;this.sortedGroup=new s.create(e.ui.optionGroup)},toggleEdit:function(){var e=this,t=e.dialog;e.ui.optionGroup.toggleClass("is-sorting is-deletable"),e.isEditing?(t.$headerEl.find(".topbar").removeClass("is-activated"),t.$headerEl.find(".topbar__right .topbar__action").text(_W.utl("javascript.element.editor.view.settings.item-views.OptionsItemView_1"))):(t.$headerEl.find(".topbar").addClass("is-activated"),t.$headerEl.find(".topbar__right .topbar__action").text(_W.utl("javascript.element.editor.view.settings.item-views.OptionsItemView_2"))),e.isEditing=!e.isEditing},openPredefinedOptions:function(){var e,t,i=this.dialog,n=[{name:"javascript.element.editor.view.settings.item-views.OptionsItemView_138",value:"Gender"},{name:"javascript.element.editor.view.settings.item-views.OptionsItemView_139",value:"Age"},{name:"javascript.element.editor.view.settings.item-views.OptionsItemView_140",value:"Income"},{name:"javascript.element.editor.view.settings.item-views.OptionsItemView_141",value:"Marketing Reference"},{name:"javascript.element.editor.view.settings.item-views.OptionsItemView_142",value:"Answer"},{name:"javascript.element.editor.view.settings.item-views.OptionsItemView_143",value:"Education"},{name:"javascript.element.editor.view.settings.item-views.OptionsItemView_144",value:"Employment"},{name:"javascript.element.editor.view.settings.item-views.OptionsItemView_145",value:"Days of the Week"},{name:"javascript.element.editor.view.settings.item-views.OptionsItemView_146",value:"Months of the Year"},{name:"javascript.element.editor.view.settings.item-views.OptionsItemView_147",value:"U.S. States"},{name:"javascript.element.editor.view.settings.item-views.OptionsItemView_148",value:"How Often"},{name:"javascript.element.editor.view.settings.item-views.OptionsItemView_149",value:"How Long"},{name:"javascript.element.editor.view.settings.item-views.OptionsItemView_150",value:"Satisfaction"},{name:"javascript.element.editor.view.settings.item-views.OptionsItemView_151",value:"Importance"},{name:"javascript.element.editor.view.settings.item-views.OptionsItemView_152",value:"Agreement"},{name:"javascript.element.editor.view.settings.item-views.OptionsItemView_153",value:"Comparison"}],s={Gender:[_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_8"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_9")],Age:[_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_10"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_11"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_12"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_13"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_14"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_15"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_16")],Income:[_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_17"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_18"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_19"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_20"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_21"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_22")],"Marketing Reference":[_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_23"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_24"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_25"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_26")],Answer:[_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_3"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_4"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_5")],Education:[_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_27"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_28"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_29"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_30"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_31"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_32"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_33")],Employment:[_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_34"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_35"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_36"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_37")],"Days of the Week":[_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_38"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_39"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_40"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_41"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_42"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_43"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_44")],"Months of the Year":[_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_45"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_46"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_47"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_48"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_49"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_50"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_51"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_52"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_53"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_54"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_55"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_56")],"U.S. States":[_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_57"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_58"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_59"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_60"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_61"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_62"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_63"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_64"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_65"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_66"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_67"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_68"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_69"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_70"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_71"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_72"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_73"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_74"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_75"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_76"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_77"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_78"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_79"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_80"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_81"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_82"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_83"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_84"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_85"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_86"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_87"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_88"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_89"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_90"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_91"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_92"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_93"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_94"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_95"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_96"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_97"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_98"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_99"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_100"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_101"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_102"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_103"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_104"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_105"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_106"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_107")],"How Often":[_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_108"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_109"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_110"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_111"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_112")],"How Long":[_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_113"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_114"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_115"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_116"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_117")],Satisfaction:[_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_118"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_119"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_120"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_121"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_122")],Importance:[_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_123"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_124"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_125"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_126"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_127")],Agreement:[_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_128"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_129"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_130"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_131"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_132")],Comparison:[_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_133"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_134"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_135"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_136"),_W.stl("javascript.element.editor.view.settings.item-views.OptionsItemView_137")]};e=new l({model:new o({values:n,type:"optionItems"})}),e.dialogOptions={title:_W.utl("javascript.element.editor.view.settings.item-views.OptionsItemView_6"),backLink:_W.utl("javascript.element.editor.view.settings.item-views.OptionsItemView_7")},t=new r.Panel(e),t.listenTo(t,"before:pop",function(t){var i=e.model.get("value");if(i){var n=s[i].join("||"),o=t.contentView.model.get("ucfpid"),r=t.contentView.model.get("cfpid");a.setPropertyByKey(t.contentView.collection,"ucfpid",o,n),t.contentView.model.set("value",n),Weebly.Elements.onChange(o,r)}}),i.pushPanel(t)}});return h}),_wAMD.define("ui-framework/js/components/switcher",["jquery","underscore","backbone","mustache","./base-view"],function(e,t,i,n,o){var r=i.Model.extend({defaults:{icon:null,text:null,textHtml:null,value:null,selected:!1}}),s=i.Collection.extend({model:r}),a=i.View.extend({tagName:"li",className:"group__item",template:'<label class="switcher__form-control form-control form-control--radio-check form-control--borderless">\n<input type="radio" name="{{name}}" value="{{value}}" {{#selected}}checked{{/selected}}>\n<span class="form-control__indicator"></span>\n{{#icon}}<span class="icon switcher__icon">{{icon}}</span>{{/icon}}\n<span class="switcher__text" {{#iconAfterText}}data-icon-after="{{iconAfterText}}"{{/iconAfterText}}>{{text}}</span>\n{{{textHtml}}}\n</label>',events:{"click input[type=radio]":"select"},initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){this.$el.html(n.render(this.template,this.model.attributes));var e=this.model.get("selected");return this.$el.toggleClass("is-selected",e).find("input:radio").attr("checked",e),this},select:function(){this.model.set("selected",!0),this.trigger("item:selected")}}),l=o.extend({selectedModel:null,isOpen:!1,tagName:"ul",className:"switcher group group--flush",_initialize:function(){this.setElement(this.queryOption("el")),this.buildOptions(this.queryOption("items")||[])},render:function(e){return this.collection.each(function(e){var t=new a({model:e});this.$el.append(t.render().el),this.listenTo(t,"item:selected",function(){this.handleOptionSelected(t.model),this.toggle()})}.bind(this)),this.$el.addClass(this.isOpen?"is-open":"is-closed"),this},buildOptions:function(e){var i=this,n=new s,o=t.uniqueId("switcher__");this.isOpen=!0,e.forEach(function(e){var t;if("object"!=typeof e)throw new TypeError("Switcher Items must be an object");t=new r({name:o,text:e.text,textHtml:e.textHtml,icon:e.icon,iconAfterText:e.iconAfterText,value:e.value,selected:e.selected}),t.get("selected")&&(i.selectedModel=t,i.isOpen=!1),n.add(t)}),this.collection=n},select:function(e){var t;e&&(t=this.collection.findWhere({value:e})),t?(t&&t.set("selected",!0),this.handleOptionSelected(t)):this.unselect()},handleOptionSelected:function(e){this.selectedModel!=e&&(this.selectedModel&&this.selectedModel.set("selected",!1),this.selectedModel=e,this.isOpen||this.updateObscuredOptions(),this._trigger("option:changed",e.get("value")))},unselect:function(){this.selectedModel&&(this.selectedModel.set("selected",!1),this.selectedModel=null,this._trigger("option:changed",null),this.open())},toggle:function(){this.isOpen?this.close():this.open()},open:function(){var e=this;this.isOpen||(this.$el.find(".group__item").slideDown(200,"swing",function(){e.$el.addClass("is-open").removeClass("is-closed")}),this.isOpen=!0,this._trigger("open"))},close:function(){var e=this;this.isOpen&&this.selectedModel&&(this.$el.find(".group__item.is-selected").siblings().slideToggle(200,"swing",function(){e.$el.addClass("is-closed").removeClass("is-open")}),this.isOpen=!1,this._trigger("close"))},updateObscuredOptions:function(){this.$el.find(".group__item.is-selected").css("display","").siblings().css("display","none")},getSelectedOption:function(){return this.selectedModel?this.selectedModel.get("value"):null}});return l}),_wAMD.define("ui-framework/js/components/panel-switcher",["jquery","backbone","./base-view","./switcher"],function(e,t,i,n){function o(){return"_switcher-panel"+a++}var r=i.extend({className:"panel-switcher",switcher:null,panelsByValue:null,$head:null,$body:null,$modalEl:null,height:200,_initialize:function(){var t,i,o,r=this.queryOption("panels"),a={},l=[];for(t=0;t<r.length;t++)i=r[t],o=i instanceof s?i:new s(i),a[o.value]=o,o.panelSwitcher=this,l.push({value:o.value,text:o.title,textHtml:o.titleHtml,icon:o.icon,iconAfterText:o.iconAfterText,selected:o.selected});this.panelsByValue=a,this.switcher=new n({items:l});var c=this;this.switcher.on("option:changed",function(e){e?c.selectPanel(e):c.unselectPanel()}).on("open",e.proxy(this.showModal,this)).on("close",e.proxy(this.hideModal,this))},render:function(){var t;return this.$el.html('<div class="panel-switcher__head"></div><div class="panel-switcher__body"></div>'),this.$head=this.$el.find(".panel-switcher__head"),this.$body=this.$el.find(".panel-switcher__body"),this.$modalEl=e('<div class="panel-switcher__modal modal is-transitionable is-hidden" />'),this.$modalEl.on("click",e.proxy(this.closeSwitcher,this)),this.$body.append(this.$modalEl),this.switcher.render().$el.addClass("panel-switcher__switcher").appendTo(this.$head),this.setHeight(this.queryOption("height")),t=this.switcher.getSelectedOption(),t?this.selectPanel(t):this.unselectPanel(),this},destroy:function(){e.each(this.panelsByValue,function(e,t){t.destroy()}),this.switcher.destroy(),i.prototype.destroy.apply(this,arguments)},setHeight:function(e){this.$el.css("height",e)},closeSwitcher:function(){this.select(this.switcher.getSelectedOption())},select:function(e){this.switcher.select(e),this.switcher.close(),this.selectPanel(e)},selectPanel:function(e){this.clearCurrentPanel(),this.currentPanel=this.panelsByValue[e],this.currentPanel.render().$el.appendTo(this.$body),this.currentPanel._trigger("enter"),this.updateSize(),this.hideModal()},unselect:function(){this.unselectPanel(),this.switcher.unselect()},unselectPanel:function(){this.clearCurrentPanel(),this.updateSize(),this.showModal()},clearCurrentPanel:function(){this.currentPanel&&(this.currentPanel._trigger("before:leave"),this.currentPanel.destroy({preventContentViewDestroy:!0}),this.currentPanel._trigger("leave"),this.currentPanel=null)},hideModal:function(){this.$modalEl.addClass("is-out").removeClass("is-in")},showModal:function(){this.$modalEl.addClass("is-in").removeClass("is-hidden is-out")},_onBeforeDetach:function(){this.currentPanel&&this.currentPanel._trigger("before:leave")},_onDetach:function(){this.currentPanel&&this.currentPanel._trigger("leave")}}),s=r.Panel=i.extend({className:"panel-switcher__panel",selected:!1,value:null,title:null,icon:null,height:null,contentHtml:null,contentView:null,hasContentPadding:!1,constructor:function(e){e instanceof t.View&&(e={content:e}),e=e||{};var n=e.content;null==n&&(n=this.content),n instanceof t.View?this.contentView=n:"string"==typeof n&&(this.contentHtml=n),i.call(this,e)},_initialize:function(){var e=this.contentView;e&&(this.extendOptions(_.result(e,"switcherOptions",{})),e.panel=this),this.selected=this.queryOption("selected"),this.value=this.queryOption("value")||o(),this.title=this.queryOption("title"),this.icon=this.queryOption("icon")},render:function(){var e=this.contentView;return this.$el.toggleClass("panel-switcher__panel--padding",this.queryOption("hasContentPadding")),e?(e.render(),e.delegateEvents(),e.$el.appendTo(this.$el)):this.contentHtml&&this.$el.html(this.contentHtml),this.renderContent(this.$el),this.delegateEvents(),this},renderContent:function(e){},
destroy:function(e){var t=this.contentView;t&&(e&&e.preventContentViewDestroy||(t.destroy?t.destroy():t.close&&t.close()),t.remove(),t.el=null,t.$el=null,t._ensureElement()),i.prototype.destroy.call(this)},_trigger:function(t){var n=Array.prototype.slice.call(arguments,1),o=this.contentView,r="switcher";return e.when(o&&r?i.triggerOn(o,r+":"+t,n):null,i.prototype._trigger.apply(this,arguments))}}),a=0;return r}),_wAMD.define("editor-site-shared/build/linker/item-views/BaseItemView",["jquery","backbone-all","editor-site-shared/relay"],function(e,t,i){var n=t.Marionette.ItemView.extend({getValue:function(){var e=this;return e.model.get("value")},searchResults:_.debounce(function(t){var i=this,n=e(t.currentTarget).val()||"";i.filterSearchResults(n.toLowerCase().trim())},150),filterSearchResults:function(){throw"BaseItemViewError: failed to override BaseItemView.filterSearchResults in subclass"},unlink:function(){var e=this,t=e.panel.panelSwitcher.dialog;e.model.set("value",""),e.options.prepareSave.apply(t,[e.options,!0])},changeUnlinkState:function(){var e=!Boolean(this.ui.input.val());this.ui.unlink.attr("disabled",e)}});return n}),_wAMD.define("tpl!editor/build/linker/website-url.tpl",[],function(){return'<fieldset class="input-group el-options-url-group js-input-wrapper">\n	<legend class="input-group__header">{{#tl}}templates.editor.build.linker.website-url_1{{/tl}}</legend>\n	<div class="input-group__content">\n		<div class="input-group__row">\n			<div class="input-group__item form-control  form-control__el-options--input">\n				<input type="text" class="js-url-input" placeholder="{{placeholder}}" value="{{value}}">\n				<button class="btn--link action-btn__el-options js-unlink">{{#tl}}templates.editor.build.linker.website-url_4{{/tl}}</button>\n			</div>\n		</div>\n	</div>\n	<span class="input-group__invalid-text">{{#tl}}templates.editor.build.linker.website-url_2{{/tl}}</span>\n</fieldset>\n\n{{^disableNewWindow}}\n	<label class="form-control form-control--checkbox form-control--simple form-control--checkbox-new-window">\n		<input class=" js-window" type="checkbox" {{#newWindow}}checked{{/newWindow}}>\n		<span class="form-control__indicator form-control__indicator--new_window"></span>\n		{{#tl}}templates.editor.build.linker.website-url_3{{/tl}}\n	</label>\n{{/disableNewWindow}}\n'}),_wAMD.define("editor-site-shared/build/linker/item-views/UrlView",["jquery","mustache","underscore","editor-site-shared/build/linker/item-views/BaseItemView","util/general-utils","tpl!editor/build/linker/website-url.tpl"],function(e,t,i,n,o,r){var s=n.extend({template:t.compile(r),switcherOptions:{title:_W.utl("javascript.editor-site-shared.build.linker.item-views.UrlView_1"),icon:"pageexternal"},ui:{input:".js-url-input",inputWrapper:".js-input-wrapper",window:".js-window",unlink:".js-unlink"},events:{"focus @ui.input":"setGroupState","blur @ui.input":"urlBlurHandler","click @ui.window":"newWindowHandler","keyup @ui.input":"changeUnlinkState","click @ui.unlink":"unlink"},initialize:function(e){var t=this;t.options=e.options},onRender:function(){this.changeUnlinkState()},templateHelpers:function(){var e=this,t=e.model.get("url")||e.model.get("value");return e.model.has("newWindow")||t||e.model.set("newWindow",!0),e.model.set("value",t),{disableNewWindow:e.options.disableNewWindow,placeholder:"http://www.google.com",value:t,newWindow:e.model.get("newWindow")}},setGroupState:function(){this.ui.inputWrapper.addClass("is-focused")},getValue:function(){var e=this,t=e.model.get("value"),i=e.model.get("newWindow")===!0;return t?[t,i]:t},urlBlurHandler:function(t){var i=this,n=t?e(t.currentTarget).val().strip():i.ui.input.val().strip();if(t&&e(t.relatedTarget).is(i.ui.unlink))return!1;if(!n.match(/^[\w-]+:\/\//)&&""!==n){var r=n.indexOf(":")>-1,s=o.hasValidUrl(n);if(n!==n.replace(/<\/?[^>]+>/g,"")||!s)return this.ui.inputWrapper.addClass("is-invalid"),void this.ui.inputWrapper.find(".input-group__invalid-text").addClass("is-visible");r||""===n||(n="http://"+n),this.ui.inputWrapper.removeClass("is-invalid"),this.ui.inputWrapper.find(".input-group__invalid-text").removeClass("is-visible")}i.model.set({value:n,url:n})},newWindowHandler:function(t){var i=this,n=e(t.currentTarget);i.model.set("newWindow",n.prop("checked"))}});return s}),_wAMD.define("ui-framework/js/components/input-search",["jquery","backbone"],function(e,t){var i="form-control form-control--search",n=t.View.extend({loadingState:!1,events:{input:"handleInputEvent"},initialize:function(t){if(this.$formControl=this.$el.parent(),!this.$formControl.hasClass(i))throw new Error('Search Input must be wrapped by a DOM element with the CSS classes: "'+i+'"');this.$input=this.$formControl.find('input[type="search"]'),this.$searchIcon=e('<span class="form-control--search__search-icon icon">search</span>'),this.$clearBtn=e('<span class="form-control--search__clear icon">xsmall</span>'),this.$loadingIndicator=e('<div class="form-control--search__spinner spinner"> <div class="spinner__bg"></div> </div>'),this.on({"inputsearch:loading":this.loading,"inputsearch:loaded":this.loaded}),this.render(),this.attachEventHandlers()},render:function(){return this.$formControl.prepend(this.$searchIcon,this.$clearBtn,this.$loadingIndicator),this},attachEventHandlers:function(){this.$clearBtn.on("click",this.clearInput.bind(this))},handleInputEvent:function(){this.toggleClearButton()},toggleClearButton:function(){var e=this.$input.val().length>0&&!this.loadingState;this.$clearBtn.toggleClass("is-visible",e)},clearInput:function(){this.loadingState||(this.$input.val("").focus().trigger("change").trigger("input").trigger("keyup"),this.toggleClearButton(),this.trigger("inputsearch:clear"))},loading:function(){this.loadingState=!0,this.$loadingIndicator.addClass("is-loading"),this.toggleClearButton()},loaded:function(){this.loadingState=!1,this.$loadingIndicator.removeClass("is-loading"),this.toggleClearButton()}}),o={initialize:function(e){return new n({el:e[0]})}};return o}),_wAMD.define("tpl!editor/build/linker/standard-page.tpl",[],function(){return'<fieldset class="input-group el-options-url-group {{^currentPageTitle}}is-hidden{{/currentPageTitle}}">\n	<div class="input-group__content">\n		<div class="input-group__row">\n			<div class="input-group__item form-control form-control__el-options--input">\n				<input type="text" class="current-page-input" value="{{currentPageTitle}}" readonly="readonly">\n				<button class="btn--link action-btn__el-options js-unlink">{{#tl}}templates.editor.build.linker.standard-page_2{{/tl}}</button>\n			</div>\n		</div>\n	</div>\n</fieldset>\n\n{{#selectorTitle}}<span class="form-control__label-text">{{selectorTitle}}</span>{{/selectorTitle}}\n<div class="page-selector {{#currentPageTitle}}is-hidden{{/currentPageTitle}}">\n	{{^disableSearch}}\n	<div class="form-control form-control--search">\n		<input type="search" placeholder="{{#tl}}templates.editor.build.linker.standard-page_3{{/tl}}" class="js-search">\n	</div>\n	{{/disableSearch}}\n	<ul class="group group--flush group--search">\n		<div class="pages-wrapper">\n		</div>\n	</ul>\n</div>\n{{^disableNewWindow}}\n	<label class="form-control form-control--checkbox form-control--simple form-control--checkbox-new-window">\n		<input class=" js-window" type="checkbox" {{#newWindow}}checked{{/newWindow}}>\n		<span class="form-control__indicator form-control__indicator--new_window"></span>\n		{{#tl}}templates.editor.build.linker.standard-page_1{{/tl}}\n	</label>\n{{/disableNewWindow}}\n'}),_wAMD.define("tpl!editor/build/linker/search-results/pages.tpl",[],function(){return'{{#pages}}\n	<li class="{{#hiddenPage}}is-hidden{{/hiddenPage}} group__item js-page" style="margin-left:{{margin}}px">\n		<label class="form-control form-control--radio-check form-control--borderless {{#disabled}}is-disabled{{/disabled}}">\n			<input type="{{#multi}}checkbox{{/multi}}{{^multi}}radio{{/multi}}" name="check" {{#checked}}checked{{/checked}} {{#disabled}}disabled{{/disabled}} value="{{id}}">\n			<span class="form-control__indicator"></span>\n			<span class="js-name">{{title}}</span>\n			{{#thisPage}}<span class="page-selector__this-page">{{#tl}}templates.editor.build.linker.search-results.this-page{{/tl}}</span>{{/thisPage}}\n		</label>\n	</li>\n{{/pages}}'}),_wAMD.define("editor-site-shared/build/linker/item-views/StandardPageView",["jquery","mustache","underscore","editor-site-shared/build/linker/item-views/BaseItemView","ui-framework/js/components/input-search","editor/page-manager/pages","tpl!editor/build/linker/standard-page.tpl","tpl!editor/build/linker/search-results/pages.tpl"],function(e,t,i,n,o,r,s,a){var l=n.extend({getTemplate:function(){return t.compile(s)},PAGE_LINK_PREPEND:"http://weebly-link/",switcherOptions:{title:_W.utl("javascript.editor-site-shared.build.linker.item-views.StandardPageView_1"),icon:"pagepage"},ui:{searchInput:".js-search",pagesWrapper:".pages-wrapper",currentPageWrapper:".el-options-url-group",pageSelector:".page-selector",currentPageInput:".current-page-input",unlink:".js-unlink"},events:{"click .js-page":"pageClickHandler","click .js-window":"newWindowHandler","keydown @ui.searchInput":"searchResults","click @ui.currentPageWrapper":"toggleViews","click @ui.unlink":"unlink"},PAGE_INDENTATION_AMOUNT:20,initialize:function(e){this.options=e.options,this.options.selection?this.selectionData=i.clone(this.options.selection):this.selectionData=this.options.multiSelect?[]:{},this.options.disablePageKinds||(this.options.disablePageKinds=[]),this.options.disablePageLayouts||(this.options.disablePageLayouts=[])},templateHelpers:function(){var e,t=this,i=t.model&&t.model.get("pageID");if(i){var n=r.getPage(i);n&&(e=n.get("title"))}return{disableNewWindow:t.options.disableNewWindow,disableSearch:t.options.disableSearch,currentPageTitle:e,selectorTitle:t.options.selectorTitle}},onRender:function(){var e=this,t=r.toJSON();e.options.disableSearch||(e.search=o.initialize(e.ui.searchInput),e.search.on("inputsearch:clear",function(){e.ui.searchInput.keydown()})),t&&t.length>0&&(e.model&&e.model.unset("pages"),e.pages=null,e.parsePages(t,0)),e.renderPages(),e.delegateEvents()},parsePages:function(e,t){var n=this,o=n.model&&n.model.get("pageID"),r=n.options.thisPageID;i.each(e,function(e){if("member-login"!==e.kind&&"member-logout"!==e.kind){if(o===e.id&&(e.checked=!0),r===e.id){if(n.options.hideThisPage)return;e.thisPage=!0,e.disabled=n.options.disableThisPage}if((-1!==n.options.disablePageKinds.indexOf(e.kind)||-1!==n.options.disablePageKinds.indexOf(e.page_kind)||-1!==n.options.disablePageLayouts.indexOf(e.layout))&&(e.disabled=!0),n.options.enablePageLayouts&&-1===n.options.enablePageLayouts.indexOf(e.layout)&&(e.disabled=!0),n.options.disableContributors){var s=window.Weebly.Permissions;!s.isContributor||s.allow_pages||i.contains(s.allowed_pages,e.id)||(e.disabled=!0)}e.margin=t*n.PAGE_INDENTATION_AMOUNT,n.pages?n.pages.push(e):n.pages=[e],e.children&&n.parsePages(e.children,t+1)}})},renderPages:function(){var e,i=this;i.pages&&(i.ui.pagesWrapper.empty(),e=t.render(a,{pages:i.pages,multi:this.options.multiSelect}),i.ui.pagesWrapper.append(e)),i.selectionData&&(this.options.multiSelect?this.selectionData.forEach(function(e){this.setPageSelected(this.$("input[value="+e+"]"))}.bind(this)):i.selectionData.pageID&&i.setPageSelected(i.$("input[value="+i.selectionData.pageID+"]")))},pageClickHandler:function(t){var i=this,n=e(t.currentTarget),o=n.find("input"),r=o.val(),s=n.find(".js-name").text();t.preventDefault(),o.is(":disabled")&&(r=null),this.options.multiSelect?o.is(":checked")?(this.selectionData.splice(this.selectionData.indexOf(r),1),i.setPageDeselected(o)):(this.selectionData.push(r),i.setPageSelected(o)):(i.selectionData.value=i.PAGE_LINK_PREPEND+r,i.selectionData.pageID=r,i.setPageSelected(o)),i.model?this.options.multiSelect?i.model.set("pages",this.selectionData):(i.model.get("pageID")!==r&&(i.model.set(i.selectionData),i.ui.currentPageInput.val(s)),i.toggleViews()):i.trigger("page:selected",i.selectionData)},setPageSelected:function(e){e.is(":disabled")||e.prop("checked",!0)},setPageDeselected:function(e){e.is(":disabled")||e.prop("checked",!1)},newWindowHandler:function(t){var i=this,n=e(t.currentTarget),o=i.$el.find(".js-page input:checked").val();o&&(i.selectionData.value=i.PAGE_LINK_PREPEND+o,i.model&&i.model.set("value",i.selectionData.value)),i.selectionData.newWindow=n.prop("checked"),i.model&&i.model.set("newWindow",i.selectionData.newWindow)},getValue:function(){if(this.options.multiSelect)return this.selectionData;var e=this,t=e.selectionData.value,i=e.selectionData.newWindow===!0;return t?[t,i]:t},filterSearchResults:function(e){var t=this;e=e.toLowerCase(),i.each(t.pages,function(t){""===e||t.title.toLowerCase().indexOf(e)>-1?t.hiddenPage=!1:t.hiddenPage=!0}),t.ui.pagesWrapper.empty(),t.renderPages()},toggleViews:function(){var e=this,t=e.ui.currentPageWrapper.is(":visible");t?(e.ui.currentPageWrapper.hide(),e.ui.pageSelector.slideToggle(200,"swing")):e.ui.pageSelector.slideToggle(200,"swing",function(){e.ui.currentPageWrapper.show()})}});return l}),_wAMD.define("components/pagination/PaginatedRPCCollection",["jquery","underscore","backbone","backbone-pageable","backbone-relational"],function(e,t,i,n){var o=window,r=n,s=r.prototype,a={};i.Relational.store.addModelScope(a);var l=r.extend({_class:this.className,initialize:function(i,n){n=e.extend({view:"list"},n);var o=this.fetchOptions=t.pick(n,"filter","sort","searchText","view");return this.constructor.addSiteFilter(o),s.initialize.apply(this,arguments)},fetch:function(t){return t=e.extend({},this.fetchOptions,t),s.fetch.call(this,t)},setSearchText:function(e){this.fetchOptions.searchText=e||null},state:{pageSize:25},queryParams:{pageSize:"limit",totalRecords:"total"},parseState:function(e){return{totalRecords:e.total}},parseRecords:function(e){return e.data},parseLinks:function(e){var t=this.state,i=t.currentPage,n=t.pageSize*i;return{first:"#1",prev:i>1?"#"+(i-1):!1,next:n<e.total?"#"+(i+1):!1}}},{addSiteFilter:function(e){e.filter||(e.filter=[]),this.prototype.userKey&&!t.findWhere(e.filter,{property:this.prototype.userKey})&&e.filter.push({property:this.prototype.userKey,value:e[this.prototype.userKey]||this.prototype.userValue||o[this.prototype.userKey]}),this.prototype.siteKey&&!t.findWhere(e.filter,{property:this.prototype.siteKey})&&e.filter.push({property:this.prototype.siteKey,value:o.com_currentSite})},count:function(t){t=e.extend({},t),this.addSiteFilter(t);this.prototype.useServerGeneratedDefaultsFor;return this.prototype.rpc.count(t)}});return l.extendBase=function(e){return r.extend.call(this,e)},l.extend=function(e,i,n){var o=r.extend.call(this,t.extend(e,n?n[e.useServerGeneratedDefaultsFor]:{}),i),s=e._class;return s&&(s=s.split("."),s=s[s.length-1],a[s+"Collection"]=o),o},l}),Weebly.Commerce=Weebly.Commerce||{},Weebly.Commerce.Editor=Weebly.Commerce.Editor||{},Weebly.Commerce.Site=Weebly.Commerce.Site||{},"undefined"!=typeof initCommerceModels&&initCommerceModels(),"undefined"!=typeof initEditorRPC&&initEditorRPC(),_wAMD.define("editor/commerce-init",["util/backbone-rpc"],function(){}),_wAMD.define("commerce/editor/collection/_baseCommerceCollection",["components/pagination/PaginatedRPCCollection","editor/commerce-init"],function(e){var t=e.extendBase({className:"Commerce.Collection._baseCommerceCollection",userKey:"owner_id",userValue:com_userID,siteKey:"site_id"});return t.extend=function(t,i){return e.extend.call(this,t,i,window.Weebly.Commerce.BackboneCollectionData)},t}),_wAMD.define("components/pagination/PaginatedRPCModel",["jquery","underscore","backbone-all","components/pagination/PaginatedRPCCollection"],function(e,t,i,n){var o=(window,i.RelationalModel),r=o.prototype,s=i.RelationalModel.extend({_class:this.className,baseCollection:n,baseModelDefaults:{},unbatchRelatedModels:[],pageDirtyCheck:function(){return!0},fetch:function(e){return e=t.defaults(e||{},{limit:1,single:!0,view:"detail"}),r.fetch.call(this,e)},parse:function(e){return e&&e.data?e.data:e},sync:function(e,t){var i=e+":"+this.useServerGeneratedDefaultsFor.toLowerCase();s.vent.trigger(i,t),"read"!=e&&this.pageDirtyCheck()&&(this.syncEventAggregator.isPageDirty=!0);var n=arguments,o=t.useServerGeneratedDefaultsFor.toLowerCase(),a=r.sync.apply(this,arguments);return this.syncEventAggregator&&this.syncEventAggregator.vent.trigger(o+":"+e,a,n),a},clone:function(){var e=r.clone.apply(this,arguments);return e.set("updated_date",null),e.set("created_date",null),e},cloneDeep:function(){return this.clone()},cloneDeepCollection:function(e,t,i){var n=[];this.get(e).each(function(e){n.push(e.cloneDeep())}),i||(i=this.baseCollection),t.set(e,new i(n))},fetchChildRelation:function(e){var t,i=this,n=this.getRelation(e),o=this.get(e),r=n.options.foreignKey,s=(this.get(l),[]),a=r.length;for(t=0;a>t;t++){var l=r[t];s.push({property:l,value:i.get(l)})}return o.fetchOptions.filter=s,o.fetch()},getRelated:function(i,n,o,r,s){var a=this,l=a.get(i),c=o.prototype.model,d=new o,u=function(e){var t={};return t[n]=e,c.findOrCreate(t)};r&&(d.comparator=function(e){return t.indexOf(a.get(r),e.get(n))},d.listenTo(a,"change:"+r,function(){d.sort()}));var h=!0;a.on("change:"+i,function(e,n){if(!h){h=!0;var o=n||[],r=a.previous(i)||[],s=t.difference(o,r),l=t.difference(r,o);t.each(s,function(e){d.add(u(e))}),t.each(l,function(e){d.remove(u(e))}),h=!1}}),a.listenTo(d,"add remove destroy reset",function(){h||(h=!0,a.set(i,d.pluck(n)),h=!1)}),t.each(l,function(e){d.add(u(e))});var p=e.Deferred();if(t.contains(a.unbatchRelatedModels,c.prototype._class))p.resolve(d),h=!1;else{var f=50;s=s||"detail";var m=function(o){if(o>d.length){h=!1;var r=a.get(i),l=d.pluck(n);(t.difference(r,l).length||t.difference(l,r).length)&&a.set(i,l),p.resolve(d)}else{var c=d.slice(o,o+f),u=t.map(c,function(e){return e.fetch({view:s}).done(function(t){t.success||d.remove(e)})});e.when.apply(e,u).done(function(){p.notify((o+u.length)/d.length),m(o+f)})}};m(0)}return p.promise()}},{vent:t.extend({},i.Events),findOrCreate:function(e,i){return e=t.defaults(e||{},t.pick(this.prototype.defaults,this.prototype.userKey,this.prototype.siteKey||null)),o.findOrCreate.call(this,e,i)},getID:function(e){var i=this.prototype,n=i.idAttribute,o=i.useServerGeneratedDefaultsFor.toLowerCase();return t.isObject(e)?e._class?e.get(n):e[n]?e[n]:e[o]?e[o].get(n):!1:e}});return s.setSyncEventAggregator=function(e){s.prototype.syncEventAggregator=e},s.extendBase=function(e){return i.RelationalModel.extend.call(this,e)},s.extend=function(n,o,r,s){var a=r?r[n.useServerGeneratedDefaultsFor]:{},l=a&&a.rpc?{rpc:a.rpc}:{},c=i.RelationalModel.extend.call(this,e.extend(!0,l,n,a),o);n.validation&&e.extend(!0,c.prototype.validation,n.validation);var d=this.prototype.baseModelDefaults;return s&&this.prototype.syncEventAggregator&&void 0!==this.prototype.syncEventAggregator[s]&&(d[s]=this.prototype.syncEventAggregator[s]),c.prototype.defaults=c.prototype.defaults||{},t.extend(c.prototype.defaults,d),c.prototype.validation&&t.each(c.prototype.validation,function(e,i){if(e&&e.requiredIf){var n=e.requiredIf;delete e.requiredIf;var o=e.required;e.required=function(){return o||t.result(this,n)}}}),c},s}),_wAMD.define("commerce/editor/model/_baseCommerceModel",["editor/app","components/pagination/PaginatedRPCModel","commerce/editor/collection/_baseCommerceCollection"],function(e,t,i){var n=t.extendBase({className:"Commerce.Model._baseCommerceModel",unbatchRelatedModels:["Commerce.Model.Category"],baseCollection:i,userKey:"owner_id",siteKey:"site_id",baseModelDefaults:{owner_id:com_userID,site_id:com_currentSite},pageDirtyCheck:function(){return e.isStorePanelOpen},getGetterForAttribute:function(e){var t=e.replace(/[\W_].?/g,function(e){return e[1]?e[1].toUpperCase():""});return"get"+t[0].toUpperCase()+t.slice(1)},get:function(e){var i=t.prototype.get.apply(this,arguments),n=this.getGetterForAttribute(e);return this[n]&&(i=this[n](i)),i},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return Object.keys(e).forEach(function(t){var i=this.getGetterForAttribute(t);if(this[i]){var n=e[t];e[t]=this[i](n)}},this),e}});return n.extend=function(e,i){return t.extend.call(this,e,i,window.Weebly.Commerce.BackboneModelData,"owner_id")},e.commerce?n.setSyncEventAggregator(e.commerce):e.once("commerce:ready",function(){n.setSyncEventAggregator(e.commerce)}),n}),_wAMD.define("util/ui/ImageAspectRatio",["jquery","mustache","backbone-all"],function(e,t,i){function n(t,n,l,u,h){var p,f,m,g=Math.floor(16777216*(1+Math.random())).toString(16).substring(1);if(h=h||n.regenerate&&n.regenerate.bind(n),"string"==typeof n)f=a(n.replace("{size}",l)),m=o(t,f,l,u,h);else if(n instanceof i.Model)l=n.getMaxAvailableWidth(l),f=a(n.uri(l)),p=Math.round(n.get("width")/n.get("height")*1e4)/1e4;else{if(n.hasOwnProperty("width")){var v=parseInt(n.width);l>v&&(l=v)}f=a(n.url.replace("{size}",l)),p=Math.round(n.width/n.height*1e4)/1e4}if(p){var b=r(p,u),y=0;if(c())m=d(t,f);else{var w=s(t,b),_=e("<div>").append(w);_.find("img").attr("id",g).error(function(){y++,10==y&&h&&h(),e("#"+g).attr("src","//"+ASSETS_BASE+"/images/blank.gif").addClass("image-waiting"),60>y&&setTimeout(function(){_.find("img").attr("src",f)},2500)}).load(function(){e("#"+g).attr("src",f).removeClass("image-waiting")}).attr("src",f),m=_.html()}}return m}function o(t,i,n,o,s){var a=Math.floor(16777216*(1+Math.random())).toString(16).substring(1),c=i.replace("{size}",n),d=new Image;return e(d).on("load",function(){var e=Math.round(this.width/this.height*1e4)/1e4,i=r(e,o);l(t,i,c,s,a)}),d.src=i,'<div id="'+a+'" class="aspectratio-image-loading"></div>'}function r(e,t){return e>t?(imagePercentWidth=(e/t*100).toFixed(2),imagePercentTop=0,imagePercentLeft=-((e/t-1)/2*100).toFixed(2)):(imagePercentWidth=100,imagePercentTop=-((t/e-1)/2*100).toFixed(2),imagePercentLeft=0),{width:imagePercentWidth,top:imagePercentTop,left:imagePercentLeft}}function s(e,t){return h({classPrefix:e,imagePercentWidth:t.width,imagePercentTop:t.top,imagePercentLeft:t.left})}function a(e){var t=e,i="/"==e.charAt(0),n=e.indexOf("://")>=0;return i||n||(t="//"+e),t}function l(t,i,n,o,r,a){var u=e("#"+r),h=0;if(u.length>0)if(u.removeClass("aspectratio-image-loading"),c()){var p=d(t,n);u.html(p)}else{var p=s(t,i);u.html(p),u.find("img").error(function(){h++,o&&o(),$html.find("img").hide(),60>h&&setTimeout(function(){$html.find("img").attr("src",n+"?"+Date.now()).show()},2500)}).attr("src",n)}else setTimeout(function(){5>a&&(a=(a||0)+1,l(t,i,n,o,r,a))},50)}function c(){return!1}function d(e,t){var i='<span class="wsite-css-sizer '+e+'-sizer"></span>';return'<div class="wsite-css-aspect '+e+'-css-aspect" style="background-image: url('+t+');">'+i+"</div>"}var u='<div class="{{classPrefix}}-image-container wsite-imageaspectratio-image-container">';u+='  <div class="{{classPrefix}}-image-height   wsite-imageaspectratio-image-height"></div>',u+='    <div class="{{classPrefix}}-image-wrap     wsite-imageaspectratio-image-wrap">',u+='    <img class="{{classPrefix}}-image         wsite-imageaspectratio-image" style="width:{{imagePercentWidth}}%;top:{{imagePercentTop}}%;left:{{imagePercentLeft}}%" />',u+="  </div>",u+="</div>";var h=t.compile(u);return n}),_wAMD.define("commerce/editor/model/CategoryImage",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"CategoryImage",getMaxAvailableWidth:function(e){return e=parseInt(e,10)||this.get("width"),this.get("width")<e?this.get("width"):e},uri:function(e){e=e?e:"{size}";var t=this.attributes;if(!t.site_category_image_id)return t.uri;"{size}"!=e&&e>parseInt(this.get("width"))&&(e=parseInt(this.get("width")));var i="s"+t.site_id+"_c"+t.site_category_id+"_i"+t.site_category_image_id+"_w"+e+"."+t.format;return"/uploads/"+editorApp.commerce.storefrontSettings.get("upload_uid_location")+"/"+i},regenerate:function(){var e=this;e.rpc.resize.call(e,e.get("owner_id"),e.get("site_id"),e.get("site_category_id"),e.get("site_category_image_id"))}})}),_wAMD.define("commerce/editor/collection/CategoryImage",["underscore","./_baseCommerceCollection","../model/CategoryImage"],function(e,t,i){var n=t;n.prototype;return n.extend({model:i,useServerGeneratedDefaultsFor:"CategoryImage"},{})}),_wAMD.define("commerce/editor/model/Category",["jquery","analytics/Tracking","util/ui/ImageAspectRatio","./_baseCommerceModel","../collection/CategoryImage"],function(e,t,i,n){var o=n,r=o.prototype,s=o.extend({useServerGeneratedDefaultsFor:"Category",thumbnail:function(e){var t,n;return t=editorApp.commerce.storefrontSettings.getRatioAsNumber("category_image_ratio"),n=this.getFirstImage()||"//"+ASSETS_BASE+"/images/util/blank-category-w{size}.png",e=e||80,i("entity-list",n,e,t)},initialize:function(){this.on("destroy",this.onDestroy,this)},onDestroy:function(){t.trackEvent("commerce.category","delete_category")},getImage:function(e){if(e)var t=this.get("images").select(function(t){return t.get("site_category_image_id")==e});else var t=this.getOrderedImages();return t.length?t[0]:null},getImageUrl:function(e,t){var i,n;return t=t||!1,e=e||80,i=this.getImage(t),i?(e=i.getMaxAvailableWidth(e),n=i.uri()):n="//"+ASSETS_BASE+"/images/util/blank-category-w{size}.png",n=n.replace("{size}",e)},getFirstImage:function(){var e=this.getOrderedImages();return e[0]||null},getOrderedImages:function(){var e=this.get("images"),t=this.get("image_order")||[],i=[],n=[];return e.each(function(e){var o=e.get("site_category_image_id"),r=-1;t.each(function(t,s){t==o&&(r=s),-1==r?n.push(e):i[r]=e})}),i.concat(n)},get:function(e){return"products"==e?this.getRelated("product_ids","site_product_id",require("commerce/editor/collection/Product"),"preferred_order_product_ids","list"):"coupons"==e?this.getRelated("coupon_ids","site_coupon_id",require("commerce/editor/collection/Coupon")):r.get.apply(this,arguments)},getActions:function(){return["delete"]}});return s}),_wAMD.define("commerce/editor/collection/Category",["jquery","editor-site-shared/relay","editor/app","./_baseCommerceCollection","../model/_baseCommerceModel","../model/Category"],function(e,t,i,n,o,r){var s=n,a=s.prototype,l=s.extend({model:r,useServerGeneratedDefaultsFor:"Category",fetch:function(e){e=e||{},e.force&&delete l._fetchPromise;var t=this,i=l._fetchPromise;return i?i.done(function(){t.reset(c.models)}):(i=l._fetchPromise=a.fetch.apply(t,arguments),i.done(function(){t.each(function(e){e.createSavepoint()})}),i.done(function(e){c.reset(e.data)}).fail(function(){delete l._fetchPromise})),i},state:{pageSize:null},setSearchText:function(e){if(e)this.searchQuery?this.searchQuery.value="%"+e+"%":(this.blockStorefront={property:"site_category_id",comparison:"!=",value:i.commerce.storefrontSettings.get("storefront_category_id")},this.fetchOptions.filter.push(this.blockStorefront),this.searchQuery={property:"name",comparison:"LIKE",value:"%"+e+"%"},this.fetchOptions.filter.push(this.searchQuery));else{if(this.searchQuery){var t=this.fetchOptions.filter.indexOf(this.searchQuery);this.fetchOptions.filter.splice(t,1),this.searchQuery=null}if(this.blockStorefront){var t=this.fetchOptions.filter.indexOf(this.blockStorefront);this.fetchOptions.filter.splice(t,1),this.blockStorefront=null}}}},{count:function(){var t=e.Deferred(),i=new l;return i.fetch().done(function(){t.resolve(i.length)}),t.promise()}});t.reqres.setHandlers({"editor:commerce:categories:fetch":function(e){var t=new l;return t.fetch(e).then(function(){return t.toJSON()})}}),t.commands.setHandlers({"editor:commerce:categories:force":function(e){delete l._fetchPromise}});var c=new l;return o.vent.on({"create:category":function(e){c.add(e)},"delete:category":function(e){c.remove(e)}}),l}),_wAMD.define("commerce/editor/store/setting/tax/DefaultTaxRates",["underscore","jquery","w-global"],function(e,t,i){var n={setup:function(){this.defaults={}},getUnitedStatesDefaults:function(e){return this.defaults.unitedStates&&Boolean(e)===!1?t.when(this.defaults.unitedStates):i.Commerce.RPC.TaxRate.getAllDefaultUnitedStatesTaxRates().then(function(e){return this.defaults.unitedStates=e.data,e.data}.bind(this))},getCanadaDefaults:function(e){return this.defaults.canada&&Boolean(e)===!1?t.when(this.defaults.canada):i.Commerce.RPC.TaxRate.getAllDefaultCanadianProvinceTaxRates().then(function(e){return this.defaults.canada=e.data,e.data}.bind(this))},getStateDefault:function(e,t){return this.getUnitedStatesDefaults(t).then(function(t){return t.unitedStates.subregions[e]})},getProvinceDefault:function(e,t){return this.getCanadaDefaults(t).then(function(t){return t.canada.subregions[e]})},fetchUnitedStatesDefaults:function(){return this.getUnitedStatesDefaults(!0)},fetchStateDefault:function(e){return this.getStateDefault(e,!0)},fetchCanadaDefaults:function(){return this.getCanadaDefaults(!0)},fetchProvinceDefault:function(e){return this.getProvinceDefault(e,!0)}};return n.setup(),n}),_wAMD.define("json",["text"],function(text){function cacheBust(e){return e=e.replace(CACHE_BUST_FLAG,""),e+=e.indexOf("?")<0?"?":"&",e+CACHE_BUST_QUERY_PARAM+"="+Math.round(2147483647*Math.random())}var CACHE_BUST_QUERY_PARAM="bust",CACHE_BUST_FLAG="!bust",jsonParse="undefined"!=typeof JSON&&"function"==typeof JSON.parse?JSON.parse:function(val){return eval("("+val+")")},buildMap={};return{load:function(e,t,i,n){!n.isBuild||n.inlineJSON!==!1&&-1===e.indexOf(CACHE_BUST_QUERY_PARAM+"=")?text.get(t.toUrl(e),function(t){if(n.isBuild)buildMap[e]=t,i(t);else{var o=jsonParse(t);i(o)}},i.error,{accept:"application/json"}):i(null)},normalize:function(e,t){return-1===e.indexOf(CACHE_BUST_FLAG)?e:cacheBust(e)},write:function(e,t,i){if(t in buildMap){var n=buildMap[t];i('define("'+e+"!"+t+'", function(){ return '+n+";});\n")}}}}),_wAMD.define("json!definitions/countries.json",function(){return[{name:"json.countries.USA",cca2:"US",cca3:"USA",currency:"USD,USN,USS",region:"json.regions.northamerica",shippingRegion:"NORTHAMERICA"},{name:"json.countries.CAN",cca2:"CA",cca3:"CAN",currency:"CAD",region:"json.regions.northamerica",shippingRegion:"NORTHAMERICA"},{name:"json.countries.GBR",cca2:"GB",cca3:"GBR",currency:"GBP",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.AFG",cca2:"AF",cca3:"AFG",currency:"AFN",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.ALA",cca2:"AX",cca3:"ALA",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.ALB",cca2:"AL",cca3:"ALB",currency:"ALL",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.DZA",cca2:"DZ",cca3:"DZA",currency:"DZD",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.ASM",cca2:"AS",cca3:"ASM",currency:"USD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.AND",cca2:"AD",cca3:"AND",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.AGO",cca2:"AO",cca3:"AGO",currency:"AOA",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.AIA",cca2:"AI",cca3:"AIA",currency:"XCD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.ATA",exclude:!0,cca2:"AQ",cca3:"ATA",shippingRegion:"ANTARCTICA",region:"json.regions.antarctica"},{name:"json.countries.ATG",cca2:"AG",cca3:"ATG",currency:"XCD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.ARG",cca2:"AR",cca3:"ARG",currency:"ARS",region:"json.regions.southamerica",shippingRegion:"SOUTHAMERICA"},{name:"json.countries.ARM",cca2:"AM",cca3:"ARM",currency:"AMD",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.ABW",cca2:"AW",cca3:"ABW",currency:"AWG",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.AUS",cca2:"AU",cca3:"AUS",currency:"AUD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.AUT",cca2:"AT",cca3:"AUT",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.AZE",
cca2:"AZ",cca3:"AZE",currency:"AZN",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.BHS",cca2:"BS",cca3:"BHS",currency:"BSD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.BHR",cca2:"BH",cca3:"BHR",currency:"BHD",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.BGD",cca2:"BD",cca3:"BGD",currency:"BDT",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.BRB",cca2:"BB",cca3:"BRB",currency:"BBD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.BLR",cca2:"BY",cca3:"BLR",currency:"BYR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.BEL",cca2:"BE",cca3:"BEL",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.BLZ",cca2:"BZ",cca3:"BLZ",currency:"BZD",region:"json.regions.centralamerica",shippingRegion:"CENTRALAMERICA"},{name:"json.countries.BEN",cca2:"BJ",cca3:"BEN",currency:"XOF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.BMU",cca2:"BM",cca3:"BMU",currency:"BMD",region:"json.regions.northamerica",shippingRegion:"NORTHAMERICA"},{name:"json.countries.BTN",cca2:"BT",cca3:"BTN",currency:"BTN,INR",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.BOL",cca2:"BO",cca3:"BOL",currency:"BOB,BOV",region:"json.regions.southamerica",shippingRegion:"SOUTHAMERICA"},{name:"json.countries.BES",exclude:!0,cca2:"BQ",cca3:"BES",currency:"USD",shippingRegion:"CARIBBEAN",region:"json.regions.caribbean"},{name:"json.countries.BIH",cca2:"BA",cca3:"BIH",currency:"BAM",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.BWA",cca2:"BW",cca3:"BWA",currency:"BWP",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.BRA",cca2:"BR",cca3:"BRA",currency:"BRL",region:"json.regions.southamerica",shippingRegion:"SOUTHAMERICA"},{name:"json.countries.IOT",cca2:"IO",cca3:"IOT",currency:"USD",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.BRN",cca2:"BN",cca3:"BRN",currency:"BND",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.BGR",cca2:"BG",cca3:"BGR",currency:"BGN",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.BFA",cca2:"BF",cca3:"BFA",currency:"XOF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.BDI",cca2:"BI",cca3:"BDI",currency:"BIF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.KHM",cca2:"KH",cca3:"KHM",currency:"KHR",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.CMR",cca2:"CM",cca3:"CMR",currency:"XAF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.CPV",cca2:"CV",cca3:"CPV",currency:"CVE",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.CYM",cca2:"KY",cca3:"CYM",currency:"KYD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.CAF",cca2:"CF",cca3:"CAF",currency:"XAF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.TCD",cca2:"TD",cca3:"TCD",currency:"XAF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.CHL",cca2:"CL",cca3:"CHL",currency:"CLF,CLP",region:"json.regions.southamerica",shippingRegion:"SOUTHAMERICA"},{name:"json.countries.CHN",cca2:"CN",cca3:"CHN",currency:"CNY",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.CXR",cca2:"CX",cca3:"CXR",currency:"AUD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.CCK",cca2:"CC",cca3:"CCK",currency:"AUD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.COL",cca2:"CO",cca3:"COL",currency:"COP,COU",region:"json.regions.southamerica",shippingRegion:"SOUTHAMERICA"},{name:"json.countries.COM",cca2:"KM",cca3:"COM",currency:"KMF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.COG",cca2:"CG",cca3:"COG",currency:"XAF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.COD",cca2:"CD",cca3:"COD",currency:"CDF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.COK",cca2:"CK",cca3:"COK",currency:"NZD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.CRI",cca2:"CR",cca3:"CRI",currency:"CRC",region:"json.regions.centralamerica",shippingRegion:"CENTRALAMERICA"},{name:"json.countries.CIV",cca2:"CI",cca3:"CIV",currency:"XOF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.HRV",cca2:"HR",cca3:"HRV",currency:"HRK",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.CUB",exclude:!0,cca2:"CU",cca3:"CUB",currency:"CUC,CUP",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.CUW",cca2:"CW",cca3:"CUW",currency:"ANG",shippingRegion:"CARIBBEAN",region:"json.regions.world"},{name:"json.countries.CYP",cca2:"CY",cca3:"CYP",currency:"EUR",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.CZE",cca2:"CZ",cca3:"CZE",currency:"CZK",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.DNK",cca2:"DK",cca3:"DNK",currency:"DKK",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.DJI",cca2:"DJ",cca3:"DJI",currency:"DJF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.DMA",cca2:"DM",cca3:"DMA",currency:"XCD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.DOM",cca2:"DO",cca3:"DOM",currency:"DOP",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.ECU",cca2:"EC",cca3:"ECU",currency:"USD",region:"json.regions.southamerica",shippingRegion:"SOUTHAMERICA"},{name:"json.countries.EGY",cca2:"EG",cca3:"EGY",currency:"EGP",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.SLV",cca2:"SV",cca3:"SLV",currency:"SVC,USD",region:"json.regions.centralamerica",shippingRegion:"CENTRALAMERICA"},{name:"json.countries.GNQ",cca2:"GQ",cca3:"GNQ",currency:"XAF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.ERI",cca2:"ER",cca3:"ERI",currency:"ERN",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.EST",cca2:"EE",cca3:"EST",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.ETH",cca2:"ET",cca3:"ETH",currency:"ETB",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.FLK",cca2:"FK",cca3:"FLK",currency:"FKP",region:"json.regions.southamerica",shippingRegion:"SOUTHAMERICA"},{name:"json.countries.FRO",cca2:"FO",cca3:"FRO",currency:"DKK",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.FJI",cca2:"FJ",cca3:"FJI",currency:"FJD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.FIN",cca2:"FI",cca3:"FIN",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.FRA",cca2:"FR",cca3:"FRA",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.GUF",exclude:!0,cca2:"GF",cca3:"GUF",currency:"EUR",region:"json.regions.southamerica",shippingRegion:"SOUTHAMERICA"},{name:"json.countries.PYF",cca2:"PF",cca3:"PYF",currency:"XPF",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.ATF",cca2:"TF",cca3:"ATF",currency:"EUR",shippingRegion:"ANTARCTICA",region:"json.regions.antarctica"},{name:"json.countries.GAB",cca2:"GA",cca3:"GAB",currency:"XAF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.GMB",cca2:"GM",cca3:"GMB",currency:"GMD",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.GEO",cca2:"GE",cca3:"GEO",currency:"GEL",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.DEU",cca2:"DE",cca3:"DEU",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.GHA",cca2:"GH",cca3:"GHA",currency:"GHS",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.GIB",cca2:"GI",cca3:"GIB",currency:"GIP",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.GRC",cca2:"GR",cca3:"GRC",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.GRL",cca2:"GL",cca3:"GRL",currency:"DKK",region:"json.regions.northamerica",shippingRegion:"NORTHAMERICA"},{name:"json.countries.GRD",cca2:"GD",cca3:"GRD",currency:"XCD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.GLP",cca2:"GP",cca3:"GLP",currency:"EUR",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.GUM",cca2:"GU",cca3:"GUM",currency:"USD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.GTM",cca2:"GT",cca3:"GTM",currency:"GTQ",region:"json.regions.centralamerica",shippingRegion:"CENTRALAMERICA"},{name:"json.countries.GGY",cca2:"GG",cca3:"GGY",currency:"GBP",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.GIN",cca2:"GN",cca3:"GIN",currency:"GNF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.GNB",cca2:"GW",cca3:"GNB",currency:"XOF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.GUY",cca2:"GY",cca3:"GUY",currency:"GYD",region:"json.regions.southamerica",shippingRegion:"SOUTHAMERICA"},{name:"json.countries.HTI",cca2:"HT",cca3:"HTI",currency:"HTG,USD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.HMD",exclude:!0,cca2:"HM",cca3:"HMD",currency:"AUD",shippingRegion:"ANTARCTICA",region:"json.regions.antarctica"},{name:"json.countries.VAT",cca2:"VA",cca3:"VAT",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.HND",cca2:"HN",cca3:"HND",currency:"HNL",region:"json.regions.centralamerica",shippingRegion:"CENTRALAMERICA"},{name:"json.countries.HKG",cca2:"HK",cca3:"HKG",currency:"HKD",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.HUN",cca2:"HU",cca3:"HUN",currency:"HUF",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.ISL",cca2:"IS",cca3:"ISL",currency:"ISK",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.IND",cca2:"IN",cca3:"IND",currency:"INR",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.IDN",cca2:"ID",cca3:"IDN",currency:"IDR",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.IRN",exclude:!0,cca2:"IR",cca3:"IRN",currency:"IRR",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.IRQ",cca2:"IQ",cca3:"IRQ",currency:"IQD",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.IRL",cca2:"IE",cca3:"IRL",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.IMN",cca2:"IM",cca3:"IMN",currency:"GBP",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.ISR",cca2:"IL",cca3:"ISR",currency:"ILS",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.ITA",cca2:"IT",cca3:"ITA",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.JAM",cca2:"JM",cca3:"JAM",currency:"JMD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.JPN",cca2:"JP",cca3:"JPN",currency:"JPY",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.JEY",cca2:"JE",cca3:"JEY",currency:"GBP",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.JOR",cca2:"JO",cca3:"JOR",currency:"JOD",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.KAZ",cca2:"KZ",cca3:"KAZ",currency:"KZT",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.KEN",cca2:"KE",cca3:"KEN",currency:"KES",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.KIR",cca2:"KI",cca3:"KIR",currency:"AUD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.KWT",cca2:"KW",cca3:"KWT",currency:"KWD",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.KGZ",cca2:"KG",cca3:"KGZ",currency:"KGS",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.LAO",cca2:"LA",cca3:"LAO",currency:"LAK",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.LVA",cca2:"LV",cca3:"LVA",currency:"LVL",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.LBN",cca2:"LB",cca3:"LBN",currency:"LBP",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.LSO",cca2:"LS",cca3:"LSO",currency:"LSL,ZAR",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.LBR",cca2:"LR",cca3:"LBR",currency:"LRD",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.LBY",cca2:"LY",cca3:"LBY",currency:"LYD",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.LIE",cca2:"LI",cca3:"LIE",currency:"CHF",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.LTU",cca2:"LT",cca3:"LTU",currency:"LTL",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.LUX",cca2:"LU",cca3:"LUX",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.MAC",cca2:"MO",cca3:"MAC",currency:"MOP",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.MKD",cca2:"MK",cca3:"MKD",currency:"MKD",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.MDG",cca2:"MG",cca3:"MDG",currency:"MGA",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.MWI",cca2:"MW",cca3:"MWI",currency:"MWK",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.MYS",cca2:"MY",cca3:"MYS",currency:"MYR",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.MDV",cca2:"MV",cca3:"MDV",currency:"MVR",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.MLI",cca2:"ML",cca3:"MLI",currency:"XOF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.MLT",cca2:"MT",cca3:"MLT",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.MHL",cca2:"MH",cca3:"MHL",currency:"USD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.MTQ",cca2:"MQ",cca3:"MTQ",currency:"EUR",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.MRT",cca2:"MR",cca3:"MRT",currency:"MRO",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.MUS",cca2:"MU",cca3:"MUS",currency:"MUR",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.MYT",cca2:"YT",cca3:"MYT",currency:"EUR",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.MEX",cca2:"MX",cca3:"MEX",currency:"MXN,MXV",region:"json.regions.northamerica",shippingRegion:"NORTHAMERICA"},{name:"json.countries.FSM",cca2:"FM",cca3:"FSM",currency:"USD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.MDA",cca2:"MD",cca3:"MDA",currency:"MDL",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.MCO",cca2:"MC",cca3:"MCO",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.MNG",cca2:"MN",cca3:"MNG",currency:"MNT",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.MNE",cca2:"ME",cca3:"MNE",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.MSR",cca2:"MS",cca3:"MSR",currency:"XCD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.MAR",cca2:"MA",cca3:"MAR",currency:"MAD",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.MOZ",cca2:"MZ",cca3:"MOZ",currency:"MZN",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.MMR",cca2:"MM",cca3:"MMR",currency:"MMK",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.NAM",cca2:"NA",cca3:"NAM",currency:"NAD,ZAR",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.NRU",cca2:"NR",cca3:"NRU",currency:"AUD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.NPL",cca2:"NP",cca3:"NPL",currency:"NPR",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.NLD",cca2:"NL",cca3:"NLD",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.NCL",cca2:"NC",cca3:"NCL",currency:"XPF",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.NZL",cca2:"NZ",cca3:"NZL",currency:"NZD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.NIC",cca2:"NI",cca3:"NIC",currency:"NIO",region:"json.regions.centralamerica",shippingRegion:"CENTRALAMERICA"},{name:"json.countries.NER",cca2:"NE",cca3:"NER",currency:"XOF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.NGA",cca2:"NG",cca3:"NGA",currency:"NGN",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.NIU",cca2:"NU",cca3:"NIU",currency:"NZD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.NFK",cca2:"NF",cca3:"NFK",currency:"AUD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.PRK",exclude:!0,cca2:"KP",cca3:"PRK",currency:"KPW",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.MNP",cca2:"MP",cca3:"MNP",currency:"USD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.NOR",cca2:"NO",cca3:"NOR",currency:"NOK",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.OMN",cca2:"OM",cca3:"OMN",currency:"OMR",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.PAK",cca2:"PK",cca3:"PAK",currency:"PKR",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.PLW",cca2:"PW",cca3:"PLW",currency:"USD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.PSE",exclude:!0,cca2:"PS",cca3:"PSE",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.PAN",cca2:"PA",cca3:"PAN",currency:"PAB,USD",region:"json.regions.centralamerica",shippingRegion:"CENTRALAMERICA"},{name:"json.countries.PNG",cca2:"PG",cca3:"PNG",currency:"PGK",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.PRY",cca2:"PY",cca3:"PRY",currency:"PYG",region:"json.regions.southamerica",shippingRegion:"SOUTHAMERICA"},{name:"json.countries.PER",cca2:"PE",cca3:"PER",currency:"PEN",region:"json.regions.southamerica",shippingRegion:"SOUTHAMERICA"},{name:"json.countries.PHL",cca2:"PH",cca3:"PHL",currency:"PHP",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.PCN",cca2:"PN",cca3:"PCN",currency:"NZD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.POL",cca2:"PL",cca3:"POL",currency:"PLN",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.PRT",cca2:"PT",cca3:"PRT",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.PRI",cca2:"PR",cca3:"PRI",currency:"USD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.QAT",cca2:"QA",cca3:"QAT",currency:"QAR",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.REU",cca2:"RE",cca3:"REU",currency:"EUR",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.ROU",cca2:"RO",cca3:"ROU",currency:"RON",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.RUS",cca2:"RU",cca3:"RUS",currency:"RUB",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.RWA",cca2:"RW",cca3:"RWA",currency:"RWF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.BLM",cca2:"BL",cca3:"BLM",currency:"EUR",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.SHN",cca2:"SH",cca3:"SHN",currency:"SHP",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.KNA",cca2:"KN",cca3:"KNA",currency:"XCD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.LCA",cca2:"LC",cca3:"LCA",currency:"XCD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.MAF",cca2:"MF",cca3:"MAF",currency:"EUR",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.SPM",cca2:"PM",cca3:"SPM",currency:"EUR",region:"json.regions.northamerica",shippingRegion:"NORTHAMERICA"},{name:"json.countries.VCT",cca2:"VC",cca3:"VCT",currency:"XCD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.WSM",cca2:"WS",cca3:"WSM",currency:"WST",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.SMR",cca2:"SM",cca3:"SMR",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.STP",cca2:"ST",cca3:"STP",currency:"STD",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.SAU",cca2:"SA",cca3:"SAU",currency:"SAR",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.SEN",cca2:"SN",cca3:"SEN",currency:"XOF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.SRB",cca2:"RS",cca3:"SRB",currency:"RSD",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.SYC",cca2:"SC",cca3:"SYC",currency:"SCR",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.SLE",cca2:"SL",cca3:"SLE",currency:"SLL",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.SGP",cca2:"SG",cca3:"SGP",currency:"SGD",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.SXM",cca2:"SX",cca3:"SXM",currency:"ANG",shippingRegion:"CARIBBEAN",region:"json.regions.caribbean"},{name:"json.countries.SVK",cca2:"SK",cca3:"SVK",currency:"XSU",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.SVN",cca2:"SI",cca3:"SVN",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.SLB",cca2:"SB",cca3:"SLB",currency:"EUR",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.SOM",cca2:"SO",cca3:"SOM",currency:"SBD",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.ZAF",cca2:"ZA",cca3:"ZAF",currency:"SOS",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.SGS",cca2:"GS",cca3:"SGS",currency:"ZAR",region:"json.regions.southamerica",shippingRegion:"SOUTHAMERICA"},{name:"json.countries.KOR",cca2:"KR",cca3:"KOR",currency:"KRW",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.SSD",cca2:"SS",cca3:"SSD",currency:"SSP",shippingRegion:"AFRICA",region:"json.regions.africa"},{name:"json.countries.ESP",cca2:"ES",cca3:"ESP",currency:"EUR",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.LKA",cca2:"LK",cca3:"LKA",currency:"LKR",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.SDN",exclude:!0,cca2:"SD",cca3:"SDN",currency:"SDG",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.SUR",cca2:"SR",cca3:"SUR",currency:"SRD",region:"json.regions.southamerica",shippingRegion:"SOUTHAMERICA"},{name:"json.countries.SJM",exclude:!0,cca2:"SJ",cca3:"SJM",currency:"NOK",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.SWZ",cca2:"SZ",cca3:"SWZ",currency:"SZL",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.SWE",cca2:"SE",cca3:"SWE",currency:"SEK",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.CHE",cca2:"CH",cca3:"CHE",currency:"CHE,CHF,CHW",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.SYR",exclude:!0,cca2:"SY",cca3:"SYR",currency:"SYP",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.TWN",cca2:"TW",cca3:"TWN",currency:"TWD",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.TJK",cca2:"TJ",cca3:"TJK",currency:"TJS",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.TZA",cca2:"TZ",cca3:"TZA",currency:"TZS",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.THA",cca2:"TH",cca3:"THA",currency:"THB",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.TLS",cca2:"TL",cca3:"TLS",currency:"USD",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.TGO",cca2:"TG",cca3:"TGO",currency:"XOF",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.TKL",cca2:"TK",cca3:"TKL",currency:"NZD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.TON",cca2:"TO",cca3:"TON",currency:"TOP",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.TTO",cca2:"TT",cca3:"TTO",currency:"TTD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.TUN",cca2:"TN",cca3:"TUN",currency:"TND",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.TUR",cca2:"TR",cca3:"TUR",currency:"TRY",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.TKM",cca2:"TM",cca3:"TKM",currency:"TMT",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.TCA",cca2:"TC",cca3:"TCA",currency:"USD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.TUV",cca2:"TV",cca3:"TUV",currency:"AUD",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.UGA",cca2:"UG",cca3:"UGA",currency:"UGX",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.UKR",cca2:"UA",cca3:"UKR",currency:"UAH",region:"json.regions.europe",shippingRegion:"EUROPE"},{name:"json.countries.ARE",cca2:"AE",cca3:"ARE",currency:"AED",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.UMI",exclude:!0,cca2:"UM",cca3:"UMI",currency:"USD",region:"json.regions.northamerica",shippingRegion:"NORTHAMERICA"},{name:"json.countries.URY",cca2:"UY",cca3:"URY",currency:"UYI,UYU",region:"json.regions.southamerica",shippingRegion:"SOUTHAMERICA"},{name:"json.countries.UZB",cca2:"UZ",cca3:"UZB",currency:"UZS",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.VUT",cca2:"VU",cca3:"VUT",currency:"VUV",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.VEN",cca2:"VE",cca3:"VEN",currency:"VEF",region:"json.regions.southamerica",shippingRegion:"SOUTHAMERICA"},{name:"json.countries.VNM",cca2:"VN",cca3:"VNM",currency:"VND",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.VGB",cca2:"VG",cca3:"VGB",currency:"USD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.VIR",cca2:"VI",cca3:"VIR",currency:"USD",region:"json.regions.caribbean",shippingRegion:"CARIBBEAN"},{name:"json.countries.WLF",exclude:!0,cca2:"WF",cca3:"WLF",currency:"XPF",region:"json.regions.oceania",shippingRegion:"OCEANIA"},{name:"json.countries.ESH",exclude:!0,cca2:"EH",cca3:"ESH",currency:"MAD,DZD,MRO",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.YEM",cca2:"YE",cca3:"YEM",currency:"YER",region:"json.regions.asia",shippingRegion:"ASIA"},{name:"json.countries.ZMB",cca2:"ZM",cca3:"ZMB",currency:"ZMK",region:"json.regions.africa",shippingRegion:"AFRICA"},{name:"json.countries.ZWE",cca2:"ZW",cca3:"ZWE",currency:"ZWL",region:"json.regions.africa",shippingRegion:"AFRICA"}]}),_wAMD.define("json!definitions/weights.json",function(){return[{code:"si",name:"json.weights.si.name",example:"json.weights.si.example",weight_suffix:"lb"},{code:"metric",name:"json.weights.metric.name",example:"json.weights.metric.example",weight_suffix:"kg"}]}),_wAMD.define("json!definitions/currencies.json",function(){return[{abbreviation:"USD",symbol:"$",name:"json.currencies.USD.name",gateways:["PayPal","Stripe","AuthorizeNet","Square"],stripeCountries:["US","CA","UK","FR","NL","IE","BE","DE","ES","LU"]},{abbreviation:"EUR",symbol:"&euro;",name:"json.currencies.EUR.name",gateways:["PayPal","Stripe"],stripeCountries:["UK","FR","NL","IE","BE","DE","ES","LU"]},{abbreviation:"GBP",symbol:"&pound;",name:"json.currencies.GBP.name",gateways:["PayPal","Stripe"],stripeCountries:["UK","FR","NL","IE","BE","DE","ES","LU"]},{abbreviation:"JPY",symbol:"&yen;",name:"json.currencies.JPY.name",gateways:["PayPal"]},{abbreviation:"AUD",symbol:"A$",name:"json.currencies.AUD.name",gateways:["PayPal"]},{abbreviation:"CAD",symbol:"C$",name:"json.currencies.CAD.name",gateways:["PayPal","Stripe"],stripeCountries:["CA"]},{abbreviation:"NZD",symbol:"$",name:"json.currencies.NZD.name",gateways:["PayPal"]},{abbreviation:"CHF",symbol:"CHF",name:"json.currencies.CHF.name",gateways:["PayPal"]},{abbreviation:"HKD",symbol:"$",name:"json.currencies.HKD.name",gateways:["PayPal"]},{abbreviation:"SGD",symbol:"$",name:"json.currencies.SGD.name",gateways:["PayPal"]},{abbreviation:"SEK",symbol:"kr",name:"json.currencies.SEK.name",gateways:["PayPal"]},{abbreviation:"DKK",symbol:"kr",name:"json.currencies.DKK.name",gateways:["PayPal"]},{abbreviation:"PLN",symbol:"z&#322;",name:"json.currencies.PLN.name",gateways:["PayPal"]},{abbreviation:"NOK",symbol:"kr",name:"json.currencies.NOK.name",gateways:["PayPal"]},{abbreviation:"HUF",symbol:"Ft",name:"json.currencies.HUF.name",gateways:["PayPal"]},{abbreviation:"CZK",symbol:"K&#268;",name:"json.currencies.CZK.name",gateways:["PayPal"]},{abbreviation:"ILS",symbol:"&#8362;",name:"json.currencies.ILS.name",gateways:["PayPal"]},{abbreviation:"MXN",symbol:"Mex$",name:"json.currencies.MXN.name",gateways:["PayPal"]},{abbreviation:"MYR",symbol:"MYR",name:"json.currencies.MYR.name",gateways:["PayPal"]},{abbreviation:"BRL",symbol:"R$",name:"json.currencies.BRL.name",gateways:["PayPal"]},{abbreviation:"PHP",symbol:"&#8369;",name:"json.currencies.PHP.name",gateways:["PayPal"]},{abbreviation:"RUB",symbol:"&#8381;",name:"json.currencies.RUB.name",gateways:["PayPal"]},{abbreviation:"THB",symbol:"&#3647;",name:"json.currencies.THB.name",gateways:["PayPal"]},{abbreviation:"TRY",symbol:"TL",name:"json.currencies.TRY.name",gateways:["PayPal"]},{abbreviation:"TWD",symbol:"NT$",name:"json.currencies.TWD.name",gateways:["PayPal"]}]}),_wAMD.define("json!definitions/states.json",function(){return{US:[{name:"json.regions.US.AL",abbr:"AL"},{name:"json.regions.US.AK",abbr:"AK"},{name:"json.regions.US.AS",abbr:"AS"},{name:"json.regions.US.AZ",abbr:"AZ"},{name:"json.regions.US.AR",abbr:"AR"},{name:"json.regions.US.CA",abbr:"CA"},{name:"json.regions.US.CO",abbr:"CO"},{name:"json.regions.US.CT",abbr:"CT"},{name:"json.regions.US.DE",abbr:"DE"},{name:"json.regions.US.DC",abbr:"DC"},{name:"json.regions.US.FM",abbr:"FM"},{name:"json.regions.US.FL",abbr:"FL"},{name:"json.regions.US.GA",abbr:"GA"},{name:"json.regions.US.GU",abbr:"GU"},{name:"json.regions.US.HI",abbr:"HI"},{name:"json.regions.US.ID",abbr:"ID"},{name:"json.regions.US.IL",abbr:"IL"},{name:"json.regions.US.IN",abbr:"IN"},{name:"json.regions.US.IA",abbr:"IA"},{name:"json.regions.US.KS",abbr:"KS"},{name:"json.regions.US.KY",abbr:"KY"},{name:"json.regions.US.LA",abbr:"LA"},{name:"json.regions.US.ME",abbr:"ME"},{name:"json.regions.US.MH",abbr:"MH"},{name:"json.regions.US.MD",abbr:"MD"},{name:"json.regions.US.MA",abbr:"MA"},{name:"json.regions.US.MI",abbr:"MI"},{name:"json.regions.US.MN",abbr:"MN"},{name:"json.regions.US.MS",abbr:"MS"},{name:"json.regions.US.MO",abbr:"MO"},{name:"json.regions.US.MT",abbr:"MT"},{name:"json.regions.US.NE",abbr:"NE"},{name:"json.regions.US.NV",abbr:"NV"},{name:"json.regions.US.NH",abbr:"NH"},{name:"json.regions.US.NJ",abbr:"NJ"},{name:"json.regions.US.NM",abbr:"NM"},{name:"json.regions.US.NY",abbr:"NY"},{name:"json.regions.US.NC",abbr:"NC"},{name:"json.regions.US.ND",abbr:"ND"},{name:"json.regions.US.MP",abbr:"MP"},{name:"json.regions.US.OH",abbr:"OH"},{name:"json.regions.US.OK",abbr:"OK"},{name:"json.regions.US.OR",abbr:"OR"},{name:"json.regions.US.PW",abbr:"PW"},{name:"json.regions.US.PA",abbr:"PA"},{name:"json.regions.US.PR",
abbr:"PR"},{name:"json.regions.US.RI",abbr:"RI"},{name:"json.regions.US.SC",abbr:"SC"},{name:"json.regions.US.SD",abbr:"SD"},{name:"json.regions.US.TN",abbr:"TN"},{name:"json.regions.US.TX",abbr:"TX"},{name:"json.regions.US.UT",abbr:"UT"},{name:"json.regions.US.VT",abbr:"VT"},{name:"json.regions.US.VI",abbr:"VI"},{name:"json.regions.US.VA",abbr:"VA"},{name:"json.regions.US.WA",abbr:"WA"},{name:"json.regions.US.WV",abbr:"WV"},{name:"json.regions.US.WI",abbr:"WI"},{name:"json.regions.US.WY",abbr:"WY"}],CA:[{name:"json.regions.CA.AB",abbr:"AB"},{name:"json.regions.CA.BC",abbr:"BC"},{name:"json.regions.CA.MB",abbr:"MB"},{name:"json.regions.CA.NB",abbr:"NB"},{name:"json.regions.CA.NL",abbr:"NL"},{name:"json.regions.CA.NT",abbr:"NT"},{name:"json.regions.CA.NS",abbr:"NS"},{name:"json.regions.CA.NU",abbr:"NU"},{name:"json.regions.CA.ON",abbr:"ON"},{name:"json.regions.CA.PE",abbr:"PE"},{name:"json.regions.CA.QC",abbr:"QC"},{name:"json.regions.CA.SK",abbr:"SK"},{name:"json.regions.CA.YT",abbr:"YT"}],BR:[{name:"json.regions.BR.AC",abbr:"AC"},{name:"json.regions.BR.AL",abbr:"AL"},{name:"json.regions.BR.AP",abbr:"AP"},{name:"json.regions.BR.AM",abbr:"AM"},{name:"json.regions.BR.BA",abbr:"BA"},{name:"json.regions.BR.CE",abbr:"CE"},{name:"json.regions.BR.DF",abbr:"DF"},{name:"json.regions.BR.ES",abbr:"ES"},{name:"json.regions.BR.GO",abbr:"GO"},{name:"json.regions.BR.MA",abbr:"MA"},{name:"json.regions.BR.MT",abbr:"MT"},{name:"json.regions.BR.MS",abbr:"MS"},{name:"json.regions.BR.MG",abbr:"MG"},{name:"json.regions.BR.PA",abbr:"PA"},{name:"json.regions.BR.PB",abbr:"PB"},{name:"json.regions.BR.PR",abbr:"PR"},{name:"json.regions.BR.PE",abbr:"PE"},{name:"json.regions.BR.PI",abbr:"PI"},{name:"json.regions.BR.RJ",abbr:"RJ"},{name:"json.regions.BR.RN",abbr:"RN"},{name:"json.regions.BR.RS",abbr:"RS"},{name:"json.regions.BR.RO",abbr:"RO"},{name:"json.regions.BR.RR",abbr:"RR"},{name:"json.regions.BR.SC",abbr:"SC"},{name:"json.regions.BR.SP",abbr:"SP"},{name:"json.regions.BR.SE",abbr:"SE"},{name:"json.regions.BR.TO",abbr:"TO"}],AU:[{name:"json.regions.AU.VIC",abbr:"VIC"},{name:"json.regions.AU.NSW",abbr:"NSW"},{name:"json.regions.AU.SA",abbr:"SA"},{name:"json.regions.AU.NT",abbr:"NT"},{name:"json.regions.AU.WA",abbr:"WA"},{name:"json.regions.AU.TAS",abbr:"TAS"},{name:"json.regions.AU.ACT",abbr:"ACT"},{name:"json.regions.AU.QLD",abbr:"QLD"},{name:"json.regions.AU.JBT",abbr:"JBT"}]}}),_wAMD.define("json!definitions/timezones.json",function(){return[{value:"America/Los_Angeles",name:"json.timezones.AmericaLosAngeles"},{value:"Pacific/Midway",name:"json.timezones.PacificMidway"},{value:"Pacific/Samoa",name:"json.timezones.PacificSamoa"},{value:"Pacific/Honolulu",name:"json.timezones.PacificHonolulu"},{value:"US/Alaska",name:"json.timezones.USAlaska"},{value:"America/Tijuana",name:"json.timezones.AmericaTijuana"},{value:"US/Arizona",name:"json.timezones.USArizona"},{value:"America/Chihuahua",name:"json.timezones.AmericaChihuahua"},{value:"America/Mazatlan",name:"json.timezones.AmericaMazatlan"},{value:"US/Mountain",name:"json.timezones.USMountain"},{value:"America/Managua",name:"json.timezones.AmericaManagua"},{value:"US/Central",name:"json.timezones.USCentral"},{value:"America/Mexico_City",name:"json.timezones.AmericaMexicoCity"},{value:"America/Monterrey",name:"json.timezones.AmericaMonterrey"},{value:"Canada/Saskatchewan",name:"json.timezones.CanadaSaskatchewan"},{value:"America/Bogota",name:"json.timezones.AmericaBogota"},{value:"US/Eastern",name:"json.timezones.USEastern"},{value:"US/East-Indiana",name:"json.timezones.USEastIndiana"},{value:"America/Lima",name:"json.timezones.AmericaLima"},{value:"America/Bogota",name:"json.timezones.AmericaBogota"},{value:"Canada/Atlantic",name:"json.timezones.CanadaAtlantic"},{value:"America/Caracas",name:"json.timezones.AmericaCaracas"},{value:"America/La_Paz",name:"json.timezones.AmericaLaPaz"},{value:"America/Santiago",name:"json.timezones.AmericaSantiago"},{value:"Canada/Newfoundland",name:"json.timezones.CanadaNewfoundland"},{value:"America/Sao_Paulo",name:"json.timezones.AmericaSaoPaulo"},{value:"America/Argentina/Buenos_Aires",name:"json.timezones.AmericaArgentinaBuenosAires"},{value:"America/Godthab",name:"json.timezones.AmericaGodthab"},{value:"America/Noronha",name:"json.timezones.AmericaNoronha"},{value:"Atlantic/Azores",name:"json.timezones.AtlanticAzores"},{value:"Atlantic/Cape_Verde",name:"json.timezones.AtlanticCapeVerde"},{value:"Africa/Casablanca",name:"json.timezones.AfricaCasablanca"},{value:"Etc/Greenwich",name:"json.timezones.EtcGreenwich"},{value:"Europe/Lisbon",name:"json.timezones.EuropeLisbon"},{value:"Europe/London",name:"json.timezones.EuropeLondon"},{value:"Africa/Monrovia",name:"json.timezones.AfricaMonrovia"},{value:"UTC",name:"json.timezones.UTC"},{value:"Europe/Amsterdam",name:"json.timezones.EuropeAmsterdam"},{value:"Europe/Belgrade",name:"json.timezones.EuropeBelgrade"},{value:"Europe/Berlin",name:"json.timezones.EuropeBerlin"},{value:"Europe/Bratislava",name:"json.timezones.EuropeBratislava"},{value:"Europe/Brussels",name:"json.timezones.EuropeBrussels"},{value:"Europe/Budapest",name:"json.timezones.EuropeBudapest"},{value:"Europe/Copenhagen",name:"json.timezones.EuropeCopenhagen"},{value:"Europe/Ljubljana",name:"json.timezones.EuropeLjubljana"},{value:"Europe/Madrid",name:"json.timezones.EuropeMadrid"},{value:"Europe/Paris",name:"json.timezones.EuropeParis"},{value:"Europe/Prague",name:"json.timezones.EuropePrague"},{value:"Europe/Rome",name:"json.timezones.EuropeRome"},{value:"Europe/Sarajevo",name:"json.timezones.EuropeSarajevo"},{value:"Europe/Skopje",name:"json.timezones.EuropeSkopje"},{value:"Europe/Stockholm",name:"json.timezones.EuropeStockholm"},{value:"Europe/Vienna",name:"json.timezones.EuropeVienna"},{value:"Europe/Warsaw",name:"json.timezones.EuropeWarsaw"},{value:"Africa/Lagos",name:"json.timezones.AfricaLagos"},{value:"Europe/Zagreb",name:"json.timezones.EuropeZagreb"},{value:"Europe/Athens",name:"json.timezones.EuropeAthens"},{value:"Europe/Bucharest",name:"json.timezones.EuropeBucharest"},{value:"Africa/Cairo",name:"json.timezones.AfricaCairo"},{value:"Africa/Harare",name:"json.timezones.AfricaHarare"},{value:"Europe/Helsinki",name:"json.timezones.EuropeHelsinki"},{value:"Europe/Istanbul",name:"json.timezones.EuropeIstanbul"},{value:"Asia/Jerusalem",name:"json.timezones.AsiaJerusalem"},{value:"Africa/Johannesburg",name:"json.timezones.AfricaJohannesburg"},{value:"Europe/Riga",name:"json.timezones.EuropeRiga"},{value:"Europe/Sofia",name:"json.timezones.EuropeSofia"},{value:"Europe/Tallinn",name:"json.timezones.EuropeTallinn"},{value:"Europe/Vilnius",name:"json.timezones.EuropeVilnius"},{value:"Asia/Baghdad",name:"json.timezones.AsiaBaghdad"},{value:"Asia/Kuwait",name:"json.timezones.AsiaKuwait"},{value:"Europe/Minsk",name:"json.timezones.EuropeMinsk"},{value:"Africa/Nairobi",name:"json.timezones.AfricaNairobi"},{value:"Asia/Riyadh",name:"json.timezones.AsiaRiyadh"},{value:"Europe/Volgograd",name:"json.timezones.EuropeVolgograd"},{value:"Asia/Tehran",name:"json.timezones.AsiaTehran"},{value:"Asia/Baku",name:"json.timezones.AsiaBaku"},{value:"Europe/Moscow",name:"json.timezones.EuropeMoscow"},{value:"Asia/Muscat",name:"json.timezones.AsiaMuscat"},{value:"Asia/Tbilisi",name:"json.timezones.AsiaTbilisi"},{value:"Asia/Yerevan",name:"json.timezones.AsiaYerevan"},{value:"Asia/Kabul",name:"json.timezones.AsiaKabul"},{value:"Asia/Karachi",name:"json.timezones.AsiaKarachi"},{value:"Asia/Tashkent",name:"json.timezones.AsiaTashkent"},{value:"Asia/Calcutta",name:"json.timezones.AsiaCalcutta"},{value:"Asia/Kolkata",name:"json.timezones.AsiaKolkata"},{value:"Asia/Katmandu",name:"json.timezones.AsiaKatmandu"},{value:"Asia/Almaty",name:"json.timezones.AsiaAlmaty"},{value:"Asia/Dhaka",name:"json.timezones.AsiaDhaka"},{value:"Asia/Yekaterinburg",name:"json.timezones.AsiaYekaterinburg"},{value:"Asia/Rangoon",name:"json.timezones.AsiaRangoon"},{value:"Asia/Bangkok",name:"json.timezones.AsiaBangkok"},{value:"Asia/Jakarta",name:"json.timezones.AsiaJakarta"},{value:"Asia/Novosibirsk",name:"json.timezones.AsiaNovosibirsk"},{value:"Asia/Chongqing",name:"json.timezones.AsiaChongqing"},{value:"Asia/Hong_Kong",name:"json.timezones.AsiaHongKong"},{value:"Asia/Krasnoyarsk",name:"json.timezones.AsiaKrasnoyarsk"},{value:"Asia/Kuala_Lumpur",name:"json.timezones.AsiaKualaLumpur"},{value:"Australia/Perth",name:"json.timezones.AustraliaPerth"},{value:"Asia/Singapore",name:"json.timezones.AsiaSingapore"},{value:"Asia/Taipei",name:"json.timezones.AsiaTaipei"},{value:"Asia/Ulan_Bator",name:"json.timezones.AsiaUlanBator"},{value:"Asia/Urumqi",name:"json.timezones.AsiaUrumqi"},{value:"Asia/Irkutsk",name:"json.timezones.AsiaIrkutsk"},{value:"Asia/Seoul",name:"json.timezones.AsiaSeoul"},{value:"Asia/Tokyo",name:"json.timezones.AsiaTokyo"},{value:"Australia/Adelaide",name:"json.timezones.AustraliaAdelaide"},{value:"Australia/Darwin",name:"json.timezones.AustraliaDarwin"},{value:"Australia/Brisbane",name:"json.timezones.AustraliaBrisbane"},{value:"Australia/Canberra",name:"json.timezones.AustraliaCanberra"},{value:"Pacific/Guam",name:"json.timezones.PacificGuam"},{value:"Australia/Hobart",name:"json.timezones.AustraliaHobart"},{value:"Australia/Melbourne",name:"json.timezones.AustraliaMelbourne"},{value:"Pacific/Port_Moresby",name:"json.timezones.PacificPortMoresby"},{value:"Australia/Sydney",name:"json.timezones.AustraliaSydney"},{value:"Asia/Yakutsk",name:"json.timezones.AsiaYakutsk"},{value:"Asia/Vladivostok",name:"json.timezones.AsiaVladivostok"},{value:"Pacific/Auckland",name:"json.timezones.PacificAuckland"},{value:"Pacific/Fiji",name:"json.timezones.PacificFiji"},{value:"Pacific/Kwajalein",name:"json.timezones.PacificKwajalein"},{value:"Asia/Kamchatka",name:"json.timezones.AsiaKamchatka"},{value:"Asia/Magadan",name:"json.timezones.AsiaMagadan"},{value:"Pacific/Fiji",name:"json.timezones.PacificFiji"},{value:"Pacific/Tongatapu",name:"json.timezones.PacificTongatapu"}]}),_wAMD.define("util/locale-utils",["jquery","underscore","backbone","json!definitions/countries.json","json!definitions/weights.json","json!definitions/currencies.json","json!definitions/states.json","json!definitions/timezones.json"],function(e,t,i,n,o,r,s,a){var l={REST_OF_WORLD_CODE:"WW",SUBREGION_TYPE_STATE:"state",SUBREGION_TYPE_PROVINCE:"province",isEuUser:function(){var e=["AL","AD","AM","AT","BY","BE","BA","BG","CH","CY","CZ","DE","DK","EE","ES","FO","FI","FR","GB","GE","GI","GR","HU","HR","IE","IS","IT","LT","LU","LV","MC","MK","MT","NO","NL","PL","PT","RO","RU","SE","SI","SK","SM","TR","UA","VA"];return e.indexOf(_W.userCountry)>-1},getContinentalUnitedStates:function(){return["AL","AZ","AR","CA","CO","CT","DE","DC","FL","GA","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"]},getNormalUnitedStates:function(){return["AL","AK","AZ","AR","CA","CO","CT","DE","DC","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"]},getCompleteUnitedStates:function(){return t.pluck(this.getStates().US,"abbr")},getCountries:function(){return this.translatedCountries||(this.translatedCountries=n.slice(0),e.each(this.translatedCountries,function(e,t){t.name&&(t.name=_W.utl(t.name)),t.region&&(t.region=_W.utl(t.region))})),this.translatedCountries},getCountriesWithout:function(e){return e=e||[],t.filter(this.getCountries(),function(t){return-1===e.indexOf(t.cca2)})},getRegionCountries:function(){var t=new i.Collection(continents),n=new i.Collection([{shippingRegion:"WORLD",name:_W.utl("json.regions.world")}]),o=this.getCountries().slice(0);return e.each(o,function(e,o){if(!o.exclude){if(o.nested=!0,o.flag=o.cca2.toLowerCase(),0==t.where({shippingRegion:o.shippingRegion}).length)t.add({shippingRegion:o.shippingRegion,name:o.region});else{var r=t.findWhere({shippingRegion:o.shippingRegion});r.has("countries")?r.get("countries").add(o):r.set("countries",new i.Collection([o]))}0==n.where({shippingRegion:o.shippingRegion}).length&&n.add({name:o.region,shippingRegion:o.shippingRegion})}}),{regions:t,restOfRegions:n}},getSubregionType:function(e){return-1!==["AU","BR","US"].indexOf(e)?l.SUBREGION_TYPE_STATE:l.SUBREGION_TYPE_PROVINCE},getSubregionsInCountry:function(e){var i=this.getStates();return i[e]?t.pluck(i[e],"abbr"):[]},getSubregionsInCountryWithout:function(e,i){var n=this.getSubregionsInCountry(e);return i.length?t.filter(n,function(e){return!t.contains(i,e)}):n},weightsTranslated:!1,getWeights:function(){return this.weightsTranslated||(e.each(o,function(e,t){t.name&&(t.name=_W.utl(t.name)),t.example&&(t.example=_W.utl(t.example))}),this.weightsTranslated=!0),o},currenciesTranslated:!1,getCurrencies:function(){return this.currenciesTranslated||(e.each(r,function(e,t){t.name&&(t.name=_W.utl(t.name))}),this.currenciesTranslated=!0),r},statesTranslated:!1,getStates:function(){return this.statesTranslated||(e.each(s,function(t,i){e.each(i,function(e,t){t.name&&(t.name=_W.utl(t.name))})}),this.statesTranslated=!0),s},hasRegionSupport:function(e){return!!this.getStates()[e]},getState:function(e,i){var n=this.getStates();if(!n[e])throw new Error("No states found for country "+e);return t.findWhere(n[e],{abbr:i})},getPlaceholderStateForCountry:function(e){var t=s[e];return t?t[0].abbr:""},getStatesLength:function(e){var t=s[e];return t?t.length:0},translatedTimezones:null,getTimezones:function(){var e=this;return e.translatedTimezones||(e.translatedTimezones=t.map(a,function(e){return t.defaults({name:_W.utl(e.name)},e)})),e.translatedTimezones},findCountryByCode:function(e){return t.find(n,function(t){return t.cca2===e||t.cca3===e})},findStateByCode:function(e,i){var n=this.getStates(),o=n[e];return o?t.find(o,function(e){return e.abbr===i}):void 0}};return l}),_wAMD.define("util/number-utils",[],function(){var e={isPositiveNumber:function(e){var t=parseFloat(e);return!isNaN(e)&&t>0},isPositiveNumberOrZero:function(e){var t=parseFloat(e);return!isNaN(e)&&t>=0},isInteger:function(e){var t=parseFloat(e);return!isNaN(e)&&"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},isIntegerOrEmpty:function(e){return this.isInteger(e)||this.isEmpty(e)},isEmpty:function(e){return null===e||void 0===e||""===String(e).trim()},trimDecimals:function(e,t,i){t=t||".",i=i||2;var n=String(e),o=n.indexOf(t);if(-1===o||i===n.length-1)return n;var r=String(e).split(t);if(1===r.count)return e;var s=r[0],a=r[1];return s+t+a.substring(0,i)}};return e}),_wAMD.define("commerce/editor/model/DefaultTaxRate",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"DefaultTaxRate"})}),_wAMD.define("commerce/editor/model/_baseTaxRate",["jquery","underscore","backbone-validation","commerce/editor/model/_baseCommerceModel","commerce/editor/store/setting/tax/DefaultTaxRates","util/locale-utils","util/general-utils","util/number-utils","commerce/editor/model/DefaultTaxRate"],function(e,t,i,n,o,r,s,a){var l=n.extend(t.extend({useServerGeneratedDefaultsFor:"TaxRate",defaults:{country_name:null,display_tax_name:null,display_tax_rate:null,display_rate_type:null,actual_percent_rate:null,display_subregion_name:null},validation:{display_name:function(e){return"string"==typeof e&&!e.length&&this.get("isCountry")&&/^(?!(ca|us)$)/i.exec(this.get("country"))?i.messages.required:void 0}},overrideUserTaxRateInPercent:function(e){return e=a.trimDecimals(e.trim()),this.set("user_tax_rate",parseFloat(e)/100),e},changedAttributes:function(e){var i=e;if(e instanceof l){var o=["created_date","updated_date",this.idAttribute];this.relations.forEach(function(e){o.push(e.key)}),t.each(this.keydefs,function(e){Array.prototype.push.apply(o,e)}),i=t.omit(e.attributes,o)}return n.prototype.changedAttributes.call(this,i)},save:function(){return n.prototype.save.call(this,arguments).then(function(){this.set("subregion_count",this.get("subregions")?this.get("subregions").length:0)}.bind(this))},clone:function(){var e=n.prototype.clone.call(this);if(e.set("default_rate",this.get("default_rate"),{silent:!0}),this.subregions){var t=this.subregions.invoke("clone");e.subregions=new this.subregions.constructor(t),e.subregions.each(function(t){t.parent=e})}return e},fetchSubregionRates:function(){return Weebly.Commerce.RPC.TaxRate.getSubregionTaxRates(this.get("identifier"),this.get("site_tax_rate_id")).then(function(e){var i=e.data;return"CA"!==this.get("identifier")||i.length?(this.set("subregions",i),i):(i=[],o.getCanadaDefaults().then(function(e){return t.each(e.subregions,function(e){i.push({identifier:e.identifier,isCountry:!1,country:"CA",rate_type:e.rate_type,parent_tax_rate_id:this.get("site_tax_rate_id"),user_tax_rate:e.tax_rate,display_name:e.identifier})}.bind(this)),this.set("subregions",i),i}.bind(this)))}.bind(this))},getParent:function(){return this.parent},getRateType:function(e){if(!e){var t=this.get("default_rate");t.length&&(e=t.at(0).get("rate_type"))}return e},getDisplayRateType:function(){var e=this.get("rate_type");return"base"===e?"":_W.utl("ecommerce.settings.tax.dialogs.edit_subregion."+e+"_option")},getCountryName:function(){if(this.get("isCountry")){var e=t.findWhere(r.getCountries(),{cca2:this.get("country")});if(e)return e.name}return""},getDisplayTaxName:function(){return this.get("isCountry")&&(this.get("subregion_count")>0||this.get("auto_calculate_rates"))?_W.utl("ecommerce.settings.tax.rates.tax_name_various"):"US"===this.get("identifier")?"US":this.get("display_name")},lookupActualRate:function(){if(this.has("user_tax_rate"))return this.get("user_tax_rate");if(this.has("actual_rate"))return this.get("actual_rate");var e=this.get("default_rate")||{};return e.length?e.at(0).get("tax_rate"):null},getActualPercentRate:function(){var e=this.lookupActualRate();return null!==e?s.roundNumber(100*e,3):null},getDisplaySubregionName:function(){var e=this.get("identifier");if(!e){var i=this.get("default_rate")||{};if(i.length&&(e=i.at(0).get("identifier")),!e)return""}var n=t.findWhere(r.getStates()[this.get("country")],{abbr:e});return n?n.name:""},getDisplayTaxRate:function(){if(this.get("auto_calculate_rates"))return _W.utl("ecommerce.settings.tax.rates.display_tax_rate.auto_calculated");var e=this.get("actual_percent_rate");if(this.get("subregion_count")>0){var t=this.get("country"),i=this.get("subregion_count"),n="";if(null!==e&&(n+="percent_"),n+=1===i?"one_":"multi_","US"===t?n+="state":"CA"===t&&(n+="province"),n)return n="ecommerce.settings.tax.rates.display_tax_rate."+n,_W.utl(n,i,e)}return _W.utl("ecommerce.settings.tax.rates.display_tax_rate.percent",Number(e))}},i.mixin));return l}),_wAMD.define("commerce/editor/collection/_baseTaxRate",["underscore","./_baseCommerceCollection","../model/_baseTaxRate"],function(e,t,i){var n=t;n.prototype;return n.extend({model:i,useServerGeneratedDefaultsFor:"TaxRate"},{})}),_wAMD.define("commerce/editor/model/RegionTaxRate",["commerce/editor/model/_baseTaxRate"],function(e){var t=e.extend({});return t}),_wAMD.define("commerce/editor/collection/RegionTaxRate",["commerce/editor/collection/_baseTaxRate","commerce/editor/model/RegionTaxRate"],function(e,t){var i=e.extend({model:t});return i}),_wAMD.define("commerce/editor/model/StateTaxRate",["commerce/editor/collection/RegionTaxRate","commerce/editor/model/DefaultTaxRate","commerce/editor/model/_baseTaxRate","commerce/editor/model/RegionTaxRate"],function(e,t,i,n){var o=i.extend({relations:[{key:"overrides",type:Backbone.HasMany,relatedModel:n,collectionType:e},{key:"default_rate",type:Backbone.HasOne,relatedModel:t}],getDisplayTaxRate:function(){var e=this.get("actual_percent_rate")||0;return e+"%"}});return o}),_wAMD.define("commerce/editor/collection/StateTaxRate",["commerce/editor/collection/_baseTaxRate","commerce/editor/model/StateTaxRate"],function(e,t){var i=e.extend({model:t});return i}),_wAMD.define("commerce/editor/model/CountryTaxRate",["backbone-all","commerce/editor/collection/StateTaxRate","commerce/editor/model/DefaultTaxRate","commerce/editor/model/_baseTaxRate","commerce/editor/model/StateTaxRate"],function(e,t,i,n,o){var r=n.extend({relations:[{key:"subregions",type:e.HasMany,relatedModel:o,collectionType:t},{key:"default_rate",type:e.HasOne,relatedModel:i}]});return r}),_wAMD.define("commerce/editor/collection/CountryTaxRate",["commerce/editor/collection/_baseTaxRate","commerce/editor/model/CountryTaxRate"],function(e,t){var i=e.extend({model:t});return i}),_wAMD.define("commerce/editor/model/EmailCustomMsg",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"EmailCustomMsg"})}),_wAMD.define("commerce/editor/collection/EmailCustomMsg",["underscore","./_baseCommerceCollection","../model/EmailCustomMsg"],function(e,t,i){var n=t;n.prototype;return n.extend({model:i,useServerGeneratedDefaultsFor:"EmailCustomMsg"},{})}),_wAMD.define("commerce/editor/model/PaymentGateway",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"PaymentGateway"})}),_wAMD.define("commerce/editor/collection/PaymentGateway",["underscore","./_baseCommerceCollection","../model/PaymentGateway"],function(e,t,i){var n=t;n.prototype;return n.extend({model:i,useServerGeneratedDefaultsFor:"PaymentGateway"},{})}),_wAMD.define("commerce/editor/collection/DefaultTaxRate",["underscore","./_baseCommerceCollection","../model/DefaultTaxRate"],function(e,t,i){var n=t;n.prototype;return n.extend({model:i,useServerGeneratedDefaultsFor:"DefaultTaxRate"},{})}),_wAMD.define("commerce/editor/model/ShippingRate",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"ShippingRate",get:function(e){return"coupons"==e?this.getRelated("coupon_ids","site_coupon_id",require("commerce/editor/collection/Coupon")):t.prototype.get.apply(this,arguments)},saveWithRegionRates:function(){return this.get("region_rates").each(function(e){e.hasChanged()&&(0==e.get("rate_disabled")&&0==e.get("price_adjustment")?e.destroy():e.save())}),this.save()},resetWithRegionRates:function(){this.get("region_rates").each(function(e){e.hasChanged()&&e.rollback()}),this.hasChanged()&&this.rollback()},maxGreaterThanMin:function(e,t,i){return i.minimum&&parseFloat(i.maximum)<=parseFloat(i.minimum)?_W.utl("javascript.commerce.editor.model.ShippingRate_1"):void 0},minOrMaxRequired:function(e,t,i){return""==i.minimum&&""==i.maximum?_W.utl("javascript.commerce.editor.model.ShippingRate_2"):void 0},requiredNonZeroNumber:function(t,i,n){t=parseFloat(t);var o=e.Validation.patterns.number.test(t);return!o||0>=t?_W.utl("javascript.commerce.editor.model.ShippingRate_3"):void 0},requiredNumber:function(t,i,n){t=parseFloat(t);var o=e.Validation.patterns.number.test(t);return!o||0>t?_W.utl("javascript.commerce.editor.model.ShippingRate_4"):void 0},optionalNonZeroNumber:function(e,t,i){return e?this.requiredNonZeroNumber(e,t,i):void 0},optionalNumber:function(e,t,i){return e?this.requiredNumber(e,t,i):void 0}})}),_wAMD.define("commerce/editor/collection/ShippingRate",["./_baseCommerceCollection","../model/ShippingRate"],function(e,t){return e.extend({model:t,useServerGeneratedDefaultsFor:"ShippingRate"})}),_wAMD.define("commerce/editor/store/setting/shipping/validation/ShippingMethodValidator",["w-global","underscore","util/number-utils"],function(e,t,i){var n={validate:function(n){var o={},r=this;if(n.name||(o.name=e.utl("ecommerce.settings.shipping.validation.method.name.required")),n.type||(o.type=e.utl("ecommerce.settings.shipping.validation.method.type.required")),"free"===n.type){if("price"===n.subtype||"weight"===n.subtype){var s=n.rates[0].min,a=n.rates[0].max,l=this._validateMinMax(s,a);null!==l&&(o.rates=[l])}}else if("flat"===n.type){var c=this._validateShippingRate(n.default_rate);null!==c&&(o.default_rate=c)}else"realtime"===n.type?t.isEmpty(n.rates)&&(o.rates=e.utl("ecommerce.settings.shipping.validation.method.realtime.required")):t.contains(["price","weight","quantity"],n.type)&&(i.isEmpty(n.default_rate)||i.isPositiveNumberOrZero(n.default_rate)||(o.default_rate=e.utl("ecommerce.setting.shipping.validation.default_rate_must_be_greater_equal_0")),t.each(n.rates,function(t,s){var a=r._validateMinMax(t.min,t.max);null!==a&&(o.rates=o.rates||[],o.rates[s]=a);var l=r._validateShippingRate(t.shipping_rate);null!==l&&(o.rates=o.rates||[],o.rates[s]=o.rates[s]||{},o.rates[s].shipping_rate=l),"quantity"===n.type&&(i.isInteger(t.min)||(o.rates=o.rates||[],o.rates[s]=o.rates[s]||{},o.rates[s].min||(o.rates[s].min=e.utl("ecommerce.settings.shipping.validation.method.rates.min.integer"))),i.isIntegerOrEmpty(t.max)||(o.rates=o.rates||[],o.rates[s]=o.rates[s]||{},o.rates[s].max||(o.rates[s].max=e.utl("ecommerce.settings.shipping.validation.method.rates.max.integer"))))}));return t.isEmpty(o)?null:o},_validateMinMax:function(n,o){var r={};return i.isEmpty(n)?r.min=e.utl("ecommerce.settings.shipping.validation.method.rates.min.required"):isNaN(n)?r.min=e.utl("ecommerce.settings.shipping.validation.method.rates.min.invalid"):i.isPositiveNumberOrZero(n)||(r.min=e.utl("ecommerce.settings.shipping.validation.method.rates.min.gte0")),!i.isEmpty(o)&&isNaN(o)?r.max=e.utl("ecommerce.settings.shipping.validation.method.rates.max.invalid"):!i.isEmpty(o)&&!r.min&&Number(o)<Number(n)&&(r.max=e.utl("ecommerce.settings.shipping.validation.method.rates.max.gt_min")),t.isEmpty(r)?null:r},_validateShippingRate:function(t){return i.isEmpty(t)?e.utl("ecommerce.settings.shipping.validation.method.shipping_rate.required"):isNaN(t)?e.utl("ecommerce.settings.shipping.validation.method.shipping_rate.invalid"):i.isPositiveNumberOrZero(t)?null:e.utl("ecommerce.settings.shipping.validation.method.shipping_rate.gte0")}};return n}),_wAMD.define("commerce/editor/model/ShippingMethod",["underscore","util/number-utils","commerce/editor/store/setting/shipping/validation/ShippingMethodValidator","./_baseCommerceModel"],function(e,t,i,n){var o=n.extend({useServerGeneratedDefaultsFor:"ShippingMethod",validate:function(e){return i.validate(e)},setDefaultShippingRateFromField:function(e){var i=e.val(),n=""===i?null:i;null!==n&&(n=t.trimDecimals(n),e.val(n),n=Number(n)),this.set("default_rate",n)}});return o}),_wAMD.define("commerce/editor/collection/ShippingMethod",["underscore","commerce/editor/collection/_baseCommerceCollection","commerce/editor/model/ShippingMethod"],function(e,t,i){var n=t;n.prototype;return n.extend({model:i,useServerGeneratedDefaultsFor:"ShippingMethod"},{})}),_wAMD.define("commerce/editor/model/StorefrontSettings",["w-global","backbone-all","underscore","jquery","./_baseCommerceModel","../collection/CountryTaxRate","../collection/EmailCustomMsg","../collection/PaymentGateway","../collection/DefaultTaxRate","../collection/ShippingRate","../collection/ShippingMethod"],function(e,t,i,n,o,r){return o.extend({useServerGeneratedDefaultsFor:"StorefrontSettings",getRatioAsNumber:function(e){return this._convertRatioSettingToNumber(this.get(e))},getRatioAsPercent:function(e){return this._convertRatioSettingToPercent(this.get(e))},enableAbandonedCarts:function(){var e=editorApp.commerce.RPC.StorefrontSettings.enableAbandonedCarts(),t=this;return e.done(function(e){e.success&&e.data&&t.set(e.data)}),e},disableAbandonedCarts:function(){var e=editorApp.commerce.RPC.StorefrontSettings.disableAbandonedCarts(),t=this;return e.done(function(e){e.success&&e.data&&t.set(e.data)}),e},changeAbandonedCartsDelay:function(e){var t=editorApp.commerce.RPC.StorefrontSettings.changeAbandonedCartsDelay(e),i=this;return t.done(function(e){e.success&&e.data&&i.set(e.data)}),t},_convertRatioSettingToNumber:function(e){var t;switch(e){case"w2h3":t=2/3;break;case"w3h2":t=1.5;break;case"w3h4":t=.75;break;case"w4h3":t=4/3;break;default:t=1}return Math.round(100*t)/100},_convertRatioSettingToPercent:function(e){return Math.round(100/this._convertRatioSettingToNumber(e))}},{canUseStorefront:void 0,canUseStorefrontFetch:function(){var t=this;return e.Commerce.RPC.StorefrontSettings.canUseStorefront().done(function(e){t.canUseStorefront=e.data})}})}),_wAMD.define("site/editor/commerce/module",["jquery","site/editor/app","editor-site-shared/relay","commerce/editor/model/StorefrontSettings"],function(e,t,i,n){function o(){e("#secondlist").find(".wsite-com-link").each(function(){this.title=""})}var r=t.module("commerce");return r.on("start",function(){var s={};Weebly&&Weebly.Commerce&&Weebly.Commerce.BackboneBootstrap&&Weebly.Commerce.BackboneBootstrap.StorefrontSettings&&(s=Weebly.Commerce.BackboneBootstrap.StorefrontSettings),r.storefrontSettings=new n(s),e(document).on("click.commerce","[href^=commerce-url]",function(e){if(e.preventDefault(),this.pathname)i.request("page:navigate:commerce",this.pathname);else{var t=this.href.split(":");i.request("page:navigate:commerce",t[t.length-1])}}),r.listenTo(t.vent,{pageRendered:o}),o(),i.commands.setHandlers({"commerce:set:store_mode":function(e){r.storefrontSettings.set("store_mode",e),i.request("page:navigate")}})}),r.on("stop",function(){e(document).off("click.commerce"),i.commands.removeHandlers(["commerce:set:store_mode"])}),r}),_wAMD.define("editor-site-shared/commerce/util/StorefrontUtil",["editor-site-shared/ui/context","editor/app","site/editor/commerce/module"],function(e,t,i){var n={getSettings:function(){return e.inEditorContext()?t.commerce.storefrontSettings:i.storefrontSettings},getSetting:function(e){return this.getSettings().get(e)}};return n}),_wAMD.define("commerce/editor/model/ProductSkuFile",["jquery","backbone-all","./_baseCommerceModel"],function(e,t,i){var n=i.extend({useServerGeneratedDefaultsFor:"ProductSkuFile",rollback:function(){i.prototype.rollback.apply(this,arguments)}});return n}),_wAMD.define("commerce/editor/collection/ProductSkuFile",["underscore","./_baseCommerceCollection","../model/ProductSkuFile"],function(e,t,i){var n=t;n.prototype;return n.extend({model:i,useServerGeneratedDefaultsFor:"ProductSkuFile"},{})}),_wAMD.define("commerce/editor/model/ProductSkuOptionchoice",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"ProductSkuOptionchoice",cloneDeep:function(){var e=t.prototype.cloneDeep.apply(this,arguments);return e.set("site_product_id",null),e.set("site_product_sku_id",null),e}})}),_wAMD.define("commerce/editor/collection/ProductSkuOptionchoice",["underscore","./_baseCommerceCollection","../model/ProductSkuOptionchoice"],function(e,t,i){var n=t;n.prototype;return n.extend({model:i,useServerGeneratedDefaultsFor:"ProductSkuOptionchoice"},{})}),_wAMD.define("commerce/editor/model/ProductSku",["backbone-all","./_baseCommerceModel","../collection/ProductSkuFile","../collection/ProductSkuOptionchoice"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"ProductSku",cloneDeep:function(){var e=t.prototype.cloneDeep.apply(this,arguments);return e.set("site_product_id",null),this.cloneDeepCollection("optionchoices",e),e},get:function(e){if("price"===e||"sale_price"===e){var i=this.attributes[e];return null!==i?parseFloat(i):null}return t.prototype.get.apply(this,arguments)},set:function(e,i){return("price"===e||"sale_price"===e)&&null!==i&&"string"==typeof i&&(i=this.formatCurrencyString(i),i=parseFloat(i)),t.prototype.set.apply(this,arguments)},product_tracks_inventory:function(){var e=this.get("product");return e&&e.inventoryTrackingEnabled()},hasOptionchoices:function(e,t,i){e=_.isArray(e)?e:[e],t=_.isUndefined(t)?[]:t,t=_.isArray(t)?t:[t],i=_.isUndefined(i)?"all":i;var n,o,r=this.getSkuOptionchoices();return _.some(e,function(e){return n=0,o=_.every(e,function(e,i){return-1!==_.indexOf(t,i)?(n++,!0):r[i]===e}),o&&"all"===i&&(o=_.keys(e).length===_.keys(r).length+n),o})},getSkuOptionchoices:function(){var e={};return this.get("optionchoices").each(function(t){e[t.get("name")]=t.get("choice");
}),e},formatCurrencyString:function(e){return e=e.replace(".",","),/^[0-9,]*,[0-9]{2}$/.test(e)&&(e=e.substr(0,e.length-3)+"."+e.substr(e.length-2)),e=e.replace(",","")}})}),_wAMD.define("commerce/editor/collection/ProductSku",["underscore","./_baseCommerceCollection","../model/ProductSku"],function(e,t,i){var n=t;n.prototype;return n.extend({model:i,useServerGeneratedDefaultsFor:"ProductSku"},{})}),_wAMD.define("commerce/editor/model/ProductImage",["jquery","backbone-all","./_baseCommerceModel","editor-site-shared/commerce/util/StorefrontUtil"],function(e,t,i,n){var o=i.extend({useServerGeneratedDefaultsFor:"ProductImage",rollback:function(){i.prototype.rollback.apply(this,arguments)},getMaxAvailableWidth:function(e){return e=parseInt(e,10)||this.get("width"),this.get("width")<e?this.get("width"):e},uri:function(e){e=e?e:"{size}";var t=this.attributes;"{size}"!=e&&e>parseInt(this.get("width"))&&(e=parseInt(this.get("width")));var i="s"+t.site_id+"_p"+t.site_product_id+"_i"+t.site_product_image_id+"_w"+e+"."+t.format;return"/uploads/"+n.getSetting("upload_uid_location")+"/"+i},regenerate:function(){var e=this;e.rpc.resize.call(e,e.get("owner_id"),e.get("site_id"),e.get("site_product_id"),e.get("site_product_image_id"))}});return o}),_wAMD.define("commerce/editor/collection/ProductImage",["underscore","./_baseCommerceCollection","../model/ProductImage"],function(e,t,i){var n=t;n.prototype;return n.extend({model:i,useServerGeneratedDefaultsFor:"ProductImage"},{})}),_wAMD.define("commerce/editor/model/ProductOption",["backbone-all","./_baseCommerceModel"],function(e,t){var i=t.extend({useServerGeneratedDefaultsFor:"ProductOption",cloneDeep:function(){var e=t.prototype.cloneDeep.apply(this,arguments);return e.set("site_product_id",null),e}});return i.prototype.defaults.name="",i}),_wAMD.define("commerce/editor/collection/ProductOption",["underscore","./_baseCommerceCollection","../model/ProductOption"],function(e,t,i){var n=t;n.prototype;return n.extend({model:i,useServerGeneratedDefaultsFor:"ProductOption"},{})}),_wAMD.define("commerce/editor/model/Manufacturer",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"Manufacturer"})}),_wAMD.define("commerce/editor/collection/Manufacturer",["underscore","./_baseCommerceCollection","../model/Manufacturer"],function(e,t,i){var n=t;n.prototype;return n.extend({model:i,useServerGeneratedDefaultsFor:"Manufacturer"},{})}),_wAMD.define("commerce/editor/model/Product",["jquery","underscore","backbone-all","editor/app","analytics/Tracking","editor-site-shared/commerce/util/StorefrontUtil","util/ui/ImageAspectRatio","./_baseCommerceModel","shared/permissions/restrictions","../collection/ProductSku","../collection/ProductImage","../collection/ProductOption","../collection/Manufacturer"],function(e,t,i,n,o,r,s,a,l){function c(e,t){var i=r.getSettings(),n=i.get("currency_prefix")||"",o=i.get("currency_suffix")||"";return t=t||2,n+parseFloat(e).toFixed(t)+o}return a.extend({useServerGeneratedDefaultsFor:"Product",getActions:function(){var e=["copy","delete","add-category","storefront-show","storefront-hide","add-taxable","remove-taxable"];return e},clone:function(){var e=a.prototype.clone.apply(this,arguments);return e.set("site_link",null),e},initialize:function(){this.on("destroy",this.onDestroy,this)},onDestroy:function(){n.loading.start("after:product:destroy"),e.when(this.get("categories"),_W.Commerce.RPC.Product.checkSkuCount({entry_point:"jsProductModelDestroy",site_product_id:this.get("site_product_id")})).then(function(t){return e.when.apply(e,t.map(function(e){return e.fetch()}))}).always(function(){n.loading.stop("after:product:destroy"),o.trackEvent("commerce.product","delete_product")})},cloneDeep:function(){var e=a.prototype.cloneDeep.apply(this,arguments);return e.set("manufacturer",this.get("manufacturer")),this.cloneDeepCollection("options2",e),this.cloneDeepCollection("skus",e),e.set("image_order",[]),e},thumbnail:function(e,t,i){var n,o;return n=r.getSettings().getRatioAsNumber("product_image_ratio"),t=t||!1,e=e||80,o=i||this.getImage(t),!o&&this.isGiftCardProduct()?o="//"+ASSETS_BASE+"/images/commerce/editor/giftcard/giftcard-w{size}.png":o||(o="//"+ASSETS_BASE+"/images/util/blank-product-w{size}.png"),s("entity-list",o,e,n)},getImageUrl:function(e,t){var i,n;return t=t||!1,e=e||80,i=this.getImage(t),i?(e=i.getMaxAvailableWidth(e),n=i.uri()):n=this.isGiftCardProduct()?"//"+ASSETS_BASE+"/images/commerce/editor/giftcard/giftcard-w{size}.png":"//"+ASSETS_BASE+"/images/util/blank-product-w{size}.png",n=n.replace("{size}",e)},getFirstImage:function(){var e=this.getOrderedImages();return e[0]||null},getImage:function(e){if(e)var t=this.get("images").select(function(t){return t.get("site_product_image_id")==e});else var t=this.getOrderedImages();return t.length?t[0]:null},getPriceRange:function(){var e=this,t=e.get("price_low"),i=e.get("price_high"),n=e.get("sale_price_low"),o=e.get("sale_price_high");return null===t&&null===i?"":(null!==n&&(t=Math.min(t,n)),null!==o&&(i=o),e.get("highest_nonsale")&&e.get("all_skus_sale")===!1&&e.get("highest_nonsale")>o&&(i=e.get("highest_nonsale")),price=c(t,2),t>=0&&i>t&&(price+=" - "+c(i,2)),price)},getOrderedImages:function(){var t=this,i=t.get("images"),n=t.get("image_order")||[],o=[],r=[];return i.each(function(t){var i=t.get("site_product_image_id"),s=-1;e.each(n,function(e,t){t==i&&(s=e)}),-1===s?o[o.length]=t:r[s]=t}),r=r.concat(o)},get:function(e){return"categories"==e?this.getRelated("category_ids","site_category_id",require("commerce/editor/collection/Category")):"coupons"==e?this.getRelated("coupon_ids","site_coupon_id",require("commerce/editor/collection/Coupon")):a.prototype.get.apply(this,arguments)},commonVariations:function(e){var i=[],n={};this.get("skus").pluck("optionchoices").each(function(t){check=[],n={},t.toJSON().each(function(t){t.name!==e&&(n[t.name]=t.choice)}),i.push(JSON.stringify(n))});var o=[],r=t.unique(i).length===i.length;if(!r){var s=t.filter(i,function(e,n){return t.indexOf(i,e)!==n});o=t.map(s,function(e){return JSON.parse(e)})}return o},findSkuByOptionChoices:function(e,t,i){return this.get("skus").filter(function(n){return n.hasOptionchoices(e,t,i)})},getSkuOptionchoices:function(){return this.get("skus").map(function(e){return e.getSkuOptionchoices()})},inventoryTrackingEnabled:function(){return this.get("track_inventory")&&Weebly.Restrictions.hasAccess("com_inventory_tracking")},isGiftCardProduct:function(){return"giftcard"===this.get("product_type")},allowWeight:function(){return"physical"===this.get("product_type")},allowVariants:function(){return"physical"===this.get("product_type")}})}),_wAMD.define("commerce/editor/collection/Product",["jquery","./_baseCommerceCollection","../model/Product"],function(e,t,i){var n=t,o=n.prototype;return n.extend({model:i,useServerGeneratedDefaultsFor:"Product",state:{pageSize:10},comparator:function(e){return-e.get("created_date")},fetch:function(t){return t=t&&t.searchText?e.extend({},this.fetchOptions,t):e.extend({sort:[{property:"created_date",direction:"DESC"},{property:"site_product_id",direction:"DESC"}]},this.fetchOptions,t),o.fetch.call(this,t)},filterByType:function(e){if(!e){var t=this.fetchOptions.filter.indexOf(this.productTypeFilter);return t>-1&&this.fetchOptions.filter.splice(t,1),this.productTypeFilter=null,void("*"===this.fetchOptions.searchText&&(this.fetchOptions.searchText=null))}return this.productTypeFilter?void(this.productTypeFilter.value=e):(this.productTypeFilter={property:"product_type",value:e},this.fetchOptions.filter.push(this.productTypeFilter),void(this.fetchOptions.searchText||(this.fetchOptions.searchText="*")))},remainingProductCount:function(){var e=_W.Restrictions.isUnlimited("com_product_limit");if(e)return 1/0;var t=this.state.totalRecords,i=Number(_W.Restrictions.accessValue("com_product_limit"));return i-t}},{remainingProductCount:function(){var t=this;return e.when(Weebly.Restrictions.isUnlimited("com_product_limit")).then(function(e){return e?1/0:t.count()}).then(function(e){return e===1/0?e:Number(_W.Restrictions.accessValue("com_product_limit"))-e})},canAddProduct:function(){return this.remainingProductCount().then(function(e){return e>0})}})}),_wAMD.define("tpl!editor/build/linker/store-page.tpl",[],function(){return'{{#hasStore}}\n	<fieldset class="input-group el-options-url-group {{^currentPageTitle}}hidden{{/currentPageTitle}}">\n		<div class="input-group__content">\n			<div class="input-group__row">\n				<div class="input-group__item form-control form-control__el-options--input">\n					<input type="text" class="current-page-input" value="{{currentPageTitle}}" readonly="readonly">\n					<button class="btn--link action-btn__el-options js-unlink">{{#tl}}templates.editor.build.linker.store-page_9{{/tl}}</button>\n				</div>\n			</div>\n		</div>\n	</fieldset>\n	<div class="store-page-selector {{#currentPageTitle}}hidden{{/currentPageTitle}}">\n		<div class="form-control form-control--search">\n			<input type="search" placeholder="{{#tl}}templates.editor.build.linker.store-page_10{{/tl}}" class="js-search" value="{{searchValue}}">\n		</div>\n		<ul class="group group--flush group--search">\n			<li class="group__item js-storefront">\n				<label class="form-control form-control--radio-check form-control--borderless">\n					<input class="js-store-page" type="radio" name="check" value="{{storefrontLink}}">\n					<span class="form-control__indicator js-check"></span>\n					<span class="js-name">{{#tl}}templates.editor.build.linker.store-page_1{{/tl}}</span>\n				</label>\n			</li>\n\n			<li class="group__item js-toggle-categories">\n				<label class="form-control form-control--radio-check form-control--borderless">\n					<input type="radio" name="check">\n					<span class="form-control__indicator js-check"></span>\n					{{#tl}}templates.editor.build.linker.store-page_2{{/tl}}\n					{{#categoryPageCount}}<span class="categories-pg-cnt">({{categoryPageCount}})</span>{{/categoryPageCount}}\n						<div class="spinner" {{#isLoading}}style="display:block"{{/isLoading}}>\n							<div class="spinner__bg"></div>\n						</div>\n				</label>\n			</li>\n\n			<div class="categories-wrapper hidden">\n			</div>\n\n			<li class="group__item js-toggle-products">\n				<label class="form-control form-control--radio-check form-control--borderless">\n					<input type="radio" name="check">\n					<span class="form-control__indicator js-check"></span>\n					{{#tl}}templates.editor.build.linker.store-page_3{{/tl}}\n					{{#productPageCount}}<span class="products-pg-cnt">({{productPageCount}})</span>{{/productPageCount}}\n					<div class="spinner" {{#isLoading}}style="display:block"{{/isLoading}}>\n						<div class="spinner__bg"></div>\n					</div>\n				</label>\n			</li>\n\n			<div class="products-wrapper hidden">\n			</div>\n		</ul>\n	</div>\n\n	{{^disableNewWindow}}\n		<label class="form-control form-control--checkbox form-control--simple form-control--checkbox-new-window">\n			<input class=" js-window" type="checkbox" {{#newWindow}}checked{{/newWindow}}>\n			<span class="form-control__indicator form-control__indicator--new_window"></span>\n			{{#tl}}templates.editor.build.linker.store-page_4{{/tl}}\n		</label>\n	{{/disableNewWindow}}\n{{/hasStore}}\n{{^hasStore}}\n	<div class="empty">\n		{{#tl}}templates.editor.build.linker.store-page_5{{/tl}}<br>\n		{{#tl}}templates.editor.build.linker.store-page_6{{/tl}}<a href="{{newProductHref}}" class="js-open-store">{{#tl}}templates.editor.build.linker.store-page_7{{/tl}}</a> {{#tl}}templates.editor.build.linker.store-page_8{{/tl}}\n	</div>\n{{/hasStore}}\n'}),_wAMD.define("tpl!editor/build/linker/search-results/categories.tpl",[],function(){return'{{#categories}}\n	<li class="group__item js-categories">\n		<label class="form-control form-control--radio-check form-control--borderless">\n			<input class="js-store-page" type="checkbox" name="check" {{#checked}}checked{{/checked}} value="{{site_link}}">\n			<span class="form-control__indicator js-check"></span>\n			<span class="js-name">{{name}}</span>\n		</label>\n	</li>\n{{/categories}}'}),_wAMD.define("tpl!editor/build/linker/search-results/products.tpl",[],function(){return'{{#products}}\n	<li class="group__item js-products">\n		<label class="form-control form-control--radio-check form-control--borderless">\n			<input class="js-store-page" type="radio" name="checkbox" {{#checked}}checked{{/checked}} value="{{site_link}}">\n			<span class="form-control__indicator js-check"></span>\n			<span class="js-name">{{name}}</span>\n		</label>\n	</li>\n{{/products}}'}),_wAMD.define("editor-site-shared/build/linker/item-views/StorePageView",["jquery","mustache","underscore","editor/app","site/editor/app","editor-site-shared/relay","editor-site-shared/ui/context","editor-site-shared/build/linker/item-views/BaseItemView","ui-framework/js/components/input-search","commerce/editor/collection/Category","commerce/editor/collection/Product","tpl!editor/build/linker/store-page.tpl","tpl!editor/build/linker/search-results/categories.tpl","tpl!editor/build/linker/search-results/products.tpl"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p){var f=a.extend({getTemplate:function(){return t.compile(u)},switcherOptions:{title:_W.utl("javascript.editor-site-shared.build.linker.item-views.StorePageView_1"),icon:"pageproduct"},ui:{categories:".js-categories",products:".js-products",storefront:".js-storefront",categoryToggle:".js-toggle-categories",productToggle:".js-toggle-products",storePageSearch:".js-search",categoriesWrapper:".categories-wrapper",productsWrapper:".products-wrapper",categoriesPageCount:".categories-pg-cnt",productsPageCount:".products-pg-cnt",spinner:".spinner",checks:".js-check",currentStorePageInput:".current-page-input",currentPageWrapper:".el-options-url-group",unlink:".js-unlink",storePageSelector:".store-page-selector"},events:{"click @ui.categoryToggle":"toggleCategories","click @ui.productToggle":"toggleProducts","click .js-open-store":"openStoreTab","click .js-categories, .js-products, .js-storefront":"optionClickHandler","click .js-window":"newWindowHandler","keydown @ui.storePageSearch":"searchResults","click @ui.currentPageWrapper":"toggleViews","click @ui.unlink":"unlink"},initialize:function(e){var t=this;t.options=e.options,t.loadProductsAndCategories()},templateHelpers:function(){var e,t=this,n=t.model.get("products"),o=t.model.get("categories"),r=t.model.get("hasStore"),s="/"+t.model.get("store"),a=t.model.get("currentStoreLinkType");if(s&&n&&o)switch(a){case"storefrontLink":e=_W.utl("templates.editor.build.linker.store-page_1");break;case"product":e=i.findWhere(n,{site_link:s}).name;break;case"category":e=i.findWhere(o,{site_link:s}).name}return{disableNewWindow:t.options.disableNewWindow,hasStore:"undefined"!=typeof r?r:!0,categoryPageCount:"undefined"!=typeof o?o.length.toString():null,productPageCount:"undefined"!=typeof n?n.length.toString():null,isLoading:"undefined"==typeof t.isLoading?!0:t.isLoading,currentPageTitle:e,newProductHref:"#store/products/new"}},onRender:function(){var e=this,i=e.model.get("currentStoreLinkType"),n=t.render(h,e.model.attributes),o=t.render(p,e.model.attributes);e.ui.storePageSearch.length>0&&(e.search=l.initialize(e.ui.storePageSearch),e.listenTo(e.search,"inputsearch:clear",function(){e.ui.storePageSearch.keydown()})),e.ui.categoriesWrapper.append(n),e.ui.productsWrapper.append(o),e.bindUIElements(),i&&("category"===i?(e.ui.categoriesWrapper.removeClass("hidden"),e.ui.categoryToggle.find("input").prop("checked",!0)):"product"===i?(e.ui.productsWrapper.removeClass("hidden"),e.ui.productToggle.find("input").prop("checked",!0)):e.ui.storefront.find("input").prop("checked",!0))},loadProductsAndCategories:function(t){var n=this;n.model.set("searchValue",t||""),"undefined"!=typeof t?(n.ui.spinner.show(),n.ui.checks.hide()):n.model.get("store")&&(t=n.model.get("store").split("/").pop().replace(/\.\w+$/,"").replace(/[_\W]+/g," "));var o=new c([],{mode:"infinite",state:{pageSize:50},searchText:t}),r=new d([],{mode:"infinite",state:{pageSize:200},searchText:t});n.isLoading=!0,e.when(o.getPage(1),r.getPage(1,{merge:!1})).done(function(){n.getSiteCategoryId().done(function(e){var s,a=o.findWhere({site_category_id:e}).get("site_link"),l=[],c=[];a===n.model.get("store")&&n.model.set("currentStoreLinkType","storefrontLink"),a="/"+a,n.model.set("storefrontLink",a),s=i.filter(JSON.parse(JSON.stringify(o.models)),function(e){return"Featured Products"!==e.name}),c=i.map(s,function(e){return e.site_link===n.model.get("store")&&(e.checked=!0,n.model.set("currentStoreLinkType","category")),e.site_link="/"+e.site_link,e}),n.model.set("categories",c),l=i.map(JSON.parse(JSON.stringify(r.models)),function(e){return e.site_link===n.model.get("store")&&(e.checked=!0,n.model.set("currentStoreLinkType","product")),e.site_link="/"+e.site_link,e}),n.model.set("products",l),t||n.model.set("hasStore",n.model.get("products").length>0),"string"!=typeof n.ui.spinner&&(n.ui.spinner.hide(),n.ui.checks.show()),n.isLoading=!1,n.render()})})},getSiteCategoryId:function(){var t=e.Deferred();return s.inEditorContext()?t.resolve(n.commerce.storefrontSettings.get("storefront_category_id")):t=r.request("editor:commerce:storefront:link:get"),t.promise()},toggleCategories:function(e){var t=this,i=t.ui.categoryToggle.find("input");return e&&(e.preventDefault(),t.isLoading)?(e.stopPropagation(),void e.stopImmediatePropagation()):(t.ui.productsWrapper.is(":visible")&&t.toggleProducts(),i.prop("checked",!i.prop("checked")),void t.ui.categoriesWrapper.toggleClass("hidden"))},toggleProducts:function(e){var t=this,i=t.ui.productToggle.find("input");return e&&(e.preventDefault(),t.isLoading)?(e.stopPropagation(),void e.stopImmediatePropagation()):(t.ui.categoriesWrapper.is(":visible")&&t.toggleCategories(),i.prop("checked",!i.prop("checked")),void t.ui.productsWrapper.toggleClass("hidden"))},openStoreTab:function(e){var t=this;Weebly.Elements.unselectElement(),s.inEditorContext()?t.options.close():(e.preventDefault(),o.vent.trigger("element:options:dialog:close"),r.execute("store:newProductPage:show"))},optionClickHandler:function(t){var i=this,n=e(t.currentTarget),o=n.find("input"),r=n.find(".js-name").text();if(t.preventDefault(),i.isLoading)return void t.stopPropagation();if(n.hasClass("js-products")?i.model.set("currentStoreLinkType","products"):n.hasClass("js-categories")&&i.model.set("currentStoreLinkType","categories"),i.ui.storefront.find("input").prop("checked",!1),i.$el.find("[type=checkbox]:not(.js-window)").prop("checked",!1),o.prop("checked",!0),o.val()!==i.model.get("store")){var s=i.model.get("newWindow");i.model.set({newWindow:s,value:o.val(),store:o.val()}),i.ui.currentStorePageInput.val(r)}i.toggleViews()},newWindowHandler:function(t){var i=this,n=e(t.currentTarget),o=i.$el.find(".js-store-page:checked").val();o&&i.model.set("value",o),i.model.set("newWindow",n.prop("checked"))},getValue:function(){var e=this,t=e.model.get("value"),i=e.model.get("newWindow")===!0;return t?[t,i]:t},searchResults:i.debounce(function(t){var i=this,n=e(t.currentTarget).val();i.loadProductsAndCategories(n.toLowerCase().trim())},500),toggleViews:function(){var e=this,t=e.ui.currentPageWrapper.is(":visible");t?(e.ui.currentPageWrapper.hide(),e.ui.storePageSelector.slideToggle(200,"swing")):e.ui.storePageSelector.slideToggle(200,"swing",function(){e.ui.currentPageWrapper.show()})}});return f}),_wAMD.define("tpl!editor/dialogs/upload-virus-error.tpl",[],function(){return"{{#tl}}templates.editor.dialogs.upload-virus-error_1{{/tl}}\n"}),_wAMD.define("editor/dialogs/UploadVirusError",["backbone-all","mustache","tpl!editor/dialogs/upload-virus-error.tpl"],function(e,t,i){var n=e.Marionette.ItemView.extend({dialog:{dialogClass:"upload-virus-error",title:_W.utl("javascript.editor.dialogs.UploadVirusError_1"),size:"550x250",buttons:[{group:"pull-right",buttons:[{text:_W.utl("javascript.editor.dialogs.UploadVirusError_2"),className:"btn-com btn-info"}]}]},triggers:{"click .btn-info":"dialog:close"},template:t.compile(i)});return n}),window.Weebly||(Weebly={}),Weebly.AllDialogs={},Weebly.Dialog=function(e,t){function i(){a.height(document.body.offsetHeight);var e=s(window).height();e>document.body.offsetHeight&&a.height(e)}function n(i,n){e=i,n||c.empty(),c.append(e),e=c.children().first(),l.show(),r(),t.onOpen&&t.onOpen.call(l,e)}function o(){var e=s("<div>"),i=t.outerClass||"";e.addClass(t.inner_class||"weebly-dialog-inner");var n=document.createElement("div");if(n.innerHTML="<div class='weebly-dialog "+i+"'>  <div class='weebly-dialog-border'>    <div class='weebly-dialog-content'>    </div>  </div></div>",l=s(n.firstChild),l.find("div.weebly-dialog-content").first().append(e),t.showClose!==!1){"function"!=typeof showClose&&(showClose=function(){u()});var o=s('<div class="weebly-dialog-close">').on("click","function"==typeof t.closeFunction?t.closeFunction:function(){u(!0)});e.append(o)}c=s("<div>"),e.append(c),t.iframe?c.css("line-height",0):(t.width&&c.width(t.width),t.height&&c.height(t.height)),l.css("position","absolute"),l.css("left","-10000px"),l.css("z-index",t.zIndex||999),s(document.body).append(l)}function r(){if(l){var n=e[0].scrollHeight+29,o=s(window).height(),r=l[0].scrollHeight;r=Math.max(n,r),l.css("top",s(window).scrollTop()+Math.max(10,Math.round(o/2-r/2))+"px"),l.css("left",Math.round(s(document.body).width()/2-l.width()/2)+"px"),!t.noScrollbars&&r>o-20?(e.height(e.scrollHeight-(r-(o-20))),t.iframe||e.css("overflow","auto")):t.iframe?t.height&&(e.height=t.height):(e.css("height",""),e.css("overflow","")),a&&a.is(":visible")&&i()}}var s=jQuery;t||"object"!=typeof e||e.nodeName?(e=s("string"==typeof e?"#"+e:e),t=t||{},Weebly.AllDialogs[e.attr("id")]=this):(t=e,e=null),this.options=t;var a,l,c;this.setOption=function(e,t){void 0===t?delete this.options[e]:this.options[e]=t},this.open=function(r,c){if(r&&(t.url=r),c&&(t.parameters=c),t.modal)if(a)a.show();else{a=s('<div class="weebly-blackout">').attr("id",t.blackoutID||""),s(document.body).append(a),a.css("z-index",t.zIndex||999);var d=void 0!==t.blackoutOpacity?t.blackoutOpacity:.5;a.css("opacity",d),i()}if(l||o(),t.modal&&s(document.body).append(l),t.iframe){var u="";t.parameters&&(u=s.param(t.parameters),u=-1==t.url.indexOf("?")?"?"+u:"&"+u);var h={};h.border=0,t.width&&(h.width=t.width+"px"),t.height&&(h.height=t.width+"px"),n(s('<iframe src="'+t.url+u+'" frameborder="0">').css(h))}else t.url?new s.ajax(t.url,{type:t.method||"get",data:t.parameters,success:function(e){n(e)}}):n(e.show(),!0)},this.update=function(t){e=t,c.empty().append(e),r()},this.positionDialog=r;var d;s(window).on("resize",function(){!d&&e&&e.offsetWidth&&(d=!0,r(),d=!1)});var u=this.close=function(e){l&&(t.onClose&&t.onClose.call(l,e)===!1||(a&&a.hide(),l.hide()))};this.destroy=function(){a&&a.remove(),c&&c.remove()}},!window.getInnerHeight,_wAMD.define("legacy/weebly_dialog",function(e){return function(){var t;return t||e.Weebly.Dialog}}(this)),Weebly.ProgressBar=function(e){function t(t){var i=parseInt(t);e.percent=i,o.style.width=i+"%"}function i(){return n=document.createElement("div"),n.className="upload-meter",e.id&&(n.id=e.id),o=document.createElement("span"),o.className="upload-meter-progress",o.style.width=e.percent+"%",n.appendChild(o),n}var n,o,r={width:"100%",percent:0,id:null},e=e||{};return e=_.extend(r,e),{el:function(){return n},render:function(){return i()},progress:function(e){t(e)}}},_wAMD.define("legacy/weebly_progress_bar",function(e){return function(){var t;return t||e.Weebly.ProgressBar}}(this)),Weebly.Hellos=function(e){function t(e){return e=_.extend(_.clone(d),e),e.id||(e.id="hello_"+Math.floor(10000001*Math.random())),e.now===!0&&(u=[]),u.push(e),u.length&&(i(),h=!1),e.id}function i(){var t;h||(h=!0,t=u.shift(),t?(n(t),c=setTimeout(function(){h=!1,s(),setTimeout(i,e.delay+e.fadeout+200)},t.duration)):h=!1)}function n(t){var i,n,o,r,s=t.icon||e.icon;document.getElementById("hellos")?(n=document.getElementById("hellos"),n.innerHTML=""):(n=document.createElement("div"),n.id="hellos"),n.setAttribute("data-id",t.id),n.style.zIndex=t.zIndex||e.zIndex,i=document.createElement("div"),i.className="content",n.className="",void 0!==s&&(n.className="icon-dialog "+s),n.className+=" w-upload-dialog w-ui",o=document.createElement("span"),o.className="title",jQuery(o).empty().append(t.title),i.appendChild(o),r=document.createElement("div"),r.className="messages",jQuery(r).empty().append(t.body),s&&(icon=document.createElement("span"),icon.className=s,icon.className+=" icon w-icon-comment",n.appendChild(icon)),i.appendChild(r),n.appendChild(i),document.getElementById("hellos")?jQuery("#hellos").show():document.getElementsByTagName("body")[0].appendChild(n)}function o(e){e="undefined"!=typeof e?e:!1,clearInterval(c),h=!1,s(e)}function r(){u=[],o()}function s(e){var t=jQuery("#hellos");t&&t.fadeOut(1e3)}function a(){return u.length>0?(clearInterval(c),h=!1,i(),!0):!1}function l(e){var t=document.getElementById("hellos");if(e=e.toString(),t&&t.getAttribute("data-id")===e)return o(),i(),!0;for(var n=0;n<u.length;n++)if(u[n].id===e)return u.splice(n,1),!0;return!1}var c,d={duration:5e3,delay:500,fadeout:250,icon:void 0,zIndex:99980},u=[],h=!1;return e=e||{},e=_.extend(d,e),{say:function(e){return e&&e.title&&e.body?t(e):-1},clearAll:function(){return r(),this},clear:function(e){return o(e)},next:function(){return a(),this},remove:function(e){return l(e)}}},_wAMD.define("legacy/weebly_hellos",function(e){return function(){var t;return t||e.Weebly.Hellos}}(this)),_wAMD.define("legacy/weebly_uploader_ajax",["underscore"],function(e){var t=function(t){function i(t){return e.extend(e.clone(d),t)}function n(i){var n=new FormData;return e.chain(t.parameters).clone().each(function(e,t,i){"function"==typeof e&&(i[t]=e())}).extend(i).each(function(e,t){n.append(t,e)}),n}function o(e){a=new XMLHttpRequest,a.upload.addEventListener("progress",t.progress,!1),a.addEventListener("abort",t.abort,!1),a.addEventListener("error",t.error,!1),a.addEventListener("load",function(e){c--,s(),t.load(e)},!1),a.addEventListener("loadstart",t.loadstart,!1),a.open(t.method,t.action),a.onreadystatechange=function(){4==a.readyState&&(200==a.status&&"function"==typeof t.success?t.success(a):403==a.status&&"function"==typeof t.error&&t.error(a))},a.send(e)}function r(e){var t;if("[object Array]"!==Object.prototype.toString.call(e))t=n(e),l.push(t);else for(var i=0;i<e.length;i++)t=n(e[i]),l.push(t);s()}function s(){l.length>0&&0===c&&(c++,o(l.shift()))}var a,l=[],c=0,d={parameters:{},method:"POST",action:"",abort:function(){},error:function(){},load:function(){},loadstart:function(){},progress:function(e){return e.lengthComputable?parseInt(e.loaded/e.total*100):void 0}};return t=t||{},t=i(t),{setParameters:function(e){return i(e),this},send:function(e){return r(e),this},abort:function(){a.abort()}}};return t}),_wAMD.define("legacy/weebly_uploader_ajax_progress",["underscore","legacy/weebly_progress_bar","legacy/weebly_hellos","legacy/weebly_uploader_ajax"],function(e,t,i,n){var o=function(o){function r(e){var t,i;t=document.createElement("div"),i=document.createElement("a"),i.href="#",i.className="btn btn-danger abort",i.innerHTML=_W.utl("html.weebly.libraries.weebly_uploader_ajax_progress_3"),i.addEventListener("click",function(){l.abort()},!1);var n=document.createElement("span");return n.className="upload-status",n.innerHTML=e+" / "+h.length,t.appendChild(d.render()),t.appendChild(n),t.appendChild(i),t}function s(e){if(e instanceof Array){h.push.apply(h,e);for(var t=0;t<e.length;t++)l.send(e[t])}else h.push(e),l.send(e)}function a(e,t){"function"==typeof e&&e(t)}var l,c,d,u={action:"",parameters:{}},h=[],p=0,f=0;return o=o||{},o=e.extend(e.clone(u),o),d=new t,c=new i,l=new n({action:o.action,parameters:o.parameters,abort:function(e){a(o.abort,e),c.clearAll(),updateList(currentPage)},error:function(e){"function"==typeof o.error?o.error.apply(this,arguments):errFunc(e)},progress:function(e){if(a(o.progress,e),e.lengthComputable){var t=e.loaded/e.total;t=(t+p)/(h.length||1),d.progress(100*t)}},load:function(e){a(o.load,e),h.length>++p?c.next():(c.say({title:_W.utl("html.weebly.libraries.weebly_uploader_ajax_progress_1"),body:r(h.length),duration:500,now:!0}),window.xhrUploading=null)},loadstart:function(e){a(o.loadstart,e),c.say({title:_W.utl("html.weebly.libraries.weebly_uploader_ajax_progress_2"),body:r(f++),duration:9999999})},success:function(e){a(o.success,e)}}),{setParameters:function(e){return l.setParameters(e),this},send:function(e){return s(e),this}}};return o}),_wAMD.define("tpl!components/uploader-view/uploader.tpl",[],function(){return'<input class="w-upload-input" type="file" name="files[]" {{#multiple}}multiple{{/multiple}} {{#accept}}accept="{{accept}}"{{/accept}} />\n'}),_wAMD.define("components/uploader-view/UploaderView",["jquery","underscore","backbone-all","mustache","util/general-utils","legacy/weebly_uploader_ajax_progress","tpl!components/uploader-view/uploader.tpl"],function(e,t,i,n,o,r,s){function a(e){this.onUploadLoadstart(e),this.trigger("start",e)}function l(e,t){var i=t.responseText;try{i=JSON.parse(i)}catch(n){}this.onUploadSuccess(i,e),this.trigger("success",i,e),u.call(this,e,i)}function c(e,t){var i="";if(t){i=t.responseText;try{i=JSON.parse(i)}catch(n){}}this.onUploadError(i,e),this.trigger("error",i,e),u.call(this,e,i)}function d(e){this.onUploadAbort(e),this.trigger("abort",e),u.call(this,e)}function u(e,t){this.onUploadComplete(t,e),this.trigger("complete",t,e)}var h=i.Marionette.ItemView.extend({events:{"drop.uploader-view":"onDrop","dragover.uploader-view":"onDragover","dragleave.uploader-view":"onDragleave","change.uploader-view .w-upload-input":"onChangeFile"},_uploadOpts:{target:".w-upload-target",url:"/weebly/fileUpload.php",multipleFiles:!1,maxFileSize:Number.MAX_VALUE,type:"all",params:{}},_mimeTypes:{all:{description:_W.utl("javascript.components.uploader-view.UploaderView_1")},image:{types:["gif","jpg","jpeg","png","bmp"],description:_W.utl("javascript.components.uploader-view.UploaderView_2"),accept:"image/*"},zip:{types:["zip"],description:_W.utl("javascript.components.uploader-view.UploaderView_3")},audio:{types:["mp3"],description:_W.utl("javascript.components.uploader-view.UploaderView_4"),accept:"audio/*"},video:{notTypes:["wlmp","htm","exe","mp3","tch1","swmm","pptx","html","docx","url","mht","hive","bloc","wma","ppt","pdf","ifo","zip","doc","bup","wp3","key","wpl","proj","atch","wav","xspf","fla","prel","tch2","jpg","jpeg","gif","png"],description:_W.utl("javascript.components.uploader-view.UploaderView_5"),accept:"video/*"},flash:{types:["swf"],description:_W.utl("javascript.components.uploader-view.UploaderView_8"),accept:"application/x-shockwave-flash"},html:{types:["html"],description:_W.utl("javascript.components.uploader-view.UploaderView_9")},tpl:{types:["tpl"],description:_W.utl("javascript.components.uploader-view.UploaderView_12")},less:{types:["less"],description:_W.utl("javascript.components.uploader-view.UploaderView_11")},doc:{types:["doc","docx","ppt","pptx","pps","xls","xlsx","pdf","ps","odt","odp","ods"],description:_W.utl("javascript.components.uploader-view.UploaderView_13")}},addAcceptedFileExtension:function(t,i){this._mimeTypes=e.extend(!0,{},this._mimeTypes),i||(i=this.uploadOpts.type);var n=this._mimeTypes[i];n.types||(n.types=[]),n.types.push(t)},getAccept:function(){var e=this._mimeTypes[this.uploadOpts.type.toLowerCase()];return t.difference(e.types||[],e.notTypes||[]).reduce(function(e,t){return"."+t+","+e},e.accept||"")},validFileType:function(e){var i=this._mimeTypes[this.uploadOpts.type.toLowerCase()],n=i.notTypes||[],o=t.difference(i.types||[],n),r=e.slice(e.lastIndexOf(".")+1).toLowerCase();return o.length?-1!==o.indexOf(r):n.length?-1===n.indexOf(r):!0},initialize:function(e){return this.uploadOpts=t.extend({},this._uploadOpts,e.uploadOptions),!this.template&&this.$el&&this.$el.length&&(this.template=this.$el.html()),
i.Marionette.ItemView.prototype.initialize.apply(this,arguments)},onRender:function(){var e=this.$el.find(this.uploadOpts.target);if(!e.length)throw"UploaderView - target not found: "+this.uploadOpts.target;if("button"===e[0].nodeName.toLowerCase())throw"UploaderView - a button cannot be used as target, Firefox does not support this";var t=n.render(s,{multiple:this.uploadOpts.multipleFiles,accept:this.getAccept()});e.addClass("w-upload-button").append(t)},reset:function(){var e=this.$el.find(this.uploadOpts.target);e.removeClass("w-upload-button");var t=this.serializeData();t=this.mixinTemplateHelpers(t);var n=this.getTemplate(),o=i.Marionette.Renderer.render(n,t);this.$el.html(o),this.stopListening(),this.undelegateEvents()},onShow:function(){},setUploadOptions:function(t){return e.extend(!0,this.uploadOpts,t),this.render()},setPostParameters:function(e){this.uploadOpts.params=e},onChangeFile:function(t){var i=t.target.files,o=n.render(s,{multiple:this.uploadOpts.multipleFiles,accept:this.getAccept()});this.upload(i),e(t.target).replaceWith(o)},onDragleave:function(e){e.preventDefault(),e.stopPropagation(),this.$el.removeClass("upload-view-drag")},onDragover:function(e){o.setDropEffect(e),this.$el.addClass("upload-view-drag"),e.preventDefault(),e.stopPropagation()},onDrop:function(e){var t=e.originalEvent.dataTransfer.files;e.preventDefault(),e.stopPropagation(),this.$el.removeClass("upload-view-drag"),this.upload(t)},upload:function(e){if(!this.uploadOpts.multipleFiles&&e.length>1)return void this.trigger("error:multiple",this.uploadOpts);for(var t=new r({parameters:this.uploadOpts.params,action:this.uploadOpts.url,error:c.bind(this,this.uploadOpts),success:l.bind(this,this.uploadOpts),loadstart:a.bind(this,this.uploadOpts),abort:d.bind(this,this.uploadOpts)}),i=[],n=0;n<e.length;n++)this.validFileType(e[n].name)?!e[n].size>this.uploadOpts.maxFileSize?this.trigger("error:size",this.uploadOpts):i.push({Filedata:e[n],Filename:e[n].name}):this.trigger("error:type",this.uploadOpts);t.send(i)},onUploadLoadstart:function(){},onUploadSuccess:function(){},onUploadError:function(){},onUploadAbort:function(){},onUploadComplete:function(){}});return h.extend=function(e){var n=i.Marionette.ItemView.extend.apply(this,arguments),o=t.result(e,"events")||e.events;return n.prototype.events=t.extend({},this.prototype.events,o),n},h}),_wAMD.define("legacy/weebly_uploads",["editor/app","editor-site-shared/relay","editor/dialogs/UploadVirusError","shared/permissions/restrictions","legacy/weebly_dialog","components/uploader-view/UploaderView","legacy/weebly_utils"],function(e,t,i,n,o,r){function s(e){e.view||(e.view=new r({el:e.el,uploadOptions:{target:e.target}}).on({start:h,"upload:start:video":p,"error:size":c,"error:type":u,error:d}));var i="all";"audio"==e.type?i="audio":"image"==e.type||"background"==e.type||"gallery"==e.type||"slideshow"==e.type||"headerslideshow"==e.type||"logo"==e.areaType||"image"==e.areaType?i="image":"doc"==e.type?i="doc":"video"==e.type?i="video":"flash"==e.type&&(i="flash");var o={type:i,params:{cookies:document.cookie.match(/WeeblySession=[^;]+(;|$)/)[0],newid:function(){return Math.floor(10000001*Math.random())},type:e.type||"",width:e.size||"",ucfid:e.ucfid||"",ucfpid:e.ucfpid||"",area_page_id:e.areaPageID||"",area_type:e.areaType||"",area_name:e.areaName||"",height:e.height||"",photoeditorFormat:!0}};return e.view.off("success"),"function"==typeof e.successCallback?e.view.on("success",function(t,i){a.call(this,t,i,e.successCallback)}):"string"==typeof e.successCallback?e.view.on("success",function(i,n){a.call(this,i,n,function(){t.execute(e.successCallback,null,i)})}):e.view.on("success",a),e.view.off("error"),"function"==typeof e.errorCallback?e.view.on("error",e.errorCallback):"string"==typeof e.errorCallback&&e.view.on("error",function(i,n){t.execute(e.errorCallback,null,i)}),e.view.off("abort"),"function"==typeof e.abortCallback?e.view.on("abort",e.abortCallback):"string"==typeof e.abortCallback&&e.view.on("abort",function(i,n){t.execute(e.abortCallback,null,i)}),"video"==e.type?o.maxFileSize=Math.floor(n.accessValue("video_upload_limit")/1e3):o.maxFileSize=Math.floor(n.accessValue("file_upload_limit")/1e3),"gallery"==e.type||"slideshow"==e.type||"headerslideshow"==e.type||e.multipleFiles===!0?o.multipleFiles=!0:o.multipleFiles=!1,e.view.setUploadOptions(o),e.view}function a(e,t,i){"%%TOOMANYPHOTOS%%"===e?window.showWarning(_W.utl("html.weebly.libraries.weebly_uploads_2")):"%%TOOLARGE%%"===e?c(t):"%%LARGESITE%%"===e?window.showWarning(_W.utl("html.weebly.libraries.weebly_uploads_4")):"%%LARGESITESOFTLIMIT%%"===e?window.showWarning(_W.utl("html.weebly.libraries.weebly_uploads_5")):"%%INVALIDFILETYPE%%"===e?window.showWarning(_W.utl("html.weebly.libraries.weebly_uploads_6")):"%%CLIENTSTORAGEUPRADE%%"===e?window.showWarning(_W.utl("html.weebly.libraries.weebly_uploads_7")):i?i(e,t):l.call(this,e,t)}function l(i,n){var o=n.params;"image"==o.type?t.execute("updateImageElement",i,o.ucfid,o.ucfpid):"file"==o.type||"audio"==o.type||"gallery"==o.type||"doc"==o.type||"flash"==o.type||"slideshow"==o.type?(("gallery"===o.type||"file"===o.type||"doc"==o.type||"audio"==o.type)&&e.execute("dragndrop:dialog:close"),window.dontSave=1,window.updateList(window.currentPage),t.once("editor:middle",function(){window.dontSave=0})):"video"==o.type&&t.execute("refreshVideoElement",o.ucfid),this.trigger("upload:complete:"+o.type)}function c(e){if("video"==e.type)f();else{var t=n.accessValue("file_upload_limit"),i=Math.floor(t/1024e3),o=n.isUpgradable("file_upload_limit");o&&!n.isClientSite?window.modalProFeatures(_W.utl("html.weebly.libraries.weebly_uploads_9")+i+"MB. "+_W.utl("html.weebly.libraries.weebly_uploads_10"),"main",o):window.showError(_W.utl("html.weebly.libraries.weebly_uploads_11")+i+"MB")}}function d(t,o){"%%VIRUS%%"==t?(e.execute("dragndrop:dialog:close"),e.showDialog(new i)):window.showError("<p>"+_W.utl("html.weebly.libraries.weebly_uploads_13")+".<br /><br />"+(n.isClientSite?"":_W.utl("html.weebly.libraries.weebly_uploads_14")+"<br/><a href='http://kb.weebly.com/troubleshoot-upload.html' target='_blank'>"+_W.utl("html.weebly.libraries.weebly_uploads_15")+"</a> "+_W.utl("html.weebly.libraries.weebly_uploads_16"))+"</p>","",!0),window.fireTrackingEvent("WeeblyError","Upload Error",t)}function u(e){"video"==e.type&&m()}function h(e){var t=e.params.type,i=e.params.ucfid;this.trigger("upload:start:"+t,i)}function p(e){t.execute("refreshVideoElement",e,!0)}function f(){new o("video-size-error",{modal:!0}).open()}function m(){new o("video-type-error",{modal:!0}).open()}var g={};return g.setupFileUploader=s,t.reqres.setHandlers({"dontSave:get":function(){return window.dontSave}}),t.commands.setHandlers({"dontSave:set":function(e){window.dontSave=e}}),g}),_wAMD.define("tpl!editor/build/linker/file.tpl",[],function(){return'<fieldset class="input-group el-options-url-group {{^currentFileTitle}}hidden{{/currentFileTitle}}">\n	<div class="input-group__content">\n		<div class="input-group__row">\n			<div class="input-group__item form-control form-control__el-options--input">\n				<input type="text" class="current-file-input" value="{{currentFileTitle}}" readonly="readonly">\n				<button class="btn--link action-btn__el-options js-unlink">{{#tl}}templates.editor.build.linker.file_3{{/tl}}</button>\n			</div>\n		</div>\n	</div>\n</fieldset>\n\n<div class="file-selector {{#currentFileTitle}}hidden{{/currentFileTitle}}">\n	<div class="form-control form-control--search">\n		<input type="search" placeholder="{{#tl}}templates.editor.build.linker.file_4{{/tl}}" class="js-search">\n	</div>\n	<ul class="group group--flush group--search">\n		<li class="group__item js-upload-file-container">\n			<label class="form-control form-control--radio-check form-control--borderless js-upload-file">\n				<span class="icon">plussmall</span>\n				{{#tl}}templates.editor.build.linker.file_1{{/tl}}\n			</label>\n		</li>\n		<div class="files-wrapper">\n		</div>\n	</ul>\n</div>\n\n{{^disableNewWindow}}\n	<label class="form-control form-control--checkbox form-control--simple form-control--checkbox-new-window">\n		<input class="js-window" type="checkbox" {{#newWindow}}checked{{/newWindow}}>\n		<span class="form-control__indicator form-control__indicator--new_window"></span>\n		{{#tl}}templates.editor.build.linker.file_2{{/tl}}\n	</label>\n{{/disableNewWindow}}\n'}),_wAMD.define("tpl!editor/build/linker/search-results/file.tpl",[],function(){return'{{#files}}\n	<li class="{{#hiddenFile}}hidden{{/hiddenFile}} group__item">\n		<label class="form-control form-control--radio-check form-control--borderless js-file"  data-hover-tip data-hover-tip-wrap-class-name="ui-framework" data-hover-tip-text="{{cleanedLocation}}">\n			<input type="radio" name="check" {{#checked}}checked{{/checked}} value="{{location}}">\n			<span class="form-control__indicator"></span>\n			{{shortenedLocation}} ({{size}})\n		</label>\n	</li>\n{{/files}}'}),_wAMD.define("editor-site-shared/build/linker/item-views/FileView",["jquery","mustache","underscore","editor-site-shared/relay","editor-site-shared/ui/context","editor-site-shared/build/linker/item-views/BaseItemView","ui-framework/js/components/input-search","ui-framework/js/components/hover-tip","legacy/weebly_uploads","tpl!editor/build/linker/file.tpl","tpl!editor/build/linker/search-results/file.tpl"],function(e,t,i,n,o,r,s,a,l,c,d){var u=r.extend({getTemplate:function(){return t.compile(c)},FILE_LINK_PREPEND:"http://weebly-file/",switcherOptions:{title:_W.utl("javascript.editor-site-shared.build.linker.item-views.FileView_1"),icon:"pagefile"},ui:{uploadFile:".js-upload-file",uploadFileContainer:".js-upload-file-container",deleteButtons:".delete",files:".js-file",fileSearch:".js-search",filesWrapper:".files-wrapper",fileSelector:".file-selector",currentFileInput:".current-file-input",currentFileWrapper:".el-options-url-group",unlink:".js-unlink"},events:{"click @ui.files":"clickHandler","click @ui.uploadFile":"uploadHandler","keydown @ui.fileSearch":"searchResults","click .js-window":"newWindowHandler","click @ui.currentFileWrapper":"toggleViews","click @ui.unlink":"unlink"},initialize:function(e){var t=this;t.options=e.options,a.initialize()},templateHelpers:function(){var e,t=this,i=t.model.get("location");return i&&(e=t.getFileName(i)),{disableNewWindow:t.options.disableNewWindow,currentFileTitle:e}},onRender:function(){var e=this;e.ui.filesWrapper.empty(),e.search=s.initialize(e.ui.fileSearch),e.search.on("inputsearch:clear",function(){e.ui.fileSearch.keydown()}),e.getFiles(),o.inEditorContext()&&l.setupFileUploader({el:e.ui.uploadFileContainer,target:".js-upload-file",zIndex:99999,type:"link_file",size:"",ucfid:e.options.ucfid||"",ucfpid:"",successCallback:e.uploadCallback.bind(e)}),e.listenTo(e.panel.panelSwitcher.switcher,"open",function(){e.$fileHoverTip.remove(),e.$fileHoverTip=null})},uploadHandler:function(){var e=this;o.inEditorContext()||(n.commands.setHandler("uploadCallback",function(t,i){e.uploadCallback.call(e,i),n.execute("dragndrop:dialog:close")}),n.execute("determineUpload","file","",e.options.ucfid||"","","uploadCallback",!0))},uploadCallback:function(e){var t=this;if(!e.match(/error/i)){var i=!1;e.match(/\.pdf$/)&&(i=!0),t.model.set({value:t.FILE_LINK_PREPEND+e,location:e,newWinodw:i}),t.onRender(),t.toggleViews(),t.ui.currentFileInput.val(t.getFileName(e))}},getFiles:function(){var e=this;Weebly.Editor.RPC.Linker.getFiles().done(function(t){var n=JSON.parse(t),o=e.model.get("location");i.each(n,function(t){var i=e.getFileName(t.location);t.location===o&&(t.checked=!0),t.cleanedLocation=e.getFileName(t.location),t.shortenedLocation=e.parseFileName(i)}),e.model.set("files",n),e.renderFiles()}).fail(errFunc)},renderFiles:function(){var e,i=this,n=i.ui.filesWrapper;i.model.get("files")&&(n.empty(),e=t.render(d,i.model.attributes),n.append(e),i.bindUIElements())},clickHandler:function(t){var i=this,n=e(t.currentTarget),o=n.find("[name=check]"),r=o.val();if(t.preventDefault(),i.$el.find(":checked").removeAttr("checked"),i.$el.find('[value= "'+r+'"]').attr("checked",!0),r!==i.model.get("location")){var s=i.model.get("newWindow");i.model.set({newWindow:s,value:i.FILE_LINK_PREPEND+r,location:r}),i.ui.currentFileInput.val(i.getFileName(r))}i.toggleViews()},newWindowHandler:function(t){var i=this,n=e(t.currentTarget),o=i.ui.files.find("input:checked").val();o&&i.model.set("value",i.FILE_LINK_PREPEND+o),i.model.set("newWindow",n.prop("checked"))},parseFileName:function(e){return e.length>20?e.substr(0,8)+"..."+e.substr(e.length-8,e.length):e},onClose:function(){n.commands.removeHandler("uploadCallback")},filterSearchResults:function(e){var t=this;i.each(t.model.get("files"),function(i){var n=t.getFileName(i.location.toLowerCase());""===e||n.indexOf(e)>-1?i.hiddenFile=!1:i.hiddenFile=!0}),t.renderFiles()},getValue:function(){var e=this,t=e.model.get("value"),i=e.model.get("newWindow")===!0;return t?[t,i]:t},getFileName:function(e){return e.replace(/^.*[\\\/]/,"")},toggleViews:function(){var e=this,t=e.ui.currentFileWrapper.is(":visible");t?(e.ui.currentFileWrapper.hide(),e.ui.fileSelector.slideToggle(200,"swing")):e.ui.fileSelector.slideToggle(200,"swing",function(){e.ui.currentFileWrapper.show()})}});return u}),_wAMD.define("tpl!editor/build/linker/email.tpl",[],function(){return'<fieldset class="input-group el-options-url-group js-input-wrapper">\n	<div class="input-group__content">\n		<div class="input-group__row">\n			<div class="input-group__item form-control form-control__el-options--input">\n				<input type="text" class="js-email-input" placeholder="name@domain.com" value="{{value}}">\n				<button class="btn--link action-btn__el-options js-unlink">{{#tl}}templates.editor.build.linker.email_2{{/tl}}</button>\n			</div>\n		</div>\n	</div>\n	<span class="input-group__invalid-text">{{#tl}}templates.editor.build.linker.email_1{{/tl}}</span>\n</fieldset>\n'}),_wAMD.define("editor-site-shared/build/linker/item-views/EmailView",["jquery","mustache","underscore","editor-site-shared/build/linker/item-views/BaseItemView","tpl!editor/build/linker/email.tpl"],function(e,t,i,n,o){var r=n.extend({template:t.compile(o),switcherOptions:{title:_W.utl("javascript.editor-site-shared.build.linker.item-views.EmailView_1"),icon:"pageemail"},ui:{input:".js-email-input",inputWrapper:".js-input-wrapper",unlink:".js-unlink"},events:{"focus @ui.input":"setGroupState","blur @ui.input":"blurHandler","keyup @ui.input":"changeUnlinkState","click @ui.unlink":"unlink"},initialize:function(e){var t=this;t.options=e.options},onRender:function(){this.changeUnlinkState()},templateHelpers:function(){var e=this,t=e.model.get("email");return{value:t}},setGroupState:function(){this.ui.inputWrapper.addClass("is-focused")},blurHandler:function(t){var i=this,n=t?e(t.currentTarget).val():i.ui.input.val(),o=/^[a-zA-Z0-9\-\_\.\+\~\#\*\'']+@[a-zA-Z0-9\-]+\.[a-zA-Z]+[a-z0-9A-Z\.\-\?\=\&]*$/,r=""!==n&&!n.match(o);return e(t.relatedTarget).is(i.ui.unlink)?!1:(this.ui.inputWrapper.removeClass("is-focused"),i.ui.inputWrapper.toggleClass("is-invalid",r),i.ui.inputWrapper.find(".input-group__invalid-text").toggleClass("is-visible",r),void(n!==i.model.get("email")&&(""!==n?i.model.set("value","mailto:"+n):i.model.set("value",""),i.model.set("email",n))))}});return r}),_wAMD.define("tpl!editor/build/linker/blog-post.tpl",[],function(){return'<div class="has-blog-posts">\n	<fieldset class="input-group el-options-url-group {{^currentPostTitle}}hidden{{/currentPostTitle}}">\n		<div class="input-group__content">\n			<div class="input-group__row">\n				<div class="input-group__item form-control form-control__el-options--input">\n					<input type="text" class="current-post-input" value="{{currentPostTitle}}" readonly="readonly">\n					<button class="btn--link action-btn__el-options js-unlink">{{#tl}}templates.editor.build.linker.blog-post_3{{/tl}}</button>\n				</div>\n			</div>\n		</div>\n	</fieldset>\n	<div class="blog-post-selector {{#currentPostTitle}}hidden{{/currentPostTitle}}">\n		<div class="form-control form-control--search">\n			<input type="search" placeholder="{{#tl}}templates.editor.build.linker.blog-post_4{{/tl}}" class="js-search">\n		</div>\n		<ul class="group group--flush group--search">\n			<div class="blog-post-wrapper">\n			</div>\n		</ul>\n	</div>\n\n	{{^disableNewWindow}}\n		<label class="form-control form-control--checkbox form-control--simple form-control--checkbox-new-window">\n			<input class="js-window" type="checkbox" {{#newWindow}}checked{{/newWindow}}>\n			<span class="form-control__indicator form-control__indicator--new_window"></span>\n			{{#tl}}templates.editor.build.linker.blog-post_1{{/tl}}\n		</label>\n	{{/disableNewWindow}}\n</div>\n\n<div class="no-blog-posts hidden">\n	<div class="empty">\n		{{#tl}}templates.editor.build.linker.blog-post_2{{/tl}}<br>\n	</div>\n</div>\n'}),_wAMD.define("tpl!editor/build/linker/search-results/posts.tpl",[],function(){return'{{#blogPosts}}\n	<li class="{{#hiddenBlogPost}}hidden{{/hiddenBlogPost}} group__item js-blog-post">\n		<label class="form-control form-control--radio-check form-control--borderless">\n			<input type="radio" name="check" {{#checked}}checked{{/checked}} value="{{page_id}}/{{post_id}}/{{post_link}}">\n			<span class="form-control__indicator"></span>\n			<span class="js-name">{{post_title}}</span>\n		</label>\n	</li>\n{{/blogPosts}}'}),_wAMD.define("editor-site-shared/build/linker/item-views/BlogPostView",["jquery","mustache","underscore","editor-site-shared/build/linker/item-views/BaseItemView","ui-framework/js/components/input-search","tpl!editor/build/linker/blog-post.tpl","tpl!editor/build/linker/search-results/posts.tpl"],function(e,t,i,n,o,r,s){var a=n.extend({getTemplate:function(){return t.compile(r)},BLOG_LINK_PREPEND:"http://weebly-blog-post-link/",switcherOptions:{title:_W.utl("javascript.editor-site-shared.build.linker.item-views.BlogPostView_1"),icon:"pageblog"},events:{"click .js-blog-post":"blogPostClickHandler","click .js-window":"newWindowHandler","keydown .js-search":"searchResults","click @ui.currentPostWrapper":"toggleViews","click @ui.unlink":"unlink"},ui:{searchInput:".js-search",blogPostWrapper:".blog-post-wrapper",hasBlogPosts:".has-blog-posts",noBlogPosts:".no-blog-posts",currentPostWrapper:".el-options-url-group",postSelector:".blog-post-selector",currentPostInput:".current-post-input",unlink:".js-unlink"},initialize:function(e){var t=this;t.options=e.options},templateHelpers:function(){var e,t=this,i=t.model.get("blogPost");return i&&(e=i.split("/").pop().replace(".html","")),{disableNewWindow:t.options.disableNewWindow,currentPostTitle:e}},onRender:function(){var e=this;e.ui.searchInput.length>0&&(e.search=o.initialize(e.ui.searchInput),e.listenTo(e.search,"inputsearch:clear",function(){e.ui.searchInput.keydown()})),e.getBlogPosts()},getBlogPosts:function(){var e=this;Weebly.Editor.RPC.Blog.getBlogPosts().done(function(t){var n=e.model.get("blogPost");i.each(t,function(t){var i=e.BLOG_LINK_PREPEND+t.page_id+"/"+t.post_id+"/"+t.post_link;i===decodeURIComponent(n)&&(t.checked=!0)}),e.model.set({hasBlogPosts:t.length>0,blogPosts:t}),e.renderBlogPosts()})},renderBlogPosts:function(){var e,i=this,n=i.ui.blogPostWrapper,o=i.model.get("hasBlogPosts");o&&i.model.get("blogPosts")&&(n.empty(),e=t.render(s,i.model.attributes),n.append(e)),i.ui.hasBlogPosts.toggleClass("hidden",!o),i.ui.noBlogPosts.toggleClass("hidden",o)},blogPostClickHandler:function(t){var i=this,n=e(t.currentTarget),o=n.find("input").val(),r=n.find(".js-name").text();if(t.preventDefault(),i.ui.postSelector.find("input:checked").prop("checked",!1),n.find("input").prop("checked",!0),i.model.get("blogPost")!==o){var s=i.model.get("newWindow");i.model.set({newWindow:s,value:i.BLOG_LINK_PREPEND+o,blogPost:o}),i.ui.currentPostInput.val(r)}i.toggleViews()},newWindowHandler:function(t){var i=this,n=e(t.currentTarget),o=i.$el.find(".js-blog-post input:checked").val();o&&i.model.set("value",i.BLOG_LINK_PREPEND+o),i.model.set("newWindow",n.prop("checked"))},getValue:function(){var e=this,t=e.model.get("value"),i=e.model.get("newWindow")===!0;return t?[t,i]:t},filterSearchResults:function(e){var t=this;i.each(t.model.get("blogPosts"),function(t){""===e||t.post_title.toLowerCase().indexOf(e)>-1?t.hiddenBlogPost=!1:t.hiddenBlogPost=!0}),t.ui.blogPostWrapper.empty(),t.renderBlogPosts()},toggleViews:function(){var e=this,t=e.ui.currentPostWrapper.is(":visible");t?(e.ui.currentPostWrapper.hide(),e.ui.postSelector.slideToggle(200,"swing")):e.ui.postSelector.slideToggle(200,"swing",function(){e.ui.currentPostWrapper.show()})}});return a}),_wAMD.define("tpl!editor/build/linker/phone-number.tpl",[],function(){return'<fieldset class="input-group el-options-url-group js-input-wrapper">\n	<div class="input-group__content">\n		<div class="input-group__row">\n			<div class="input-group__item form-control form-control__el-options--input">\n				<input type="text" class="js-phone-input" placeholder="{{#tl}}templates.editor.build.linker.phone-number_1{{/tl}}"  value="{{value}}">\n				<button class="btn--link  action-btn__el-options js-unlink">{{#tl}}templates.editor.build.linker.website-url_4{{/tl}}</button>\n			</div>\n		</div>\n	</div>\n</fieldset>'}),_wAMD.define("editor-site-shared/build/linker/item-views/PhoneNumberView",["jquery","mustache","underscore","editor-site-shared/build/linker/item-views/BaseItemView","tpl!editor/build/linker/phone-number.tpl"],function(e,t,i,n,o){var r=n.extend({getTemplate:function(){return t.compile(o)},switcherOptions:{title:_W.utl("javascript.editor-site-shared.build.linker.item-views.PhoneNumberView_1"),icon:"phone"},ui:{input:".js-phone-input",unlink:".js-unlink"},events:{"blur @ui.input":"blurHandler","click @ui.unlink":"unlink","keyup @ui.input":"changeUnlinkState"},initialize:function(e){var t=this;t.options=e.options},templateHelpers:function(){var e=this,t=e.model.get("phone");return{value:t}},onRender:function(){this.changeUnlinkState()},blurHandler:function(t){var i=this,n=t?e(t.currentTarget).val():i.ui.input.val();n=n.replace(/\D/g,""),n!==i.model.get("phone")&&(""!==n?i.model.set("value","tel:"+n):i.model.set("value",""),i.model.set("phone",n))}});return r}),_wAMD.define("editor-site-shared/build/linker/Linker",["jquery","underscore","backbone-all","editor-site-shared/relay","ui-framework/js/components/combo-dialog","ui-framework/js/components/panel-switcher","editor-site-shared/build/linker/item-views/UrlView","editor-site-shared/build/linker/item-views/StandardPageView","editor-site-shared/build/linker/item-views/StorePageView","editor-site-shared/build/linker/item-views/FileView","editor-site-shared/build/linker/item-views/EmailView","editor-site-shared/build/linker/item-views/BlogPostView","editor-site-shared/build/linker/item-views/PhoneNumberView"],function(e,t,i,n,o,r,s,a,l,c,d,u,h){var p={init:function(t){var n=this;e.extend(n,t),n.baseModel=new i.Model(n.existing),n.parent=e("<div>",{"class":"ui-framework linker"}).appendTo(document.body)},open:function(t){var i=this;i.init(t);var r=function(e){e.stopPropagation(),"promptLink"===e.target.getAttribute("data-command")||e.target.hasClassName("w-link")||"OBJECT"===e.target.tagName||i.close()};i.container=new o({initialPanel:i.getSwitcherPanel(),size:"small",width:350,height:350,pointAt:t.coordinates||null,isDraggable:!0,allowLeftRight:!1,preferBottom:!0,onOpen:function(){this.listenTo(n,"frame:overlays:hide",this.close),e("body").on("click.linker-clickaway",":not(.linker , .linker *)",r)}}),i.container.on("close",function(){i.close(!0),e("body").off("click.linker-clickaway",":not(.linker , .linker *)",r)}),i.container.open({parent:i.parent})},close:function(e){var t=this;t.container&&!e&&t.container.close(),t.parent&&t.parent.remove()},getLinkerView:function(e){var i,n=this;return e.appendingPanels=!0,n.init(e),i=n.getSwitcherPanel(e.appendingPanels),i.on("before:pop",function(){t.bind(n.prepareSave,this,n,!1)()}),i},getSwitcherPanel:function(e){var t=this,i=[],n=t.getSwitcherValueFromExisting();i=[new r.Panel({content:new s({model:t.baseModel,options:t}),selected:"url"===n}),new r.Panel({content:new a({model:t.baseModel,options:t}),selected:"pageID"===n}),new r.Panel({content:new l({model:t.baseModel,options:t}),selected:"store"===n}),new r.Panel({content:new u({model:t.baseModel,options:t}),selected:"blogPost"===n}),new r.Panel({content:new h({model:t.baseModel,options:t}),selected:"phone"===n})],t.disableFile||i.push(new r.Panel({content:new c({model:t.baseModel,options:t}),selected:"location"===n})),t.disableEmail||i.push(new r.Panel({content:new d({model:t.baseModel,options:t}),selected:"email"===n}));var p=new r({panels:i,height:300});return t.switcherPanel=new o.Panel({content:p,backLink:e?{isDirectional:!0}:!1,title:_W.utl("javascript.editor-site-shared.build.linker.Linker_2")}),t.switcherPanel.on("before:leave",function(){t.prepareSave.apply(this,[t,!1])}),t.switcherPanel},getSwitcherValueFromExisting:function(){var e,t=this,i=t.existing||{url:""};return i.url&&"http://"!==i.url?e="url":i.pageID?e="pageID":i.store?e="store":i.email?e="email":i.location?e="location":i.blogPost?e="blogPost":i.phone&&(e="phone"),e},prepareSave:function(e,t){var i=this,n=this.contentView.currentPanel;if(n){var o=n.contentView;e.save(o,t)}t&&(e.appendingPanels?i.popPanel():i.close())},save:function(e,i){var n=this,o=i?"":e.getValue();"undefined"!=typeof o&&n.onChoose&&(t.isArray(o)?n.onChoose.apply(n.context,o):n.onChoose.apply(n.context,[o,!1])),n.onCancel&&n.onCancel.call(n.context)}};return p}),_wAMD.define("editor-site-shared/build/linker/utils",["underscore","editor/page-manager/pages","commerce/editor/model/Category","commerce/editor/model/Product"],function(e,t,i,n){function o(e,t){t="undefined"==typeof t?!1:t;var i=e.replace("//$/","");return i=i.replace(/.*\//,""),t&&(i=i.replace(/\.\w+$/,"")),i}var r={};return r.getBlogPostDetailsFromLink=function(e){var t=e.split("/");return{pageId:t[3],postId:t[4],title:t[5]}},r.getNameFromStoreLink=function(e,t){if(e&&t){var o=e.split("/",3);if(o&&o[1]){var r=o[1],s=r[0],a=r.substring(1);if("c"==s){var l=i.findOrCreate({site_category_id:a});l.fetch().done(function(){var e=l.get("name");if(e)t(e);else{var i=l.get("site_link");i&&t(i)}})}else if("p"==s){var c=n.findOrCreate({site_product_id:a});c.fetch().done(function(){var e=c.get("name");if(e)t(e);else{var i=c.get("site_link");i&&t(i)}})}}}},r.getNameFromParsedLink=function(e,i){if(e&&i)if(e.url)i(e.url.replace(/^\w+:\/\//,""));else if(e.pageID){var n=t.getPage(e.pageID);i(n?n.get("title"):"Page")}else e.store?this.getNameFromStoreLink(e.store,i):e.blogPost?i(this.getBlogPostDetailsFromLink(e.blogPost).title):e.location?i(o(e.location)):e.phone?i(e.phone):e.email&&i(e.email)},r}),_wAMD.define("tpl!elements/settings/tooltip-linker.tpl",[],function(){return'{{#isTrigger}}\n<ul class="group group--flush">\n	<li class="group__item">\n		<button class="btn-control btn-control--borderless">\n			<span class="btn-control__label">{{label}}</span>\n			<span class="btn-control__sublabel link-item-sublabel"></span>\n		</button>\n	</li>\n</ul>\n{{/isTrigger}}\n\n{{^isTrigger}}\n<button class="btn-control btn-control--borderless">\n	<span class="btn-control__label">{{label}}</span>\n	<span class="btn-control__sublabel link-item-sublabel"></span>\n</button>\n{{/isTrigger}}\n'}),_wAMD.define("element/editor/view/settings/item-views/LinkItemView",["jquery","underscore","backbone-all","mustache","site/editor/app","editor-site-shared/ui/constants","element/editor/view/settings/utils","element/editor/view/settings/item-views/BaseSettingsItemView","editor-site-shared/build/linker/Linker","editor/page-manager/pages","commerce/editor/model/Category","commerce/editor/model/Product","editor-site-shared/build/linker/utils","tpl!elements/settings/tooltip-linker.tpl"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p){var f=a.extend({template:n.compile(p),templateHelpers:function(){return{label:_W.utl(this.model.get("label"))}},events:{click:"openLinker"},ui:{subLabel:".link-item-sublabel"},onRender:function(){var e=this;e.updateSubLabel()},openLinker:function(){var e=this,t=e.model.get("ucfid"),i=e.model.get("cfpid"),n={};n.ucfid=t,n.remove=!0,n.context=e,n.existing=e.generateParsedLink(),n.onChoose=e.onChoose,r.FORM_CONFIRMATION_LINK_CFPID===i&&(n.disableFile=!0,n.disableEmail=!0,n.disableNewWindow=!0,n.remove=!1),e.container=o.request("element:options:dialog:get:current"),e.container.getContainerEl().parent().addClass("linker");var s=l.getLinkerView(n);e.container.pushPanel(s)},generateParsedLink:function(){var i=this,n=i.model.get("value"),o=Weebly.Elements.getPropertyByReference("<!TARGET!>").property_result,s=Weebly.Elements.getPropertyByReference("<!LINK!>").property_result,a=i.model.get("cfpid"),l={};return l=t.contains(r.IMAGE_LINK_LIGHTBOX_CFPIDS,a)&&s.indexOf("weebly-image-full")>-1?window.parseLinkString(""):t.contains(r.IMAGE_LINK_LIGHTBOX_CFPIDS,a)&&s.indexOf("href")>-1?window.parseLinkString(e(s).attr("href")):window.parseLinkString(n),(o&&-1!==o.search(/(target=["']_blank["'])/)||s&&-1!==s.search(/(target=["']_blank["'])/))&&(l.newWindow=!0),l},updateSubLabel:function(){var e=this;h.getNameFromParsedLink(e.generateParsedLink(),function(t){e.showSubLabel(t)})},showSubLabel:function(e){var t=this;t.ui.subLabel.html(e)},onChoose:function(i,n){var o=this,a=o.model.get("cfpid"),l=Weebly.Elements.getPropertyByReference("<!TARGET!>"),c=l.cfpid;if(t.contains(r.IMAGE_LINK_LIGHTBOX_CFPIDS,a)){var d=o.model.get("ucfpid").split("-")[0];e("#"+d+"-lightbox").prop("checked",!1).removeClass("checked"),s.setPropertyByKey(o.collection,"ucfpid",d+"-link","<a"+(i?" href='"+i+"'":"")+(n?" target='_blank'":"")+">"),s.setPropertyByKey(o.collection,"ucfpid",d+"-lightbox","0"),Weebly.Elements.continueOnChange()}else a&&(Weebly.Elements.uproperty.properties[a].property_result=i||"javascript:;"),c&&(Weebly.Elements.uproperty.properties[c].property_result=n?'target="_blank"':""),o.model.set("value",i),Weebly.Elements.saveProperties()}});return f}),_wAMD.define("element/editor/view/settings/itemViewUtil",["element/editor/view/settings/item-views/StringItemView","element/editor/view/settings/item-views/IntegerItemView","element/editor/view/settings/item-views/SelectItemView","element/editor/view/settings/item-views/TextItemView","element/editor/view/settings/item-views/ColorItemView","element/editor/view/settings/item-views/ToggleItemView","element/editor/view/settings/item-views/CheckboxItemView","element/editor/view/settings/item-views/SliderItemView","element/editor/view/settings/item-views/RadioItemView","element/editor/view/settings/item-views/AlignItemView","element/editor/view/settings/item-views/HiddenItemView","element/editor/view/settings/item-views/SubLabelItemView","element/editor/view/settings/item-views/ButtonItemView","element/editor/view/settings/item-views/OptionsItemView","element/editor/view/settings/item-views/LinkItemView"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p,f){return{getItemView:function(m){var g=m.get?m.get("type"):m.type,v=m.get?m.get("hidden"):m.hidden,b=m.get?m.get("actionPaneIndex"):m.actionPaneIndex,y=m.get?m.get("action"):m.action,w={string:e,"int":t,checkbox:s,text:n,color:o,toggle:r,select:i,slider:a,radio:l,align:c,link:f,hidden:d,sublabel:u,optionsItems:p,button:h,group:"group"};return g="undefined"!=typeof b?"sublabel":g,g=v?"hidden":g,g="social"===y?"button":g,g=w.hasOwnProperty(g)?g:"string",w[g]}}}),_wAMD.define("tpl!elements/settings/tooltip-group.tpl",[],function(){return'{{#description}}\n	<p class="element-settings__description">{{description}}</p>\n{{/description}}\n{{^description}}\n	{{#label}}\n		<h3 class="form-header">{{label}}</h3>\n	{{/label}}\n{{/description}}\n\n{{> elements/settings/group-item}}'}),_wAMD.define("tpl!elements/settings/group-item.tpl",[],function(){return'<div class="{{^isDropdown}}group group--flush{{/isDropdown}}">\n</div>\n'}),_wAMD.define("element/editor/view/settings/item-views/GroupItemView",["jquery","backbone-all","mustache","editor/app","element/editor/model/ElementSettingModel","element/editor/view/settings/utils","element/editor/view/settings/itemViewUtil","element/editor/view/settings/item-views/BaseSettingsItemView","editor-site-shared/ui/constants","tpl!elements/settings/tooltip-group.tpl","tpl!elements/settings/group-item.tpl"],function(e,t,i,n,o,r,s,a,l,c,d){
var u=a.extend({itemViewContainer:"div.group",getTemplate:function(){return i.compilePartial("elements/settings/group-item",d),i.compile(c)},templateHelpers:function(){var e=this,t=e.model.get("label"),i=e.model.get("description");return{label:t?_W.utl(t):t,description:i?_W.utl(i):!1}},onRender:function(){var e=a.prototype.onRender.call(this);if(!e){var t=this,i=t.model.get("properties"),n=["select","checkbox","radio","text"];if(i=_.filter(i,function(e){return!e.hidden&&!e.detached}),t.$el.removeClass("group__item"),1===i.length&&_.contains(n,i[0].type)){var o=t.renderProperty(i[0],!1);t.$el.html(o)}else t.renderPropertiesGroup(i);t.renderDetachedItems()}},renderProperty:function(e,t){var i=s.getItemView(e),n=new o(e),a=this.collection||this.model.collection;a&&this.listenTo(n,"change",function(e){r.setPropertyByKey(a,"name",e.get("name"),e.get("value")),_.contains(l.IMAGE_LINK_LIGHTBOX_CFPIDS,e.get("cfpid"))&&r.setPropertyByKey(a,"ucfpid",e.get("ucfpid").split("-")[0]+"-link","")});var c=new i({model:n,collection:a,isInGroup:t}).render().$el;return c},renderPropertiesGroup:function(e){var t=this.$el.find(this.itemViewContainer).eq(0);_.each(e,function(e){var i=this.renderProperty(e,!0);t.append(i)}.bind(this))},renderDetachedItems:function(){var t=this.model.get("properties");t=_.filter(t,function(e){return e.detached&&!e.hidden}),_.each(t,function(t){var n=this.renderProperty(t,!1),o=i.render(d,{isDropdown:!!t.values});$detachedGroupEl=e(o),$detachedGroupEl.append(n),$detachedGroupEl.children().length>0&&this.$el.append($detachedGroupEl)},this)}});return u}),_wAMD.define("tpl!elements/settings/tooltip-wrap.tpl",[],function(){return'<div class="dialog__section">\n    {{#description}}\n        <p class="element-settings__description">{{description}}</p>\n    {{/description}}\n</div>\n'}),_wAMD.define("element/editor/view/settings/PaneTooltipView",["underscore","jquery","backbone-all","mustache","editor/app","shared/permissions/restrictions","element/editor/view/settings/utils","element/editor/view/settings/itemViewUtil","element/editor/view/settings/item-views/GroupItemView","tpl!elements/settings/tooltip-wrap.tpl"],function(e,t,i,n,o,r,s,a,l,c){var d=i.Marionette.CompositeView.extend({getTemplate:function(){return n.compile(c)},itemViewContainer:".dialog__section",templateHelpers:function(){var t=this.options.description;if(e.isObject(t)){var i=t.restriction,n=!1;switch(i){case"pro":n=!r.hasPro();break;case"starter":n=!r.hasStarter();break;case"business":n=!r.hasBusiness();break;case"performance":n=!r.hasPerformance();break;case"free":default:n=!r.hasFreeRestrictions()}t=n?"":_W.utl(t.text)}return{description:t}},getItemView:function(e){var t=a.getItemView(e);return"group"===t?l:t},appendHtml:function(i,n,o){var r=n.model.get("type"),s=["select","radio","group","button"],a=n.el;e.contains(s,r)||(a=t("<div/>",{"class":"group group--flush"}).append(n.el)),i.$(this.itemViewContainer).append(a)},onRender:function(){this.$el.find(".hidden").remove()}});return d}),_wAMD.define("element/editor/view/settings/ElementComboDialog",["underscore","jquery","backbone-all","ui-framework/js/components/combo-dialog","ui-framework/js/components/hover-tip","element/editor/view/settings/utils"],function(e,t,i,n,o,r){var s=n.Panel.extend({hasContentLegacyStyles:!1,events:{"click .has-action":"pushByIndex","click .btn--action":"pushByIndex","click .btn-control":"pushByIndex"},constructor:function(e,t){var i=this;t.actionPanes&&(i.actionPanes=t.actionPanes),t.contentCollection&&(i.contentCollection=t.contentCollection),n.Panel.prototype.constructor.apply(i,arguments)},pushByIndex:function(e){var i,n=this,o=t(e.currentTarget),s="undefined"!=typeof o.data("action-index")?o.data("action-index"):o.find("[data-action-index]").data("action-index");"undefined"!=typeof s&&(i=r.getPropertyByKey(n.contentCollection,"actionPaneIndex",s),"object"==typeof i?n.actionPanes[s].contentView.model.clear().set(i):i&&n.actionPanes[s].contentView.model.set("value",i),this.pushPanel(n.actionPanes[s]))},onBeforePop:function(t){if(t.contentView.model)if(this.contentView.model.get("isTrigger")){var i,n=this.contentView.model.get("name"),o=t.contentView.model.get("values");o&&e.each(o,function(e){e.trigger&&e.trigger.name===n&&(i=e.value)}),t.contentView.model.set("value",i)}else{var s=r.getPropertyByKey(t.contentView.collection,"actionPaneIndex",t.contentView.model.get("actionPaneIndex"));t.contentView.model.clear().set(s)}},onBeforeLeave:function(){o.closeAll()}});return s}),_wAMD.define("tpl!elements/settings/tooltip-edit-social.tpl",[],function(){return'<fieldset>\n	<label class="form-control">\n		<span class="form-control__label-text">{{#tl}}templates.elements.settings.tooltip-edit-social_1{{/tl}}</span>\n		<input name="std" placeholder="{{hint}}" type="text" value="{{value}}">\n	</label>\n</fieldset>\n\n{{#show_toggle}}\n	<label class="form-control form-control--toggle">\n		<input type="checkbox" name="check" {{#active}}checked{{/active}}>\n		<span class="form-control--toggle__switch"></span>\n		{{#tl}}templates.elements.settings.tooltip-edit-social_2{{/tl}}\n	</label>\n{{/show_toggle}}'}),_wAMD.define("element/editor/view/settings/item-views/EditSocialInfoItemView",["backbone-all","mustache","tpl!elements/settings/tooltip-edit-social.tpl"],function(e,t,i){var n=e.Marionette.ItemView.extend({template:t.compile(i),events:{"click @ui.toggle":"updateToggleValue","blur @ui.input":"blurHandler"},ui:{toggle:'[name="check"]',input:'[name="std"]'},templateHelpers:function(){var e=this.model.get("url");return{value:"boolean"==typeof e?"":e,show_toggle:this.options.showToggle}},onBeforeRender:function(){var e=this;e.dialog.onBeforePop=function(t){t.contentView.updateBadge(e.model.toJSON())}},onShow:function(){this.ui.input.focus()},updateToggleValue:function(){this.ui.toggle.toggleClass("checked",this.ui.toggle.prop("checked")),this.model.set("active",this.ui.toggle.hasClass("checked"))},blurHandler:function(){this.model.set("url",this.ui.input.val())}});return n}),_wAMD.define("editor-site-shared/build/utils",[],function(){var e={};return e.isUsingGlyphIcons=function(e){return e.tmpSocialIconFont||e["glyph-icons"]},e.convertBadgeData=function(e,t){var i;e=e||{};for(i in t)e[i]?"object"!=typeof e[i]&&(e[i]===!0?e[i]={url:!0,active:!0}:e[i]={url:e[i].length?e[i].replace(/^\w+:\/\//,""):void 0,active:e[i].length?!0:!1}):e[i]={url:void 0,active:!1};return e.undefined&&delete e.undefined,e},e}),_wAMD.define("tpl!elements/settings/tooltip-social-icons.tpl",[],function(){return'{{#hasActive}}\n	<h3 class="form-header">{{#tl}}templates.elements.settings.tooltip-social-icons_2{{/tl}}</h3>\n	<ul class="group group--flush group--sortable js-social-sort">\n		{{#badges}}\n			{{#active}}\n				<li class="group__item">\n					<div class="btn btn-control btn-control--borderless" data-name="{{name}}">\n						<span class="btn-control__label"><span class="wsite-social-item wsite-social-{{name}}"></span>{{label}}</span>\n					</div>\n				</li>\n			{{/active}}\n		{{/badges}}\n	</ul>\n{{/hasActive}}\n\n\n{{#hasInactive}}\n	<h3 class="form-header social-inactive-header">{{#tl}}templates.elements.settings.tooltip-social-icons_3{{/tl}}</h3>\n	<ul class="group group--flush">\n		{{#badges}}\n			{{^active}}\n				<li class="group__item">\n					<div class="btn btn-control btn-control--borderless social-inactive" data-name="{{name}}">\n						<span class="btn-control__label">\n							<span class="wsite-social-item wsite-social-{{name}}"></span>\n							{{label}}\n						</span>\n					</div>\n				</li>\n			{{/active}}\n		{{/badges}}\n	</ul>\n{{/hasInactive}}\n'}),_wAMD.define("element/editor/view/settings/item-views/SocialIconsItemView",["backbone-all","jquery","underscore","mustache","ui-framework/js/components/combo-dialog","ui-framework/js/components/sortable","element/editor/view/settings/item-views/EditSocialInfoItemView","editor/build/themes/data","editor-site-shared/build/utils","tpl!elements/settings/tooltip-social-icons.tpl"],function(e,t,i,n,o,r,s,a,l,c){var d=e.Marionette.ItemView.extend({template:n.compile(c),ui:{inactive:".btn-control",active:".group__item",reorder:".group__item-reorder",activeWrap:".group",reorder:".reorder"},events:{"click .btn-control":"openEditSocialIcon"},templateHelpers:function(){var e=this,t=e.model.get("badges"),n=e.model.get("label");return{hasActive:i.filter(t,function(e){return e.active}).length>0,hasInactive:i.filter(t,function(e){return!e.active}).length>0,label:_W.utl(n)}},onBeforeRender:function(){var e=this;e.firstRender||e.parsePropertyValues()},onRender:function(){var e=this;e.dialog.onBeforePop=function(){e.save()},e.dialog.onBeforeForward=function(){e.isReordering?e.hideReorder():e.showReorder()},e.ui.reorder.hide()},parsePropertyValues:function(){var e=this,n="string"==typeof this.model.get("value")?JSON.parse(this.model.get("value")):this.model.get("value"),o=["facebook","twitter","linkedin","mail","flickr","pinterest","plus","rss","vimeo","yahoo","youtube"],r=n.badge_order||o,s={facebook:{display:"Facebook",hint:_W.utl("javascript.element.editor.view.settings.item-views.SocialIconsItemView_2")},twitter:{display:"Twitter",hint:_W.utl("javascript.element.editor.view.settings.item-views.SocialIconsItemView_3")},linkedin:{display:"Linkedin",hint:_W.utl("javascript.element.editor.view.settings.item-views.SocialIconsItemView_4")},mail:{display:"Mail",hint:_W.utl("javascript.element.editor.view.settings.item-views.SocialIconsItemView_5")},flickr:{display:"Flickr",hint:_W.utl("javascript.element.editor.view.settings.item-views.SocialIconsItemView_6")},pinterest:{display:"Pinterest",hint:_W.utl("javascript.element.editor.view.settings.item-views.SocialIconsItemView_7")},plus:{display:"Google+",hint:_W.utl("javascript.element.editor.view.settings.item-views.SocialIconsItemView_8")},rss:{display:"RSS",hint:_W.utl("javascript.element.editor.view.settings.item-views.SocialIconsItemView_9")},vimeo:{display:"Vimeo",hint:_W.utl("javascript.element.editor.view.settings.item-views.SocialIconsItemView_10")},yahoo:{display:"Yahoo!",hint:_W.utl("javascript.element.editor.view.settings.item-views.SocialIconsItemView_11")},youtube:{display:"YouTube",hint:_W.utl("javascript.element.editor.view.settings.item-views.SocialIconsItemView_12")}},c=l.convertBadgeData(n.badges,s),d=a.currentThemeData.tmpSocialIconFont||a.currentThemeData["glyph-icons"],u={dribbble:{display:"dribbble",hint:_W.utl("javascript.element.editor.view.settings.item-views.SocialIconsItemView_13")},instagram:{display:"Instagram",hint:_W.utl("javascript.element.editor.view.settings.item-views.SocialIconsItemView_14")}};e.firstRender=!0;for(var h in u)if(d)s.hasOwnProperty(h)||(s[h]=u[h]),-1===r.indexOf(h)&&("instagram"===h&&t(Weebly.Elements.currentElement).find(".wsite-social-instagram").length>0?(r.splice(2,0,"instagram"),c[h]={active:!0,url:!0}):(r.push(h),c[h]={active:!1,url:!0}));else{s.hasOwnProperty(h)&&delete s[h];var p=r.indexOf(h);p>-1&&(r.splice(p,1),delete c[h])}c.undefined&&delete c.undefined;for(var f=0;f<r.length;f++){var m=c[r[f]];m&&r[f]&&(m.name=r[f],m.label=s[r[f]].display,m.index=f,m.hint=s[r[f]].hint)}e.model.set("badges",i.sortBy(i.values(c),"index"))},showReorder:function(){var e=this,i=e.dialog;i.$headerEl.find(".topbar__left").children().addClass("is-hidden"),i.$headerEl.find(".topbar").addClass("is-activated"),i.$headerEl.find(".topbar__right .topbar__action").text(_W.utl("javascript.element.editor.view.settings.item-views.SocialIconsItemView_15")),e.isReordering=!0,this.socialGroup=t(".js-social-sort"),this.sortableGroup=new r.create(this.socialGroup),this.socialGroup.addClass("is-sorting").find(".btn-control").toggleClass("is-sorting")},hideReorder:function(){var e=this,t=e.dialog;t.$headerEl.find(".topbar__left").children().removeClass("is-hidden"),t.$headerEl.find(".topbar").removeClass("is-activated"),t.$headerEl.find(".topbar__right .topbar__action").text(_W.utl("javascript.element.editor.view.settings.item-views.SocialIconsItemView_16")),e.isReordering=!1,this.sortableGroup.destroy(),this.socialGroup.removeClass("is-sorting").find(".btn-control").toggleClass("is-sorting"),e.processReorder()},processReorder:function(){var e=this,t=e.model.get("badges");i.each(e.ui.activeWrap.find(".btn-control"),function(e,n){var o=e.getAttribute("data-name");i.findWhere(t,{name:o}).index=n}),e.model.set("badges",i.sortBy(t,"index")),e.save()},updateBadge:function(e){var t=this.model.get("badges");t=i.map(t,function(t){return t.name===e.name&&(t=e),t}),this.model.set("badges",t),setTimeout(this.render.bind(this),300),this.save()},save:function(){var e,t=this,n=t.model.get("badges"),o=t.model.get("cfpid"),r=t.model.get("ucfpid"),s=[],a={};i.each(n,function(e){if(e&&e.name){var t=""===e.url?!0:e.url;s.push(e.name),a[e.name]={url:t,active:e.active}}}),e={badges:a,badge_order:s},Weebly.Elements.uproperty.properties[o].property_result=JSON.stringify(e),Weebly.Elements.onChange(r,o)},openEditSocialIcon:function(n){var r=this,a=n.currentTarget.className,l=t(n.currentTarget).data("name"),c=r.model.get("badges"),d=i.findWhere(c,{name:l}),u=new e.Model(d),h=i.where(c,{active:!0}).length>1||!d.active,p=new s({model:u,showToggle:h});p.dialogOptions={title:u.label,backLink:{isDirectional:!0,text:""}},p.listenTo(u,"change",function(e){r.updateBadge(e.toJSON())}),"form-control__indicator"===a?setTimeout(function(){r.dialog.pushPanel(new o.Panel(p))},150):r.dialog.pushPanel(new o.Panel(p))}});return d}),_wAMD.define("element/editor/view/settings/BaseElementOptionsView",["underscore","jquery","backbone-all","site/editor/app","editor-site-shared/relay","ui-framework/js/components/combo-dialog","element/editor/model/ElementSettingModel","element/editor/view/settings/utils","element/editor/view/settings/PaneTooltipView","element/editor/view/settings/ElementComboDialog","element/editor/view/settings/item-views/GroupItemView","element/editor/view/settings/item-views/StringItemView","element/editor/view/settings/item-views/IntegerItemView","element/editor/view/settings/item-views/SelectItemView","element/editor/view/settings/item-views/TextItemView","element/editor/view/settings/item-views/ColorItemView","element/editor/view/settings/item-views/ToggleItemView","element/editor/view/settings/item-views/CheckboxItemView","element/editor/view/settings/item-views/SliderItemView","element/editor/view/settings/item-views/RadioItemView","element/editor/view/settings/item-views/AlignItemView","element/editor/view/settings/item-views/HiddenItemView","element/editor/view/settings/item-views/SubLabelItemView","element/editor/view/settings/item-views/ButtonItemView","element/editor/view/settings/item-views/OptionsItemView","element/editor/view/settings/item-views/SocialIconsItemView","element/editor/view/settings/item-views/LinkItemView"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p,f,m,g,v,b,y,w,_,E,T,C,S,D){var I=i.Marionette.CompositeView.extend({itemView:d,template:!1,initialize:function(){this.listenTo(n.vent,{"element:options:dialog:close":function(){this.container&&this.container.close&&(this.container.close(),this.close())}.bind(this)}),n.reqres.setHandlers({"element:options:dialog:get:current":function(){return this.container}.bind(this),"element:options:dialog:get:element":function(){return t(this.options.element)}.bind(this)})},initGroups:function(){var e=this;e.sublabelTypes=["radio","select","color"],e.actionPanes=[],e.processPropertyData(),e.renderPanes()},processPropertyData:function(){var t=this,i=0;t.collection.models=t.collection.map(function(n){var o=function(n,o){var r,l,I,k={string:u,"int":h,checkbox:v,text:f,color:m,toggle:g,select:p,slider:b,radio:y,align:w,hidden:_,group:d,sublabel:E,button:T,social:S,optionItems:C,link:D};n.hidden||(t.hasSettings=!0,o=e.filter(o,function(e){return!e.hidden&&!e.detached}),I=o?o.length:0,("group"===n.type||e.contains(t.sublabelTypes,n.type)&&I>1||"button"===n.type&&"social"===n.action||"optionItems"===n.type)&&(n.actionPaneIndex=i,i++,l=new s(n),r="social"===n.action?k.social:k[n.type],itemView=new r({model:l,collection:t.collection}),t.listenTo(l,"change",function(e){a.setPropertyByKey(t.collection,"actionPaneIndex",e.get("actionPaneIndex"),e.get("value"))}),itemView.dialogOptions={title:_W.utl(n.label),backLink:{isDirectional:!0}},n.forwardLink&&(itemView.dialogOptions.forwardLink=_W.utl(n.forwardLink)),t.actionPanes.push(new c(itemView,{contentCollection:t.collection,actionPanes:t.actionPanes})),n.values&&e.each(n.values,function(e){var n,o,r=e.trigger;r&&(e.actionPaneIndex=i,i++,r.isTrigger=!0,o=k[r.type],n=new o({model:new s(r),collection:t.collection}),n.dialogOptions={title:_W.utl(r.label),backLink:{isDirectional:!0,text:""}},t.actionPanes.push(new c(n,{contentCollection:t.collection,actionPanes:t.actionPanes})))})))};return a.propertyIterator(n,o),n}),t.initialPane=new l({collection:t.collection,description:t.options.description})},renderPanes:function(){var e,i=this,n=t("#"+i.options.element.id);if(i.initialPane.dialogOptions={title:i.options.name||_W.utl("javascript.element.editor.view.settings.BaseElementOptionsView_1"),backLink:!1,hasContentPadding:!1},i.externalView){if(i.displayIframe())return void i.openSettingsIframe();i.initialPane.onRender=function(){i.externalView.delegateEvents(),this.$itemViewContainer.prepend(i.externalView.render().el)}}if(e=new c(i.initialPane,{contentCollection:i.collection,actionPanes:i.actionPanes}),i.collection.models[0]&&"social"===i.collection.models[0].get("action")&&Weebly.Elements.isSingleArea(i.options.element)){var o=i.actionPanes[0];o.options.backLink.isDirectional=!1,e=o,n=n.find(".wsite-social")}i.container=new r({outerClassName:"dialog-option-tip",panels:[e],size:"small",width:350,height:350,pointAt:n,allowLeftRight:!1,preferBottom:!0,isDraggable:!0}),i.container.open({parent:"#elementSettingsWrapper"})},onClose:function(){n.reqres.removeHandlers(["element:options:dialog:get:current","element:options:dialog:get:element"])}},{isElementSettingsOpen:function(){return t("#elementSettingsWrapper").find(".dialog").length>0}});return I}),_wAMD.define("editor/sections/utils",["jquery","underscore","editor/build/themes/data","site/published/sections/utils","editor-site-shared/ui/constants","element/editor/view/settings/BaseElementOptionsView"],function(e,t,i,n,o,r){var s={getSectionIdFromAreaInstance:function(e){var t;return e&&e.el?(t=e.el.parentElement,t.getAttribute("data-section")):void 0},getElementAreaInstanceFromSectionId:function(e,t){var i;return e&&(i=t.sections.get(e))?i.get("elementArea"):void 0},themeSupportsSections:function(e){return t.any(t.values(e.page_type_templates),this.pageHasSectionsMarkup)},pageHasSectionsMarkup:function(e){return e?e.has_sections:!1},pageHasHeaderSection:function(e){return e.has_header_section},pageHasDroppableSections:function(e,t){return e.has_sections&&"page"===t},isHeaderSectionSupported:function(e){var i=t.findWhere(e,{type:"content",name:o.HEADER_SECTION_TAG_NAME});return i?!0:!1},getPrefix:function(){var e=window.currentPageType;return i.currentThemeData.page_type_templates[e].section_prefix_mustache},getPostfix:function(){var e=window.currentPageType;return i.currentThemeData.page_type_templates[e].section_postfix_mustache},normalizeEmptyAreaSections:function(e,t){var i=[];if(!e)return e;for(var n=0,o=e.length;o>n;n++)"content"===e[n].type&&e[n].sections&&!e[n].name&&(i=t.map(function(t){var i=t.get("section_id"),o=e[n].sections[i]?e[n].sections[i]:[],r=t.toJSON();return r.elements=o,r}),t.length&&(e[n].sections=i));return e},combineSectionElementsToElements:function(e){var i=[];if(e)for(var n=0,o=e.length;o>n;n++)"content"===e[n].type&&e[n].sections&&!e[n].name&&(t.each(e[n].sections,function(e){i.push(e)}),t.flatten(i,!0),delete e[n].sections,e[n].elements=i,i=[])},mergeBackgroundData:function(e,i,n){var o={};return e=t.isArray(e)?{}:e,i=t.isArray(i)?{}:i,o=t.clone(e),t.each(i,function(e,t){var i=n;t&&(i=i+"-"+t),o[i]=e}),o},mergeVideoBackgroundData:function(e,i,n){var o={};return i?(e=t.isArray(e)?{}:e,t.each(i,function(e,t){var i=n+"-"+t;o[i]=this.generateVideoStillImage(e.background_url,e.encoding_done===!1)},this),t.extend({},e,o)):e},generateVideoStillImage:function(e,t){return{image:{url:e,filename:"",isStock:!1},position:"fill",loading:t===!0}},resizeEmptyMessage:function(i,n,r){if(r||(r=i.find(".empty-element-message")),r.length){(!t.isNumber(n)||t.isNaN(n))&&(n=this.getSectionInnerHeight(i));var s=r.parentsUntil(i).get().reduce(function(t,i){var n=e(i);return t+n.outerHeight()-n.height()},0),a=Math.max(n-s,0);r.height(a).children("span").css("display",a>=o.MIN_EMPTY_MESSAGE_HEIGHT?"":"none")}},getSectionInnerHeight:function(e,i){(!t.isNumber(i)||t.isNaN(i))&&(i=e.height());var n=e.find("."+o.SECTION_CONTENT_CLASS_NAME),r=n.outerHeightDeep(!0),s=n.outerHeight(),a=Math.max(0,r-s);return i-a},shouldShowEditMode:function(t){var i=e(t.target);return i.closest(".empty-element-message").length||!i.parents(".weebly-content-area").length&&!r.isElementSettingsOpen()&&!e("#editMenu:visible").length},clearSectionStyling:function(e){this.clearSectionAttributes(e),e.attr("style","")},clearSectionAttributes:function(e){e.removeClass([o.SECTION_BACKGROUND_VIDEO_CLASS_NAME,o.SECTION_BACKGROUND_COLOR_CLASS_NAME,o.SECTION_BACKGROUND_IMAGE_CLASS_NAME,"is-loading"].join(" ")),n.destroyVideoBackground(e)},previewBackgroundVideo:function(e,t){this.clearSectionAttributes(e),n.applyBackgroundVideo(e,t,!0),e.addClass(o.SECTION_BACKGROUND_VIDEO_CLASS_NAME)}};return s}),_wAMD.define("editor-site-shared/sections/SectionMixin",["jquery","underscore","editor/sections/utils"],function(e,t,i){return{SECTION_PROPERTIES:{VERSION_KEY:"_version",CURRENT_VERSION:"1.1",BACKGROUND_KEY:"background",BACKGROUND_TYPES_KEY:"type",BACKGROUND_EFFECTS_KEY:"effects",BASE_STYLE_KEY:"base_style",BACKGROUND_TYPES:{VIDEO:"video",IMAGE:"image_editor",COLOR:"color"}},SECTION_BACKGROUND_EFFECTS:[{label:_W.utl("sections.effects.none"),value:"none",available:["videoBackground","imageBackground","colorBackground"]},{label:_W.utl("sections.effects.parallax"),value:"parallax",available:["imageBackground"]},{label:_W.utl("sections.effects.reveal"),value:"reveal",available:["videoBackground","imageBackground","colorBackground"]}],getImageEditorObject:function(){var e={},t=this.MODEL_TYPE+"-"+this.id;return this.hasBackgroundImage()?e[t]=this.getBackgroundContent():this.hasBackgroundVideo()&&(e[t]=i.generateVideoStillImage(this.getVideoBackgroundSnapshot())),e},isBackgroundEditable:function(){return!0},isBackgroundResizeable:function(){return!0},getBackgroundType:function(){if(!this.isBackgroundEditable())return null;var e=this.get("properties")[this.SECTION_PROPERTIES.BACKGROUND_KEY];return e&&e[this.SECTION_PROPERTIES.BACKGROUND_TYPES_KEY]},getBackgroundContent:function(e){if(!this.isBackgroundEditable())return{};var t=this.get("properties")[this.SECTION_PROPERTIES.BACKGROUND_KEY];return e=e||t[this.SECTION_PROPERTIES.BACKGROUND_TYPES_KEY],t[e]||{}},hasBackgroundEffects:function(){var e=this.get("properties")[this.SECTION_PROPERTIES.BACKGROUND_KEY],t=e[this.SECTION_PROPERTIES.BACKGROUND_TYPES_KEY];return e[this.SECTION_PROPERTIES.BACKGROUND_EFFECTS_KEY]&&e[this.SECTION_PROPERTIES.BACKGROUND_EFFECTS_KEY][t]?!0:!1},getBackgroundEffects:function(){var e=this.get("properties")[this.SECTION_PROPERTIES.BACKGROUND_KEY],t=e[this.SECTION_PROPERTIES.BACKGROUND_TYPES_KEY];return e[this.SECTION_PROPERTIES.BACKGROUND_EFFECTS_KEY]&&e[this.SECTION_PROPERTIES.BACKGROUND_EFFECTS_KEY][t]?e[this.SECTION_PROPERTIES.BACKGROUND_EFFECTS_KEY][t]:{}},setBackgroundEffects:function(e){t.isObject(e)||(e={value:{}});var i=JSON.parse(JSON.stringify(this.get("properties"))),n=i[this.SECTION_PROPERTIES.BACKGROUND_KEY],o=n[this.SECTION_PROPERTIES.BACKGROUND_TYPES_KEY];i[this.SECTION_PROPERTIES.BACKGROUND_KEY][this.SECTION_PROPERTIES.BACKGROUND_EFFECTS_KEY]||(i[this.SECTION_PROPERTIES.BACKGROUND_KEY][this.SECTION_PROPERTIES.BACKGROUND_EFFECTS_KEY]={}),i[this.SECTION_PROPERTIES.BACKGROUND_KEY][this.SECTION_PROPERTIES.BACKGROUND_EFFECTS_KEY][o]=e,this.set("properties",i)},isCustomized:function(){if(!this.isBackgroundEditable())return!1;var e=this.get("properties");if(!e||!e.background)return!1;var t=e.background.type;return t?this.isBackgroundWhite()?!1:e.background[t].is_customized===!1?!1:!0:!1},isBackgroundWhite:function(){return"#fff"===this.getBackgroundContent(this.SECTION_PROPERTIES.BACKGROUND_TYPES.COLOR)["background-color"]},userSelectedBackground:function(){var e=this.get("properties");return e&&e.background&&e.background.user_selected},getSectionStyle:function(){var e="",i={};return this.hasBaseStyle()&&(i=t.extend(i,this.getBaseStyle())),this.hasBackgroundColor()&&(i=t.extend(i,this.getBackgroundContent())),t.each(i,function(t,i){e+=i+": "+t+"; "}),e.trim()},getBaseStyle:function(){return this.isBackgroundEditable()?this.get("properties")[this.SECTION_PROPERTIES.BASE_STYLE_KEY]||{}:{}},hasBaseStyle:function(){return this.isBackgroundEditable()?t.keys(this.get("properties")[this.SECTION_PROPERTIES.BASE_STYLE_KEY]).length>0:!1},setBaseStyle:function(e,i){var n=JSON.parse(JSON.stringify(this.get("properties"))),o=n[this.SECTION_PROPERTIES.BASE_STYLE_KEY]||{};n[this.SECTION_PROPERTIES.BASE_STYLE_KEY]=t.extend(o,e),this.set("properties",n,i)},resetBaseStyle:function(){var e=JSON.parse(JSON.stringify(this.get("properties")));delete e[this.SECTION_PROPERTIES.BASE_STYLE_KEY],this.set("properties",e)},unsetStyling:function(e,t){var t=t||{};e?this.setBackgroundWhite():this.setEmptyBackground(),this.resetBaseStyle(),t.stringify&&this.stringifyProperties()},stringifyProperties:function(){var e=this.get("properties");"string"!=typeof this.get("properties")&&this.set("properties",JSON.stringify(e))},setBackgroundProperties:function(e,t,i){var e=e||null,n=JSON.parse(JSON.stringify(this.get("properties"))),o=n[this.SECTION_PROPERTIES.BACKGROUND_KEY];i=i||{},i.overwrite&&(n.background={},o=n.background),i.dontSwitchType||(o[this.SECTION_PROPERTIES.BACKGROUND_TYPES_KEY]=e),t?(o[e]=t,o.user_selected=!0):null===e&&(o.user_selected=!0),this.set("properties",n,i)},setBackgroundType:function(e,t){var i=JSON.parse(JSON.stringify(this.get("properties"))),n=i[this.SECTION_PROPERTIES.BACKGROUND_KEY];n[this.SECTION_PROPERTIES.BACKGROUND_TYPES_KEY]=e,n.user_selected=!0,this.set("properties",i,t)},setBackgroundWhite:function(){this.setBackgroundColor({"background-color":"#fff","background-image":"none"},{overwrite:!0})},setTypeToVideo:function(e){this.setBackgroundType(this.SECTION_PROPERTIES.BACKGROUND_TYPES.VIDEO,e)},setTypeToImage:function(e){this.setBackgroundType(this.SECTION_PROPERTIES.BACKGROUND_TYPES.IMAGE,e)},setTypeToColor:function(e){this.setBackgroundType(this.SECTION_PROPERTIES.BACKGROUND_TYPES.COLOR,e)},setBackgroundVideo:function(e,t){this.setBackgroundProperties(this.SECTION_PROPERTIES.BACKGROUND_TYPES.VIDEO,e,t)},setBackgroundColor:function(e,t){this.setBackgroundProperties(this.SECTION_PROPERTIES.BACKGROUND_TYPES.COLOR,e,t)},setBackgroundImage:function(e,t){this.setBackgroundProperties(this.SECTION_PROPERTIES.BACKGROUND_TYPES.IMAGE,e,t)},setEmptyBackground:function(e){this.setBackgroundProperties(null,null,e)},hasBackgroundVideo:function(){return this.getBackgroundType()===this.SECTION_PROPERTIES.BACKGROUND_TYPES.VIDEO},hasBackgroundColor:function(){return this.getBackgroundType()===this.SECTION_PROPERTIES.BACKGROUND_TYPES.COLOR},hasBackgroundImage:function(){return this.getBackgroundType()===this.SECTION_PROPERTIES.BACKGROUND_TYPES.IMAGE},hasEmptyBackground:function(){return!this.getBackgroundType()},hadBackgroundVideo:function(){return!this.hasBackgroundVideo()&&t.size(this.getBackgroundContent(this.SECTION_PROPERTIES.BACKGROUND_TYPES.VIDEO))>0},hadBackgroundColor:function(){return!this.hasBackgroundColor()&&t.size(this.getBackgroundContent(this.SECTION_PROPERTIES.BACKGROUND_TYPES.COLOR))>0},hadBackgroundImage:function(){return!this.hasBackgroundImage()&&t.size(this.getBackgroundContent(this.SECTION_PROPERTIES.BACKGROUND_TYPES.IMAGE))>0},getVideoBackgroundSnapshot:function(){return this.getBackgroundContent().background_url}}}),_wAMD.define("editor/sections/model/BaseSection",["underscore","backbone-all","editor-site-shared/sections/SectionMixin"],function(e,t,i){var n={baseObject:{get:function(i){var n=t.Model.prototype.get.apply(this,arguments);return"properties"===i&&e.isString(n)&&(n=JSON.parse(n)),n}}};return n.model=t.Model.extend(i).extend(n.baseObject),n}),_wAMD.define("editor/sections/collection/BaseSection",["backbone-all","editor/sections/model/BaseSection"],function(e,t){var i={baseObject:{model:t.model,comparator:function(e){return e.get("section_order")},getBackgroundImages:function(){var e={};return this.each(function(t){var i,n;t.hasBackgroundImage()&&(i=t.get("section_id"),n=t.getBackgroundContent(),e[i]=n)}),e},getBackgroundVideos:function(){var e={};return this.each(function(t){if(t.hasBackgroundVideo()){var i=t.get("section_id"),n=t.getBackgroundContent();e[i]=n}}),e}}};return i.collection=e.Collection.extend(i.baseObject),i}),_wAMD.define("editor-site-shared/sections/HeaderSectionSettingModel",["backbone-all","editor-site-shared/relay","editor-site-shared/ui/constants","editor-site-shared/sections/SectionMixin","editor-site-shared/ui/context","editor/build/themes/data"],function(e,t,i,n,o,r){var s=e.Model.extend(n).extend({idAttribute:"header_setting_id",MODEL_TYPE:"header-section",initialize:function(e){o.inEditorContext()||(t.commands.removeHandlers(["headerSectionSetting:properties:update","headerSectionSetting:background:image:update"]),t.commands.setHandlers({"headerSectionSetting:properties:update":this.updateProperties.bind(this),"headerSectionSetting:background:image:update":this.updateHeaderSectionBackgroundImage.bind(this)}))},isBackgroundEditable:function(){return r.getCurrentThemeHeaderSectionSettingValue("editable-background",!0,window.currentPageType)},isBackgroundResizeable:function(){return r.getCurrentThemeHeaderSectionSettingValue("resizable",!0,window.currentPageType)},updateProperties:function(e){this.set("properties",e),this.trigger("headerSectionSetting:updated")},updateHeaderSectionBackgroundImage:function(e,t){this.setBackgroundImage(t),this.isNew()&&this.set("header_setting_id",e)},defaults:function(){return{user_id:window.userID,site_id:window.currentSite,page_id:window.currentPage,properties:this.getDefaultProperty()}},getDefaultProperty:function(){var e=this.SECTION_PROPERTIES,t={};return t[e.BACKGROUND_KEY]={},t[e.VERSION_KEY]=e.CURRENT_VERSION,t[e.BACKGROUND_KEY][e.BACKGROUND_TYPES_KEY]=null,t},set:function(t,i,n){var o;return null==t?this:("object"==typeof t?(o=t,n=i):(o={})[t]=i,"string"==typeof o.properties&&(o.properties=JSON.parse(o.properties)),e.Model.prototype.set.call(this,o,n))},generateSelector:function(){return"."+i.HEADER_SECTION_CLASS_NAME}});return s}),_wAMD.define("editor-site-shared/sections/BaseHeaderSectionModel",["underscore","backbone-all","editor/page-manager/pages","editor-site-shared/sections/HeaderSectionSettingModel","editor-site-shared/sections/SectionMixin"],function(e,t,i,n,o){var r=t.Model.extend({idAttribute:"header_setting_id",TARGET_PAGE:0,TARGET_SEARCH:1,TARGET_STORE_CATEGORY:2,TARGET_STORE_PRODUCT:3,TARGET_STORE_CHECKOUT:4,PRODUCT_PAGE_REGEX:/^0\/store\/p([0-9]+)\/.+/,CATEGORY_PAGE_REGEX:/^0\/store\/c([0-9]+)\/.+/,getTargetType:function(e,t){var n;if("page"===e||"blog"===e)n=this.TARGET_PAGE;else if("store"===e)if(/^\d+$/.test(t)){var o=i.getPage(t),r=o.get("page_kind");n="category"===r||"store"===r?this.TARGET_STORE_CATEGORY:this.TARGET_STORE_PRODUCT}else this.CATEGORY_PAGE_REGEX.test(t)?n=this.TARGET_STORE_CATEGORY:this.PRODUCT_PAGE_REGEX.test(t)&&(n=this.TARGET_STORE_PRODUCT);else console.error("Target type not found");return n},getTargetId:function(e,t){var n;if("page"===e||"blog"===e)n=t;else if("store"===e)if(/^\d+$/.test(t)){var o=i.getPage(t);n=o.get("store_page_kind_id")}else this.CATEGORY_PAGE_REGEX.test(t)?n=t.match(this.CATEGORY_PAGE_REGEX)[1]:this.PRODUCT_PAGE_REGEX.test(t)&&(n=t.match(this.PRODUCT_PAGE_REGEX)[1]);else console.error("Target type not found");
return n},defaults:function(){var e=this.getTargetId(window.currentPageKind,window.currentPage),t=this.getTargetType(window.currentPageKind,window.currentPage);return{user_id:window.userID,site_id:window.currentSite,target_id:e,target_type:t,base_setting:null,setting:new n}},initialize:function(t){this.on({change:this.onChange}),this.listenTo(this.get("setting"),{change:this.onChange});var i=function(){var t=this.get("setting"),i=e.toArray(arguments),n=i.shift();return t[n].apply(t,i)};e.each(o,function(t,n){e.isUndefined(this[n])&&e.isFunction(t)&&(this[n]=e.partial(i,n))},this)},set:function(i,o,r){var s;return null==i?this:("object"==typeof i?(s=i,r=o):(s={})[i]=o,"string"==typeof s.base_setting&&(s.base_setting=JSON.parse(s.base_setting)),!s.setting||s.setting instanceof n||(e.isArray(s.setting)&&(s.setting=s.setting[0]),this.get("setting")instanceof n?(this.get("setting").set(s.setting,{silent:!0}),delete s.setting):s.setting=new n(s.setting)),t.Model.prototype.set.call(this,s,r))},toJSON:function(){var e=t.Model.prototype.toJSON.apply(this,arguments);return e.setting=e.setting.toJSON(),e}});return r}),_wAMD.define("editor/sections/model/HeaderSection",["editor-site-shared/relay","editor-site-shared/sections/BaseHeaderSectionModel"],function(e,t){var i=t.extend({onChange:function(){e.execute("headerSection:set:properties",this.id,this.toJSON())},clear:function(){var e=(this.get("setting"),this.getTargetType(window.currentPageKind,window.currentPage)),t=this.getTargetId(window.currentPageKind,window.currentPage);return Weebly.Section.RPC.HeaderSection.clear(e,t)},sync:function(e,t,i){return Weebly.Section.RPC.HeaderSection.saveHeaderSection(t.get("target_id"),t.get("target_type"),t.toJSON()).done(function(e){return t.set(e),t.trigger("sync",t),t})}});return i}),_wAMD.define("editor/sections/collection/HeaderSection",["underscore","backbone-all","editor/sections/model/HeaderSection"],function(e,t,i){var n=t.Collection.extend({model:i,fetchOptions:{},fetch:function(e){var t=this,i=e.target_id,n=e.target_type;return Weebly.Section.RPC.HeaderSection.getHeaderSection(i,n).done(function(o){var r=e.reset?"reset":"set",s=o?o:{};return s.target_id=i,s.target_type=n,t[r]([s],e),t.trigger("sync",t,[s],e),t})}});return n}),_wAMD.define("site/editor/ui/HoverHelper",["jquery"],function(e){function t(t){function i(){n(),r++}function n(){s||(s=!0,t.mouseover&&t.mouseover())}function o(){var e=++r;setTimeout(function(){e==r&&(s=!1,t.mouseout&&t.mouseout())},t.delay||100)}var r=0,s=!1,a=e();e.each(t.elements||[],function(){a=a.add(this)}),a.on("mouseover",i).on("mousemove",n).on("mouseout",o),this.destroy=function(){a.off("mouseover",i).off("mousemove",n).off("mouseout",o)}}return t}),_wAMD.define("tpl!editor/build/hover-controls.tpl",[],function(){return"\n<div class='hovercontrol-wrap'>\n	{{#isSection}}\n		<div class='button'>\n			<div class='main'>\n				{{#tl}}templates.hovercontrol.hover-controls_7{{/tl}}\n			</div>\n		</div>\n	{{/isSection}}\n	{{^isSection}}\n		<div class='button {{#showDropdown}}button-complex{{/showDropdown}}'>\n			<div class='main'>\n				{{#isSlideshow}}\n					{{#tl}}templates.hovercontrol.hover-controls_1{{/tl}}\n				{{/isSlideshow}}\n				{{^isSlideshow}}\n					{{#tl}}templates.hovercontrol.hover-controls_2{{/tl}}\n				{{/isSlideshow}}\n			</div>\n			{{#showDropdown}}\n				<div class='expander'><div></div></div>\n			{{/showDropdown}}\n		</div>\n	{{/isSection}}\n	{{#showDropdown}}\n		<div class='menu' style='display:none'>\n			<div class='carrot'></div>\n			<div class='inner'>\n				<div class='item image'>\n					<div>\n						{{#tl}}templates.hovercontrol.hover-controls_3{{/tl}}\n					</div>\n				</div>\n				{{#allowNewImage}}\n				<div class='item new-image'>\n					<div>\n						{{#tl}}templates.hovercontrol.new-image{{/tl}}\n					</div>\n				</div>\n				{{/allowNewImage}}\n				{{#allowSlideshow}}\n				<div class='item slideshow'>\n					<div>\n						{{#hasSlideshowData}}\n							{{#tl}}templates.hovercontrol.hover-controls_4{{/tl}}\n						{{/hasSlideshowData}}\n						{{^hasSlideshowData}}\n							{{#tl}}templates.hovercontrol.hover-controls_5{{/tl}}\n						{{/hasSlideshowData}}\n					</div>\n				</div>\n				{{/allowSlideshow}}\n				{{#allowReset}}\n				<div class='item reset'>\n					<div>\n						{{#tl}}html.weebly.slideshow-editor.partial_3{{/tl}}\n					</div>\n				</div>\n				{{/allowReset}}\n			</div>\n		</div>\n	{{/showDropdown}}\n</div>\n{{#allowPageTypes}}\n	<div class='page-type-wrap'>\n		<div class='expander'><div></div></div>\n		<div class='menu' style='display:none'>\n			<div class='carrot'></div>\n			<div class='inner'>\n				<div class='title'>{{#tl}}templates.hovercontrol.hover-controls_6{{/tl}}</div>\n				<div class='items'>\n					{{#pageTypes}}\n						<div class='item {{className}}' data-page-type='{{name}}'>\n							<div class='item-icon'></div>\n							<div class='item-text'>{{title}}</div>\n						</div>\n					{{/pageTypes}}\n				</div>\n			</div>\n		</div>\n	</div>\n{{/allowPageTypes}}\n"}),_wAMD.define("site/editor/ui/HoverControls",["jquery","backbone","mustache","editor-site-shared/relay","site/editor/ui/HoverHelper","tpl!editor/build/hover-controls.tpl"],function(e,t,i,n,o,r){r=i.compile(r);var s=t.View.extend({isEditMenuExpanded:!1,isTypeMenuExpanded:!1,hoverHelper:null,className:"header-hover-container w-ui",events:{"click .hovercontrol-wrap .main":"edit","click .hovercontrol-wrap .item.image":"editImage","click .hovercontrol-wrap .item.new-image":"uploadImage","click .hovercontrol-wrap .item.reset":"resetHeaderImage","click .hovercontrol-wrap .item.slideshow":"editSlideshow","click .hovercontrol-wrap .expander":"toggleEditMenu","click .page-type-wrap .expander":"toggleTypeMenu","click .page-type-wrap .item":"pageTypeClick"},getAvailablePageTypes:function(){return getOrderedPageTypes(currentThemeData.page_type_templates,Weebly.view.isMobileView)},initialize:function(e){this.options=e},render:function(){var t=this,i=t.getAvailablePageTypes(),n=t.options.currentHeader,o=e.map(i,function(e){var t=e;return e==currentPageType&&(t+=" current"),{name:e,className:t,title:_W.utl("db.PageType."+e+".name")}}),s=this.options.allowSlideshow||this.options.allowNewImage||this.options.allowReset;return t.$el.hide().html(r({hasSlideshowData:n&&n.data&&n.data.slideshow,isSlideshow:n&&n.data&&"slideshow"===n.data.type,isSection:t.options.isSection,allowSlideshow:t.options.allowSlideshow,allowPageTypes:t.options.allowPageTypes&&o.length>1,allowNewImage:this.options.allowNewImage,allowReset:this.options.allowReset,pageTypes:o,showDropdown:s})),t.attach(),t},attach:function(){var t=this,i=e(t.options.targetElement),n=e(t.options.appendToElement);t.hoverHelper=new o({delay:300,elements:[i,t.$el],mouseover:function(){t.getIsEditing()||(t.show(),t.position())},mouseout:function(){t.hide()}}),t.$el.appendTo(n)},position:function(){var t=this,i=e(t.options.targetElement),n=e(t.options.appendToElement),o=n.offset(),r=i.offset();t.$el.css({top:0,left:0}),"topright"==t.options.position?t.$el.css({top:r.top-o.top+n.scrollTop()+10,left:r.left-o.left+n.scrollLeft()+i.outerWidth()-10-t.$el.width()}):t.$el.css({top:r.top-o.top+n.scrollTop()+i.outerHeight()-10-t.$el.height(),left:r.left-o.left+n.scrollLeft()+i.outerWidth()-20-t.$el.width()})},toggleEditMenu:function(){this.isEditMenuExpanded?this.contractEditMenu():this.expandEditMenu()},expandEditMenu:function(){this.$(".hovercontrol-wrap .expander").addClass("pressed"),this.$(".hovercontrol-wrap .menu").show(),this.isEditMenuExpanded=!0},contractEditMenu:function(){this.$(".hovercontrol-wrap .expander").removeClass("pressed"),this.$(".hovercontrol-wrap .menu").hide(),this.isEditMenuExpanded=!1},toggleTypeMenu:function(){this.isTypeMenuExpanded?this.contractTypeMenu():this.expandTypeMenu()},expandTypeMenu:function(){this.$(".page-type-wrap .expander").addClass("pressed"),this.$(".page-type-wrap .menu").show(),this.isTypeMenuExpanded=!0},contractTypeMenu:function(){this.$(".page-type-wrap .expander").removeClass("pressed"),this.$(".page-type-wrap .menu").hide(),this.isTypeMenuExpanded=!1},show:function(){this.$el.show()},hide:function(){this.contractEditMenu(),this.contractTypeMenu(),this.$el.hide()},edit:function(){this.hide();var e=this.options.currentHeader,t=e&&e.data&&"slideshow"===e.data.type;this.options.editCallback({forceSlideshow:t,width:this.options.width,height:this.options.height})},uploadImage:function(){this.hide(),n.request("chooseImage",{type:"headerimage",height:this.options.height,width:this.options.width}).done(function(e){this.options.editCallback({forceImage:!0,imageEditorData:e,width:this.options.width,height:this.options.height})}.bind(this))},resetHeaderImage:function(){this.trigger("click:reset")},editImage:function(){this.hide(),this.options.editCallback({forceImage:!0,width:this.options.width,height:this.options.height})},editSlideshow:function(){this.hide(),this.options.editCallback({forceSlideshow:!0})},getIsEditing:function(){return this.options.getIsEditing?this.options.getIsEditing():!1},pageTypeClick:function(t){var i=e(t.currentTarget),n=i.data("page-type");this.changePageType(n)},changePageType:function(t){this.contractTypeMenu();var i=e("#wsite-com-area-category").attr("data-id"),o=currentPage.replace(/^(\d+).*$/,"$1");n.request("pages:save",o,{page_id:o,layout:t,store_page_kind_id:i})},destroy:function(){this.hoverHelper.destroy(),this.remove()}});return s}),_wAMD.define("editor-site-shared/image-editor/data",["jquery","editor-site-shared/relay"],function(e,t){var i,n={};return t.reqres.setHandlers({"imageeditor:data:sync":function(e){n.setCurrentHeader(e,!0)}}),n.setData=function(t){var i=n.getCurrentHeader();return i.data=e.extend(!0,{},t),n.setCurrentHeader(i)},n.setCurrentHeader=function(n,o){return i=n,o!==!0?t.request("imageeditor:data:sync",i):e.Deferred().resolve().promise()},n.getCurrentHeader=function(){return e.extend(!0,{},i)},n}),_wAMD.define("free-trial/dialogs/PremiumElementDialog",["jquery","ui-framework/js/components/combo-dialog"],function(e,t){return t.extend({parent:"#premium-element-warning-dialog",isModal:!0,isModalDark:!0,initialize:function(){var e=this;e.listenTo(editorApp.vent,"billing:upgrade:window",e.close)}})}),_wAMD.define("shared/permissions/permissions",["backbone"],function(e){var t=e.Model.extend({initialize:function(){var e=this;e.getPermissions()},can:function(e){var t=this,i=t.get("permissions");return i[e]},has:function(e){return this.can(e)},is:function(e){return this.can(e)},getPermissions:function(){var e=this;e.set("permissions",Weebly.Permissions)}});return t}),_wAMD.define("tpl!free-trial/premium-element-warning.tpl",[],function(){return'<div class="premium-element-warning-container">\n	<div class="premium-element-warning-image-container">\n		<img src="//{{ASSETS_BASE}}/images/editor/free-trial/must-upgrade-illustration.png">\n	</div>\n	<h2>\n		{{headerText}}\n	</h2>\n	<p>\n		{{descriptionText}}\n	</p>\n	<button class="btn--rounded btn--secondary upgrade-button">\n		<span class="icon">bolt</span> {{#tl}}templates.free-trial.premium-element-warning_1{{/tl}}\n	</button>\n	{{#eligibleForFreeTrial}}\n	<a class="free-trial-link">\n		{{#tl}}templates.free-trial.premium-element-warning_2{{/tl}}\n	</a>\n	{{/eligibleForFreeTrial}}\n</div>'}),_wAMD.define("free-trial/views/PremiumElementWarningView",["jquery","backbone-all","mustache","editor/app","shared/permissions/permissions","analytics/Tracking","tpl!free-trial/premium-element-warning.tpl"],function(e,t,i,n,o,r,s){var a=t.Marionette.ItemView.extend({template:i.compile(s),templateHelpers:function(){var e=this;return{imageUrl:e.imageUrl,headerText:e.headerText,descriptionText:e.descriptionText,eligibleForFreeTrial:e.eligibleForFreeTrial}},events:{"click a.free-trial-link":"onFreeTrialLinkClicked","click button.upgrade-button":"onUpgradeClicked"},initialize:function(e){var t=this;t.userPermissions=new o,t.eligibleForFreeTrial=n.site.get("is_eligible_for_free_trial")&&t.userPermissions.is("site_owner"),t.elementId=e.elementId,t.setElementSpecificData(t.elementId),r.trackEvent("navigation","modal_view","editor_upgrade_modal")},setElementSpecificData:function(e){var t=this,i={siteSearch:"90122486",hdVideo:"63419613",audio:"67748238",fileUpload:"82023692"},n={editFooter:"edit_footer"};switch(e){case i.siteSearch:t.headerText=_W.utl("javascript.free-trial.views.PremiumElementWarningView_14"),t.descriptionText=_W.utl("javascript.editor.dialogs.PremiumElementDialogService_4");break;case i.hdVideo:t.headerText=_W.utl("javascript.free-trial.views.PremiumElementWarningView_15"),t.descriptionText=_W.utl("javascript.editor.dialogs.PremiumElementDialogService_6");break;case i.audio:t.headerText=_W.utl("javascript.free-trial.views.PremiumElementWarningView_16"),t.descriptionText=_W.utl("javascript.editor.dialogs.PremiumElementDialogService_8");break;case i.fileUpload:t.headerText=_W.utl("javascript.free-trial.views.PremiumElementWarningView_17"),t.descriptionText=_W.utl("javascript.editor.dialogs.PremiumElementDialogService_13");break;case n.editFooter:t.headerText=_W.utl("javascript.free-trial.views.PremiumElementWarningView_18"),t.descriptionText=_W.utl("javascript.editor.dialogs.PremiumElementDialogService_11");break;default:t.headerText=_W.utl("javascript.editor.dialogs.PremiumElementDialogService_12"),t.descriptionText=_W.utl("javascript.editor.dialogs.PremiumElementDialogService_13")}t.render()},onFreeTrialLinkClicked:function(e){n.loading.start("PremiumElementWarningView::onFreeTrialLinkClicked"),Weebly.Editor.RPC.Site.startFreeTrial().done(function(){window.location.reload()}).fail(function(){n.loading.stop("PremiumElementWarningView::onFreeTrialLinkClicked")}),r.trackEvent("navigation","click_internal","ft_editor_upgrade_modal_start_trial")},onUpgradeClicked:function(){var e=this;n.vent.trigger("billing:upgrade:window",{siteID:currentSite,refer:"premium_element_upsell_dialog",type:"upgrade",restrictionID:e.elementId}),r.trackEvent("navigation","click_internal","editor_upgrade_modal_upgrade_button")}});return a}),_wAMD.define("free-trial/dialogs/PremiumElementDialogService",["jquery","editor/app","analytics/Tracking","free-trial/dialogs/PremiumElementDialog","free-trial/views/PremiumElementWarningView"],function(e,t,i,n,o){var r=function(){var e={};return e.open=function(e){var r=t.site.get("is_eligible_for_free_trial")?_W.utl("javascript.free-trial.dialogs.PremiumElementDialogService_3"):_W.utl("javascript.free-trial.dialogs.PremiumElementDialogService_2"),s=new n.Panel({title:r,content:new o({elementId:e})}),a=new n({panels:[s]});a.on("close",function(){i.trackEvent("navigation","click_internal","editor_upgrade_modal_close")}),i.trackEvent("editor.elements","add_element_attempt",e),a.open()},{open:e.open}}();return r}),_wAMD.define("editor/build/mobile/data",["jquery"],function(e){var t={},i={};t.getHeaderPlaceholder=function(e){var t="";return"short-header"==e?t=i.mobile_header_placeholder_short||"":"tall-header"==e?t=i.mobile_header_placeholder_tall||"":"landing"==e&&(t=i.mobile_header_placeholder_landing||""),t||(t=i.mobile_header_placeholder||""),t},t.isThemeNoHeader=function(e){for(var t in e)if(-1!=e[t].body.indexOf("wsite-header"))return!1;return!0},t.isHeaderDisabled=function(){return i.mobile_headers_disabled?!0:t.isThemeNoHeader(currentThemeData.page_type_templates)},t.setSiteSetting=function(e,t){i[e]=t},t.getSiteSetting=function(e){return i[e]},t.setSiteSettings=function(t){e.extend(i,t)},t.getSiteSettings=function(){return i},t.clearSettingsCache=function(){i={}},t.serializeSiteSettings=function(){var e="";for(var t in i)if("mobile_themes"!=t){var n=i[t]?i[t]:0;e+=t+String.fromCharCode(3)+n+String.fromCharCode(2)}return e};var n=!1;return t.isMobileEditor=function(e){return n="undefined"!=typeof e?e:n},window.Weebly.mobile||(window.Weebly.mobile={}),window.Weebly.mobile.isMobileEditor=t.isMobileEditor,t}),_wAMD.define("editor/pages/utils",["jquery","underscore","config","editor/build/mobile/data","editor/page-manager/pages","commerce/editor/collection/Category"],function(e,t,i,n,o,r){var s={};s.isCommerceCategoryPageID=function(e){if(e.indexOf("/")>0)return-1!==e.search(/store\/c[0-9]+\/.+/);var i=t.result(o.getPage(e),"toJSON");return i&&"category"===i.page_kind},s.getCategoryPromise=function(t){var n,o=e.Deferred();return!i.chromeless&&s.isCommerceCategoryPageID(t)?(n=new r,n.fetch().done(function(e){o.resolve(n)})):o.resolve(),o.promise()},s.getPageTypePromise=function(e,i,n){var r,a;return s.getCategoryPromise(e).then(function(l){if(r=s.getPageType(e.replace(/\/.*/,""),i,n),l)if(e.indexOf("/")>0)a=l.find(function(t){return-1!==e.indexOf(t.get("site_link"))}),r=a&&a.get("page_layout")?a.get("page_layout"):r;else{var c=t.result(o.getPage(e),"toJSON");c&&(a=l.findWhere({site_category_id:c.store_page_kind_id}),r=a&&a.get("page_layout")?a.get("page_layout"):r)}return r})},s.getPageType=function(e,i,r){var a=t.result(o.getPage(e),"toJSON"),l="no-header";if(Weebly.view.isNativeApp&&Weebly.view.isAdaptiveView)return"no-header";if(a&&(l=r&&a.mobile_layout?a.mobile_layout:a.layout),r&&a&&!a.mobile_layout&&n.isHeaderDisabled()&&(l="no-header"),n.isMobileEditor()&&!r&&a&&("header"==a.mobile_layout?l="tall-header"==a.layout||"short-header"==a.layout?a.layout:"tall-header":"landing"==a.mobile_layout&&(l="landing")),a&&"category"===a.page_kind&&!a.layout)return"no-header";var c=t.keys(i.page_type_templates);if(t.contains(c,l))return l;if("tall-header"==l||"short-header"==l){if(t.contains(c,"header"))return"header"}else if("title"==l){if(t.contains(c,"header"))return"header";if(t.contains(c,"no-header"))return"no-header"}return s.getDefaultPageType(i,r)},window.getPageType=s.getPageType,s.getDefaultPageType=function(e,t){return s.getOrderedPageTypes(e.page_type_templates,t)[0]},window.getDefaultPageType=s.getDefaultPageType;var a=["index","homepage","header","tall-header","short-header","no-header","landing","splash"],l=["index","no-header","header","tall-header","short-header","homepage","landing","splash"];return s.getOrderedPageTypes=function(e,i){var n=t.keys(e),o=[],r=[],s=i?l:a;return t.each(s,function(e){-1!=n.indexOf(e)&&o.push(e)}),t.each(n,function(e){-1==s.indexOf(e)&&r.push(e)}),r.sort(),o.concat(r)},window.getOrderedPageTypes=s.getOrderedPageTypes,s.getTopLevelSummary=function(){var i=[],n=o.toJSON();return t.each(n,function(t){if(!t.hidden){var n={id:t.id,title:t.title,onclick:function(){return config.chromeless?e(event.target.parentNode).data("hasChildren")?e(event.target.parentNode).trigger("mouseover"):External.navClicked(t.id):t.extlink||t.nonclickable||notBeenDragged()&&(noJump=1,goUpdateList(t.id,1)),!1}};t.extlink&&(n.onmouseover=function(e){s.onExternalLinkHover(t,e||window.event)},n.onmouseout=function(){s.hideNavTooltip()}),i.push(n)}}),i},window.getTopLevelSummary=s.getTopLevelSummary,s.onExternalLinkHover=function(t,i){var n=window._W.utl("javascript.editor.pages.utils_2")+" "+t.extlink;s.tooltip||(s.tooltip=e("<div/>",{"class":"ext-tooltip"}),e(document.body).append(s.tooltip)),s.tooltip.css({top:i.pageY+10+"px",left:i.pageX+10+"px"}).text(n).show()},s.hideNavTooltip=function(){s.tooltip&&s.tooltip.hide()},s}),_wAMD.define("editor/design/data",["editor-site-shared/ui/constants"],function(e){var t={};return t.DESIGN_OPTIONS_SELECTORS={global:".wsite-elements.wsite-not-footer:not(.wsite-header-elements) div.paragraph, .wsite-elements.wsite-not-footer:not(.wsite-header-elements) p:not(.wsite-image-placeholder-text), .wsite-elements.wsite-not-footer:not(.wsite-header-elements) .product-block .product-title, .wsite-elements.wsite-not-footer:not(.wsite-header-elements) .product-description, .wsite-elements.wsite-not-footer:not(.wsite-header-elements) .weebly-form-field label, .wsite-elements.wsite-not-footer:not(.wsite-header-elements) .wsite-form-field label, #secondlist div.paragraph, #secondlist p p:not(.wsite-image-placeholder-text), #secondlist .product-block .product-title, #secondlist .product-description, #secondlist .weebly-form-field label, #secondlist .wsite-form-field label",globalColor:"#secondlist div.paragraph, #secondlist p p:not(.wsite-image-placeholder-text), #secondlist .product-block .product-title, #secondlist .product-description, #secondlist .weebly-form-field label, #secondlist .wsite-form-field label",footerGlobal:".wsite-elements.wsite-footer div.paragraph, .wsite-elements.wsite-footer p, .wsite-elements.wsite-footer .product-block .product-title, .wsite-elements.wsite-footer .product-description, .wsite-elements.wsite-footer .weebly-form-field label, .wsite-elements.wsite-footer .wsite-form-field label",header:".wsite-elements.wsite-not-footer:not(.wsite-header-elements) h2, .wsite-elements.wsite-not-footer:not(.wsite-header-elements) .product-long .product-title, .wsite-elements.wsite-not-footer:not(.wsite-header-elements) .product-large .product-title, .wsite-elements.wsite-not-footer:not(.wsite-header-elements) .product-small .product-title, #secondlist h2, #secondlist .product-long .product-title, #secondlist .product-large .product-title, #secondlist .product-small .product-title",headerColor:"#secondlist h2, #secondlist .product-long .product-title, #secondlist .product-large .product-title, #secondlist .product-small .product-title",footerHeader:".wsite-elements.wsite-footer h2, .wsite-elements.wsite-footer .product-long .product-title, .wsite-elements.wsite-footer .product-large .product-title, .wsite-elements.wsite-footer .product-small .product-title",siteTitle:"#wsite-title",navMenu:".wsite-menu-default a",flyoutMenu:".wsite-menu a",imageCaptions:".wsite-image div, .wsite-caption",galleryCaptions:".galleryCaptionInnerText",lightboxGalleryCaptions:".fancybox-title",slideshowCaptions:".wslide-caption-text",phone:".wsite-phone",headline:".wsite-headline,."+e.HEADER_SECTION_CLASS_NAME+" .wsite-content-title",subHeadline:".wsite-headline-paragraph,."+e.HEADER_SECTION_CLASS_NAME+" .paragraph",button:".wsite-button-inner",blockquote:".wsite-not-footer blockquote",footerBlockquote:".wsite-footer blockquote",blogPostTitle:".blog-header h2 a",productHighlight:".wsite-product",productTitle:"#secondlist h2.wsite-product-title",productPrice:".wsite-product .wsite-product-price a",navButton:"[for=navTrigger], [for=nav-trigger], [for=mobile-input], [for=mobile-trigger], #header #nav-trigger, .hamburger, .wsite-menubutton .wsite-menu-button .wsite-menu-button-bars"},t}),_wAMD.define("editor/design/weebly_design_options",["jquery","underscore","editor-site-shared/relay","analytics/Tracking","site/editor/app","w-global","editor/design/data","editor/ajax/module","editor-site-shared/design/Font"],function(e,t,i,n,o,r,s,a,l){function c(){var e=[],i={globalStyle:p.global+" {",globalColorStyle:p.globalColor+" {",footerGlobalStyle:p.footerGlobal+" {",headerStyle:p.header+" {",headerColorStyle:p.headerColor+" {",footerHeaderStyle:p.footerHeader+" {",siteTitleStyle:p.siteTitle+" {",linkStyle:"",hoverStyle:"",navMenuStyle:p.navMenu+" {",flyoutMenuStyle:p.flyoutMenu+" {",imageCaptionsStyle:p.imageCaptions+" {",galleryCaptionsStyle:p.galleryCaptions+" {",lightboxGalleryCaptionsStyle:p.lightboxGalleryCaptions+" {",slideshowCaptionsStyle:p.slideshowCaptions+" {",phoneStyle:p.phone+" {",headlineStyle:p.headline+" {",subHeadlineStyle:p.subHeadline+" {",buttonStyle:p.button+" {",blockquoteStyle:p.blockquote+" {",footerBlockquoteStyle:p.footerBlockquote+" {",blogPostTitleStyle:p.blogPostTitle+" {",productTitleStyle:p.productTitle+" {",productPriceStyle:p.productPrice+" {"},n=t.clone(i),o=[],r=[];return t.each(Weebly.DesignOptions,function(t,s){var a,l,c=!1;if(t){if("globalColor"==s)return i.globalColorStyle+="color:"+t+" !important;",void o.push("globalColorStyle");if("headerColor"==s)return i.headerColorStyle+="color:"+t+" !important;",void o.push("headerColorStyle");if("aLink"==s)return i.linkStyle+=".wsite-not-footer h2.wsite-content-title a, .wsite-not-footer .paragraph a, .wsite-not-footer blockquote a, .wsite-not-footer .blog-sidebar a, .wsite-not-footer .blog-comments a, .wsite-not-footer .blog-comments-bottom a, #wsite-com-store a, #wsite-com-product-gen a {color:"+t+" !important;}\n",void o.push("linkStyle");if("aHover"==s)return i.hoverStyle+=".wsite-not-footer h2.wsite-content-title a:hover, .wsite-not-footer .paragraph a:hover, .wsite-not-footer blockquote a:hover, .wsite-not-footer .blog-sidebar a:hover, .wsite-not-footer .blog-comments a:hover, .wsite-not-footer .blog-comments-bottom a:hover, #wsite-com-store a:hover, #wsite-com-product-gen a:hover {color:"+t+" !important;}\n",void o.push("hoverStyle");if("footerALink"==s)return i.linkStyle+=".wsite-footer h2 a, .wsite-footer .paragraph a, .wsite-footer blockquote a {color:"+t+" !important;}\n",void o.push("linkStyle");if("footerAHover"==s)return i.hoverStyle+=".wsite-footer h2 a:hover, .wsite-footer .paragraph a:hover, .wsite-footer blockquote a:hover {color:"+t+" !important;}\n",void o.push("hoverStyle");if("buttonSize"==s)return i.hoverStyle+=".wsite-button-large .wsite-button-inner {font-size:"+t+" !important;}\n",void o.push("hoverStyle");if("smallButtonSize"==s)return i.hoverStyle+=".wsite-button-small .wsite-button-inner {font-size:"+t+" !important;}\n",void o.push("hoverStyle");if("blogPostTitleHover"==s)return i.hoverStyle+=".blog-header h2 a:hover {color:"+t+" !important;}\n",void o.push("hoverStyle");if(l=/(.*)Font$/.exec(s))t=t.replace(/'|"/g,""),a='font-family:"'+t+'" !important;',e.push(t);else if(l=/(.*)Size$/.exec(s))c=!0,a="font-size:"+t+" !important;";else if(l=/(.*)Weight$/.exec(s))a="font-weight:"+t+" !important;";else if(l=/(.*)Color$/.exec(s))a="color:"+t+" !important;";else if(l=/(.*)LineHeight$/.exec(s))c=!0,a="line-height:"+t+" !important;";else if(l=/(.*)Style$/.exec(s))switch(t){case"normal":case"italic":a="font-style:"+t+" !important;";break;case"bold":a="font-weight: bold !important;";break;case"italicBold":a="font-weight: bold !important; font-style: italic !important;";break;case"underline":a="text-decoration: underline !important;"}else(l=/(.*)UpperCase$/.exec(s))?a="true"===t?"text-transform:  uppercase !important;":"text-transform:  none !important;":(l=/(.*)LetterSpacing$/.exec(s))&&(a="letter-spacing:"+t+" !important;");if(a&&l&&i[l[1]+"Style"]){var d=l[1]+"Style";c?(n[d]+=a,r.push(d)):(i[d]+=a,o.push(d))}}}),Weebly.DesignOptions&&"pageHeaderImage"in Weebly.DesignOptions&&headerImage.setCurrentHeaderImage(Weebly.DesignOptions.pageHeaderImage),i=t.pick(i,o),n=t.pick(n,r),{styles:d(i,n),fontsToLoad:e}}function d(e,i){var n="";return t.each(e,function(e,t){e&&(/}\s*$/.test(e)||(e+="}\n"),"hoverStyle"!=t&&(n+=e))}),n+=e.hoverStyle||"",n+="@media screen and (min-width: 767px) {",t.each(i,function(e,t){e&&(/}\s*$/.test(e)||(e+="}\n"),n+=e)}),n+="}"}function u(e,t){var i={};return i.font=e.css("fontFamily").replace(/"/g,"'").split(",")[0].toLowerCase(),i.font=t?"":i.font,i.size=t?"":e.css("fontSize"),/px$/.test(i.size)||(i.size="auto"),i.weight=t?"":e.css("fontWeight"),isNaN(i.weight)&&(i.weight=i.weight.toUpperCase(),"BOLD"==i.weight&&(i.weight=700),"NORMAL"==i.weight&&(i.weight=400),"LIGHTER"==i.weight&&(i.weight=300)),i.color=t?"":e.css("color"),i.height=t?"":e.css("lineHeight"),/px$/.test(i.height)||(i.height="auto"),i}t.isUndefined(Weebly.DesignOptions)&&(Weebly.DesignOptions={});var h={},p=s.DESIGN_OPTIONS_SELECTORS;return h.applyDesignOptions=function(){var e=c();i.execute("applyDesignStyle",e.styles),i.execute("loadFont",e.fontsToLoad)},h.siteApplyDesignOptions=function(){var e=c();o.vent.trigger("applyDesignStyle",e.styles),t.each(e.fontsToLoad,function(e){l.loadFont(e)})},h.stripFontName=function(e){return e.replace(/(^['"\s]*|['"\s]*$)/g,"")},h.saveDesignOption=function(e,t){h.setDesignOption(e,t);var i=window.currentTheme+"|"+e;r.Editor.RPC.ThemeOption.saveDesignOption(i,t).done(function(){n.trackEvent("site","change_design_setting",e)})},h.setDesignOption=function(e,t){Weebly.DesignOptions[e]=t},h.getCurrentStyles=function(t){var i,n=!1,o=null,r=null,s={};switch(t){case"site-title":o=e(p.siteTitle).eq(0),o.length||(o=e("<div/>",{id:"wsite-title"}),n=!0);break;case"paragraph-title":o=e(p.header).eq(0),o.length||(o=e("<h2/>"),n=!0);break;case"footer-paragraph-title":o=e(p.footerHeader).eq(0),o.length||(o=e("<h2/>"),n=!0);break;case"paragraph-text":o=e(p.global).eq(0),o.length||(o=e("<div/>",{"class":"paragraph"}),n=!0);break;case"footer-paragraph-text":o=e(p.footerGlobal).eq(0),o.length||(o=e("<div/>",{"class":"paragraph"}),n=!0);break;case"links":return i=e("<a/>",{href:"http://www.test.com"}),e("#secondlist").append(i),s.link=i.css("color"),i.remove(),Weebly.DesignOptions&&Weebly.DesignOptions.aHover?s.hover=Weebly.DesignOptions.aHover:s.hover=s.link,s;case"footer-links":return i=e("<a/>",{href:"http://www.test.com"}),e(".wsite-footer").eq(0).append(i),s.link=i.css("color"),i.remove(),Weebly.DesignOptions&&Weebly.DesignOptions.footerAHover?s.hover=Weebly.DesignOptions.footerAHover:s.hover=s.link,s;case"image-captions":o=e(p.imageCaptions).eq(0),o.length||(o=e("<div/>"),r=o.wrap('<div class="wsite-image"/>'),n=!0);break;case"photo-gallery-captions":o=e(p.galleryCaptions).eq(0),o.length||(o=e("<div/>",{"class":"galleryCaptionInnerText"}),r=o.wrap('<div class="imageGallery"/>'),n=!0);break;case"lightbox-gallery-captions":o=e(p.lightboxGalleryCaptions).eq(0),o.length||(o=e('<div class="fancybox-title"/>'),n=!0);break;case"slideshow-captions":o=e(p.slideshowCaptions).eq(0),o.length||(o=e('<div class="wslide"/>'),n=!0);break;case"navigation-menu-text":o=e(p.navMenu).eq(0),o.length||(o=e("<a/>"),r=o.wrap('<li id="active" class="w-menu-item"/>'),n=!0);break;case"flyout-menu-text":o=e(p.flyoutMenu).eq(0),o.length||(o=e("<a/>"),r=o.wrap("<li/>").wrap('<ul class="wsite-menu"/>'),n=!0);break;case"phone-number-field":o=e(p.phone).eq(0),o.length||(o=e("<span/>",{"class":"wsite-text"}),r=o.wrap('<span class="phone-number"/>').wrap('<div id="header-right"/>'),n=!0);break;case"landing-page-headline":o=e(p.headline).eq(0),o.length||(o=e("<span/>",{"class":"wsite-headline"}),r=o.wrap("<h2/>"),n=!0);break;case"landing-page-sub-headline":o=e(p.subHeadline).eq(0),o.length||(o=e("<span/>",{"class":"wsite-headline-paragraph"}),r=o.wrap("<p/>"),n=!0);break;case"button":o=e(p.button).eq(0),o.length||(o=e("<span/>",{"class":"wsite-button-inner"}),r=o.wrap('<span class="wsite-button-large wsite-button-normal"/>'),n=!0);break;case"small-button":o=e(p.smallButton).eq(0),o.length||(o=e("<span/>",{"class":"wsite-button-inner"}),r=o.wrap('<span class="wsite-button-small wsite-button-normal"/>'),n=!0);break;case"blockquote":o=e(p.blockquote).eq(0),o.length||(o=e("<blockquote/>"),n=!0);break;case"footer-blockquote":o=e(p.footerBlockquote).eq(0),o.length||(o=e("<blockquote/>"),n=!0);break;case"blog-post-title":return i=e(p.blogPostTitle).eq(0),i||(i=e("<a/>",{"class":"blog-title-link"}),r=i.wrap('<h2 class="blog-title"/>'),r=r.wrap('<div class="blog-header"/>'),e("#secondlist").append(r),n=!0),s=u(i,n),Weebly.DesignOptions&&Weebly.DesignOptions.blogPostTitleHover?s.hover=Weebly.DesignOptions.blogPostTitleHover:s.hover=s.color,n&&r.remove(),s;case"product-title":o=e(p.productTitle).eq(0),o.length||(o=e("<h2/>",{"class":"wsite-product-title"}),n=!0);break;case"product-price":o=e(p.productPrice).eq(0),o.length||(o=e("<a/>"),r=o.wrap('<div class="wsite-product-price"/>'),n=!0)}if(n){var a=/^footer/.test(t)?e(".wsite-footer").eq(0):e("#secondlist");a.append(r?r:o)}return s=u(o,n),n&&(r?r.remove():o.remove()),s},h.setDesignOptions=function(e){Weebly.DesignOptions=e},window.applyDesignOptions=h.applyDesignOptions,window.stripFontName=h.stripFontName,window.saveDesignOption=h.saveDesignOption,window.setDesignOption=h.setDesignOption,window.getCurrentStyles=h.getCurrentStyles,h}),_wAMD.define("editor/build/frame/element",["jquery","editor/app","editor-site-shared/ui/constants"],function(e,t,i){var n,o,r=t.module("build.frame.element");return r.on("start",function(){n=e("#"+i.EDITOR_FRAME_ID),o=n[0].contentWindow}),r.on("stop",function(){
n=null,o=null}),r.getElement=function(){return n},r.getWindow=function(){return o},r.hideElement=function(){n.css("opacity",0)},r.showElement=function(){n.css("opacity",1)},r}),_wAMD.define("editor/build/ui/weebly_view",["jquery","editor/app","editor/build/themes/data","editor/design/weebly_design_options","editor-site-shared/relay","editor/build/frame/element","editor/build/mobile/data"],function(e,t,i,n,o,r,s){var a={isMobileView:!1},l="",c=function(e,t){setTimeout(function(){"function"==typeof e&&e.apply(this,t)},1)};return a.setMobileView=function(i,n){a.isMobileView||(e("#w-editor-mobile").show(),e("body").addClass("w-mobile-editor"),s.getSiteSetting("allow_mobile")!==!1&&r.hideElement(),t.vent.once("themeRendered",function(){s.getSiteSetting("allow_mobile")!==!1&&r.showElement(),c(i,n)},this),window.ENABLE_PAGE_HIERARCHY=!1,a.isMobileView=!0,l=currentThemeColor,t.vent.trigger("setMobileView"),e("#w-editor-mobile").show(),e("body").addClass("w-mobile-editor"),e(".device-switcher").addClass("mobile-selected"),e("#wsite-web-view").removeClass("weebly-current"),e("#wsite-mobile-view").addClass("weebly-current"),e("#designOptionsStyle").remove(),t.vent.trigger("viewChange"),e("#menuitem-cc").hide())},a.setStandardView=function(d,u){a.isMobileView&&(jQuery("#w-editor-top").find("#device_switcher").find(".icon:not(.dropdown)").text("devicedesktop"),s.getSiteSetting("allow_mobile")!==!1&&r.hideElement(),t.vent.once("themeRendered",function(){s.getSiteSetting("allow_mobile")!==!1&&r.showElement(),c(d,u)},this),a.isMobileView=!1,window.ENABLE_PAGE_HIERARCHY=!0,i.setCurrentTheme(currentStandardTheme,!1),currentThemeColor=l,t.vent.trigger("setStandardView"),t.vent.trigger("forceThemeRerender"),updateList(currentPage,!0),e(".device-switcher").removeClass("mobile-selected"),setTimeout(function(){e("body").removeClass("w-mobile-editor")},0),e("#wsite-mobile-view").removeClass("weebly-current"),e("#wsite-web-view").addClass("weebly-current"),n.applyDesignOptions(),e("#blog-navigation, #blog-navigation-placeholder").show(),o.execute("element:setHandlers"),t.vent.trigger("viewChange"),e("#menuitem-cc").show(),e("#w-editor-mobile").hide())},window.Weebly||(window.Weebly={}),window.Weebly.view=a,a}),_wAMD.define("tpl!editor/slideshow-editor/slideshow-toolbar.tpl",[],function(){return'<div class="hover-toolbar-arrow hover-toolbar-arrow-centered"><div></div></div>\n<div class="hover-toolbar-inner">\n	<a class="black-button play-button"><span></span></a>\n	<a class="black-button pause-button"><span></span></a>\n	<span class="caption-wrap">\n		<a class="black-button caption-button"><span></span></a>\n		<div class="caption-popout" style="display:none">\n			<div class="caption-arrow"></div>\n			<textarea class="caption-area" placeholder="{{#esc_attr}}{{#tl}}templates.hovercontrol.slideshow-toolbar_2{{/tl}}{{/esc_attr}}"></textarea>\n			<div class="buttons">\n				<a class="button cancel-button">{{#tl}}templates.hovercontrol.slideshow-toolbar_3{{/tl}}</a>\n				<a class="button save-button">{{#tl}}templates.hovercontrol.slideshow-toolbar_4{{/tl}}</a>\n			</div>\n		</div>\n	</span>\n	<a class="black-button link-button"><span></span></a>\n	<a class="edit-button">{{#tl}}templates.hovercontrol.slideshow-toolbar_5{{/tl}}</a>\n</div>\n'}),_wAMD.define("site/editor/image-editor/SlideshowEditToolbar",["backbone","mustache","editor-site-shared/relay","editor-site-shared/image-editor/data","tpl!editor/slideshow-editor/slideshow-toolbar.tpl"],function(e,t,i,n,o){var r=e.Marionette.ItemView.extend({className:"hover-toolbar hover-toolbar-above edit-slide-toolbar",getTemplate:function(){return t.compile(o)},ui:{editButton:".edit-button",linkButton:".link-button",playButton:".play-button",pauseButton:".pause-button",captionSaveButton:".save-button",captionCancelButton:".cancel-button",captionButton:".caption-button",captionArea:".caption-area",captionForm:".caption-popout"},events:{"click @ui.editButton":"editSlide","click @ui.captionButton":"toggleCaptionForm","click @ui.linkButton":"showLinker","click @ui.playButton":"playSlideshow","click @ui.pauseButton":"pauseSlideshow","click @ui.captionSaveButton":"saveCaption","click @ui.captionCancelButton":"closeCaptionForm"},initialize:function(e){var t=this;t.slideshow=e.slideshow,t.slideshow.clearHandlers(),t.slideshow.on("play",t.updatePlayPause.bind(t)),t.slideshow.on("pause",t.updatePlayPause.bind(t)),t.slideshow.on("slideChange",function(e){t.trigger("change",e),t.updateToolbar()}),t.listenTo(t.$el,{shown:function(){t.position(),t.updateToolbar()}})},onClose:function(){this.slideshow.clearHandlers()},onRender:function(){var e=this;e.updatePlayPause(),e.closeCaptionForm()},editSlide:function(){var e,t=this,i=t.slideshow;i.pause(),e=i.getSlideIndex()||0,t.trigger("edit",e)},toggleCaptionForm:function(){var e=this;e.isCaptionFormOpen?e.closeCaptionForm():e.openCaptionForm()},closeCaptionForm:function(){var e=this;e.ui.captionForm.hide(),e.ui.captionButton.removeClass("pressed"),e.isCaptionFormOpen=!1},openCaptionForm:function(){var e=this,t=n.getCurrentHeader(),i=t.data,o=e.slideshow.getSlideIndex(),r=i.slideshow.slides[o].caption||"";e.slideshow.pause(),e.ui.captionForm.show(),e.ui.captionArea.val(r),e.ui.captionButton.addClass("pressed"),e.isCaptionFormOpen=!0},showLinker:function(e){e.stopPropagation();var t=this,o=n.getCurrentHeader(),r=o.data,s=t.slideshow.getSlideIndex(),a=r.slideshow.slides[s].link;t.slideshow.pause(),t.closeCaptionForm(),a&&(a=parseLinkString(a)),i.request("linker:open",{zIndex:10001,existing:a,remove:!0}).done(function(e,i){i&&(e+="weeblylink_new_window"),r.slideshow.slides[s].link=e,n.setData(r),t.updateToolbar()})},playSlideshow:function(){this.slideshow.play(!0)},pauseSlideshow:function(){this.slideshow.pause()},saveCaption:function(){var e=this,t=e.slideshow.getSlideIndex(),i=n.getCurrentHeader(),o=i.data;o.slideshow.slides[t].caption=e.ui.captionArea.val(),e.closeCaptionForm(),e.updateToolbar(),n.setData(o).done(function(){e.trigger("saveCaption")})},updatePlayPause:function(){var e=this;e.isClosed||(e.slideshow.isPlaying()?(e.ui.playButton.hide(),e.ui.pauseButton.css("display","inline-block")):(e.ui.playButton.css("display","inline-block"),e.ui.pauseButton.hide()))},updateToolbar:function(){var e,t=this,i=n.getCurrentHeader(),o=t.slideshow.getSlideIndex(),r=i.data;!t.isClosed&&r&&(e=r.slideshow&&r.slideshow.slides&&r.slideshow.slides[o]||{},t.ui.captionButton.toggleClass("active",!!e.caption),t.ui.linkButton.toggleClass("active",!!e.link))},position:function(){var e=this,t=e.slideshow.getElement(),i=t.offset();e.$el.css({top:i.top-e.$el.outerHeight()-10,left:i.left+t.outerWidth()-e.$el.outerWidth()})}});return r}),_wAMD.define("site/editor/ui/Spotlight",["jquery","underscore","w-global"],function(e,t,i){function n(t,i,n){var o=[];return e(t).each(function(){var t=e(this);if(!t.is(":hidden")){var r=t.offset(),s=t.outerHeight()+2*i;o.push({x:r.left-n,y:r.top-i,width:t.outerWidth()+2*n,height:0===s?50:s})}}),o}function o(e,t,i){function n(e){e.width>0&&e.height>0&&(c.push(e),o.push(e))}var o=e.slice(),c=[];return e.forEach(function(e){var c=e.x,d=e.y,u=c+e.width,h=d+e.height;i=Math.max(i,h);var p=r(c,u,d,o),f=s(u,d,p,o,t);n({x:c,y:p,width:f-c,height:d-p});var m=s(u,d,h,o,t),g=a(u,m,h,o,i);n({x:u,y:d,width:m-u,height:g-d});var v=a(c,u,h,o,i),b=l(c,h,v,o);n({x:b,y:h,width:u-b,height:v-h});var y=l(c,d,h,o),w=r(y,c,d,o);n({x:y,y:w,width:c-y,height:h-w})}),c}function r(e,t,i,n){var o=0;return n.forEach(function(n){n.y+n.height<=i&&n.x+n.width>=e&&n.x<t&&(o=Math.max(o,n.y+n.height))}),o}function s(e,t,i,n,o){var r=o;return n.forEach(function(n){n.x>e&&n.y+n.height>=t&&n.y<i&&(r=Math.min(r,n.x))}),r}function a(e,t,i,n,o){var r=o;return n.forEach(function(n){n.y>i&&n.x+n.width>=e&&n.x<t&&(r=Math.min(r,n.y))}),r}function l(e,t,i,n){var o=0;return n.forEach(function(n){n.x+n.width<e&&n.y+n.height>=t&&n.y<i&&(o=Math.max(o,n.x+n.width))}),o}function c(e){var t=e.split(" ");return t.length<4&&(t[1]||(t[1]=t[0]),t[2]||(t[2]=t[0]),t[3]||(t[3]=t[1])),t}function d(t){e.each(t,function(e,t){t.hide()})}var u,h=window.Class.create({initialize:function(i){var n=this;i=i||{},n.elements=i.element?[i.element]:i.elements,n.canvasElement=e(document.body),n.parentElement=e(i.parentElement?i.parentElement:document.body),n.isShown=!1,n.dimElements=[],n.antSets=[],n.cornerSets=[],n.borderSets=[],n.zIndex=i.zIndex,n.opacity=i.opacity||.75,n.paddingHeight=i.paddingHeight||i.padding||0,n.paddingWidth=i.paddingWidth||i.padding||0,n.ants=i.ants,n.roundedCorners=i.roundedCorners,n.interval=i.interval===!0?300:i.interval,n.borderWidths=i.borderWidths||"0",n.borderColor=i.borderColor||"black",n.maskColor=i.maskColor||"",n.light=i.light||!1,this.onReposition=i.onReposition,n.onResize=t.throttle(n.reposition.bind(n),100)},show:function(){var t=this;t.isShown||(t.container||(t.container=e("<div class='spotlight'/>").appendTo(t.parentElement)),void 0!==t.zIndex&&t.container.css("z-index",t.zIndex),1==t.light&&t.container.addClass("spotlight-gray"),t.container.show(),t.position(),t.interval&&(t.intervalID=setInterval(function(){t.reposition()},t.interval)),t.isShown=!0,u=t,e(window).on("resize",t.onResize))},hide:function(){var t=this;t.isShown&&(t.container.hide(),t.clearInterval(),t.isShown=!1,u=void 0,e(window).off("resize",t.onResize))},setOpacity:function(t){this.opacity=t,e.each(this.dimElements,function(e,i){i.css("opacity",t)})},position:function(){var t=this,i=t.elements,r=n(i,t.paddingHeight,t.paddingWidth);if(r.length){var s=t.parentElement,a=s.offset(),l=t.canvasElement,u=l.outerWidth(),h=l[0].scrollHeight,p=o(r,u,h),f=t.container,m=t.dimElements,g=t.antSets,v=t.cornerSets,b=t.borderSets,y=[];f.css({top:0-a.top,left:0-a.left}),e.each(p,function(i,n){var o=m[i]=m[i]||e("<div class='spotlight-bg'/>").appendTo(f),r={top:n.y,left:n.x,width:n.width,height:n.height,opacity:t.opacity};t.maskColor&&(r.backgroundColor=t.maskColor),o.css(r).show()}),d(m.slice(p.length)),t.ants?(e.each(r,function(t,i){var n=g[t]=g[t]||e("<div class='spotlight-ants-h'/><div class='spotlight-ants-v'/><div class='spotlight-ants-h'/><div class='spotlight-ants-v'/>").appendTo(f);n.eq(0).css({top:i.y,left:i.x,width:i.width}),n.eq(1).css({top:i.y,left:i.x+i.width-1,height:i.height}),n.eq(2).css({top:i.y+i.height-1,left:i.x,width:i.width}),n.eq(3).css({top:i.y,left:i.x,width:1,height:i.height}),n.show()}),d(g.slice(r.length))):d(g),t.borderWidths?(y=c(t.borderWidths),borderHtml=y.reduce(function(e,t){return e+(t>0?"<div class='spotlight-border'/>":"")},""),e.each(r,function(i,n){var o,r=[{top:n.y-y[0],left:n.x,width:n.width,height:y[0],"background-color":t.borderColor},{top:n.y,left:n.x+n.width,width:y[1],height:n.height,"background-color":t.borderColor},{top:n.y+n.height,left:n.x,width:n.width,height:y[2],"background-color":t.borderColor},{top:n.y,left:n.x-y[3],width:y[3],height:n.height,"background-color":t.borderColor}];o=b[i]=b[i]||e(borderHtml).appendTo(f),y.reduce(function(e,t,i){return t>0&&o.eq(e++).css(r[i]),e},0),o.show()}),d(b.slice(r.length))):d(b),t.roundedCorners?(e.each(r,function(t,i){var n=v[t]=v[t]||e("<div class='spotlight-corner-nw'/><div class='spotlight-corner-ne'/><div class='spotlight-corner-se'/><div class='spotlight-corner-sw'/>").appendTo(f);n.eq(0).css({top:i.y,left:i.x}),n.eq(1).css({top:i.y,left:i.x+i.width-5}),n.eq(2).css({top:i.y+i.height-5,left:i.x+i.width-5}),n.eq(3).css({top:i.y+i.height-5,left:i.x}),n.show()}),d(v.slice(r.length))):d(v)}},reposition:function(){var e=this;e.isShown&&(e.position(),e.onReposition&&e.onReposition())},destroy:function(){var e=this;e.hide(),e.container&&e.container.remove()},clearInterval:function(){var e=this;e.intervalID&&(clearInterval(e.intervalID),delete e.intervalID)},setAnts:function(e){var t=this;t.ants=e,t.reposition()}});return h.getCurrent=function(){return u},i.Spotlight=h,h}),function(e,t){function i(e){var t=n(e);t&&t.render()}function n(e){var i=t('[class*="wsite-header"]:not(.wsite-header-section)');i.not(":first").hide();var n=i.css("background","none")[0];if(n){var o=new u(n,{fillDimensions:!0,autoplay:!0,speed:e.speed||5,slide:e.slide,transition:e.transition,showControls:!0,showPlayButton:!1,dots:e.dots,dotPosition:e.dotPosition,arrows:e.arrows,forceSideArrows:!0,images:e.images||e.slides,aspectRatio:e.aspectRatio||"auto",useAspectRatio:e.useAspectRatio||!1});return o}}function o(e){return g[e].getPhotos()}function r(){var e=!1;return t.each(g,function(t,i){i.updateSize(),e=!0}),e}function s(e,t){return m[e]=d(t),"<div id='"+e+"-slideshow' style='height:1000px'></div>"}function a(e){var i=t("#"+e+"-slideshow"),n=new u(i,m[e]);g[e]=n,n.render(),i.height("")}function l(e,i){if(g[e]){g[e].destroy();var n=m[e];n.images=i,g[e]=new u(t("#"+e+"-slideshow"),n),g[e].render()}}function c(e){var i=d(e),n=i.elementID,o=new u(t("#"+n+"-slideshow"),i);g[n]=o,o.render()}function d(e){var t=e.nav,i=1;return"double_thumbnails"==t?(t="thumbnails",i=2):"none"==t&&(t=!1),{elementID:e.elementID,links:t,linkLocation:e.navLocation,linkTiers:i,captionLocation:e.captionLocation,slide:"slide"==e.transition,transition:e.transition,autoplay:parseInt(e.autoplay),speed:parseInt(e.speed),aspectRatio:e.aspectRatio||"auto",showControls:"false"!==e.showControls,randomStart:"true"===e.randomStart,images:e.images||[]}}function u(e,i){function n(){e.addClass("wslide").html("<table class='wslide-main'><tbody></tbody></table>");var n=(e.find("table"),e.find("tbody")),o=s();if(v||o.on("mouseover",function(){i.showControls&&(clearTimeout(Ne),et||ee(Ie.queue()&&Ie.queue().length))}).on("mouseout",function(){Ne=setTimeout(function(){ne()},1e3)}),i.fillDimensions&&i.useAspectRatio&&e.css({height:"auto"}),i.links&&ze.length){ye=[];var r=i.linkLocation;Ee="top"==r||"bottom"==r;var a=m(),l=t("<td class='wslide-link-cell'/>").append(a),c=t("<td/>").append(o);if(Ee){l.width("auto");var d=t("<tr/>"),u=t("<tr/>");"top"==r?(d.append(l),u.append(c)):(d.append(c),u.append(l)),n.append(d),n.append(u)}else{var h=t("<tr/>");"left"==r?(h.append(l),h.append(c)):(h.append(c),h.append(l)),n.append(h)}}else{var h=t("<tr/>"),p=t("<td/>");p.append(o),h.append(p),n.append(h)}i.dots&&(we=g()),I(),ze.length&&L(i.randomStart?Math.floor(Math.random()*ze.length):0),ie(),i.autoplay&&J(),t(window).on("resize",pe)}function o(){e.empty(),i.fillDimensions&&i.useAspectRatio&&e.css("height",""),e.removeClass("wslide"),e.css("background",""),r()}function r(){Q(),t(window).off("resize",pe),he()}function s(){if(me=t("<div class='wslide-content disable-user-select'>&nbsp;<div class='wslide-content-inner'><div class='wslide-slides'></div></div><div class='wslide-overlay-top-left disable-user-select'></div><div class='wslide-overlay-top-right disable-user-select'></div><div class='wslide-overlay-left disable-user-select'></div><div class='wslide-overlay-right disable-user-select'></div></div>"),ge=me.find("div.wslide-slides"),Te=me.find("div.wslide-overlay-top-left"),Ce=me.find("div.wslide-overlay-top-right"),Se=me.find("div.wslide-overlay-left"),De=me.find("div.wslide-overlay-right"),Ie=Te.add(Ce).add(Se).add(De),ze.length>1){var e=function(){v&&a(),Q(),j()},n=function(){v&&a(),Q(),K()},o=function(){v&&a()};v&&me.on("click",o);var r=d(),s=u();i.showPlayButton!==!1&&Te.append(l()).append(c()),i.arrows!==!1&&(i.slide||i.forceSideArrows?(Se.append(r).on("click",e),De.append(s).on("click",n)):(r.on("click",e),s.on("click",n),Ce.append(r).append("&nbsp;").append(s)))}return Ie=Ie.find(".wslide-button-wrap"),me}function a(){clearTimeout(Ne),ee(Ie.queue().length),Ne=setTimeout(function(){ne()},1e3)}function l(){var e=t("<div class='wslide-button-wrap'><span class='wslide-play wslide-button disable-user-select'><span class='wslide-button-inner'>Play <span class='wslide-button-icon'></span></span><span class='wslide-button-bg'></span></span></div>");return e.css({display:"inline-block"}),ke=e.find(".wslide-play"),ke.on("click",J),e}function c(){var e=t("<div class='wslide-button-wrap'><span class='wslide-pause wslide-button disable-user-select'><span class='wslide-button-inner'>Pause <span class='wslide-button-icon'></span></span><span class='wslide-button-bg'></span></span></div>");return e.css({display:"inline-block"}),Oe=e.find(".wslide-pause"),Oe.on("click",Q),e}function d(){var e=t("<div class='wslide-button-wrap'><span class='wslide-prev wslide-button disable-user-select'><span class='wslide-button-inner'><span class='wslide-button-icon'></span></span><span class='wslide-button-bg'></span></span></div>");return e.css({display:"inline-block"}),e}function u(){var e=t("<div class='wslide-button-wrap'><span class='wslide-next wslide-button disable-user-select'><span class='wslide-button-inner'><span class='wslide-button-icon'></span></span><span class='wslide-button-bg'></span></span></div>");return e.css({display:"inline-block"}),e}function m(){var e=(i.linkLocation,i.linkTiers),n="wslide-links disable-user-select wslide-links-"+i.linkLocation;i.links&&(n+="thumbnails"==i.links?" wslide-thumbnail-links":" wslide-number-links"),ve=t("<div class='"+n+"'><div class='wslide-links-inner'><table><tbody></tbody></table></div></div>"),v?ve.on("touchstart",H).on("touchmove",W):ve.on("mouseover",$).on("mousemove",V).on("mouseout",U),be=ve.children().first(),re(be);var o=ve.find("tbody");if(Ee){for(var r=[],s=0;e>s;s++)r[s]=t("<tr/>"),o.append(r[s]);for(var s=0;s<ze.length;s++)r[s%e].append(y(ze[s],s))}else for(var a=ze.length,l=0,s=0;a>s;l++){for(var c=t("<tr/>"),d=0;e>d&&a>s;d++,s++)c.append(y(ze[s],s));o.append(c)}return v&&"undefined"!=typeof whenPhotoSwipeLoaded&&whenPhotoSwipeLoaded(function(){Code.PhotoSwipe.attach(ve.find("a").toArray(),{captionAndToolbarFlipPosition:!0,captionAndToolbarAutoHideDelay:0,loop:!1})}),ve}function g(){for(var n=t("<div class='wslide-dots'></div>"),o=0;o<ze.length;o++)(function(e){n.append(t("<div class='wslide-dot' />").on("click",function(){Q(),L(e)}))})(o);me.append(n);var r=i.dotPosition||"right";return"left"==r?n.css({left:10,bottom:10}):"center"==r?n.css({left:e.width()/2-n.width()/2,bottom:10}):"right"==r&&n.css({right:10,bottom:10}),n}function y(e,n){var o=t("<td/>");if("numbers"==i.links)o.append("<a class='wslide-link wslide-link-number'><div class='wslide-link-inner1'><div class='wslide-link-inner2'>"+(n+1)+"</div></div></a>");else{o.append("<a class='wslide-link wslide-link-thumbnail'><div class='wslide-link-inner1'><div class='wslide-link-inner2'><img style='visibility:hidden' /></div></div></a>");var r=o.find("img");setTimeout(function(){f(r[0],h(e),function(){A(r,e),r.css("visibility","")})},0)}var s=o.find("a");return v&&"undefined"!=typeof whenPhotoSwipeLoaded?s.attr("href",p(e)).attr("title",_.unescape(e.caption)):s.on("click",function(){Q(),L(n)}),re(s),ye[n]=s,o}function D(e,n,o){var r=!1,s=e.link;if(s){var a=s;s=s.replace("weeblylink_new_window",""),s!=a&&(r=!0)}var l=_.unescape(e.caption)?"<div style='display:none;' class='wslide-caption "+("top"==i.captionLocation?"wslide-caption-top":"wslide-caption-bottom")+"'><div class='wslide-caption-text'>"+_.unescape(e.caption)+"</div><div class='wslide-caption-bg'></div></div>":"",c=t("<div class='wslide-slide wslide-slide-loading'>"+(s?"<a>":"")+(i.fillDimensions?l:"")+"<div class='wslide-slide-inner1'><div class='wslide-slide-inner2' style='visibility:hidden'><img />"+(i.fillDimensions?"":l)+"</div></div>"+(s?"</a>":"")+"</div>");b||c.find(".wslide-caption").css({opacity:.99}),c.hide(),ge.append(c);var d=c.find("img"),u=d.closest(".wslide-slide-inner2");return Ue[n]=c,qe[n]=d,Xe[n]=u,c.find("a").each(function(e,i){i=t(i),window.currentSite?(i.attr("href","#"),i.on("click",function(){return!1}),i.attr("title",_W.utl("html.weebly.libraries.slideshow-jq_1"))):s&&(i.attr("href",s),r&&i.attr("target","_blank"))}),f(d[0],p(e),function(){c.removeClass("wslide-slide-loading"),Ge[n]=d[0].width,Ye[n]=d[0].height,(0===Ge[n]||0===Ye[n])&&(c.show(0),Ge[n]=d[0].width,Ye[n]=d[0].height,c.hide(0)),O(),P(n),n==_e&&(M(n),Qe&&F()),u.css("visibility",""),o&&L(n)}),c}function I(){x(),k()}function k(){if(!X()&&me){ve&&!Ee&&(je=be.outerWidth(),ve.width(je)),O(),ve&&(Fe=be.outerWidth(),He=be.outerHeight(),Ee?(je=xe,Ke=be.outerHeight(),ve.height(Ke),We=je-Fe,$e=0):(Ke=Ae,ve.height(Ke),We=Ke-He,$e=0));var n=t(".wslide-dots"),o=200>Ae?Ae/20:10;"center"==i.dotPosition?n.css({left:e.width()/2-n.width()/2,bottom:o}):n.css({bottom:o}),Ge[_e]&&Ye[_e]&&(O(),P(_e),M(_e))}}function O(){xe=me.outerWidth(),i.fillDimensions&&!i.useAspectRatio?(Ae=e.height(),ve&&Ee&&(Ae-=be.outerHeight())):Ae=Math.round(xe/R()),me.height(Ae)}function R(){if("auto"==i.aspectRatio){if(!ze.length)return 16/9;for(var e={},n=0;n<ze.length;n++){var o,r=ze[n].width/ze[n].height,s=!1;t.each(E,function(e,t){var i=t,n=Math.abs(i-r);(s===!1||s>n)&&(s=n,o=e)}),e[o]=(e[o]||0)+1}var a,l=!1;return t.each(e,function(e,t){(l===!1||t>l)&&(l=t,a=e)}),E[a]}return t.isNumeric(i.aspectRatio)?Number(i.aspectRatio):E[i.aspectRatio]}function x(){if(Pe=0,Me=0,ve){var e=ve.find("a.wslide-link-thumbnail").first();if(e.length){var t=e.children().first();Pe=t.outerWidth(),Me=t.outerHeight()}}}function A(e,t){var i=parseInt(t.width),n=parseInt(t.height),o=Pe/i,r=Me/n,s=Math.max(o,r),a=Math.ceil(i*s),l=Math.ceil(n*s);e.attr("width",a),e.attr("height",l),e.css("top",-Math.round(l/2)+"px"),e.css("left",-Math.round(a/2)+"px")}function P(e){var t,n=Ue[e],o=n.find(".wslide-caption"),r=Xe[e],s=qe[e];t=i.fillDimensions?Math.max(xe/Ge[e],Ae/Ye[e]):Math.min(xe/Ge[e],Ae/Ye[e],1);var a,l;if(l=Math.ceil(Ge[e]*t),a=Math.ceil(Ye[e]*t),l+1<=Ge[e]&&(l++,a++),s.width(l),r.css("width",l),r.css("left",-Math.round(l/2)),r.css("top",-Math.ceil(a/2)),o.length&&i.fillDimensions){var c;n.is(":hidden")?(n.show(),c=o.outerHeight(),n.hide()):c=o.outerHeight();var d=.25*Ae-c/2,u=.13*Ae;d=Math.max(u,d),o.css("bottom",d)}o.show()}function M(e){var t=Ue[e],n=t.offset(),o=t.outerWidth(),r=t.outerHeight(),s=qe[e],a=s.offset(),l=s.outerWidth(),c=s.outerHeight(),d=Ue[e].find("div.wslide-caption").outerHeight();dt=Math.max(0,a.left-n.left),ut=Math.max(0,n.left+o-(a.left+l)),ht=Math.max(0,a.top-n.top),ze[e].caption&&"top"==i.captionLocation&&r!=d&&(ht+=d),pt=Math.max(0,n.top+r-(a.top+c))}function N(t){var i=!1,n=_e;return _e=t,Ue[t]&&Ge[t]&&Ye[t]&&(O(),P(t),i=!0,Qe&&F()),ye&&(void 0!==n&&ye[n].removeClass("wslide-link-active"),ye[t].addClass("wslide-link-active"),Qe&&(e.find(".wslide-link-thumbnail img").css({opacity:.5}),e.find(".wslide-thumbnail-links .wslide-link-active img").css({opacity:1}))),we&&we.find(".wslide-dot").removeClass("wslide-dot-current").eq(t).addClass("wslide-dot-current"),Z(),i}function L(e,n,o){if(ze.length&&!Je){e=Math.min(ze.length-1,Math.max(0,e));var r=B(e,e);if(!r){if(e!=_e){var s=_e,a=N(e),l=n;if(l||(l=e>s?1:-1),o||void 0===s)void 0!==s&&Ue[s].hide(),Ue[e].show(),a&&M(e);else if("mosaic"==i.transition){var c=0>l;vt(e);var d=t(".wslide-box",ge),u=0,h=c?150*(at-1):0;ft(e,s),Je=!0,d.each(function(i){var n=t(this);setTimeout(function(){n.animate({opacity:"1.0"},500,function(){u++,u==d.length&&(Ue[s].hide(),Je=!1,Ue[e].find("img").show(),setTimeout(function(){d.remove()},50))})},h),(i+1)%at==0?(h=(i+1)/at*75,c&&(h+=150*(at-1))):h=c?h-150:h+150})}else if("slice"==i.transition)ft(e,s),mt(e,s,0>l,!1);else if("fold"==i.transition)ft(e,s),mt(e,s,0>l,!0);else if("slide"==i.transition||i.slide){var p=Ue[e],f=Ue[s];p.css({left:l*xe+"px"}).show(),Je=!0,ge.css({left:0}).animate({left:-l*xe+"px"},{duration:500,complete:function(){a&&M(e),f.hide(),ge.css({left:0}),p.css({left:0}),Je=!1}})}else{var m=Ue[s].find(".wslide-slide-inner2"),g=Ue[e].find(".wslide-slide-inner2"),v=function(){a&&M(e),Ue[s].hide(),Je=!1};Ue[e].show(),Je=!0;var y=.99;b&&(y=1),m.css({opacity:y}).animate({opacity:0},{duration:500,complete:v}),g.css({opacity:0}).animate({opacity:y},{duration:500,complete:v})}}ce("slideChange",e)}}}function B(e,t){for(var i=!1,n=e;e+w>=n&&n<ze.length;n++)n>=0&&!Ue[n]&&(D(ze[n],n,n===t),i=e===n?!0:!1);return i}function j(){var e=(_e-1+ze.length)%ze.length;e>=0&&(L(e,-1),q(e,!1))}function K(){var e=(_e+1)%ze.length;L(e,1),q(e,!0)}function F(){Re=setTimeout(function(){X()||K()},1e3*i.speed)}function H(e){bt=e.pageX||e.originalEvent.pageX||e.originalEvent.touches[0].pageX,yt=e.pageY||e.originalEvent.pageY||e.originalEvent.touches[0].pageY}function W(e){var t=e.pageX||e.originalEvent.pageX||e.originalEvent.touches[0].pageX,i=e.pageY||e.originalEvent.pageY||e.originalEvent.touches[0].pageY;Ee?st=t-bt:(st=i-yt,e.preventDefault()),bt=t,yt=i,rt=st,z()}function $(e){nt=!0,ot++,Ee?Le=ve.offset().left:Be=ve.offset().top}function V(e){if(!(Ee&&je>Fe||!Ee&&Ke>He)){var t;t=Ee?(e.pageX-Le)/je:(e.pageY-Be)/Ke;var i;T>t?(i=(1-t/T)*S,i*=i):t>1-T?(i=(t-(1-T))/T*S,i*=-i):i=0,i=Math.round(i),rt!=i&&(rt=i,Ve||(Ve=setInterval(z,35)))}}function z(){rt>st?st+=C:st>rt&&(st-=C),st||rt?Ee?(tt=Math.min($e,Math.max(We,tt+st)),be.css("left",tt)):(it=Math.min($e,Math.max(We,it+st)),be.css("top",it)):(clearInterval(Ve),Ve=null)}function U(e){var t=++ot;setTimeout(function(){t==ot&&(rt=0,nt=!1)},10)}function q(e,t){if(ye&&!nt){var i=ye[e];if(Ee){var n=i.position().left,o=n+be.position().left,r=i.outerWidth();(0>o||o+r>je)&&G(t?-n:-(n+r-je))}else{var s=i.position().top,a=s+be.position().top,l=i.outerHeight();(0>a||a+l>Ke)&&Y(t?-s:-(s+l-Ke))}}}function G(e){e=Math.min($e,Math.max(We,e)),be.animate({left:e},500)}function Y(e){e=Math.min($e,Math.max(We,e)),be.animate({top:e},500)}function X(){return e.parents("body").length?!1:(r(),!0)}function J(e){ze.length>1&&!Qe&&(Qe=!0,Z(),Ge[_e]&&Ye[_e]&&(e?K():F()),ce("play"))}function Q(){Qe&&(e.find(".wslide-link-thumbnail img").css({opacity:1}),Qe=!1,Z(),clearTimeout(Re),Re=null,Ze++,ce("pause"))}function Z(){ze.length>1&&i.showPlayButton!==!1&&(Qe?(ke.css("opacity",0).hide(),Oe.css("opacity",1).show()):(ke.css("opacity",1).show(),Oe.css("opacity",0).hide()))}function ee(e){oe(),e||te(),Ie.show().css("opacity",1),et=!0}function te(){Te.css("padding-top",ht),Te.css("padding-left",dt),Ce.css("padding-top",ht),Ce.css("padding-right",ut),Se.css("padding-left",dt),De.css("padding-right",ut)}function ie(){oe(),Ie.hide(),et=!1}function ne(){et&&(et=!1,Ie.animate({opacity:0},{duration:1e3,complete:function(){ie()}}))}function oe(){Ie.stop(!0)}function re(e){function i(i){function n(e){var t=se(e);c=d,d=t,r=t-s,Math.abs(r)>15&&(u=!1),Ee?(tt=a+r,tt=Math.max(We,tt),tt=Math.min($e,tt),be.css("left",tt)):(it=l+r,it=Math.max(We,it),it=Math.min($e,it),be.css("top",it))}function o(i){u&&e.is("a")&&window.Code.Util.Events.fire(e[0],"click"),null===d||null===c?st=0:(st=d-c,st=Math.max(-15,st),st=Math.min(15,st)),rt=0,Ve||(Ve=setInterval(z,35)),t(document).off(Et,n).off(Tt,o).off(Ct,o)}Q(),Ve&&(clearInterval(Ve),Ve=null,st=0);var r,s=se(i),a=tt,l=it,c=null,d=null,u=!0;return t(document).off(Et,n).off(Tt,o).off(Ct,o),!1}e.on(_t,i)}function se(e){return Ee?ae(e).pageX:ae(e).pageY}function ae(e){return wt?e:e.touches[0]}function le(e,t){var i=St[e]||[];i.push(t),St[e]=i}function ce(e){var i=this,n=Array.prototype.slice.call(arguments,1);t.each(St[e]||[],function(e,t){t.apply(i,n)})}function de(){return St}function ue(e){St=e}function he(){St={}}function pe(){var e=++Dt;setTimeout(function(){e==Dt&&(X()||k())},500)}var fe=this;fe.render=n,fe.destroy=o,fe.updateSize=k,fe.play=J,fe.pause=Q,fe.on=le,fe.getHandlers=de,fe.setHandlers=ue,fe.clearHandlers=he,fe.getPhotos=function(){return ze},fe.isPlaying=function(){return Qe},fe.getSlideIndex=function(){return _e},fe.gotoSlide=function(e,t){Q(),L(e,void 0,t)},fe.getElement=function(){return e},e=t(e),i=i||{};var me,ge,ve,be,ye,we,_e,Ee,Te,Ce,Se,De,Ie,ke,Oe,Re,xe,Ae,Pe,Me,Ne,Le,Be,je,Ke,Fe,He,We,$e,Ve,ze=i.images||[],Ue=[],qe=[],Ge=[],Ye=[],Xe=[],Je=!1,Qe=!1,Ze=0,et=!0,tt=0,it=0,nt=!1,ot=0,rt=0,st=0,at=8,lt=4,ct=15,dt=0,ut=0,ht=0,pt=0,ft=function(e,t){var i=Ue[e].find(".wslide-caption"),n=Ue[t].find(".wslide-caption"),o=.99;b&&(o=1),n.css({"z-index":3,opacity:o}).animate({opacity:0},{duration:1e3}),i.css({"z-index":3,opacity:0}).animate({opacity:o},{duration:1e3})},mt=function(e,i,n,o){gt(e);var r=0,s=t(".wslide-slice",ge);n&&(Array.prototype._reverse?Array.prototype._reverse.call(s):Array.prototype.reverse.call(s));var a=0;Je=!0,s.each(function(){var n=t(this),l={opacity:"1.0"};if(o){var c=n.width();n.css({width:"0px"}),l.width=c}setTimeout(function(){n.animate(l,500,function(){a++,a==s.length&&(Ue[i].hide(),Je=!1,Ue[e].find("img").css("visibility","visible"),setTimeout(function(){s.remove()},50))})},r),r+=65})},gt=function(e,i){var n=Ue[e],o=n.find("img"),r=o.attr("src"),s=o.up(".wslide-slide-inner2");n.show();var a=o.height(),l=Math.round(s.width()/ct);o.css("visibility","hidden");for(var c=0;ct>c;c++){var d=t("<img>").attr({src:r}).css({position:"absolute",width:s.width()+"px",height:"auto",display:"block !important",top:0}),u=t('<div class="wslide-slice"></div>');u.css({position:"absolute",height:a+"px",opacity:"0",overflow:"hidden","z-index":"2","-webkit-backface-visibility":"hidden"}),i?(d.css({left:-((ct-c-1)*l)+"px"}),u.css({right:l*c+"px"})):(d.css({left:-c*l+"px"}),u.css({left:l*c+"px"})),c===ct-1?u.css({width:s.width()-l*c+"px"}):u.css({width:l+"px"}),u.append(d),s.append(u)}},vt=function(e){var i=Ue[e],n=i.find("img"),o=n.attr("src"),r=n.up(".wslide-slide");i.show();var s=Math.round(r.width()/at),a=Math.round(r.height()/lt),l=Math.floor(n.offset().left-r.offset().left),c=Math.ceil(n.offset().top-r.offset().top);n.hide();for(var d=0;lt>d;d++)for(var u=0;at>u;u++){var h=t("<img>").attr({src:o}).css({position:"absolute",width:n.width()+"px",height:"auto",display:"block !important",top:-(a*d)+c+"px",left:-(s*u)+l+"px"}),p=t('<div class="wslide-box"></div>').append(h);p.css({position:"absolute",opacity:0,left:s*u+"px",top:a*d+"px",overflow:"hidden","z-index":"2","-webkit-backface-visibility":"hidden"}),u===at-1?p.css({width:r.width()-s*u+"px"}):p.css({width:s+"px"}),d===lt-1?p.css({height:r.height()-a*d+"px"}):p.css({height:a+"px"}),r.append(p)}},bt=0,yt=0,wt=!0,_t=wt?"mousedown":"touchstart",Et=wt?"mousemove":"touchmove",Tt=wt?"mouseup":"touchend",Ct=wt?"xxx":"touchcancel",St={},Dt=0}function h(e){var t=e.previewUrl||e.url;if(!t)return p(e);if(e.previewUrl||t.match("/weebly/images/")||t.match("x-com-weebly-images")||(t="/uploads/"+t.replace(/^\/uploads\//,"")),window.inEditor&&inEditor()){var i=require("config");i.chromeless&&t.startsWith("/")&&(t="http://"+configSiteName+t)}return t}function p(e){var t=window.inEditor&&inEditor()?e.editorUrl||e.url:e.publishedUrl||e.url;if(e.editorUrl||t.match("/weebly/images/")||t.match("x-com-weebly-images")||(t="/uploads/"+t.replace(/^\/uploads\//,""),e.thumbnail!==!1&&(t=t.replace(/^(.*)\.([^\.]+)$/,"$1_orig.$2"))),window.inEditor&&inEditor()){var i=require("config");i.chromeless&&t.startsWith("/")&&(t="http://"+configSiteName+t)}return t}function f(e,t,i){function n(){o&&(clearInterval(o),o=null),r||(r=!0,i())}var o=null,r=!1;if(e.onload=n,e.src=t,window.inEditor&&inEditor()){var s=require("config");s.chromeless&&e.src.startsWith("/")&&(e.src="http://"+configSiteName+e.src)}e.complete?n():o=setInterval(function(){e.complete&&n()},500)}e.Slideshow=window.wSlideshow={getSlideshowImages:o,updateSize:r,generateHTML:s,init:a,updatePhotos:l,render:c,initHeaderSlideshow:i,instantiateHeaderSlideshow:n,thumbnailURL:h,largeURL:p};var m={},g={},v="ontouchstart"in document.documentElement,b=!1;if(t.browser.msie){var y=parseInt(t.browser.version,10);9>y&&(b=!0)}var w=5,E={"16:9":16/9,"3:2":1.5,"4:3":4/3},T=.4,C=1,S=4}(Weebly,Weebly.jQuery),_wAMD.define("legacy/slideshow-jq",["editor-site-shared/relay"],function(e){return function(){var t;return t||e.Weebly.Slideshow}}(this)),_wAMD.define("site/editor/image-editor/header-slideshow",["underscore","site/editor/app","editor-site-shared/relay","editor-site-shared/image-editor/data","site/editor/image-editor/SlideshowEditToolbar","site/editor/ui/Spotlight","legacy/slideshow-jq"],function(e,t,i,n,o,r,s){function a(e){l(),d=new r({element:e,opacity:.7}),d.show()}function l(){d&&d.destroy()}var c,d,u,h,p,f,m=t.module("imageEditor.slideshow"),g={
initialScreenShown:function(){m.clearToolbar()},slideshowStopped:function(){m.reset(),g.refreshSlideshow(!0)},slideshowImageAdded:function(){var e=n.getCurrentHeader(),t=e.data,i=t.slideshow.slides.length-1;g.refreshSlideshow(),g.gotoSlide(i)},slideshowOptionsOpened:function(){var e=n.getCurrentHeader(),t=e.data.slideshow;h=t},slideshowOptionsCanceled:function(){var e,t=n.getCurrentHeader();return t.data.slideshow=h,h=void 0,e=n.setCurrentHeader(t),g.refreshSlideshow(),e},slideshowOrderUpdated:function(e){g.refreshSlideshow(),g.gotoSlide(e,!0)},gotoSlide:function(e,t){c.gotoSlide(e,t)},setSlideshowOptions:function(t){var i=!1,o=n.getCurrentHeader(),r=o.data.slideshow;e.has(t,"transition")&&(r.slide="slide"===t.transition,r.transition=t.transition,i=!0),e.has(t,"speed")&&(r.speed=t.speed,i=!0),e.has(t,"arrows")&&(r.arrows=t.arrows),e.has(t,"dots")&&(r.dots=t.dots),e.has(t,"dotPosition")&&(r.dotPosition=t.dotPosition),n.setCurrentHeader(o),g.refreshSlideshow(),m.play(i)},getCurrentSlide:function(){return c.getSlideIndex()},refreshSlideshow:function(e){var t=n.getCurrentHeader(),i=t.data||{};return e&&"slideshow"!==i.type?void m.clearHeaderSlideshow():(i.slideshow=i.slideshow||{dots:!0,arrows:!0,slide:!0},m.updateHeaderSlideshow(i.slideshow),void(e||m.initializeToolbar()))}};return m.on("start",function(){m.listenTo(i,{"imageeditor:slideshow:initialscreen":g.initialScreenShown,"imageeditor:slideshow:stop":g.slideshowStopped,"imageeditor:slideshow:image:saved":g.refreshSlideshow,"imageeditor:slideshow:image:removed":g.refreshSlideshow,"imageeditor:slideshow:image:add":g.slideshowImageAdded,"imageeditor:slideshow:options:open":g.slideshowOptionsOpened,"imageeditor:slideshow:order:updated":g.slideshowOrderUpdated}),i.commands.setHandlers({"imageeditor:slideshow:view":g.gotoSlide,"imageeditor:slideshow:options":g.setSlideshowOptions}),i.reqres.setHandlers({"imageeditor:slideshow:index":g.getCurrentSlide,"imageeditor:slideshow:options:cancel":g.slideshowOptionsCanceled})}),m.on("stop",function(){m.reset(),m.stopListening(i),i.commands.removeHandlers(["imageeditor:slideshow:view","imageeditor:slideshow:options"]),i.reqres.removeHandlers(["imageeditor:slideshow:index","imageeditor:slideshow:options:cancel"])}),m.edit=function(e){return p=e.element,f=p.style.cssText,c||g.refreshSlideshow(),c?(m.initializeToolbar(),a(p),!0):!1},m.reset=function(){l(),m.clearToolbar(),d=void 0,h=void 0},m.play=function(e){c.play(e)},m.initializeToolbar=function(){u&&u.close(),u=new o({slideshow:c}),m.listenTo(u,{saveCaption:function(){g.refreshSlideshow()},change:function(e){i.execute("imageeditor:slideshow:select",e)},edit:function(e){i.execute("imageeditor:slideshow:image:edit",e)}}),u.render(),u.$el.appendTo("#_editor-ui").trigger("shown")},m.clearToolbar=function(){u&&(u.close(),u=void 0)},m.getHeaderSlideshow=function(){return c},m.updateHeaderSlideshow=function(e){var t,i;return c&&(t=c.getSlideIndex(),i=c.getHandlers(),m.clearHeaderSlideshow()),c=s.instantiateHeaderSlideshow(e),window.whenThemeCSSLoaded(function(){c&&c.render()}),void 0!==t&&c.gotoSlide(t,!0),void 0!==i&&c.setHandlers(i),c},m.clearHeaderSlideshow=function(){c&&(c.destroy(),c=null,f&&(p.style.cssText=f,f=null,p=null))},m}),_wAMD.define("editor-site-shared/image-editor/utils",["underscore","util/general-utils"],function(e,t){function i(e){var t=e.match(/^\w+:\/\/[^\/]+(\/.*)$/);return t?t[1]:e}function n(e){return e=o(e),e=e.replace(/_orig(\.[^\.]*)$/,"$1"),e.replace(/\.([^\.]+)$/,"_orig.$1")}function o(e){return e.replace(/\?[^\?]+$/,"")}function r(e){return"filter"===e.type&&("identity"===e.options.name||!e.options.intensity||0===h(e.options.intensity))}function s(e){return!("crop"!==e.type||e.options.rotation&&0!==h(e.options.rotation)||e.options.scale&&1!==h(e.options.scale)||e.options.start&&(e.options.start.x&&0!==h(e.options.start.x)||e.options.start.y&&0!==h(e.options.start.y))||e.options.end&&(e.options.end.x&&1!==h(e.options.end.x)||e.options.end.y&&1!==h(e.options.end.y)))}function a(e){return!("orientation"!==e.type||e.options.flipVertically||e.options.flipHorizontally||e.options.rotation&&0!==h(e.options.rotation))}function l(e){return!("adjustments"!==e.type||e.options.saturation&&0!==h(e.options.saturation)||e.options.contrast&&0!==h(e.options.contrast)||e.options.brightness&&0!==h(e.options.brightness))}function c(e){return"focus"===e.type&&(d(e.options)||u(e.options))}function d(e){return"linear"===e.type&&(!e.options.blurRadius||0===h(e.options.blurRadius))}function u(e){return"radial"===e.type&&(!e.options.blurRadius||0===h(e.options.blurRadius))}function h(e){return t.roundNumber(e,4)}var p={},f={jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",gif:"image/png"};return p.urlToMimeType=function(e){var t=e.lastIndexOf(".")+1,i=e.lastIndexOf("?");i=-1===i?e.length:i;var n=e.substring(t,i);return f[n.toLowerCase()]},p.getBackgroundSprite=function(e){var t=(e.css("background-image")||"").match(/url\(['"]?(.+?)['"]?\)/);if(t){var n=i(t[1]);return{originalUrl:n}}return null},p.getEditData=function(e){var t=e.getAttribute("src"),i=n(t);return i!==o(t)&&(t=i),{originalUrl:t}},p.sanitizeOperations=function(i){return i=i.filter(function(e){return!(r(e)||s(e)||a(e)||l(e)||c(e))}),i.forEach(function(i){t.mapObjectValues(i,function(t){return e.isNumber(t)&&!e.isNaN(t)?h(t):t})}),i},p}),_wAMD.define("site/editor/image-editor/message",["jquery","editor-site-shared/image-editor/utils"],function(e,t){var i=e(window),n=function(n){var o={},r=e(n),s=!1;return"auto"==r[0].style.height&&(s=!0,r.css("height","")),o.height=r.height(),s&&r.css("height","auto"),o.width=r.width(),o.outerHeight=r.outerHeight(),o.outerWidth=r.outerWidth(),o.offset=r.offset(),o.offset.left-=i.scrollLeft(),o.offset.top-=i.scrollTop(),o.border={top:parseInt(r.css("border-top-width"),10)||0,left:parseInt(r.css("border-left-width"),10)||0,right:parseInt(r.css("border-right-width"),10)||0,bottom:parseInt(r.css("border-bottom-width"),10)||0},o.padding={top:parseInt(r.css("padding-top"),10)||0,left:parseInt(r.css("padding-left"),10)||0,right:parseInt(r.css("padding-right"),10)||0,bottom:parseInt(r.css("padding-bottom"),10)||0},o.id=r.up(".element").attr("id"),o.image=t.getBackgroundSprite(r),o};return n}),_wAMD.define("site/editor/image-editor/module",["jquery","site/editor/app","site/editor/image-editor/header-slideshow","editor-site-shared/relay","site/editor/image-editor/message"],function(e,t,i,n,o){function r(e){return e=e||s.current.header.element,e?new o(e):null}var s=t.module("imageEditor");return s.current={},s.edit=function(t){s.current=t,t.categoryId=e("#wsite-com-area-category").attr("data-id");var o="imageeditor:start";if("header"===t.mode||"slide"===t.mode){var a;if("header"===t.mode&&(a=e(t.header.element)),!t.forceSlideshow||t.forceImage)t.imageEditorData=t.imageEditorData||t.header.data.data,t.imageEditorData||(t.imageEditorData={}),t.imageEditorData.image||(t.imageEditorData.image=r(a));else{o="slideshoweditor:start",t.header.dimensions=r(a);var l=i.edit({element:s.current.header.element});if(!l)return e.Deferred.reject().promise()}}return n.request.call(n,o,t).always(function(){s.current={}})},s.on("start",function(){n.reqres.setHandlers({"imageeditor:element":r})}),s.on("stop",function(){n.reqres.removeHandlers(["imageeditor:element"])}),s}),_wAMD.define("ui-framework/js/components/confirm",["jquery","./base-view","./overlay","./panel"],function(e,t,i,n){var o=t.extend(e.extend({},i.Mixin,{className:"alert confirm",template:"<div class='alert__content'>\n	{{#title}}\n		<h2 class='alert__title'>\n			{{title}}\n		</h2>\n	{{/title}}\n	{{#message}}\n		<div class='alert__paragraph'>\n			{{message}}\n		</div>\n	{{/message}}\n	{{#messageHtml}}\n		<div class='alert__paragraph'>\n			{{{messageHtml}}}\n		</div>\n	{{/messageHtml}}\n   <div class='confirm__buttons'>\n	    {{{cancelButtonHtml}}}\n	    {{{proceedButtonHtml}}}\n   </div>\n</div>",zIndex:9999,isModal:!0,hAlignment:"center",vAlignment:"center",vAlignmentTopClassName:"alert--v-top",vAlignmentCenterClassName:"alert--v-center",proceedText:"Continue",cancelText:"Cancel",events:{"click .btn--primary":"proceed","click .btn--cancel":"cancel"},getRenderData:function(){return{title:this.queryOption("title"),message:this.queryOption("message"),messageHtml:this.queryOption("messageHtml"),proceedButtonHtml:this.renderProceedButtonHtml(),cancelButtonHtml:this.renderCancelButtonHtml()}},resetFocus:function(){this.$el.find(".btn--primary").focus()},proceed:function(){var e=this;return this._trigger("before:proceed").then(function(){return e.close()}).then(function(){e._trigger("proceed")})},cancel:function(){var e=this;return this._trigger("before:cancel").then(function(){return e.close()}).then(function(){e._trigger("cancel")})},promise:function(){var t=e.Deferred();return this.once("proceed",function(){t.resolve()}),this.once("cancel",function(){t.reject()}),t.promise()}}));return o.confirm=function(e){var t=new o(e);return t.open(),t.promise()},n.prototype.confirm=function(t){t=e.extend({vAlignment:"top"},t);var i=new o(t);return this.openOverlay(i),i.promise()},o}),_wAMD.define("site/editor/ui/weebly_header_image",["w-global","jquery","editor-site-shared/relay","editor-site-shared/image-editor/data","editor/pages/utils","editor/build/themes/data","editor/build/mobile/data","editor/build/ui/weebly_view","site/editor/ui/HoverControls","site/editor/image-editor/header-slideshow","config","editor/sections/utils","site/editor/image-editor/module","ui-framework/js/components/confirm","legacy/slideshow-jq"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p){function f(){return getComputedStyle(w.getCurrentHeaderElement())}function m(){var e=f(),t=e["max-height"];t&&"none"!==t||(t=e.height),t=t.length&&-1===t.indexOf("%")?parseInt(t,10):void 0;var i=e["max-width"];return i&&"none"!==i||(i=e.width),i=i.length&&-1===i.indexOf("%")?parseInt(i,10):void 0,{height:t,width:i}}function g(e){return 0===e.indexOf("http")&&(e="/"+e.split("/").slice(3).join("/")),e}function v(e){var t=e.data;return t?t.type?t.image&&t.image.editorUrl:t.is_slideshow?null:e.url:null}function b(e){return e.type?"slideshow"===e.type:e.is_slideshow}function y(){d.chromeless||(E&&E.destroy(),_.length&&r.getCurrentThemeData(a.isMobileView).done(function(o){var r=n.getCurrentHeader(),s=m(),d=!1;E=new l({currentHeader:r,targetElement:_,appendToElement:t("#_editor-ui"),allowPageTypes:!a.isMobileView&&!u.themeSupportsSections(o),allowSlideshow:!a.isMobileView,allowNewImage:!0,allowReset:!0,position:"topright",height:s.height,width:s.width,editCallback:function(t){return t=t||{},t.forceSlideshow&&!e.Restrictions.hasAccess("slideshow_header")?void i.request("billing:upgrade:prompt",{restrictionID:"slideshow_header",restrictionType:"feature",refer:"main"}):("image"===r.data.type&&(r.data.image.originalUrl||(r.data.image.originalUrl=w.getHeaderImageUrl()),r.data.image.editedUrl||(r.data.image.editedUrl=r.data.image.originalUrl),r.data.image.editorUrl||(r.data.image.editorUrl=r.data.image.editedUrl),r.data.image.publishedUrl||(r.data.image.publishedUrl=r.data.image.editorUrl)),t.mode="header",t.header={data:r,element:_[0]},t.imageEditorData=t.imageEditorData||r.data,d=!0,void h.edit(t).always(function(){d=!1,t.forceSlideshow&&c.reset()}).done(function(e){w.setCurrentHeaderImage(e)}))},getIsEditing:function(){return d}}).on({"click:reset":function(){var i=t("#wsite-com-area-category").attr("data-id");this.hide(),p.confirm({parent:"#_editor-ui ._editor-ui__framework",outerClassName:"modal--transparent",isModalLight:!1,message:e.utl("javascript.editor.slideshow-editor.header_reset_message"),proceedButton:{text:e.utl("javascript.editor.slideshow-editor.header_reset_ok"),className:"btn--destructive"},cancelButton:{text:e.utl("html.weebly.slideshow-editor.js.he_11")},isModal:!0,isPositionFixed:!0}).then(e.Editor.RPC.ImageEditor.resetHeaderImage.bind(e.Editor.RPC.ImageEditor,window.currentTheme,window.currentPage,r.id||"",i,!1)).done(function(e){w.setCurrentHeaderImage(e)})}}),E.render()}))}var w={},_=t();w.reportHeaderElement=function(e){_=t(e)},w.getCurrentHeaderElement=function(){return _[0]},w.getHeaderImageUrl=function(){var e=_.css("background-image").match(/url\(['"]?([^'"]*)['"]?\)/),t=e?e[1]:"";return g(t)},w.setCurrentHeaderImage=function(i,l){var d,u=a.isMobileView;c.clearHeaderSlideshow(),i||(i={}),i.data||(i.data={});var h=i.data;h.type&&"image"===h.type&&!h.image&&(h.image={});var p=h.image,f=v(i);return u&&(f||(d=r.getCurrentThemeData(u).done(function(e){var t=o.getPageType(currentPage,e);f=s.getHeaderPlaceholder(t),h.type?p.editorUrl=f:i.url=f})),_.css({height:""})),t.when(d).done(function(){b(h)?c.updateHeaderSlideshow(h.slideshow):f?u?(_.css({height:"auto","min-height":"0",background:"none"}),_.html('<img src="'+f+'" style="width:100%;height:auto;display:block;">')):_.css({backgroundImage:"url("+f+")",backgroundPosition:i.id?"0 0":""}):(_.css({background:"",backgroundImage:"",backgroundPosition:"",height:""}),_.empty()),n.setCurrentHeader(i),e.Permissions.allow_header_editing&&y(u),l||updateFooterAttribution()})};var E;return w}),_wAMD.define("tpl!editor/footer/ad-footer.tpl",[],function(){return'<div id="weebly-empty-footer" class="wsite-ad-footer wsite-ad-footer--trigger-upgrade ui-framework">\n\n	<button class="wsite-ad-footer__upgrade btn btn--rounded" data-icon-before="bolt">\n		{{#tl}}html.weebly.libraries.weebly_footer_15{{/tl}}\n	</button>\n	<div class="js-footer-power-by wsite-ad-footer__brand">\n		{{! powered by<span class="icon">weebly</span> included in TL string }}\n		{{#tl}}html.weebly.libraries.weebly_footer_logo{{/tl}}\n	</div>\n\n</div>\n'}),_wAMD.define("legacy/weebly_footer",["config","jquery","underscore","backbone","site/editor/app","editor/app","editor-site-shared/relay","editor-site-shared/image-editor/data","free-trial/dialogs/PremiumElementDialogService","site/editor/ui/weebly_header_image","tpl!editor/footer/ad-footer.tpl","shared/permissions/restrictions"],function(e,t,i,n,o,r,s,a,l,c,d){function u(){b=$("weeblyfootertext"),y=$("weeblyfooterattribution")}function h(e){var t=[];if(!e||!e.data)return t;var i;return i="slideshow"===e.data.type?e.data.slideshow.slides:[e.data.image],i&&i.forEach(function(e){e&&e.pageUrl&&e.creator&&t.push("<a href='"+e.pageUrl+"' target='_blank'>"+e.creator+"</a>")}),t}function p(e){var t=[];return $H(e).each(function(e){var i=e[1];if(i)for(var n=Object.isArray(i)?i:[i],o=0;o<n.length;o++){var r=n[o];r&&r.url&&r.author&&t.push("<a href='"+r.url+"' target='_blank'>"+r.author+"</a>")}}),t}function f(e){var t=[];return i.each(e,function(e){if(e){e instanceof n.Model&&(e=e.toJSON());var i=e.origImage||e.image;if(i){var o=i.attributionUrl,r=i.attributionAuthor;o&&r&&t.push("<a href='"+o+"' target='_blank'>"+r+"</a>")}}}),t}function m(e){return e=e.uniq(),e.length?(1==e.length?_W.utl("html.weebly.libraries.weebly_footer_6"):_W.utl("html.weebly.libraries.weebly_footer_7"))+" "+e.join(", "):""}function g(){new Ajax.Request(ajax,{parameters:{pos:"hidefooter",siteid:currentSite,cookie:document.cookie},onFailure:errFunc,bgRequest:!0})}function v(e){if(e){var i=Mustache.compile(d);e.innerHTML=i();var n="wsite-ad-footer--trigger-upgrade",o=t(b).find("#weebly-empty-footer");o.find(".js-footer-power-by").hover(function(){o.removeClass(n)},function(){o.addClass(n)}).click(function(e){e.stopPropagation(),window.open("https://www.weebly.com","_blank")})}}var b,y,w,_,E={},T=_W.utl("html.weebly.libraries.weebly_footer_1"),C=_W.utl("html.weebly.libraries.weebly_footer_2");return E.updateFooter=function(){void 0===w?(w=Weebly.initialFooterText,_=Weebly.initialFooterTextShown):Weebly.Restrictions.hasAccess("edit_footer")&&(_=!1),u(),E.updateFooterText(w),E.updateFooterTextShown(_),E.updateFooterAttribution(),t(".wsite-version-web").on("click",function(e){Pages.go("webView")})},E.updateFooterText=function(t){var i;if(w=t,Weebly.Restrictions.hasAccess("edit_footer")&&w||(Weebly.Restrictions.isClientSite||(w=T),b&&(Weebly.view.isMobileView?b.style.display="block":b.style.display="inline")),b){if(w==T)if(Weebly.view.isMobileView||e.chromeless)if(e.chromeless){var n=Mustache.compile("<div id='weebly-empty-footer' class='wsite-footer' style='position: relative;'><span class='weebly-empty-footer-message empty-element-message'>"+_W.utl("html.weebly.libraries.weebly_footer_12")+"</span></div>");b.innerHTML=n()}else b.innerHTML=C;else{var o="";if(window.Weebly&&window.Weebly.Reseller&&window.Weebly.Reseller.isResellerUser)switch(window.Weebly.Reseller.brandPreference){case"weebly":o=_W.utl("html.weebly.libraries.weebly_footer_8")+"<div class='w-ui' style='display: inline-block; margin-left: 15px;'><button class='btn-flat btn-flat-outline btn-flat-light' style='color: #2990ea;'>"+_W.utl("html.weebly.libraries.weebly_footer_13")+"</button></div>";break;case"cobranded":var r=_W.utl("html.weebly.libraries.weebly_footer_9");r=r.replace("{{brand_name}}",Weebly.Reseller.resellerName),o=r+"<div class='w-ui' style='display: inline-block; margin-left: 15px;'><button class='btn-flat btn-flat-outline btn-flat-light' style='color: #2990ea;'>"+_W.utl("html.weebly.libraries.weebly_footer_14")+"</button></div>";break;case"whitelabeled":default:o=_W.utl("html.weebly.libraries.weebly_footer_10")}else o=_W.utl("html.weebly.libraries.weebly_footer_11")+"<div class='w-ui' style='display: inline-block; margin-left: 15px;'><button class='btn-flat btn-flat-outline btn-flat-light' style='color: #2990ea;'>"+_W.utl("html.weebly.libraries.weebly_footer_15")+"</button></div>";if(Weebly.abTest&&Weebly.abTest.showFreeFooter)v(b);else{var a=Mustache.compile('<div id="weebly-empty-footer" class="wsite-footer" style="position: relative;"><span class="weebly-empty-footer-message empty-element-message">'+o+'</span><div class="wsite-spotlight-cover" style="cursor: pointer;"><div class="wsite-spotlight-cover-inner"></div></div></div>');b.innerHTML=a()}}else b.innerHTML=w;if(Weebly.Restrictions.hasAccess("show_footer_removebutton")){Weebly.Restrictions.hasAccess("edit_footer")?b.insert(new Element("a",{href:"#","class":"wsite-remove-footer-button"}).update(_W.utl("html.weebly.libraries.weebly_footer_4")).observe("click",function(e){E.updateFooterTextShown(!1),g(),e.stop()})):(i=$("weebly-empty-footer"),i?i.observe("click",function(e){s.execute("editor:show:dialog",{element_id:"edit_footer",restrictionType:"feature"}),e.stop()}):b.insert(new Element("a",{href:"#","class":"wsite-edit-footer-button"}).update(_W.utl("html.weebly.libraries.weebly_footer_5")).observe("click",function(e){s.execute("editor:show:dialog",{element_id:"edit_footer",restrictionType:"feature"}),e.stop()})))}}},E.updateFooterTextShown=function(e){if(_=e,Weebly.Restrictions.hasAccess("edit_footer")||(_=!0),b){var i=t(b);Weebly.view.isMobileView&&_?(i.find(".wmobile-footer-custom").show(),i.find(".wmobile-app-callout").show()):Weebly.view.isMobileView&&!_?(i.find(".wmobile-footer-custom").hide(),i.find(".wmobile-app-callout").hide()):_?Weebly.view.isMobileView?b.style.display="block":b.style.display="inline":b.style.display="none"}},E.updateFooterAttribution=function(){var e=[],t=a.getCurrentHeader(),i=c.getCurrentHeaderElement();t&&i&&"no-header"!=window.currentPageType&&(e=e.concat(h(t))),Weebly.pageContext.attribution&&(e=e.concat(p(Weebly.pageContext.attribution))),Weebly.siteContext.attribution&&(e=e.concat(p(Weebly.siteContext.attribution)));var n=o.request("themeBackground:all");if(e=e.concat(f(n)),y){var r=m(e);r?(y.style.display="block",y.innerHTML=r):(y.style.display="none",y.innerHTML="")}},E.setContentFieldAttribution=function(e,t){e in Weebly.pageContext.contentFieldsByID?Weebly.pageContext.attribution[e]=t:e in Weebly.siteContext.contentFieldsByID&&(Weebly.siteContext.attribution[e]=t)},window.updateFooter=E.updateFooter,window.updateFooterText=E.updateFooterText,window.updateFooterTextShown=E.updateFooterTextShown,window.updateFooterAttribution=E.updateFooterAttribution,window.setContentFieldAttribution=E.setContentFieldAttribution,E}),_wAMD.define("site/editor/ui/images/utils",["underscore","editor-site-shared/ui/constants"],function(e,t){var i={isInitialImage:function(e){return e?i.isInitialImageSrc(e.src||""):!1},isInitialImageSrc:function(e){return"string"==typeof e&&(e.match(/na\.jpg/)||e.match(/na\.png/)||e.match(/upload_images_01\.jpg/)||e.match(/\/placeholders\/[^\.]*\.png/))},isImageElement:function(e){return e+="",-1!==t.STANDALONE_IMAGE_ELEMENTS.indexOf(e)||-1!==t.PARAGRAPH_IMAGE_ELEMENTS.indexOf(e)||-1!==t.SIMPLE_IMAGE_ELEMENTS.indexOf(e)},isStandaloneImageElement:function(e){return e+="",-1!==t.STANDALONE_IMAGE_ELEMENTS.indexOf(e)},isPageLayoutImage:function(e){return i.isPageLayoutImageSrc(e.src||"")&&"wslide-slide-inner2"!=e.up("div").className},isPageLayoutImageSrc:function(e){return"string"==typeof e&&e.match(/page-layouts/)},isImageLiquid:function(e){return-1!==(e.attr("style")||"").indexOf("max-width")},preloadImage:function(e,t){var i=new Image;i.onload=function(){t()},i.src=e},loadImage:function(e,t,i){function n(){o&&(clearInterval(o),o=null),r||(r=!0,i())}var o=null,r=!1;e.onload=n,e.src=t,e.complete?n():o=setInterval(function(){e.complete&&n()},500)},getImageDimensions:function(e,t){var n=new Image;i.loadImage(n,e,function(){t(n.naturalWidth||n.width,n.naturalHeight||n.height)})},getBackgroundPosition:function(e){var t,i,n=(e.css("background-position")||"").split(" ");return n[0]&&(t=parseFloat(n[0]),t=isNaN(t)?0:t/100),n[1]&&(i=parseFloat(n[1]),i=isNaN(i)?0:i/100),{x:t,y:i}}};return window.isInitialImage=i.isInitialImage,window.isInitialImageSrc=i.isInitialImageSrc,window.isImageElement=i.isImageElement,window.isStandaloneImageElement=i.isStandaloneImageElement,window.isPageLayoutImage=i.isPageLayoutImage,window.isPageLayoutImageSrc=i.isPageLayoutImageSrc,window.isImageLiquid=i.isImageLiquid,i}),_wAMD.define("tpl!sections/dialogs/videos/video-encoding-overlay.tpl",[],function(){return'<div class="encoding-icon">\n	<div class="encoding-icon__bg">\n	</div>\n</div>\n'}),_wAMD.define("site/editor/theme-background/module",["jquery","underscore","mustache","editor-site-shared/relay","site/editor/app","site/editor/ui/HoverControls","legacy/weebly_footer","site/editor/ui/images/utils","editor/sections/utils","config","editor-site-shared/ui/constants","tpl!sections/dialogs/videos/video-encoding-overlay.tpl","editor/build/themes/data","editor/build/ui/weebly_view"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p){var f=o.module("themeBackground",function(f){function m(e){e.css({"background-position":"","background-size":"","background-repeat":"","background-image":"","background-attachment":""})}function g(e){var t=e.css("background-image");if(t){var i=t.match(/url\(('([^']*)'|"([^"]*)"|(.*?))\)/);if(i)return i[2]||i[3]||i[4]}}var v=null,b=null,y=[],w={},_=null,E={rerender:function(e){if(e){var i=f.getBackgroundNameFromClass(e);E.applyBackgrounds(t.pick(w,i))}else E.applyBackgrounds(w)},rendered:function(){C(),T(),E.applyBackgrounds(w)},update:function(e){w=e.backgrounds?e.backgrounds:w,c.chromeless&&!e.backgrounds&&(w={})},extend:function(e){e&&(w=t.extend(w,e))},onStartRender:function(e,t){E.update(t)},init:function(t){var i;_=e(window),_.on({"resize.theme-background":E.resize}),v=f.getBackgroundElement(t),b=f.getNonBackgroundElements(v),i=f.getDefaultBackgroundUrl(v),b.css("opacity","0.5"),v.css("transition","background-position 0.1s linear"),C(),n.trigger("themeBackground:ready",i),n.on("image:editor:scroll",E.onImageEditorScroll,E)},onImageEditorScroll:function(e){var t=_.scrollTop();_.scrollTop(t-e),n.trigger("image:editor:iframe:scroll",t-_.scrollTop())},close:function(){e(window).off(".theme-background"),n.off(null,null,E),b.css("opacity",""),v.css("transition",""),v=null,b=null,setTimeout(T,1e3),s.updateFooterAttribution()},applyBackgroundToElement:function(e,t){f.applyBackgroundToElement(e,t)},getAll:function(){return w},getIsCommerce:function(){var t,i=e("#wsite-com-area-category").attr("data-id"),n=e("#wsite-com-product-gen").attr("data-id");return i?t={type:"category",id:i}:n&&(t={type:"product",id:n}),t},getElementPosition:function(e){var t=f.getBackgroundElement(e);return{bgSrc:(t.css("background-image").match(/^url\(['"]?(.*?)['"]?\)$/i)||[])[1],bgCoords:a.getBackgroundPosition(t),bgSizePct:parseFloat(t.css("background-size")),availHeight:t.innerHeight(),availWidth:t.innerWidth()}},getPositioningProperties:function(t){var i=f.getBackgroundElement(t),n={},o=["float","position","width","height","left","top","backgroundSize","backgroundPosition","marginLeft","marginTop","paddingLeft","paddingTop","padding"];return o.forEach(function(e){"height"===e?n[e]=i.outerHeight():"width"===e?n[e]=i.outerWidth():n[e]=i.css(e)}),n.offset=i.offset(),n.offset.top=n.offset.top-e(window).scrollTop(),n},applyBackgrounds:function(e){var t,i={};for(var n in e)t=e[n],i[n]=t,t instanceof Backbone.Model&&(i[n]=t.toJSON());f.applyBackgrounds(e)},applyBackgroundPositioning:function(e,t){var i=v,n=[e,t].join(" "),o=l.isHeaderSectionSupported(Weebly.pageContext.getAreas())?"":"important";i[0].style.setProperty("background-position",n,o)}},T=function(){c.chromeless||h.getCurrentThemeData(p.isMobileView).done(function(t){var i=f.getBackgroundElements();i.not("body, .wsite-section, .wsite-header-section").each(function(){var i=e(this),o=i.attr("class")||"",s=o.match(/\bwsite-background(?:-([\w-]*))?\b/),a=s[1]||"",c=new r({targetElement:i,appendToElement:"#_editor-ui",allowPageTypes:!l.themeSupportsSections(t),allowSlideshow:!1,editCallback:function(){n.execute("editor:background:open",a)}});c.render(),y.push(c)})})},C=function(){t.each(y,function(e){e.destroy()}),y=[]};f.applyBackgroundToElement=function(t,n,o){var r,s,a,c,d;n instanceof e||(n=f.getBackgroundElement(n));var h=l.isHeaderSectionSupported(Weebly.pageContext.getAreas())?"":"important";c={"background-position":"","background-size":"","background-repeat":"","background-image":"","background-attachment":""},t&&t.image&&!t.image.useThemeDefault?n.addClass("wsite-custom-background"):n.removeClass("wsite-custom-background");var p=e("<div/>").hide().appendTo("body");n.css("backgroundColor")!==p.css("backgroundColor")&&delete c["background-image"],p.remove(),d=n[0],n.removeClass("is-loading");var m="js-encoding-icon",g=e(i.render(u)).addClass(m);if(n.find("."+m).remove(),t&&!t.loading){var v=t.image,b=t.zoom;a=t.position,r=b?100+100*b+"%":"cover",s=t.backgroundPosition,v&&!v.useThemeDefault&&(o?(c={"background-size":"cover","background-repeat":"no-repeat"},s="50% 50%",r="cover"):"fill"!=a&&a?"left"==a?(c={"background-position":"0% 0%","background-size":"auto","background-repeat":"no-repeat"},s="0% 0%"):"center"==a?(c={"background-position":"50% 0%","background-size":"auto","background-repeat":"no-repeat"},s="50% 0%"):"right"==a?(c={"background-position":"100% 0%","background-size":"auto","background-repeat":"no-repeat"},s="100% 0%"):"tile"==a&&(c={"background-position":"0 0","background-size":"auto","background-repeat":"repeat"},s="0 0"):(s=s?s:"50% 50%",c={"background-position":s,"background-repeat":"no-repeat"},n.is("body")&&(c["background-attachment"]="fixed")),s&&d.style.setProperty("background-position",s,h),r&&("fill"===a||o)?d.style.setProperty("background-size",r,h):d.style.setProperty("background-size","auto",h),c["background-color"]="transparent",c["background-image"]="url('"+v.url+"')")}else t&&t.loading&&n.addClass("is-loading").append(g);return n.css(c),n},f.applyBackgrounds=function(t){var i=f.getBackgroundElements(),n=e("body");m(n),n.removeClass("wsite-custom-background"),i.each(function(){var i=e(this),n=i.attr("class")||"",o=f.getBackgroundNameFromClass(n),r=t[o];r&&f.applyBackgroundToElement(r,i)})},f.getBackgroundNameFromClass=function(e){var t=e.match(/\bwsite-background(?:-([\w-]*))?\b/);return t[1]||""},f.getBackgroundElement=function(t){return t=t?"-"+t:"",f.getCorrectBackground(e(".wsite-background"+t))},f.getBackgroundElements=function(){var t=e('body.wsite-background, body[class^="wsite-background-"], body[class*=" wsite-background-"]');return e("#icontent").find('.wsite-background, [class^="wsite-background-"], [class*=" wsite-background-"]').add(t)},f.getNonBackgroundElements=function(e){return e.siblings().add(e.children().not("."+d.SECTION_HIGHLIGHT_CLASS_NAME))},f.getDefaultBackgroundUrl=function(t){var i=t.css("background-image"),n=e("#icontent").find(".wsite-custom-background").add("body.wsite-custom-background");t.css("background-image",""),n.removeClass("wsite-custom-background");var o=g(t);return n.addClass("wsite-custom-background"),t.css("background-image",i),o},f.getCorrectBackground=function(t){return t.is("#icontent")?e("body"):t},f.on("start",function(){f.listenTo(o.vent,{"page:startRender":E.onStartRender,"editor:middle":E.update,pageRendered:E.rendered,themeRendered:E.rendered,"section:background:image:render":E.rerender,"headerSection:background:image:render":E.rerender}),f.listenTo(n,{"themeBackground:close":E.close}),o.commands.setHandlers({"themeBackground:update":E.update,"themeBackground:extend":E.extend}),o.reqres.setHandlers({"themeBackground:all":E.getAll}),n.commands.setHandlers({"themeBackground:init":E.init,"themeBackground:extend":E.extend,"themeBackground:apply":E.applyBackgrounds,"themeBackground:applyToElement":E.applyBackgroundToElement,"themeBackground:applyPosition":E.applyBackgroundPositioning}),n.reqres.setHandlers({"themeBackground:isCommerce":E.getIsCommerce,"themeBackground:elementPosition":E.getElementPosition,"themeBackground:positioningProperties":E.getPositioningProperties})}),f.on("stop",function(){f.stopListening(),o.commands.removeHandlers(["themeBackground:update","themeBackground:extend"]),o.reqres.removeHandlers(["themeBackground:all"]),n.commands.removeHandlers(["themeBackground:init","themeBackground:extend","themeBackground:close","themeBackground:apply","themeBackground:applyToElement","themeBackground:applyPosition"]),n.reqres.removeHandlers(["themeBackground:isCommerce","themeBackground:elementPosition","themeBackground:positioningProperties"])})});return f}),_wAMD.define("editor-site-shared/build/elements/ContentFieldDefinition",["legacy/weebly_utils"],function(){var e=Class.create({initialize:function(e,t){this.cfid=e,this.name=t.name,this.htmlStart=t.html_start,this.htmlEnd=t.html_end,this.hasContent=t.has_content,this.hasImage=t.has_image,this.hidden=t.hidden,this.customContent=t.custom_content,this.elementonChangeJs=t.element_onchange_js,this.elementJs=t.element_js,this.selectable=t.selectable,this.contentFieldProperties=t.content_field_properties.map(function(e){return{cfpid:e.cfpid,title:e.title,options:e.options,property:e.property,result:e.result,markupType:e.markup_type,advanced:e.advanced,propertyDefault:e.property_default,resultInEditor:e.result_in_editor,displayOrder:e.display_order,referenceProperty:e.reference_property,hidden:e.hidden}})},getProperty:function(e){return"number"==typeof e&&(e+=""),"string"==typeof e&&(e=e.match(/^%%\w+%%$/)?{property:e}:e.match(/^<!\w+!>$/)?{referenceProperty:e}:{cfpid:e}),arraySearch(this.contentFieldProperties,e)}});return e}),_wAMD.define("editor-site-shared/build/elements/ElementDefinition",["underscore","editor-site-shared/build/elements/ContentFieldDefinition","legacy/weebly_utils"],function(e,t){var i=Class.create({initialize:function(i,n){this.elementid=i,this.displayname=n.name,this.contentfields={},this.manifest=JSON.parse(n.manifest),e.each(n.content_fields,function(e){var i=new t(e.cfid,e);this.contentfields[e.cfid]=i},this)},getContentField:function(e){return hashSearch(this.contentfields,e)}});return i}),_wAMD.define("editor-site-shared/build/elements/Definitions",["underscore","w-global","config","editor-site-shared/build/elements/ElementDefinition"],function(e,t,i,n){var o=function(){return this.definitions={},this.rawDefinitions={},this};return o.prototype={fetchDefinition:function(o,r,s){return e.has(this.definitions,o)?void r(this.definitions[o],this.rawDefinitions[o]):i.chromeless?void console.log("Invalid ajax get element definition"):void t.Editor.RPC.Elements.getElementDefinition([o]).done(function(t){
e.each(t,function(e){var t=new n(e.eid,e);this.rawDefinitions[e.eid]=e,this.definitions[e.eid]=t,r(t,e)},this)}.bind(this))},registerDefinition:function(e,t){this.definitions[e]=new n(e,t),this.rawDefinitions[e]=t},getDefinition:function(e){return this.definitions[e]},getRawDefinitions:function(){return this.rawDefinitions}},new o}),_wAMD.define("site/editor/build/site",["underscore","raven-js","site/editor/app","editor/design/weebly_design_options","editor/build/themes/data","editor-site-shared/relay","site/editor/relay-constants","editor/build/mobile/data","editor/page-manager/pages","editor-site-shared/build/elements/Definitions","site/editor/commerce/module","editor/commerce-init"],function(e,t,i,n,o,r,s,a,l,c,d){var u={};return u.initializeEditor=function(){var e=arguments;setTimeout(function(){u.initializeEditorSync.apply(this,e)},0)},r.commands.setHandler("site:initializeEditor",u.initializeEditor),u.initializeEditorSync=function(h,p,f,m,g,v,b,y,w,_,E,T,C,S){try{e.each(h.element_definitions,function(e,t){c.registerDefinition(t,e)}),window.source=h.restrictions.source,delete h.restrictions.source,Weebly.Restrictions.settings=h.restrictions,Weebly.Restrictions.services=h.services,Weebly.Restrictions.level=parseInt(h.access_level),Weebly.Restrictions.published=h.is_published,e.isUndefined(S)||(window.userID=S,"0"===window.com_userID&&(window.com_userID=S)),e.isUndefined(C)||(window.currentSite=C,"0"===window.com_currentSite&&(window.com_currentSite=C)),window.currentSiteTitle=f,window.hideTitle=parseInt(h.hide_title),window.DISABLE_NAV_MORE=h.disableNavMore,window.adsenseID=h.adsenseID,window.remoteAccounts=h.remoteAccounts,m.css=g,o.setCurrentThemeColor(m.current_theme_color),o.setCurrentThemeData(m),i.vent.trigger("forceThemeRerender"),o.primaryThemeDefinition=m,o.primaryThemeCSS=g,o.adaptiveThemeDefinition=v,o.adaptiveThemeCSS=b,e.isObject(o.primaryThemeDefinition)&&Weebly.themeCache.insert(o.primaryThemeDefinition.theme_id,o.primaryThemeDefinition),e.isObject(o.adaptiveThemeDefinition)&&Weebly.themeCache.insert(o.adaptiveThemeDefinition.theme_id,o.adaptiveThemeDefinition),u.backgrounds=w,n.setDesignOptions(y),Weebly.Permissions=E||{},Weebly.Font.data=h.fonts,a.setSiteSettings(h.mobile_site_settings),n.siteApplyDesignOptions(),Weebly.Commerce.hasCart=h.has_cart,d.storefrontSettings.set({product_image_ratio:h.store_settings.product_image_ratio,element_legacy_mode:h.store_settings.element_legacy_mode,upload_uid_location:h.store_settings.upload_uid_location}),e.isObject(Weebly.Reseller)||(Weebly.Reseller={}),Weebly.Reseller.isResellerUser=h.user.reseller,T&&e.extend(Weebly,T),e.isObject(Weebly.abTest)||(Weebly.abTest={}),Weebly.abTest.showFreeFooter=h.abTest&&h.abTest.showFreeFooter,l.reset(p),i.vent.trigger("site:initialized",_)}catch(D){console.error(D),t.captureException(D),r.trigger(s.EVENTS.SITE_INIT_FAIL,D)}},r.reqres.setHandler("site:initializeEditorSync",u.initializeEditorSync),u.syncRestrictions=function(t){e.extend(Weebly.Restrictions,t)},r.commands.setHandler("site:syncRestrictions",u.syncRestrictions),u}),_wAMD.define("util/facebookSDK",[],function(){var e,t={},i=!1;return t.embed=function(){if(!document.getElementById("facebook-jssdk")&&!e){var t;if(!document.getElementById("fb-root")){var i=document.createElement("div");i.id="fb-root",document.body.insertBefore(i,document.body.firstChild)}e=document.createElement("script"),e.id="facebook-jssdk",e.src="//connect.facebook.net/en_US/sdk.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}},t.parse=function(){document.getElementById("facebook-jssdk")||e?i&&"undefined"!=typeof FB&&(t.setColorScheme(),FB.XFBML.parse()):t.embed()},t.reparseCommentCount=function(){for(var e=document.getElementsByTagName("fb:comments-count"),t=0;t<e.length;t++)FB.XFBML.parse(e[t])},t.setColorScheme=function(){for(var e=document.getElementsByClassName("facebook-comment-widget"),t=document.body,i=t.className.match("wsite-theme-light"),n=0;n<e.length;n++)e[n].setAttribute("colorscheme",i?"light":"dark")},t.asyncInit=function(){FB.init({appId:"190291501407",xfbml:!0,version:"v2.6"}),FB.Event.subscribe("comment.create",t.reparseCommentCount),FB.Event.subscribe("comment.remove",t.reparseCommentCount),i=!0,t.parse()},t}),_wAMD.define("site/editor/ui/weebly_social_sharing",["jquery","util/facebookSDK","site/editor/app"],function(e,t,i){function n(){o(),r()}function o(){e("fb\\:like").length&&t.parse()}function r(){var t="https:"===window.location.protocol?"https://":"http://";e("a.twitter-share-button").each(function(i,n){var o,r=e.param({_:+new Date,count:"horizontal",id:"twitter_tweet_button_0",land:"en",url:n.href.replace(/.*?\?url=(.*)$/,"$1")});r+="&text="+n.getAttribute("data-text"),o=e("<iframe />",{src:t+"platform.twitter.com/widgets/tweet_button.html?"+r,allowtransparency:"true",frameborder:"0",scrolling:"no","class":"twitter-share-button twitter-count-horizontal"}).css({width:110,height:20}),e(n).replaceWith(o)})}return window.fbAsyncInit=function(){t.asyncInit()},i.vent.on("editor:middle",function(e){"blog"==e.kind&&n()}),{init:n}}),function(e){function t(e){function t(e,t){e===!0?r=t:"function"==typeof e?l.push([e,t]):"string"==typeof e?a[e]=t:"object"==typeof e&&e.each(function(e){a[e]=t})}function i(t){return n(t)||a[t[e]]||r}function n(e){var t;return l.find(function(i){return i[0](e)?(t=i[1],!0):void 0}),t}function o(e,t,n,o){var r=i(e);return r?new r(e,t,n,o):void 0}var r,s=this,a={},l=[];s.register=t,s.load=o}e.GenericLoader=t}(Weebly),_wAMD.define("editor-site-shared/build/GenericLoader",function(e){return function(){var t;return t||e.Weebly.GenericLoader}}(this)),_wAMD.define("editor-site-shared/build/elements/ContentField",["jquery","underscore","w-global","config","editor-site-shared/build/elements/Definitions"],function(e,t,i,n,o){var r="92495494",s="58377875",a="77980269",l=Class.create({initialize:function(e,n){var o=i.Elements?i.Elements.unsyncedProperties:{};this.ucfid=n.ucfid,this.eid=e,this.cfid=n.cfid,this.properties={},t.each(n.properties,function(e){var t=e.property_result;this.ucfid&&o.hasOwnProperty(this.ucfid)&&(t=o[this.ucfid]),this.properties[e.cfpid]={cfpid:e.cfpid,ucfpid:e.ucfpid,property_result:t,reference_property:e.reference_property}},this),this.content=n.content,this.contentFieldContent=n.content_field_content,this.contentFieldAlign=n.content_field_align},getProperty:function(e){return"number"==typeof e&&(e+=""),"string"==typeof e&&(e=e.match(/^<!\w+!>$/)?{reference_property:e}:{ucfpid:e}),hashSearch(this.properties,e)},fetchDefinition:function(){var e=o.getDefinition(this.eid);return e?e.contentfields[this.cfid]:null},parseTagType:function(t){return e(t).prop("tagName")},parseTagAttributes:function(t){for(var i={},n=e(t)[0].attributes,o=0;o<n.length;o++){var r=n.item(o).nodeName,s=n.item(o).nodeValue;i[r]=s}return i},createStartTag:function(e,i){var n="<"+e;return t.each(i,function(e,t){n+=" "+t+'="'+e+'"'}),n+">"},render:function(){var e=this.fetchDefinition();if(!e)return"";var o=e.contentFieldProperties,r=e.htmlStart,s=this.parseTagType(r),a="",l="",c="",d="",u="";return s&&(a=this.parseTagAttributes(r),a["class"]||(a["class"]="")),1==e.hasContent?(l=this.contentFieldContent,l||(l=i.utl("html.weebly.libraries.classes.Element_2")),n.chromeless&&l.match("Click here to edit.")&&(l=i.utl("html.weebly.libraries.classes.Element_3")),l=l.replace(/^(title|paragraph).*click here to edit\.$/i,i.utl("html.weebly.libraries.classes.Element_4")),this.contentFieldAlign&&(d+="text-align:"+this.contentFieldAlign)):2==e.hasContent&&(c=e.customContent,c=c.replace(/%%ELEMENTID%%/gi,this.ucfid),c=c.replace(/%%PAGEELEMENTID%%/gi,this.cfid),c=c.safeReplace(/%%WEEBLYCONFIGDOMAIN%%/gi,configSiteName),c=c.safeReplace(/%%WEEBLYSUBDOMAIN%%/gi,configSiteName.replace(/\.weebly\.com$/,"")),c=c.safeReplace(/%%WHITELABELDOMAIN%%/gi,i.WHITE_LABEL_DOMAIN)),t.each(o,function(e){var t=null,i=e.property,n=this.properties[e.cfpid];n&&"undefined"!=typeof n.property_result&&(t=n.property_result),(null===t||""===t)&&(t=e.propertyDefault),"css"==e.markupType?d+=i+":"+t+";":"html"==e.markupType?a[i]=t:"custom"==e.markupType&&(t=e.resultInEditor||t,"%%CUSTOM%%"==i&&(t=t.replace("<embed",'<embed wmode="transparent" allownetworking="internal"')),i&&(u=new RegExp(i,"mg"),c=c.replace(u,t)))},this),c=c.replace("%%WEEBLYUSERID%%",window.userID),c=c.replace("%%INEDITOR%%",i.EDITOR?1:0),c=c.replace(/<weebly only_export[^>]*>([\S\s]*?)<\/weebly>/i,""),n.chromeless&&(this.isPlaceholder()?(a["class"]+=" tablet-placeholder",c=this.addPlaceholderHTML(c)):a["class"]=a["class"].replace("tablet-placeholder"," ")),e.selectable&&(a["class"]+=" element"),1==e.hasContent&&1!=e.hidden&&(a.contentEditable="true",a["class"]+=" editable-text"),a.id=this.ucfid,d&&(a.style=a.style?a.style+";"+d:d),this.createStartTag(s,a)+c+l+e.htmlEnd},isPlaceholder:function(e){var t=!1,i=this.getProperty("<!DATA!>")||{},n=i.property_result||"{}",o={};try{o=JSON.parse(n)}catch(r){console.log("Malformed JSON data")}var s=this.getProperty("<!SRC!>")||this.getProperty("<!VIDEOFILE!>")||this.getProperty("<!IMAGESET!>")||this.getProperty("<!IMAGES!>")||this.getProperty("<!PRODUCTID!>")||{},a=s.property_result;return o.placeholder&&(t=!0),"string"==typeof a&&a.match(/na.png/g)&&(t=!0),"string"!=typeof a||""!=a&&"[]"!=a||(t=!0),t},addPlaceholderHTML:function(e){return e=e.replace(/<img[^>]*>[^<]*/gim,'<span class="icon icon-image"></span>'+i.utl("html.weebly.libraries.classes.Element_5")),e=e.replace(/<iframe[^>]*>[^<]*<\/iframe>/gim,'<a><span class="icon icon-video"></span>'+i.utl("html.weebly.libraries.classes.Element_6")+"</a>"),e=e.replace(/<!WEEBLYGALLERY2?\-.*?!>/g,'<a><span class="icon icon-gallery"></span>'+i.utl("html.weebly.libraries.classes.Element_7")+"</a>"),e=e.replace(/<!WEEBLYSLIDESHOW\-.*?!>/g,'<a><span class="icon icon-slideshow"></span>'+i.utl("html.weebly.libraries.classes.Element_8")+"</a>"),e=e.replace(/282/gi,"auto"),e=e.replace(/^(<div><!PRODUCT!><\/div>)/gim,'<div class="product-placeholder"><a><span class="icon icon-product"></span>'+i.utl("html.weebly.libraries.classes.Element_9")+"</a></div>")},saveProperties:function(e){if(n.chromeless)try{throw new Error("Invalid element property save attempted in script")}catch(t){return void console.log(t.message)}Weebly.Editor.RPC.Elements.saveProperties(this.ucfid,Object.toJSON(this.properties)).done(e||jQuery.noop).fail(window.errFunc)},isEmbedCodeWithHTMLProperty:function(e){return this.eid===r&&this.cfid===s&&e===a}});return l}),_wAMD.define("tpl!elements/element.tpl",[],function(){return'<li class="inside" id="inside_{{id}}">\n	<form name="id_{{id}}" data-platform-element-id="{{platform_element_id}}" data-platform-element-version="{{platform_element_version}}" style="display:none" autocomplete="off">\n		<input type="hidden" name="idfield" value="{id:\'{{id}}\',eid:\'{{eid}}\'}" />\n	</form>\n	{{{controlHTML}}}\n	<div class="element-box">\n		<div class="element-box-contents"{{#page_element_id}} id="{{{page_element_id}}}"{{/page_element_id}}>\n			{{{contentHTML}}}\n		</div>\n	</div>\n</li>'}),_wAMD.define("tpl!elements/element-controls.tpl",[],function(){return'<div class="w-element-controls">\n{{#isMovableElement}}\n	<div class="w-move-outer">\n		<div class="w-move"></div>\n	</div>\n{{/isMovableElement}}\n	<div class="w-handle-outer">\n		<div class="w-handle"></div>\n	</div>\n	<div class="w-delete-outer">\n		<div class="w-delete" title="Delete"></div>\n	</div>\n{{#requiresUpgrade}}\n	<div class="w-upgrade-outer">\n		<div class="w-upgrade" title="Upgrade"></div>\n	</div>\n{{/requiresUpgrade}}\n</div>'}),_wAMD.define("editor-site-shared/build/elements/Element",["jquery","underscore","w-global","config","mustache","editor-site-shared/relay","editor-site-shared/ui/constants","editor-site-shared/build/GenericLoader","editor-site-shared/build/elements/ContentField","tpl!elements/element.tpl","tpl!elements/element-controls.tpl"],function($,_,_W,Config,Mustache,Relay,UICONST,GenericLoader,ContentField,elementTpl,elementControlsTpl){function getCustomFunctions(e){var t={};return _.each(e,function(i,n){n.match(/^(%%\w+%%|<!\w+!>|\d+)$/)&&"function"==typeof e[n]&&(t[n]=i)}),t}function isMovableElement(e){return-1===NON_MOVABLE_ELEMENTS.indexOf(e.eid)&&!e.isFormField}var MOBILE_ELEMENTS=["75573027","84798836","8532979"],NON_MOVABLE_ELEMENTS=["23247315","63868204","40806018","40197772","33814465","7928374","8220056"],MOBILE_RENDER_WHITELIST=["62850560","44785763","94464494","30621876","18362204","31574711","42844424","79078446","51424376","90122486","59396708","27280689","63419613","67748238","9759964","46196121","5699726","36391960","87744780","92495494","35527740","16151740","7423607","87366396","53284780","99815722","14391904","94226660","82023692","45156614","82645192","86574178","74487785"],Element=Class.create({initialize:function(e){_.extend(this,e),0===this.content_fields.length&&(this.content_fields={});var t=this.content_fields;this.content_fields={},_.each(t,function(e){this.content_fields[e.ucfid]=new ContentField(this.eid,e)},this),this.page_element_order=parseInt(this.page_element_order)},renderHTML:function(){var e=this.eid,t=this.id,i="";if(!_W.view.isMobileView&&MOBILE_ELEMENTS.indexOf(e)>-1)return"";_.each(this.content_fields,function(n){i+=Config.content_field_js_render&&MOBILE_RENDER_WHITELIST.indexOf(e)>-1?n.render():n.content||"","96854775"===n.cfid&&(i=i.replace("<div",'<div data-platform-peid="'+t+'"')),Config.chromeless&&(i=i.replace(/(['"\(])\s*(\/uploads|weebly\/)/gi,"$1http://"+configSiteName+"$2"),i=i.replace(/"\/\//g,'"http://'),i=this.updateContentTokens(i))},this),this.li&&$(this.li).remove();var n={id:t,eid:e,platform_element_id:this.platform_element_id,platform_element_version:this.platform_element_version,controlHTML:Config.chromeless?"":this.renderControlHTML(),contentHTML:this.processHTML(i,!1)};return"75699656"==e&&(n.page_element_id=t),Mustache.render(elementTpl,n)},renderControlHTML:function(){return Mustache.render(elementControlsTpl,{isMovableElement:isMovableElement(this),requiresUpgrade:this.requiresUpgrade})},processHTML:function(e,t){return hashEach(this._customFunctions||{},function(i,n){if(!i.match(/^\d+$/)){var o=n.call(this,void 0,t);void 0!==o&&"undefined"!=o&&(o=o.replace(/\$/g,"$$$$"),e=e.replace(new RegExp(i,"g"),o))}}.bind(this)),e=e.replace(/<input type="submit" class="wsite-form-submit" name="submit" value="([^"]*)" \/>/,"<a class='wsite-button'><span class='wsite-button-inner'>$1</span></a>")},getDimensions:function(){var e=$("#inside_"+this.id);if(!e.length)return{};var t=!0;this.eid!=UICONST.CONTENT_AREA_ELEMENT_ID||e.is(":visible")||(t=!1);var i=!1;"none"===e.css("display")&&(e.show(),i=!0);var n=e.offset(),o={id:this.id,element_id:this.eid,content_field_id:e.find(".element").eq(0).attr("id"),draggable:this.draggable,top:n.top,left:n.left,height:e.outerHeight(!1),width:e.outerWidth(!1),spotlighted:!!this.spotlight,platform_element_id:this.platform_element_id,platform_element_version:this.platform_element_version,parentString:window.getElementParentString(e[0]),page_element_order:this.page_element_order,droppable:t};if(this._isGallery){var r=e.find("ul li");o.galleryItems=[];for(var s=0;s<r.length;s++)e=$(r[s]),n=e.offset(),o.galleryItems[s]={top:n.top,left:n.left,height:e.outerHeight(!1),width:e.outerWidth(!1)}}if(this.children)if(this.platform_element_id){o.children=[];var a=_.sortBy(this.children,"page_element_order");_.each(a,function(e){var t=window.getElementObject(e.id);if(e.eid==UICONST.CONTENT_AREA_ELEMENT_ID){var i=t.getDimensions();o.children.push(i)}else{var n=t.getDimensions();n.droppable=!1,o.children.push(n)}})}else o.children=_.invoke(this.children,"getDimensions");return i&&e.hide(),o},updateContentTokens:function(e){var t=_W.Reseller?_W.Reseller.isResellerUser:!1;return e=e.replace("%%ISRESELLERUSER%%",t?"true":"false")},rerenderContentField:function(e,t,i){var n=e.fetchDefinition();this._globalBeforeRender&&this._globalBeforeRender(!0),this.beforeRender(!0);var o=n.contentFieldProperties,r=this._customFunctions,s={},a="",l=n.customContent,c=!1;l=l.replace(/%%INEDITOR%%/gi,1),_.each(o,function(i){var n=i.cfpid,o=i.property,d=i.markupType,u=e.getProperty({cfpid:n}),h=u.property_result,p=r[o]||r[i.referenceProperty]||r[n];if(p){var f=p.call(this,h,!0);void 0!==f&&(h=f)}if("css"==d)s[o.camelize()]=h,a+=o+":"+h+";";else if("html"==d)t.setAttribute(o,h);else if("custom"==d)if(e.isEmbedCodeWithHTMLProperty(u.cfpid))$(t).find(".custom-html-frame").contents().find("#customhtml-content").html(h);else if(o){var m=$(t).hasClass("tablet-placeholder");l=l.replace(new RegExp(o,"gi"),h),"%%DATA%%"==o&&m&&0==JSON.parse(h).placeholder&&$(t).removeClass("tablet-placeholder"),"%%IMAGEFILE%%"==o&&h&&m&&(c=h),"%%VIDEOFILE%%"==o&&h&&m&&$(t).removeClass("tablet-placeholder")}},this),$(t).css(s),2==n.hasContent&&(l=l.replace(/%%ELEMENTID%%/gi,e.ucfid),l=l.replace(/%%PAGEELEMENTID%%/gi,e.cfid),l=l.safeReplace(/%%WEEBLYCONFIGDOMAIN%%/gi,configSiteName),l=l.safeReplace(/%%WEEBLYSUBDOMAIN%%/gi,configSiteName.replace(/\.weebly\.com$/,"")),l=l.replace("%%WEEBLYUSERID%%",userID),l=l.safeReplace(/%%WHITELABELDOMAIN%%/gi,_W.WHITE_LABEL_DOMAIN),l=this.updateContentTokens(l)),c&&(l=l.replace(/282/gi,"auto"),l=l.replace(/<iframe[^>]*>[^<]*<\/iframe>/gim,'<span class="icon icon-video"></span>'+_W.utl("html.weebly.libraries.classes.Element_1")+'<span class="ellipsis"><span>.</span><span>.</span><span>.</span></span>')),Config.chromeless&&(e.isPlaceholder()?($(t).addClass("tablet-placeholder"),l=e.addPlaceholderHTML(l)):$(t).removeClass("tablet-placeholder")),l=this.processHTML(l,!0),l===!0?t.innerHTML=t.innerHTML:l!==!1&&(t.innerHTML=l),this.afterRerenderContentField(e,t,i)},afterRerenderContentField:function(e,t,i){e.content=t.outerHTML,this.li=this.li||$("#inside_"+this.id)[0],this.afterRender(this.li,!0),this._globalAfterRender&&this._globalAfterRender(!0),this.reposition(),i&&i()},rerender:function(e){this.rerenderContentField(this.getContentField(),this.li.down(".element"),e)},beforeRender:function(e){},afterRender:function(li,isRerender){this.li=li,this.requiresUpgrade&&!Config.chromeless&&(li.addClassName("inside-requires-upgrade"),li.select(".w-upgrade")[0].observe("click",function(){Relay.request("billing:upgrade:prompt",{restrictionID:this.eid,restrictionType:"element",refer:"element_trial_upgrade"})}));var form=$(li).find("form");if(form.data("platform-element-id")){var elementScript=$(li).find(".element-script");elementScript.length&&eval(elementScript[0].innerHTML)}},afterAdd:function(e){this.afterRender&&this.afterRender(e)},getContentField:function(e){return hashSearch(this.content_fields,e)},reposition:function(){},unrender:function(){delete this.li},startDrag:function(){},onDrag:function(e,t,i){return i&&i.el&&this.elData?(this.elData.id===i.el.id?i=null:i.position!==UICONST.POSITION_LEFT&&i.position!==UICONST.POSITION_RIGHT||!this.elData.parentColumn||2!==this.elData.parentColumn.elements.length||-1===this.elData.parentColumn.elements.indexOf(i.el)||(i=null),i):i},stopDrag:function(){}});Element.INSIDE_CLASS="inside",GenericLoader.call(Element,"eid");var elementClasses=[],super_register=Element.register;return Element.register=function(e,t){t.prototype._customFunctions=getCustomFunctions(t.prototype),t.beforeRender&&(t.prototype._globalBeforeRender=t.beforeRender.bind(t)),t.afterRender&&(t.prototype._globalAfterRender=t.afterRender.bind(t)),super_register(e,t),elementClasses.push(t)},Element.renderElementsHTML=function(e){var t="";return _.each(e,function(e){t+=e.renderHTML(!1)}),t},Element.globalBeforeRender=function(){_.invoke(elementClasses,"beforeRender")},Element.globalAfterRender=function(){_.invoke(elementClasses,"afterRender")},_W.Element=Element,Element}),_wAMD.define("editor-site-shared/build/AreaUtils",["underscore","w-global"],function(e,t){var i={};i.getAreaInstanceFromParent=function(e,n,o,r){r=r||"";var s;return r.match(/[0-9]+p[0-9]+/)||r.match(/[0-9]+c[0-9]+/)?(s=t.pageContext.getArea(n,o),s=s.descriptionArea,s.type="content"):r.match(/-sidebar/)?(s=i.getAreaInstance(e,n,o),s=s.sidebar,s.type="content"):r.match(/-blog/)?(s=i.getAreaInstance(e,n,o),s=s.main,s.type="content"):s=i.getAreaInstance(e,n,o),s},i.getAreaInstance=function(i,n,o){return e.isUndefined(i)||null===i?t.pageContext.getArea(n,o)||t.siteContext.getArea(n,o):i?t.siteContext.getArea(n,o):t.pageContext.getArea(n,o)},i.getAreaInstanceForElement=function(e){var i;return t.pageContext&&(i=t.pageContext.getAreaForElement(e)),!i&&t.siteContext&&(i=t.siteContext.getAreaForElement(e)),i};var n=[],o=[],r=null;return i.clearAreaBatch=function(){n=[],o=[],r=null},i.fetchNeededArea=function(e,t,i,r){n.push({type:t,name:i,is_global:e}),o.push(r)},i.batchFetchNeededAreas=function(e){var i=currentPage.replace(/\/.*/,""),s=require("config");"0"==i&&(i=null),r=e,!n.length||!i||s.chromeless&&s.isNativeApp?r&&r():new Ajax.Request(ajax,{parameters:{pos:"getareas",current_page_id:currentPage,area_summary:Object.toJSON(n),token:t.RequestToken},onSuccess:function(e){for(var t=e.responseText.evalJSON(),i=0;i<t.length;i++)o[i](t[i]);n=[],o=[],r&&r()}})},i}),_wAMD.define("tpl!theme-gallery/preview/topbar.tpl",[],function(){return'<div id="w-theme-preview-top" class="w-ui-topbar ui-framework">\n	<div class="w-logo-top">\n		<div class="w-logo-container {{#isWhiteLabeled}}alt{{/isWhiteLabeled}}">\n			{{^isWhiteLabeled}}<span class="icon w-logo">brandw</span>{{/isWhiteLabeled}}\n			<span>{{#tl}}templates.theme-gallery.preview.topbar_1{{/tl}}</span>\n		</div>\n	</div>\n	<ul class="tabs">\n		{{#palette}}\n			{{{palette}}}\n		{{/palette}}\n		{{^palette}}\n			<li>\n			</li>\n		{{/palette}}\n	</ul>\n	<ul class="right-buttons">\n		<li id="cancel-button">\n			<button class="btn btn--borderless btn__header--transparent"><span>{{#tl}}templates.theme-gallery.preview.topbar_2{{/tl}}</span></button>\n		</li>\n		<li id="choose-button">\n			<button class="btn btn--borderless btn__header--blue"><span>{{#tl}}templates.theme-gallery.preview.topbar_3{{/tl}}</span></button>\n		</li>\n	</ul>\n</div>\n'}),_wAMD.define("tpl!theme-gallery/preview/palette.tpl",[],function(){return'<li id="w-theme-preview-palette">\n	<ul id="w-theme-preview-colors">\n		{{#colors}}\n			<li>\n				<a style="background:{{sample}}" data-color="{{value}}">\n					<span></span>\n				</a>\n			</li>\n		{{/colors}}\n	</ul>\n</li>'}),_wAMD.define("themes/view/PreviewTheme",["jquery","backbone-all","mustache","editor-site-shared/RelayConstructor","editor-site-shared/BridgeConstructor","tpl!theme-gallery/preview/topbar.tpl","tpl!theme-gallery/preview/palette.tpl","analytics/Tracking"],function(e,t,i,n,o,r,s,a){var l=t.View.extend({events:{"click #cancel-button":"cancel","click #choose-button":"choose","click #w-theme-preview-colors a":"switchColor"},tagName:"div",id:"w-theme-preview",iframe:void 0,initialize:function(e){this.initializeTemplate(),this.user=e.user||"undefined"!=typeof userID?userID:"",this.site=e.site||"undefined"!=typeof currentSite?currentSite:"",this.page=e.page||"",this.theme=e.theme,this.themeForOptions=e.themeForOptions,this.merchSiteId=e.merchSiteId,this.colors=e.colors||[],this.selectedColor=e.selectedColor||"",this.callback=e.callback,this.isUpgrade=e.isUpgrade,this.customChangeTheme=e.customChangeTheme,this.inEditor=e.inEditor,this.cancelCallback=e.cancelCallback,this.initializeFrame(),this.create()},initializeFrame:function(){var t=this;t.navigate(),t.iframe=document.createElement("iframe"),t.iframe.src=window.bridgeTarget+"/editor/preview.php",t.relay=new n,t.bridge=new o(window.bridgeTarget),t.frameReady=e.Deferred(),t.relay.commands.setHandlers({"preview:navigate":function(e){t.page=_.result(e,"page_id"),t.route=e.route||"",t.navigate()}}),t.iframe.onload=function(){t.frameReady=t.bridge.setup(t.relay.incoming,t.iframe.contentWindow,t.relay.outgoing)}},initializeTemplate:function(){if(this.isWhiteLabeled=!1,window.inEditor&&window.inEditor()){var e=require("editor/Branding");this.isWhiteLabeled=e.isWhiteLabeled()}this.templateTopbar=i.compile(r),this.templatePalette=i.compile(s)},render:function(){var e,t;this.colors.length>1&&!this.merchSiteId&&(t=this.templatePalette({colors:this.colors})),e=this.templateTopbar({palette:t,isWhiteLabeled:this.isWhiteLabeled}),this.$el.append(e).append(this.iframe);var i=this.selectedColor||"";return i=i.replace(/'/g,"\\'"),i?this.$el.find("#w-theme-preview-colors a[data-color='"+i+"']").addClass("selected"):this.$el.find("#w-theme-preview-colors a[data-color]").first().addClass("selected"),this},navigate:function(){var t=this,i=t.generateURL();return t.trigger("preview:navigate",i),e.get(i).then(function(e){return t.frameReady.then(function(){return t.relay.request("preview:render",e)})}).done(function(){t.show()})},show:function(){var t=this;e(document.body).addClass("noscroll"),t.trigger("preview:show"),t.$el.addClass("show")},generateURL:function(){var e=this.theme.match(/^custom_(.*)_(\d+)$/),t=this.selectedColor?"&color="+this.selectedColor:"",i=this.themeForOptions,n=this.page,o=this.route;return"/theme_browser/preview.php?user_id="+this.user+"&site_id="+this.site+(e?"&theme_id="+e[2]+"&custom_theme_name="+e[1]+t:"&theme_id="+this.theme+t)+(i?"&theme_id_for_options="+i:"")+(n?"&page_id="+n:"")+(o?"&route="+o:"")+(this.merchSiteId?"&merchSiteId="+this.merchSiteId:"")},create:function(){this.render(),e(parent.document.body).append(this.el)},cancel:function(){var t=this;t.$el.removeClass("show"),e(document.body).removeClass("noscroll"),t.destroyBridge(),setTimeout(function(){t.remove()},350),"undefined"!=typeof this.callback&&(this.callback(!1),this.callback=void 0),"function"==typeof this.cancelCallback&&this.cancelCallback()},destroyBridge:function(){var e=this;e.bridge.destroy(),e.relay.commands.removeHandlers(["preview:navigate"])},choose:function(){var e=this,t=e.customChangeTheme||changeTheme;e.isUpgrade?Weebly.themeCache.get(e.theme,function(i){i.is_downgradable=!0,e.inEditor?t(e.theme,e.selectedColor,null,null,e.merchSiteId):t(e.theme,e.selectedColor,e.merchSiteId)}):e.inEditor?t(e.theme,e.selectedColor,null,null,e.merchSiteId):t(e.theme,e.selectedColor,e.merchSiteId),"undefined"!=typeof e.callback&&(e.callback(!0),e.callback=void 0),e.user&&(Pages.go("editMenu"),e.cancel()),a.trackEvent("public","select_theme",this.merchSiteId)},switchColor:function(t){this.$el.find("#w-theme-preview-colors").find("a.selected").removeClass("selected"),e(t.currentTarget).addClass("selected"),this.selectedColor=t.currentTarget.getAttribute("data-color"),this.navigate(),t.preventDefault()}});return l}),function(e){function t(t){var i=e("#available-elements .outside_top");i.on("mousedown.event-tooltip",function(e){i.off("mousedown.event-tooltip"),n.hide(t).hideOverlay()})}function i(e){for(tip in s)if(!e[tip]){var t={};t[tip]=s[tip],n.set(t)}}var n,o=require("editor-site-shared/ui/constants"),r="#"+o.EDITOR_FRAME_ID,s={"x-elements":{body:_W.utl("html.weebly.libraries.weebly_event_tooltip_1"),target:"#available-elements .outside_top:eq(1)",position:"left",width:210,icon:"w-icon-question",overlayTarget:r,beforeShow:function(e){require("editor/app").vent.trigger("editor:toolbar:show"),"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-elements",title:"Intro Elements"})},afterShow:t},"x-pages":{body:_W.utl("html.weebly.libraries.weebly_event_tooltip_2"),target:"#weebly_tab_pages",position:"top",width:225,icon:"w-icon-question",overlayTarget:r,beforeShow:function(e){"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-pages",title:"Intro Pages"})},afterShow:t},"x-pages-subpages":{body:_W.utl("html.weebly.libraries.weebly_event_tooltip_12"),target:".pm-page-list.parent-list > li:last-child",position:"left",icon:"w-icon-question",overlayTarget:r,width:250,beforeShow:function(e){"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-subpages",title:"Intro Subpages"})},afterShow:function(t){var i=e(".pm-page-list li");i.on("mousedown.event-tooltip",function(e){i.off("mousedown.event-tooltip"),n.hide(t).hideOverlay()})}},"x-platform-elements":{body:_W.utl("html.weebly.libraries.weebly_event_tooltip_13"),target:"#available-elements .outside_top:eq(1)",position:"left",width:210,icon:"w-icon-question",overlayTarget:r,beforeShow:function(e){editorApp.vent.trigger("editor:toolbar:show")},afterShow:t},"x-platform-settings":{body:_W.utl("html.weebly.libraries.weebly_event_tooltip_14"),target:"#weebly_tab_settings",position:"top",width:225,icon:"w-icon-question",overlayTarget:r,afterShow:t},"x-design":{body:_W.utl("html.weebly.libraries.weebly_event_tooltip_4"),target:"#weebly_tab_themes",position:"top",appearWait:600,width:200,icon:"w-icon-question",overlayTarget:r,beforeShow:function(e){"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-design",title:"Intro Design"})},afterShow:t},"x-publish":{body:_W.utl("html.weebly.libraries.weebly_event_tooltip_5"),target:"#publish-button",position:"top-right",width:260,icon:"w-icon-question",overlayTarget:r,beforeShow:function(e){"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-publish",title:"Intro Publish"})},afterShow:t},"x-golive":{body:_W.utl("html.weebly.libraries.weebly_event_tooltip_6"),target:"#client-go-live-button",position:"top-right",width:260,icon:"w-icon-question",overlayTarget:r,beforeShow:function(e){"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-go-live",title:"Intro Go Live"})},afterShow:t},"show-storefront-page":{body:_W.utl("html.weebly.libraries.weebly_event_tooltip_7"),target:"#weebly_tab_pages",position:"top",width:220,overlayTarget:"#body",icon:"w-icon-storefront",beforeShow:function(e){"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-storefront",title:"Intro Storefront"})}},"blog-first-view-post":{body:_W.utl("html.weebly.libraries.weebly_event_tooltip_8"),target:"#blog-post-options .w-icon-chevron-up-light",position:"bottom",width:280,icon:"w-icon-cog",overlayTarget:"#body",beforeShow:function(e){require("editor/app").vent.trigger("editor:toolbar:show"),"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-blog-post",title:"Intro Blog Post"})}},"additional-support":{body:_W.utl("html.weebly.libraries.weebly_event_tooltip_9"),target:"#question-button",position:"top",width:200,icon:"w-icon-question",overlayTarget:r,beforeShow:function(e){"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-additional-support",title:"Intro Additional Support"})},afterShow:t},"theme-howto-downgrade":{body:_W.utl("html.weebly.libraries.weebly_event_tooltip_10"),target:"#weebly_tab_themes",position:"top",width:280},"theme-howto-upgrade":{body:_W.utl("html.weebly.libraries.weebly_event_tooltip_11"),target:"#weebly_tab_themes",position:"top",width:280,overlayTarget:"#body"}};n={_overlayId:"event-tooltip-overlay",_containerId:"event-tooltip-container",_containerClass:"w-ui",container:void 0,overlay:void 0,events:{},template:function(){return Mustache.compile('<div id={{id}} class="event-tooltip {{classNames}}">{{#icon}}<span class="event-tooltip-icon {{icon}}"></span>{{/icon}}<div class="event-tooltip-body">{{{body}}}</div></div>')},set:function(e){for(var t in e)e[t].id||(e[t].id=t),this.events[t]=e[t];return this},show:function(t){var i=this,n=this.events[t];if(n){var o;o=document.getElementById("event-tip-"+n.id)?e("#event-tip-"+n.id):this.buildTooltip(n),this.hideAll(),this.container||(this.container=this.buildContainer()),n.beforeShow&&n.beforeShow(n),setTimeout(function(){i.container.append(o),i.positionTooltip(n),i.positionOverlay(n)},n.appearWait||0),n.afterShow&&n.afterShow(n),e(document.body).on("mousedown.event-tooltip",function(t){e(t.currentTarget).off("mousedown.event-tooltip"),i.hide(n),i.hideOverlay()})}},hide:function(t){var i=this.container.find("#event-tip-"+t.id),n={opacity:0};return"left"===t.position?n.left=i.offset().left-10:e.inArray(t.position,["bottom","top","top-right","top-left"])>=0&&(n.top=i.offset().top-10),
i.animate(n,function(){i.hide()}),this},hideAll:function(){return e(document.body).trigger("mousedown.event-tooltip"),this},hideOverlay:function(){return this.overlay&&(this.overlay.remove(),this.overlay=void 0),this},positionOverlay:function(t){if(t.overlayTarget){void 0===this.overlay&&(this.overlay=this.buildOverlay());var i=t.overlayTarget instanceof jQuery?t.overlayTarget:e(t.overlayTarget),n=i.outerWidth(),o=i.outerHeight(),r=i.offset()||{};this.overlay.css({height:o,width:n,left:r.left,top:r.top,opacity:.3})}},positionTooltip:function(t){var i,n,o,r=14;if(i=t.target instanceof jQuery?t.target:e(t.target),!i.length)throw"Invalid target: "+t.target;var s=i.outerWidth(),a=i.outerHeight(),l=i.offset(),c=l.left,d=l.top,u=this.container.find("#event-tip-"+t.id);t.width&&u.width(t.width);var h=u.outerWidth(),p=u.outerHeight();"left"===t.position?(c+=s,o=c+r,d+=Math.floor((a-p)/2)):"top"===t.position?(c+=Math.floor((s-h)/2),d+=a,n=d+r):"top-right"===t.position?(d+=a,c+=Math.floor(s-h),n=d+r):"top-left"===t.position?(d+=a,n=d+r):"bottom"===t.position&&(d-=a+p,c-=Math.floor(h/2-r/2),n=d+r),t.offsetY&&(d+=t.offsetY),t.offsetX&&(c+=t.offsetX),u.show().css({left:c,top:d,opacity:0}),u.animate({left:o,top:n,opacity:1},500)},buildContainer:function(){return e(document.createElement("div")).attr({id:this._containerId,"class":this._containerClass}).appendTo("body")},buildOverlay:function(){return e(document.createElement("div")).attr({id:this._overlayId}).appendTo("body")},buildTooltip:function(e){var t="event-tip-"+e.position||"top";return this.template()({id:"event-tip-"+e.id,body:e.body,classNames:t,icon:e.icon})}},window.EventTooltip=n,window.EventTooltip.init=i}(jQuery),_wAMD.define("legacy/weebly_event_tooltip",["editor/app","editor-site-shared/ui/constants"],function(e){return function(){var t;return t||e.EventTooltip}}(this)),_wAMD.define("editor/build/themes/upgrading",["jquery","editor/app","components/views/ConfirmView","themes/view/PreviewTheme","legacy/weebly_event_tooltip"],function(e,t,i,n){function o(e){e.is_upgradable&&e.show_upgrade_dialog&&t.showDialog(new i({title:_W.utl("javascript.editor.build.themes.upgrading_1"),message:_W.utl("javascript.editor.build.themes.upgrading_2"),confirmText:_W.utl("javascript.editor.build.themes.upgrading_3"),cancelText:_W.utl("javascript.editor.build.themes.upgrading_4"),callback:function(t){t?a(e,!0):c(e)}}))}function r(t){return t.new_theme_id?a(t):e.Deferred().reject()}function s(n){var o=e.Deferred();return n.old_theme_id?t.showDialog(new i({title:_W.utl("javascript.editor.build.themes.upgrading_5"),message:_W.utl("javascript.editor.build.themes.upgrading_6"),confirmText:_W.utl("javascript.editor.build.themes.upgrading_7"),cancelText:_W.utl("javascript.editor.build.themes.upgrading_8"),callback:function(e){e&&Weebly.themeCache.get(n.old_theme_id,function(e){e.show_upgrade_dialog=!1,window.changeTheme(n.old_theme_id,n.current_theme_color)}),o.resolve(e)}})):o.reject(),o.promise()}function a(t,i){var o=e.Deferred();return Weebly.themeCache.get(t.new_theme_id,function(e){new n({themeForOptions:t.theme_id,theme:t.new_theme_id,colors:e.colors,selectedColor:t.current_theme_color,isUpgrade:!0,callback:function(e){i&&(e?l(t):c(t)),o.resolve(e)}})}),o.promise()}function l(){window.EventTooltip.show("theme-howto-downgrade")}function c(e){Weebly.Editor.RPC.Theme.markThemeUpgradeCancelled(e.theme_id,window.currentSite),Weebly.themeCache.get(e.theme_id,function(e){e.show_upgrade_dialog=!1}),window.EventTooltip.show("theme-howto-upgrade")}return{processThemeData:o,startDelayedUpgrade:r,startDelayedDowngrade:s}}),_wAMD.define("editor/build/themes/main",["underscore","analytics/Tracking","editor/build/ui/weebly_view","editor/build/themes/data","editor/app","editor/pages/utils","editor/design/weebly_design_options","editor/build/themes/upgrading","editor-site-shared/relay","editor/ajax/module","ui-framework/js/components/confirm","editor/page-manager/pages","legacy/weebly_utils"],function(e,t,i,n,o,r,s,a,l,c,d,u){var h={},p=function(e,i,r,a){new window.Ajax.Request(c.ajax,{parameters:r,onSuccess:function(h){var f;try{f=JSON.parse(h.responseText)}catch(m){return void c.errFunc()}f.switchNoSections?d.confirm({parent:"#orbitDialogContainer",isTop:!1,title:_W.utl("javascript.editor.build.themes.switch_no_sections_title"),message:_W.utl("javascript.editor.build.themes.switch_no_sections_message"),cancelButton:{text:_W.utl("javascript.editor.build.themes.switch_no_sections_cancel")},proceedButton:{text:_W.utl("javascript.editor.build.themes.switch_no_sections_confirm")}}).done(function(){r.is_forced=!0,p(e,i,r,a)}):Weebly.Editor.RPC.Page.getPageHierarchy().done(function(e){var t=e.data;t&&t.length>0&&u.reset(t)}).always(function(){l.trigger("changeTheme"),o.vent.trigger("forceThemeRerender"),o.vent.trigger("clearMobileSettingsCache"),window.currentTheme===e&&i?t.trackEvent("site","change_design_setting","color"):window.currentTheme!==e&&t.trackEvent("site","change_design_setting","theme"),f.mobileSettings&&n.setCurrentTheme(f.mobileSettings.mobile_theme,!0),n.setCurrentTheme(f.theme,!1),n.setCurrentThemeColor(f.themeColor),window.updateList(currentPage,!0),f.designOptions&&s.setDesignOptions(f.designOptions),s.applyDesignOptions(),a&&a()})},onFailure:c.errFunc})};return h.changeTheme=function(e,t,i,n,o,r){var s={pos:"settheme",keys:e,color:t||"",cookie:document.cookie,token:Weebly.RequestToken,merchSiteId:o,verticalId:r};i&&(s.favorite=1),p(e,t,s,n)},h.getAreaSummary=function(e,t){var n=r.getPageType(e,t,i.isMobileView),o=t.page_type_templates[n];return o.area_summary},l.commands.setHandlers({"theme:light:set":function(e){new window.Ajax.Request(c.ajax,{parameters:{pos:"set_theme_light",theme:currentTheme,layout:window.currentPageType,is_light:e,token:Weebly.RequestToken}})},"theme:upgrading":function(e){a.processThemeData(e)}}),e.extend(window,h),h}),_wAMD.define("legacy/weebly_element_utils",["jquery","underscore","editor-site-shared/build/AreaUtils","editor-site-shared/ui/constants","legacy/slideshow-jq"],function(e,t,i,n){var o={};return o.setContentFieldProperty=function(t,i,n){var r=o.getContentFieldProperty(t,i);if(r){r.property_result=n;var s=e("#"+r.ucfpid);s.length&&(s[0].value=n)}return!!r},o.getContentFieldProperty=function(e,t){var i=o.getContentField(e);return i?i.getProperty(t):void 0},o.getContentFieldProperties=function(e){var t=o.getContentField(e);return t?t.properties:void 0},o.getContentField=function(e){return Weebly.pageContext.contentFieldsByID[e]||Weebly.siteContext.contentFieldsByID[e]},o.getElementByContentField=function(e){var i;if(Weebly.pageContext.contentFieldsByID[e])i=Weebly.pageContext;else{if(!Weebly.siteContext.contentFieldsByID[e])return null;i=Weebly.siteContext}return t.find(i.elementsByID,function(t){return t.content_fields[e]})},o.getElementObject=function(e){"object"==typeof e&&e.id&&(e=e.id.replace("inside_",""));var t;return Weebly&&Weebly.pageContext&&Weebly.pageContext.elementsByID&&(t=Weebly.pageContext.elementsByID[e])?t:Weebly&&Weebly.siteContext&&Weebly.siteContext.elementsByID?Weebly.siteContext.elementsByID[e]:void 0},o.getElementParentString=function(t){var i,o="",r=e(t),s=t.up();s&&(i=s.up());var a;return i&&(a=i.up()),s&&s.hasClassName("wsite-com-long-description")?o=s.id:a&&a.className.match(/column/)?o=a.id:i&&i.className.match(/wsite-multicol-col/)?o=i.id:r.closest("[data-"+n.HEADER_SECTION_PARENT_STRING_NAME+"]").length?o=r.closest("[data-"+n.HEADER_SECTION_PARENT_STRING_NAME+"]").data(n.HEADER_SECTION_PARENT_STRING_NAME):t.up(".formlist")?o=t.up(".formlist").id:r.closest(".content-area-element").length&&(o=r.closest(".content-area-element").data("ucfid")+""),o},o.getElementParentObject=function(t){if(!t)return null;var i=o.getElementObject(e("#"+t).closest("li.inside")[0]);if(i)return i;var n=e('[data-ucfid="'+t+'"]');return n.length?getElementObject(e(n[0])):null},o.getElementSiblings=function(e,t){t||(t=o.getElementParentObject(e));var i;return(i=e.match(/^(\d+)-lhs$/))?t.leftChildren||t.columns[0]:(i=e.match(/^(\d+)-rhs$/))?t.rightChildren||t.columns[1]:(i=e.match(/^(\d+)-col(\d+)$/))?(t.columns[i[2]]||(t.columns[i[2]]=[]),t.columns[i[2]]):t.children},o.repositionElements=function(){Weebly.siteContext.reposition(),Weebly.pageContext.reposition(),Weebly.Slideshow.updateSize()},o.newElement=function(e,t,n,r,s,a){var l,e=e||"";if(e.match(/[A-z0-9]+-col[0-9]+/)||e.match(/[A-z0-9]+-form-list/)){var c=o.getElementObject(s);return c&&c.addChild?c.addChild(t,n,e,a):!1}if(l=i.getAreaInstanceFromParent(r.is_site_wide,r.type,r.name,e),!l)return!1;if(a){var d=l.sections.get(a);d&&d.get("elementArea").addElement(t,n)}else l.addElement(t,n);return!0},t.extend(window,o),o}),_wAMD.define("tpl!platform/theme/base/navigation/list.tpl",[],function(){return'<ul class="wsite-menu-default">\n	{{#links}}\n		{{> navigation/item}}\n	{{/links}}\n</ul>\n'}),_wAMD.define("tpl!platform/theme/base/navigation/item.tpl",[],function(){return'<li {{#id}}id="{{id}}"{{/id}} class="wsite-menu-item-wrap">\n	<a\n		{{^nonclickable}}\n			{{^nav_menu}}\n				href="{{url}}"\n			{{/nav_menu}}\n		{{/nonclickable}}\n		{{#target}}\n			target="{{target}}"\n		{{/target}}\n		{{#membership_required}}\n			data-membership-required="{{.}}"\n		{{/membership_required}}\n		class="wsite-menu-item"\n		>\n		{{{title_html}}}\n	</a>\n	{{#has_children}}{{> navigation/flyout/list}}{{/has_children}}\n</li>\n'}),_wAMD.define("tpl!platform/theme/base/navigation/flyout/list.tpl",[],function(){return'<div class="wsite-menu-wrap" style="display:none">\n	<ul class="wsite-menu">\n		{{#children}}{{> navigation/flyout/item}}{{/children}}\n	</ul>\n</div>\n'}),_wAMD.define("tpl!platform/theme/base/navigation/flyout/item.tpl",[],function(){return'<li {{#id}}id="{{id}}"{{/id}}\n	class="wsite-menu-subitem-wrap {{#is_current}}wsite-nav-current{{/is_current}}"\n	>\n	<a\n		{{^nonclickable}}\n			{{^nav_menu}}\n				href="{{url}}"\n			{{/nav_menu}}\n		{{/nonclickable}}\n		{{#target}}\n			target="{{target}}"\n		{{/target}}\n		class="wsite-menu-subitem"\n		>\n		<span class="wsite-menu-title">\n			{{{title_html}}}\n		</span>{{#has_children}}<span class="wsite-menu-arrow">&gt;</span>{{/has_children}}\n	</a>\n	{{#has_children}}{{> navigation/flyout/list}}{{/has_children}}\n</li>\n'}),function(e,t,i){var n=function(n,r){var s,a=0,l=0,c="",d=0,u=!1,h=!1,p=!1,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=e(),E=0,T=0,C=!1,S=!1,D=e('<div style="margin-top:0;margin-bottom:0; padding:0"></div>'),I=e(),k={top:0,bottom:0,custom:[]},O={scrollHide:!1,lazyHeight:0,topMargin:"auto",keepInWrapper:!1,wrapperSelector:"",zIndex:99,syncPosition:!1,scrollContainer:!1,topOffset:0},R=function(){return"auto"===O.topMargin?parseInt(_.css("marginTop")):isNaN(O.topMargin)&&O.topMargin.search("px")>0?parseInt(O.topMargin.replace("px","")):isNaN(parseInt(O.topMargin))?0:parseInt(O.topMargin)},x=function(){D.remove(),_.removeClass("w-navbar-stuck").css({maxWidth:"",marginTop:"",marginLeft:"",marginRight:"",position:"",top:"",left:"",right:"",bottom:"",width:""}),u=!1,h=!1,p=!1,O.syncPosition&&B()},A=function(e){_.before(D.css("height",m));var t=D.offsetParent();if(e){_.css({position:"absolute"});var i=I.offset().top+I.outerHeight()-t.offset().top-g-parseInt(I.css("paddingBottom"))}_.css({position:"absolute",marginTop:E,bottom:"",left:D.position().left,top:e?i:_.offset().top-t.offset().top-E})},P=function(){u=!0,_.before(D.css("height",m)),_.addClass("w-navbar-stuck");var e=-T;_.css({marginTop:E,position:"fixed",top:e+"px",left:"",right:"",bottom:""})},M=function(){_.before(D.css("height",m)),_.addClass("w-navbar-stuck");var e=-T;_.css({marginTop:E,position:"fixed",top:"",left:"",right:"",bottom:e})},N=function(){D.width()!==_.outerWidth()&&_.outerWidth(D.outerWidth())},L=function(){s=D.offset().left,s!==_.offset().left,_.offset({left:s})},B=function(){D.css({"margin-left":_.css("margin-left"),"margin-right":_.css("margin-left")}),_.css({"margin-left":D.css("margin-left"),"margin-right":D.css("margin-right")})},j=function(n){if(l=e(n.target).scrollTop(),c=l>=a?"down":"up",d=Math.abs(a-l),v=e(t).outerHeight(),b=l+v,a=l,y=_.offset().top,f=parseInt(_.outerHeight()+E)+parseInt(_.css("marginBottom")),O.scrollContainer&&!u&&(y.top+=l),u||p||h||(m=parseInt(_.outerHeight(!0)),h||p?k.top=parseInt(D.offset().top):k.top=parseInt(_.offset().top),s=parseInt(_.offset().left)+5),O.scrollContainer&&!u&&(k.top+=l),g=parseInt(_.outerHeight())+parseInt(_.css("margin-bottom"))+E,O.keepInWrapper?k.bottom=I.offset().top+I.outerHeight()-parseInt(I.css("paddingBottom")):k.bottom=e(i).outerHeight(),w=_.offset().top+g,f>v)S=!0,C&&(A(),C=!1),p&&"up"===c&&y-E>=l&&(P(),u=!0,h=!1,p=!1),!u&&!h&&(!O.keepInWrapper||O.keepInWrapper&&b<=k.bottom)&&b>=w-E&&(M(),h=!0,u=!0,p=!1),(!p&&u&&h&&"up"===c||!p&&u&&!h&&"down"===c&&w>=b)&&(A(),u=!1,h=!1,p=!0),b>=k.bottom&&O.keepInWrapper&&(!h&&!p||parseInt(w-E)!==parseInt(k.bottom))&&(A(!0),u=!1,h=!0,p=!0);else{if(C=!0,S&&(A(),S=!1),T=O.scrollHide?f+O.lazyHeight:+O.lazyHeight,u){var o=parseInt(_.css("top"));if("up"===c&&0!==o){var r=d>-o?0:o+d;_.css("top",r+"px")}else if("down"===c&&o>-T){var r=d>T+o?-T:o-d;_.css("top",r+"px")}}(!u&&!h&&l>=k.top-E+T||h&&p&&y-E+T>=l)&&(P(),u=!0,h=!1,p=!1),O.keepInWrapper&&parseInt(w-E)!==parseInt(k.bottom)&&l>=k.bottom-g+T&&(A(!0),u=!1,h=!0,p=!0)}(u||p||h)&&l<=k.top-E&&x(),(u||p||h)&&N(),(O.syncPosition&&u||p)&&L()},K=function(e){p&&A(),O.scrollContainer&&(e.target=O.scrollContainer),j(e)},F=function(n,r){_=e(n),r&&e.extend(!0,O,r),_.hasClass("stuckElement")&&o(n,r),_.addClass("stuckElement"),E=null!=O.topMargin?R():0,O.lazyHeight&&(E+=O.lazyHeight),O.keepInWrapper?(""!==O.wrapperSelector&&(I=_.closest(O.wrapperSelector)),I.length||(I=_.offsetParent())):I=e("body"),O.zIndex&&_.css("z-index",O.zIndex),L&&B(),O.scrollContainer?e(O.scrollContainer).on("scroll.stickUp",j):e(i).on("scroll.stickUp",j),e(t).on("resize.stickUp",K),j({target:r.scrollContainer?O.scrollContainer:i})};F.call(this,n,r)},o=function(n,o){o.scrollContainer?(e(o.scrollContainer).scrollTop(0).trigger("scroll.stickUp"),e(o.scrollContainer).off("scroll.stickUp")):(e(i).scrollTop(0).trigger("scroll.stickUp"),e(i).off("scroll.stickUp")),e(n).removeClass("stuckElement"),e(t).off("resize.stickUp")};e.fn.stickUp=function(e){return this.each(function(){new n(this,e)})},e.fn.removeStickUp=function(e){o(this,e)}}(jQuery,window,document),_wAMD.define("vendor/stickynav/stick-up",["jquery"],function(){}),_wAMD.define("site/plugins/stickynav",["jquery","vendor/stickynav/stick-up"],function(e){return{data:[{name:"type",title:"Sticky Navbar",type:"dropdown",choices:[{value:"normal",title:"Normal"},{value:"fixed",title:"Fixed"},{value:"semi-fixed",title:"Semi-fixed"}],"default":"normal"}],render:function(t,i){var n="w-navbar-sticky",o=t.type;"normal"!==o?e("."+n).length&&e("."+n).stickUp({scrollHide:"semi-fixed"===o,zIndex:"semi-fixed"===o?100:99,scrollContainer:!1,topMargin:"auto"}):e("."+n).length&&e("."+n).removeStickUp({scrollContainer:!1})}}}),_wAMD.define("site/plugins/navpane",["jquery"],function(e){function t(e){this.config=e,this.queryDom(),this.updateTransitions(),this.updateIsForced(),this.bindTriggerHandlers(),this.bindPostCloseActions(),this.bindWindowResizeHandler()}function i(e,t){e.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",t)}function n(e){e.off("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd")}var o,r={};return r.init=function(e){o||(o=new t(e))},r.destroy=function(){o&&(o.destroy(),o=null)},t.prototype={config:null,paneEl:null,slidingEl:null,stickyNavEl:null,stickyOffset:null,coveringEl:null,bodyEl:null,triggerEl:null,spotlightEl:null,isOpen:!1,isLeft:!1,isFullscreen:!1,isSlidingNav:!1,paneWidth:0,paneTransition:null,queryDom:function(){this.paneEl=e(".w-navpane"),this.slidingEl=e(".w-navpane-slide:not(.w-navpane)"),this.stickyNavEl=e(".w-navbar-sticky"),this.triggerEl=e(".w-navpane-trigger"),this.spotlightEl=e(".w-navpane-spotlight"),this.bodyEl=e("body"),this.isFullscreen=this.paneEl.hasClass("w-navpane-fullscreen"),this.isSlidingNav=this.paneEl.hasClass("w-navpane-slide"),this.paneTransition=this.paneEl.css("transition")},updateIsForced:function(){this.bodyEl.toggleClass("w-navpane-is-forced",this.isForced())},isForced:function(){return this.config.isForced?!0:this.config.condense!==!1&&e(window).width()<=this.config.condense?!0:!1},queryIsLeft:function(){this.isLeft=this.triggerEl.eq(0).position().left<this.bodyEl.width()/2},queryPaneWidth:function(){this.paneWidth=this.paneEl.outerWidth()},open:function(){var e=this;this.isOpen=!0,this.triggerEl.addClass("w-navpane-trigger-active"),this.queryIsLeft(),this.queryPaneWidth(),this.isFullscreen?(this.isSlidingNav&&this.paneEl.show(),setTimeout(function(){e.paneEl.show().css("opacity",1)},0)):(this.addCovering(),this.pinStickyNavToPage(),this.preparePaneForOpen(),setTimeout(function(){e.addSpotlight(),e.movePaneToOpenPosition(),e.moveSliderToOpenPosition()},0)),this.bodyEl.addClass("w-navpane-is-open"),this.bindCloseHandlers()},preparePaneForOpen:function(){this.bodyEl.toggleClass("w-navpane-is-left",this.isLeft),this.bodyEl.toggleClass("w-navpane-is-right",!this.isLeft),this.isSlidingNav&&(this.paneEl.show(),this.isLeft?this.paneEl.css({left:-this.paneWidth,right:"auto"}):this.paneEl.css({right:-this.paneWidth,left:"auto"}))},movePaneToOpenPosition:function(){this.isSlidingNav&&(this.isLeft?this.paneEl.css("left",0):this.paneEl.css("right",0))},movePaneToClosePosition:function(){this.isSlidingNav?this.isLeft?this.paneEl.css("left",-this.paneWidth):this.paneEl.css("right",-this.paneWidth):this.isFullscreen||this.removeCovering()},moveSliderToOpenPosition:function(){this.isLeft?this.slidingEl.css({left:this.paneWidth,right:-this.paneWidth}):this.slidingEl.css({left:-this.paneWidth,right:this.paneWidth})},moveSliderToClosePosition:function(){this.slidingEl.css({left:0,right:0})},close:function(){this.isOpen=!1,this.bodyEl.removeClass("w-navpane-is-open"),this.triggerEl.removeClass("w-navpane-trigger-active"),this.isFullscreen?this.paneEl.css("opacity",0):(this.movePaneToClosePosition(),this.moveSliderToClosePosition(),this.removeSpotlight()),this.unbindCloseHandlers()},bindTriggerHandlers:function(){var e=this;this.triggerEl.on("click.navpane",function(t){t.stopPropagation(),e.isOpen?e.close():e.open()})},unbindTriggerHandlers:function(){this.triggerEl.off("click.navpane")},postCloseHandler:function(){this.isOpen||(this.isFullscreen||(this.paneEl.scrollTop(0),this.unpinStickyNavToPage(),this.removeCovering()),this.paneEl.hide())},bindPostCloseActions:function(){i(this.paneEl,this.postCloseHandler.bind(this))},unbindPostCloseActions:function(){n(this.paneEl)},bindCloseHandlers:function(){var t=this,i=".w-navpane-trigger, .w-navpane-is-open .w-navpane-covering, .w-navpane-close";e(document).on("click.navpane",i,function(e){e.stopPropagation(),t.close()})},unbindCloseHandlers:function(){e(document).off("click.navpane")},bindWindowResizeHandler:function(){this.unbindWindowResizeHandler(),this.config.condense===!1||this.config.isForced||(this.resizeHandler=_.debounce(_.bind(this.updateIsForced,this),100),e(window).on("resize",this.resizeHandler))},unbindWindowResizeHandler:function(){null!=this.resizeHandler&&(e(window).off("resize",this.resizeHandler),this.resizeHandler=null)},addCovering:function(){this.coveringEl||(this.coveringEl=e("<div class='w-navpane-covering'></div>"),this.paneEl.after(this.coveringEl))},removeCovering:function(){null!=this.coveringEl&&(this.coveringEl.remove(),this.coveringEl=null)},addSpotlight:function(){this.paneEl.hasClass("w-navpane-spotlight")&&(this.coveringEl.addClass("w-navpane-covering-dark"),this.coveringEl.css("transition",this.paneTransition))},removeSpotlight:function(){this.paneEl.hasClass("w-navpane-spotlight")&&this.coveringEl.removeClass("w-navpane-covering-dark")},updateTransitions:function(){this.slidingEl.length&&this.slidingEl.css("transition",this.paneTransition),this.coveringEl&&this.coveringEl.css("transition",this.paneTransition)},pinStickyNavToPage:function(){"fixed"===this.stickyNavEl.css("position")&&(this.stickyOffset=this.stickyNavEl.position().top,this.stickyNavEl.css("position","absolute"),this.stickyNavEl.css("top",this.stickyNavEl.postion.top()+this.stickyOffset))},unpinStickyNavToPage:function(){this.stickyNavEl.hasClass("w-navbar-stuck")&&("100"===this.stickyNavEl.css("z-index")?this.stickyNavEl.css({position:"fixed",top:this.stickyOffset}):"99"===this.stickyNavEl.css("z-index")&&this.stickyNavEl.css({position:"fixed",top:0}))},destroy:function(){this.isOpen&&this.close(),this.unbindTriggerHandlers(),this.unbindPostCloseActions(),this.unbindWindowResizeHandler(),this.postCloseHandler()}},{data:[{name:"forced",title:"Collapse Navigation",type:"toggle","default":!0}],render:function(e){r.destroy(),r.init({isForced:Boolean(e.forced),condense:null!=e.condense?e.condense:1024})}}}),_wAMD.define("site/theme-plugins",["jquery","underscore","site/plugins/stickynav","site/plugins/navpane"],function(e,t,i,n){var o=function(){var r={};r["navbar-sticky"]=i.data,r.navpane=n.data;var s={};s["navbar-sticky"]=i.render,s.navpane=n.render;var a={},l=!1;return{init:function(e){l=e&&e.editor,null!=e.pluginOptionValues&&(a=t.clone(e.pluginOptionValues));for(var i in a)o.trigger(i)},setPluginOptionValue:function(e,i,n){var s=e.indexOf("/");if(-1!==s){var l=e.substr(0,s),c=e.substr(s+1);if(o.isAvailable(l)){var d=t.findWhere(r[l],{name:c});if(null!=d){l in a||(a[l]={});var u=d.type;t.isString(i)&&"toggle"===u&&(i=!!parseInt(i)),a[l][c]=i,n&&o.trigger(l)}}}},clearPluginOptionValues:function(){a={}},trigger:function(e){if(e in s&&e in a){var t=s[e],i=a[e];t(i,l)}},getPluginDefinition:function(e){if(t.isString(e)&&(e={name:e}),!o.isAvailable(e.name))return[];var i=r[e.name];return t.map(i,function(n){var o=t.clone(n);return o.name=e.name+"/"+o.name,e.defaults&&n.name in e.defaults?o["default"]=e.defaults[n.name]:1===i.length&&e["default"]&&(o["default"]=e["default"]),o})},setTrigger:function(t){"object"==typeof t&&e.extend(s,t)},isAvailable:function(e){return e in r}}}();return window._W&&_W.themePlugins&&e(function(){o.init({pluginOptionValues:_W.themePlugins})}),o}),_wAMD.define("editor-site-shared/ui/utils",["jquery","underscore","editor-site-shared/relay","editor-site-shared/ui/context","editor-site-shared/ui/constants","editor-site-shared/build/elements/Element"],function(e,t,i,n,o,r){function s(e){return w=null,e&&(w=e,_=h(w),E=!0),T=null,w}function a(e){for(var i in I)delete I[i];_=e,t.each(_,l)}function l(e){var i=function(i){t.each(i.elements,function(t){t.area=e,i.section_id&&(t.section_id=i.section_id),c(t)})};e.sections?t.each(e.sections,function(e){i(e)}):i(e)}function c(e){I[e.id]=e,e.children&&t.each(e.children,function(t){t.area=e.area,t.parent=e,c(t)}),e.columns&&t.each(e.columns,function(t){t.el=e,d(t)})}function d(e){t.each(e.elements,function(t){t.parentColumn=e,t.area=e.el.area,c(t)})}function u(){return E?e.Deferred().resolve(_).promise():b.getPageData().then(h)}function h(e){return e&&a(e.areas),_}function p(e){k=e}function f(){k=null}function m(){return I}function g(e){b.setElementData(e,e.id)}function v(e){return{page_element_id:e.id}}var b={},y=null;b.init=function(e){y||(y=e,y.vent.on({"editor:spotlight:open":p,"editor:spotlight:close":f,"section:remove:after section:add:after":b.clearPageDataCache}),i.on({"section:remove:after section:add:after":b.clearPageDataCache}))};var w,_,E=!1,T=null;b.clearPageDataCache=function(){E=!1,S=!1},b.getPageData=function(){if(T)return T;if(!E){var t=n.inSiteContext()?y:i;return T=e.when(t.request("page:getDimensions")),T.then(s)}return e.Deferred().resolve(w).promise()};var C,S=!1,D=null;b.getPageSectionData=function(){if(D)return D;if(!S){var t=n.inSiteContext()?y:i;return D=e.when(t.request("page:getSectionDimensions")),D.then(function(e){return C=null,e&&(C=e,S=!0),D=null,C})}return e.Deferred().resolve(C).promise()};var I={};b.getSectionData=function(){return S?e.Deferred().resolve(C).promise():b.getPageSectionData()},b.getAreasByName=function(e){return u().then(function(i){return t.where(i,{name:e})})},b.getAreasByType=function(e){return u().then(function(i){return t.where(i,{type:e})})},b.getAreasWhere=function(e){return u().then(function(i){return t.where(i,e)})};var k=null;return b.getActiveContentAreas=function(){if(k){if(k.id)return b.getElementById(k.id).then(function(e){return[{element:e,elements:e.children,empty:0==e.children.length,top:e.top,left:e.left,height:e.height,width:e.width,parentString:e.content_field_id+"-form-list"}]});if(k.name)return b.getAreasByName(k.name)}return u().then(function(e){return t.difference(t.where(e,{type:"content"}),t.where(e,{name:"footer"}))})},i.on({"editor:spotlight:open":p,"editor:spotlight:close":f}),b.getElements=function(){return u().then(m)},b.getElementById=function(e){return u().then(function(){return I[e]})},b.setContextData=function(e){e&&(y||b.init(e.currentApp),t.each(e.elementsByID,b.setElementData))},b.setElementData=function(e,i){e instanceof r&&(b.getElementById(i).done(function(t){e.elData=t}),t.each(e.columns,function(e){t.each(e,g)}),t.each(e.children,g))},b.getColumnData=function(e,i){var n,r=[i];if(e.column){n=t.map(e.el.columns,function(e){if(1!==e.elements.length||e.elements[0].id!==i.page_element_id){var n=t.map(e.elements,function(e){return e.id!==i.page_element_id?v(e):void 0});return t.filter(n,t.identity)}});var s=e.column_id?e.column_index:0;e.position===o.POSITION_RIGHT&&s++,n.splice(s,0,r),n=t.filter(n,t.identity)}else n=[[v(e.el)]],n.splice(e.position===o.POSITION_RIGHT?1:0,0,r);return n},b.isChildOf=function(e,t){return e.id===t?!0:e.parentColumn?b.isChildOf(e.parentColumn.el,t):e.parent?b.isChildOf(e.parent,t):!1},b.isChildOfMultiColumn=function(e){return e.parentColumn?!0:e.parent?b.isChildOfMultiColumn(e.parent):!1},b.flattenElements=function(e,i){function n(e){e.id&&o.push(e),o.push.apply(o,b.flattenElements(e))}var o=[];return t.isArray(e)&&t.each(e,n),t.each(e.sections,n),t.each(e.columns,n),i&&e.spotlighted||t.each(e.elements,n),i&&e.spotlighted||e.platform_element_id||t.each(e.children,n),o},b.whenImageLoaded=function(t){t instanceof HTMLImageElement||(t=this);var i=e.Deferred(),n=i.promise();if(t.complete)return i.resolve(t),n;var o=setTimeout(i.reject.bind(i),15e3);return e(t).one({load:function(){clearTimeout(o),i.resolve(this)},error:function(){clearTimeout(o),i.reject(this)}}),n},b.detectImageAlign=function(t){t=e(t);var i=t.offset().left,n=i+t.width(),o=t.attr("style");t.css({height:t.height()+"px",width:"1px","max-width":""});var r,s=t.offset().left;return r=s==i?"left":s+1==n?"right":"center",t.attr("style",o),r},b}),_wAMD.define("legacy/rgbcolor",function(){}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("jquery-ui/effect",["jquery"],e):e(jQuery)}(function(e){var t="ui-effects-",i=e;return e.effects={effect:{}},function(e,t){function i(e,t,i){var n=u[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function n(t){var i=c(),n=i._rgba=[];return t=t.toLowerCase(),f(l,function(e,o){var r,s=o.re.exec(t),a=s&&o.parse(s),l=o.space||"rgba";return a?(r=i[l](a),i[d[l].cache]=r[d[l].cache],n=i._rgba=r._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&e.extend(n,r.transparent),i):r[t]}function o(e,t,i){return i=(i+1)%1,1>6*i?e+(t-e)*i*6:1>2*i?t:2>3*i?e+(t-e)*(2/3-i)*6:e}var r,s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,i,n,o){return new e.Color.fn.parse(t,i,n,o)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=c.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(d,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(o,s,a,l){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=e(o).css(s),s=t);var u=this,h=e.type(o),p=this._rgba=[];return s!==t&&(o=[o,s,a,l],h="array"),"string"===h?this.parse(n(o)||r._default):"array"===h?(f(d.rgba.props,function(e,t){p[t.idx]=i(o[t.idx],t)}),this):"object"===h?(o instanceof c?f(d,function(e,t){o[t.cache]&&(u[t.cache]=o[t.cache].slice())}):f(d,function(t,n){var r=n.cache;f(n.props,function(e,t){if(!u[r]&&n.to){if("alpha"===e||null==o[e])return;u[r]=n.to(u._rgba)}u[r][t.idx]=i(o[e],t,!0)}),u[r]&&e.inArray(null,u[r].slice(0,3))<0&&(u[r][3]=1,n.from&&(u._rgba=n.from(u[r])))}),this):void 0},is:function(e){var t=c(e),i=!0,n=this;return f(d,function(e,o){var r,s=t[o.cache];return s&&(r=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(e,t){return null!=s[t.idx]?i=s[t.idx]===r[t.idx]:void 0})),i}),i},_space:function(){var e=[],t=this;return f(d,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=c(e),o=n._space(),r=d[o],s=0===this.alpha()?c("transparent"):this,a=s[r.cache]||r.to(s._rgba),l=a.slice();return n=n[r.cache],f(r.props,function(e,o){var r=o.idx,s=a[r],c=n[r],d=u[o.type]||{};null!==c&&(null===s?l[r]=c:(d.mod&&(c-s>d.mod/2?s+=d.mod:s-c>d.mod/2&&(s-=d.mod)),l[r]=i((c-s)*t+s,o)))}),this[o](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),o=c(t)._rgba;return c(e.map(i,function(e,t){return(1-n)*o[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,o=e[1]/255,r=e[2]/255,s=e[3],a=Math.max(n,o,r),l=Math.min(n,o,r),c=a-l,d=a+l,u=.5*d;return t=l===a?0:n===a?60*(o-r)/c+360:o===a?60*(r-n)/c+120:60*(n-o)/c+240,i=0===c?0:.5>=u?c/d:c/(2-d),[Math.round(t)%360,i,u,null==s?1:s]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],r=e[3],s=.5>=n?n*(1+i):n+i-n*i,a=2*n-s;return[Math.round(255*o(a,s,t+1/3)),Math.round(255*o(a,s,t)),Math.round(255*o(a,s,t-1/3)),r]},f(d,function(n,o){var r=o.props,s=o.cache,l=o.to,d=o.from;c.fn[n]=function(n){if(l&&!this[s]&&(this[s]=l(this._rgba)),n===t)return this[s].slice();var o,a=e.type(n),u="array"===a||"object"===a?n:arguments,h=this[s].slice();return f(r,function(e,t){var n=u["object"===a?e:t.idx];null==n&&(n=h[t.idx]),h[t.idx]=i(n,t)}),d?(o=c(d(h)),
o[s]=h,o):c(h)},f(r,function(t,i){c.fn[t]||(c.fn[t]=function(o){var r,s=e.type(o),l="alpha"===t?this._hsla?"hsla":"rgba":n,c=this[l](),d=c[i.idx];return"undefined"===s?d:("function"===s&&(o=o.call(this,d),s=e.type(o)),null==o&&i.empty?this:("string"===s&&(r=a.exec(o),r&&(o=d+parseFloat(r[2])*("+"===r[1]?1:-1))),c[i.idx]=o,this[l](c)))})})}),c.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,o){var r,s,a="";if("transparent"!==o&&("string"!==e.type(o)||(r=n(o)))){if(o=c(r||o),!h.rgba&&1!==o._rgba[3]){for(s="backgroundColor"===i?t.parentNode:t;(""===a||"transparent"===a)&&s&&s.style;)try{a=e.css(s,"backgroundColor"),s=s.parentNode}catch(l){}o=o.blend(a&&"transparent"!==a?a:"_default")}o=o.toRgbaString()}try{t.style[i]=o}catch(l){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},c.hook(s),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},r=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(i),function(){function t(t){var i,n,o=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,r={};if(o&&o.length&&o[0]&&o[o[0]])for(n=o.length;n--;)i=o[n],"string"==typeof o[i]&&(r[e.camelCase(i)]=o[i]);else for(i in o)"string"==typeof o[i]&&(r[i]=o[i]);return r}function n(t,i){var n,o,s={};for(n in i)o=i[n],t[n]!==o&&(r[n]||(e.fx.step[n]||!isNaN(parseFloat(o)))&&(s[n]=o));return s}var o=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(i.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(i,r,s,a){var l=e.speed(r,s,a);return this.queue(function(){var r,s=e(this),a=s.attr("class")||"",c=l.children?s.find("*").addBack():s;c=c.map(function(){var i=e(this);return{el:i,start:t(this)}}),r=function(){e.each(o,function(e,t){i[t]&&s[t+"Class"](i[t])})},r(),c=c.map(function(){return this.end=t(this.el[0]),this.diff=n(this.start,this.end),this}),s.attr("class",a),c=c.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,c.get()).done(function(){r(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(s[0])})})},e.fn.extend({addClass:function(t){return function(i,n,o,r){return n?e.effects.animateClass.call(this,{add:i},n,o,r):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,o,r){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,o,r):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,n,o,r,s){return"boolean"==typeof n||void 0===n?o?e.effects.animateClass.call(this,n?{add:i}:{remove:i},o,r,s):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},n,o,r)}}(e.fn.toggleClass),switchClass:function(t,i,n,o,r){return e.effects.animateClass.call(this,{add:i,remove:t},n,o,r)}})}(),function(){function i(t,i,n,o){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(o=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(o=n,n=i,i={}),e.isFunction(n)&&(o=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=o||i.complete,t}function n(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.4",save:function(e,i){for(var n=0;n<i.length;n++)null!==i[n]&&e.data(t+i[n],e[0].style[i[n]])},restore:function(e,i){var n,o;for(o=0;o<i.length;o++)null!==i[o]&&(n=e.data(t+i[o]),void 0===n&&(n=""),e.css(i[o],n))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(s){r=document.body}return t.wrap(n),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(o),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,o){return o=o||{},e.each(i,function(e,i){var r=t.cssUnit(i);r[0]>0&&(o[i]=r[0]*n+r[1])}),o}}),e.fn.extend({effect:function(){function t(t){function i(){e.isFunction(r)&&r.call(o[0]),e.isFunction(t)&&t()}var o=e(this),r=n.complete,a=n.mode;(o.is(":hidden")?"hide"===a:"show"===a)?(o[a](),i()):s.call(o[0],n,i)}var n=i.apply(this,arguments),o=n.mode,r=n.queue,s=e.effects.effect[n.effect];return e.fx.off||!s?o?this[o](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):r===!1?this.each(t):this.queue(r||"fx",t)},show:function(e){return function(t){if(n(t))return e.apply(this,arguments);var o=i.apply(this,arguments);return o.mode="show",this.effect.call(this,o)}}(e.fn.show),hide:function(e){return function(t){if(n(t))return e.apply(this,arguments);var o=i.apply(this,arguments);return o.mode="hide",this.effect.call(this,o)}}(e.fn.hide),toggle:function(e){return function(t){if(n(t)||"boolean"==typeof t)return e.apply(this,arguments);var o=i.apply(this,arguments);return o.mode="toggle",this.effect.call(this,o)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects}),_wAMD.define("util/effect-slide-custom",["jquery","jquery-ui/effect"],function(e){!function(e,t){e.effects.effect.slide=function(t,i){var n,o=e(this),r=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(o,t.mode||"show"),a="show"===s,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l,u={};e.effects.save(o,r),o.show();var h=t.wrapper;h?(h=e(h).show(),/relative|absolute/.test(o.css("position"))||o.css("position","relative")):h=e.effects.createWrapper(o),h.css("overflow","hidden");var n=t.distance||("top"==c?o.height()?o.outerHeight(!0):h.height():o.width()?o.outerWidth(!0):h.width());a&&o.css(c,d?isNaN(n)?"-"+n:-n:n),u[c]=(a?d?"+=":"-=":d?"-=":"+=")+n,o.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&o.hide(),e.effects.restore(o,r),t.wrapper?(h.css("overflow",""),"hide"==s&&h.hide()):e.effects.removeWrapper(o),i()}})}}(e)}),!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,i,n){var o,r,s,a,l;for(this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.enabled=!0,s=this.options.trigger.split(" "),l=s.length;l--;)a=s[l],"click"==a?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=a&&(o="hover"==a?"mouseenter":"focus",r="hover"==a?"mouseleave":"blur",this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var i,n=e.fn[this.type].defaults,o={};return this._options&&e.each(this._options,function(e,t){n[e]!=t&&(o[e]=t)},this),i=e(t.currentTarget)[this.type](o).data(this.type),i.options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",void(this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show))):i.show()},leave:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),i.options.delay&&i.options.delay.hide?(i.hoverState="out",void(this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide))):i.hide()},show:function(){var t,i,n,o,r,s,a=e.Event("tooltipshow");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),r="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),i=this.getPosition(),n=t[0].offsetWidth,o=t[0].offsetHeight,r){case"bottom":s={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":s={top:i.top-o,left:i.left+i.width/2-n/2};break;case"left":s={top:i.top+i.height/2-o/2,left:i.left-n};break;case"right":s={top:i.top+i.height/2-o/2,left:i.left+i.width}}this.applyPlacement(s,r),this.$element.trigger("shown")}},applyPlacement:function(e,t){var i,n,o,r,s=this.tip(),a=s[0].offsetWidth,l=s[0].offsetHeight;s.offset(e).addClass(t).addClass("in"),i=s[0].offsetWidth,n=s[0].offsetHeight,"top"==t&&n!=l&&(e.top=e.top+l-n,r=!0),"bottom"==t||"top"==t?(o=0,e.left<0&&(o=-2*e.left,e.left=0,s.offset(e),i=s[0].offsetWidth,n=s[0].offsetHeight),this.replaceArrow(o-a+i,i,"left")):this.replaceArrow(n-l,n,"top"),r&&s.offset(e)},replaceArrow:function(e,t,i){this.arrow().css(i,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){i.off(e.support.transition.end).detach()},500);i.one(e.support.transition.end,function(){clearTimeout(t),i.detach()})}var i=this.tip(),n=e.Event("tooltiphide");return this.$element.trigger(n),n.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():i.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var i=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;i.tip().hasClass("in")?i.hide():i.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=e.fn.tooltip;e.fn.tooltip=function(i){return this.each(function(){var n=e(this),o=n.data("tooltip"),r="object"==typeof i&&i;o||n.data("tooltip",o=new t(this,r)),"string"==typeof i&&o[i]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(window.jQuery),!function(e){var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](i),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,i=this.options;return e=("function"==typeof i.content?i.content.call(t[0]):i.content)||t.attr("data-content")},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var i=e.fn.popover;e.fn.popover=function(i){return this.each(function(){var n=e(this),o=n.data("popover"),r="object"==typeof i&&i;o||n.data("popover",o=new t(this,r)),"string"==typeof i&&o[i]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(window.jQuery),_wAMD.define("vendor/bootstrap/popover",function(){}),function(e){function t(){return O()?(x||(x=B("editor-site-shared/relay"),A=B("site/editor/relay-constants")),!0):!1}function i(e){var t=e.closest("."+W);return t.length?t:e.parent()}function n(e){var t=e.find("."+V);return t.length?t:e.find("a").first()}function o(e){var t=e.find("."+$);return t.length?t:(t=e.find("."+F),t.length?t:e.find("li"))}function r(e){var t=e.closest("."+z);return t.length?t:e.parent()}function s(e){return e.find("."+z).first()}function a(e){var t=e.find("."+q);return t.length?t:e.find("li")}function l(e){var t=e.find("."+G);return t.length?t:e.find("a")}function c(t){if(window.navFlyoutMenu){var i=window.currentPage||N,r=window.navFlyoutMenu.getMainList(),a=r.children(),c=e("body").find("#"+ie),d=e("body").find("#"+Z),u=L&&L.hasCustomMembership,p=L&&L.hasCustomMinicart,f=a.filter(function(){return!!e(this).find("#"+Z).length});f.length||(f=void 0);var m,g,y=window.getCartCount(),w=window.location.host,_=window.location.pathname,E=window._W.stl("javascript.cartText")+" (<span id='"+te+"'></span>)";w.indexOf(".checkout.weebly.com")>-1||w.indexOf(".checkout.editmysite.com")>-1||_.indexOf("store/checkout")>-1||"object"==typeof Weebly&&Weebly.EDITOR&&!Weebly.COMMERCE_ENABLED||"object"!=typeof Weebly||!Weebly.Commerce||"boolean"!=typeof Weebly.Commerce.hasCart||"object"==typeof Weebly&&Weebly.Commerce&&Weebly.Commerce.hasCart===!1?f&&(f.remove(),a=r.children(),window.navFlyoutMenu.writeOrderingClassNames()):(f||(p?(d.html(E),f=void 0):f=T(E),m=p?d:n(f),m.attr("id",Z).css("position","relative"),O()&&(g=B("config"),g.chromeless||(m=p?d.parent():h(f),m.attr("data-content",window._W.utl("javascript.editor.cartNotification")).popover({trigger:"hover",placement:"bottom",container:"#_editor-ui",delay:{show:500,hide:100}}))),m=p?d.parent():h(f),m.addClass(ee).css("position","relative"),R=p?d:f,window.reportCartNavElement(),p||(r.append(f),a=r.children(),window.navFlyoutMenu.writeOrderingClassNames())),e("#"+te).text(y));var S;f&&p?S=null:f&&(S=h(f));var I;I=u?e("#"+ie):a.filter(function(){return!!e(this).find("#"+ie).length}),I.length||(I=void 0);var k=Weebly.allowMemberRegistration?window._W.stl("html.weebly.libraries.flyout_menus_jq_7"):window._W.stl("html.weebly.libraries.flyout_menus_jq_8"),x=B("editor/page-manager/pages"),A=x.some(function(e){return e.get("membership_required")}),M=O()&&(A||Weebly.allowMemberRegistration||Weebly.memberCount>0||Weebly.groupCount>0)&&Weebly.showMemberLoginLink,j=window._W&&_W.showLogin;if(!M&&!j||I?M||j||!I||(I.remove(),a=r.children(),window.navFlyoutMenu.writeOrderingClassNames()):(I=T(k),O()?I.attr("id","pgmember-login"):I.attr("id","member-login"),n(I).attr("id",ie),u?e(".wsite-custom-membership-wrapper").html(I):f&&!p?I.insertBefore(f):r.append(I),a=r.children(),window.navFlyoutMenu.writeOrderingClassNames()),O()&&I){g=B("config");var K=n(I);K=c.length?c:K,c.length&&K.text(k),g.chromeless||K.attr("data-content",window._W.utl("html.weebly.libraries.flyout_menus_jq_5")).popover({trigger:"hover",placement:"bottom",container:"body",delay:{show:500,hide:100}})}if(!window.DISABLE_NAV_MORE){var W=P.clone(!0,!0),$=a.filter(function(){return!!e(this).find("#"+J).length});$.length||($=void 0);var V=!1;$&&($.hide(),V=!0);var U;if(V)if(U=h($),U[0]._flyoutmenu_destroy)U=U[0]._flyoutmenu_destroy(!0);else{var q=o(U)[0];q._flyoutmenu_destroy&&(U=q._flyoutmenu_destroy(!0))}var G,X,ne,oe,re=[],se=[],ae=!1,le=null;for(ne=0;ne<t.length;ne++)oe=b(t[ne].id,r),oe&&(oe.show(),re.push(oe));for(f&&re.push(f),I&&re.push(I),ne=0;ne<re.length;ne++){oe=re[ne];var ce=h(oe),de=v(ce);if(ne){if(1==ne)G=Math.abs(de[0].top-se[0][0].top)>Math.abs(de[0].left-se[0][0].left),G&&(X=ce.closest(".wsite-nav-vertical"),X.length&&(le=X.offset().top+(parseInt(X.css("padding-top"),10)||0)+X.height()));else if(G){if(null!==le&&de[1].top>le){ae=!0;break}}else if(Math.abs(de[0].top-se[ne-1][0].top)>5){ae=!0;break}}else;se.push(de)}var ue,he,pe,fe=[];if(e("body").toggleClass("wsite-nav-condensed",!!ae),ae){$?$.show():($=W,n($).attr("id",J).css("position","relative").on("click",!1),I&&!u?$.insertBefore(I):f&&!p?$.insertBefore(f):r.append($));var me=h($).addClass(Q).css("position","relative"),ge=h(re[0]),ve=null;I&&!u&&(ve=h(I));var be=S||ve||me,ye=re.length-1;for(f&&ye--,I&&ye--,ne=ye;ne>=0;ne--){var we=v(ge),_e=v(be);if(!(G&&_e[1].top>le||!G&&Math.abs(we[0].top-_e[0].top)>5))break;re[ne].hide(),fe.unshift(ne)}if(0===fe.length)$.remove(),e("body").removeClass("wsite-nav-condensed");else if(fe.length==t.length){for(ne=0;ne<fe.length;ne++){var Ee=b(t[fe[ne]].id,r);Ee&&Ee.show()}$.remove(),e("body").removeClass("wsite-nav-condensed")}else{for(var Te,x=B("editor/page-manager/pages"),Ce=[],Se=0;Se<fe.length;Se++){ue=t[fe[Se]],x.length&&(ue=x.getPage(ue.id).toJSON()),ue=e.extend({},ue),ue.title_html=ue.title,ue.membership_required=ue["membership-required"],O()&&(ue.url="page://"+ue.id);var De=b(ue.id,r);De&&(Te=h(De)[0]._get_sublist()),!Te&&U&&(Te=!!U.find("#"+H+ue.id+" ."+z).length),Te&&(ue.has_children=!0,ue.children=!1),Ce.push(ue)}var Ie=e(C(D("navigation/flyout/list")||D("menu/submenu-main"),{children:Ce}));O()&&window.processNavLinks(Ie),l(Ie).each(function(){var o=e(this).closest("[id]"),a=o.attr("id");if(a){a=a.replace(/[^\d]/g,"");var l;if(e.each(t,function(){return this.id===a?(l=this,!1):void 0}),l){if(o.is("span."+F)&&(o=o.children(),o.unwrap()),he=H+l.id,o.attr("id",he),he.replace(/[^\d]/g,"")==i&&o.addClass(Y),pe=n(o),!l.onclick){var c=l.url;if(window.IS_ARCHIVE||c.match(/^http:\/\//))pe.attr("href",c);else{var d=e(e.map(re,function(e){return e.get()})),u=n(d.filter("[id*="+a+"]")),p=u.attr("href"),f=u.data("membership-required");p?pe.attr("href",p):l.nonclickable||pe.attr("href","/"+c),"number"==typeof f&&pe.attr("data-membership-required",""+f)}l.target&&pe.attr("target",l.target)}var m,g=b(l.id,r);g&&(m=h(g)[0]._flyoutmenu_destroy()),!m&&U&&(m=s(U.find("#"+H+l.id)),m.length||(m=void 0)),m&&s(o).replaceWith(m)}}}),me.append(Ie),window.navFlyoutMenu.addItem(me)}}if(U)for(ne=0;ne<fe[0];ne++){ue=t[ne];var ke=b(ue.id,r),Oe=U.find("#"+H+ue.id+" ."+z+":first");Oe.length&&(ke[0]._flyoutmenu_destroy&&ke[0]._flyoutmenu_destroy(),ke.append(Oe),window.navFlyoutMenu.addItem(ke))}window.navFlyoutMenu.writeOrderingClassNames()}}}function d(e,t,i){var n=e.closest("."+W);n.length||(n=e.parent(),n.hasClass(F)&&(n=n.parent()));var o=u(n,t,i);if(o.length>=2){var r=o.eq(0).offset(),s=o.eq(1).offset(),a=Math.abs(r.left-s.left)-Math.abs(r.top-s.top);if(0!==a)return 0>a}return!g(e)}function u(t,i,n){var o=t.find("."+$);if(o.length)return o;var o=t.find("."+F);if(o.length)return o;var r=[];return t.children().each(function(t,o){var s=e(o);if(!i||s.hasClass(F)||s.hasClass(Q)||o.id.match(/^pg/)||n&&o.id==n){var a=h(s);a.length&&r.push(a[0])}}),e(r)}function h(e){if(e.hasClass(F)){var t=e.find("."+$).first();e=t.length?t:e.children().first()}return e.hasClass(W)?void 0:e}function p(e){return o(e).add(a(e))}function f(e){var t=e.closest("."+F).siblings().find("."+$+":first-child");return t.length?t:e.parent().hasClass(F)?e.parent().siblings().children(":first-child"):e.siblings()}function m(e){var t=e.find("."+U).first();if(t.length)return t;if(t=e.closest("."+q+", ."+$).find("."+U).first(),t.length)return t;if(t=e.find("ul").first(),!t.length){var i=e.next();i.hasClass(W)&&(t=i.children().first())}return t.length?t:void 0}function g(e){return!e.closest("."+U).length}function v(e){var t=e.is("a")?e:e.find("a"),i=e.offset(),n={top:i.top+e[0].offsetHeight,left:i.left+e[0].offsetWidth};if(!t)return[i,n];var o,r,s=t.offset(),a={top:s.top+t[0].offsetHeight,left:s.left+t[0].offsetWidth};return Math.abs(i.left-n.left)<10?(o=s,r=a):(o={top:Math.min(i.top,s.top),left:Math.min(i.left,s.left)},r={top:Math.max(n.top,a.top),left:Math.max(n.left,a.left)}),[o,r]}function b(t,i){var n=e("#pg"+t,i);return!n.length&&M&&(n=e("#"+M,i)),n.length?n:void 0}function y(){if(O()){for(var e=0;e<document.styleSheets.length;e++)try{if(document.styleSheets[e].title==j+"-theme-css"){var t=document.styleSheets[e],i=t.cssRules||t.rules;return i&&i.length>0}}catch(n){}return!1}return!0}function w(e){if(y())e();else var t=setInterval(function(){y()&&(clearInterval(t),e())},200)}function E(){return T(window._W.stl("html.weebly.libraries.flyout_menus_jq_6"))}function T(t){return e(C(S(),{title_html:t,url:"#",has_children:!1}))}function C(e,t){var i=B("mustache");return i.render(e,t,I())}function S(){return oe||(oe=D("navigation/item")||D("menu/item")),oe}function D(e){return I()[e]}function I(){return ne||{}}function k(e){ne=_.extend({},objectify(e))}function O(){return window.inEditor&&window.inEditor()}window.getCartCount=function(){var e=O()?0:"-";return e};var R=null;window.getCartNavElement=function(){return R},window.reportCartNavElement=function(){};var x,A,P,M,N,L,B=window._wAMD&&window._wAMD.require||window.require,j=window.STYLE_PREFIX||"weebly",K=300,F=j+"-nav-handle",H=j+"-nav-",W=j+"-menu-default",$=j+"-menu-item-wrap",V=j+"-menu-item",z=j+"-menu-wrap",U=j+"-menu",q=j+"-menu-subitem-wrap",G=j+"-menu-subitem",Y=j+"-nav-current",X=j+"-menus",J=j+"-nav-more-a",Q=j+"-nav-more",Z=j+"-nav-cart-a",ee=j+"-nav-cart",te=j+"-nav-cart-num",ie=j+"-nav-login-a";window.initPublishedFlyoutMenus=function(t,n,o,r,s,a,l){if(N=n,L=l,k(a),P=E(),t.length>0){var d=function(){M=r;var n=e("<div>",{id:X}).appendTo("body"),o=b(t[0].id);o&&(window.navFlyoutMenu=new window.FlyoutMenu(i(o),{relocate:n,aLiId:r}),c(t))};s?d():w(d)}window.refreshPublishedFlyoutMenus=function(){c(t)},e(".wsite-logo img").on("load",window.refreshPublishedFlyoutMenus),e(window).on("load",window.refreshPublishedFlyoutMenus)},window.flyoutMenusRefreshable=!0,window.initEditorFlyoutMenus=function(t,n){M=t,L=n,k(n.templates),w(function(){function n(){var e=getTopLevelSummary();if(e.length>0){var n=b(e[0].id);if(n){var o=i(n);o.is("table,tbody,thead,tr")?window.navFlyoutMenu=null:(window.navFlyoutMenu=new window.FlyoutMenu(o,{relocate:"#"+X,aLiId:t}),P=E(),c(e))}else window.navFlyoutMenu=null}}if(e.browser.webkit){var o=e("span."+F);o.hide(),setTimeout(function(){o.show(),n()},0)}else n()})},window.refreshNavCondense=function(e){"object"==typeof e&&_.extend(window.Weebly,e),!window.navFlyoutMenu||Weebly.view&&Weebly.view.isMobileView||c(getTopLevelSummary())},window.disableFlyouts=!1,window.FlyoutMenu=function(i,o){function s(i){function s(e){y&&C&&e.preventDefault()}function c(){return window.disableFlyouts?!1:(g.mouseoverItems.push(i),I++,D=!0,void(S||C||T&&(i.data("hasChildren",!0),f(i).each(function(e,t){t._flyoutmenu_contract&&t._flyoutmenu_contract()}),p(),i.data("isExpanded",!0))))}function u(){if(window.disableFlyouts)return!1;if(D=!1,S){var e=I;setTimeout(function(){I==e&&S&&!C&&(b(),i.data("isExpanded",!1))},w)}}function h(){return window.disableFlyouts?!1:void I++}function p(){C=!0;var n={wrapper:E,duration:K,complete:function(){if(C=!1,S=!0,D?(i[0]._flyoutmenu_contract=b,i[0]._flyoutmenu_hide=function(){C=!1,S=!1,D=!1,i[0]._flyoutmenu_contract=null,i[0]._flyoutmenu_hide=null,E.hide()}):b(),t()){var n=e(this),o=n.offset();x.trigger(A.EVENTS.SUBNAV_SHOWN,{top:o.top,left:o.left,width:n.outerWidth(),height:n.outerHeight()})}}},r=v(i);E.css("left",-1e4),E.show();var s=E.offsetParent(),a=s.is("body")?{top:0,left:0}:s.offset();E.hide(),T.show();var l;if(d(i,!0,o.aLiId))k=!1,E.css("top",-a.top+r[0].top),l=E.outerWidth(),r[1].left+l>e("body").outerWidth()?(O=!1,E.css("left",-a.left+r[0].left-l),n.direction="right",T.show("slide",n)):(O=!0,E.css("left",-a.left+r[1].left),n.direction="left",T.show("slide",n));else{k=!0,E.css("top",-a.top+r[1].top),l=E.outerWidth();var c=E.outerHeight();r[0].left+l>e("body").outerWidth()?E.css("left",-a.left+r[1].left-l):E.css("left",-a.left+r[0].left);var u;if(i.parentsUntil("body").filter(function(){return"fixed"===e(this).css("position")}).length>0){var h=e(window);u=h.height()+h.scrollTop()}else u=e(document).height();var p=parseInt(E.css("top"),10)-c-i.outerHeight();r[1].top+c>u&&p>0?(E.css("top",p+"px"),n.direction="down",R=!0):(n.direction="up",R=!1),T.show("slide",n)}}function b(e){if(!window.disableFlyouts&&i.parent().length){e&&(D=!1),C=!0,i[0]._flyoutmenu_contract=null,i[0]._flyoutmenu_hide=null;var n={wrapper:E,duration:K,complete:function(){C=!1,S=!1,D&&p(),t()&&x.trigger(A.EVENTS.SUBNAV_HIDDEN)}};k?(R?n.direction="down":n.direction="up",T.hide("slide",n)):O?(n.direction="left",T.hide("slide",n)):(n.direction="right",T.hide("slide",n))}}i.css("position","relative"),n(i).add(l(i)).css("position","relative");var E,T,C=!1,S=!1,D=!1,I=0,k=!1,O=!1,R=!1;T=m(i),T&&(E=r(T),E.css("position","absolute"),E.hide(),_?(E.on("mouseover",c),E.on("mouseout",u),E.on("click",function(e){s(e)})):(E.on("mouseover",h),E.on("click",function(e){s(e)}))),i.on("mouseover",c),i.on("mouseout",u),i.on("click",function(e){s(e)}),i[0]._flyoutmenu_destroy=function(e){if(i.off("mouseover",c),i.off("mouseout",u),i.off("click",s),E){_?(E.off("mouseover",c),E.off("mouseout",u),E.off("click",s)):(E.off("mouseover",h),E.off("click",s)),a(E).each(function(){this._flyoutmenu_destroy()}),e&&E.detach();var t=E;return E=null,T=null,t}},i[0]._get_sublist=function(){return T}}function c(){var t=1;u(i).each(function(){this.className=this.className.replace(new RegExp(H+"\\d+"),"");var i=e(this);"none"!=i.css("display")&&(i.addClass(H+t),t++)})}var g=this;g.mouseoverItems=[],i=e(i),o=o||{};var b,y="ontouchstart"in window,w=1e3*(o.delay||.5),_=o.relocate?e(o.relocate):!1;this.contract=function(){b.each(function(e,t){t._flyoutmenu_contract&&t._flyoutmenu_contract(!0)})},this.hideSubmenus=function(){b.each(function(e,t){t._flyoutmenu_hide&&t._flyoutmenu_hide()})},this.destroy=function(){b.each(function(e,t){t._flyoutmenu_destroy&&t._flyoutmenu_destroy()})},this.addItem=function(t){t=e(t);var i=h(t);if(i.length){s(i);var n=m(i);n&&a(n).each(function(){s(e(this))}),_&&n&&_.append(r(n)),b=b.add(i),c()}},this.removeItem=function(t){t=e(t);var i=h(t);i.length&&(i[0]._flyoutmenu_destroy&&i[0]._flyoutmenu_destroy(!0),i.remove(),b=b.not(i),c())},this.getMainList=function(){return i},this.writeOrderingClassNames=c,b=p(i),b.each(function(){s(e(this))}),c(),_&&u(i).each(function(t,i){var n=m(e(i));n&&_.append(r(n))})},window.whenThemeCSSLoaded||(window.whenThemeCSSLoaded=w),Weebly.Menus={inVerticalList:d};var ne,oe;window.objectify=function(e){return _.isEmpty(e)?{}:e}}(Weebly.jQuery),_wAMD.define("legacy/flyout_menus_jq",["editor/page-manager/pages","util/effect-slide-custom","vendor/bootstrap/popover","mustache"],function(){}),function(e){var t=function(){var t=function(){var t=e(".wsite-view-link-full"),i=e(".wsite-view-link-mobile"),n=window.location.href||"";n+=n.indexOf("?")>-1?"&":"?",t.attr("href",n+"view=full"),i.attr("href",n+"view=mobile")};t();var i=window.History;i&&i.enabled&&History.Adapter.bind(window,"statechange",t)};e(document).ready(t)}(Weebly.jQuery),function(){var e=window.STYLE_PREFIX||"weebly",t=function(){for(var t=0;t<document.styleSheets.length;t++)try{if(document.styleSheets[t].title==e+"-theme-css"){var i=document.styleSheets[t],n=i.cssRules||i.rules;return n&&n.length>0}}catch(o){}return!1},i=function(e){if(t())e();else var i=setInterval(function(){t()&&(clearInterval(i),e())},200)};window.whenThemeCSSLoaded||(window.whenThemeCSSLoaded=i),window.isThemeCSSLoaded||(window.isThemeCSSLoaded=t)}(),_wAMD.define("site/published/general",function(){}),function(e){e.fn.up=function(e){return this.eq(0).parent().closest(e||"*")},e.fn.down=function(e){return e?this.eq(0).find(e||"*").eq(0):this.eq(0).children(":first")};var t=1;e.fn.identify=function(){var i=this.attr("id");if(!i&&this.length){do i="anonymous_element_"+t++;while(e("#"+i).length);this.attr("id",i)}return i},e.fn.placeholder=function(){if(!("placeholder"in document.createElement("input"))){var t,i;this.each(function(n,o){i=o.getAttribute("placeholder"),i&&"input"===o.nodeName.toLowerCase()&&(t=e(o).on({focus:function(t){o.value===i&&(e(o).removeClass("wsite-placeholder"),o.value="")},blur:function(e){o.value.length||(o.value=i,o.className+=" wsite-placeholder")}}),o.className+=" wsite-placeholder",o.value=i)})}},e.extend({isValidSelector:function(t){try{e(t)}catch(i){return!1}return!0}}),document.observe||(document.observe=function(t,i){"dom:loaded"==t&&e(document).ready(i)}),e.fn.outerHeightDeep=function(t){var i=this.find("*").addBack().map(function(){return e(this).outerHeight(t)}).get();return Math.max.apply(Math,i)}}(Weebly.jQuery),Weebly.evalJSON=function(json){var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;cx.test(json)&&(json=json.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));try{return eval("("+json+")")}catch(e){}throw new SyntaxError("Badly formed JSON string: "+json)},_wAMD.define("legacy/jquery_utils",function(){}),_wAMD.define("site/editor/themes/main",["jquery","underscore","mustache","config","site/editor/app","editor/page-manager/pages","site/editor/ui/weebly_social_sharing","site/editor/ui/weebly_header_image","legacy/weebly_footer","editor-site-shared/design/Font","editor-site-shared/build/elements/Element","editor/pages/utils","editor/build/themes/data","editor/design/data","editor-site-shared/relay","editor-site-shared/image-editor/data","editor-site-shared/build/AreaUtils","editor/design/weebly_design_options","editor/build/ui/weebly_view","editor/build/themes/main","editor-site-shared/build/utils","legacy/weebly_element_utils","tpl!platform/theme/base/navigation/list.tpl","tpl!platform/theme/base/navigation/item.tpl","tpl!platform/theme/base/navigation/flyout/list.tpl","tpl!platform/theme/base/navigation/flyout/item.tpl","site/theme-plugins","editor-site-shared/ui/constants","editor-site-shared/ui/utils","legacy/rgbcolor","legacy/flyout_menus_jq","site/published/general","legacy/jquery_utils"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p,f,m,g,v,b,y,w,_,E,T,C,S,D,I,k){
function O(){te.forceThemeRerender=!0}function R(){ne=""}function x(i){if(!i||!i.plugins||n.chromeless){var o=new e.Deferred;return o.reject().promise()}return Weebly.Editor.RPC.ThemeOption.getSavedThemeOptions().done(function(e){D.clearPluginOptionValues(),i.plugins.forEach(function(e){t.isObject(e)||(e={name:e});var i=t.omit(e,"name","default","defaults");t.each(i,function(t,i){D.setPluginOptionValue(e.name+"/"+i,t,!1)})}),e.forEach(function(e){D.setPluginOptionValue(e.name,e.value,!1)}),f.off("theme:optionChanged"),f.on({"theme:optionChanged":function(e,t){D.setPluginOptionValue(e,t,!0)}})}).fail(window.errFunc)}function A(t){var i=new e.Deferred,n=J().current_item_id;return window.whenThemeCSSLoaded(function(){var r=e('[class*="wsite-header"]:not(.wsite-header-section)');a.reportHeaderElement(r),P(),l.updateFooter(),Weebly.siteContext.afterRender(),Weebly.pageContext.afterRender(),d.globalAfterRender(),window.disableFlyouts=!1,X(!0);for(var s=y.getAreaSummary(currentPage.replace(/\/.*/,""),t)||[],c={},u=0,h=s.length;h>u;u++)"membership"===s[u].type?c.hasCustomMembership=!0:"minicart"===s[u].type&&(c.hasCustomMinicart=!0);window.ENABLE_PAGE_HIERARCHY&&(c.templates=te.getPartials(t),window.initEditorFlyoutMenus(n,c)),_.repositionElements(),b.isMobileView&&f.trigger("setMobileView"),i.resolve(),o.vent.trigger("themeRendered",currentTheme,window.currentPageType),f.trigger("themeRendered",currentTheme,window.currentPageType)}),i.promise()}function P(){var e=m.getCurrentHeader();e&&a.setCurrentHeaderImage(e,!0)}function M(t,o){var r=new e.Deferred,s=h.currentThemeData.enableEditorJS&&!n.chromeless,a=!1,l=e("#icontent").empty();g.clearAreaBatch(),d.globalBeforeRender(),Weebly.siteContext.beforeRender(),Weebly.pageContext.beforeRender();var c=i.render(t,{links:j(),area:function(){return function(t){var i=JSON.parse(t);return e("<custom_area>",{type:i.type,name:i.name,attrs:JSON.stringify(i.attrs)})[0].outerHTML}}},te.getPartials(o));return s?c=e(c):l[0].innerHTML=c,l.append('<div id="wsite-menus"></div>'),s&&l.prepend(c),l.find("custom_area").each(function(){var t,i=e(this),n=i.attr("name"),o=i.attr("type"),r=i.attr("attrs");if(r=r?JSON.parse(r):{},t=N(o,n,r),!a)if("string"==typeof t){var s=e("<div>");s[0].innerHTML=t,s.find("script").not(".element-script").remove(),t=s.children()}else e(t).find("script").not(".element-script").remove();i.replaceWith(t)}),F(l),g.batchFetchNeededAreas(function(){r.resolve(o)}),r.promise()}function N(e,t,i){var n=i.global,o=n?Weebly.siteContext:Weebly.pageContext;return"credits"==e?"<span id='weeblyfooterattribution' style='display:none;margin:1em 0 0;padding:0 0 1em;font-size:.8em'></span>":"header"!=t&&"header"!=e?o.getAreaHTML(e,t,i):void 0}function L(){ne&&(e("body")[0].className=ne,n.chromeless&&(ne+=" "+I.MOBILE_EDITOR_BODY_CLASS));var t=h.currentThemeData.page_type_templates[window.currentPageType],i=t.body_attrs.replace(/^.*class\s*=\s*[\'"](.*?)[\'"].*$/,"$1"),o=e("#icontent")[0],r=o.className+" wsite-background",s=(oe||"")+" "+i+(b.isMobileView?" wsite-mobile":"");e("body").removeClass(r).addClass(s),s=s.replace(/(^| )wsite-background( |$)/," "),o.className="icontent "+s,D.init({editor:!0}),f.trigger("theme:classes:updated")}function B(t){var i=e("body"),n="light"==t;i.toggleClass("wsite-theme-light",n),i.toggleClass("wsite-theme-dark",!n)}function j(e){return e=e||r.toJSON(),t.chain(e).filter(function(e){return!e.hidden}).map(function(e){var t=j(e.children);return{children:t,has_children:t&&t.length>0,id:"pg"+e.id,is_current:window.currentPage&&e.id==window.currentPage,title_html:e.title.replace("\\'","'").replace('\\"','"'),url:"page://"+e.id,target:!1,membership_required:e.membership_required}}).value()}function K(e){e=e||currentThemeData;var t=J().normal_item_template,i=objectify(e.partials_templates);return i["navigation/list"]=i["navigation/list"]||E,i["navigation/item"]=t||i["navigation/item"]||T,i["navigation/flyout/list"]=i["navigation/flyout/list"]||C,i["navigation/flyout/item"]=i["navigation/flyout/item"]||S,i}function F(t){t.find('a[href^="page://"]').each(function(t,i){var n=e(i),o=n.attr("href").match(/^page\:\/\/(.*)$/)[1],s=r.getPage(o).toJSON();n.attr("href","#").removeAttr("data-membership-required"),b.isMobileView||(s.extlink?W(n,s):s.nonclickable?$(n,s):H(n,s))})}function H(t,i){t.on({click:function(t){if(window.navFlyoutMenu&&window.navFlyoutMenu.contract(),n.chromeless){var r=e(t.target.parentNode);r.hasClass("wsite-nav-more")||!r.data("isExpanded")&&r.data("hasChildren")?r.trigger("mouseover"):o.vent.trigger("navClicked",i.id)}else noJump=1,o.vent.trigger("navClicked",i.id);t.preventDefault()}})}function W(e,t){e.on({click:function(e){n.chromeless&&o.vent.trigger("navClicked",t.id),e.preventDefault()},mouseover:function(e){u.onExternalLinkHover(t,e)},mouseout:function(){u.hideNavTooltip()}})}function $(e,t){e.on("click",!1)}function V(){var t=e("<div>",{"class":"paragraph"});e("#secondlist").append(t);var i=new window.RGBColor(t.css("color"));t.remove();var n=z(i.r,i.g,i.b);return n[2]<.57}function z(e,t,i){e/=255,t/=255,i/=255;var n,o,r=Math.max(e,t,i),s=Math.min(e,t,i),a=(r+s)/2;if(r==s)n=o=0;else{var l=r-s;switch(o=a>.5?l/(2-r-s):l/(r+s),r){case e:n=(t-i)/l+(i>t?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return[n,o,a]}function U(e){if(e.variations)for(var t=e.variations,i=0;i<t.length;i++)if(t[i].value===currentThemeColor){if(t[i]["is-dark"]===!0)return"dark";if(t[i]["is-dark"]===!1)return"light"}return e["is-dark"]===!0?"dark":e["is-dark"]===!1?"light":""}function q(t,i){setTimeout(function(){try{e("#wsite-theme-"+t+"-file")[0].sheet.cssRules;var n=v.getCurrentStyles("links");if(n.visited==i)throw"Same Color";e("#themeStyle")[0].update("#secondlist .editable-text a:link{color:"+n.link+" !important;}"),re=0}catch(o){if(re++,10>re){if(null==i&&window.externalLibariesLoaded){var n=v.getCurrentStyles("links");i=n.visited}q(t,i)}else re=0}},250)}function G(e,t){var i=document.createElement("style");return i.innerHTML=t,i.id="wsite-theme-"+e+"-file",i.title="wsite-theme-css",i.rel="stylesheet",i.type="text/css",i}function Y(){var e=document.createElement("link"),t=n.chromeless?"social-icons-native-mobile.css":"//"+ASSETS_BASE+"/css/social-icons.css?buildTime="+window.buildTime;return e.href=t,e.media="screen,projection",e.rel="stylesheet",e.type="text/css",e}function X(){var t=J().current_item_id,i=e('[id="'+t+'"]'),n=i.data("saved-id"),o="pg"+currentPage;if(o!=n){var r=e('[id="'+o+'"]');i.length&&i.attr("id",i.data("saved-id")),r.length&&(r.data("saved-id",r.attr("id")),r.attr("id",t))}}function J(){var e=Z();return h.currentThemeData.page_type_templates[e]}function Q(e){se=e.page_layout||null}function Z(){var e=h.currentThemeData,t=currentPage.replace(/\/.*/,"");return se&&se in e.page_type_templates?se:u.getPageType(t,e,b.isMobileView)}function ee(){var t="";e.each(p.DESIGN_OPTIONS_SELECTORS,function(e,i){if(!e.match(/Color$/)){for(var n=i.split(/\s*,\s*/),o=0;o<n.length;o++)n[o]=".highlight-"+e+" "+n[o];i=n.join(", "),t+=i+" { "+ae+" } "}}),t+=".highlight-a .wsite-not-footer h2.wsite-content-title a,.highlight-a .wsite-not-footer .paragraph a,.highlight-a .wsite-not-footer blockquote a,.highlight-a .wsite-not-footer .blog-sidebar a,.highlight-a .wsite-not-footer .blog-comments a,.highlight-a .wsite-not-footer .blog-comments-bottom a { "+ae+" } ",t+=".highlight-footerA .wsite-footer h2.wsite-content-title a,.highlight-footerA .wsite-footer .paragraph a,.highlight-footerA .wsite-footer blockquote a { "+ae+" } ",e("head").append("<style>"+t+"</style>")}var te=o.module("themes");te.forceThemeRerender=!1,te.currentStyleNum=Math.floor(10000000001*Math.random());var ie="",ne="";te.on("start",function(){o.vent.on({forceThemeRerender:O,applyDesignStyle:te.applyDesignStyle,processPageDataHook:Q}),f.on({forceThemeRerender:O,changeTheme:R}),f.commands.setHandlers({forceThemeRerender:O,highlightText:te.highlightText,unhighlightText:te.unhighlightText,applyDesignStyle:te.applyDesignStyle,addBodyClass:te.addBodyClass,removeBodyClass:te.removeBodyClass,removeBodyClassesMatching:te.removeBodyClassesMatching,toggleBodyClass:te.toggleBodyClass}),f.reqres.setHandlers({"type:styles:get":te.getStylesByType,"font:family:default":te.getDefaultFont}),ie=e("body")[0].className,n.chromeless&&(ie+=" "+I.MOBILE_EDITOR_BODY_CLASS)}),te.addBodyClass=function(t){e("body").addClass(t)},te.removeBodyClassesMatching=function(t){var i=e("body"),n=i.attr("class").split(" ");n.forEach(function(e){e.match(t)&&i.removeClass(e)})},te.removeBodyClass=function(t){e("body").removeClass(t)},te.toggleBodyClass=function(t,i){e("body").toggleClass(t,i)},te.renderPage=function(i,n,r,s,a){function c(){var t=[];a&&(t=e("img").map(k.whenImageLoaded).get()),e.when.apply(e,t).always(function(){i&&i(),o.vent.trigger("pageRendered"),f.trigger("pageRendered")})}f.execute("setElementsPageType"),oe=s?s.icontentPageLink:"";var u=Z();return te.forceThemeRerender?(te.forceThemeRerender=!1,void te.renderTheme(!1,c,n,r,s)):t.isEmpty(h.currentThemeData)?void te.renderTheme(!1,c,n,r,s):"store"===s.kind||u!==window.currentPageType?(window.currentPageType=u,void te.renderTheme(!0,c,n,r,s)):(d.globalBeforeRender(),t.each([Weebly.siteContext,Weebly.pageContext],function(e){e._oldContext&&(e._oldContext.unrender(),e.renderAreas(e._oldContext.getAreas()),delete e._oldContext)}),d.globalAfterRender(),P(),L(),l.updateFooter(),window.disableFlyouts=!1,X(!0),refreshNavCondense(),_.repositionElements(),void c())},te.renderThemeFunc=function(i,o,r,a){if((Weebly.siteContext||Weebly.pageContext)&&Weebly.pageContext){e("body")[0].className=ie,n.chromeless&&e("body").addClass(I.MOBILE_EDITOR_BODY_CLASS),r&&"object"==typeof r&&h.setCurrentTheme(r.theme_id,b.isMobileView),t.each([Weebly.siteContext,Weebly.pageContext],function(e){var t=e._oldContext||e;t.unrender&&t.unrender(),delete e._oldContext}),!i&&a&&te.setThemeStyle(currentTheme,currentThemeColor,a,r),r&&"object"==typeof r&&h.setCurrentThemeData(r),f.execute("theme:upgrading",h.currentThemeData),window.navFlyoutMenu&&(window.disableFlyouts=!0,window.navFlyoutMenu.destroy()),t.each(h.currentThemeData.fonts,function(e){c.loadFont(e)}),window.currentPageType=Z();var l=h.currentThemeData.page_type_templates[window.currentPageType];M(l.body,h.currentThemeData).done(function(t){ne||(ne=e("body")[0].className,n.chromeless&&(ne+=" "+I.MOBILE_EDITOR_BODY_CLASS)),i?L():x(t).always(L),f.execute("mobile:updateAreaOptions"),A(t).done(o)});var d=U(h.currentThemeData);""!=d?B(d):l.needs_light_test&&(l.needs_light_test=!1,window.whenThemeCSSLoaded(function(){var e=V();e?l.body_attrs=l.body_attrs.replace(/wsite-theme-(light|dark)/,"wsite-theme-light"):l.body_attrs=l.body_attrs.replace(/wsite-theme-(light|dark)/,"wsite-theme-dark"),L(),f.execute("theme:light:set",e?"1":"0")})),Weebly.pageContext.is_blog&&s.init()}},te.renderTheme=t.throttle(te.renderThemeFunc,1500);var oe="";te.getPartials=K,te.processNavLinks=F,te.setThemeStyle=function(t,i,o,r){"myspace"==siteType&&(te.currentStyleNum=Math.floor(10000000001*Math.random())),n.chromeless&&o&&(o=o.replace(/\/\/cdn/g,"http://cdn"));var s=e("#wsite-base-style"),a=null!=r?r.base_stylesheet_url:window.currentThemeData.base_stylesheet_url,l=s.attr("href");a!==l&&s.attr("href",a);var c=e("style[title=wsite-theme-css], link[title=wsite-theme-css]"),d=G(t,o);e("head").append(d),c.remove();var u=e('link[href*="social-icons"]');r&&(!w.isUsingGlyphIcons(r)&&u.length?u.remove():w.isUsingGlyphIcons(r)&&!u.length&&e(d).before(Y())),Prototype.Browser.Gecko&&q(t)};var re=0,se=null;te.applyDesignStyle=function(t){var i=e("#designOptionsStyle");if(!i.length){var n=e("<style/>",{type:"text/css",id:"designOptionsStyle"});e("head").append(n),i=n}i[0].styleSheet?i[0].styleSheet.cssText+=t:i.html("").append(t),refreshNavCondense()};var ae="box-shadow: 0 0 1px 3px rgba(85, 185, 255, .6); border-radius: 3px;",le={"site-title":"siteTitle","paragraph-title":"header","paragraph-text":"global",links:"a","navigation-menu-text":"navMenu","image-captions":"imageCaptions","photo-gallery-captions":"galleryCaptions","slideshow-captions":"slideshowCaptions","phone-number-field":"phone","landing-page-headline":"headline","landing-page-sub-headline":"subHeadline",button:"button",blockquote:"blockquote","footer-paragraph-title":"footerHeader","footer-paragraph-text":"footerGlobal","footer-links":"footerA","footer-blockquote":"footerBlockquote","blog-post-title":"blogPostTitle",product:"productHighlight"},ce=!1;return te.highlightText=function(t){ce||(ee(),ce=!0),e("body").addClass("highlight-"+le[t])},te.unhighlightText=function(t){e("body").removeClass("highlight-"+le[t])},te.getStylesByType=function(i){var n=e(p.DESIGN_OPTIONS_SELECTORS[le[i]]).eq(0),o=n.children("font");if(0===n.length)return{};var r=window.getComputedStyle(n.get(0));return r=t.pick(r,"fontFamily","size","color","textTransform"),o.length>0&&(r.color=o.eq(0).css("color")),r},te.getDefaultFont=function(t){var i=e(p.DESIGN_OPTIONS_SELECTORS[le[t]]).eq(0),n=e("head"),o=n.find("style"),r=0,s=e("#designOptionsStyle"),r=o.index(s);s.remove();var a=i.css("fontFamily")||"";return r=0>=r?1:r-1,s.insertAfter(o.eq(r)),a.split(",")[0]},window.processNavLinks=te.processNavLinks,te}),_wAMD.define("site/editor/ajax/module",["jquery","underscore","site/editor/app","editor-site-shared/relay","editor-site-shared/ui/context","editor-site-shared/ajax/AjaxBaseModule","legacy/weebly_utils"],function(e,i,n,o,r,s){var a={},l=function(s){var a,l=function(e){i.each(e,function(e){u(window,e)})},c=function(e){return o.RPC.apply(o,arguments)},d=function(e,t){try{var n=Array.prototype.slice.call(arguments,2);i.isFunction(e[t])&&e[t].apply(this,n)}catch(o){if(i.isFunction(e.onException))e.onException.apply(this,n);else{var r=i.some(Ajax.Responders.responders,function(e){return i.isFunction(e.onException)?(e.onException.apply(this,n),!0):!1});if(!r)throw o}}},u=function(e,t){for(var n=t.split("."),o=n[0],r=0,s=n.length-1;s>r;r++)e[o]||(e[o]={}),e=e[o],o=n[r+1];e[o]=i.partial(c,t)},h=function(){a=window.Ajax.Request,window.Ajax.Request=function(e,t){o.ajax({parameters:t.parameters,asynchronous:t.asynchronous,bgRequest:t.bgRequest}).done(i.partial(d,t,"onSuccess")).fail(i.partial(d,t,"onFailure")).always(i.partial(d,t,"onComplete"))}},p=function(){window.Ajax.Request=a},f=function(e){var e=e||{};h(),l(e.rpc)};s.on("start",function(){s.listenTo(n.vent,{"site:initialized":f}),W_DEBUG&&e(document).ajaxError(function(e,t,i,n){if(404===t.status&&i.url.match(/^\/api\/JsonRPC\//)){var o=JSON.parse(i.data);console.warn("You may need to whitelist: `"+o.method+"`")}})}),s.on("stop",function(){p()}),s.Request=function(){return window.Ajax.Request.apply(this,arguments)},r.inSiteContext()&&(window.showError=function(e,t,i){o.execute("ajax:showError",e,t,i)},window.showRetriableError=function(e,i,n){o.execute("ajax:showRetriableError",e,t,dontTrack)},window.startWait=s.startWait=function(){o.execute("loading:start","AjaxUtilsStub::startWait")},window.endWait=s.endWait=function(){o.execute("loading:stop","AjaxUtilsStub::startWait")})};return a=n.module("Ajax",{moduleClass:s,define:l})}),_wAMD.define("editor-site-shared/build/elements/utils",["jquery","underscore","editor/app","site/editor/app","editor-site-shared/relay","legacy/weebly_element_utils","editor-site-shared/build/AreaUtils","editor-site-shared/ui/utils","site/editor/ajax/module","legacy/weebly_utils"],function(e,t,i,n,o,r,s,a,l){function c(t){var r=t[0].id.replace("inside_","");i.vent.trigger("editor:saving"),Weebly.Editor.RPC.Elements.removeElement(r).done(function(){i.vent.trigger("editor:saved").trigger("editor:element:delete:after"),n.vent.trigger("editor:element:delete:after"),o.trigger("editor:element:delete:after",r)}).fail(function(t){e(".inside-inactive").removeClass("inside-inactive"),window.showError(t)})}function d(t){return t.find(".wsite-multicol-col[id$=lhs], .weebly-splitpane-2, .wsite-multicol-col").filter(function(){return e(this).closest("li.inside").is(t)}).length>0}function u(e){return e.find(".platform-element-child").length>0}function h(e){return e.find("li.inside").length?!0:!1}function p(e){var t=e.find(".formlist").eq(0);if(t.length){var i=e.find(".columnlist").eq(0);return i.length?t.parents().length<i.parents().length:!0}return!1}var f={scriptSrc:[],scriptId:[],runIncludedScripts:function(i){if(i&&t.each(i,function(e,t){f.scriptId.push(t),f.scriptSrc.push(e)}),f.scriptId.length&&f.scriptSrc.length){var n,o=f.scriptId.pop(),r=f.scriptSrc.pop(),s=o.replace(/scriptInclude/,""),a=document.getElementById(o).contentWindow.document,l="";r.indexOf("<%HEAD%>")>-1&&(n=[],n=r.split("<%HEAD%>"),r=n[1],l=n[0]);var c="";r.indexOf("<%BODY%>")>-1&&(n=[],n=r.split("<%BODY%>"),r=n[1],c=n[0]);var d="<html><head> "+l+' </head><body style=" margin: 0px; padding: 0px; background-color: transparent;" onload="parent.resizeMe();'+c+'" onClick="parent.clickHandler(event, \''+s+"');\"> "+r+'<script type="text/javascript">parent.resizeMe("'+o+'");parent.setInterval("resizeMe(\''+o+"');\", 250);</script></body></html>";if(a.write(d),!e("#"+o+"-coverbox").length){var u=e("#"+o);e("<div/>",{id:o+"-coverbox"}).css({position:"absolute",overflow:"hidden",background:"transparent",top:"17px",left:"0px",height:u.css("height"),width:u.css("width")}).appendTo(u.parent())}f.runIncludedScripts()}},resizeMe:function(t){var i=e("#"+t);if(i.length){var o,r=i[0].contentWindow.document,s=e(r.body).find("iframe");if(o=s.length>0?s.first().height():r.body.offsetHeight,o!=i.css("height").replace(/px/,"")){i.css("height",o+"px");var a=e("#"+t+"-coverbox");a.length&&a.css("height",o+"px"),n.vent.trigger("scriptFrameResized")}}},deleteWeeblyElement:function(t,i,n){t=e(t),t.length&&(!h(t)||p(t)||d(t)||u(t)?i?c(t):window.showConfirm({title:window._W.utl("javascript.editor.build.elements.utils_3"),message:n||window._W.utl("javascript.editor.build.elements.utils_4"),okText:window._W.utl("javascript.editor.build.elements.utils_5"),onConfirm:function(){c(t)},onCancel:function(){t.removeClass("inside-inactive")}}):t.hasClass("wsite-multicol-li")?(window.showWarning(window._W.utl("javascript.editor.build.elements.utils_1"),{okButton:!0}),t.removeClass("inside-inactive")):window.showWarning(window._W.utl("javascript.editor.build.elements.utils_2"),{okButton:!0}))},moveElementObject:function(e,i,n,o,a,l,c){var d,u,h,p=r.getElementObject(e),f=p.elData,m=f.area,g=f.parentString;f.parent?h=r.getElementObject(f.parent.id):f.parentColumn&&(h=r.getElementObject(f.parentColumn.el.id));var v,b=s.getAreaInstanceFromParent(m.is_site_wide,m.type,m.name,m.parentString),y=s.getAreaInstanceFromParent(n.is_site_wide,n.type,n.name,n.parentString);b.sections&&(v=b.getSectionFromElementId(e).get("section_id"));var w;w=g&&h?r.getElementSiblings(g,h):b.getElements(v);var _=w.indexOf(p);w.splice(_,1);var E;i&&l?(l=r.getElementObject(l),E=r.getElementSiblings(i,l)):E=y.getElements(c),o?(d=r.getElementObject(o),u=E.indexOf(d),u+="after"===a?1:0):u=0,E.splice(u,0,p);var T=b.context,C=y.context;T!==C&&(delete T.elementsByID[p.id],C.elementsByID[p.id]=p,t.each(p.content_fields,function(e,t){delete T.contentFieldsByID[t],C.contentFieldsByID[t]=e}))}};return window.resizeMe=f.resizeMe,f}),_wAMD.define("tpl!elements/settings/external-settings.tpl",[],function(){return'{{#is_fullscreen}}\n	<div class="w-ui w-ui-topbar">\n		<ul class="tabs">\n			<li class="title-text">{{name}}</li>\n		</ul>\n		<ul class="right-buttons">\n			<li class="button-option btn-info fullscreen-close-btn">\n				<a><span>{{#tl}}templates.elements.settings.external-settings_2{{/tl}}</span></a>\n			</li>\n		</ul>\n	</div>\n{{/is_fullscreen}}\n<iframe src="{{built_url}}"></iframe>\n\n'}),_wAMD.define("element/editor/view/settings/SettingsIframeDialogView",["jquery","underscore","backbone-all","mustache","editor-site-shared/relay","editor/app","tpl!elements/settings/external-settings.tpl"],function(e,t,i,n,o,r,s){var a=i.Marionette.ItemView.extend({template:n.compile(s),dialog:function(){var e=this,t=e.calculateWidth(),i=e.calculateHeight(),n=!!e.externalConfig.modal;return{title:e.externalConfig.label,dialogClass:"flat flat-admin-dialog-small platform-iframe "+e.pageElementId,cancelX:!0,size:t+"x"+i,draggable:!n,modal:n}},className:function(){return this.model.get("external").fullscreen?"w-ui-full-screen":"dialog-iframe-wrap"},ui:{iframe:"iframe",screenCloseBtn:".fullscreen-close-btn"},events:{"click @ui.screenCloseBtn":"close"},calculateWidth:function(){var t=this.externalConfig.width||800;return t>e(window).width()?e(window).width():t},calculateHeight:function(){var t=this.externalConfig.height||800;return t>e(window).height()?e(window).height():t},buildURL:function(){var e=this.externalConfig.url;return e.indexOf(":jwt")>-1?e=e.replace(":jwt",this.token):e+=e.indexOf("?")>-1?"&jwt="+this.token:"?jwt="+this.token,e},templateHelpers:function(){var e=this;return{is_fullscreen:e.isFullscreen,built_url:function(){return e.buildURL()}}},initialize:function(e){var t=this;t.settings=e.settings,t.model=e.model,t.pageElementId=e.peid,t.token=e.token,t.externalConfig=t.model.get("external"),t.isFullscreen=!!t.externalConfig.fullscreen;var i=t.buildURL().split("/");t.receiverOrigin=i[0]+"//"+i[2],t.listenTo(o,{"editor:element:delete:after":function(e){t.pageElementId==e&&t.closeDialog()}})},receiveMessage:function(e){var t=this,i=e.data,n=i.action,o=i.data,r=t.ui.iframe;if(e.origin==t.receiverOrigin&&r[0].contentWindow==e.source){var s={"settings:update":function(e){t.saveSettings(e)},"dialog:close":function(){t.closeDialog()}};s.hasOwnProperty(n)&&s[n](o)}},saveSettings:function(e){var t=this;_W.Editor.RPC.PlatformElementInstance.updateSettings(t.pageElementId,e).done(function(e){e.success?(t.sendMessage("settings:updated",e.data),t.updateElement()):t.sendMessage("settings:invalid",e.data)}.bind(this)).fail(function(e){t.sendMessage("settings:invalid",e.data)}.bind(this))},sendMessage:function(e,t){var i=this,n=i.getTargetWindow();n&&n.postMessage({action:e,data:t},i.receiverOrigin)},getTargetWindow:function(){return this.ui.iframe.get(0).contentWindow},onRender:function(){var e=this;e.messageInitialized||e.initMessage()},onShow:function(){var t=this;e(".tabs li").click(function(e){t.trigger("dialog:close")})},initMessage:function(){var e=this;window.addEventListener("message",e.receiveMessage.bind(e)),e.ui.iframe.on("load",function(){e.sendMessage("settings:load",{settings:e.settings,config:{user_id:e.model.get("user_id"),site_id:e.model.get("site_id"),element_id:e.model.get("element_id")}},e.receiverOrigin)}),e.messageInitialized=!0},onClose:function(){var e=this;window.removeEventListener("message",e.receiveMessage),e.updateElement()},updateElement:function(){r.build.updateList(window.currentPage)},openDialog:function(){var e=this;e.isFullscreen?r.showScreen(e):r.showDialog(e)},closeDialog:function(){var e=this;e.isFullscreen?e.close():e.trigger("dialog:close")}});return a}),_wAMD.define("tpl!elements/settings/tooltip-platform-tutorial.tpl",[],function(){return'<div class="group group--flush group--hoverable">\n	<div class="group__item">\n		<button class="btn--block btn--secondary btn--borderless">\n			{{#tl}}platform.Editor.Element.Settings.TutorialButton{{/tl}}\n		</button>\n	</div>\n</div>'}),_wAMD.define("element/editor/view/settings/item-views/PlatformTutorialItemView",["jquery","backbone-all","mustache","tpl!elements/settings/tooltip-platform-tutorial.tpl"],function(e,t,i,n){var o=t.Marionette.ItemView.extend({template:i.compile(n),events:{click:"openTutorial"},openTutorial:function(){this.trigger("open:app:tutorial")}});return o}),_wAMD.define("tpl!editor/platform/app-tutorial-steps.tpl",[],function(){return"<div class='app-tutorial-introduction'><span>{{introduction}}</span></div>\n<section class='dialog__section--flush app-tutorial-step-section'>\n	<ul class=\"group\">\n		{{#steps}}\n			<li class=\"group__item app-tutorial-step\">\n				<span class='app-tutorial-step-title'>{{index}}</span>\n				<span class='app-tutorial-step-content'>{{{value}}}</span>\n			</li>\n		{{/steps}}\n	</ul>\n</section>\n"}),_wAMD.define("editor/platform/AppTutorialStepsView",["backbone-all","mustache","tpl!editor/platform/app-tutorial-steps.tpl"],function(e,t,i){var n=e.Marionette.ItemView.extend({template:t.compile(i),className:"app-tutorial-steps app-tutorial",templateHelpers:function(){var e=this;return{steps:function(){var t=e.model.get("content");return t.map(function(e,t){return{index:_W.utl("platform.Editor.Element.Settings.TutorialModal.StepLabel",t+1),value:e}})}}},onRender:function(){this.$el.find("a").attr("target","_blank")}});return n}),_wAMD.define("tpl!editor/platform/app-tutorial-video.tpl",[],function(){return'<div class="app-tutorial-introduction"><span>{{introduction}}</span></div>\n<div class="app-tutorial-video-placeholder">\n	<img src="https://img.youtube.com/vi/{{content}}/0.jpg" data-icon-before="play">\n</div>'}),_wAMD.define("editor/platform/AppTutorialVideoView",["backbone-all","mustache","ui-framework/js/components/dialog","tpl!editor/platform/app-tutorial-video.tpl"],function(e,t,i,n){var o=e.Marionette.ItemView.extend({template:t.compile(n),className:"app-tutorial-video app-tutorial",ui:{videoPlaceholder:".app-tutorial-video-placeholder"},events:{"click @ui.videoPlaceholder":"openAppVideoTutorial"},openAppVideoTutorial:function(){var e=this;this.currentElement=Weebly.Elements.currentElement,Weebly.Elements.currentElement=null;var t='<iframe class="app-tutorial-ytplayer" type="text/html" src="https://www.youtube.com/embed/'+this.model.get("content")+'?autoplay=1"></iframe>',n=new i({hasContentLegacyStyles:!1,hasProgressBar:!1,width:1180,height:600,isModal:!0,content:t,title:"Tutorial",wrapClassName:"ui-framework",onBack:function(){e.resetElement(),this.close()}});n.open()},resetElement:function(){Weebly.Elements.setCurrentElement(this.currentElement)}});return o}),_wAMD.define("tpl!editor/platform/app-tutorial-topics-item.tpl",[],function(){return'<button class="btn-control btn-control--borderless">\n	<span class="btn-control__label app-tutorial-topic-label">{{label}}</span>\n</button>'}),_wAMD.define("editor/platform/AppTutorialTopicsItemView",["backbone-all","mustache","ui-framework/js/components/combo-dialog","editor/platform/AppTutorialStepsView","editor/platform/AppTutorialVideoView","tpl!editor/platform/app-tutorial-topics-item.tpl"],function(e,t,i,n,o,r){var s=e.Marionette.ItemView.extend({template:t.compile(r),className:"group__item app-tutorial-topic",tagName:"li",events:{click:"openTopic"},tutorialTypes:{steps:n,video:o},initialize:function(){this.setTutorialView()},setTutorialView:function(){var e=this.tutorialTypes[this.model.get("type")];this.tutorialView=new e({model:this.model})},openTopic:function(){var e=new i.Panel({title:_W.utl("platform.Editor.Element.Settings.TutorialModal.Title"),hasContentPadding:!1,hasContentLegacyStyles:!1,forwardLink:"",backLink:{isDirectional:!0,text:""},content:this.tutorialView});this.trigger("open:app:topic",e)}});return s}),_wAMD.define("tpl!editor/platform/app-tutorial-topics.tpl",[],function(){return"<div class='app-tutorial-introduction'><span>{{introduction}}</span></div>\n<section class='dialog__section--flush app-tutorial-topics-section'>\n	<ul class=\"group app-tutorial-topics-container\"></ul>\n</section>\n"}),_wAMD.define("editor/platform/AppTutorialTopicsView",["backbone-all","mustache","editor/platform/AppTutorialTopicsItemView","tpl!editor/platform/app-tutorial-topics.tpl"],function(e,t,i,n){var o=e.Marionette.CompositeView.extend({template:t.compile(n),className:"app-tutorial-topics app-tutorial",itemView:i,itemViewContainer:".app-tutorial-topics-container",initialize:function(){this.collection=new e.Collection(this.model.get("content"))},onItemviewOpenAppTopic:function(e,t){this.dialog.pushPanel(t)}});return o}),_wAMD.define("editor/platform/AppTutorialModal",["jquery","backbone-all","mustache","ui-framework/js/components/combo-dialog","editor/platform/AppTutorialStepsView","editor/platform/AppTutorialVideoView","editor/platform/AppTutorialTopicsView"],function(e,t,i,n,o,r,s){var a={steps:o,video:r,topics:s},l=function(e){this.tutorial=e;var t=a[e.get("type")];this.tutorialView=new t({model:e}),this.setInitialPanel(),this.setDialog()};return l.prototype.setDialog=function(){this.dialog=new n({hasContentLegacyStyles:!1,hasProgressBar:!1,initialPanel:this.panel})},l.prototype.setInitialPanel=function(){this.panel=new n.Panel({title:_W.utl("platform.Editor.Element.Settings.TutorialModal.Title"),hasContentPadding:!1,hasContentLegacyStyles:!1,forwardLink:_W.utl("platform.Editor.Element.Settings.TutorialModal.Forward"),backLink:"",onForward:function(){this.close()},content:this.tutorialView})},l.prototype.getDialog=function(){return this.dialog},l}),_wAMD.define("element/editor/view/settings/PlatformElementOptionsView",["underscore","jquery","backbone-all","mustache","site/editor/app","element/editor/view/settings/BaseElementOptionsView","element/editor/view/settings/item-views/ButtonItemView","element/editor/view/settings/SettingsIframeDialogView","element/editor/view/settings/item-views/PlatformTutorialItemView","editor/platform/AppTutorialModal"],function(e,t,i,n,o,r,s,a,l,c){var d=r.extend({initialize:function(e){r.prototype.initialize.call(this);var t=this;t.peid=e.peid,t.tutorial=e.tutorial,t.model.get("external")&&(t.externalView=new s({model:t.model,isExternal:!0,peid:t.peid,parentView:t})),t.listenTo(t.collection,{change:t.savePlatformOptions}),t.initGroups(),t.renderTutorial()},savePlatformOptions:function(){var e=this;Weebly.Editor.RPC.PlatformElementInstance.updateSettings(e.peid,e.prepareSettingsSave()).done(function(e){if(e.success){var t=Weebly.Elements.currentElement;Weebly.Elements.currentElement=null,Relay.request("page:navigate",window.currentPage).then(function(){Weebly.Elements.setCurrentElement(t)})}})},prepareSettingsSave:function(){var t=this,i={};return t.collection.each(function(t){e.each(t.get("properties"),function(e){var t=e["default"]||null,n="undefined"==typeof e.value?t:e.value;i[e.name]=n})}),i},openSettingsIframe:function(){var e=this;o.vent.trigger("element:options:dialog:close"),Relay.execute("platform:element:setting:external:open",e.model.toJSON(),e.prepareSettingsSave(),e.peid)},checkHasNonHiddenSetting:function(e){if(!e.length)return!1;for(var t=0;t<e.length;t++)if(!e[t].get("hidden")){if("group"!==e[t].get("type"))return!0;if(e[t].get("properties")&&e[t].get("properties").length)for(var i=e[t].get("properties"),n=0;n<i.length;n++)if(!i[n].hidden)return!0}return!1},displayIframe:function(){var e=this,t=!e.hasSettings&&e.model.has("external");return t},renderTutorial:function(){var e=this;e.tutorial&&e.initialPane&&(e.tutorialButton=new l({model:new i.Model(e.tutorial)}),this.listenTo(e.tutorialButton,"open:app:tutorial",e.openAppTutorial),e.initialPane.$itemViewContainer.append(e.tutorialButton.render().el),e.baseInitialPaneOnRender=e.initialPane.onRender,e.initialPane.onRender=function(){e.baseInitialPaneOnRender.call(this),e.tutorialButton.delegateEvents(),this.$itemViewContainer.append(e.tutorialButton.render().el)},e.tutorial.element_autopop===!0&&this.autopopTutorial())},openAppTutorial:function(e){var t=new c(new i.Model(this.tutorial)),n={};e&&(n.outerClassName="dialog__overlay is-static"),this.container.currentPanel.pushDialog(t.getDialog(),n)},autopopTutorial:function(){var e=this;this.openAppTutorial(!0),this.tutorial.element_autopop=!1,_W.Editor.RPC.PlatformElementInstance.completeTutorial(e.model.get("platform_element_id"))}});return d}),_wAMD.define("element/editor/view/settings/ElementOptionsView",["underscore","jquery","backbone-all","editor/app","mustache","element/editor/view/settings/BaseElementOptionsView","element/editor/view/settings/utils","editor-site-shared/ui/constants"],function(e,t,i,n,o,r,s,a){var l=r.extend({initialize:function(e){var t=this;r.prototype.initialize.call(this),n.reqres.setHandlers({"element:options:get:ucfpid":function(e){
return s.getPropertyByKey(t.collection,"ucfpid",e)}}),n.vent.on({"element:options:set:ucfpid":function(e,i,n){s.setPropertyByKey(t.collection,"ucfpid",e,i),n&&n()}}),t.initPropertyValues(),t.initGroups()},initPropertyValues:function(){var t=this,i=function(t){var i,n=t.cfpid;t.ucfpid,t.ucfid;if(t.values){var o=e.filter(t.values,function(e){return e.trigger});if(o.length>0){var r=t["default"];e.each(o,function(e){var i=e.trigger,n=i.cfpid,o=Weebly.Elements.uproperty.properties[n].property_result||i["default"];i.ucfpid=Weebly.Elements.uproperty.properties[n].ucfpid,i.ucfid=Weebly.Elements.uproperty.ucfid,"int"===i.type&&(o=parseInt(o)||t["default"]||0),i.value=o,o!==i["default"]&&(r=e.value)}),t.value=r}}n&&"undefined"!=typeof Weebly.Elements.uproperty.properties[n]&&(i=Weebly.Elements.uproperty.properties[n].property_result||t["default"],t.ucfpid=Weebly.Elements.uproperty.properties[n].ucfpid,e.contains(a.IMAGE_LINK_LIGHTBOX_CFPIDS,n)&&(t.ucfpid+="-"+t.name),"int"===t.type&&(i=parseInt(i)||t["default"]||0),t.value=i),t.ucfid=Weebly.Elements.uproperty.ucfid};e.each(t.collection.models,function(e){s.propertyIterator(e,i)})},prepareSettingsSave:function(){var t=this,i={};return t.collection.each(function(t){e.each(t.get("properties"),function(e){var t=e["default"]||null,n="undefined"==typeof e.value?t:e.value;i[e.name]=n})}),i}});return l}),_wAMD.define("site/editor/ui/images/tooltip",["jquery"],function(e){function t(e){var t=r?-30:10;i.css({top:e.pageY+t+"px",left:e.pageX+10+"px"})}var i,n={},o=!0,r=!1;return n.init=function(n,s,a){function l(e){o&&(u?e&&t(e):(t(e),i.html(s).show(),u=!0))}function c(){u&&(i.hide(),u=!1)}function d(){c(),n.off(h),i.remove(),i=null}n=e(n),r=!!a;var u=!1;i||(i=e("<div/>",{"class":"ext-tooltip",css:{position:"absolute",display:"none"}}),e("body").append(i));var h={"mouseover mousemove":l,mouseout:c};return n.on(h),d},n.enable=function(){o=!0},n.disable=function(){n.hide(),o=!1},n.hide=function(){i&&i.hide()},n}),_wAMD.define("util/jquery-ui-resizable",["jquery","jquery-ui/resizable"],function(e){e.widget("ui.resizable",e.ui.resizable,{_mouseCapture:function(t){var i,n=!1;for(i in this.handles)this.handles[i].each(function(i,o){(o===t.target||e.contains(o,t.target))&&(n=!0)});return!this.options.disabled&&n}})}),_wAMD.define("site/editor/ui/images/resizing",["jquery","site/editor/app","site/editor/ui/images/tooltip","site/editor/ui/images/utils","site/editor/ajax/module","editor-site-shared/relay","legacy/weebly_element_utils","element/editor/view/settings/BaseElementOptionsView","util/jquery-ui-resizable"],function(e,t,i,n,o,r,s,a){function l(e){var t=e.attr("style");return t&&null!==t.match(/(^|[^\w-])width:/)?!0:!1}function c(e,t){return t.replace(/margin:([^;!]+)(!important)?(;|$)/,"margin:$1 !important$3")}function d(e,t){return t.replace(/margin:([^;!]+)(!important)?(;|$)/,"margin:$1$3")}function u(e,t){Weebly.Elements.disableElementOptions=!0,a.isElementSettingsOpen()&&Weebly.Elements.hideElementSettings(),Weebly.Elements.selectElement(t.element.closest(".element")[0]),g.resizing=!0,i.disable(),h(t.originalElement,t.element)}function h(e,t){var i=t.parentsUntil("div").last().parent().width(),n=e.outerWidth(!0)-e.width()+(t.outerWidth(!0)-t.width()),o=i-n;return e.resizable("option","maxWidth",o),o}function p(){m&&(m(),m=null)}function f(){var t=e(this);if(t.data("ui-resizable")){var i=h(t,t.parent()),n={width:"",height:""};t.css(n).css("max-width",i+"px").closest(".ui-wrapper").css(n)}}var m,g={resizing:!1},v=!0,b=100;return g.init=function(o,a,d){function h(){var t=a.attr("src");if(!a.length||a.data("ui-resizable")||a.width()<=0||a.height()<=0||!a[0].complete||!t.match(/^http:\/\/[^\.]+\.weebly\.com\/uploads\//)&&!t.match(/\/uploads\//)||a.hasClass("product-image")&&1===e(o).down(".product-old").length)return!1;var n=a.closest(".element");return l(n)&&n.css("width","auto"),a.resizable({handles:"se",aspectRatio:!0,minWidth:30,minHeight:30,maxWidth:1e3,maxHeight:2e3,start:u,stop:f,resize:y}).css({margin:"0","max-width":"100%"}).attr("style",c).closest(".ui-wrapper").css({display:"inline-block",overflow:"visible","vertical-align":a.css("vertical-align")}),g.updateElementWidth(a),S=a.siblings(".ui-resizable-handle").addClass("imageresizer").hide(),i.init(S,window._W.utl("javascript.editor.build.images.resizing_1")),!0}function f(e,n){e.originalEvent.originalEvent.stopImmediatePropagation(),i.enable();var l=o[0].id,c=s.getContentFieldProperty(l,"<!DATA!>"),d=JSON.parse(c.property_result),u=Math.round(n.size.width-a.outerWidth(!0)+a.width()),h=Math.round(n.size.height-a.outerHeight(!0)+a.height());r.execute("loading:start","SiteEditorUiImagesResizing::imageResize"),Weebly.Editor.RPC.ImageEditor.resizeImageElement(l,d,u,h).done(function(e){var i=g.updateElementWidth(a);null!==i&&(u=i),s.setContentFieldProperty(l,"<!SRC!>",e.image.publishedUrl),s.setContentFieldProperty(l,"<!DATA!>",JSON.stringify(e)),s.setContentFieldProperty(l,"<!WIDTH!>",u),s.setContentFieldProperty(l,"<!MAXWIDTH!>","100%"),Weebly.Elements.unselectElement(),window.updateImageElement(e,l),r.execute("loading:stop","SiteEditorUiImagesResizing::imageResize"),t.vent.trigger("imageResizeStopped"),t.vent.trigger("editor:elements:changed"),g.resizing=!1,Weebly.Elements.disableElementOptions=!1})}function y(){t.vent.trigger("editor:element:resize"),g.updateElementWidth(a)}function w(){return a.data("ui-resizable")?void(!I&&S&&v&&!n.isInitialImage(a[0])&&d()&&(p(),S.show(),I=!0,m=_)):void h()}function _(){I&&S&&(S.hide(),I=!1)}function E(){g.destroy(a),_(),o.off(O)}function T(){k++,w()}function C(){if(a.data("ui-resizable")){var e=k;setTimeout(function(){e!==k||o.is(Weebly.Elements.currentElement)||_()},b)}}var S,D={show:w,hide:_,destroy:E},I=!1,k=0,O={mouseover:T,mouseout:C};return o.on(O),h()?D:D},g.updateElementWidth=function(e){var t=e.closest(".element");if(!l(t))return null;e.data("ui-resizable")&&(e=e.closest(".ui-wrapper"));var i=e.outerWidth(!0)+"px";return t.css("width",i),i},g.destroy=function(e){e.data("ui-resizable")&&e.attr("style",d).css("margin",e.parent().css("margin")).resizable("destroy").css({width:"",height:""})},g.disable=function(){p(),v=!1},g.enable=function(){v=!0},g.unsetDimensions=function(t){return t instanceof e||(t=e("body")),t.find(".ui-wrapper").children("img").each(f)},g}),_wAMD.define("site/editor/ui/images/managers",["underscore"],function(e){var t={},i={};return t.set=function(e,t){i[e]=t},t.get=function(e){return i[e]},t.each=function(t){e.each(i,t)},t.clear=function(){e.each(i,function(e,t){delete i[t]})},t}),_wAMD.define("site/editor/ui/images/controls",["underscore","site/editor/ui/images/resizing","site/editor/ui/images/managers","site/editor/ui/images/tooltip","site/editor/image-editor/module","legacy/weebly_element_utils","editor-site-shared/image-editor/utils"],function(e,t,i,n,o,r,s){var a={},l=!0,c={};return a.isControlsEnabled=function(){return l},a.init=function(i,a,d){function u(e,t){l&&!t&&p.show(e)}function h(e){e||p.hide()}c[i[0].id]=function(){n.hide(),Weebly.Elements.unselectElement();var t=d?d():{};if(!t.image){t.image=s.getEditData(a[0]);var l=r.getContentFieldProperty(i[0].id,"<!ATTRIBUTION!>");if(l){var c=l.property_result;if(c){var u=JSON.parse(c);e.isArray(u)&&(u=u[0]),u&&(t.image.creator=u.author,t.image.pageUrl=u.url)}}}var h={mode:"element",imageEditorData:t,element:{ucfid:i[0].id}};o.edit(h).done(function(e){window.updateImageElement(e,h.element.ucfid)})};var p=t.init(i,a,function(){return l});return{show:u,hide:h,destroy:p.destroy}},a.show=function(e,t){var n=i.get(e.id);n&&n.showControls(t)},a.hide=function(e,t){var n=i.get(e.id);n&&n.hideControls(t)},a.hideAll=function(e){i.each(function(t){t.hideControls&&t.hideControls(e)})},a.disable=function(e){l=!1,a.hideAll(e)},a.enable=function(){l=!0},a.startImageEditor=function(e){var t="string"==typeof e?e:e.id;c[t]()},a}),_wAMD.define("site/editor/ui/DeadClickSpotlight",["jquery","underscore","site/editor/app","editor-site-shared/relay","site/editor/ui/Spotlight"],function(e,t,i,n,o){var r=t.extend({},Backbone.Events,{show:function(i){return i=t.extend({},{opacity:"0",zIndex:13,element:e()},i),i.element.length?(this.destroy(),this.instance=new o(i),this.instance.show(),this.setElement(),this.bindEvents(),this.pollHeight(),this.instance):void 0},hide:function(){this.instance&&this.instance.hide()},bindEvents:function(){this.instance.container.on("click.spotlight",this.destroy.bind(this)),this.listenTo(i.vent,"element:options:dialog:close",this.destroy),this.listenTo(n,"site:overlays:hide",this.destroy)},setElement:function(){this.$el=this.instance.elements[0]},pollHeight:function(){var e=this.$el.outerHeight();this.interval=setInterval(function(){var t=this.$el.outerHeight();t!==e&&(e=t,this.instance.position())}.bind(this),200)},destroy:function(){this.instance&&(clearInterval(this.interval),this.stopListening(),this.instance.container.off("click.spotlight"),this.instance.destroy(),delete this.$el,delete this.instance,this.trigger("destroy"))}});return r}),_wAMD.define("site/editor/ui/ElementSpotlight",["jquery","w-global","site/editor/app","editor-site-shared/relay","site/editor/ui/Spotlight"],function(e,t,i,n,o){function r(i){i=i||{};var n=t.view.isMobileView;this.container=e(i.container).addClass("weebly-spotlighted").css("position","relative").append(this.cover=e("<div class='wsite-spotlight-cover'><div class='wsite-spotlight-cover-inner'></div></div>")),s=void 0!==i.paddingHeight?i.paddingHeight:n?10:15,a=void 0!==i.paddingWidth?i.paddingWidth:n?5:15,this.options=i,i.clickEditing!==!1&&this.cover.css("cursor","pointer").on("click",function(t){e(t.target).parents(".platform-element-contents").each(function(t,i){e(this).children(".platform-element-overlay").addClass("hidden-overlay")}),this.open()}.bind(this)),this.spotlight=new o({parentElement:"#_editor-ui-spotlight",element:this.container,paddingHeight:s,paddingWidth:a,roundedCorners:!0,zIndex:n?12:11,interval:!0,onReposition:this.updateControls.bind(this)}),this.isRefresh=!1,i.uid&&r.current&&r.current.options.uid==i.uid&&setTimeout(this.open.bind(this),0)}var s=15,a=15;return r.isOutside=function(i){return t.ElementSpotlight.current&&!e(i).closest(t.ElementSpotlight.current.container).length},r.isCurrentContainer=function(e){return t.ElementSpotlight.current&&t.ElementSpotlight.current.container.is(e)},r.getCurrent=function(){return t.ElementSpotlight.current},r.prototype={open:function(){if(!this.isOpen){var e=r.current;if(e){var t=this.container.closest(e.container).length;this.isRefresh=this.options.uid&&e.options.uid&&this.options.uid==e.options.uid,e.isRefresh=this.isRefresh,e.close(),t&&(e.disableCover(),this.disabledCoverExpose=e)}this.isOpen=!0,this.cover.hide(),this.spotlight.show(),this.updateControls(),r.current=this,this.options.onOpen&&this.options.onOpen();var o={id:this.options.element?this.options.element.id:null,name:this.options.area?this.options.area.name:null};i.vent.trigger("editor:spotlight:open",o),n.trigger("editor:spotlight:open",o),this.isRefresh=!1,this.options.elementsPage?n.execute("elementsPage",this.options.elementsPage):n.execute("setElementsPageType"),n.execute("initDragging")}},resize:function(){this.spotlight.reposition()},updateControls:function(){var i=t.view.isMobileView,n=e("#_editor-ui-spotlight");if(this.controls||(this.controls=e("<div class='spotlight-controls w-ui'><div class='spotlight-controls-inner'></div></div>").appendTo(n)),this.isOpen){var o=n.offset(),r=this.container.offset();this.controls.css({top:r.top-o.top+n.scrollTop()-s,left:r.left-o.left+n.scrollLeft()-a,width:this.container.width()+2*a,zIndex:i?13:21}).show()}else this.controls.hide()},getControlsInner:function(){return this.controls.find("> *")},close:function(){this.isOpen&&(this.isOpen=!1,this.cover.show(),this.spotlight.hide(),this.controls&&this.controls.hide(),delete r.current,this.disabledCoverExpose&&this.disabledCoverExpose.enableCover(),this.container.parents(".platform-element-contents").each(function(t,i){e(this).children(".platform-element-overlay").removeClass("hidden-overlay")}),this.options.onClose&&this.options.onClose(),i.vent.trigger("editor:spotlight:close"),n.trigger("editor:spotlight:close"),n.execute("setElementsPageType"),n.execute("initDragging"))},destroy:function(){this.spotlight&&this.spotlight.destroy(),this.controls&&this.controls.remove(),this.cover.remove()},disableCover:function(){this.cover.hide()},enableCover:function(){this.isOpen||this.cover.show()}},n.commands.setHandlers({closeCurrentSpotlight:function(){r.current&&r.current.close()}}),t.ElementSpotlight=r,r}),_wAMD.define("element/editor/utils/ElementPropertyConverter",["underscore","w-global","site/editor/ui/images/utils"],function(e,t,i){var n={identifyType:function(e){var t=e.options,i=t.toLowerCase(),n=e.result;if(i.indexOf("/")>0)return this.parseSelectType(t,n);if("%%CAPTION%%"===e.property)return{type:"text"};var o="1"===e.hidden;return this.getTypeByOption(i,o)},convertProperty:function(t,i){var n=e.extend({label:i.title,name:i.title.replace(/\s/g,"_").toLowerCase(),cfpid:i.cfpid,"default":"",legacy:!0},t);return"text"===n.type&&(n={label:i.title,type:"group",properties:[n]}),n},parseSelectType:function(t,i){var n=t.split("/"),o="",r=i.split("/"),s=/^(?=.*left)(?=.*center)(?=.*right).*$/;return s.test(t.toLowerCase())?(o="align",n=e.map(n,function(e){return e.toLowerCase()})):o="select",{values:this.getValuesList(n,r),type:o}},getValuesList:function(t,i){return t.length!==i.length?[]:e.map(t,function(e,t){return{name:e,value:i[t]}})},getTypeByOption:function(e,i){var n={};switch(e){case"%%number%%":n.type="int";break;case"%%fileupload%%":n={type:"button",label:t.utl("javascript.element.editor.utils.replace_image"),arguments:["this","image","250","ucfid","ucfpid"],action:"menuBarChooseImage"};break;case"%%fileuploadaudio%%":n={type:"button",label:t.utl("javascript.element.editor.utils.upload_audio"),action:"determineUpload",arguments:["audio","","ucfid","ucfpid"]};break;case"%%link%%":n={type:"link",arguments:["ucfid","ucfpid"]};break;default:if(i)return!1;n.type="string"}return n}},o={manifest:"1",version:"1.0.0",elements:[{name:"",path:"files",version:"1.0.0",settings:{config:{autopopup:!1},properties:[{label:"",type:"group",properties:[]}]}}]},r={label:t.utl("javascript.element.editor.utils.edit_image"),name:"editImage",type:"button",action:"require",requireContext:"site/editor/ui/images/controls",requireFunction:"startImageEditor",arguments:["%%ELEMENTID%%"]},s={convertToManifest:function(t,s,a){var l=JSON.parse(JSON.stringify(o)),c=l.elements[0],d=c.settings.properties[0].properties;return c.name=s.replace("<br/>"," "),t=e.sortBy(t,function(){return parseInt(t.displayOrder)}),e.each(t,function(e){var t=n.identifyType(e);if(t){var i=n.convertProperty(t,e);"button"===i.type?c.settings.properties.unshift(i):d.push(i)}}),i.isImageElement(a)&&c.settings.properties.unshift(r),d.length>0?l:!1}};return s}),_wAMD.define("site/editor/ui/weebly_elements",["jquery","underscore","backbone","config","editor/app","site/editor/app","element/editor/view/settings/PlatformElementOptionsView","element/editor/view/settings/ElementOptionsView","element/editor/model/ElementSettingModel","site/editor/ui/images/controls","site/editor/ui/images/utils","legacy/weebly_element_utils","editor-site-shared/build/elements/Definitions","editor/build/ui/weebly_view","site/editor/ajax/module","site/editor/ui/DeadClickSpotlight","site/editor/ui/ElementSpotlight","editor-site-shared/relay","legacy/slideshow-jq","editor-site-shared/ui/constants","site/editor/commerce/module","element/editor/view/settings/BaseElementOptionsView","element/editor/utils/ElementPropertyConverter","legacy/weebly_utils"],function(jQuery,_,Backbone,Config,editorApp,frameApp,PlatformElementOptionsView,ElementOptionsView,ElementSettingModel,ImageControls,ImageUtils,ElementUtils,Definitions,View,AjaxModule,DeadClickSpotlight,ElementSpotlight,Relay,Slideshow,UICONST,CommerceModule,BaseElementOptionsView,ElementPropertyConverter){function validateFunction(){window.validateOK()}function refreshCustomHtml(e,t){var i=$("custom-frame-"+e);t.match(/script/i)&&i.src?i.src=i.src+"&w="+(new Date).getTime():i.contentWindow.setContent(t)}function hideNonMatchingModeProperties(e){var t=CommerceModule.storefrontSettings.get("element_legacy_mode"),i=function(e){_.each(e,function(e){_.has(e,"legacyMode")&&e.legacyMode!==t&&(e.hidden=!0),e.properties&&i(e.properties)})};return _.each(e.manifest.elements,function(e){e.settings.properties&&i(e.settings.properties)}),e}var exports={Version:"0.1",Author:"David Rusenko",Company:"Weebly, Inc.",propertyContainer:null,currentElement:null,currentValidateFunction:null,currentSaveValidateFunction:null,currentCustomProperties:[],editing:null,customHTML:[],upload:0,skipRerender:!1,isFormDirty:!1,unsyncedProperties:{},useNewSettingsPopup:!1,init:function(e){this.propertyContainer=e.propertyContainer},selectElement:function(e,t){var i,n=this;e=$(e),(e!==this.currentElement||t)&&jQuery.when(exports.unselectElement()).always(function(){if(n.isSelectableElement(e)){n.currentElement=e,n.currentCustomProperties=[];var t=$(e.id+"-form-parent");t||Config.chromeless||(i=jQuery(e).closest("li.inside"),i.addClass("inside-active"),i.parents("li.inside").addClass("inside-child-active")),n.generateProperties(e),ImageControls.show(e)}})},isPlatformElement:function(){return null!==this.currentElement&&this.currentElement.dataset&&"string"==typeof this.currentElement.dataset.platformPeid},unselectElement:function(e){var t;if(this.currentElement){var i=jQuery(this.currentElement).closest("li.inside");i.removeClass("inside-active"),i.parents("li.inside").removeClass("inside-child-active");var n=ElementUtils.getElementObject(exports.currentElement.up("li.inside"));if(n&&n.unselect&&n.unselect(),ImageControls.hide(this.currentElement),this.editing&&exports.hideCustomHTML(this.ucfid,this.editing,this.uproperty.properties[this.editing].ucfpid),frameApp.vent.trigger("editor:elements:unselect",this.idfield.eid),"36391960"==this.idfield.eid){var o;"text"==this.uproperty.properties[96630555].property_result?o="TextOnly":"image"==this.uproperty.properties[96630555].property_result?o="ImageOnly":"text_image"==this.uproperty.properties[96630555].property_result&&(o="TextAndImage"),new Ajax.Request(AjaxModule.ajax,{parameters:{pos:"saveadsense",cookie:document.cookie,cfid:this.uproperty.properties.cfid,backgroundColor:this.uproperty.properties[53687540].property_result,borderColor:this.uproperty.properties[52715841].property_result,textColor:this.uproperty.properties[60388297].property_result,titleColor:this.uproperty.properties[10290183].property_result,urlColor:this.uproperty.properties[34189825].property_result,adUnitType:o,layout:this.uproperty.properties[81070942].property_result,elementid:this.idfield.id},onFailure:AjaxModule.errFunc,bgRequest:!0})}if(Relay.execute("linker:close"),jQuery(document.activeElement).blur(),""==this.currentSaveValidateFunction||this.closeOnValidate||!this.textChange&&!this.mapChange){this.mapChange=null,this.closeOnValidate=null;var r=this,s=this.currentElement.id,a=r.isFormDirty;t=Relay.request("dontSave:get").then(function(t){var i=null;return e||t||s===window.xhrUploading?Relay.execute("dontSave:set",null):i=r.saveProperties(),i}).always(function(){a&&(r.isFormDirty=!1,r.continueOnChange()),r.currentElement=null,r.currentValidateFunction=null,r.currentSaveValidateFunction=null,ElementUtils.repositionElements()}),(BaseElementOptionsView.isElementSettingsOpen()||r.useNewSettingsPopup)&&r.hideElementSettings()}else this.textChange=null,this.mapChange=null,validateFunction(),this.closeOnValidate=1}return this.isFormDirty=!1,t},setCurrentElement:function(e){if(e!=this.currentElement){var t=this;jQuery.when(exports.unselectElement()).always(function(){t.currentElement=e,t.currentCustomProperties=[],t.extractElementProperties(e)&&Definitions.fetchDefinition(t.idfield.eid,function(e){exports.handlerGenerateProperties({eid:t.idfield.eid,ucfid:t.ucfid,userProperties:t.uproperty,elementDef:e,render:!1})},!0)})}},generateProperties:function(e){if(this.currentElement&&this.extractElementProperties(e)){var t=this,i=jQuery(e);if(i.attr("data-platform-peid")){var n=i.children(".platform-element-contents").eq(0);if(n&&n.attr("data-platform-element-id")){var o=n.attr("data-platform-element-id").split("-")[0];Relay.request("platform:element:isDisconnected",o).done(function(e){e===!0?t.unselectElement(!0):Definitions.fetchDefinition(t.idfield.eid,function(e){exports.handlerGenerateProperties({eid:t.idfield.eid,ucfid:t.ucfid,userProperties:t.uproperty,elementDef:e,render:!0})},!0)})}}else Definitions.fetchDefinition(t.idfield.eid,function(e){exports.handlerGenerateProperties({eid:t.idfield.eid,ucfid:t.ucfid,userProperties:t.uproperty,elementDef:e,render:!0})},!0)}},_setValidateFunctions:function(e,t,i,n){var o="";this.useNewSettingsPopup&&(o="platform-settings-tooltip-"),this.currentContentFieldDef=e.contentfields[i],this.currentValidateFunction=this.currentContentFieldDef.elementonChangeJs.replace(new RegExp("%%ELEMENTID%%","gi"),t),this.currentSaveValidateFunction=this.currentContentFieldDef.elementJs.replace(new RegExp("%%ELEMENTID%%","gi"),t);for(var r=e.contentfields[i].contentFieldProperties,s=0;s<r.length;s++){var a=r[s],l=a.cfpid,c=n.properties[l];""!=a.referenceProperty&&(this.currentValidateFunction=this.currentValidateFunction.replace(new RegExp(a.referenceProperty,"gi"),o+c.ucfpid),this.currentSaveValidateFunction=this.currentSaveValidateFunction.replace(new RegExp(a.referenceProperty,"gi"),o+c.ucfpid))}},handlerGenerateProperties:function(options){var elementDef=options.elementDef,ucfid=options.ucfid,userProperties=options.userProperties,render=options.render||!1,hiddenProperties=[];if(this.currentElement){"5699726"===elementDef.elementid&&(elementDef=hideNonMatchingModeProperties(elementDef)),this.elementDef=elementDef;var cfid=userProperties.cfid;this._setValidateFunctions(elementDef,ucfid,cfid,userProperties);var allProperties=elementDef.contentfields[cfid].contentFieldProperties;if(render){var visibleProperties=jQuery.grep(allProperties,function(e){return 1!=e.hidden});if(visibleProperties.length){""!=this.currentValidateFunction&&(this.currentValidateFunction=eval("("+this.currentValidateFunction+")")),""!=this.currentSaveValidateFunction&&(validateFunction=eval("("+this.currentSaveValidateFunction+")"));var isEmptyImage=!1;if(ImageUtils.isImageElement(elementDef.elementid)){var srcProperty=ElementUtils.getContentFieldProperty(this.ucfid,"<!SRC!>");srcProperty&&(isEmptyImage=!!/\/na\.jpg$/.test(srcProperty.property_result)||!!/\/na\.png$/.test(srcProperty.property_result))}var isEmptyProductsElement=this.isEmptyProductsElement();this.disableElementOptions||isEmptyProductsElement||isEmptyImage&&"61719152"!==elementDef.elementid||this.renderElementOptions(elementDef,visibleProperties,allProperties,userProperties)}DeadClickSpotlight.show({element:jQuery("#"+ucfid).closest("li.inside")}),ElementUtils.repositionElements()}}},renderElementOptions:function(e,t,i,n){editorApp.vent.trigger("editor:element:props:show");var o="%%ELEMENTSETTINGS%%"===t.first().property,r=e.manifest;o?this.showPlatformElementOptions(this.currentElement):(jQuery.isEmptyObject(r)&&(r=ElementPropertyConverter.convertToManifest(this.currentContentFieldDef.contentFieldProperties,e.displayname,e.elementid)),r&&this.showElementOptions(this.currentElement,r))},showElementOptions:function(e,t){if(!jQuery.isEmptyObject(t)){window.closePlatformSettingsPanel(),Weebly.Elements.currentElement=e;var i=jQuery(e).attr("id"),n=t.elements[0];new ElementOptionsView({collection:new Backbone.Collection(n.settings.properties,{model:ElementSettingModel}),model:new Backbone.Model(n.settings.config||{}),elementId:i,name:n.name,description:n.settings.description,element:e}),frameApp.vent.trigger("editor:elements:options:show",this.idfield.eid,this.uproperty.cfid,this.ucfid)}},showPlatformElementOptions:function(e){window.closePlatformSettingsPanel(),exports.currentElement=e;var t=jQuery("#"+e.id).closest(".element"),i=t.data("platform-peid");Weebly.Editor.RPC.PlatformElementInstance.getEditorSettings(i).done(function(t){var n=t.data,o=n?n.properties||[]:[],r=n?n.config||{}:{},s=n?n.config.name:"",a=n?n.tutorial:null,l=n?n.description:null;new PlatformElementOptionsView({collection:new Backbone.Collection(o,{model:ElementSettingModel}),model:new Backbone.Model(r||{}),name:s,peid:i,element:e,tutorial:a,description:l})})},getCurrentImageElement:function(){if(this.currentElement){var e={};return e="IMG"==this.currentElement.tagName?$(this.ucfid+""):this.currentElement.getElementsByTagName("IMG")[0]}},saveProperties:function(e){if(!Config.chromeless&&this.currentElement){var t=exports.elementDef.elementid,i=this.ucfid,n=JSON.stringify(this.pfield.properties),o=window.toJsonString(this.idfield);if(e){var r=ElementUtils.getElementObject(this.idfield.id);r.rerenderContentField(this.uproperty,this.currentElement,null,this.unsyncedProperties)}this.idfieldNode.value=o,this.unsyncedProperties={},Weebly.Editor.RPC.Elements.saveProperties(i,n).done(function(e){return e.result===!1&&e.error?void window.showDeniedAction(e.error):void Relay.execute("analytics:track:event","editor.elements","edit_settings",t)}).fail(AjaxModule.errFunc)}},onTextChange:function(e,t,i){if(this.currentElement){this.skipRerender="undefined"!=typeof i?i:!1,this.textChange=1;var n=$(e);"undefined"==typeof t?(this.onTextChangeTracking=e,setTimeout(function(){exports.onTextChange(e,n.value,i)},1500)):n&&n.value&&n.value==t||""==n.value&&""==t?(this.onTextChangeTracking=null,exports.onChange(e,void 0,i)):e!=this.onTextChangeTracking&&setTimeout(function(){exports.onTextChange(e,n.value,i)},1500)}},onChange:function(e,t){if(this.currentElement){if("7423607"==exports.elementDef.elementid&&(this.isFormDirty=!0),"5699726"!==exports.elementDef.elementid&&"49312965"==t&&CommerceModule.storefrontSettings.get("element_legacy_mode")){var i=$F(e),n={grid:"164px",small:"125px",large:"225px","long":"175px"}[i],o="36068137",r=this.uproperty.properties[o].ucfpid;this.pfield.properties[o].property_result=n,this.unsyncedProperties[r]=n}Object.keys(exports.elementDef.manifest).length>0&&""!=this.currentValidateFunction&&"function"==typeof this.currentValidateFunction&&this.currentValidateFunction(e),""!=this.currentSaveValidateFunction&&null!=this.currentSaveValidateFunction?validateFunction():this.continueOnChange()}},continueOnChange:function(){if(this.currentElement||this.currentContentFieldDef){for(var e=this.currentContentFieldDef.isLegacy,t=0;t<this.currentContentFieldDef.contentFieldProperties.length;++t){var i=this.currentContentFieldDef.contentFieldProperties[t].cfpid;if(this.uproperty.properties[i]){var n,o=this.uproperty.properties[i].ucfpid,r=this.currentContentFieldDef.contentFieldProperties[t],s="",a="";if(this.isPlatformElement()||this.useNewSettingsPopup)n=$("platform-settings-tooltip-"+o);else if(e)n=$(o);else{if(_.contains(UICONST.IMAGE_LINK_LIGHTBOX_CFPIDS,i)){var l=editorApp.request("element:options:get:ucfpid",o+"-lightbox"),c=editorApp.request("element:options:get:ucfpid",o+"-link");if("1"===l){var d="http://weebly-image-full/"+Weebly.Elements.ucfid;s="<a"+(d?" href='"+d+"'":"")+">"}else s="undefined"!=typeof c&&c.length>0?c:"<a>"}else s=editorApp.request("element:options:get:ucfpid",o);!s&&$(o)&&$(o).value&&(s=$(o).value),"undefined"!=typeof s&&s===Weebly.Elements.uproperty.properties[i].property_result&&(s=void 0)}$("cfpid-"+i)?(a=$("cfpid-"+i).value,this.pfield.properties[i].property_result=a):n&&(n.value||""==n.value)?(a=n.value,this.pfield.properties[i].property_result=a,this.unsyncedProperties[o]=a):"undefined"!=typeof s?(a=s,this.pfield.properties[i].property_result=a,this.unsyncedProperties[o]=a):"%%CUSTOMHTML%%"==r.options&&(a=$(o+"CustomHTML").value,this.pfield.properties[i].property_result=a,this.unsyncedProperties[o]=a),"%%URICOMPONENT%%"==r.options&&(a=this.unsyncedProperties[o],""!==a&&(a=encodeURIComponent(a),this.pfield.properties[i].property_result=a,this.unsyncedProperties[o]=a))}}var u=ElementUtils.getElementObject(this.idfield.id),h=this.uproperty;if(this.currentElement&&!this.skipRerender&&!this.isFormDirty){var p=this.currentElement.select(".editable-text")[0];p&&p.id==window.currentBox&&(window.currentBox=null),u.rerenderContentField(h,this.currentElement,null,this.unsyncedProperties),u.children&&u.children.length&&setTimeout(function(){Relay.request("page:navigate")},250),this.closeOnValidate&&this.unselectElement()}this.skipRerender=!1}},hideElementSettings:function(){frameApp.vent.trigger("element:options:dialog:close")},getPropertyByReference:function(e){if(!this.currentElement)return{};var t={};return $H(this.uproperty.properties).values().each(function(i){i.reference_property==e&&(t=i)}),t},isProductElement:function(){return $(this.currentElement).down(".product-image")},extractElementProperties:function(element){for(var ucfid=element.id,parentRef=$(element).up(".inside"),children=parentRef.childElements(),finalChild,i=0;i<children.size();i++)if(children[i].idfield){finalChild=children[i];break}var idfield;try{idfield=eval("("+finalChild.idfield.value+")")}catch(e){return window.showError(_W.utl("javascript.site.editor.ui.weebly_elements_28")),!1}return this.idfield=idfield,this.idfieldNode=finalChild.idfield,this.pfield=ElementUtils.getElementObject(idfield.id).content_fields[ucfid],this.ucfid=ucfid,this.uproperty=this.pfield,this.upload=0,!0},isSelectableElement:function(e){var t=e.up("li.inside").up().hasClassName("weebly-single-area"),i=e.select("> .wsite-multicol").length,n=$(e.id+"-form-parent"),o=e.select("> .wsite-button").length,r=e.select("> .wsite-social").length,s=ElementSpotlight.getCurrent();return(!s||s.container.is(e)||s.container.find(e).length)&&(!t||o||r)?View.isMobileView&&i?!1:n&&!ElementSpotlight.isCurrentContainer(e)?!1:!0:!1},isSingleArea:function(e){return e.up("li.inside").up().hasClassName("weebly-single-area")},getCurrentProductID:function(){if(this.isProductElement()){var e=$(this.ucfid+"-product-data");return $F(e.productID)}return!1},isFormElement:function(){return this.currentElement&&$(this.currentElement.id+"-form-parent")?!0:!1},isEmptyProductsElement:function(){var e=jQuery(this.currentElement);if(e.length){var t=e.find(".empty-commerce-element");return t.length>0}return!1},getNewElementID:function(){var e=$$("#secondlist .outside_top form");if(1==e.size()){var t=e[0].idfield.value.replace(/[^\d]/g,"");return t}},hideCustomHTML:function(e,t,i){if(exports.editing){exports.editing=null;var n=$(""+e),o=$("customHTMLDummy").parentNode,r=$(""+i+"CustomHTML");r.style.display="none",n.style.display="block",o.appendChild(r),o.removeChild($("customHTMLDummy")),new Ajax.Request(AjaxModule.ajax,{parameters:{pos:"savecustomhtml",ucfid:e,ucfpid:i,customhtml:r.value,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(t){if(1==t.responseText.isJSON()){var i=t.responseText.evalJSON();0==i.result&&window.showDeniedAction(i.error)}else refreshCustomHtml(e,r.value)},onFailure:AjaxModule.errFunc,bgRequest:!0}),exports.customHTML[i]=r.value,exports.onChange(i,t),exports.unselectElement(),jQuery("#elementSettingsWrapper").show()}},editCustomHTML:function(e,t,i){jQuery("#elementSettingsWrapper").hide();var n=$(""+e),o=n.parentNode,r=n.getHeight(),s=n.getWidth();r=r>150?r+"px":"150px",s=s>200?s-6+"px":"100%",n.style.display="none";var a=$(""+i+"CustomHTML"),l=a.parentNode;exports.customHTML[i]&&(a.value=exports.customHTML[i]);var c=document.createElement("div");c.style.display="none",c.id="customHTMLDummy",l.appendChild(c),o.appendChild(a),a.style.height=r,a.style.width=s,a.style.display="block",a.focus(),a.select(),exports.editing=t},getImageProperty:function(){var e=exports.getPropertyByReference("<!IMAGESET!>");return e.cfpid||(e=exports.getPropertyByReference("<!IMAGES!>"),e.cfpid)?e:!1},setProperty:function(e,t){
var i,n,o=exports.getPropertyByReference(e);if(o){if(i=o.cfpid){var r=Weebly.Elements.uproperty.properties[i];r.property_result=t,Weebly.Elements.unsyncedProperties[r.ucfpid]=t}n=$(o.ucfpid),n&&(n.value=t)}}};return window.validateOK=function(){exports.continueOnChange()},window.menuBarChooseImage=function(e,t,i,n,o){var r=ImageUtils.isImageLiquid(jQuery(e));Relay.request("chooseImage",{clickDiff:{left:0,top:10},type:t,width:i,ucfid:n,ucfpid:o,copyFlickr:!0}).done(function(e){window.updateImageElement(e,n,o,r,e.image.pageUrl,e.image.creator),exports.unselectElement()})},window.determineUpload=function(){var e=_.toArray(arguments);e.unshift("determineUpload"),Relay.execute.apply(Relay,e)},window.manageSlideshow=function(){var e=_.toArray(arguments);e.unshift("slideshowadmin:manage"),Relay.execute.apply(Relay,e)},editorApp.vent.on("editor:updateList",function(){exports.unselectElement()}),Relay.commands.setHandlers({"editor:elements:select":_.bind(exports.selectElement,exports),"editor:elements:unselect":_.bind(exports.unselectElement,exports),"editor:elements:setDisableElementOptions":function(e){exports.disableElementOptions=e},"editor:elements:setProperty":_.bind(exports.setProperty,exports),"editor:elements:setImageProperty":function(e){var t=exports.getImageProperty();t&&(t.property_result=e)},"editor:elements:continueOnChange":_.bind(exports.continueOnChange,exports),"editor:elements:saveProperties":_.bind(exports.saveProperties,exports),"editor:elements:element-options:open":function(e){exports.selectElement(e,!0)},"slideshow:updatePhotos":Slideshow.updatePhotos,"editor:elements:saveAndRerender":function(e,t,i,n){exports.selectElement(e),exports.setProperty(t,i),exports.saveProperties(n)}.bind(exports)}),Relay.reqres.setHandlers({"editor:elements:getProperty":exports.getPropertyByReference.bind(exports)}),Relay.on({"site:overlays:hide":function(){exports.unselectElement()}}),Weebly.Elements=exports,exports}),_wAMD.define("element/editor/view/settings/item-views/TooltipsItemView",["jquery","backbone-all","mustache"],function(e,t,i){var n=t.Marionette.ItemView.extend({tagName:"li",template:i.compile("<a>{{label}}</a>"),templateHelpers:function(){var e,t,i=this,n=i.model.get("label");return n||(t=i.model.get("booleanCallback"),e=parseInt(i[t].call(i)),n=i.model.get("booleanItems")[e].label,i.model.set(i.model.get("booleanItems")[e])),{label:_W.utl(n)}},events:{click:"itemCallback"},initialize:function(){this.attachCallbacks()},attachCallbacks:function(){_.each(this.options.callbacks,function(e,t){this[t]=e},this)},onRender:function(){this.model.get("highlighted")&&this.$el.addClass("pressed")},itemCallback:function(e){var t=this.model.get("callback");e.preventDefault(),this[t](e)}});return n}),_wAMD.define("element/editor/view/settings/TooltipsView",["underscore","jquery","backbone-all","mustache","element/editor/view/settings/item-views/TooltipsItemView","element/editor/view/settings/ElementOptionsView","element/editor/model/ElementSettingModel"],function(e,t,i,n,o,r,s){var a=i.Marionette.CompositeView.extend({itemView:o,itemViewContainer:".tooltip-list",itemViewOptions:function(){return{$targetEl:this.options.$targetEl,callbacks:this.options.callbacks}},itemEvents:{"tooltips:close":function(e){this.close()}},className:"tooltip-list-container",template:n.compile("<ul class='tooltip-list'></ul>"),initialize:function(){return this},onShow:function(){this.repositionToElement(this.options.$targetEl)},repositionToElement:function(e){var t=e.offset().top-50,i=e.offset().left,n=e.width();tooltipWidth=this.$el.width(),this.$el.css({top:t,left:i+(n-tooltipWidth)/2})}});return a}),_wAMD.define("element/editor/view/settings/CaptionView",["underscore","jquery","backbone-all","mustache"],function(e,t,i,n){var o=i.View.extend({defaultCaptionText:_W.utl("javascript.element.editor.view.settings.CaptionView_1","Placeholder text for empty caption text area"),dialogOptions:{title:_W.utl("javascript.element.editor.view.settings.CaptionView_2","Title of caption dialog."),backLink:!1,forwardLink:_W.utl("javascript.element.editor.view.settings.CaptionView_3"),allowLeftRight:!1,preferTop:!0,preferBottom:!1,isDraggable:!0,size:"small",width:300,height:190},onDialogForward:function(){var e=this.$el.find("textarea").val();e!=this.defaultCaptionText&&this.trigger("caption:submit",this.$el.find("textarea").val()),this.dialog.close()},changedText:function(){this.trigger("caption:change",this.$el.find("textarea").val())},removePlaceholder:function(e){t(e.currentTarget).hasClass("empty")&&t(e.currentTarget).removeClass("empty").val("")},template:'<textarea class="{{className}}">{{content}}</textarea>',events:{"focus textarea":"removePlaceholder","keyup textarea":"changedText"},initialize:function(e){return this.caption=e.caption,this},render:function(){var e=this.getCaptionContext(this.caption);return this.$el.html(n.render(this.template,e)),this},getCaptionContext:function(e){return{content:e?e:this.defaultCaptionText,className:e?"":"empty"}}});return o}),_wAMD.define("legacy/weebly_image_gallery",["jquery","underscore","config","editor-site-shared/relay","ui-framework/js/components/dialog","site/editor/app","site/editor/ui/images/utils","site/editor/ui/weebly_elements","legacy/weebly_element_utils","editor-site-shared/ui/context","element/editor/view/settings/TooltipsView","element/editor/view/settings/CaptionView"],function(e,t,i,n,o,r,s,a,l,c,d,u){function h(e){e.addClass("active-sortable-item").parent().addClass("active-sortable-gallery")}function p(){e(".active-sortable-gallery").removeClass("active-sortable-gallery").children().removeClass("active-sortable-item")}function f(t){var i=e(t.target),n=i.closest(".image-gallery-list-item");E||(E=!0),!n.length&&(_.tooltips||_.captionDialog)&&_.currentElement&&(p(),g(),a.generateProperties(t.target.parentNode))}function m(t){var n,o,s;if(!i.chromeless){g(),n=e(this).find("img").first(),o=n.attr("_link")&&""!==n.attr("_link"),s=n.attr("_caption")&&""!==n.attr("_caption");var a=n.attr("src").match("/weebly/images/")||n.attr("src").match("/images/editor/elements");a||(r.vent.trigger("element:options:dialog:close"),_.tooltips=new d({collection:new Backbone.Collection([{name:"link",label:_W.utl("html.weebly.libraries.weebly_image_gallery_13","Attach a hyperlink to image"),callback:"addImageGalleryLink",highlighted:o},{name:"caption",label:_W.utl("html.weebly.libraries.weebly_image_gallery_14","Attach a caption to image"),callback:"addImageGalleryCaption",highlighted:s},{name:"delete",label:_W.utl("html.weebly.libraries.weebly_image_gallery_15","Remove image"),callback:"deleteImageGallery"}]),callbacks:{addImageGalleryLink:function(e){e.stopPropagation(),Weebly.ImageGallery.chooseThumbnailLink(this.options.$targetEl),this.trigger("tooltips:close")},addImageGalleryCaption:function(e){Weebly.ImageGallery.chooseThumbnailCaption(this.options.$targetEl),this.trigger("tooltips:close")},deleteImageGallery:function(e){Weebly.ImageGallery.removeNode(this.options.$targetEl),this.trigger("tooltips:close")}},$targetEl:e(this)}),_.tooltips.listenTo(r.vent,{"editor:elements:unselect":function(){this.close()}}),r.elementSettings.show(_.tooltips))}}function g(){_.tooltips&&(r.elementSettings.close(),_.tooltips=null),_.captionDialog&&(_.captionDialog.close(),_.captionDialog=null)}function v(){return"<li class='gallery-loading' style='position:absolute;top:0;left:0;height:100%;width:100%;z-index:5;'></li>"}function b(t){var i=_.currentElement||t;return e("#"+i+"-gallery")}function y(e){return t.escape(e)}function w(e){return t.unescape(e)}var _={currentElement:null,captionDialog:null,isSorting:!1,tooltips:null},E=!1;r.vent.on({"editor:elements:unselect":function(e){("22397704"==e||"18362204"==e)&&_.destroy()},"editor:elements:options:show":function(e,t,i){if("22397704"==e&&"34873637"==t){var n=a.getPropertyByReference("<!IMAGESET!>");n.property_result&&!n.property_result.match("'length': '0'")&&(_.setCurrent(i),_.init())}else"18362204"==e&&(_.setCurrent(i),_.init())}}),_.init=function(i){this.currentElement&&(_.captionDialog=null,_.isSorting=!1,_.tooltips=null,Sortable.create(this.currentElement+"-gallery",{constraint:!1,starteffect:function(t){p(),h(e(t)),_.tooltips&&_.tooltips.close(),a.hideElementSettings(),_.isSorting=!0},endeffect:function(e){p(),_.isSorting=!1,_.onChange()}}),Weebly.view.isMobileView||(e("#"+this.currentElement+"-gallery .hover-toolbar").show().parent().css({cursor:"move"}),t.result(i,"isLegacyInterface")||(e(".image-gallery-list-item").off("click.galleryItem").on("click.galleryItem",function(t){E?(m.call(this,t),p(),h(e(this))):E||(E=!0)}),e("#"+this.currentElement+".element").off("click.gallery").on("click.gallery",f))),n.execute("dontSave:set",0))},_.destroy=function(){this.currentElement&&(e("#"+this.currentElement+"-gallery").length>0&&Sortable.destroy(this.currentElement+"-gallery"),e("#"+this.currentElement+"-gallery .hover-toolbar").hide().parent().css({cursor:"auto"}),p(),this.currentElement=null,E=!1,_.clearCurrentCaptionForm())},_.setCurrent=function(e){_.currentElement=e},_.onChange=function(t){function i(e){e=e.replace(/^.*\/uploads\//,"");var t=e.match(/^\d\/\d\/\d\/\d\/\d+\/[^\/]+/);return t?t[0]:e}if(t)this.currentElement=t;else if(this.currentElement=_.currentElement,!this.currentElement||!_.currentElement)return;var o=[],r=e("#"+this.currentElement+"-gallery img.galleryImage");r.each(function(){var t=e(this),n=i(t.attr("src")),r=t.attr("_width"),s=t.attr("_height"),a=t.attr("_caption"),l=t.attr("_link"),c={url:n};r&&(c.width=r),s&&(c.height=s),a&&(c.caption=a),l&&(c.link=l),o.push(c)});var s=e("#"+this.currentElement);0===r.length&&s.length&&s.html(_.update());var c=(this.currentElement+"").replace(/[^0-9]/g,""),d=Object.toJSON(o);if(this.currentElement.match(/-manager/)){l.setContentFieldProperty(c,"<!IMAGES!>",d);n.execute("editor:elements:setImageProperty",d),n.execute("editor:elements:saveProperties"),n.execute("slideshow:updatePhotos",c,o)}else{var u=a.getImageProperty();if(!u)return;u.property_result=d,a.saveProperties(),Weebly.Slideshow.updatePhotos(c,o)}},_.update=function(t,i,n,o,r,l,c,d){if("undefined"==typeof d){var u=a.getPropertyByReference("<!IMAGESET!>");u&&(d=u.property_result)}if(d)try{d=d.evalJSON()}catch(h){d=[]}if("undefined"==typeof i){var u=a.getPropertyByReference("<!COLUMNS!>");u&&(i=e("#"+u.ucfpid).val())}if("undefined"==typeof n){var u=a.getPropertyByReference("<!SPACING!>");u&&(n=e("#"+u.ucfpid).val())}if("undefined"==typeof o){var u=a.getPropertyByReference("<!BORDER!>");if(u){var p=e("#"+u.ucfpid).val();o=p?parseInt(p):0}}else o=parseInt(o);if("undefined"==typeof r){var u=a.getPropertyByReference("<!CROPPING!>");if(u){var f=e("#"+u.ucfpid).val();r=f?parseInt(f):0}}else r=parseInt(r);if("undefined"==typeof l){var u=a.getPropertyByReference("<!THUMBCAPTIONTYPE!>");if(u){var m=e("#"+u.ucfpid).val();l=m?m:"none"}}if(Weebly.view.isMobileView&&(l="none"),"undefined"==typeof c){var u=a.getPropertyByReference("<!THUMBCAPTIONHOVER!>");if(u){var g=e("#"+u.ucfpid).val();c=g?parseInt(m):"0"}}var v="https:"===window.location.protocol?"https://":"http://";return d=d&&d.length?e.grep(d,function(e){var t;return e?(t="string"==typeof e?e:e.url||"",!s.isInitialImageSrc(t)):!1}):[{url:v+ASSETS_BASE+"/images/editor/elements/placeholders/gallery2.png",width:293,height:222}],t||(t=a.ucfid),_._update(t,i,n,o,r,l,c,d)},_._update=function(e,n,o,r,s,a,l,c,d){this.currentElement=e;var u,h=r?"border-width:1px;"+(r>1?"padding:"+(r-1)+"px;":""):"",p='<ul id="'+e+'-gallery" class="imageGallery" style="line-height: 0px; margin: 0; padding: 0; list-style: none;">',f=(100/n-.05).toFixed(2);u=2==s?4/3:s?1:1.332;var m,g,b,w,E,C,S=(1/u*100).toFixed(2),D=!1;this.framePercentWidth=f,this.framePercentHeight=S;for(var I=0;I<c.length;I++)if(c[I]&&("string"==typeof c[I]?(m=c[I],g=null,b=null,E=null,C=""):(m=c[I].url,g=parseInt(c[I].width),b=parseInt(c[I].height),E=c[I].link,C=y(c[I].caption||"")),m)){w=g&&b?g/b:1.332,D=m.match("/weebly/images/")||m.match("/images/editor/elements"),m&&(m.match("://")||(D=m.match("/weebly/images/")||m.match("/images/editor/elements"),D?i.chromeless&&(m="Gallery@2x.png"):m="/uploads/"+m),i.chromeless&&m.startsWith("/")&&(m="http://"+configSiteName+m));var k,O,R;s?w>u?(k=(w/u*100).toFixed(2),O=0,R=-((w/u-1)/2*100).toFixed(2)):(k=100,O=-((u/w-1)/2*100).toFixed(2),R=0):w>u?(k=100,O=((1-u/w)/2*100).toFixed(2),R=0):(k=(w/u*100).toFixed(2),O=0,R=((1-w/u)/2*100).toFixed(2)),D?(p+="<li id='"+e+"-imageContainer"+I+"' class='image-gallery-list-item' style='margin:0;list-style:none;position:relative;z-index:5'>",p+="<div id='"+e+"-insideImageContainer"+I+"' style='position:relative;margin:"+o+";"+(s||!r?"":"padding:0 "+5*r+"px "+2*r+"px 0;")+"'>",s&&r&&(p+="<div class='galleryImageBorder' style='"+h+"'>"),p+="<div class='galleryImageHolder"+("1"==l?" galleryCaptionHover":"")+"' style='position:relative;width:100%;text-align:center;"+(s?"overflow:hidden;":"")+"'>",p+="<div class='galleryInnerImageHolder' style='display:inline-block;cursor: pointer;'><img src='"+m+"' class='galleryImage"+(s||!r?"":" galleryImageBorder")+"' "+(E?"_link='"+E+"' ":"")+(C?"_caption='"+C+"' ":"")+(g?"_width='"+g+"' _height='"+b+"' ":"")+"/>",p+="<p class='wsite-image-placeholder-text' style='word-break: break-word;padding: 0px 10px;margin: 0px;font-weight: 600;font-variant: initial;text-transform: uppercase;font-size: 20px;color: #C3C5C8;font-family: ProximaNova, \"Open Sans\", Helvetica, Arial, Verdana, sans-serif;'>"+_W.utl("html.weebly.libraries.weebly_image_gallery_17")+"</p>"):(p+="<li id='"+e+"-imageContainer"+I+"' class='image-gallery-list-item' style='float:left;width:"+f+"%;margin:0;list-style:none;position:relative;z-index:5'>",p+="<div id='"+e+"-insideImageContainer"+I+"' style='position:relative;margin:"+o+";"+(s||!r?"":"padding:0 "+5*r+"px "+2*r+"px 0;")+"'>",s&&r&&(p+="<div class='galleryImageBorder' style='"+h+"'>"),p+="<div class='galleryImageHolder"+("1"==l?" galleryCaptionHover":"")+"' style='position:relative;width:100%;padding:0 0 "+S+"%;"+(s?"overflow:hidden;":"")+"'>",p+="<div class='galleryInnerImageHolder'><img src='"+m+"' class='galleryImage"+(s||!r?"":" galleryImageBorder")+"' "+(E?"_link='"+E+"' ":"")+(C?"_caption='"+C+"' ":"")+(g?"_width='"+g+"' _height='"+b+"' ":"")+"style='position:absolute;"+(s||!r?"border:0;":h)+"width:"+k+"%;top:"+O+"%;left:"+R+"%' />"),Weebly.view.isMobileView&&i.chromeless||(p+='<div class="galleryCaptionHolder ',"full"===a?p+="fullImageGalleryCaption":"partial"===a&&(p+="partialImageGalleryCaption"),p+='" style="',"none"!==a&&C.length||(p+=" display: none;"),s||(p+="padding-left: "+r+"px; width: "+k+"%;margin-top:"+r+"px; margin-bottom: "+-1*r+"px;",w>u?("full"==a&&(p+="top: "+O+"%;"),p+="bottom: "+O+"%; height: auto;"):p+="left: "+R+"%;"),p+='"><div class="galleryCaptionHolderInnerBg"></div><div class="galleryCaptionHolderInner'+("1"==l?"":" galleryCaptionsVisible")+'"><div class="galleryCaptionInnerTextHolder"><div class="galleryCaptionInnerText">'+t.unescape(C)+"</div></div></div>",p+="</div>"),p+="</div></div>",i.chromeless||!D&&d&&(p+="<div class='w-gallery-toolbar hover-toolbar' style='display:none;"+(s?"top:0;right:0":"top:"+O+"%;right:"+(100-R-k)+"%")+"'><div class='hover-toolbar-inner'>",p+="<span class='w-link w-gallery-button w-icon-text-link"+(E?" pressed":"")+"' onclick='Weebly.ImageGallery.chooseThumbnailLink(Weebly.jQuery(this), "+(_.currentElement.match(/-manager/)?"editorApp":"Relay")+")' title='"+t.escape(_W.utl("html.weebly.libraries.weebly_image_gallery_8"))+"'></span>",p+="<span class='w-caption w-gallery-button w-icon-comment"+(C?" pressed":"")+"' onclick='Weebly.ImageGallery.chooseLegacyThumbnailCaption(Weebly.jQuery(this))' title='"+t.escape(_W.utl("html.weebly.libraries.weebly_image_gallery_9"))+"'></span>",p+="<span class='w-remove w-gallery-button w-icon-trash' onclick='Weebly.ImageGallery.removeNode(Weebly.jQuery(this))' title='"+t.escape(_W.utl("html.weebly.libraries.weebly_image_gallery_10"))+"'></span>",p+="</div></div>"),s&&r&&(p+="</div>"),p+="</div>",p+="</li>"}return T&&(p+=v()),p+="<span style='display: block; clear: both; height: 0px; overflow: hidden;'></span>",p+="</ul>"},_.removeNode=function(e){e.closest("li").empty(),_.onChange()},_.chooseThumbnailLink=function(e){var t,i=_.currentElement.match(/-manager/)?"editorApp":"Relay",n=_.currentElement;_.currentLinkButton=e,_.currentLinkThumbnail=e.closest("li").find("img"),t=parseLinkString(_.currentLinkThumbnail.attr("_link")),window[i].request("linker:open",{remove:t?!0:!1,existing:t,ucfid:_.currentElement.replace("-manager",""),context:_}).done(function(){var e=[].slice.call(arguments,0);e.push(n),_.setLink.apply(this,e)})},_.setLink=function(e,t,i){e?e+=t?"weeblylink_new_window":"":e="",_.currentLinkThumbnail.attr("_link",e),_.onChange(i),_.currentLinkButton.toggleClass("pressed",e)},_.chooseThumbnailCaption=function(e){var i,n=e.find("img").first(),s=t.unescape(n.attr("_caption")||""),a=e.find(".galleryCaptionInnerText").first(),l=e.find(".galleryCaptionHolder").first();i=new u({caption:s}),i.listenTo(r.vent,{"element:options:dialog:close":function(){this.dialog&&this.dialog.close&&(this.trigger("caption:cancel"),this.dialog.close(),this.remove())}}),_.captionDialog=new o(i),_.captionDialog.open({pointAt:e,parent:"#elementSettingsWrapper"}),i.$el.find("textarea").focus().val("").val(s),i.once("caption:submit",function(e){var t=y(e);n.attr("_caption",t),_.onChange()}),i.once("caption:cancel",function(){0==s.length?l.hide():a.html(s)}),i.on("caption:change",function(e){y(e)?(l.hasClass("fullImageGalleryCaption")||l.hasClass("partialImageGalleryCaption"))&&l.show():l.hide(),a.html(e)})},_.chooseLegacyThumbnailCaption=function(i){_.clearCurrentCaptionForm();var n,o,r=_.$currentControlButton=i,s=_.$currentCaptionImageWrap=i.closest("li"),a=s.find("img").first(),l=_.$currentCaptionImageWrap.find(".galleryCaptionInnerText").first(),c=_.$currentCaptionImageWrap.find(".galleryCaptionHolder").first(),d=t.unescape(a.attr("_caption")||"");s.css({zIndex:6}),r.addClass("pressed"),n=new Element("form",{"class":"w-caption-form w-ui hover-toolbar-inner"}).observe("submit",function(e){e.stop()}).observe("click",function(e){e.stop()}).observe("mouseup",function(e){e.stop()}).insert(o=new Element("textarea",{"class":d?"":"empty"}).observe("focus",function(){o.hasClassName("empty")&&(o.removeClassName("empty"),o.value="",c.hide())}).observe("blur",function(){o.value.strip()||(o.addClassName("empty"),o.value=_W.utl("html.weebly.libraries.weebly_image_gallery_11"),c.hide())}).observe("keyup",function(e){o.value.strip()?(c.hasClass("fullImageGalleryCaption")||c.hasClass("partialImageGalleryCaption"))&&c.show():c.hide(),l.html(o.value)})).insert(new Element("span",{"class":"button-wrap"}).insert(new Element("input",{type:"submit",value:_W.utl("html.weebly.libraries.weebly_image_gallery_12"),"class":"btn btn-block btn-info"}).observe("click",function(){var e;e=o.hasClassName("empty")?"":y(o.value),a.attr("_caption",e),_.clearCurrentCaptionForm(!1,!e),_.onChange(),e?r.addClass("pressed"):r.removeClass("pressed")}))).insert(new Element("span",{"class":"button-wrap"}).insert(new Element("input",{type:"button",value:_W.utl("html.weebly.libraries.weebly_image_gallery_16"),"class":"btn btn-block btn-inverse"}).observe("click",function(e){_.clearCurrentCaptionForm(!1,!a.attr("_caption")),0==d.length&&c.hide()})));var u=e(document.body),h=new Element("div",{"class":"hover-toolbar hover-toolbar-below",style:"z-index:1000"});h.insert("<div class='hover-toolbar-arrow hover-toolbar-arrow-centered'></div>"),h.insert(n),u.append(h),_.currentCaptionForm=h;var p=e(u).offset(),f=e(r).offset(),m=e(r).outerWidth(),g=e(r).outerHeight(),v=e(h).outerWidth();e(h).css({top:f.top+g-p.top,left:f.left+m/2-v/2-(p.left-u[0].scrollLeft)}),o.value=d?w(d):_W.utl("html.weebly.libraries.weebly_image_gallery_7")},_.clearCurrentCaptionForm=function(e,i){void 0===i&&_.$currentCaptionImageWrap&&(i=!_.$currentCaptionImageWrap.find("img").attr("_caption")),_.currentCaptionForm&&(_.$currentCaptionImageWrap.find(".galleryCaptionHolderInner .galleryCaptionInnerText").html(t.unescape(_.$currentCaptionImageWrap.find("img").attr("_caption"))),_.currentCaptionForm.remove(),_.currentCaptionForm=null),_.$currentControlButton&&_.$currentControlButton.length&&(i&&_.$currentControlButton.removeClass("pressed"),_.$currentControlButton=null),!e&&_.$currentCaptionImageWrap&&(_.$currentCaptionImageWrap.css({zIndex:5}),_.$currentCaptionImageWrap=null)},_.uploadComplete=function(e){var t=b(e);T=!1,!t.length&&c.inEditorContext()&&n.execute("uploadComplete",e)},_.uploadCancel=function(e){_.clearGalleryLoading(e)},_.uploadError=function(e){_.clearGalleryLoading(e)};var T=!1;return _.drawGalleryLoading=function(e){T=!0;var t=b(e);if(t.length){var i=v(),o=t.find("li:last").first();o?o.after(i):t.prepend(i)}else c.inEditorContext()&&n.execute("drawGalleryLoading",e)},_.clearGalleryLoading=function(e){T=!1;var t=b(e);t.length?t.find("li.gallery-loading").remove():c.inEditorContext()&&n.execute("clearGalleryLoading",e)},Weebly.ImageGallery={Version:"0.1",Author:"David Rusenko",Company:"Weebly, Inc.",currentElement:_.currentElement,isSorting:_.isSorting,init:_.init,destroy:_.destroy,setCurrent:_.setCurrent,onChange:_.onChange,update:_.update,_update:_._update,removeNode:_.removeNode,chooseThumbnailLink:_.chooseThumbnailLink,setLink:_.setLink,chooseLegacyThumbnailCaption:_.chooseLegacyThumbnailCaption,chooseThumbnailCaption:_.chooseThumbnailCaption,uploadComplete:_.uploadComplete,uploadCancel:_.uploadCancel,uploadError:_.uploadError},window.clearGalleryLoading=_.clearGalleryLoading,window.drawGalleryLoading=_.drawGalleryLoading,n.commands.setHandlers({clearGalleryLoading:_.clearGalleryLoading,drawGalleryLoading:_.drawGalleryLoading,uploadComplete:_.uploadComplete}),_}),_wAMD.define("site/published/formFieldInstructions",["jquery","underscore"],function(e,t){var i=!1,n=!1,o={createFieldInstructions:function(t){var i=e('<div class="instructions-container">').html(t),n=e('<span class="wsite-instructions-container-caret"/>');return i.append(n),e("body").append(i),i},setupFieldInstructions:function(t,r){var s=e(t);if(s.html()){if(!i){var a=window.getComputedStyle(document.body);n="hidden"===a.getPropertyValue("overflow")||"hidden"===a.getPropertyValue("overflow-y")||"hidden"===a.getPropertyValue("overflow-x"),i=!0}null==r&&(r="wsite");var l=s.parents("."+r+"-form-field");l.data("form-instruction",{instructions:o.createFieldInstructions(t.innerHTML)}),o.createHelpIcon(l)}},createHelpIcon:function(t){var i=t.data("form-instruction"),o=i.instructions,r=e('<span class="wsite-instructions-help"/>');t.find(".wsite-form-label").append(r);var s=function(i){"touchstart"===i.type&&e.contains(t[0],i.target)||(o.hide(),e(document).off(".formfieldinstructions"))},a=function(){var t=o.find(".wsite-instructions-container-caret"),i=window.getComputedStyle(t[0],":before").getPropertyValue("border-width");i=parseInt(i,10)||10;var a=r.offset(),l=r.outerWidth(),c=r.outerHeight(),d=(o.offset(),o.outerWidth()),u=o.outerHeight(),h=a.top-u-(i+5),p=l+a.left-2*i-i/2;p+d>document.body.clientWidth&&(p=p-d+l+2*i+i/2,0>p&&(p=10)),o.removeClass("caret-top caret-bottom");var f;f=n?0>h:h<e(document.body).scrollTop(),f?(h=h+c+u+(2*i+10),o.addClass("caret-top")):o.addClass("caret-bottom"),o.css({top:h,left:p}).show().find(".wsite-instructions-container-caret").css({left:a.left-p+i/2}),setTimeout(function(){e(document).on({"touchmove.formfieldinstructions":s,"touchstart.formfieldinstructions":s})},250)};r.on({mouseover:a,mouseout:s,touchstart:function(e){e.preventDefault(),a()}})}};return o}),_wAMD.define("tpl!ui/field-options-item.tpl",[],function(){return'<li style="position:relative;">\n	<img src="http://{{urlPrefix}}/weebly/images/options-move.gif" alt="move" class="options-handle editmenu-input-move" />\n	<input type="text" value="{{value}}" />\n	<a class="editmenu-input-delete">\n		<img src="http://{{urlPrefix}}/weebly/images/options-delete.gif" alt="Delete" />\n	</a>\n</li>'}),_wAMD.define("site/editor/ui/weebly_form",["jquery","editor-site-shared/relay","mustache","site/editor/app","site/editor/ui/weebly_elements","site/published/formFieldInstructions","tpl!ui/field-options-item.tpl"],function(e,t,i,n,o,r,s){function a(){e(".instructions-container").remove(),e(".wsite-form-instructions").each(function(){r.setupFieldInstructions(this)})}function l(){var t=e(".menuBarExpand"),i=t.find(".menuIconAdvanced img");t.length&&("visible"===t.css("overflow")?(t.css({width:"",height:"",zIndex:"",paddingBottom:"",overflow:"hidden"}),i.attr("src","http://"+window.editorStatic+"/weebly/images/arrow_right.gif")):(t.css({width:"250px",height:"auto",zIndex:"100",paddingBottom:"31px",overflow:"visible",left:"auto",top:"auto"}),i.attr("src","http://"+window.editorStatic+"/weebly/images/arrow_down.gif"),d()))}function c(){var t=e(".menuBarExpand"),i=t.find(".predefined-options");i.is(":visible")?(i.hide(),t.find(".predefined-options-arrow").attr("src","/weebly/images/blog-settings-arrow-down.gif")):(i.children().length||f(),i.show(),t.find(".predefined-options-arrow").attr("src","/weebly/images/blog-settings-arrow-up.gif"))}function d(){if(e("#inputoptions").length&&!e("#inputoptions-open").length){for(var t=e("#"+y).val().split("||"),n=[],o=0;o<t.length;o++)t[o]=t[o].replace(/\"/g,"&quot;"),n.push(i.render(s,{urlPrefix:window.editorStatic,value:t[o]}));var r=e("<div>",{id:"inputoptions"});r.append(e("<div>").append(e("<div>",{id:"inputoptions-open","class":"editmenu-input-options"}).append(e("<ul>",{id:"inputoptions-list"}).append(e(n.join(""))))).append(e("<div>",{style:"position:relative; width:100%"}).append(e("<a>",{"class":"editmenu-input-plus"}).append(e("<img>",{src:"http://"+window.editorStatic+"/weebly/images/options-plus.gif",alt:"Add"}))).append(e("<a>",{"class":"editmenu-input-undo",style:"display:none;"}).append(e("<img>",{src:"http://"+window.editorStatic+"/weebly/images/undo_button.gif",alt:"Undo"}))).append(e("<a>",{"class":"editmenu-input-save"}).append(e("<img>",{src:"http://"+window.editorStatic+"/weebly/images/options-save.gif",alt:"Save"}))))),e("#inputoptions").append(r),Sortable.create("inputoptions-list",{handle:"options-handle"}),r.on("click",".editmenu-input-delete",function(){u(this)}).on("click",".editmenu-input-plus",function(){h()}).on("click",".editmenu-input-undo",function(){m()}).on("click",".editmenu-input-save",function(){p()})}v&&e(".menuBarExpand").find(".editmenu-input-undo").show()}function u(t){e(t).up("li").remove()}function h(){var t=e("#inputoptions-list");t.length&&(t.append(i.render(s,{urlPrefix:window.editorStatic,value:""})),Sortable.create("inputoptions-list",{handle:"options-handle"}),setTimeout(function(){t.find("li:last-child input").focus()},100))}function p(){if(e("#inputoptions-list").length){var t=[];e("#inputoptions-list input").each(function(e,i){t.push(i.value)}),e("#"+y).val(t.join("||")),o.onChange(y),e("#inputoptions-open").parent().remove(),l()}}function f(){var t=e(".menuBarExpand"),i=t.find(".predefined-options");for(var n in _){var o=e("<div>",{"class":"predefined-option",title:_[n].join(", "),category:n}).html(n);i.append(o)}t.find(".predefined-option").on("click",function(){v=!0,b=e("#"+y).val();var t=_[this.getAttribute("category")].join("||");e("#"+y).val(t),e("#inputoptions-open").parent().remove(),d()})}function m(){v=!1,e("#"+y).val(b),e("#inputoptions-open").parent().remove(),d()}function g(t){if(Weebly.Restrictions.hasAccess("unlimited_form_inputs"))return!1;var i=e("#inside_"+t).parents(".formlist");if(0===i.length)return!1;var n=i.first().find(".wsite-form-field").size();return n>=Weebly.Restrictions.accessValue("free_form_inputs")}var v,b,y,w={drawRadioOptions:function(e){"string"==typeof e&&(e=e.split("||"));var t="",i="radio-"+Math.floor(999*Math.random());return e.each(function(e){t+='<span class="form-radio-container"><input type="radio" name="'+i+'" /><label>'+e+"</label></span>"}),t},drawSelectOptions:function(e){"string"==typeof e&&(e=e.split("||"));var t='<select class="form-select">';return e.each(function(e){t+="<option>"+e+"</option>"}),t+="</select>"},drawCheckboxes:function(e){"string"==typeof e&&(e=e.split("||"));var t="";return e.each(function(e){t+='<span class="form-radio-container"><input type="checkbox" /><label>'+e+"</label></span>"}),t}};n.vent.on({pageRendered:a,"editor:elements:options:show":function(t,i,n){var o=e(".menuBarExpand");y=o.attr("data-ucfpid");var r=e(".menuBarExpand > a");r.click(function(){l()}),e(".predefined-options-handle a").click(function(){c()})}});var _={Gender:["Male","Female"],Age:["Less than 13","13-18","19-25","26-35","36-50","Over 50","Prefer not to say"],Income:["Less than $10,000","$10,001-$25,000","$25,001-$40,000","$70,001-$100,000","> $100,000","Prefer not to say"],"Marketing Reference":["Internet Search","Advertisment","Friend","Other"],Answer:[_W.utl("javascript.site.editor.ui.weebly_form_2"),_W.utl("javascript.site.editor.ui.weebly_form_3"),_W.utl("javascript.site.editor.ui.weebly_form_4")],Education:["Some High School","Completed High School","Some College","Associate's Degree","Bachelor's Degree","Master's Degree","PhD"],Employment:["Unemployed","Part-time","Full-time","Self-employed"],"Days of the Week":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"Months of the Year":["January","February","March","April","May","June","July","August","September","October","November","December"],"U.S. States":["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","Washington D.C.","West Virginia","Wisconsin","Wyoming"],"How Often":["Everyday","Once per week","2 to 3 times per week","Once per month","Less than once per month"],"How Long":["Less than 1 month","1-6 months","1-3 years","Over 3 years","Never"],Satisfaction:["Very Satisfied","Satisfied","Neutral","Unsatisfied","Very Unsatisfied"],Importance:["Very Important","Important","Neutral","Somewhat Important","Not at all Important"],Agreement:["Strongly Agree","Agree","Neutral","Disagree","Strongly Disagree"],Comparison:["Much Better","Somewhat Better","About the Same","Somewhat Worse","Much Worse"]};return t.reqres.setHandlers({"form:isOverInputLimit":g}),w}),_wAMD.define("editor-site-shared/build/elements/LegacyElement",["jquery","config","site/editor/app","editor-site-shared/build/elements/utils","editor-site-shared/ui/constants","site/editor/ui/images/utils","editor-site-shared/build/elements/Element","legacy/weebly_image_gallery","legacy/slideshow-jq","site/published/formFieldInstructions","site/editor/ui/weebly_form","site/editor/ui/weebly_elements","editor-site-shared/relay"],function(e,t,i,n,o,r,s,a,l,c,d,u,h){var p=Class.create(s,{initialize:function($super,e,i){if($super(e,i),this.includedScripts={},this.platform_element_id||this.eid==o.CONTENT_AREA_ELEMENT_ID||(this.children&&(this.children=i.loadElements(this.children)),this.leftChildren&&(this.leftChildren=i.loadElements(this.leftChildren)),this.rightChildren&&(this.rightChildren=i.loadElements(this.rightChildren))),!adsenseID){var n=this.getContentField();n&&n.content&&n.content.match(/serveAds\.php\?type=adsense/)&&!adsenseID&&!t.chromeless&&(Pages.go("adsenseSetup"),calledAdsenseSetup=!0)}calledExternalSetup||this.externalSetup&&(Pages.go("externalSetup",this.externalSetup,this.id),calledExternalSetup=!0)},processHTML:function($super,t,i){var o=this,r="",c=o.getContentField();if(c&&(r=c.ucfid),t=$super(t,i),t=t.replace(/<!WEEBLYGALLERY2?\-(?:.|\s)*?!>/g,function(){
return o._isGallery=!0,a.update(r,o.getPropertyResult("<!COLUMNS!>"),o.getPropertyResult("<!SPACING!>"),o.getPropertyResult("<!BORDER!>")||0,o.getPropertyResult("<!CROPPING!>")||0,o.getPropertyResult("<!THUMBCAPTIONTYPE!>"),o.getPropertyResult("<!THUMBCAPTIONHOVER!>"),o.getPropertyResult("<!IMAGESET!>"))}),t=t.replace(/<!WEEBLYSLIDESHOW\-\{(?:.|\s)*?\}!>/g,function(){o._isSlideshow=!0;var e=o.getPropertyResult("<!IMAGES!>");return e=e?e.evalJSON():[],l.generateHTML(r,{elementID:r,nav:o.getPropertyResult("<!NAV!>"),navLocation:o.getPropertyResult("<!NAVLOCATION!>"),captionLocation:o.getPropertyResult("<!CAPTIONLOCATION!>"),transition:o.getPropertyResult("<!TRANSITION!>"),autoplay:o.getPropertyResult("<!AUTOPLAY!>"),speed:o.getPropertyResult("<!SPEED!>"),aspectRatio:o.getPropertyResult("<!ASPECTRATIO!>"),showControls:o.getPropertyResult("<!SHOWCONTROLS!>"),randomStart:o.getPropertyResult("<!RANDOMSTART!>"),images:e})}),t=t.replace(/<!WEEBLYRADIO\-((?:.|\s)*?)\-((?:.|\s)*?)!>/g,function(e,t,i){return d.drawRadioOptions(i)}),t=t.replace(/<!WEEBLYSELECT\-((?:.|\s)*?)\-((?:.|\s)*?)!>/g,function(e,t,i){return d.drawSelectOptions(i)}),t=t.replace(/<!WEEBLYCHECKBOXES\-((?:.|\s)*?)\-((?:.|\s)*?)!>/g,function(e,t,i){return d.drawCheckboxes(i)}),o.formParentID&&(t=t.split("<!"+o.formParentID+"CONTENTS!>").join(i?e("#"+o.formParentID+"-form-list")[0].innerHTML:s.renderElementsHTML(o.children)),t=t.replace(/<input type="submit" class="wsite-form-submit" name="submit" value="([^"]*)" \/>/,"<a class='wsite-button'><span class='wsite-button-inner'>$1</span></a>")),o.columnParentID&&(i||(t=t.replace("<!"+o.columnParentID+"LHSUL!>",o.leftChildren.length?s.renderElementsHTML(o.leftChildren):""),t=t.replace("<!"+o.columnParentID+"RHSUL!>",o.rightChildren.length?s.renderElementsHTML(o.rightChildren):""))),t=t.replace(/<!EXTERNAL:([^!]+)!>/g,function(e,t){if(1e3>externalSites){externalSites++;var i=t;if(remoteAccounts[i])return remoteAccounts[i].remoteId}return""}),t=t.replace(/<weebly include_once(_noexport)? ([^>]*)>([\S\s]*?)<\/weebly>/gim,function(e,t,i,r){return n.scriptSrc.length<30&&(n.scriptSrc.push(r),n.scriptId.push(i),o.includedScripts[i]=r),""}),t=t.replace(/<weebly only_export([^>]*)>([\S\s]*?)<\/weebly>/gim,""),o._isInitialImage=!1,/<img[^>]*src=[\'\"][^\'\"]*\/na.png[^'"]*['"][^>]*>/.test(t)){o._isInitialImage=!0;var u=t.match(/(<img[^<]*)/g),h=u[0]+'<p class="wsite-image-placeholder-text">'+_W.utl("javascript.editor-site-shared.build.elements.LegacyElement_1")+"</p>";t=t.replace(/(<img[^<]*)/g,h)}var p,f=o.getPropertyResult("<!DATA!>")||"{}";try{p=JSON.parse(f)}catch(m){p={}}if(p.placeholder&&(o._isInitialImage=!0),i){if(t.match("custom-html-frame"))return!1;if(e(this.li).find(".product-image").length>0)return!0}return t},"%%FEEDURL%%":function(e){return encodeURIComponent(e)},afterRender:function($super,t,o,s){if($super(t,o),o){var d=e(this.li).find(".wsite-form-instructions");d.length&&c.setupFieldInstructions(d[0])}if(this._isGallery&&(o&&a.init(),e(t).find("img").on("dragstart",!1)),this._isSlideshow){var u=this.getContentField().ucfid;whenThemeCSSLoaded(function(){l.init(u),o&&i.vent.trigger("slideshowRerendered"),e(t).find(".wslide-slides img").on("dragstart",!1)})}if(this._isInitialImage&&r.isImageElement(this.eid)?e(t).addClass("wsite-initial-image"):(e(t).hasClass("wsite-initial-image")&&e(t).find(".tablet-placeholder").removeClass("tablet-placeholder"),e(t).removeClass("wsite-initial-image")),s)try{n.runIncludedScripts(this.includedScripts)}catch(h){}},getPropertyResult:function(e){var t=this.getContentField();if(t){var i=t.getProperty(e);return i?i.property_result:void 0}}});return p.beforeRender=function(e){externalSites=0,n.scriptSrc=[],n.scriptId=[]},p.afterRender=function(o){i.vent.trigger("afterRender:LegacyElement",o),t.chromeless&&e(".wsite-youtube-coverbox").hide(),o||h.execute("slideshowadmin:updateManager");try{n.runIncludedScripts()}catch(r){}},Weebly.LegacyElement=p,s.register(!0,p),p}),_wAMD.define("editor-site-shared/build/elements/FormElement",["jquery","underscore","config","editor-site-shared/build/elements/LegacyElement","site/editor/ui/ElementSpotlight","editor-site-shared/build/elements/Element","editor-site-shared/relay","editor-site-shared/build/AreaUtils"],function(e,t,i,n,o,r,s,a){var l=Class.create(n,{initialize:function($super,e,t){$super(e,t),this.context=t},afterRender:function($super,n,r){$super(n,r);var a=this;if(n=e(n),t.each(this.children,function(e){var t=n.find("li#inside_"+e.id);t.length&&e.afterRender(t[0],r)}),!i.chromeless){var c=a.spotlight=new o({element:{id:this.id},container:n.find(".element")[0],uid:"form"+a.id,zIndex:8,elementsPage:"form",onOpen:function(){l.isEditing=!0,c.getControlsInner().addClass("form-controls").append(e("<span class='btn'>"+_W.utl("javascript.editor-site-shared.build.elements.FormElement_2")+"</span>").on("click",function(){s.execute("viewFormData",a.getContentField().ucfid)})).append(e("<span class='btn btn-info'>"+_W.utl("javascript.editor-site-shared.build.elements.FormElement_3")+"</span>").on("click",function(){Weebly.Elements.selectElement(n.find(".element")[0])})).append(e("<span class='btn btn-primary'>"+_W.utl("javascript.editor-site-shared.build.elements.FormElement_4")+"</span>").on("click",function(){c.close(),s.trigger("displayPromoteFormHelpy")}))},onClose:function(){l.isEditing=!1,c.getControlsInner().empty()}});c.cover.attr("title",_W.utl("javascript.editor-site-shared.build.elements.FormElement_5"))}},reposition:function($super){$super(),this.spotlight&&this.spotlight.resize()},unrender:function($super){$super(),this.spotlight&&(this.spotlight.destroy(),delete this.spotlight)},addChild:function(t,i,n,o){if(0>i)return!1;var r,s=this.context.loadElement(t);if(this.li){s.li||(s.li=e(s.renderHTML())[0]);var l=e(this.li).find("#"+n),c=l.children("li.inside").eq(i);c.length?c.before(s.li):l.append(s.li),s.afterRender(s.li),r=a.getAreaInstanceForElement(e(s.li).closest(".weebly-area")[0])}else this.elData&&(r=a.getAreaInstance(null,this.elData.area.type,this.elData.area.name));if(o&&(r=r.getAreaFromSectionId(o)),r.spliceExistingElements([s]),this.children.splice(i,0,s),r&&r.elements){var d=r.elements.indexOf(s);-1!==d&&r.elements.splice(d,1)}return!0}});return Weebly.FormElement=l,r.register("7423607",l),l}),_wAMD.define("editor-site-shared/build/elements/ButtonElement",["jquery","w-global","config","editor-site-shared/build/elements/Element"],function(e,t,i,n){var o=Class.create(n,{processHTML:function($super,t,n){var o=null,r=null,s=[];return t=$super(t),s=e.parseHTML(t),s&&e(s).filter(".element").length&&(o=e(t).find(".wsite-button-inner"),o.length&&(r=o.html(),r&&(t=o.html(r).closest(".element")[0].outerHTML))),t=t.replace(/<a /gi,"<span "),t=t.replace(/<\/a>/gi,"</span>"),i.chromeless&&t.replace(/javascript:;/gi,""),t},afterRender:function($super,i,n){$super(i,n);var o=i.down(".wsite-button-inner");makeElementContentEditable(o,{richTextControls:!1,saveCallback:function(e,i){i=i||t.utl("html.weebly.libraries.classes.elements.ButtonElement_1"),this.setPropertyResult("<!TEXT!>",i),this.save(),this.rerender()}.bind(this)}),o&&e(o).css("cursor","text")},getPropertyResult:function(e){var t=this.getContentField().getProperty(e);return t?t.property_result:void 0},setPropertyResult:function(e,t){var i=this.getContentField().getProperty(e);i&&(i.property_result=t)},save:function(){this.getContentField().saveProperties()}});return n.register("59396708",o),o}),_wAMD.define("tpl!elements/multicolumn.tpl",[],function(){return'<div class="wsite-multicol-table-wrap"{{#margin}} style="margin:{{margin}};"{{/margin}}>\n	<table class="wsite-multicol-table">\n		<tbody class="wsite-multicol-tbody">\n			<tr class="wsite-multicol-tr">\n			{{#columns}}\n				{{>elements/multicolumn-column}}\n			{{/columns}}\n			</tr>\n		</tbody>\n	</table>\n</div>'}),_wAMD.define("tpl!elements/multicolumn-column.tpl",[],function(){return'<td class="wsite-multicol-col" {{#in_editor}}id="{{id}}" {{/in_editor}}style="width:{{width}}; padding:{{padding}};">\n{{#elementsHTML}}\n	{{#in_editor}}<ul class="columnlist" id="{{id}}-ul">{{/in_editor}}\n		{{{elementsHTML}}}\n	{{#in_editor}}</ul>{{/in_editor}}\n{{/elementsHTML}}\n</td>'}),_wAMD.define("editor-site-shared/build/elements/MultiColumnElement",["jquery","underscore","mustache","site/editor/app","config","tpl!elements/multicolumn.tpl","tpl!elements/multicolumn-column.tpl","editor-site-shared/build/elements/Element","site/editor/ui/images/controls","site/editor/ui/images/resizing","editor-site-shared/ui/utils","legacy/weebly_element_utils","editor-site-shared/build/AreaUtils"],function(e,t,i,n,o,r,s,a,l,c,d,u,h){function p(){var t=e(this);return parseInt(t.css("left"),10)+t.offsetParent().offset().left}var f=window.Class.create(a,{cachedColumnElements:null,initialize:function($super,t,i){$super(t,i),this.cachedColumnElements=[],this.columns=e.map(this.columns,function(t){return t=[i.loadElements(t)],e.each(t[0],function(t){var i=h.getAreaInstanceForElement(e(t).closest(".weebly-area")[0]);i&&i.elements&&i.spliceElement(t.id)}),t});var n,r,s,a=this.getContentField();if(a&&(n=a.getProperty("<!DATA!>"),r=a.getProperty("<!LEFTWIDTH!>"),s=a.getProperty("<!RIGHTWIDTH!>")),n&&n.property_result)try{t=JSON.parse(n.property_result)}catch(l){t={}}else t={};var c=this.isLegacy=r&&s;if(t.widths||(c&&r&&s?(this.doLegacyPadding=!0,t.widths=[parseFloat(r.property_result)/100,parseFloat(s.property_result)/100]):t.widths=[.5,.5]),!c&&!o.chromeless&&a){var d=a.getProperty("<!SPACING!>");t.spacing&&(d.property_result=t.spacing,delete t.spacing,a.saveProperties())}this.context=i,this.data=t,this.normalizeWidths()},getDimensions:function($super){var e=this.getColumns();return t.defaults({columns:t.map(this.columns,function(i,n){var o=e.eq(n),r=o.offset();return r=r||{},{top:r.top,left:r.left,height:o.outerHeight(!1),width:o.outerWidth(!1),elements:t.invoke(i,"getDimensions")}})},$super())},"<!COLUMNS!>":function(e,t){var n={in_editor:!0,columns:[],margin:"0 -"+this.getSpacing()};if(this.data)for(var o=0;o<this.data.widths.length;o++)n.columns.push(this.getColumnData(o,t));return i.render(r,n,{"elements/multicolumn-column":s})},getSpacing:function(e,t){var i,e=this.isLegacy,t=this.getContentField();return!e&&t?(i=t.getProperty("<!SPACING!>"),i=i?i.property_result:"5px"):i="5px",i},getColumnData:function(e,t){var i,n=this.getContentField();n&&(i=n.ucfid+"-col"+e,this.isLegacy&&(0===e?i=n.ucfid+"-lhs":1===e&&(i=n.ucfid+"-rhs")));var o="";return t&&this.cachedColumnElements[e]||(o=a.renderElementsHTML(this.columns[e]||[])),{id:i,width:100*this.data.widths[e]+"%",padding:"0 "+this.getSpacing(),elementsHTML:o}},beforeRender:function($super,e){$super(e),this.cacheColumnElements(!0)},cacheColumnElements:function(e){if(this.cachedColumnElements.length=0,this.li){var t=this.getColumns().children();e&&t.detach(),this.cachedColumnElements.push.apply(this.cachedColumnElements,t.get())}},afterRender:function($super,i,o){if($super(i,o),o){var r=this.getColumns();e.each(this.cachedColumnElements,function(e,t){r.eq(e).append(t)})}if(i=e(i),!o){i.addClass(this.constructor.CLASS_PREFIX+"-li");var s=this.constructor.HOVER_CLASS,a=this;i.on({mouseenter:function(){window.isDraggingElement||this.constructor.isResizing||(e(this).addClass(s).parents("."+s).removeClass(s),a.positionDividers())},mouseleave:function(){window.isDraggingElement||this.constructor.isResizing||e(this).removeClass(s)}})}this.doLegacyPadding&&i.find("."+this.constructor.CLASS_PREFIX).eq(0).css("width","98.8%"),this.updateViewElements(),n.vent.on("setMobileView setStandardView",this.updateViewElements,this),this.constructor.allElements=this.constructor.allElements.not("#"+i.attr("id")).add(i),t.each(this.columns,function(e){t.each(e,function(e){var t=i.find("li#inside_"+e.id);t.length&&e.afterRender(t[0],o)})})},updateWidths:function(t){e.isArray(t)&&(this.data.widths=t);for(var i=this.getColumns(),n=0;n<this.data.widths.length;n++)i.eq(n).css("width",100*this.data.widths[n]+"%");this.updateTinyColumns(),this.clearDividers()},addColumn:function(o,r,a){this.data.widths.splice(o,0,r);var l={in_editor:!0},c=e("#inside_"+a.id),d=!1;if(c.length>0?(0===this.cachedColumnElements.length&&this.cacheColumnElements(),this.cachedColumnElements.splice(o,0,!0),l.elementsHTML=c[0].outerHTML,c.remove(),d=!0,this.columns.splice(o,0,[a])):this.columns.splice(o,0,[this.context.loadElement(a)]),"undefined"!=typeof this.li){var u,h,p=i.render(s,t.extend(this.getColumnData(o,d),l)),f=this.getColumns();o>=f.length?(u=f.eq(f.length-1),u.after(p),h=u.next()):(u=f.eq(o),u.before(p),h=u.prev(),h.nextAll().attr("id",function(e,t){return t.split("-")[0]+"-col"+(o+e+1)})),d?this.cachedColumnElements[o]=h.children():(this.cachedColumnElements.splice(o,0,h.children()),this.columns[o][0].afterRender&&this.columns[o][0].afterRender(h.find("li.inside")));var m=1-r;return t.each(this.data.widths,function(e,t,i){t!==o&&(i[t]*=m)}),this.clearDividers(),this.updateWidths(),0===c.length&&n.vent.trigger("editor:elements:newElement"),this.data.widths}},removeColumn:function(e){var i=this.data.widths.splice(e,1);i=i[0],this.columns.splice(e,1),this.cachedColumnElements.splice(e,1);var n=this.getColumns();n.eq(Math.min(e,n.length-1)).remove();var o=1-i;return t.each(this.data.widths,function(e,t,i){i[t]/=o}),this.clearDividers(),this.updateWidths(),this.data.widths},removeEmptyColumns:function(t){var i=this.getColumns(),n=i.filter(function(){var t=e(this);return!t.children().length||!t.children("ul").children().length}),o=i.not(n),r=h.getAreaInstanceForElement(e(this.li).closest(".weebly-area")[0]);if(t&&(r=r.getAreaFromSectionId(t)),1===o.length){e(this.li).before(o.children().children());var s=i.index(o[0]);r.replaceElement(this,this.columns[s]),o=e()}if(0===o.length)return r.context.deleteElement(this.id),!1;if(0===n.length)return null;var a=this;return n.each(function(){a.removeColumn(i.index(this))}),!0},addChild:function(i,n,o){if(0>n)return!1;var r=this.context.loadElement(i),s=o.match(/-col(\d+)$/i);if(!s)return!1;if(s=parseInt(s[1],10),t.isNaN(s))return!1;this.columns[s].splice(n,0,r);var a;if(this.li){var l=e(this.li),c=l.find("#"+o),d=c.find("li.inside").eq(0);if(!d.length)return!1;r.li||(r.li=e(r.renderHTML())[0]),c=c.children("ul"),d=c.children().eq(n),d.length?d.before(r.li):c.append(r.li),r.afterRender(r.li),a=h.getAreaInstanceForElement(e(r.li).closest(".weebly-area")[0])}else this.elData&&(a=h.getAreaInstance(this.elData.area.is_site_wide,this.elData.area.type,this.elData.area.name));if(a&&a.elements){var u=a.elements.indexOf(r);-1!==u&&a.elements.splice(u,1)}return!0},updateViewElements:function(){var t=e(this.li);Weebly.view.isMobileView||o.chromeless?t.find("."+this.constructor.DIVIDER_CLASS).css("display","none"):(t.find("."+this.constructor.DIVIDER_CLASS).css("display",""),this.reposition())},reposition:function($super){$super();var t=e(this.li),i=t.hasClass("inside-hover")||t.hasClass("inside-active");i?this.positionDividers():this.clearDividers(),this.updateTinyColumns()},updateTinyColumns:function(){var t=this.getColumns(),i=this.constructor.TINY_COLUMN_WIDTH,n=this.constructor.TINY_COLUMN_CLASS;t.each(function(){var t=e(this);t.outerWidth()<i?t.addClass(n):t.removeClass(n)})},clearDividers:function(){e(this.li).find("."+this.constructor.CLASS_PREFIX).eq(0).children("."+this.constructor.DIVIDER_CLASS+", ."+this.constructor.DRAG_COVER_CLASS).remove(),this.dividers=null},renderDividers:function(){if(this.clearDividers(),window.elementControlsEnabled&&!this.columnsAreVertical()){var i=e(this.li).find("."+this.constructor.CLASS_PREFIX).eq(0),o=this,r=this.getColumns();this.dividers=[],r.each(function(s){if(s){var a,d=e(this),h=e("<div/>",{"class":o.constructor.DIVIDER_CLASS}).on({mousedown:function(f){function m(e){a=!0,Weebly.Elements.unselectElement();var i=Math.max(Math.min(e.pageX,D),S)-T,n=C+i;if(!e.ctrlKey&&!e.shiftKey){if(i=Math.round((E+i)/A)*A-E,S>C+i||C+i>D)return;if(I){var l=t.find(I,function(e){return Math.abs(e-n)<10});l&&(i=l-C)}}var u=(b+i)/(b+w)*(y+_),p=(w-i)/(b+w)*(y+_);(o.data.widths[s-1]!=u||o.data.widths[s]!=p)&&(o.data.widths[s-1]=u,o.data.widths[s]=p,r.eq(s-1).css("width",100*u+"%"),d.css("width",100*p+"%"),h.css("left",E+i+"px"),o.updateTinyColumns(),c.unsetDimensions(r.eq(s-1).add(r.eq(s))))}function g(){P.fadeOut(400,function(){e(this).remove()}),a&&n.vent.trigger("editor:elements:changed"),h.siblings("."+o.constructor.DRAG_COVER_CLASS).addBack().removeClass("dragging"),k.length&&k.removeClass(o.constructor.GUIDE_CLASS),o.constructor.isResizing=!1,l.enable(),e(document).off(M),o.saveData(),o.killLegacyPadding(),u.repositionElements()}a=!1,o.constructor.isResizing=!0,l.disable();var v=i.offset(),b=r.eq(s-1).outerWidth(),y=o.data.widths[s-1],w=d.outerWidth(),_=o.data.widths[s],E=parseInt(h.css("left"),10),T=f.pageX,C=p.call(this),S=v.left+(s>1?parseInt(o.dividers[s-2].css("left"),10):0),D=v.left+(s<o.dividers.length?parseInt(o.dividers[s].css("left"),10):i.outerWidth());S+=r.eq(s-1).find("."+o.constructor.LIST_CLASS).eq(0).find("> li.inside:not(.wsite-spacer-li)").length?50:5,D-=d.find("."+o.constructor.LIST_CLASS).eq(0).find("> li.inside:not(.wsite-spacer-li)").length?50:5,e(this).siblings("."+o.constructor.DRAG_COVER_CLASS).addBack().addClass("dragging");var I,k=e(),O=e(this).closest("."+o.constructor.CLASS_PREFIX+"-li"),R=O.prev(),x=O.next();R.hasClass("."+o.constructor.CLASS_PREFIX+"-li")&&(k=R.find("."+o.constructor.CLASS_PREFIX).eq(0).children("."+o.constructor.DIVIDER_CLASS).addClass(o.constructor.GUIDE_CLASS)),x.hasClass("."+o.constructor.CLASS_PREFIX+"-li")&&(k=k.add(x.find("."+o.constructor.CLASS_PREFIX).eq(0).children("."+o.constructor.DIVIDER_CLASS).addClass(o.constructor.GUIDE_CLASS))),k.length&&(I=k.map(p).get());var A=Math.round(e(this).closest(".weebly-area, ul."+o.constructor.LIST_CLASS).width()/12),P=e("<div>",{html:window._W.utl("html.weebly.libraries.classes.elements.MultiColumnElement_1"),"class":"wsite-multicol-tooltip"}).hide().appendTo("#_editor-ui").fadeIn(),M={mousemove:m,mouseup:g};return e(document).on(M),!1},click:function(){a||Weebly.Elements.selectElement(this.up(".element"))}}).appendTo(i);o.dividers.push(h)}}),e("<div>",{"class":this.constructor.DRAG_COVER_CLASS,appendTo:i})}},positionDividers:function(){if(!window.elementControlsEnabled||this.columnsAreVertical())return void(this.dividers&&t.invoke(this.dividers,"hide"));var i=this;i.dividers&&e.contains(document,i.dividers[0][0])||i.renderDividers();var n=e(this.li).find("."+this.constructor.CLASS_PREFIX).eq(0).offset();this.getColumns().each(function(t){if(t){var o=i.dividers[t-1],r=Math.round(e(this).offset().left-n.left);o.css("left",r+"px").show()}})},normalizeWidths:function(){var e,t=this.data.widths,i=t.length,n=0;for(e=0;i>e;e++)"number"!=typeof t[e]&&(t[e]=1/i);for(e=0;i>e;e++)n+=t[e];for(e=0;i>e;e++)t[e]/=n;this.data.widths=t},columnsAreVertical:function(){var e=this.getColumns();return e.eq(0).offset().top<e.last().offset().top},getColumns:function(){return e(this.li).find("."+this.constructor.COLUMN_WRAPPER_CLASS).eq(0).children("."+this.constructor.COLUMN_CLASS)},killLegacyPadding:function(){this.doLegacyPadding&&(delete this.doLegacyPadding,e(this.li).find("."+this.constructor.CLASS_PREFIX).eq(0).css("width",""))},saveData:function(){var e=this.getContentField();e.getProperty("<!DATA!>").property_result=JSON.stringify(this.data),e.saveProperties()},unrender:function($super){this.constructor.allElements=this.constructor.allElements.not(this.li),n.vent.off("setMobileView setStandardView",this.updateViewElements,this),$super()},onDrag:function($super,e,t,i){return i=$super(e,t,i),i&&i.el&&this.elData&&d.isChildOf(i.el,this.elData.id)?null:i}});return f.TINY_COLUMN_WIDTH=100,f.CLASS_PREFIX="wsite-multicol",f.TINY_COLUMN_CLASS=f.CLASS_PREFIX+"-col-tiny",f.DIVIDER_CLASS=f.CLASS_PREFIX+"-divider",f.DRAG_COVER_CLASS=f.CLASS_PREFIX+"-drag-cover",f.HOVER_CLASS=f.CLASS_PREFIX+"-li-hover",f.COLUMN_CLASS=f.CLASS_PREFIX+"-col",f.COLUMN_WRAPPER_CLASS=f.CLASS_PREFIX+"-tr",f.GUIDE_CLASS=f.CLASS_PREFIX+"-guide",f.LIST_CLASS="columnlist",f.allElements=e(),f.resizeColumns=function(t){if(e.isNumeric(t)?t=this:"string"==typeof t&&"#"!==t[0]&&(t="#"+t),t=e(t),t.length&&t[0].id.match(/lhs-list/)){var i=e("#"+t[0].id.replace(/lhs/,"rhs"));if(i.length){t.css("height","auto"),i.css("height","auto");var n=t.height(),o=i.height();100>n&&100>o?(t.css("height","100px"),i.css("height","100px")):n>o?i.css("height",n-2+"px"):o>n&&t.css("height",o-2+"px"),i.closest(".column").nextUntil(".splitpane-divider").last().next().css("height",Math.max(100,n,o)+"px")}}},f.resizeAllColumns=function(){this.allElements.each(this.resizeColumns)},n.vent.on({"imageElementUpdated slideshowRerendered scriptFrameResized imageResizeStopped":function(){f.resizeAllColumns()}}),window.resizeColumns=e.proxy(f.resizeColumns,f),window.resizeAllColumns=e.proxy(f.resizeAllColumns,f),window.MultiColumnElement=f,a.register(function(e){return"columns"in e},f),e(document).on("load",".columnlist .element img",function(){var t=this.up(".columnlist");t&&(t.id.match(/rhs-list/)&&(t=e(t.id.replace(/rhs-list/,"lhs-list"))),f.resizeColumns(t))}),f}),_wAMD.define("editor-site-shared/build/elements/SocialElement",["jquery","underscore","config","editor-site-shared/build/utils","editor/build/themes/data","editor-site-shared/build/elements/Element","editor-site-shared/relay","editor-site-shared/build/AreaUtils"],function(e,t,i,n,o,r,s,a){function l(e,i){var n=(e.badge_order||[]).slice(0);n=n.concat(Object.keys(e.badges)).uniq();var o=t.difference(n,Object.keys(i));return o.length&&(n=t.difference(n,o)),n}function c(e){e=e||{};for(var t,i=0;i<f.length;i++)t=e[f[i]]||{},e[f[i]]={url:t.url||!0,active:!0};return e}function d(e){var t=n.isUsingGlyphIcons(o.currentThemeData),i=-1!==f.indexOf("instagram");return t&&!i?(f.splice(2,0,"instagram"),p.instagram={display:"Instagram",hint:_W.utl("javascript.editor-site-shared.build.elements.SocialElement_28")}):!t&&i&&(f.splice(f.indexOf("instagram"),1),delete p.instagram),e=n.convertBadgeData(e,p)}function u(e){return n.isUsingGlyphIcons(o.currentThemeData)?!0:-1!==h().indexOf(e)}function h(){return o.currentThemeData.social.length?o.currentThemeData.social:Object.keys(p)}var p={facebook:{display:"Facebook",hint:_W.utl("html.weebly.libraries.classes.elements.SocialElement_17")},twitter:{display:"Twitter",hint:_W.utl("html.weebly.libraries.classes.elements.SocialElement_18")},linkedin:{display:"Linkedin",hint:_W.utl("html.weebly.libraries.classes.elements.SocialElement_19")},mail:{display:"Mail",hint:_W.utl("html.weebly.libraries.classes.elements.SocialElement_20")},flickr:{display:"Flickr",hint:_W.utl("html.weebly.libraries.classes.elements.SocialElement_21")},pinterest:{display:"Pinterest",hint:_W.utl("html.weebly.libraries.classes.elements.SocialElement_22")},plus:{display:"Google+",hint:_W.utl("html.weebly.libraries.classes.elements.SocialElement_23")},rss:{display:"RSS",hint:_W.utl("html.weebly.libraries.classes.elements.SocialElement_24")},vimeo:{display:"Vimeo",hint:_W.utl("html.weebly.libraries.classes.elements.SocialElement_25")},yahoo:{display:"Yahoo!",hint:_W.utl("html.weebly.libraries.classes.elements.SocialElement_26")},youtube:{display:"YouTube",hint:_W.utl("html.weebly.libraries.classes.elements.SocialElement_27")}},f=["facebook","twitter","linkedin","mail"],m=Class.create(r,{initialize:function($super,e,t){$super(e,t),this.formatSocialData()},formatSocialData:function(){var e=this.getDataProperty();e=e?e.evalJSON():{},e.badges&&$H(e.badges).keys().length||(e.badges=c()),e.badges=d(e.badges),this.skipGetProperty=!1,this.data=e},"<!BADGES!>":function(){var e,t,n,o,r,s,a,c,h="",p=[],f=!1;if(this.data&&this.skipGetProperty||this.formatSocialData(),e=this.data,t=this.data.badges||d(e.badges),n=l(e,t),i.chromeless&&(f=this.showPlaceholder()),f)h='<a><span class="icon icon-social"></span>'+_W.utl("html.weebly.libraries.classes.elements.SocialElement_14")+"</a>";else{for(var m=0;m<n.length;m++)r=n[m],o=t[r],o?(s="",o.active&&o.url&&u(r)?void 0===a?(a=m,s="first-child"):c=m:s="hidden",p.push('<a class="'+s+" wsite-social-item wsite-social-"+r+'" href="#" data-social="'+r+'" onclick="return false"><span class="wsite-social-item-inner"></span></a>')):p.push("");c&&(p[c]=p[c].slice(0,10)+"last-child "+p[c].slice(11)),h=p.join("")}return h},getDataProperty:function(){var e=this.getContentField();return e.getProperty("<!DATA!>")?e.getProperty("<!DATA!>").property_result:void 0},showPlaceholder:function(){var e=!1,t=this.getDataProperty();if(!t)return e=!0;t=t.evalJSON(),e=!0;for(var i in t.badges)t.badges[i].active&&(e=!1);return e},afterRender:function($super,t,n){$super(t,n);var o,r,s,a=this,l=a.li.down("span.wsite-social"),c=a.li.down(".element"),d=!1;if(l&&c){o=e(l).children(),i.chromeless&&(d=this.showPlaceholder()),d?e(a.li).find(".element").addClass("tablet-placeholder"):e(a.li).find(".element").removeClass("tablet-placeholder");for(var h=0;h<o.length;h++)r=o[h].getAttribute("data-social"),s=this.data.badges[r],s&&s.active&&s.url&&u(r)?o[h].removeClassName("hidden"):o[h].addClassName("hidden")}},disableSocialBadges:function(){var e=a.getAreaInstanceForElement(this.li.up(".weebly-area"));e&&"social"===e.type&&!e.name&&(e.hide(),updateDesignElements(),s.execute("mobile:updateAreaOptions"),this.destroyToolbar(),this.data.badges=c(this.data.badges),this.save(),Weebly.view.isMobileView||showTip(_W.utl("html.weebly.libraries.classes.elements.SocialElement_15"),$("weebly_tab_themes"),"y","social",void 0,300))}});Weebly.SocialElement=m,r.register("35527740",m)});var mejs=mejs||{};mejs.version="2.9.5",mejs.meIndex=0,mejs.plugins={silverlight:[{version:[3,0],types:["video/mp4","video/m4v","video/mov","video/wmv","audio/wma","audio/m4a","audio/mp3","audio/wav","audio/mpeg"]}],flash:[{version:[9,0,124],types:["video/mp4","video/m4v","video/mov","video/flv","video/rtmp","video/x-flv","audio/flv","audio/x-flv","audio/mp3","audio/m4a","audio/mpeg","video/youtube","video/x-youtube"]}],youtube:[{version:null,types:["video/youtube","video/x-youtube"]}],vimeo:[{version:null,types:["video/vimeo"]}]},mejs.Utility={encodeUrl:function(e){return encodeURIComponent(e)},escapeHTML:function(e){return e.toString().split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+this.escapeHTML(e)+'">x</a>',t.firstChild.href},getScriptPath:function(e){for(var t,i,n=0,o="",r="",s=document.getElementsByTagName("script"),a=s.length,l=e.length;a>n;n++){for(i=s[n].src,t=0;l>t;t++)if(r=e[t],i.indexOf(r)>-1){o=i.substring(0,i.indexOf(r));break}if(""!==o)break}return o},secondsToTimeCode:function(e,t,i,n){"undefined"==typeof i?i=!1:"undefined"==typeof n&&(n=25);var o=Math.floor(e/3600)%24,r=Math.floor(e/60)%60,s=Math.floor(e%60),a=Math.floor((e%1*n).toFixed(3)),l=(t||o>0?(10>o?"0"+o:o)+":":"")+(10>r?"0"+r:r)+":"+(10>s?"0"+s:s)+(i?":"+(10>a?"0"+a:a):"");return l},timeCodeToSeconds:function(e,t,i,n){"undefined"==typeof i?i=!1:"undefined"==typeof n&&(n=25);var o=e.split(":"),r=parseInt(o[0],10),s=parseInt(o[1],10),a=parseInt(o[2],10),l=0,c=0;return i&&(l=parseInt(o[3])/n),c=3600*r+60*s+a+l},convertSMPTEtoSeconds:function(e){if("string"!=typeof e)return!1;e=e.replace(",",".");var t=0,i=-1!=e.indexOf(".")?e.split(".")[1].length:0,n=1;e=e.split(":").reverse();for(var o=0;o<e.length;o++)n=1,o>0&&(n=Math.pow(60,o)),t+=Number(e[o])*n;return Number(t.toFixed(i))},removeSwf:function(e){var t=document.getElementById(e);t&&"OBJECT"==t.nodeName&&(mejs.MediaFeatures.isIE?(t.style.display="none",function(){4==t.readyState?mejs.Utility.removeObjectInIE(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))},removeObjectInIE:function(e){var t=document.getElementById(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}},mejs.PluginDetector={hasPluginVersion:function(e,t){var i=this.plugins[e];return t[1]=t[1]||0,t[2]=t[2]||0,i[0]>t[0]||i[0]==t[0]&&i[1]>t[1]||i[0]==t[0]&&i[1]==t[1]&&i[2]>=t[2]?!0:!1},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(e,t,i,n,o){this.plugins[e]=this.detectPlugin(t,i,n,o)},detectPlugin:function(e,t,i,n){var o,r,s,a=[0,0,0];if("undefined"!=typeof this.nav.plugins&&"object"==typeof this.nav.plugins[e]){if(o=this.nav.plugins[e].description,o&&("undefined"==typeof this.nav.mimeTypes||!this.nav.mimeTypes[t]||this.nav.mimeTypes[t].enabledPlugin))for(a=o.replace(e,"").replace(/^\s+/,"").replace(/\sr/gi,".").split("."),r=0;r<a.length;r++)a[r]=parseInt(a[r].match(/\d+/),10)}else if("undefined"!=typeof window.ActiveXObject)try{s=new ActiveXObject(i),s&&(a=n(s))}catch(l){}return a}},mejs.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(e){var t=[],i=e.GetVariable("$version");return i&&(i=i.split(" ")[1].split(","),t=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]),t}),mejs.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(e){var t=[0,0,0,0],i=function(e,t,i,n){for(;e.isVersionSupported(t[0]+"."+t[1]+"."+t[2]+"."+t[3]);)t[i]+=n;t[i]-=n};return i(e,t,0,1),i(e,t,1,1),i(e,t,2,1e4),i(e,t,2,1e3),i(e,t,2,100),i(e,t,2,10),i(e,t,2,1),i(e,t,3,1),t}),mejs.MediaFeatures={init:function(){var e,t,i=this,n=document,o=mejs.PluginDetector.nav,r=mejs.PluginDetector.ua.toLowerCase(),s=["source","track","audio","video"];i.isiPad=null!==r.match(/ipad/i),i.isiPhone=null!==r.match(/iphone/i),i.isiOS=i.isiPhone||i.isiPad,i.isAndroid=null!==r.match(/android/i),i.isBustedAndroid=null!==r.match(/android 2\.[12]/),i.isIE=-1!=o.appName.toLowerCase().indexOf("microsoft"),i.isChrome=null!==r.match(/chrome/gi),i.isFirefox=null!==r.match(/firefox/gi),i.isWebkit=null!==r.match(/webkit/gi),i.isGecko=null!==r.match(/gecko/gi)&&!i.isWebkit,i.isOpera=null!==r.match(/opera/gi),i.hasTouch="ontouchstart"in window;for(e=0;e<s.length;e++)t=document.createElement(s[e]);i.supportsMediaTag="undefined"!=typeof t.canPlayType||i.isBustedAndroid,i.hasSemiNativeFullScreen="undefined"!=typeof t.webkitEnterFullscreen,i.hasWebkitNativeFullScreen="undefined"!=typeof t.webkitRequestFullScreen,i.hasMozNativeFullScreen="undefined"!=typeof t.mozRequestFullScreen,i.hasTrueNativeFullScreen=i.hasWebkitNativeFullScreen||i.hasMozNativeFullScreen,i.nativeFullScreenEnabled=i.hasTrueNativeFullScreen,i.hasMozNativeFullScreen&&(i.nativeFullScreenEnabled=t.mozFullScreenEnabled),this.isChrome&&(i.hasSemiNativeFullScreen=!1),i.hasTrueNativeFullScreen&&(i.fullScreenEventName=i.hasWebkitNativeFullScreen?"webkitfullscreenchange":"mozfullscreenchange",i.isFullScreen=function(){return t.mozRequestFullScreen?n.mozFullScreen:t.webkitRequestFullScreen?n.webkitIsFullScreen:void 0},i.requestFullScreen=function(e){i.hasWebkitNativeFullScreen?e.webkitRequestFullScreen():i.hasMozNativeFullScreen&&e.mozRequestFullScreen()},i.cancelFullScreen=function(){i.hasWebkitNativeFullScreen?document.webkitCancelFullScreen():i.hasMozNativeFullScreen&&document.mozCancelFullScreen()}),i.hasSemiNativeFullScreen&&r.match(/mac os x 10_5/i)&&(i.hasNativeFullScreen=!1,i.hasSemiNativeFullScreen=!1)}},mejs.MediaFeatures.init(),mejs.HtmlMediaElement={pluginType:"native",isFullScreen:!1,setCurrentTime:function(e){this.currentTime=e},setMuted:function(e){this.muted=e},setVolume:function(e){this.volume=e},stop:function(){this.pause()},setSrc:function(e){for(var t=this.getElementsByTagName("source");t.length>0;)this.removeChild(t[0]);if("string"==typeof e)this.src=e;else{var i,n;for(i=0;i<e.length;i++)n=e[i],this.canPlayType(n.type)&&(this.src=n.src)}},setVideoSize:function(e,t){this.width=e,this.height=t}},mejs.PluginMediaElement=function(e,t,i){this.id=e,this.pluginType=t,this.src=i,this.events={}},mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:"",isFullScreen:!1,playbackRate:-1,
defaultPlaybackRate:-1,seekable:[],played:[],paused:!0,ended:!1,seeking:!1,duration:0,error:null,tagName:"",muted:!1,volume:1,currentTime:0,play:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.playVideo():this.pluginApi.playMedia(),this.paused=!1)},load:function(){null!=this.pluginApi&&("youtube"==this.pluginType||this.pluginApi.loadMedia(),this.paused=!1)},pause:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.pauseVideo():this.pluginApi.pauseMedia(),this.paused=!0)},stop:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.stopVideo():this.pluginApi.stopMedia(),this.paused=!0)},canPlayType:function(e){var t,i,n,o=mejs.plugins[this.pluginType];for(t=0;t<o.length;t++)if(n=o[t],mejs.PluginDetector.hasPluginVersion(this.pluginType,n.version))for(i=0;i<n.types.length;i++)if(e==n.types[i])return!0;return!1},positionFullscreenButton:function(e,t,i){null!=this.pluginApi&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(e,t,i)},hideFullscreenButton:function(){null!=this.pluginApi&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(e){if("string"==typeof e)this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(e)),this.src=mejs.Utility.absolutizeUrl(e);else{var t,i;for(t=0;t<e.length;t++)i=e[t],this.canPlayType(i.type)&&(this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(i.src)),this.src=mejs.Utility.absolutizeUrl(e))}},setCurrentTime:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.seekTo(e):this.pluginApi.setCurrentTime(e),this.currentTime=e)},setVolume:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.setVolume(100*e):this.pluginApi.setVolume(e),this.volume=e)},setMuted:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?(e?this.pluginApi.mute():this.pluginApi.unMute(),this.muted=e,this.dispatchEvent("volumechange")):this.pluginApi.setMuted(e),this.muted=e)},setVideoSize:function(e,t){this.pluginElement.style&&(this.pluginElement.style.width=e+"px",this.pluginElement.style.height=t+"px"),null!=this.pluginApi&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(e,t)},setFullscreen:function(e){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(e)},enterFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!0)},exitFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!1)},addEventListener:function(e,t,i){this.events[e]=this.events[e]||[],this.events[e].push(t)},removeEventListener:function(e,t){if(!e)return this.events={},!0;var n=this.events[e];if(!n)return!0;if(!t)return this.events[e]=[],!0;for(i=0;i<n.length;i++)if(n[i]===t)return this.events[e].splice(i,1),!0;return!1},dispatchEvent:function(e){var t,i,n=this.events[e];if(n)for(i=Array.prototype.slice.call(arguments,1),t=0;t<n.length;t++)n[t].apply(null,i)},attributes:{},hasAttribute:function(e){return e in this.attributes},removeAttribute:function(e){delete this.attributes[e]},getAttribute:function(e){return this.hasAttribute(e)?this.attributes[e]:""},setAttribute:function(e,t){this.attributes[e]=t},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id)}},mejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(e,t,i){this.pluginMediaElements[e]=t,this.htmlMediaElements[e]=i},initPlugin:function(e){var t=this.pluginMediaElements[e],i=this.htmlMediaElements[e];if(t){switch(t.pluginType){case"flash":t.pluginElement=t.pluginApi=document.getElementById(e);break;case"silverlight":t.pluginElement=document.getElementById(t.id),t.pluginApi=t.pluginElement.Content.MediaElementJS}null!=t.pluginApi&&t.success&&t.success(t,i)}},fireEvent:function(e,t,i){var n,o,r,s=this.pluginMediaElements[e];s.ended=!1,s.paused=!0,n={type:t,target:s};for(o in i)s[o]=i[o],n[o]=i[o];r=i.bufferedTime||0,n.target.buffered=n.buffered={start:function(e){return 0},end:function(e){return r},length:1},s.dispatchEvent(n.type,n)}},mejs.MediaElementDefaults={mode:"auto",plugins:["flash","silverlight","youtube","vimeo"],enablePluginDebug:!1,type:"",pluginPath:mejs.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",flashStreamer:"",enablePluginSmoothing:!1,silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:.8,success:function(){},error:function(){}},mejs.MediaElement=function(e,t){return mejs.HtmlMediaElementShim.create(e,t)},mejs.HtmlMediaElementShim={create:function(e,t){var i,n,o=mejs.MediaElementDefaults,r="string"==typeof e?document.getElementById(e):e,s=r.tagName.toLowerCase(),a="audio"===s||"video"===s,l=a?r.getAttribute("src"):r.getAttribute("href"),c=r.getAttribute("poster"),d=r.getAttribute("autoplay"),u=r.getAttribute("preload"),h=r.getAttribute("controls");for(n in t)o[n]=t[n];return l="undefined"==typeof l||null===l||""==l?null:l,c="undefined"==typeof c||null===c?"":c,u="undefined"==typeof u||null===u||"false"===u?"none":u,d=!("undefined"==typeof d||null===d||"false"===d),h=!("undefined"==typeof h||null===h||"false"===h),i=this.determinePlayback(r,o,mejs.MediaFeatures.supportsMediaTag,a,l),i.url=null!==i.url?mejs.Utility.absolutizeUrl(i.url):"","native"==i.method?(mejs.MediaFeatures.isBustedAndroid&&(r.src=i.url,r.addEventListener("click",function(){r.play()},!1)),this.updateNative(i,o,d,u)):""!==i.method?this.createPlugin(i,o,c,d,u,h):(this.createErrorMessage(i,o,c),this)},determinePlayback:function(e,t,i,n,o){var r,s,a,l,c,d,u,h,p,f,m=[],g={method:"",url:"",htmlMediaElement:e,isVideo:"audio"!=e.tagName.toLowerCase()};if("undefined"!=typeof t.type&&""!==t.type)if("string"==typeof t.type)m.push({type:t.type,url:o});else for(r=0;r<t.type.length;r++)m.push({type:t.type[r],url:o});else if(null!==o)d=this.formatType(o,e.getAttribute("type")),m.push({type:d,url:o});else for(r=0;r<e.childNodes.length;r++)c=e.childNodes[r],1==c.nodeType&&"source"==c.tagName.toLowerCase()&&(o=c.getAttribute("src"),d=this.formatType(o,c.getAttribute("type")),m.push({type:d,url:o}));if(!n&&m.length>0&&null!==m[0].url&&this.getTypeFromFile(m[0].url).indexOf("audio")>-1&&(g.isVideo=!1),mejs.MediaFeatures.isBustedAndroid&&(e.canPlayType=function(e){return null!==e.match(/video\/(mp4|m4v)/gi)?"maybe":""}),i&&("auto"===t.mode||"auto_plugin"===t.mode||"native"===t.mode)){for(n||(f=document.createElement(g.isVideo?"video":"audio"),e.parentNode.insertBefore(f,e),e.style.display="none",g.htmlMediaElement=e=f),r=0;r<m.length;r++)if(""!==e.canPlayType(m[r].type).replace(/no/,"")||""!==e.canPlayType(m[r].type.replace(/mp3/,"mpeg")).replace(/no/,"")){g.method="native",g.url=m[r].url;break}if("native"===g.method&&(null!==g.url&&(e.src=g.url),"auto_plugin"!==t.mode))return g}if("auto"===t.mode||"auto_plugin"===t.mode||"shim"===t.mode)for(r=0;r<m.length;r++)for(d=m[r].type,s=0;s<t.plugins.length;s++)for(u=t.plugins[s],h=mejs.plugins[u],a=0;a<h.length;a++)if(p=h[a],null==p.version||mejs.PluginDetector.hasPluginVersion(u,p.version))for(l=0;l<p.types.length;l++)if(d==p.types[l])return g.method=u,g.url=m[r].url,g;return"auto_plugin"===t.mode&&"native"===g.method?g:(""===g.method&&m.length>0&&(g.url=m[0].url),g)},formatType:function(e,t){return e&&!t?this.getTypeFromFile(e):t&&~t.indexOf(";")?t.substr(0,t.indexOf(";")):t},getTypeFromFile:function(e){var t=e.substring(e.lastIndexOf(".")+1);return(/(mp4|m4v|ogg|ogv|webm|webmv|flv|wmv|mpeg|mov)/gi.test(t)?"video":"audio")+"/"+this.getTypeFromExtension(t)},getTypeFromExtension:function(e){switch(e){case"mp4":case"m4v":return"mp4";case"webm":case"webma":case"webmv":return"webm";case"ogg":case"oga":case"ogv":return"ogg";default:return e}},createErrorMessage:function(e,t,i){var n=e.htmlMediaElement,o=document.createElement("div");o.className="me-cannotplay";try{o.style.width=n.width+"px",o.style.height=n.height+"px"}catch(r){}o.innerHTML=""!==i?'<a href="'+e.url+'"><img src="'+i+'" width="100%" height="100%" /></a>':'<a href="'+e.url+'"><span>'+_W.utl("html.weebly.libraries.mediaelement.mediaelement-and-player_1")+"</span></a>",n.parentNode.insertBefore(o,n),n.style.display="none",t.error(n)},createPlugin:function(e,t,i,n,o,r){var s,a,l,c=e.htmlMediaElement,d=1,u=1,h="me_"+e.method+"_"+mejs.meIndex++,p=new mejs.PluginMediaElement(h,e.method,e.url),f=document.createElement("div");p.tagName=c.tagName;for(var m=0;m<c.attributes.length;m++){var g=c.attributes[m];1==g.specified&&p.setAttribute(g.name,g.value)}for(a=c.parentNode;null!==a&&"body"!=a.tagName.toLowerCase();){if("p"==a.parentNode.tagName.toLowerCase()){a.parentNode.parentNode.insertBefore(a,a.parentNode);break}a=a.parentNode}switch(e.isVideo?(d=t.videoWidth>0?t.videoWidth:null!==c.getAttribute("width")?c.getAttribute("width"):t.defaultVideoWidth,u=t.videoHeight>0?t.videoHeight:null!==c.getAttribute("height")?c.getAttribute("height"):t.defaultVideoHeight,d=mejs.Utility.encodeUrl(d),u=mejs.Utility.encodeUrl(u)):t.enablePluginDebug&&(d=320,u=240),p.success=t.success,mejs.MediaPluginBridge.registerPluginElement(h,p,c),f.className="me-plugin",f.id=h+"_container",e.isVideo?c.parentNode.insertBefore(f,c):document.body.insertBefore(f,document.body.childNodes[0]),l=["id="+h,"isvideo="+(e.isVideo?"true":"false"),"autoplay="+(n?"true":"false"),"preload="+o,"width="+d,"startvolume="+t.startVolume,"timerrate="+t.timerRate,"flashstreamer="+t.flashStreamer,"height="+u],null!==e.url&&("flash"==e.method?l.push("file="+mejs.Utility.encodeUrl(e.url)):l.push("file="+e.url)),t.enablePluginDebug&&l.push("debug=true"),t.enablePluginSmoothing&&l.push("smoothing=true"),r&&l.push("controls=true"),t.pluginVars&&(l=l.concat(t.pluginVars)),e.method){case"silverlight":f.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+h+'" name="'+h+'" width="'+d+'" height="'+u+'"><param name="initParams" value="'+l.join(",")+'" /><param name="windowless" value="true" /><param name="background" value="black" /><param name="minRuntimeVersion" value="3.0.0.0" /><param name="autoUpgrade" value="true" /><param name="source" value="'+t.pluginPath+t.silverlightName+'" /></object>';break;case"flash":mejs.MediaFeatures.isIE?(s=document.createElement("div"),f.appendChild(s),s.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+h+'" width="'+d+'" height="'+u+'"><param name="movie" value="'+t.pluginPath+t.flashName+"?x="+new Date+'" /><param name="flashvars" value="'+l.join("&amp;")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /></object>'):f.innerHTML='<embed id="'+h+'" name="'+h+'" play="true" loop="false" quality="high" bgcolor="#000000" wmode="transparent" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" src="'+t.pluginPath+t.flashName+'" flashvars="'+l.join("&")+'" width="'+d+'" height="'+u+'"></embed>';break;case"youtube":var v=e.url.substr(e.url.lastIndexOf("=")+1);youtubeSettings={container:f,containerId:f.id,pluginMediaElement:p,pluginId:h,videoId:v,height:u,width:d},mejs.PluginDetector.hasPluginVersion("flash",[10,0,0])?mejs.YouTubeApi.createFlash(youtubeSettings):mejs.YouTubeApi.enqueueIframe(youtubeSettings);break;case"vimeo":p.vimeoid=e.url.substr(e.url.lastIndexOf("/")+1),f.innerHTML='<object width="'+d+'" height="'+u+'"><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="flashvars" value="api=1" /><param name="movie" value="http://vimeo.com/moogaloop.swf?clip_id='+p.vimeoid+'&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00adef&amp;fullscreen=1&amp;autoplay=0&amp;loop=0" /><embed src="//vimeo.com/moogaloop.swf?api=1&amp;clip_id='+p.vimeoid+'&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00adef&amp;fullscreen=1&amp;autoplay=0&amp;loop=0" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="'+d+'" height="'+u+'"></embed></object>'}return c.style.display="none",c.removeAttribute("autoplay"),p},updateNative:function(e,t,i,n){var o,r=e.htmlMediaElement;for(o in mejs.HtmlMediaElement)r[o]=mejs.HtmlMediaElement[o];return t.success(r,r),r}},mejs.YouTubeApi={isIframeStarted:!1,isIframeLoaded:!1,loadIframeApi:function(){if(!this.isIframeStarted){var e=document.createElement("script");e.src="http://www.youtube.com/player_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),this.isIframeStarted=!0}},iframeQueue:[],enqueueIframe:function(e){this.isLoaded?this.createIframe(e):(this.loadIframeApi(),this.iframeQueue.push(e))},createIframe:function(e){var t=e.pluginMediaElement,i=new YT.Player(e.containerId,{height:e.height,width:e.width,videoId:e.videoId,playerVars:{controls:0},events:{onReady:function(){e.pluginMediaElement.pluginApi=i,mejs.MediaPluginBridge.initPlugin(e.pluginId),setInterval(function(){mejs.YouTubeApi.createEvent(i,t,"timeupdate")},250)},onStateChange:function(e){mejs.YouTubeApi.handleStateChange(e.data,i,t)}}})},createEvent:function(e,t,i){var n={type:i,target:t};if(e&&e.getDuration){t.currentTime=n.currentTime=e.getCurrentTime(),t.duration=n.duration=e.getDuration(),n.paused=t.paused,n.ended=t.ended,n.muted=e.isMuted(),n.volume=e.getVolume()/100,n.bytesTotal=e.getVideoBytesTotal(),n.bufferedBytes=e.getVideoBytesLoaded();var o=n.bufferedBytes/n.bytesTotal*n.duration;n.target.buffered=n.buffered={start:function(e){return 0},end:function(e){return o},length:1}}t.dispatchEvent(n.type,n)},iFrameReady:function(){for(this.isLoaded=!0,this.isIframeLoaded=!0;this.iframeQueue.length>0;){var e=this.iframeQueue.pop();this.createIframe(e)}},flashPlayers:{},createFlash:function(e){this.flashPlayers[e.pluginId]=e;var t,i="http://www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid="+e.pluginId+"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0";mejs.MediaFeatures.isIE?(t=document.createElement("div"),e.container.appendChild(t),t.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+e.pluginId+'" width="'+e.width+'" height="'+e.height+'"><param name="movie" value="'+i+'" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /></object>'):e.container.innerHTML='<object type="application/x-shockwave-flash" id="'+e.pluginId+'" data="'+i+'" width="'+e.width+'" height="'+e.height+'" style="visibility: visible; "><param name="allowScriptAccess" value="always"><param name="wmode" value="transparent"></object>'},flashReady:function(e){var t=this.flashPlayers[e],i=document.getElementById(e),n=t.pluginMediaElement;n.pluginApi=n.pluginElement=i,mejs.MediaPluginBridge.initPlugin(e),i.cueVideoById(t.videoId);var o=t.containerId+"_callback";window[o]=function(e){mejs.YouTubeApi.handleStateChange(e,i,n)},i.addEventListener("onStateChange",o),setInterval(function(){mejs.YouTubeApi.createEvent(i,n,"timeupdate")},250)},handleStateChange:function(e,t,i){switch(e){case-1:i.paused=!0,i.ended=!0,mejs.YouTubeApi.createEvent(t,i,"loadedmetadata");break;case 0:i.paused=!1,i.ended=!0,mejs.YouTubeApi.createEvent(t,i,"ended");break;case 1:i.paused=!1,i.ended=!1,mejs.YouTubeApi.createEvent(t,i,"play"),mejs.YouTubeApi.createEvent(t,i,"playing");break;case 2:i.paused=!0,i.ended=!1,mejs.YouTubeApi.createEvent(t,i,"pause");break;case 3:mejs.YouTubeApi.createEvent(t,i,"progress");break;case 5:}}},window.mejs=mejs,window.MediaElement=mejs.MediaElement,"undefined"!=typeof jQuery?mejs.$=jQuery:"undefined"!=typeof ender&&(mejs.$=ender),function(e){mejs.MepDefaults={poster:"",defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(e){return.05*e.duration},defaultSeekForwardInterval:function(e){return.05*e.duration},audioWidth:-1,audioHeight:-1,startVolume:.8,loop:!1,enableAutosize:!0,alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,autosizeProgress:!0,alwaysShowControls:!1,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],isVideo:!0,enableKeyboard:!0,pauseOtherPlayers:!0,keyActions:[{keys:[32,179],action:function(e,t){t.paused||t.ended?t.play():t.pause()}},{keys:[38],action:function(e,t){var i=Math.min(t.volume+.1,1);t.setVolume(i)}},{keys:[40],action:function(e,t){var i=Math.max(t.volume-.1,0);t.setVolume(i)}},{keys:[37,227],action:function(e,t){if(!isNaN(t.duration)&&t.duration>0){e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.max(t.currentTime-e.options.defaultSeekBackwardInterval(t),0);t.setCurrentTime(i)}}},{keys:[39,228],action:function(e,t){if(!isNaN(t.duration)&&t.duration>0){e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.min(t.currentTime+e.options.defaultSeekForwardInterval(t),t.duration);t.setCurrentTime(i)}}},{keys:[70],action:function(e,t){"undefined"!=typeof e.enterFullScreen&&(e.isFullScreen?e.exitFullScreen():e.enterFullScreen())}}]},mejs.mepIndex=0,mejs.players=[],mejs.MediaElementPlayer=function(t,i){if(!(this instanceof mejs.MediaElementPlayer))return new mejs.MediaElementPlayer(t,i);var n=this;return n.$media=n.$node=e(t),n.node=n.media=n.$media[0],"undefined"!=typeof n.node.player?n.node.player:(n.node.player=n,"undefined"==typeof i&&(i=n.$node.data("mejsoptions")),n.options=e.extend({},mejs.MepDefaults,i),mejs.players.push(n),n.init(),n)},mejs.MediaElementPlayer.prototype={hasFocus:!1,controlsAreVisible:!0,init:function(){var t=this,i=mejs.MediaFeatures,n=e.extend(!0,{},t.options,{success:function(e,i){t.meReady(e,i)},error:function(e){t.handleError(e)}}),o=t.media.tagName.toLowerCase();if(t.isDynamic="audio"!==o&&"video"!==o,t.isDynamic?t.isVideo=t.options.isVideo:t.isVideo="audio"!==o&&t.options.isVideo,i.isiPad&&t.options.iPadUseNativeControls||i.isiPhone&&t.options.iPhoneUseNativeControls)t.$media.attr("controls","controls"),i.isiPad&&null!==t.media.getAttribute("autoplay")&&(t.media.load(),t.media.play());else if(i.isAndroid&&t.AndroidUseNativeControls);else{if(t.$media.removeAttr("controls"),t.id="mep_"+mejs.mepIndex++,t.container=e('<div id="'+t.id+'" class="mejs-container"><div class="mejs-inner"><div class="mejs-mediaelement"></div><div class="mejs-layers"></div><div class="mejs-controls"></div><div class="mejs-clear"></div></div></div>').addClass(t.$media[0].className).insertBefore(t.$media),t.container.addClass((i.isAndroid?"mejs-android ":"")+(i.isiOS?"mejs-ios ":"")+(i.isiPad?"mejs-ipad ":"")+(i.isiPhone?"mejs-iphone ":"")+(t.isVideo?"mejs-video ":"mejs-audio ")),i.isiOS){var r=t.$media.clone();t.container.find(".mejs-mediaelement").append(r),t.$media.remove(),t.$node=t.$media=r,t.node=t.media=r[0]}else t.container.find(".mejs-mediaelement").append(t.$media);t.controls=t.container.find(".mejs-controls"),t.layers=t.container.find(".mejs-layers");var s=t.isVideo?"video":"audio",a=s.substring(0,1).toUpperCase()+s.substring(1);t.options[s+"Width"]>0||t.options[s+"Width"].toString().indexOf("%")>-1?t.width=t.options[s+"Width"]:""!==t.media.style.width&&null!==t.media.style.width?t.width=t.media.style.width:null!==t.media.getAttribute("width")?t.width=t.$media.attr("width"):t.width=t.options["default"+a+"Width"],t.options[s+"Height"]>0||t.options[s+"Height"].toString().indexOf("%")>-1?t.height=t.options[s+"Height"]:""!==t.media.style.height&&null!==t.media.style.height?t.height=t.media.style.height:null!==t.$media[0].getAttribute("height")?t.height=t.$media.attr("height"):t.height=t.options["default"+a+"Height"],t.setPlayerSize(t.width,t.height),n.pluginWidth=t.height,n.pluginHeight=t.width}mejs.MediaElement(t.$media[0],n)},showControls:function(e){var t=this;e="undefined"==typeof e||e,t.controlsAreVisible||(e?(t.controls.css("visibility","visible").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0}),t.container.find(".mejs-control").css("visibility","visible").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0})):(t.controls.css("visibility","visible").css("display","block"),t.container.find(".mejs-control").css("visibility","visible").css("display","block"),t.controlsAreVisible=!0),t.setControlsSize())},hideControls:function(t){var i=this;t="undefined"==typeof t||t,i.controlsAreVisible&&(t?(i.controls.stop(!0,!0).fadeOut(200,function(){e(this).css("visibility","hidden").css("display","block"),i.controlsAreVisible=!1}),i.container.find(".mejs-control").stop(!0,!0).fadeOut(200,function(){e(this).css("visibility","hidden").css("display","block")})):(i.controls.css("visibility","hidden").css("display","block"),i.container.find(".mejs-control").css("visibility","hidden").css("display","block"),i.controlsAreVisible=!1))},controlsTimer:null,startControlsTimer:function(e){var t=this;e="undefined"!=typeof e?e:1500,t.killControlsTimer("start"),t.controlsTimer=setTimeout(function(){t.hideControls(),t.killControlsTimer("hide")},e)},killControlsTimer:function(e){var t=this;null!==t.controlsTimer&&(clearTimeout(t.controlsTimer),delete t.controlsTimer,t.controlsTimer=null)},controlsEnabled:!0,disableControls:function(){var e=this;e.killControlsTimer(),e.hideControls(!1),this.controlsEnabled=!1},enableControls:function(){var e=this;e.showControls(!1),e.controlsEnabled=!0},meReady:function(t,i){var n,o,r=this,s=mejs.MediaFeatures,a=i.getAttribute("autoplay"),l=!("undefined"==typeof a||null===a||"false"===a);if(!r.created){if(r.created=!0,r.media=t,r.domNode=i,!(s.isAndroid&&r.options.AndroidUseNativeControls||s.isiPad&&r.options.iPadUseNativeControls||s.isiPhone&&r.options.iPhoneUseNativeControls)){r.buildposter(r,r.controls,r.layers,r.media),r.buildkeyboard(r,r.controls,r.layers,r.media),r.buildoverlays(r,r.controls,r.layers,r.media),r.findTracks();for(n in r.options.features)if(o=r.options.features[n],r["build"+o])try{r["build"+o](r,r.controls,r.layers,r.media)}catch(c){}if(r.container.trigger("controlsready"),r.setPlayerSize(r.width,r.height),r.setControlsSize(),r.isVideo){if(mejs.MediaFeatures.hasTouch)r.$media.bind("touchstart",function(){r.controlsAreVisible?r.hideControls(!1):r.controlsEnabled&&r.showControls(!1)});else{var d="native"==r.media.pluginType?r.$media:e(r.media.pluginElement);d.click(function(){t.paused?t.play():t.pause()}),r.container.bind("mouseenter mouseover",function(){r.controlsEnabled&&(r.options.alwaysShowControls||(r.killControlsTimer("enter"),r.showControls(),r.startControlsTimer(2500)))}).bind("mousemove",function(){r.controlsEnabled&&(r.controlsAreVisible||r.showControls(),r.options.alwaysShowControls||r.startControlsTimer(2500))}).bind("mouseleave",function(){r.controlsEnabled&&(r.media.paused||r.options.alwaysShowControls||r.startControlsTimer(1e3))})}l&&!r.options.alwaysShowControls&&r.hideControls(),r.options.enableAutosize&&r.media.addEventListener("loadedmetadata",function(e){r.options.videoHeight<=0&&null===r.domNode.getAttribute("height")&&!isNaN(e.target.videoHeight)&&(r.setPlayerSize(e.target.videoWidth,e.target.videoHeight),r.setControlsSize(),r.media.setVideoSize(e.target.videoWidth,e.target.videoHeight))},!1)}t.addEventListener("play",function(){for(var e=0,t=mejs.players.length;t>e;e++){var i=mejs.players[e];i.id==r.id||!r.options.pauseOtherPlayers||i.paused||i.ended||i.pause(),i.hasFocus=!1}r.hasFocus=!0},!1),r.media.addEventListener("ended",function(e){try{r.media.setCurrentTime(0)}catch(t){}r.media.pause(),r.setProgressRail&&r.setProgressRail(),r.setCurrentRail&&r.setCurrentRail(),r.options.loop?r.media.play():!r.options.alwaysShowControls&&r.controlsEnabled&&r.showControls()},!1),r.media.addEventListener("loadedmetadata",function(e){r.updateDuration&&r.updateDuration(),r.updateCurrent&&r.updateCurrent(),r.isFullScreen||(r.setPlayerSize(r.width,r.height),r.setControlsSize())},!1),setTimeout(function(){r.setPlayerSize(r.width,r.height),r.setControlsSize()},50),e(window).resize(function(){r.isFullScreen||mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen||r.setPlayerSize(r.width,r.height),r.setControlsSize()}),"youtube"==r.media.pluginType&&r.container.find(".mejs-overlay-play").hide()}l&&"native"==t.pluginType&&(t.load(),t.play()),r.options.success&&("string"==typeof r.options.success?window[r.options.success](r.media,r.domNode,r):r.options.success(r.media,r.domNode,r))}},handleError:function(e){var t=this;t.controls.hide(),t.options.error&&t.options.error(e)},setPlayerSize:function(t,i){var n=this;if("undefined"!=typeof t&&(n.width=t),"undefined"!=typeof i&&(n.height=i),n.height.toString().indexOf("%")>0||"100%"===n.$node.css("max-width")){var o=n.media.videoWidth&&n.media.videoWidth>0?n.media.videoWidth:n.options.defaultVideoWidth,r=n.media.videoHeight&&n.media.videoHeight>0?n.media.videoHeight:n.options.defaultVideoHeight,s=n.container.parent().width(),a=parseInt(s*r/o,10);"body"===n.container.parent()[0].tagName.toLowerCase()&&(s=e(window).width(),a=e(window).height()),0!=a&&(n.container.width(s).height(a),n.$media.width("100%").height("100%"),n.container.find("object, embed, iframe").width("100%").height("100%"),n.isVideo&&n.media.setVideoSize&&n.media.setVideoSize(s,a),n.layers.children(".mejs-layer").width("100%").height("100%"))}else n.container.width(n.width).height(n.height),n.layers.children(".mejs-layer").width(n.width).height(n.height)},setControlsSize:function(){var t=this,i=0,n=0,o=t.controls.find(".mejs-time-rail"),r=t.controls.find(".mejs-time-total"),s=(t.controls.find(".mejs-time-current"),t.controls.find(".mejs-time-loaded"),o.siblings());t.options&&!t.options.autosizeProgress&&(n=parseInt(o.css("width"))),0!==n&&n||(s.each(function(){"absolute"!=e(this).css("position")&&(i+=e(this).outerWidth(!0))}),n=t.controls.width()-i-(o.outerWidth(!0)-o.width())-1),o.width(n),r.width(n-(r.outerWidth(!0)-r.width())),t.setProgressRail&&t.setProgressRail(),t.setCurrentRail&&t.setCurrentRail()},buildposter:function(t,i,n,o){var r=this,s=e('<div class="mejs-poster mejs-layer"></div>').appendTo(n),a=t.$media.attr("poster");""!==t.options.poster&&(a=t.options.poster),""!==a&&null!=a?r.setPoster(a):s.hide(),o.addEventListener("play",function(){s.hide()},!1)},setPoster:function(t){var i=this,n=i.container.find(".mejs-poster"),o=n.find("img");0==o.length&&(o=e('<img width="100%" height="100%" />').appendTo(n)),o.attr("src",t)},buildoverlays:function(t,i,n,o){if(t.isVideo){var r=e('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-loading"><span></span></div></div>').hide().appendTo(n),s=e('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-error"></div></div>').hide().appendTo(n),a=e('<div class="mejs-overlay mejs-layer mejs-overlay-play"><div class="mejs-overlay-button"></div></div>').appendTo(n).click(function(){o.paused?o.play():o.pause()});o.addEventListener("play",function(){a.hide(),r.hide(),i.find(".mejs-time-buffering").hide(),s.hide()},!1),o.addEventListener("playing",function(){a.hide(),r.hide(),i.find(".mejs-time-buffering").hide(),s.hide()},!1),o.addEventListener("seeking",function(){r.show(),i.find(".mejs-time-buffering").show()},!1),o.addEventListener("seeked",function(){r.hide(),i.find(".mejs-time-buffering").hide()},!1),o.addEventListener("pause",function(){mejs.MediaFeatures.isiPhone||a.show()},!1),o.addEventListener("waiting",function(){r.show(),i.find(".mejs-time-buffering").show()},!1),o.addEventListener("loadeddata",function(){r.show(),i.find(".mejs-time-buffering").show()},!1),o.addEventListener("canplay",function(){r.hide(),i.find(".mejs-time-buffering").hide()},!1),o.addEventListener("error",function(){r.hide(),i.find(".mejs-time-buffering").hide(),s.show(),s.find("mejs-overlay-error").html("Error loading this resource")},!1)}},buildkeyboard:function(t,i,n,o){e(document).keydown(function(e){if(t.hasFocus&&t.options.enableKeyboard)for(var i=0,n=t.options.keyActions.length;n>i;i++)for(var r=t.options.keyActions[i],s=0,a=r.keys.length;a>s;s++)if(e.keyCode==r.keys[s])return e.preventDefault(),r.action(t,o,e.keyCode),!1;return!0}),e(document).click(function(i){0==e(i.target).closest(".mejs-container").length&&(t.hasFocus=!1)})},findTracks:function(){var t=this,i=t.$media.find("track");t.tracks=[],i.each(function(i,n){n=e(n),t.tracks.push({srclang:n.attr("srclang").toLowerCase(),src:n.attr("src"),kind:n.attr("kind"),label:n.attr("label")||"",entries:[],isLoaded:!1})})},changeSkin:function(e){this.container[0].className="mejs-container "+e,this.setPlayerSize(this.width,this.height),this.setControlsSize()},play:function(){this.media.play()},pause:function(){this.media.pause()},load:function(){this.media.load()},setMuted:function(e){this.media.setMuted(e)},setCurrentTime:function(e){this.media.setCurrentTime(e)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(e){this.media.setVolume(e)},getVolume:function(){return this.media.volume},setSrc:function(e){this.media.setSrc(e)},remove:function(){var e=this;"flash"===e.media.pluginType?e.media.remove():"native"===e.media.pluginType&&e.$media.prop("controls",!0),e.isDynamic||e.$node.insertBefore(e.container),e.container.remove()}},"undefined"!=typeof jQuery&&(jQuery.fn.mediaelementplayer=function(e){return this.each(function(){new mejs.MediaElementPlayer(this,e)})}),e(document).ready(function(){e(".mejs-player").mediaelementplayer()}),window.MediaElementPlayer=mejs.MediaElementPlayer}(mejs.$),function(e){e.extend(mejs.MepDefaults,{playpauseText:"Play/Pause"}),e.extend(MediaElementPlayer.prototype,{buildplaypause:function(t,i,n,o){var r=this,s=e('<div class="mejs-button mejs-playpause-button mejs-play" ><button type="button" aria-controls="'+r.id+'" title="'+r.options.playpauseText+'"></button></div>').appendTo(i).click(function(e){return e.preventDefault(),o.paused?o.play():o.pause(),!1});o.addEventListener("play",function(){s.removeClass("mejs-play").addClass("mejs-pause")},!1),o.addEventListener("playing",function(){s.removeClass("mejs-play").addClass("mejs-pause")},!1),o.addEventListener("pause",function(){s.removeClass("mejs-pause").addClass("mejs-play")},!1),o.addEventListener("paused",function(){s.removeClass("mejs-pause").addClass("mejs-play")},!1)}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{stopText:"Stop"}),e.extend(MediaElementPlayer.prototype,{buildstop:function(t,i,n,o){var r=this;e('<div class="mejs-button mejs-stop-button mejs-stop"><button type="button" aria-controls="'+r.id+'" title="'+r.options.stopText+'"></button></div>').appendTo(i).click(function(){o.paused||o.pause(),o.currentTime>0&&(o.setCurrentTime(0),i.find(".mejs-time-current").width("0px"),i.find(".mejs-time-handle").css("left","0px"),i.find(".mejs-time-float-current").html(mejs.Utility.secondsToTimeCode(0)),i.find(".mejs-currenttime").html(mejs.Utility.secondsToTimeCode(0)),n.find(".mejs-poster").show())})}})}(mejs.$),function(e){e.extend(MediaElementPlayer.prototype,{buildprogress:function(t,i,n,o){e('<div class="mejs-time-rail"><span class="mejs-time-total"><span class="mejs-time-buffering"></span><span class="mejs-time-loaded"></span><span class="mejs-time-current"></span><span class="mejs-time-handle"></span><span class="mejs-time-float"><span class="mejs-time-float-current">00:00</span><span class="mejs-time-float-corner"></span></span></span></div>').appendTo(i),i.find(".mejs-time-buffering").hide();var r=this,s=i.find(".mejs-time-total"),a=i.find(".mejs-time-loaded"),l=i.find(".mejs-time-current"),c=i.find(".mejs-time-handle"),d=i.find(".mejs-time-float"),u=i.find(".mejs-time-float-current"),h=function(e){
var t=e.pageX,i=s.offset(),n=s.outerWidth(),r=0,a=0,l=t-i.left;t>i.left&&t<=n+i.left&&o.duration&&(r=(t-i.left)/n,a=.02>=r?0:r*o.duration,p&&o.setCurrentTime(a),mejs.MediaFeatures.hasTouch||(d.css("left",l),u.html(mejs.Utility.secondsToTimeCode(a)),d.show()))},p=!1,f=!1;s.bind("mousedown",function(t){return 1===t.which?(p=!0,h(t),e(document).bind("mousemove.dur",function(e){h(e)}).bind("mouseup.dur",function(t){p=!1,d.hide(),e(document).unbind(".dur")}),!1):void 0}).bind("mouseenter",function(t){f=!0,e(document).bind("mousemove.dur",function(e){h(e)}),mejs.MediaFeatures.hasTouch||d.show()}).bind("mouseleave",function(t){f=!1,p||(e(document).unbind(".dur"),d.hide())}),o.addEventListener("progress",function(e){t.setProgressRail(e),t.setCurrentRail(e)},!1),o.addEventListener("timeupdate",function(e){t.setProgressRail(e),t.setCurrentRail(e)},!1),r.loaded=a,r.total=s,r.current=l,r.handle=c},setProgressRail:function(e){var t=this,i=void 0!=e?e.target:t.media,n=null;i&&i.buffered&&i.buffered.length>0&&i.buffered.end&&i.duration?n=i.buffered.end(0)/i.duration:i&&void 0!=i.bytesTotal&&i.bytesTotal>0&&void 0!=i.bufferedBytes?n=i.bufferedBytes/i.bytesTotal:e&&e.lengthComputable&&0!=e.total&&(n=e.loaded/e.total),null!==n&&(n=Math.min(1,Math.max(0,n)),t.loaded&&t.total&&t.loaded.width(t.total.width()*n))},setCurrentRail:function(){var e=this;if(void 0!=e.media.currentTime&&e.media.duration&&e.total&&e.handle){var t=e.total.width()*e.media.currentTime/e.media.duration,i=t-e.handle.outerWidth(!0)/2;e.current.width(t),e.handle.css("left",i)}}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{duration:-1,timeAndDurationSeparator:" <span> | </span> "}),e.extend(MediaElementPlayer.prototype,{buildcurrent:function(t,i,n,o){var r=this;e('<div class="mejs-time"><span class="mejs-currenttime">'+(t.options.alwaysShowHours?"00:":"")+(t.options.showTimecodeFrameCount?"00:00:00":"00:00")+"</span></div>").appendTo(i),r.currenttime=r.controls.find(".mejs-currenttime"),o.addEventListener("timeupdate",function(){t.updateCurrent()},!1)},buildduration:function(t,i,n,o){var r=this;i.children().last().find(".mejs-currenttime").length>0?e(r.options.timeAndDurationSeparator+'<span class="mejs-duration">'+(r.options.duration>0?mejs.Utility.secondsToTimeCode(r.options.duration,r.options.alwaysShowHours||r.media.duration>3600,r.options.showTimecodeFrameCount,r.options.framesPerSecond||25):(t.options.alwaysShowHours?"00:":"")+(t.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span>").appendTo(i.find(".mejs-time")):(i.find(".mejs-currenttime").parent().addClass("mejs-currenttime-container"),e('<div class="mejs-time mejs-duration-container"><span class="mejs-duration">'+(r.options.duration>0?mejs.Utility.secondsToTimeCode(r.options.duration,r.options.alwaysShowHours||r.media.duration>3600,r.options.showTimecodeFrameCount,r.options.framesPerSecond||25):(t.options.alwaysShowHours?"00:":"")+(t.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span></div>").appendTo(i)),r.durationD=r.controls.find(".mejs-duration"),o.addEventListener("timeupdate",function(){t.updateDuration()},!1)},updateCurrent:function(){var e=this;e.currenttime&&e.currenttime.html(mejs.Utility.secondsToTimeCode(e.media.currentTime,e.options.alwaysShowHours||e.media.duration>3600,e.options.showTimecodeFrameCount,e.options.framesPerSecond||25))},updateDuration:function(){var e=this;e.media.duration&&e.durationD&&e.durationD.html(mejs.Utility.secondsToTimeCode(e.media.duration,e.options.alwaysShowHours,e.options.showTimecodeFrameCount,e.options.framesPerSecond||25))}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{muteText:"Mute Toggle",hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical"}),e.extend(MediaElementPlayer.prototype,{buildvolume:function(t,i,n,o){if(!mejs.MediaFeatures.hasTouch||!this.options.hideVolumeOnTouchDevices){var r=this,s=r.isVideo?r.options.videoVolume:r.options.audioVolume,a="horizontal"==s?e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+r.id+'" title="'+r.options.muteText+'"></button></div><div class="mejs-horizontal-volume-slider"><div class="mejs-horizontal-volume-total"></div><div class="mejs-horizontal-volume-current"></div><div class="mejs-horizontal-volume-handle"></div></div>').appendTo(i):e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+r.id+'" title="'+r.options.muteText+'"></button><div class="mejs-volume-slider"><div class="mejs-volume-total"></div><div class="mejs-volume-current"></div><div class="mejs-volume-handle"></div></div></div>').appendTo(i),l=r.container.find(".mejs-volume-slider, .mejs-horizontal-volume-slider"),c=r.container.find(".mejs-volume-total, .mejs-horizontal-volume-total"),d=r.container.find(".mejs-volume-current, .mejs-horizontal-volume-current"),u=r.container.find(".mejs-volume-handle, .mejs-horizontal-volume-handle"),h=function(e,t){if(!l.is(":visible")&&"undefined"!=typeof t)return l.show(),h(e,!0),void l.hide();if(e=Math.max(0,e),e=Math.min(e,1),0==e?a.removeClass("mejs-mute").addClass("mejs-unmute"):a.removeClass("mejs-unmute").addClass("mejs-mute"),"vertical"==s){var i=c.height(),n=c.position(),o=i-i*e;u.css("top",n.top+o-u.height()/2),d.height(i-o),d.css("top",n.top+o)}else{var r=c.width(),n=c.position(),p=r*e;u.css("left",n.left+p-u.width()/2),d.width(p)}},p=function(e){var t=null,i=c.offset();if("vertical"==s){var n=c.height(),r=(parseInt(c.css("top").replace(/px/,""),10),e.pageY-i.top);if(t=(n-r)/n,0==i.top||0==i.left)return}else{var a=c.width(),l=e.pageX-i.left;t=l/a}t=Math.max(0,t),t=Math.min(t,1),h(t),0==t?o.setMuted(!0):o.setMuted(!1),o.setVolume(t)},f=!1,m=!1;a.hover(function(){l.show(),m=!0},function(){m=!1,f||"vertical"!=s||l.hide()}),l.bind("mouseover",function(){m=!0}).bind("mousedown",function(t){return p(t),e(document).bind("mousemove.vol",function(e){p(e)}).bind("mouseup.vol",function(){f=!1,e(document).unbind(".vol"),m||"vertical"!=s||l.hide()}),f=!0,!1}),a.find("button").click(function(){o.setMuted(!o.muted)}),o.addEventListener("volumechange",function(e){f||(o.muted?(h(0),a.removeClass("mejs-mute").addClass("mejs-unmute")):(h(o.volume),a.removeClass("mejs-unmute").addClass("mejs-mute")))},!1),r.container.is(":visible")&&(h(t.options.startVolume),"native"===o.pluginType&&o.setVolume(t.options.startVolume))}}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{usePluginFullScreen:!0,newWindowCallback:function(){return""},fullscreenText:"Fullscreen"}),e.extend(MediaElementPlayer.prototype,{isFullScreen:!1,isNativeFullScreen:!1,docStyleOverflow:null,isInIframe:!1,buildfullscreen:function(t,i,n,o){if(t.isVideo){if(t.isInIframe=window.location!=window.parent.location,mejs.MediaFeatures.hasTrueNativeFullScreen){var r=null;r=mejs.MediaFeatures.hasMozNativeFullScreen?e(document):t.container,r.bind(mejs.MediaFeatures.fullScreenEventName,function(e){mejs.MediaFeatures.isFullScreen()?(t.isNativeFullScreen=!0,t.setControlsSize()):(t.isNativeFullScreen=!1,t.exitFullScreen())})}var s=this,a=(t.container,e('<div class="mejs-button mejs-fullscreen-button"><button type="button" aria-controls="'+s.id+'" title="'+s.options.fullscreenText+'"></button></div>').appendTo(i));if("native"===s.media.pluginType||!s.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox)a.click(function(){var e=mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||t.isFullScreen;e?t.exitFullScreen():t.enterFullScreen()});else{var l=null,c=function(){var e,t=document.createElement("x"),i=document.documentElement,n=window.getComputedStyle;return"pointerEvents"in t.style?(t.style.pointerEvents="auto",t.style.pointerEvents="x",i.appendChild(t),e=n&&"auto"===n(t,"").pointerEvents,i.removeChild(t),!!e):!1}();if(c&&!mejs.MediaFeatures.isOpera){var d=!1,u=function(){d&&(h.hide(),p.hide(),f.hide(),a.css("pointer-events",""),s.controls.css("pointer-events",""),d=!1)},h=e('<div class="mejs-fullscreen-hover" />').appendTo(s.container).mouseover(u),p=e('<div class="mejs-fullscreen-hover"  />').appendTo(s.container).mouseover(u),f=e('<div class="mejs-fullscreen-hover"  />').appendTo(s.container).mouseover(u),m=function(){var e={position:"absolute",top:0,left:0};h.css(e),p.css(e),f.css(e),h.width(s.container.width()).height(s.container.height()-s.controls.height());var t=a.offset().left-s.container.offset().left;fullScreenBtnWidth=a.outerWidth(!0),p.width(t).height(s.controls.height()).css({top:s.container.height()-s.controls.height()}),f.width(s.container.width()-t-fullScreenBtnWidth).height(s.controls.height()).css({top:s.container.height()-s.controls.height(),left:t+fullScreenBtnWidth})};e(document).resize(function(){m()}),a.mouseover(function(){if(!s.isFullScreen){var e=a.offset(),i=t.container.offset();o.positionFullscreenButton(e.left-i.left,e.top-i.top,!1),a.css("pointer-events","none"),s.controls.css("pointer-events","none"),h.show(),f.show(),p.show(),m(),d=!0}}),o.addEventListener("fullscreenchange",function(e){u()})}else a.mouseover(function(){null!==l&&(clearTimeout(l),delete l);var e=a.offset(),i=t.container.offset();o.positionFullscreenButton(e.left-i.left,e.top-i.top,!0)}).mouseout(function(){null!==l&&(clearTimeout(l),delete l),l=setTimeout(function(){o.hideFullscreenButton()},1500)})}t.fullscreenBtn=a,e(document).bind("keydown",function(e){(mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||s.isFullScreen)&&27==e.keyCode&&t.exitFullScreen()})}},enterFullScreen:function(){var t=this;if("native"===t.media.pluginType||!mejs.MediaFeatures.isFirefox&&!t.options.usePluginFullScreen){if(docStyleOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",normalHeight=t.container.height(),normalWidth=t.container.width(),"native"===t.media.pluginType)if(mejs.MediaFeatures.hasTrueNativeFullScreen)mejs.MediaFeatures.requestFullScreen(t.container[0]),t.isInIframe&&setTimeout(function n(){t.isNativeFullScreen&&(e(window).width()!==screen.width?t.exitFullScreen():setTimeout(n,500))},500);else if(mejs.MediaFeatures.hasSemiNativeFullScreen)return void t.media.webkitEnterFullscreen();if(t.isInIframe){var i=t.options.newWindowCallback(this);if(""!==i){if(!mejs.MediaFeatures.hasTrueNativeFullScreen)return t.pause(),void window.open(i,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no");setTimeout(function(){t.isNativeFullScreen||(t.pause(),window.open(i,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"))},250)}}t.container.addClass("mejs-container-fullscreen").width("100%").height("100%"),setTimeout(function(){t.container.css({width:"100%",height:"100%"}),t.setControlsSize()},500),"native"===t.pluginType?t.$media.width("100%").height("100%"):(t.container.find("object, embed, iframe").width("100%").height("100%"),t.media.setVideoSize(e(window).width(),e(window).height())),t.layers.children("div").width("100%").height("100%"),t.fullscreenBtn&&t.fullscreenBtn.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen"),t.setControlsSize(),t.isFullScreen=!0}},exitFullScreen:function(){var e=this;return"native"!==e.media.pluginType&&mejs.MediaFeatures.isFirefox?void e.media.setFullscreen(!1):(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||e.isFullScreen)&&mejs.MediaFeatures.cancelFullScreen(),document.documentElement.style.overflow=docStyleOverflow,e.container.removeClass("mejs-container-fullscreen").width(normalWidth).height(normalHeight),"native"===e.pluginType?e.$media.width(normalWidth).height(normalHeight):(e.container.find("object embed").width(normalWidth).height(normalHeight),e.media.setVideoSize(normalWidth,normalHeight)),e.layers.children("div").width(normalWidth).height(normalHeight),e.fullscreenBtn.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen"),e.setControlsSize(),void(e.isFullScreen=!1))}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{startLanguage:"",tracksText:"Captions/Subtitles"}),e.extend(MediaElementPlayer.prototype,{hasChapters:!1,buildtracks:function(t,i,n,o){if(t.isVideo&&0!=t.tracks.length){var r,s=this;for(t.chapters=e('<div class="mejs-chapters mejs-layer"></div>').prependTo(n).hide(),t.captions=e('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position"><span class="mejs-captions-text"></span></div></div>').prependTo(n).hide(),t.captionsText=t.captions.find(".mejs-captions-text"),t.captionsButton=e('<div class="mejs-button mejs-captions-button"><button type="button" aria-controls="'+s.id+'" title="'+s.options.tracksText+'"></button><div class="mejs-captions-selector"><ul><li><input type="radio" name="'+t.id+'_captions" id="'+t.id+'_captions_none" value="none" checked="checked" /><label for="'+t.id+'_captions_none">None</label></li></ul></div></div>').appendTo(i).hover(function(){e(this).find(".mejs-captions-selector").css("visibility","visible")},function(){e(this).find(".mejs-captions-selector").css("visibility","hidden")}).delegate("input[type=radio]","click",function(){if(lang=this.value,"none"==lang)t.selectedTrack=null;else for(r=0;r<t.tracks.length;r++)if(t.tracks[r].srclang==lang){t.selectedTrack=t.tracks[r],t.captions.attr("lang",t.selectedTrack.srclang),t.displayCaptions();break}}),t.options.alwaysShowControls?t.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover"):t.container.bind("mouseenter",function(){t.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}).bind("mouseleave",function(){o.paused||t.container.find(".mejs-captions-position").removeClass("mejs-captions-position-hover")}),t.trackToLoad=-1,t.selectedTrack=null,t.isLoadingTrack=!1,r=0;r<t.tracks.length;r++)"subtitles"==t.tracks[r].kind&&t.addTrackButton(t.tracks[r].srclang,t.tracks[r].label);t.loadNextTrack(),o.addEventListener("timeupdate",function(e){t.displayCaptions()},!1),o.addEventListener("loadedmetadata",function(e){t.displayChapters()},!1),t.container.hover(function(){t.hasChapters&&(t.chapters.css("visibility","visible"),t.chapters.fadeIn(200).height(t.chapters.find(".mejs-chapter").outerHeight()))},function(){t.hasChapters&&!o.paused&&t.chapters.fadeOut(200,function(){e(this).css("visibility","hidden"),e(this).css("display","block")})}),null!==t.node.getAttribute("autoplay")&&t.chapters.css("visibility","hidden")}},loadNextTrack:function(){var e=this;e.trackToLoad++,e.trackToLoad<e.tracks.length?(e.isLoadingTrack=!0,e.loadTrack(e.trackToLoad)):e.isLoadingTrack=!1},loadTrack:function(t){var i=this,n=i.tracks[t],o=function(){n.isLoaded=!0,i.enableTrackButton(n.srclang,n.label),i.loadNextTrack()};e.ajax({url:n.src,dataType:"text",success:function(e){"string"==typeof e&&/<tt\s+xml/gi.exec(e)?n.entries=mejs.TrackFormatParser.dfxp.parse(e):n.entries=mejs.TrackFormatParser.webvvt.parse(e),o(),"chapters"==n.kind&&i.media.duration>0&&i.drawChapters(n)},error:function(){i.loadNextTrack()}})},enableTrackButton:function(t,i){var n=this;""===i&&(i=mejs.language.codes[t]||t),n.captionsButton.find("input[value="+t+"]").prop("disabled",!1).siblings("label").html(i),n.options.startLanguage==t&&e("#"+n.id+"_captions_"+t).click(),n.adjustLanguageBox()},addTrackButton:function(t,i){var n=this;""===i&&(i=mejs.language.codes[t]||t),n.captionsButton.find("ul").append(e('<li><input type="radio" name="'+n.id+'_captions" id="'+n.id+"_captions_"+t+'" value="'+t+'" disabled="disabled" /><label for="'+n.id+"_captions_"+t+'">'+i+" (loading)</label></li>")),n.adjustLanguageBox(),n.container.find(".mejs-captions-translations option[value="+t+"]").remove()},adjustLanguageBox:function(){var e=this;e.captionsButton.find(".mejs-captions-selector").height(e.captionsButton.find(".mejs-captions-selector ul").outerHeight(!0)+e.captionsButton.find(".mejs-captions-translations").outerHeight(!0))},displayCaptions:function(){if("undefined"!=typeof this.tracks){var e,t=this,i=t.selectedTrack;if(null!=i&&i.isLoaded){for(e=0;e<i.entries.times.length;e++)if(t.media.currentTime>=i.entries.times[e].start&&t.media.currentTime<=i.entries.times[e].stop)return t.captionsText.html(i.entries.text[e]),void t.captions.show().height(0);t.captions.hide()}else t.captions.hide()}},displayChapters:function(){var e,t=this;for(e=0;e<t.tracks.length;e++)if("chapters"==t.tracks[e].kind&&t.tracks[e].isLoaded){t.drawChapters(t.tracks[e]),t.hasChapters=!0;break}},drawChapters:function(t){var i,n,o=this,r=0,s=0;for(o.chapters.empty(),i=0;i<t.entries.times.length;i++)n=t.entries.times[i].stop-t.entries.times[i].start,r=Math.floor(n/o.media.duration*100),(r+s>100||i==t.entries.times.length-1&&100>r+s)&&(r=100-s),o.chapters.append(e('<div class="mejs-chapter" rel="'+t.entries.times[i].start+'" style="left: '+s.toString()+"%;width: "+r.toString()+'%;"><div class="mejs-chapter-block'+(i==t.entries.times.length-1?" mejs-chapter-block-last":"")+'"><span class="ch-title">'+t.entries.text[i]+'</span><span class="ch-time">'+mejs.Utility.secondsToTimeCode(t.entries.times[i].start)+"&ndash;"+mejs.Utility.secondsToTimeCode(t.entries.times[i].stop)+"</span></div></div>")),s+=r;o.chapters.find("div.mejs-chapter").click(function(){o.media.setCurrentTime(parseFloat(e(this).attr("rel"))),o.media.paused&&o.media.play()}),o.chapters.show()}}),mejs.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",tl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}},mejs.TrackFormatParser={webvvt:{pattern_identifier:/^([a-zA-z]+-)?[0-9]+$/,pattern_timecode:/^([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(t){for(var i,n,o=0,r=mejs.TrackFormatParser.split2(t,/\r?\n/),s={text:[],times:[]};o<r.length;o++)if(this.pattern_identifier.exec(r[o])&&(o++,i=this.pattern_timecode.exec(r[o]),i&&o<r.length)){for(o++,n=r[o],o++;""!==r[o]&&o<r.length;)n=n+"\n"+r[o],o++;n=e.trim(n).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),s.text.push(n),s.times.push({start:0==mejs.Utility.convertSMPTEtoSeconds(i[1])?.2:mejs.Utility.convertSMPTEtoSeconds(i[1]),stop:mejs.Utility.convertSMPTEtoSeconds(i[3]),settings:i[5]})}return s}},dfxp:{parse:function(t){t=e(t).filter("tt");var i,n,o=0,r=t.children("div").eq(0),s=r.find("p"),a=t.find("#"+r.attr("style")),l={text:[],times:[]};if(a.length){var c=a.removeAttr("id").get(0).attributes;if(c.length)for(i={},o=0;o<c.length;o++)i[c[o].name.split(":")[1]]=c[o].value}for(o=0;o<s.length;o++){var d,u={start:null,stop:null,style:null};if(s.eq(o).attr("begin")&&(u.start=mejs.Utility.convertSMPTEtoSeconds(s.eq(o).attr("begin"))),!u.start&&s.eq(o-1).attr("end")&&(u.start=mejs.Utility.convertSMPTEtoSeconds(s.eq(o-1).attr("end"))),s.eq(o).attr("end")&&(u.stop=mejs.Utility.convertSMPTEtoSeconds(s.eq(o).attr("end"))),!u.stop&&s.eq(o+1).attr("begin")&&(u.stop=mejs.Utility.convertSMPTEtoSeconds(s.eq(o+1).attr("begin"))),i){d="";for(var h in i)d+=h+":"+i[h]+";"}d&&(u.style=d),0==u.start&&(u.start=.2),l.times.push(u),n=e.trim(s.eq(o).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),l.text.push(n),0==l.times.start&&(l.times.start=2)}return l}},split2:function(e,t){return e.split(t)}},3!="x\n\ny".split(/\n/gi).length&&(mejs.TrackFormatParser.split2=function(e,t){var i,n=[],o="";for(i=0;i<e.length;i++)o+=e.substring(i,i+1),t.test(o)&&(n.push(o.replace(t,"")),o="");return n.push(o),n})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{contextMenuItems:[{render:function(e){return"undefined"==typeof e.enterFullScreen?null:e.isFullScreen?"Turn off Fullscreen":"Go Fullscreen"},click:function(e){e.isFullScreen?e.exitFullScreen():e.enterFullScreen()}},{render:function(e){return e.media.muted?"Unmute":"Mute"},click:function(e){e.media.muted?e.setMuted(!1):e.setMuted(!0)}},{isSeparator:!0},{render:function(e){return"Download Video"},click:function(e){window.location.href=e.media.currentSrc}}]}),e.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(t,i,n,o){t.contextMenu=e('<div class="mejs-contextmenu"></div>').appendTo(e("body")).hide(),t.container.bind("contextmenu",function(e){return t.isContextMenuEnabled?(e.preventDefault(),t.renderContextMenu(e.clientX-1,e.clientY-1),!1):void 0}),t.container.bind("click",function(){t.contextMenu.hide()}),t.contextMenu.bind("mouseleave",function(){t.startContextMenuTimer()})},isContextMenuEnabled:!0,enableContextMenu:function(){this.isContextMenuEnabled=!0},disableContextMenu:function(){this.isContextMenuEnabled=!1},contextMenuTimeout:null,startContextMenuTimer:function(){var e=this;e.killContextMenuTimer(),e.contextMenuTimer=setTimeout(function(){e.hideContextMenu(),e.killContextMenuTimer()},750)},killContextMenuTimer:function(){var e=this.contextMenuTimer;null!=e&&(clearTimeout(e),delete e,e=null)},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(t,i){for(var n=this,o="",r=n.options.contextMenuItems,s=0,a=r.length;a>s;s++)if(r[s].isSeparator)o+='<div class="mejs-contextmenu-separator"></div>';else{var l=r[s].render(n);null!=l&&(o+='<div class="mejs-contextmenu-item" data-itemindex="'+s+'" id="element-'+1e6*Math.random()+'">'+l+"</div>")}n.contextMenu.empty().append(e(o)).css({top:i,left:t}).show(),n.contextMenu.find(".mejs-contextmenu-item").each(function(){var t=e(this),i=parseInt(t.data("itemindex"),10),o=n.options.contextMenuItems[i];"undefined"!=typeof o.show&&o.show(t,n),t.click(function(){"undefined"!=typeof o.click&&o.click(n),n.contextMenu.hide()})}),setTimeout(function(){n.killControlsTimer("rev3")},100)}})}(mejs.$),_wAMD.define("legacy/mediaelement/mediaelement-and-player",function(){}),_wAMD.define("editor-site-shared/build/elements/AudioElement",["jquery","w-global","editor-site-shared/ui/Events","editor-site-shared/build/elements/Element","legacy/mediaelement/mediaelement-and-player"],function(e,t,i,n){var o,r=!1,s=Class.create(n,{mediaElement:null,afterRender:function($super,t,i){$super(t,i);var n=e(this.li),s=this.findWidth(n),a=this.getPropertyResult("<!TRACKTITLE!>"),l=this.getPropertyResult("<!ARTIST!>"),c=n.find("audio");c.attr("preload","none");var d=this.getPropertyResult("<!AUTOSTART!>");d="yes"===d,this.id==o&&d===!1&&(r=!1),!r&&d?(r=!0,o=this.id):d=!1,d&&c.attr("autoplay","autoplay");var u={audioWidth:s,enableKeyboard:!1,isVideo:!1,success:this.blurControls},h=c.attr("src");("undefined"==typeof h||null===h||""==h)&&(u.type="audio/mp3");for(var p=mejs.players.length,f=0;p>f;f++){var m=mejs.players[f];if(m.id===this.id){m.paused||m.ended||m.pause(),m.remove(),mejs.players.splice(f,1),delete c[0].player;break}}this.mediaElement=new mejs.MediaElementPlayer(c,u),this.mediaElement.id=this.id,this.mediaElement.autostart=d;var g=n.find(".mejs-container");if(g.length>0){var v=a&&a.length>0,b=l&&l.length>0,y='<div class="wsite-mejs-track">';v&&b?y+='<span class="wsite-mejs-title">'+a+'</span><span class="wsite-mejs-track-sep"> - </span><span class="wsite-mejs-artist">'+l+"</span></div>":v?y+='<span class="wsite-mejs-title">'+a+"</span></div>":b?y+='<span class="wsite-mejs-artist">'+l+"</span></div>":y="",g.append(y)}},blurControls:function(t,i){var n=e(i).closest(".mejs-container").find("button");t.addEventListener("play",function(){n.blur()},!1),t.addEventListener("pause",function(){n.blur()},!1)},getPropertyResult:function(e){var t=this.getContentField().getProperty(e);return t?t.property_result:void 0},reposition:function($super){$super(),this.setWidth()},findWidth:function(e){var t=e.innerWidth();return t=t&&400>t?235>t?235:t:400},setWidth:function(){var t=e(this.li),i=this.findWidth(t);this.mediaElement.setPlayerSize(i,this.mediaElement.height),this.mediaElement.setControlsSize()}});return e(function(){var e=function(e){var t=!1;"updateList"==e&&(t=!0);for(var i=0,n=mejs.players.length;n>i;i++){var o=mejs.players[i];o.paused||o.ended||o.pause(),o.hasFocus=!1,t&&o.remove()}t&&(mejs.players=[],r=!1)};i.addListener("navPageChange",e)}),n.register("67748238",s),s}),_wAMD.define("editor-site-shared/build/elements/MapElement",["jquery","w-global","config","editor/app","site/editor/app","editor-site-shared/build/elements/Element"],function(e,t,i,n,o,r){var s=Class.create(r,{$mapIframeCover:null,afterRender:function($super,t,i){$super(t,i),this.setMapType();var o=this;n.vent.on("viewChange",function(){o.setMapType()}),this.$mapIframeCover=e(t).find(".wsite-map-coverbox"),this.bindMapCoverEvents()},unrender:function($super){$super(),this.unbindMapCoverEvents()},setMapType:function(){var n=e(this.li),o=n.find("iframe"),r=o.attr("src");if(r){if(r.indexOf("&touch=")>=0){var s=t.view.isMobileView||i.chromeless?"1":"0";r=r.replace(/&touch=[01]/,"&touch="+s)}else r=t.view.isMobileView||i.chromeless?r+"&touch=1":r+"&touch=0";o.attr("src",r)}},bindMapCoverEvents:function(){this.$mapIframeCover&&this.$mapIframeCover.on("click.map-frame-cover",function(){var t=e(this);t.hide(),o.vent.once("element:options:dialog:close",function(){t.show()})})},unbindMapCoverEvents:function(){this.$mapIframeCover&&(this.$mapIframeCover.off("click.map-frame-cover"),this.$mapIframeCover=null)}});return r.register("42844424",s),s}),_wAMD.define("editor-site-shared/build/elements/SearchElement",["jquery","w-global","editor-site-shared/build/elements/Element"],function(e,t,i){var n=Class.create(i,{afterRender:function($super,t,i){$super(t,i),e(t).find("form").on("submit",this.handleSubmit.bind(this)).find("span.wsite-search-element-submit").on("click",this.handleSubmit.bind(this))},handleSubmit:function(i){var n=e(i.target).find("input.wsite-search-element-input").eq(0);window.hideTip("tipsearch-info",1),window.showTip(t.utl("html.weebly.libraries.classes.elements.SearchElement_1"),n,"y","search-info",1,225),i.preventDefault()}});return i.register("90122486",n),n}),_wAMD.define("tpl!elements/spacer.tpl",[],function(){return'<span class="wsite-spacer-label">{{label}}</span>'}),_wAMD.define("editor-site-shared/build/elements/SpacerElement",["jquery","underscore","mustache","config","tpl!elements/spacer.tpl","editor-site-shared/build/elements/Element","site/editor/ui/weebly_elements","site/editor/app","util/jquery-ui-resizable"],function(e,t,i,n,o,r,s,a){function l(){s.selectElement(this),window.isDraggingElement=!0}function c(e,t){window.isDraggingElement=!1;var i=this.getContentField();i.getProperty("<!HEIGHT!>").property_result=t.size.height+"px",i.saveProperties()}var d=window.Class.create(r,{afterRender:function($super,r,s){$super(r,s);var d=e(r),u=d.find(".element-box").addClass("w-handle").find(".element");s||u.append(i.render(o,{label:window._W.utl("javascript.editor.build.elements.SpacerElement_1")})),n.chromeless||u.data("ui-resizable")||(d.addClass("wsite-spacer-li"),u.resizable({handles:"s",start:l,stop:t.bind(c,this),resize:function(){a.vent.trigger("editor:element:resize")}}),u.find(".ui-resizable-handle").css("z-index",""))},unrender:function($super){var t=e(this.li).find(".element");t.data("ui-resizable")&&t.resizable("destroy"),$super()}});return r.register("27280689",d),d}),_wAMD.define("editor-site-shared/build/elements/VideoElement",["jquery","editor-site-shared/build/elements/Element","site/editor/ui/weebly_elements","editor-site-shared/relay","editor-site-shared/build/elements/LegacyElement"],function(e,t,i,n,o){function r(t,i){var n=e("#"+t);if(n.length){var o=n.find("iframe").first().get(0),r=o.src;i?o.src=r+"&uploading=1":r.match(/&uploading/)?o.src=r.replace(/&uploading=1/g,""):o.src=o.src}}function s(t){var o=t.originalEvent.data;if("updateEncodedVideo"==o.type){if(e("#"+o.ucfid).length)try{i.currentElement&&i.currentElement.id==o.ucfid?(i.getPropertyByReference("<!IMAGEFILE!>").property_result=o.imageFile,i.getPropertyByReference("<!VIDEOFILE!>").property_result=o.videoFile):n.request("page:navigate")}catch(t){}n.execute("dontSave:set",0)}else"videoClick"==o.type&&window.clickHandler({},o.ucfid)}e(window).on("message",s),n.commands.setHandler("refreshVideoElement",r);var a=window.Class.create(o);return t.register("63419613",a),a}),_wAMD.define("editor/content/main",["jquery","underscore","editor/app","editor-site-shared/relay","editor-site-shared/ui/Events","editor/page-manager/pages","editor/ajax/module","legacy/weebly_element_utils","legacy/weebly_utils"],function(e,t,i,n,o,r,s,a){var l={hideTitle:0};return l.updatePageData=function(e){r.reset(e),n.execute("theme:renderTheme")},l.isContentSaving=!1,l.saveContent=function(e,t,r,c){i.vent.trigger("editor:saving"),l.isContentSaving=!0,new window.Ajax.Request(s.ajax,{parameters:{pos:"content",reqid:e,content:t,align:r,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(t){if(t.responseText.isJSON()){var r=t.responseText.evalJSON();r.result||l.showDeniedAction(r.error)}t.responseText.indexOf("the following problems")>0&&!c&&(window.showError(t.responseText),window.updateList(window.currentPage)),i.vent.trigger("editor:saved"),o.fireEvent("saveContentSuccess",t);var s=a.getElementByContentField(e);n.execute("analytics:track:event","element","edit_content",s.eid)},onFailure:function(e){s.errFunc(e),o.fireEvent("saveContentFailure",e)},onComplete:function(e){l.isContentSaving=!1,o.fireEvent("saveContentComplete",e)},bgRequest:c})},l.updateSiteTitle=function(t){if(e.trim(t.replace(/<br[^>]*>/gi,"")))window.currentSiteTitle=t,new window.Ajax.Request(window.ajax,{parameters:{pos:"sitetitle",newtitle:t,cookie:document.cookie,token:Weebly.RequestToken},onFailure:s.errFunc,onException:s.exceptionFunc});else{l.hideTitle=!0;var i=Weebly.siteContext.getArea("title"),n=Weebly.siteContext.getArea("logo");i&&i.rerender(),n&&n.rerender()}},t.extend(window,l),l}),_wAMD.define("editor/events",["underscore","editor-site-shared/relay","legacy/weebly_event_tooltip","w-global","legacy/weebly_utils"],function(e,t,i,n){function o(e){n.Editor.RPC.User.doEvent(e),window.fireTrackingEvent("Event",e)}var r={},s={first_tip:"x-elements",selectTheme:"x-pages",tab_pages:"x-pages",secondPage:"x-pages-subpages",updatePages:"x-publish",addElement:"x-design"},a={};return e.each(s,function(e,t){a[e]=t}),r.hasDoneUserEvent=function(t){return"string"==typeof t?!!(window.isClientSite&&!window.isMaster||window.userEvents[t]||s[t]&&window.userEvents[s[t]]||a[t]&&window.userEvents[a[t]]):"object"==typeof t?e.every(t,function(e,t){return e?r.hasDoneUserEvent(t):!r.hasDoneUserEvent(t)}):void 0},r.showEvent=function(e){r.hasDoneUserEvent(e)||(i.show(e),window.userEvents[e]=1,r.markUserEventDone(e))},r.markUserEventDone=function(e){r.hasDoneUserEvent(e)||o(e),window.userEvents[e]=1},t.reqres.setHandlers({"userEvent:hasDoneUserEvent":r.hasDoneUserEvent}),t.commands.setHandlers({"userEvent:showEvent":r.showEvent}),window.showEvent=r.showEvent,window.hasDoneUserEvent=r.hasDoneUserEvent,window.markUserEventDone=r.markUserEventDone,r}),_wAMD.define("util/ui/UnsavedDialog",["w-global","legacy/weebly_dialog"],function(e){var t=Class.create({initialize:function(t){this.options=Object.extend({onConfirm:null,onCancel:null},t),this.dialog=new e.Dialog("cancel-blog-post-prompt",{modal:!0,showClose:!0,inner_class:"weebly-dialog-inner-red",closeFunction:this.handleCancel.bind(this)}),this.buttons={confirm:$("cancel-blog-post-ok"),cancel:$("cancel-blog-post-cancel")},this.buttons.confirm.stopObserving("click"),
this.buttons.confirm.observe("click",this.handleConfirm.bind(this)),this.buttons.cancel.stopObserving("click"),this.buttons.cancel.observe("click",this.handleCancel.bind(this)),this.dialog.open()},handleConfirm:function(e){e.stop(),this.dialog.close(),this.options.onConfirm&&this.options.onConfirm()},handleCancel:function(e){e.stop(),this.dialog.close(),this.options.onCancel&&this.options.onCancel()}});return t}),_wAMD.define("editor/blog-editor",["w-global","underscore","editor/app","util/ui/UnsavedDialog","editor-site-shared/ui/Pages"],function(e,t,i,n,o){var r={isEditing:!1,isConfirming:!1,allowSwitch:!1,tryPageSwitch:function(e){e=Array.prototype.slice.call(e);var t=e[0];if(this.allowSwitch)return!0;if(this.isConfirming)return!0;if("goBlogPost"==t&&"themesMenu"==o.currentNavPage)return this.allowSwitch=!0,o.go("editMenu"),this.allowSwitch=!1,!0;if("undefined"==typeof window.currentBlog||0==window.currentBlog.postId||"goBlogPost"==t||-1!=o.pageWindows[t].indexOf("goBlogPost"))return!0;if(1!=window.currentBlog.postId)return this.allowSwitch=!0,o.go("updateList",currentPage),this.allowSwitch=!1,"updateList"!=t;if(window.currentBlog.saving)return window.currentBlog.saving=0,!0;this.isConfirming=!0;new n({onCancel:function(){this.isConfirming=!1}.bind(this),onConfirm:function(){o.go("updateList",currentPage),"updateList"!=t&&o.go.apply(o,e),this.isConfirming=!1}.bind(this)});return!1},updateCurrentBlog:function(){var e=i.request("blog:post:current");e&&(window.currentBlog.title=e.get("post_title"),window.currentBlog.date=e.getCreatedDateInSiteTz(),window.currentBlog.shares=this.getSharesValue(e))},getSharesValue:function(e){var t=[];return void 0!==e&&e.get("share_buttons").each(function(e){e.enabled&&t.push(e.type)}),Object.toJSON(t)}};return r=e.BlogEditor=t.extend({},e.BlogEditor,r)}),_wAMD.define("editor/publish-window/Base",["underscore","w-global","editor-site-shared/ui/Pages","editor-site-shared/ui/EventManager","legacy/weebly_dialog"],function(e,t,i,n,o){var r=Class.create({STATE_NONE:"STATE_NONE",STATE_LOADING:"STATE_LOADING",STATE_SUCCESS:"STATE_SUCCESS",TEXT_LOADING_TITLE:t.utl("html.weebly.libraries.classes.PublishWindow.Base_1"),TEXT_LOADING_BODY:t.utl("html.weebly.libraries.classes.PublishWindow.Base_2"),TEXT_SUCCESS_TITLE:t.utl("html.weebly.libraries.classes.PublishWindow.Base_3"),URL_SPINNER:"https://"+editorStatic+"/weebly/images/ajax-loader.gif",DEFAULT_HEIGHT:400,DEFAULT_WIDTH:680,getOptions:function(e){return this.mergeOptions({},e)},initialize:function(e){this.options=this.getOptions(e),this.events=new n,this.container=$("publishing-status"),this.dialog=this.createDialog(),this.visible=!1,this.clear(),this.init()},init:function(){},open:function(){return this.visible?void 0:(this.dialog.open(),this.visible=!0,this.events.fireEvent("open"),this)},close:function(e){this.visible&&(e=this.mergeOptions({skipDialog:!1,skipGoMain:!1},e),this.clear(),this.visible=!1,this.events.fireEvent("close"),!e.skipDialog&&this.dialog.close(),!e.skipGoMain&&i.go("main"))},clear:function(){return this.getTitleElement().innerHTML="",this.getBodyElement().innerHTML="",this.state=this.STATE_NONE,this.events.fireEvent("clear"),this},loading:function(){return this.open(),this.clear(),this.state=this.STATE_LOADING,this.setTitle(this.TEXT_LOADING_TITLE),this.setBody('<div style="text-align:center;display:block;padding-top:90px;"><img src="'+this.URL_SPINNER+'" /><br /><br />'+this.TEXT_LOADING_BODY+"</div><br /><br />"),this.dialog.positionDialog(),this},success:function(e){return this.open(),this.clear(),this.state=this.STATE_SUCCESS,this.setTitle(this.TEXT_SUCCESS_TITLE),this.setBody(e),this.dialog.positionDialog(),this},setTitle:function(e){this.getTitleElement().setInnerText(e)},setBody:function(e){this.getBodyElement().innerHTML=e},getTitleElement:function(){return this.container.select(".titled-box-title")[0]},getBodyElement:function(){return $("exportText")},createDialog:function(){var e={modal:!0,blackoutOpacity:.8,onClose:this.close.bind(this,{skipDialog:!0})};return new o(this.container,this.getOptions(e))},mergeOptions:function(){var t=Array.prototype.slice.apply(arguments),i={};return e.each(t,function(t){e.extend(i,t)}),i}});return r}),_wAMD.define("util/object-utils",[],function(){var e={mergeOptions:function(e,t){if(!t)return e;var i=function(e){return null===e?"null":Object.isArray(e)?"array":typeof e};for(key in t){var n=e[key],o=t[key],r=i(n),s=i(o);("undefined"===r||r===s||"null"===r)&&(e[key]=o)}return Object.clone(e)},mergeObjects:function(e,t){for(key in t)e[key]=t[key];return Object.clone(e)}};return e}),_wAMD.define("editor/publish-window/ShareButton/Standard",["jquery","w-global","util/object-utils"],function(e,t,i){var n=new Class.create({STATE_UNSHARED:"unshared",STATE_SHARING:"sharing",STATE_SHARED:"shared",TEXT_FAIL:t.utl("html.weebly.libraries.classes.PublishWindow.ShareButton.Standard_1"),TEXT_DENY:t.utl("html.weebly.libraries.classes.PublishWindow.ShareButton.Standard_2"),TEXT_REAUTH:t.utl("html.weebly.libraries.classes.PublishWindow.ShareButton.Standard_3"),TEXT_EPREV:t.utl("html.weebly.libraries.classes.PublishWindow.ShareButton.Standard_4"),TEXT_CLICK:t.utl("html.weebly.libraries.classes.PublishWindow.ShareButton.Standard_5"),TEXT_RETRY:t.utl("html.weebly.libraries.classes.PublishWindow.ShareButton.Standard_6"),options:{shareHandler:"none",shareOptions:{},authWindow:null,authCallback:null},initialize:function(e,t){this.element=e,this.service=e.readAttribute("data-service"),this.options=i.mergeOptions(this.options,t),this.bindEvents(),this.hasPreviousError()&&this.setError(this.TEXT_EPREV,this.TEXT_RETRY,this.share.bind(this))},click:function(){this.getState()==this.STATE_UNSHARED&&(this.setState(this.STATE_SHARING),this.isAuthenticated()?this.share():this.auth())},share:function(){var t=this.options.shareHandler,i=this.options.shareOptions;"ajax"==t?e.ajax({type:"POST",url:window.ajax,data:i||{},dataType:"json"}).done(this.shareSuccess.bind(this)).fail(this.shareFailure.bind(this)):"callback"==t&&i.fn&&i.fn.apply(null,i.args||{})},shareSuccess:function(e){return"success"==e.status?void this.setState(this.STATE_SHARED):"failure"==e.status&&"reauthorize"==e.reason?(this.setState(this.STATE_UNSHARED),void this.setError(this.TEXT_REAUTH,this.TEXT_CLICK,this.reauth.bind(this))):(this.setState(this.STATE_UNSHARED),void this.setError(this.TEXT_FAIL))},shareFailure:function(e,t){console&&console.log(e,t),this.setState(this.STATE_UNSHARED),this.setError(this.TEXT_FAIL)},auth:function(){this.options.authWindow?new this.options.authWindow({onSuccess:this.authSuccess.bind(this),onFailure:this.authFailure.bind(this),onCancel:this.resetState.bind(this)}):this.options.authCallback&&this.options.authCallback()},authSuccess:function(){this.setAuthenticated(!0),this.share()},authFailure:function(e){this.setState(this.STATE_UNSHARED);var t="external"==e.group&&"user_denied"==e.error;this.setMessage(t?this.TEXT_DENY:this.TEXT_FAIL)},adjustSpacing:function(t){if("twitter"==this.service.toLowerCase()){var i=e(this).closest("#publish-window-header").siblings("#publish-window-footer");t?i.addClass("twitter-failure"):i.removeClass("twitter-failure")}},reauth:function(){this.setState(this.STATE_SHARING),this.auth()},isAuthenticated:function(){return"1"===this.element.readAttribute("data-has-auth")},setAuthenticated:function(e){this.element.writeAttribute("data-has-auth",e?"1":"0")},setMessage:function(e,t,i){var n=this.element.down(".publish-share-message");if(n&&(this.adjustSpacing(Boolean(e)),e=e.replace(/\{service\}/g,this.service),n.removeClassName("publish-share-message-error").setInnerText(e+" "),t&&i)){var o=new Element("a",{href:"#"});o.setInnerText(t).observe("click",function(e){e.stop(),i()}),n.insert(o)}},setError:function(e,t,i){var n=this.element.down(".publish-share-message");n&&(this.setMessage(e,t,i),n.addClassName("publish-share-message-error"))},resetMessage:function(){this.setMessage("")},getState:function(){for(var e=this.element,t=[this.STATE_SHARED,this.STATE_SHARING,this.STATE_UNSHARED],i="publish-share-button-",n=0;n<t.length;n++)if(e.hasClassName(i+t[n]))return t[n];return null},setState:function(e){this.resetMessage();var t="publish-share-button-",i=this.element;i.removeClassName(t+this.STATE_UNSHARED).removeClassName(t+this.STATE_SHARING).removeClassName(t+this.STATE_SHARED).addClassName(t+e)},resetState:function(){this.setState(this.STATE_UNSHARED),this.resetMessage()},bindEvents:function(){this.element.observe("click",function(e){e.stop(),this.click()}.bind(this))},hasPreviousError:function(){return"1"===this.element.readAttribute("data-prev-error")}});return n}),_wAMD.define("editor/publish-window/ShareButton/Facebook",["jquery","editor/publish-window/ShareButton/Standard"],function(e,t){var i=new Class.create(t,{isAuthenticated:function($super){return $super()&&"1"===this.element.readAttribute("data-has-link")},auth:function(){var t=e(this.element),i=t.parents(".weebly-dialog"),n=i.find(".publish-share-fb-connect").show();t.fbConnect({autoLaunch:!0,dialog:i,backButton:i.find(".fb-share-back"),pubWindow:!0,onStart:n.show.bind(n),onSuccess:this.authSuccess.bind(this),onClose:this.resetState.bind(this)})}});return i}),_wAMD.define("editor/publish-window/ShareButton/Twitter",["jquery","editor/publish-window/ShareButton/Standard"],function(e,t){var i=new Class.create(t,{});return i}),_wAMD.define("editor/browser-window/BrowserWindow",["w-global","util/object-utils","editor-site-shared/ui/EventManager"],function(e,t,i){var n=Class.create({id:null,url:"",handle:null,events:null,options:{windowId:null,top:"center",left:"center",width:500,height:400,location:!1,toolbar:!1,menubar:!1,status:!1,resizable:!1,scrollbars:!1,autoopen:!1},initialize:function(e,n){this.options=t.mergeOptions(this.options,n),this.id=this.options.windowId||this.generateId(),this.url=e,this.events=new i,this.options.autoopen&&this.open()},open:function(){return this.handle?(this.handle.focus(),this):(this.handle=window.open(this.url,this.id,this.buildParams()),this)},close:function(){this.handle&&(this.handle.close(),this.handle=null)},generateId:function(){var e="WEEBLY_BROWSER_WINDOW_UNIQUE_ID_LIST";return window[e]=window[e]||0,"WeeblyBrowserWindow"+ ++window[e]},buildParams:function(){for(var e=this.options,t={},i=["location","toolbar","menubar","status","resizable","scrollbars"],n=0;n<i.length;n++){var o=i[n];t[o]=e[o]?"yes":"no"}for(var r=["width","height"],n=0;n<r.length;n++){var o=r[n];t[o]=""+e[o]}if("center"==e.top){var s=parseInt(t.height,10),a="undefined"!=typeof window.screenY?window.screenY:window.screenTop,l=document.viewport.getHeight();t.top=parseInt(a+(l-s)/2.5,10)}if("center"==e.left){var c=parseInt(t.width,10),d="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,u=document.viewport.getWidth();t.left=parseInt(d+(u-c)/2,10)}var h=[];for(o in t)h.push(o+"="+t[o]);return h.join(",")}});return n}),_wAMD.define("editor/browser-window/SocialAuth",["editor/browser-window/BrowserWindow","util/object-utils"],function(e,t){var i=Class.create(e,{WINDOW_WIDTH:400,WINDOW_HEIGHT:400,CALLBACK_PREFIX:"weebly_social_auth_cb_",POPUP_URL:"/editor/social_auth.php?cb={callback}&{params}",initialize:function($super,e){e=t.mergeOptions({id:this.generateId(),width:this.WINDOW_WIDTH,height:this.WINDOW_HEIGHT,autoopen:!0,onSuccess:null,onFailure:null,onCancel:null,params:{}},e),this.callback=this.CALLBACK_PREFIX+e.id,this.registerCallback(this.callback),$super(this.buildUrl(this.callback,e.params),e),this.options.onSuccess&&this.events.addListener("success",this.options.onSuccess),this.options.onFailure&&this.events.addListener("failure",this.options.onFailure),this.options.onCancel&&this.events.addListener("cancel",this.options.onCancel)},open:function($super){$super(),this.registerCancelObserver()},cancel:function(){this.events.fireEvent("cancel")},registerCallback:function(e){this.callbackCalled=!1,window[e]=function(e,t){this.callbackCalled=!0,this.events.fireEvent(e,t)}.bind(this)},registerCancelObserver:function(){setTimeout(function(){this.invokeCancelObserver()}.bind(this),250)},invokeCancelObserver:function(){this.callbackCalled||(this.handle&&this.handle.location&&!this.handle.closed?this.registerCancelObserver():this.cancel())},buildUrl:function(e,t){return this.POPUP_URL.replace("{callback}",e).replace("{params}",jQuery.param(t||{}))}});return i}),_wAMD.define("editor/browser-window/FacebookAuth",["editor/browser-window/SocialAuth"],function(e){var t=Class.create(e,{WINDOW_WIDTH:650,WINDOW_HEIGHT:325,CALLBACK_PREFIX:"weebly_fb_auth_cb_",POPUP_URL:"/editor/fb_auth.php?cb={callback}&{params}"});return t}),_wAMD.define("editor/browser-window/TwitterAuth",["editor/browser-window/SocialAuth"],function(e){var t=Class.create(e,{WINDOW_WIDTH:650,WINDOW_HEIGHT:500,CALLBACK_PREFIX:"weebly_twitter_auth_cb_",POPUP_URL:"/editor/twitter_auth.php?cb={callback}&{params}"});return t}),_wAMD.define("json!definitions/tlds.json",function(){return{us:["com","net","org","co","info","us"],outside:[{name:"ca","include-for":["CA"]},{name:"co.uk","include-for":["GB"]},{name:"com.au","include-for":["AU"]},{name:"nl","include-for":["NL"]},{name:"co.nz","include-for":["NZ"]},{name:"de","include-for":["DE"]},{name:"fr","include-for":["FR"]},{name:"es","include-for":["ES"]},{name:"eu","include-for":["NL","DE","FR","ES"]}],"no-whois-privacy":["us","eu","ca","co.uk","nl","de","fr","es","com.au","co.nz","com.br"],"no-domain-swap":["us","ca","fr","eu","com.au","com.br"],"no-whois-update":["com.br","com.au"],"pricing-group":{co:"special","co.nz":"special","com.au":"au"}}}),_wAMD.define("util/domain",["underscore","json!definitions/tlds.json"],function(e,t){return{getAllTLDs:function(i){i=i||"US";var n=t.us.slice(0);return t.outside.forEach(function(t){e.contains(t["include-for"],i)&&"eu"!==t.name?n.unshift(t.name):n.push(t.name)}),n},getOptimizedTLDs:function(i){i=i||"US";var n=t.us.slice(0);return"US"!==i&&t.outside.forEach(function(t){e.contains(t["include-for"],i)&&n.unshift(t.name)}),n},supportsWhoisPrivacy:function(i){return i?!e.contains(t["no-whois-privacy"],i):!1},filterDomain:function(e){var t=new Array;if(""!=e){t.push(new RegExp("\\.com","")),t.push(new RegExp("\\.net","")),t.push(new RegExp("\\.org","")),t.push(new RegExp("^.*:\\/\\/","")),t.push(new RegExp("^.*@","")),t.push(new RegExp("www\\.","")),t.push(new RegExp("^\\-+","")),t.push(new RegExp("\\+$","")),t.push(new RegExp("[^a-zA-Z0-9-]","g"));for(var i=0;i<t.length;i++)e=e.replace(t[i],"");return e.substr(0,63)}return""}}}),_wAMD.define("tpl!commerce/editor/store/editor/published-ecom-feature-upsell.tpl",[],function(){return'<h1 class="published-ecom-feature-upsell__title">\n	{{upsellToPlan}}\n</h1>\n\n<div class="published-ecom-feature-upsell__features">\n	<p>\n		{{#tl}}ecommerce.editor.store_demo.editor.currently_following_features_set{{/tl}}\n		<ul>\n			{{#features}}\n				<li>{{.}}</li>\n			{{/features}}\n		</ul>\n	</p>\n	<p>\n		{{#tl}}ecommerce.editor.store_demo.editor.enable_published_site_upgrade_plan{{/tl}}\n	</p>\n	<div class="published-ecom-feature-upsell__upgrade-btn-align">\n		<a href="#" class="btn-flat btn-flat-primary js-upgrade-btn">\n			{{#tl}}ecommerce.editor.store_demo.editor.upgrade{{/tl}}\n		</a>\n	</div>\n</div>\n'}),_wAMD.define("commerce/editor/store/editor/PublishedEcomFeatureUpsell",["editor/app","w-global","backbone-all","analytics/Tracking","tpl!commerce/editor/store/editor/published-ecom-feature-upsell.tpl"],function(e,t,i,n,o){var r=i.Marionette.Layout.extend({className:"published-ecom-feature-upsell",template:o,templateHelpers:function(){var e=this;return{upsellToPlan:function(){var i=e.usingPlanLvl,n=t.Restrictions.levelToName(i);return t.utl("ecommerce.editor.store_demo.editor.must_upgrade_enable_features",n)},features:this.descriptions}},ui:{upgradeBtn:".js-upgrade-btn"},events:{"click @ui.upgradeBtn":"promptUpgrade"},initialize:function(){var e=t.Restrictions.level,i=this.checkFeatureUsage(e);i>e&&0<this.descriptions.length&&this.render()},onRender:function(){this.$el.addClass("published-ecom-feature-upsell")},featureDescriptors:{com_product_limit:function(e){return t.utl("ecommerce.editor.store_demo.editor.products")},com_manage_gift_cards:function(){return t.utl("ecommerce.editor.store_demo.editor.gift_cards")},com_shipping_settings:function(){return t.utl("ecommerce.editor.store_demo.editor.shipping")},com_real_time_shipping:function(){return t.utl("ecommerce.editor.store_demo.editor.real_time_shipping")},com_promote_store_email:function(){return t.utl("ecommerce.editor.store_demo.editor.customized_store_emails")},com_abandoned_carts:function(){return t.utl("ecommerce.editor.store_demo.editor.abandoned_cart_recovery")},com_coupons:function(){return t.utl("ecommerce.editor.store_demo.editor.coupons")},com_tax_settings:function(){return t.utl("ecommerce.editor.store_demo.editor.taxes")},com_digital_products:function(){return t.utl("ecommerce.editor.store_demo.editor.digital_products")},com_inventory_tracking:function(){return t.utl("ecommerce.editor.store_demo.editor.inventory_tracking")}},checkHasAccess:function(e,i){var n=t.Restrictions.hasAccess(e);if(!n)return n;var o=Number(t.Restrictions.accessValue(e)),r=Number(i)>o;return n=!r},checkFeatureUsage:function(e){this.usingPlanLvl=e;var i=this.options.usedFeatures,n=this.descriptions=[];for(var o in i)if(i.hasOwnProperty(o)){var r=i[o];if(r){var s=this.checkHasAccess(o,r),a=Number(t.Restrictions.isUpgradable(o)),l=!s&&a;if(l){this.usingPlanLvl<a&&(this.usingPlanLvl=a,this.upgradeRestrictionId=o);var c=this.featureDescriptors[o];n.push(c())}}}return this.usingPlanLvl},promptUpgrade:function(t){t.preventDefault(),this.upgradeRestrictionId&&(e.vent.trigger("billing:upgrade:window",{level:this.usingPlanLvl,restrictionID:this.upgradeRestrictionId,restrictionType:"feature",refer:"commerce"}),n.trackEvent("plan","upgrade_window","publish_modal"))}});return r}),Weebly=window.Weebly||{},Weebly.DropDowns={Version:"0.5",Author:"David Rusenko",Company:"Weebly, Inc.",activeMenu:null,dropdownsRef:[],dropdownsArray:[],init:function(){Event.observe(document,"click",Weebly.DropDowns.handleClick)},register:function(e){0==this.dropdownsArray.length&&this.init(),this.dropdownsRef[e.id]=e,this.dropdownsArray.push(e)},destroy:function(e){if(e.button&&(e.button.pare,e.button.onclick=null),e.element&&e.element.childNodes.length>0)for(var t=0;t<e.element.childNodes.length;t++)e.element.childNodes[t].onclick=null;e.element&&e.element.parentNode&&"weeblyDropDown"==e.element.parentNode.className&&e.element.parentNode.parentNode.removeChild(e.element.parentNode);for(var t=0;t<Weebly.DropDowns.dropdownsArray.length;t++)Weebly.DropDowns.dropdownsArray[t]==e&&Weebly.DropDowns.dropdownsArray.splice(t,1);delete Weebly.DropDowns.dropdownsRef[e.id],delete e},setValue:function(e,t,i){var n=Weebly.DropDowns.dropdownsRef[e];n.open(),n.options.rowFunction?n.close($(e+"-"+t),i):n.close(t,i)},handleClick:function(e){var t;e.target?t=e.target:e.srcElement&&(t=e.srcElement),3==t.nodeType&&(t=t.parentNode)},refreshChildren:function(e){$H(this.dropdownsRef).each(function(t){"object"==typeof t.value&&$(t.value.element).descendantOf(e)&&t.value.adjustScroll()})}},Weebly.DropDown=Class.create(),Weebly.DropDown.prototype={isOpen:!1,initialize:function(e){e=$(e),this.options=Object.extend({width:"95",height:"21",openWidth:"195",openHeight:null,border:"1px solid #9f9f9f",marginRight:0,background:"#FFFFFF url(https://"+editorStatic+"/weebly/images/dropdown_background.jpg) repeat-x",overflowY:"scroll",dropDownButton:{src:"https://"+editorStatic+"/weebly/images/dropdown_arrow.gif",width:"21",height:"18"},containerClass:"",fieldName:e.name,rowFunction:null,rowCompareFunction:null,generateValueFunction:null,generateContentsFunction:null,rowMargin:"3px 0 2px 0",type:null,onClose:function(){},onOpen:function(){},updateFunction:function(){},noInitialUpdate:!0,rowHoverColor:"#B5D2F0",noRefresh:null,scaleBy:20,zIndex:20,availableValues:[]},arguments[1]||{}),this.id=Math.floor(10000001*Math.random());var t=this.id;this.formEl=e,this.values=[],"YesNo"==this.options.type&&(this.options.rowFunction=function(e){return e>1?void 0:e%2==0?["Yes","Yes"]:["No","No"]}),this.options.availableValues.size()>0&&(this.options.rowFunction=function(e){return"object"==typeof this.availableValues[e]?this.availableValues[e]:!1});var i=document.createElement("DIV");i.className="weeblyDropDown",i.style.position="relative",i.style.marginRight=this.options.marginRight+"px",i.style.width=this.options.width+"px",this.container=$(i);var n=document.createElement("DIV");n.id=this.id+"_dropdownButton",n.className="dropdownButton",n.onclick=function(){Weebly.DropDowns.dropdownsRef[t].open()},n.style.position="absolute",n.style.width=this.options.dropDownButton.width+"px",n.style.height=this.options.dropDownButton.height+"px",n.style.cursor="pointer",n.style.zIndex=this.options.zIndex- -1,n.style.top="3px",n.style.right=0,n.style.background="transparent url('"+this.options.dropDownButton.src+"') no-repeat top left",this.button=n;var o=document.createElement("DIV");if(o.id=this.id+"_dropdownContainer",$(o).addClassName("dropdownContainer"),o.style.width=this.options.width+"px",Prototype.Browser.IE?o.style.height=this.options.height- -0+"px":o.style.height=this.options.height+"px",o.style.position="absolute",o.style.border=this.options.border,o.style.background=this.options.background,o.style.zIndex=this.options.zIndex,o.style.overflowX="hidden",o.style.overflowY="hidden",this.options.containerClass&&$(o).addClassName(this.options.containerClass),this.element=$(o),i.appendChild(n),i.appendChild(o),e.parentNode.insertBefore(i,e.nextSibling),this.options.rowFunction){for(var r,s=0;(r=this.options.rowFunction(s))&&!(s>1e3);){var a=document.createElement("DIV");a.id=this.id+"-"+s,t=this.id;this.options.noRefresh;a.onclick=function(){Weebly.DropDowns.dropdownsRef[t].close(this)};var l=this.options.rowHoverColor;a.onmouseover=function(){this.style.background=l},a.onmouseout=function(){this.style.background="none"},a.style.height=this.options.height+"px",a.style.overflow="hidden",a.style.cursor="pointer",a.style.paddingLeft="8px",a.innerHTML="<textarea style='display: none;' name='val'>"+r[0]+"</textarea><div style='line-height:"+this.options.height+"px;'>"+r[1]+"</div>",r[2]&&this.element.appendChild(r[2]),this.element.appendChild(a),e.value&&(this.options.rowCompareFunction?this.options.rowCompareFunction(e.value,r):e.value==r[0])&&(this.element.scrollTop=0,this.element.scrollTop=this.getScrollHeight(s),this.lastEl=a,this.scrollMe(this.getScrollHeight(s)),this.options.noInitialUpdate||this.options.updateFunction(e.value)),this.values[s]=r[0],s++}this.options.openHeight||(this.options.openHeight=s*this.options.height),e.value&&this.lastEl||(this.lastEl=o.firstChild)}else if("function"==typeof this.options.generateValueFunction&&"function"==typeof this.options.generateContentsFunction){var a=document.createElement("DIV");a.id=this.id+"-value",a.innerHTML=this.options.generateValueFunction(this),a.style.width=this.options.openWidth-10+"px",a.style.height=this.options.height+"px",a.style.cursor="pointer";var l=this.options.rowHoverColor;a.onmouseover=function(){this.style.background=l},a.onmouseout=function(){this.style.background="none"},t=this.id,a.onclick=function(){Weebly.DropDowns.dropdownsRef[t].close(this)},this.element.appendChild(a);var c=document.createElement("DIV");c.id=this.id+"-contents",c.style.width=this.options.openWidth-10+"px",c.style.display="none",this.element.appendChild(c)}Weebly.DropDowns.register(this)},open:function(){var e=this.element.scrollTop;if(this.element.scrollTop=0,this.checkGone(),1!=this.isOpen){if(Weebly.DropDowns.activeMenu&&Weebly.DropDowns.dropdownsRef[Weebly.DropDowns.activeMenu].closeMe(),"function"==typeof this.options.generateValueFunction&&"function"==typeof this.options.generateContentsFunction){var t=$(this.id+"-contents");t.innerHTML=this.options.generateContentsFunction(this),t.style.display="block",$(this.id+"-value").style.display="none"}this.adjustLeft=0,this.resizeWidth(this.options.openWidth),this.resizeHeight(this.options.openHeight),this.element.style.overflowY=this.options.overflowY,this.element.style.zIndex=this.options.zIndex- -2,this.container.style.zIndex=this.options.zIndex- -5,this.element.scrollTop=e,this.button.style.display="none",this.isOpen=!0,Weebly.DropDowns.activeMenu=this.id,this.options.onOpen(this)}},close:function(e,t){if(this.checkGone(),0==this.isOpen)return void this.open();if(Prototype.Browser.IE?this.resizeHeight(this.options.height- -2):this.resizeHeight(this.options.height),this.element.style.overflowY="hidden",this.options.rowFunction){var i=e.id.replace(/^[0-9]+\-([0-9]+)$/,"$1");this.scrollMe(this.getScrollHeight(i)),this.lastEl=e}else"function"==typeof this.options.generateValueFunction&&"function"==typeof this.options.generateContentsFunction&&($(this.id+"-contents").style.display="none",$(this.id+"-contents").innerHTML="","undefined"!=typeof e&&(this.formEl.value=e,$(this.id+"-value").innerHTML=this.options.generateValueFunction(this)),$(this.id+"-value").style.display="block");this.element.style.zIndex=this.options.zIndex,this.container.style.zIndex=this.options.zIndex,this.button.style.display="block",t||(this.options.rowFunction?(this.formEl.value=e.firstChild.value,this.options.updateFunction(this.formEl.value)):"function"==typeof this.options.generateValueFunction&&"function"==typeof this.options.generateContentsFunction&&(this.formEl.value=e,this.options.updateFunction(e)),this.options.onClose(this.options.noRefresh)),this.isOpen=!1,Weebly.DropDowns.activeMenu=null,this.adjustScroll(),this.resizeWidth(this.options.width)},changeOptions:function(e){this.element.update(""),this.values=[];var t=0;e.each(function(e){var i=new Element("div",{id:this.id+"-"+t});i.onclick=function(){this.close(i)}.bind(this);var n=this.options.rowHoverColor;i.onmouseover=function(){this.style.background=n},i.onmouseout=function(){this.style.background="none"},i.setStyle({height:this.options.height+"px",overflow:"hidden",cursor:"pointer",paddingLeft:"8px"}),i.update("<textarea style='display: none;' name='val'>"+e[0]+"</textarea><div style='line-height:"+this.options.height+"px;'>"+e[1]+"</div>"),this.element.appendChild(i),this.values[t]=e[0],0==t&&(this.setValue(e[0]),this.formEl.value=e[0]),t++},this),this.options.openHeight=t*this.options.height},setValue:function(e){var t=0;this.scrollMe(this.getScrollHeight(t)),this.lastEl=$(this.id+"-"+t),this.values.each(function(i){i==e&&(this.scrollMe(this.getScrollHeight(t)),this.lastEl=$(this.id+"-"+t)),t++}.bind(this))},getValue:function(){return this.formEl.value},closeMe:function(){this.close(this.lastEl,1)},adjustScroll:function(){if(this.options.rowFunction&&this.lastEl){var e=this.lastEl.id.replace(/^[0-9]+\-([0-9]+)$/,"$1");this.scrollMe(this.getScrollHeight(e))}},getScrollHeight:function(e){var t=this.element,i=t.select("> div:not(.font-group-heading):eq("+e+")")[0];return i.cumulativeOffset().top-t.cumulativeOffset().top},checkGone:function(){this.element&&this.button||Weebly.DropDowns.destroy(this)},resizeWidth:function(e){var t=(this.options.scaleBy,this.element);Element.getStyle(t,"width").replace(/px/,"");t.style.width=e+"px";var i=Position.cumulativeOffset(t);i[0]- -e>document.body.clientWidth&&e>this.options.width?t.style.marginLeft="-"+(e-this.options.width)+"px":t.style.marginLeft="0px"},resizeHeight:function(e){var t=(this.options.scaleBy,this.element);Element.getStyle(t,"height").replace(/px/,"");t.style.height=e+"px","auto"==this.options.overflowY&&(t.style.height="")},scrollMe:function(e){Prototype.Browser.IE;var t=this.element;$(t.id).scrollTop=e}},_wAMD.define("legacy/weebly_dropdowns",function(e){return function(){var t;return t||e.Weebly.DropDown}}(this)),_wAMD.define("editor/publish-window/Website",["jquery","w-global","editor-site-shared/ui/Pages","editor/publish-window/Base","editor/publish-window/ShareButton/Facebook","editor/publish-window/ShareButton/Twitter","editor/browser-window/FacebookAuth","editor/browser-window/TwitterAuth","analytics/Tracking","util/domain","commerce/editor/store/editor/PublishedEcomFeatureUpsell","legacy/weebly_dropdowns","legacy/weebly_utils"],function(e,t,i,n,o,r,s,a,l,c,d){var u=Class.create(n,{TEXT_DOMAIN_AVAILABLE:t.utl("html.weebly.libraries.classes.PublishWindow.Website_20"),TEXT_CLICK_TO_CONTINUE:t.utl("html.weebly.libraries.classes.PublishWindow.Website_21"),TEXT_VERIFY_NOTICE_TITLE:t.utl("html.weebly.libraries.classes.PublishWindow.Website_22"),TEXT_UPGRADE_NOTICE_MESSAGE:t.utl("html.weebly.libraries.classes.PublishWindow.Website_23"),TEXT_UPGRADE_NOTICE_MESSAGE_ELEMENT:"html.weebly.libraries.classes.PublishWindow.Website_24",TEXT_UPGRADE_NOTICE_UPGRADE_PRO:t.utl("html.weebly.libraries.classes.PublishWindow.Website_25"),TEXT_UPGRADE_NOTICE_UPGRADE:t.utl("html.weebly.libraries.classes.PublishWindow.Website_26"),TEXT_UPGRADE_NOTICE_PUBLISH:t.utl("html.weebly.libraries.classes.PublishWindow.Website_27"),TEXT_CAPTCHA_REQUIRED:t.utl("html.weebly.libraries.classes.PublishWindow.Website_28"),TEXT_PUBLISH_SITE_TITLE:t.utl("html.weebly.libraries.classes.PublishWindow.Website_29"),TEXT_OK_PUBLISH_MY_SITE:t.utl("html.weebly.libraries.classes.PublishWindow.Website_30"),TEXT_CAPTCHA_ERROR:t.utl("html.weebly.libraries.classes.PublishWindow.Website_31"),TEXT_CAPTCHA_GET_IMAGE:t.utl("html.weebly.libraries.classes.PublishWindow.Website_32"),TEXT_CAPTCHA_GET_AUDIO:t.utl("html.weebly.libraries.classes.PublishWindow.Website_33"),TEXT_CAPTCHA_GET_HELP:t.utl("html.weebly.libraries.classes.PublishWindow.Website_34"),TEXT_CAPTCHA_INSTRUCTIONS_AUDIO:t.utl("html.weebly.libraries.classes.PublishWindow.Website_35"),TEXT_CAPTCHA_INSTRUCTIONS_IMAGE:t.utl("html.weebly.libraries.classes.PublishWindow.Website_36"),URL_DOMAIN_DROPDOWN_BUTTON:"http://"+window.editorStatic+"/weebly/images/gray-drop-down-larger.jpg",success:function($super,n,o){if(n.match(/Error\s/i))return this.close(),window.showWarning(n),void i.go("main");if(n.match(/BlogVerifyWarning\s/i))return this.close({skipGoMain:!0}),window.showWarning(n),this.createVerifyNotice(!1),void("function"==typeof window.ga&&window.ga("send","pageview",{page:"/verify-account",title:t.utl("html.weebly.libraries.classes.PublishWindow.Website_16")}));if(n.match(/VerifyWarning\s/i))return this.close(),window.showWarning(n),this.createVerifyNotice(),"function"==typeof window.ga&&window.ga("send","pageview",{page:"/verify-account",title:t.utl("html.weebly.libraries.classes.PublishWindow.Website_16")}),void i.go("main");if(n.match(/CaptchaRequired\s/i))return this.showCaptchaMarkup(),void("function"==typeof window.ga&&window.ga("send","pageview",{page:"/captcha-required",title:t.utl("html.weebly.libraries.classes.PublishWindow.Website_17")}));if(n.match(/%%UPGRADEELEMENTS%%/)){var r=n.replace(/%%UPGRADEELEMENTS%%/g,"").replace(/\s*/g,"");return this.createUpgradeNotice(JSON.parse(r)),void("function"==typeof window.ga&&window.ga("send","pageview",{page:"/upgrade-required",title:t.utl("html.weebly.libraries.classes.PublishWindow.Website_18")}))}if(n.match(/%%PUBLISHRATELIMITED%%/))return this.createRateLimitNotice(),void("function"==typeof window.ga&&window.ga("send","pageview",{page:"/publish-rate-limited",title:t.utl("html.weebly.libraries.classes.PublishWindow.Website_37")}));$super(n);var s=(new d({el:"#publish-window-footer",usedFeatures:o}),e("#siteLocation"));if(s.length){window.currentSiteLocation=s.html(),this.createDomainSelector(this.getBodyElement());var a=e("#client-preview-button");a.length&&(a.hide(),e("#client-go-live-button").hide(),e("#publish-button").show())}this.dialog.positionDialog();var c={responseText:n},u=e("#exportText");handleDesignerPublishCodes(c,window.currentSite,u[0]);var h=this.getBodyElement().select(".publish-share");if(h.length&&this.attachShareButtons(h[0]),l.trackEvent("editor","publish_site"),"function"==typeof window.ga){
var p="no";t.isFirstPublish&&(p="yes"),window.ga("send","pageview",{page:"/publish?first-time="+p,title:t.utl("html.weebly.libraries.classes.PublishWindow.Website_19")})}return t.isFirstPublish=!1,this},createDomainSelector:function(e){this.isDropdownNew()?this.loadNewDropDown(e):(this.defaultTLDs=c.getOptimizedTLDs(userCountryCode),this.loadOldDropDown(e))},defaultTLDs:[],isDropdownNew:function(){var t=e("#publish_domain_tld");return t.length?t.data().hasOwnProperty("dropdown"):void 0},loadNewDropDown:function(t){var i=e("#publish_domain_tld"),n=e("#publish_domain_sld"),o=e("#export-title-text"),r=e("#publish_domain_tld").wSelectbox({theme:"com"});r.on("change",window.checkDomain);var s=e(t).find(".domain-check-success").eq(0).is(":visible"),a=o.length&&o.html().match(/\.net.*available/);if(s&&a?(i.val("net"),r.val("net")):i.val("com"),setTimeout(function(){n.trigger("focus")},50),s){var l='<a style="color: green;">'+self.TEXT_DOMAIN_AVAILABLE+"</a>";e("#domainStatus").html(l)}},loadOldDropDown:function(t){var i=e("#publish_domain_tld"),n=e("#publish_domain_sld"),o=e("#export-title-text"),r=[];if(this.defaultTLDs.each(function(e){r.push([e,"."+e])}),i.length){var s=new Weebly.DropDown(i[0],{availableValues:r,width:"65",height:"28",openWidth:"65",dropDownButton:{src:this.URL_DOMAIN_DROPDOWN_BUTTON,width:"21",height:"25"},updateFunction:window.checkDomain}),a=e(t).find(".domain-check-success").eq(0).is(":visible"),l=o.length&&o.html().match(/\.net.*available/);if(a&&l?(i.val("net"),s.setValue("net")):i.val("com"),setTimeout(function(){n.trigger("focus")},50),a){var c='<a style="color: green;">'+self.TEXT_DOMAIN_AVAILABLE+"</a>";e("#domainStatus").html(c)}}},createVerifyNotice:function(t){"undefined"==typeof t&&(t=!0),$error=e("#orange-error-title"),$notice=e("#verifyNotice");var i=e("<a/>",{"class":"orange-button-29",href:"#"});$error.html(this.TEXT_VERIFY_NOTICE_TITLE).css("font-size","24px"),i.html('<span class="bi">'+this.TEXT_CLICK_TO_CONTINUE+"</span>").on("click",function(e){return openVerifyWindow(t),warningDialog.close(),!1}),$notice.after("<br />",i)},fixErrorTitle:function(){e("#orange-error-title").html("Publish Temporarily Disabled").css("font-size","24px")},showCaptchaMarkup:function(){this.setTitle(this.TEXT_PUBLISH_SITE_TITLE);var t=e("<a/>",{"class":"w-ui",href:"#"}).html('<span class="btn btn-large btn-warning" id="recaptcha-button" style="margin-bottom:20px;">'+this.TEXT_OK_PUBLISH_MY_SITE+"</span>").on("click",function(e){return submitPublishRecaptcha(grecaptcha.getResponse()),!1});this.setBody('<div class="captcha-container"><div class="captcha-title">'+this.TEXT_CAPTCHA_REQUIRED+'</div><div id="g-recaptcha" align="center" style="padding:20px;"></div><div id="publish-captcha-error" style="display:none;color:red;font-weight:bold;padding:5px;">'+this.TEXT_CAPTCHA_ERROR+"</div></div>");var i={sitekey:RECAPTCHA_KEY};grecaptcha.render("g-recaptcha",i),e("#g-recaptcha").after(t)},createUpgradeNotice:function(e){var i="",n=0,o=this.TEXT_UPGRADE_NOTICE_UPGRADE_PRO,r=this.TEXT_UPGRADE_NOTICE_MESSAGE;e&&(e.level&&(n=e.level),e.restrictionID&&e.elementName&&(i=", restrictionID:"+e.restrictionID,o=this.TEXT_UPGRADE_NOTICE_UPGRADE,r=t.utl(this.TEXT_UPGRADE_NOTICE_MESSAGE_ELEMENT,e.elementName))),this.setBody('<div class="publish-upgrade-notice"><div class="publish-upgrade-notice-title">'+r+'</div><div class="publish-upgrade-notice-publish"><a class="btn btn-default btn-large" href="#" onclick="doExport(); return false;">'+this.TEXT_UPGRADE_NOTICE_PUBLISH+'</a></div><div class="publish-upgrade-notice-upgrade"><a class="btn btn-large btn-primary" href="#" onclick="editorApp.vent.trigger(\'billing:upgrade:window\', { refer:\'publish_notice\', level:'+n+i+'}); return false;"><img class="old-button-bg" src="http://'+window.editorStatic+'/weebly/images/upgrade_large.gif" alt="Upgrade" style="border:none;" /><span class="label">'+o+"</span></a></div></div>")},createRateLimitNotice:function(){this.setBody('<div class="publish-upgrade-notice"><div class="publish-upgrade-notice-publish">'+t.utl("html.weebly.libraries.classes.PublishWindow.Website_38")+"</div></div>")},attachShareButtons:function(e){this.buttons={};var t={facebook:o,twitter:r};["facebook","twitter"].each(function(i){var n=e.down(".publish-share-"+i);if(n){var o=this.createShareButton(t[i],n,i);this.buttons[i]=o}}.bind(this))},createShareButton:function(e,t,i){var n=this.getBodyElement().select(".publish-share")[0],o=n.readAttribute("data-site-id"),r={facebook:s,twitter:a};return new e(t,{shareHandler:"ajax",shareOptions:{type:i,pos:"publishshare",site_id:o,token:Weebly.RequestToken},authWindow:r[i.toLowerCase()]})}});return u}),_wAMD.define("editor/publish-window/PublishWindow",["underscore","editor/publish-window/Website"],function(e,t){var i={deferHtml:null,win:null,instance:function(){return this.win},open:function(e,t){if(this.win){if(this.win.constructor===e)return i;this.win.close({skipGoMain:!0})}var i=this.create(e,t);return i.events.addListener("close",function(){this.win=null}.bind(this)),i.loading(),this.win=i,this.win},close:function(){this.win&&(this.win.close({skipGoMain:!0}),window.editorApp&&editorApp.vent.trigger("publish:dialog:close"))},success:function(){this.win&&(this.win.success.apply(this.win,arguments),window.editorApp&&editorApp.vent.trigger("publish:success"),this.callback&&(this.callback(),this.callback=void 0))},defer:function(e){this.deferHtml=e},resolve:function(){if(this.deferHtml){var e=this.deferHtml;this.deferHtml=null,this.success(e)}},create:function(e,i){return new(e||t)(i)}};return i}),_wAMD.define("editor/publish-window/BlogPost",["w-global","editor/publish-window/Website","editor/browser-window/FacebookAuth","editor/browser-window/TwitterAuth"],function(e,t,i,n){var o=Class.create(t,{TEXT_LOADING_TITLE:e.utl("html.weebly.libraries.classes.PublishWindow.BlogPost_1"),TEXT_LOADING_BODY:e.utl("html.weebly.libraries.classes.PublishWindow.BlogPost_2"),TEXT_SUCCESS_TITLE:e.utl("html.weebly.libraries.classes.PublishWindow.BlogPost_3"),success:function($super,e){return-1!==e.indexOf("%%PUBLISH_DISABLED%%")?(this.close(),this):$super(e)},createShareButton:function($super,e,t,o){var r=this.getBodyElement().select(".publish-share")[0],s=r.readAttribute("data-post-id"),a={facebook:i,twitter:n};return new e(t,{shareHandler:"ajax",shareOptions:{type:o,pos:"blogpostshare",post_id:s},authWindow:a[o.toLowerCase()]})}});return o}),_wAMD.define("editor/publish-window/NewBlogPost",["w-global","editor/publish-window/BlogPost"],function(e,t){var i=Class.create(t,{TEXT_LOADING_TITLE:e.utl("html.weebly.libraries.classes.PublishWindow.NewBlogPost_1"),TEXT_LOADING_BODY:e.utl("html.weebly.libraries.classes.PublishWindow.NewBlogPost_2"),TEXT_SUCCESS_TITLE:e.utl("html.weebly.libraries.classes.PublishWindow.NewBlogPost_3")});return i}),Weebly.TimingTest={send:function(e,t,i){new Ajax.Request(ajax,{parameters:{pos:"speedtest",test:e,req_time:t,js_time:i,cookie:document.cookie,token:Weebly.RequestToken},bgRequest:!0,failSilently:!0})}},_wAMD.define("legacy/weebly_timing_test",function(e){return function(){var t;return t||e.Weebly.TimingTest}}(this)),function(e){var t={"-webkit-transform":"translateZ(0)","-moz-transform":"translateZ(0)","-ms-transform":"translateZ(0)",transform:"translateZ(0)"},i={"-webkit-transform":"","-moz-transform":"","-ms-transform":"",transform:""};Weebly.SlidingPanel={opened_panels:[],registered_panels:{},selectedTab:!1,isOpening:!1,speed:0,init:function(){var t=Weebly.SlidingPanel;t.resize(),e(window).resize(t.resize),e("#w-editor-top").on("click",".tabs li",function(){function i(){t.selectedTab&&n.attr("id")==t.selectedTab&&(t.hideAllPanels(),"weebly_tab_pages"==n.attr("id")&&editorApp.execute("page-manager:open"))}var n=e(this);Weebly.Commerce?Backbone.preventClose(i):i()}),e("#w-editor-top .js-back").on("click",function(e){t.opened_panels.length>0&&(e.preventDefault(),e.stopPropagation(),t.hideAllPanels())})},register:function(e,t){var i=Weebly.SlidingPanel;t=t||{},i.registered_panels[e]=t},resize:function(){var t=Weebly.SlidingPanel,i=e(document.body).width(),n=e(window).width(),o=i;1024>=n?(t.getPanels().addClass("narrow"),t.initTooltips()):(t.getPanels().removeClass("narrow"),t.destroyTooltips()),t.getPanels().css({width:o+"px"})},initTooltips:function(){Weebly.SlidingPanel;e(".w-sliding-panel").each(function(){var t=e(this),i=t.attr("id");jQuery("#"+i+' .sliding-panel-menu-inner li i[class^="w-icon-"]').tooltip({placement:"right",container:t})})},destroyTooltips:function(){e('.sliding-panel-menu-inner li i[class^="w-icon-"]').tooltip("destroy")},show:function(n){var o=Weebly.SlidingPanel;if(o.registered_panels[n]){var r=e("#"+n);o.isOpened(n)||(o.isOpening=!0,o.hideAllPanels(),o.setOpened(n),o.showBlackout(),r.show().css(t),r.clearQueue().animate({top:"0%"},o.speed,function(){o.registered_panels[n].afterSlideOut&&o.registered_panels[n].afterSlideOut(),r.css(i),o.isOpening=!1}),o.registered_panels[n].onOpen&&o.registered_panels[n].onOpen(),o.registered_panels[n].tab_id&&(o.selectedTab||(o.selectedTab=e("#w-editor-top .tabs .selected").attr("id")),activeTab(o.registered_panels[n].tab_id)))}},hide:function(n){var o=Weebly.SlidingPanel;if(o.registered_panels[n]){var r=e("#"+n);if(o.isOpened(n)&&(o.setClosed(n),o.hideBlackout(),r.css(t),o.registered_panels[n].beforeClose&&o.registered_panels[n].beforeClose(),r.clearQueue().animate({top:"100%"},o.speed,function(){r.hide().css(i),o.registered_panels[n].afterSlideIn&&o.registered_panels[n].afterSlideIn(),o.registered_panels[n].afterClose&&o.registered_panels[n].afterClose()}),o.registered_panels[n].onClose&&o.registered_panels[n].onClose(),o.selectedTab)){var s=getCurrentSelectedTab();s.attr("id")==o.registered_panels[n].tab_id&&highlightSelectedTab(o.selectedTab),o.selectedTab=!1}}},hideAllPanels:function(){var e=Weebly.SlidingPanel;_.each(e.opened_panels,function(t){e.hide(t)})},toggle:function(e){var t=Weebly.SlidingPanel;t.registered_panels[e]&&(t.isOpened(e)?t.hide(e):t.show(e),0==Weebly.SlidingPanel.opened_panels.length&&setTimeout(function(){window.showEvent("x-elements")},600))},getPanels:function(){return e(".w-sliding-panel")},isOpened:function(t){var i=Weebly.SlidingPanel;return-1!==e.inArray(t,i.opened_panels)},setOpened:function(t){var i=Weebly.SlidingPanel;-1===e.inArray(t,i.opened_panels)&&i.opened_panels.push(t)},setClosed:function(t){var i=Weebly.SlidingPanel,n=e.inArray(t,i.opened_panels);-1!==n&&i.opened_panels.splice(n,1)},showBlackout:function(){var t=Weebly.SlidingPanel;t.hideBlackout();var i=document.body.offsetHeight,n=e(window).height();i=n>i?n:i;var o=e('<div class="weebly-blackout sliding-panel-blackout"></div>');o.css({height:i+"px",zIndex:"12"}).appendTo(document.body),o.click(function(){t.hideAllPanels()})},hideBlackout:function(){e(".sliding-panel-blackout").remove()}}}(Weebly.jQuery),_wAMD.define("legacy/weebly_sliding_panel",["editor/app","editor/events"],function(e){return function(){var t;return t||e.Weebly.SlidingPanel}}(this)),function(e){Weebly.SiteSettings={selectMerchantAccount:function(t){Weebly.SiteSettings.saveSettings({"ecommerce-merchant":t});var i=e("#settings-ecommerce-type-"+t);i&&(e(".ecommerce-section").addClass("hidden"),i.removeClass("hidden"))},saveCurrency:function(e){Weebly.SiteSettings.saveSettings({"ecommerce-currency":e})},updatePremium:function(t){e("#settings-upload-favicon").show(),e("#settings-favicon-upgrade").hide()}}}(Weebly.jQuery),_wAMD.define("legacy/weebly_site_settings",["legacy/weebly_sliding_panel","legacy/weebly_dialog","shared/permissions/restrictions"],function(e){return function(){var t;return t||e.Weebly.SiteSettings}}(this)),Weebly=window.Weebly||{},Weebly.ColorChooser=Class.create({colors:[["#FFFFFF","#CCCCCC","#C0C0C0","#999999","#666666","#333333","#000000"],["#FFCCCC","#FF6666","#FF0000","#CC0000","#990000","#660000","#330000"],["#FFCC99","#FF9966","#FF9900","#FF6600","#CC6600","#993300","#663300"],["#FFFF99","#FFFF66","#FFCC66","#FFCC33","#CC9933","#996633","#663333"],["#FFFFCC","#FFFF33","#FFFF00","#FFCC00","#999900","#666600","#333300"],["#99FF99","#66FF99","#33FF33","#33CC00","#009900","#006600","#003300"],["#99FFFF","#33FFFF","#66CCCC","#00CCCC","#339999","#336666","#003333"],["#CCFFFF","#66FFFF","#33CCFF","#3366FF","#3333FF","#000099","#000066"],["#CCCCFF","#9999FF","#6666CC","#6633FF","#6600CC","#333399","#330099"],["#FFCCFF","#FF99FF","#CC66CC","#CC33CC","#993399","#663366","#330033"]],css:{hoverClass:"weebly-color-chooser-hover",selectedClass:"weebly-color-chooser-selected",colorClass:"weebly-color-chooser-color",containerClass:"weebly-color-chooser"},initialize:function(e){this.element=$(e);var t=Object.extend({closeOnClick:!0},arguments[1]||{});t.color&&(this.value=t.color,this.value=this.getValue()),$(t.updateElement)&&(this.updateElement=$(t.updateElement)),t.colors&&(this.colors=t.colors),$(t.clickElement)&&$(t.clickElement).observe("click",this.draw.bindAsEventListener(this)),this.options=t},draw:function(){var e=new Element("div",{"class":this.css.containerClass}),t=new Element("table",{cellspacing:"0",cellpadding:"0"}).setStyle({background:"#CCCCCC",border:"1px solid #CCCCCC"}),i=new Element("tbody");t.update(i),this.colors.each(function(e){var t=new Element("tr");e.each(function(e){var i=new Element("td").setStyle({width:"16px",height:"14px"}),n=new Element("div",{"class":"weebly-color-chooser-color"}).setStyle({backgroundColor:e});this.getValue()==e&&n.addClassName(this.css.selectedClass),n.observe("click",this.selectGridColor.bindAsEventListener(this)),n.observe("mouseover",this.hoverGridColor.bindAsEventListener(this)),n.observe("mouseout",this.leaveGridColor.bindAsEventListener(this)),i.update(n),t.insert({bottom:i})},this),i.insert({bottom:t})},this),e.update(t);var n=new Element("div",{"class":"weebly-color-chooser-custom"}).setStyle({backgroundColor:"#CCCCCC"});n.update('<input style="float:left; width:77px; height:18px;" type="text" value="'+this.getValue()+'" />');var o=new Element("img",{src:"http://"+editorStatic+"/weebly/images/color_picker_button.gif",alt:"save"}).setStyle({"float":"right",cursor:"pointer",margin:"2px"});o.observe("click",this.selectCustomColor.bindAsEventListener(this)),n.insert({bottom:o}),n.insert({bottom:'<div style="clear:both"></div>'}),e.insert({bottom:n}),this.element.update(e),this.options.closeOnClick&&(this.closeTime=(new Date).getTime()+100,this.clickClose=function(e){var t=Event.element(e);(new Date).getTime()>this.closeTime&&!t.up("."+this.css.containerClass)&&(this.close(),document.stopObserving("mousedown",this.clickClose))}.bindAsEventListener(this),document.observe("mousedown",this.clickClose))},removeGridClass:function(e){var t=this.element.down("."+e);t&&t.removeClassName(e)},hoverGridColor:function(e){this.removeGridClass(this.css.hoverClass),Event.element(e).addClassName(this.css.hoverClass)},leaveGridColor:function(e){Event.element(e).removeClassName(this.css.hoverClass)},selectGridColor:function(e){var t=Event.element(e);this.updateValue(t.getStyle("backgroundColor")),this.removeGridClass(this.css.selectedClass),t.addClassName(this.css.selectedClass)},selectCustomColor:function(){this.updateValue(this.element.down("input").value),this.removeGridClass(this.css.selectedClass)},updateValue:function(e,t){this.value=e,this.element.down("input").value=this.getValue(),this.updateElement&&this.updateElement.setStyle({backgroundColor:this.getValue()}),t||this.options.onUpdate&&this.options.onUpdate(this.getValue(e)),this.options.closeOnClick&&this.close()},getValue:function(){return this.value?this.value.match("rgb")?this.rgbToHex(this.value):this.value:""},rgbToHex:function(e){var t=e.match(/rgb\((\d+).*?(\d+).*?(\d+)\)/),i=function(e){return"0123456789ABCDEF".charAt((e-e%16)/16)+"0123456789ABCDEF".charAt(e%16)};return"#"+i(parseInt(t[1]))+i(parseInt(t[2]))+i(parseInt(t[3]))},close:function(){var e=this.element.down(".weebly-color-chooser");e&&e.remove()}}),_wAMD.define("legacy/weebly_color_chooser",function(e){return function(){var t;return t||e.Weebly.ColorChooser}}(this)),_wAMD.define("commerce/util/product-utils",["jquery"],function(e){var t={filterOptionText:function(e){return e.replace(/<#[A-Za-z0-9]+>$/,"")},saveProductChanges:function(t,i,n,o){o=o||{};var r=require("commerce/editor/model/Product"),s=r.findOrCreate({site_product_id:i}),a=s.fetch();a.done(function(){if("title"==t)n.text().length?(s.set("name",n.text()),s.save({entry_point:o.entryPoint})):n.text(s.get("name")),o.productPage&&e("#wsite-com-breadcrumbs").find(".wsite-com-link-text:last").text(n.text());else if("description"==t){var i=n.html();i==n.attr("placeholder")&&(i=""),s.set("short_description",i),s.save({entry_point:o.entryPoint})}}),a.fail(function(){console.log("product load failed")})},saveProductField:function(t,i,n){var o=e("#"+t),r=o[0].className.match(/price|title|description/);r&&(r=r[0]),"price"===r&&(i=o.text(),i=i.replace(/[^\d\.]/g,""));var s;s=r?t.replace(/[^\d]/g,""):Weebly.Elements.getCurrentProductID();var a=o[0].up(".element"),l=a?a.id:"";new Ajax.Request(ajax,{parameters:{pos:"updateproduct",productID:s,type:r,value:i,ucfid:l,align:n,cookie:document.cookie,token:Weebly.RequestToken},onFailure:errFunc})}};return window.saveProductField=t.saveProductField,t}),function(){window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var e=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,t={timestamp:"F61C",version:"4.4.8 (Standard)",revision:"ccd0038",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:e},status:"unloaded",basePath:function(){var t=window.CKEDITOR_BASEPATH||"";if(!t)for(var i=document.getElementsByTagName("script"),n=0;n<i.length;n++){var o=i[n].src.match(e);if(o){t=o[1];break}}if(-1==t.indexOf(":/")&&"//"!=t.slice(0,2)&&(t=0===t.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+t:location.href.match(/^[^\?]*\/(?:)/)[0]+t),!t)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return t}(),getUrl:function(e){return-1==e.indexOf(":/")&&0!==e.indexOf("/")&&(e=this.basePath+e),this.timestamp&&"/"!=e.charAt(e.length-1)&&!/[&?]t=/.test(e)&&(e+=(0<=e.indexOf("?")?"&":"?")+"t="+this.timestamp),e},domReady:function(){function e(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",e,!1),t()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),t())}catch(i){}}function t(){for(var e;e=i.shift();)e()}var i=[];return function(t){function n(){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(n,1)}e()}if(i.push(t),"complete"===document.readyState&&setTimeout(e,1),1==i.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",e),window.attachEvent("onload",e),t=!1;try{t=!window.frameElement}catch(o){}document.documentElement.doScroll&&t&&n()}}}()},i=window.CKEDITOR_GETURL;if(i){var n=t.getUrl;t.getUrl=function(e){return i.call(t,e)||n.call(t,e)}}return t}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(e){var t,i=CKEDITOR.event.prototype;for(t in i)null==e[t]&&(e[t]=i[t])},CKEDITOR.event.prototype=function(){function e(e){var n=t(this);return n[e]||(n[e]=new i(e))}var t=function(e){return e=e.getPrivate&&e.getPrivate()||e._||(e._={}),e.events||(e.events={})},i=function(e){this.name=e,this.listeners=[]};return i.prototype={getListenerIndex:function(e){for(var t=0,i=this.listeners;t<i.length;t++)if(i[t].fn==e)return t;return-1}},{define:function(t,i){var n=e.call(this,t);CKEDITOR.tools.extend(n,i,!0)},on:function(t,i,n,o,r){function s(e,r,s,l){return e={name:t,sender:this,editor:e,data:r,listenerData:o,stop:s,cancel:l,removeListener:a},i.call(n,e)===!1?!1:e.data}function a(){c.removeListener(t,i)}var l=e.call(this,t);if(l.getListenerIndex(i)<0){l=l.listeners,n||(n=this),isNaN(r)&&(r=10);var c=this;s.fn=i,s.priority=r;for(var d=l.length-1;d>=0;d--)if(l[d].priority<=r)return l.splice(d+1,0,s),{removeListener:a};l.unshift(s)}return{removeListener:a}},once:function(){var e=Array.prototype.slice.call(arguments),t=e[1];return e[1]=function(e){return e.removeListener(),t.apply(this,arguments)},this.on.apply(this,e)},capture:function(){CKEDITOR.event.useCapture=1;var e=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,e},fire:function(){var e=0,i=function(){e=1},n=0,o=function(){n=1};return function(r,s,a){var l=t(this)[r],r=e,c=n;if(e=n=0,l){var d=l.listeners;if(d.length)for(var u,d=d.slice(0),h=0;h<d.length;h++){if(l.errorProof)try{u=d[h].call(this,a,s,i,o)}catch(p){}else u=d[h].call(this,a,s,i,o);if(u===!1?n=1:"undefined"!=typeof u&&(s=u),e||n)break}}return s=n?!1:"undefined"==typeof s?!0:s,e=r,n=c,s}}(),fireOnce:function(e,i,n){return i=this.fire(e,i,n),delete t(this)[e],i},removeListener:function(e,i){var n=t(this)[e];if(n){var o=n.getListenerIndex(i);o>=0&&n.listeners.splice(o,1)}},removeAllListeners:function(){var e,i=t(this);for(e in i)delete i[e]},hasListeners:function(e){return(e=t(this)[e])&&e.listeners.length>0}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fire.call(this,e,t,this)},CKEDITOR.editor.prototype.fireOnce=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fireOnce.call(this,e,t,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var e=navigator.userAgent.toLowerCase(),t={ie:e.indexOf("trident/")>-1,webkit:e.indexOf(" applewebkit/")>-1,air:e.indexOf(" adobeair/")>-1,mac:e.indexOf("macintosh")>-1,quirks:"BackCompat"==document.compatMode&&(!document.documentMode||document.documentMode<10),mobile:e.indexOf("mobile")>-1,iOS:/(ipad|iphone|ipod)/.test(e),isCustomDomain:function(){if(!this.ie)return!1;var e=document.domain,t=window.location.hostname;return e!=t&&e!="["+t+"]"},secure:"https:"==location.protocol};t.gecko="Gecko"==navigator.product&&!t.webkit&&!t.ie,t.webkit&&(e.indexOf("chrome")>-1?t.chrome=!0:t.safari=!0);var i=0;if(t.ie&&(i=t.quirks||!document.documentMode?parseFloat(e.match(/msie (\d+)/)[1]):document.documentMode,t.ie9Compat=9==i,t.ie8Compat=8==i,t.ie7Compat=7==i,t.ie6Compat=7>i||t.quirks),t.gecko){var n=e.match(/rv:([\d\.]+)/);n&&(n=n[1].split("."),i=1e4*n[0]+100*(n[1]||0)+1*(n[2]||0))}return t.air&&(i=parseFloat(e.match(/ adobeair\/(\d+)/)[1])),t.webkit&&(i=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),t.version=i,t.isCompatible=t.iOS&&i>=534||!t.mobile&&(t.ie&&i>6||t.gecko&&i>=2e4||t.air&&i>=1||t.webkit&&i>=522||!1),t.hidpi=window.devicePixelRatio>=2,t.needsBrFiller=t.gecko||t.webkit||t.ie&&i>10,t.needsNbspFiller=t.ie&&11>i,t.cssClass="cke_browser_"+(t.ie?"ie":t.gecko?"gecko":t.webkit?"webkit":"unknown"),t.quirks&&(t.cssClass=t.cssClass+" cke_browser_quirks"),t.ie&&(t.cssClass=t.cssClass+(" cke_browser_ie"+(t.quirks?"6 cke_browser_iequirks":t.version))),t.air&&(t.cssClass=t.cssClass+" cke_browser_air"),t.iOS&&(t.cssClass=t.cssClass+" cke_browser_ios"),t.hidpi&&(t.cssClass=t.cssClass+" cke_hidpi"),t}()),"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var e=document.createElement("script");e.type="text/javascript",e.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(e)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(e){(this._.pending||(this._.pending=[])).push(e)},function(){CKEDITOR.domReady(function(){var e=CKEDITOR.loadFullCore,t=CKEDITOR.loadFullCoreTimeout;e&&(CKEDITOR.status="basic_ready",e&&e._load?e():t&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1e3*t))})}(),CKEDITOR.status="basic_loaded"}(),CKEDITOR.dom={},function(){var e=[],t=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",i=/&/g,n=/>/g,o=/</g,r=/"/g,s=/&amp;/g,a=/&gt;/g,l=/&lt;/g,c=/&quot;/g;CKEDITOR.on("reset",function(){e=[]}),CKEDITOR.tools={arrayCompare:function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0},clone:function(e){var t;if(e&&e instanceof Array){t=[];for(var i=0;i<e.length;i++)t[i]=CKEDITOR.tools.clone(e[i]);return t}if(null===e||"object"!=typeof e||e instanceof String||e instanceof Number||e instanceof Boolean||e instanceof Date||e instanceof RegExp||e.nodeType||e.window===e)return e;t=new e.constructor;for(i in e)t[i]=CKEDITOR.tools.clone(e[i]);return t},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},extend:function(e){var t,i,n=arguments.length;"boolean"==typeof(t=arguments[n-1])?n--:"boolean"==typeof(t=arguments[n-2])&&(i=arguments[n-1],n-=2);for(var o=1;n>o;o++){var r,s=arguments[o];for(r in s)(t===!0||null==e[r])&&(!i||r in i)&&(e[r]=s[r])}return e},prototypedCopy:function(e){var t=function(){};return t.prototype=e,new t},copy:function(e){var t,i={};for(t in e)i[t]=e[t];return i},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},cssVendorPrefix:function(e,i,n){return n?t+e+":"+i+";"+e+":"+i:(n={},n[e]=i,n[t+e]=i,n)},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t="undefined"!=typeof e.cssFloat?"cssFloat":"undefined"!=typeof e.styleFloat?"styleFloat":"float";return function(e){return"float"==e?t:e.replace(/-./g,function(e){return e.substr(1).toUpperCase()})}}(),buildStyleHtml:function(e){for(var t,e=[].concat(e),i=[],n=0;n<e.length;n++)(t=e[n])&&(/@import|[{}]/.test(t)?i.push("<style>"+t+"</style>"):i.push('<link type="text/css" rel=stylesheet href="'+t+'">'));return i.join("")},htmlEncode:function(e){return(""+e).replace(i,"&amp;").replace(n,"&gt;").replace(o,"&lt;")},htmlDecode:function(e){return e.replace(s,"&").replace(a,">").replace(l,"<")},htmlEncodeAttr:function(e){return e.replace(r,"&quot;").replace(o,"&lt;").replace(n,"&gt;")},htmlDecodeAttr:function(e){return e.replace(c,'"').replace(l,"<").replace(a,">")},getNextNumber:function(){var e=0;return function(){return++e}}(),getNextId:function(){return"cke_"+this.getNextNumber()},override:function(e,t){var i=t(e);return i.prototype=e.prototype,i},setTimeout:function(e,t,i,n,o){return o||(o=window),i||(i=o),o.setTimeout(function(){n?e.apply(i,[].concat(n)):e.apply(i)},t||0)},trim:function(){var e=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(t){return t.replace(e,"")}}(),ltrim:function(){var e=/^[ \t\n\r]+/g;return function(t){return t.replace(e,"")}}(),rtrim:function(){var e=/[ \t\n\r]+$/g;return function(t){return t.replace(e,"")}}(),indexOf:function(e,t){if("function"==typeof t){for(var i=0,n=e.length;n>i;i++)if(t(e[i]))return i}else{if(e.indexOf)return e.indexOf(t);for(i=0,n=e.length;n>i;i++)if(e[i]===t)return i}return-1},search:function(e,t){var i=CKEDITOR.tools.indexOf(e,t);return i>=0?e[i]:null},bind:function(e,t){return function(){return e.apply(t,arguments)}},createClass:function(e){var t=e.$,i=e.base,n=e.privates||e._,o=e.proto,e=e.statics;if(!t&&(t=function(){i&&this.base.apply(this,arguments)}),n)var r=t,t=function(){var e,t=this._||(this._={});for(e in n){var i=n[e];t[e]="function"==typeof i?CKEDITOR.tools.bind(i,this):i}r.apply(this,arguments)};return i&&(t.prototype=this.prototypedCopy(i.prototype),t.prototype.constructor=t,t.base=i,t.baseProto=i.prototype,t.prototype.base=function(){this.base=i.prototype.base,i.apply(this,arguments),this.base=arguments.callee}),o&&this.extend(t.prototype,o,!0),e&&this.extend(t,e,!0),t},addFunction:function(t,i){return e.push(function(){return t.apply(i||this,arguments)})-1},removeFunction:function(t){e[t]=null},callFunction:function(t){var i=e[t];return i&&i.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var e,t=/^-?\d+\.?\d*px$/;return function(i){return e=CKEDITOR.tools.trim(i+"")+"px",t.test(e)?e:i||""}}(),convertToPx:function(){var e;return function(t){return e||(e=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(e)),/%$/.test(t)?t:(e.setStyle("width",t),e.$.clientWidth)}}(),repeat:function(e,t){return Array(t+1).join(e)},tryThese:function(){for(var e,t=0,i=arguments.length;i>t;t++){var n=arguments[t];try{e=n();break}catch(o){}}return e},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(e){return function(){var t=arguments,i=this;window.setTimeout(function(){e.apply(i,t)},0)}},normalizeCssText:function(e,t){var i,n=[],o=CKEDITOR.tools.parseCssText(e,!0,t);for(i in o)n.push(i+":"+o[i]);return n.sort(),n.length?n.join(";")+";":""},convertRgbToHex:function(e){return e.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(e,t,i,n){for(e=[t,i,n],t=0;3>t;t++)e[t]=("0"+parseInt(e[t],10).toString(16)).slice(-2);return"#"+e.join("")})},parseCssText:function(e,t,i){var n={};return i&&(i=new CKEDITOR.dom.element("span"),i.setAttribute("style",e),e=CKEDITOR.tools.convertRgbToHex(i.getAttribute("style")||"")),e&&";"!=e?(e.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(e,i,o){t&&(i=i.toLowerCase(),"font-family"==i&&(o=o.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),o=CKEDITOR.tools.trim(o)),n[i]=o}),n):n},writeCssText:function(e,t){var i,n=[];for(i in e)n.push(i+":"+e[i]);return t&&n.sort(),n.join("; ")},objectCompare:function(e,t,i){var n;if(!e&&!t)return!0;if(!e||!t)return!1;for(n in e)if(e[n]!=t[n])return!1;if(!i)for(n in t)if(e[n]!=t[n])return!1;return!0},objectKeys:function(e){var t,i=[];for(t in e)i.push(t);return i},convertArrayToObject:function(e,t){var i={};1==arguments.length&&(t=!0);for(var n=0,o=e.length;o>n;++n)i[e[n]]=t;return i},fixDomain:function(){for(var e;;)try{e=window.parent.document.domain;break}catch(t){if(e=e?e.replace(/.+?(?:\.|$)/,""):document.domain,!e)break;document.domain=e}return!!e},eventsBuffer:function(e,t){function i(){o=(new Date).getTime(),n=!1,t()}var n,o=0;return{input:function(){if(!n){var t=(new Date).getTime()-o;e>t?n=setTimeout(i,e-t):i()}},reset:function(){n&&clearTimeout(n),n=o=0}}},enableHtml5Elements:function(e,t){for(var i,n=["abbr","article","aside","audio","bdi","canvas","data","datalist","details","figcaption","figure","footer","header","hgroup","mark","meter","nav","output","progress","section","summary","time","video"],o=n.length;o--;)i=e.createElement(n[o]),t&&e.appendChild(i)},checkIfAnyArrayItemMatches:function(e,t){for(var i=0,n=e.length;n>i;++i)if(e[i].match(t))return!0;return!1},checkIfAnyObjectPropertyMatches:function(e,t){for(var i in e)if(i.match(t))return!0;return!1},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw=="}}(),CKEDITOR.dtd=function(){var e=CKEDITOR.tools.extend,t=function(e,t){for(var i=CKEDITOR.tools.clone(e),n=1;n<arguments.length;n++){var o,t=arguments[n];for(o in t)delete i[o]}return i},i={},n={},o={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},r={command:1,link:1,meta:1,noscript:1,script:1,style:1},s={},a={"#":1},l={center:1,dir:1,noframes:1};return e(i,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,
script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},a,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),e(n,o,i,l),t={a:t(i,{a:1,button:1}),abbr:i,address:n,area:s,article:n,aside:n,audio:e({source:1,track:1},n),b:i,base:s,bdi:i,bdo:i,blockquote:n,body:n,br:s,button:t(i,{a:1,button:1}),canvas:i,caption:n,cite:i,code:i,col:s,colgroup:{col:1},command:s,datalist:e({option:1},i),dd:n,del:i,details:e({summary:1},n),dfn:i,div:n,dl:{dt:1,dd:1},dt:n,em:i,embed:s,fieldset:e({legend:1},n),figcaption:n,figure:e({figcaption:1},n),footer:n,form:n,h1:i,h2:i,h3:i,h4:i,h5:i,h6:i,head:e({title:1,base:1},r),header:n,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:s,html:e({head:1,body:1},n,r),i:i,iframe:a,img:s,input:s,ins:i,kbd:i,keygen:s,label:i,legend:i,li:n,link:s,main:n,map:n,mark:i,menu:e({li:1},n),meta:s,meter:t(i,{meter:1}),nav:n,noscript:e({link:1,meta:1,style:1},i),object:e({param:1},i),ol:{li:1},optgroup:{option:1},option:a,output:i,p:i,param:s,pre:i,progress:t(i,{progress:1}),q:i,rp:i,rt:i,ruby:e({rp:1,rt:1},i),s:i,samp:i,script:a,section:n,select:{optgroup:1,option:1},small:i,source:s,span:i,strong:i,style:a,sub:i,summary:i,sup:i,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:n,textarea:a,tfoot:{tr:1},th:n,thead:{tr:1},time:t(i,{time:1}),title:a,tr:{th:1,td:1},track:s,u:i,ul:{li:1},"var":i,video:e({source:1,track:1},n),wbr:s,acronym:i,applet:e({param:1},n),basefont:s,big:i,center:n,dialog:s,dir:{li:1},font:i,isindex:s,noframes:n,strike:i,tt:i},e(t,{$block:e({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},o,l),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:i,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:e({body:1,head:1,html:1},t.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),t}(),CKEDITOR.dom.event=function(e){this.$=e},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var e=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(e+=CKEDITOR.CTRL),this.$.shiftKey&&(e+=CKEDITOR.SHIFT),this.$.altKey&&(e+=CKEDITOR.ALT),e},preventDefault:function(e){var t=this.$;t.preventDefault?t.preventDefault():t.returnValue=!1,e&&this.stopPropagation()},stopPropagation:function(){var e=this.$;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getTarget:function(){var e=this.$.target||this.$.srcElement;return e?new CKEDITOR.dom.node(e):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var e=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(e.documentElement.scrollLeft||e.body.scrollLeft),y:this.$.pageY||this.$.clientY+(e.documentElement.scrollTop||e.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(e){e&&(this.$=e)},CKEDITOR.dom.domObject.prototype=function(){var e=function(e,t){return function(i){"undefined"!=typeof CKEDITOR&&e.fire(t,new CKEDITOR.dom.event(i))}};return{getPrivate:function(){var e;return(e=this.getCustomData("_"))||this.setCustomData("_",e={}),e},on:function(t){var i=this.getCustomData("_cke_nativeListeners");return i||(i={},this.setCustomData("_cke_nativeListeners",i)),i[t]||(i=i[t]=e(this,t),this.$.addEventListener?this.$.addEventListener(t,i,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+t,i)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(e){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(e)){var t=this.getCustomData("_cke_nativeListeners"),i=t&&t[e];i&&(this.$.removeEventListener?this.$.removeEventListener(e,i,!1):this.$.detachEvent&&this.$.detachEvent("on"+e,i),delete t[e])}},removeAllListeners:function(){var e,t=this.getCustomData("_cke_nativeListeners");for(e in t){var i=t[e];this.$.detachEvent?this.$.detachEvent("on"+e,i):this.$.removeEventListener&&this.$.removeEventListener(e,i,!1),delete t[e]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(e){var t={};CKEDITOR.on("reset",function(){t={}}),e.equals=function(e){try{return e&&e.$===this.$}catch(t){return!1}},e.setCustomData=function(e,i){var n=this.getUniqueId();return(t[n]||(t[n]={}))[e]=i,this},e.getCustomData=function(e){var i=this.$["data-cke-expando"];return(i=i&&t[i])&&e in i?i[e]:null},e.removeCustomData=function(e){var i,n,o=this.$["data-cke-expando"],o=o&&t[o];return o&&(i=o[e],n=e in o,delete o[e]),n?i:null},e.clearCustomData=function(){this.removeAllListeners();var e=this.$["data-cke-expando"];e&&delete t[e]},e.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(e)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(e){return e?new CKEDITOR.dom[e.nodeType==CKEDITOR.NODE_DOCUMENT?"document":e.nodeType==CKEDITOR.NODE_ELEMENT?"element":e.nodeType==CKEDITOR.NODE_TEXT?"text":e.nodeType==CKEDITOR.NODE_COMMENT?"comment":e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](e):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(e,t){return e.append(this,t),e},clone:function(e,t){var i=this.$.cloneNode(e),n=function(i){if(i["data-cke-expando"]&&(i["data-cke-expando"]=!1),i.nodeType==CKEDITOR.NODE_ELEMENT&&(t||i.removeAttribute("id",!1),e))for(var i=i.childNodes,o=0;o<i.length;o++)n(i[o])};return n(i),new CKEDITOR.dom.node(i)},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(e){return e.$.parentNode.insertBefore(this.$,e.$.nextSibling),e},insertBefore:function(e){return e.$.parentNode.insertBefore(this.$,e.$),e},insertBeforeMe:function(e){return this.$.parentNode.insertBefore(e.$,this.$),e},getAddress:function(e){for(var t=[],i=this.getDocument().$.documentElement,n=this.$;n&&n!=i;){var o=n.parentNode;o&&t.unshift(this.getIndex.call({$:n},e)),n=o}return t},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(e){function t(e,i){var n=i?e.nextSibling:e.previousSibling;return n&&n.nodeType==CKEDITOR.NODE_TEXT?n.nodeValue?n:t(n,i):null}var i,n=this.$,o=-1;if(!this.$.parentNode||e&&n.nodeType==CKEDITOR.NODE_TEXT&&!n.nodeValue&&!t(n)&&!t(n,!0))return-1;do(!e||n==this.$||n.nodeType!=CKEDITOR.NODE_TEXT||!i&&n.nodeValue)&&(o++,i=n.nodeType==CKEDITOR.NODE_TEXT);while(n=n.previousSibling);return o},getNextSourceNode:function(e,t,i){if(i&&!i.call)var n=i,i=function(e){return!e.equals(n)};var o,e=!e&&this.getFirst&&this.getFirst();if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&i&&i(this,!0)===!1)return null;e=this.getNext()}for(;!e&&(o=(o||this).getParent());){if(i&&i(o,!0)===!1)return null;e=o.getNext()}return!e||i&&i(e)===!1?null:t&&t!=e.type?e.getNextSourceNode(!1,t,i):e},getPreviousSourceNode:function(e,t,i){if(i&&!i.call)var n=i,i=function(e){return!e.equals(n)};var o,e=!e&&this.getLast&&this.getLast();if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&i&&i(this,!0)===!1)return null;e=this.getPrevious()}for(;!e&&(o=(o||this).getParent());){if(i&&i(o,!0)===!1)return null;e=o.getPrevious()}return!e||i&&i(e)===!1?null:t&&e.type!=t?e.getPreviousSourceNode(!1,t,i):e},getPrevious:function(e){var t,i=this.$;do t=(i=i.previousSibling)&&10!=i.nodeType&&new CKEDITOR.dom.node(i);while(t&&e&&!e(t));return t},getNext:function(e){var t,i=this.$;do t=(i=i.nextSibling)&&new CKEDITOR.dom.node(i);while(t&&e&&!e(t));return t},getParent:function(e){var t=this.$.parentNode;return t&&(t.nodeType==CKEDITOR.NODE_ELEMENT||e&&t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(t):null},getParents:function(e){var t=this,i=[];do i[e?"push":"unshift"](t);while(t=t.getParent());return i},getCommonAncestor:function(e){if(e.equals(this))return this;if(e.contains&&e.contains(this))return e;var t=this.contains?this:this.getParent();do if(t.contains(e))return t;while(t=t.getParent());return null},getPosition:function(e){var t=this.$,i=e.$;if(t.compareDocumentPosition)return t.compareDocumentPosition(i);if(t==i)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&e.type==CKEDITOR.NODE_ELEMENT){if(t.contains){if(t.contains(i))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(i.contains(t))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in t)return t.sourceIndex<0||i.sourceIndex<0?CKEDITOR.POSITION_DISCONNECTED:t.sourceIndex<i.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}for(var t=this.getAddress(),e=e.getAddress(),i=Math.min(t.length,e.length),n=0;i-1>=n;n++)if(t[n]!=e[n]){if(i>n)return t[n]<e[n]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;break}return t.length<e.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,t){var i,n,o=this.$;t||(o=o.parentNode),"function"==typeof e?(n=!0,i=e):(n=!1,i=function(t){return t="string"==typeof t.nodeName?t.nodeName.toLowerCase():"","string"==typeof e?t==e:t in e});for(;o;){if(i(n?new CKEDITOR.dom.node(o):o))return new CKEDITOR.dom.node(o);try{o=o.parentNode}catch(r){o=null}}return null},hasAscendant:function(e,t){var i=this.$;for(t||(i=i.parentNode);i;){if(i.nodeName&&i.nodeName.toLowerCase()==e)return!0;i=i.parentNode}return!1},move:function(e,t){e.append(this.remove(),t)},remove:function(e){var t=this.$,i=t.parentNode;if(i){if(e)for(;e=t.firstChild;)i.insertBefore(t.removeChild(e),t);i.removeChild(t)}return this},replace:function(e){this.insertBefore(e),e.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var e;this.getFirst&&(e=this.getFirst());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.ltrim(e.getText()),i=e.getLength();if(!t){e.remove();continue}t.length<i&&(e.split(i-t.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var e;this.getLast&&(e=this.getLast());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.rtrim(e.getText()),i=e.getLength();if(!t){e.remove();continue}t.length<i&&(e.split(t.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(e=this.$.lastChild)&&1==e.type&&"br"==e.nodeName.toLowerCase()&&e.parentNode.removeChild(e)},isReadOnly:function(){var e=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(e=this.getParent()),e&&"undefined"!=typeof e.$.isContentEditable)return!(e.$.isContentEditable||e.data("cke-editable"));for(;e&&!e.data("cke-editable");){if("false"==e.getAttribute("contentEditable"))return!0;if("true"==e.getAttribute("contentEditable"))break;e=e.getParent()}return!e}}),CKEDITOR.dom.window=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var e=this.$.document,t="CSS1Compat"==e.compatMode;return{width:(t?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(t?e.documentElement.clientHeight:e.body.clientHeight)||0}},getScrollPosition:function(){var e=this.$;return"pageXOffset"in e?{x:e.pageXOffset||0,y:e.pageYOffset||0}:(e=e.document,{x:e.documentElement.scrollLeft||e.body.scrollLeft||0,y:e.documentElement.scrollTop||e.body.scrollTop||0})},getFrame:function(){var e=this.$.frameElement;return e?new CKEDITOR.dom.element.get(e):null}}),CKEDITOR.dom.document=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(e){if(this.$.createStyleSheet)this.$.createStyleSheet(e);else{var t=new CKEDITOR.dom.element("link");t.setAttributes({rel:"stylesheet",type:"text/css",href:e}),this.getHead().append(t)}},appendStyleText:function(e){if(this.$.createStyleSheet){var t=this.$.createStyleSheet("");t.cssText=e}else{var i=new CKEDITOR.dom.element("style",this);i.append(new CKEDITOR.dom.text(e,this)),this.getHead().append(i)}return t||i.$.sheet},createElement:function(e,t){var i=new CKEDITOR.dom.element(e,this);return t&&(t.attributes&&i.setAttributes(t.attributes),t.styles&&i.setStyles(t.styles)),i},createText:function(e){return new CKEDITOR.dom.text(e,this)},focus:function(){this.getWindow().focus()},getActive:function(){var e;try{e=this.$.activeElement}catch(t){return null}return new CKEDITOR.dom.element(e)},getById:function(e){return(e=this.$.getElementById(e))?new CKEDITOR.dom.element(e):null},getByAddress:function(e,t){for(var i=this.$.documentElement,n=0;i&&n<e.length;n++){var o=e[n];if(t)for(var r=-1,s=0;s<i.childNodes.length;s++){var a=i.childNodes[s];if((t!==!0||3!=a.nodeType||!a.previousSibling||3!=a.previousSibling.nodeType)&&(r++,r==o)){i=a;break}}else i=i.childNodes[o]}return i?new CKEDITOR.dom.node(i):null},getElementsByTag:function(e,t){return!(CKEDITOR.env.ie&&document.documentMode<=8)&&t&&(e=t+":"+e),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(e))},getHead:function(){var e=this.$.getElementsByTagName("head")[0];return e=e?new CKEDITOR.dom.element(e):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(e){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(e=e.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();</script>")),this.$.write(e),this.$.close()},find:function(e){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(e))},findOne:function(e){return(e=this.$.querySelector(e))?new CKEDITOR.dom.element(e):null},_getHtml5ShivFrag:function(){var e=this.getCustomData("html5ShivFrag");return e||(e=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(e,!0),this.setCustomData("html5ShivFrag",e)),e}}),CKEDITOR.dom.nodeList=function(e){this.$=e},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(e){return 0>e||e>=this.$.length?null:(e=this.$[e])?new CKEDITOR.dom.node(e):null}},CKEDITOR.dom.element=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createElement(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.element.get=function(e){return(e="string"==typeof e?document.getElementById(e)||document.getElementsByName(e)[0]:e)&&(e.$?e:new CKEDITOR.dom.element(e))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(e,t){var i=new CKEDITOR.dom.element("div",t);return i.setHtml(e),i.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(e,t,i,n){var o=t.getCustomData("list_marker_id")||t.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),r=t.getCustomData("list_marker_names")||t.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return e[o]=t,r[i]=1,t.setCustomData(i,n)},CKEDITOR.dom.element.clearAllMarkers=function(e){for(var t in e)CKEDITOR.dom.element.clearMarkers(e,e[t],1)},CKEDITOR.dom.element.clearMarkers=function(e,t,i){var n,o=t.getCustomData("list_marker_names"),r=t.getCustomData("list_marker_id");for(n in o)t.removeCustomData(n);t.removeCustomData("list_marker_names"),i&&(t.removeCustomData("list_marker_id"),delete e[r])},function(){function e(e){var t=!0;return e.$.id||(e.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),t=!1),function(){t||e.removeAttribute("id")}}function t(e,t){return"#"+e.$.id+" "+t.split(/,\s*/).join(", #"+e.$.id+" ")}function i(e){for(var t=0,i=0,o=n[e].length;o>i;i++)t+=parseInt(this.getComputedStyle(n[e][i])||0,10)||0;return t}CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:function(e){var t=this.$.className;return t&&(RegExp("(?:^|\\s)"+e+"(?:\\s|$)","").test(t)||(t+=" "+e)),this.$.className=t||e,this},removeClass:function(e){var t=this.getAttribute("class");return t&&(e=RegExp("(?:^|\\s+)"+e+"(?=\\s|$)","i"),e.test(t)&&((t=t.replace(e,"").replace(/^\s+/,""))?this.setAttribute("class",t):this.removeAttribute("class"))),this},hasClass:function(e){return RegExp("(?:^|\\s+)"+e+"(?=\\s|$)","").test(this.getAttribute("class"))},append:function(e,t){return"string"==typeof e&&(e=this.getDocument().createElement(e)),t?this.$.insertBefore(e.$,this.$.firstChild):this.$.appendChild(e.$),e},appendHtml:function(e){if(this.$.childNodes.length){var t=new CKEDITOR.dom.element("div",this.getDocument());t.setHtml(e),t.moveChildren(this)}else this.setHtml(e)},appendText:function(e){null!=this.$.text&&CKEDITOR.env.ie&&CKEDITOR.env.version<9?this.$.text=this.$.text+e:this.append(new CKEDITOR.dom.text(e))},appendBogus:function(e){if(e||CKEDITOR.env.needsBrFiller){for(e=this.getLast();e&&e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(e.getText());)e=e.getPrevious();e&&e.is&&e.is("br")||(e=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&e.setAttribute("type","_moz"),this.append(e))}},breakParent:function(e){var t=new CKEDITOR.dom.range(this.getDocument());t.setStartAfter(this),t.setEndAfter(e),e=t.extractContents(),t.insertNode(this.remove()),e.insertAfterNode(this)},contains:CKEDITOR.env.ie||CKEDITOR.env.webkit?function(e){var t=this.$;return e.type!=CKEDITOR.NODE_ELEMENT?t.contains(e.getParent().$):t!=e.$&&t.contains(e.$)}:function(e){return!!(16&this.$.compareDocumentPosition(e.$))},focus:function(){function e(){try{this.$.focus()}catch(e){}}return function(t){t?CKEDITOR.tools.setTimeout(e,100,this):e.call(this)}}(),getHtml:function(){var e=this.$.innerHTML;return CKEDITOR.env.ie?e.replace(/<\?[^>]*>/g,""):e},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var e=this.$.ownerDocument.createElement("div");return e.appendChild(this.$.cloneNode(!0)),e.innerHTML},getClientRect:function(){var e=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!e.width&&(e.width=e.right-e.left),!e.height&&(e.height=e.bottom-e.top),e},setHtml:CKEDITOR.env.ie&&CKEDITOR.env.version<9?function(e){try{var t=this.$;if(this.getParent())return t.innerHTML=e;var i=this.getDocument()._getHtml5ShivFrag();return i.appendChild(t),t.innerHTML=e,i.removeChild(t),e}catch(n){for(this.$.innerHTML="",t=new CKEDITOR.dom.element("body",this.getDocument()),t.$.innerHTML=e,t=t.getChildren();t.count();)this.append(t.getItem(0));return e}}:function(e){return this.$.innerHTML=e},setText:function(){var e=document.createElement("p");return e.innerHTML="x",e=e.textContent,function(t){this.$[e?"textContent":"innerText"]=t}}(),getAttribute:function(){var e=function(e){return this.$.getAttribute(e,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e){switch(e){case"class":e="className";break;case"http-equiv":e="httpEquiv";break;case"name":return this.$.name;case"tabindex":return e=this.$.getAttribute(e,2),0!==e&&0===this.$.tabIndex&&(e=null),e;case"checked":return e=this.$.attributes.getNamedItem(e),(e.specified?e.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[e];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(e,2)}:e}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:CKEDITOR.env.ie?function(e){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(e)]}:function(e){var t=this.getWindow().$.getComputedStyle(this.$,null);return t?t.getPropertyValue(e):""},getDtd:function(){var e=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return e},e},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:CKEDITOR.env.ie?function(){var e=this.$.tabIndex;return 0===e&&!CKEDITOR.dtd.$tabIndex[this.getName()]&&0!==parseInt(this.getAttribute("tabindex"),10)&&(e=-1),e}:CKEDITOR.env.webkit?function(){var e=this.$.tabIndex;return void 0===e&&(e=parseInt(this.getAttribute("tabindex"),10),isNaN(e)&&(e=-1)),e}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var e=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&document.documentMode<=8){var t=this.$.scopeName;"HTML"!=t&&(e=t.toLowerCase()+":"+e)}return this.getName=function(){return e},this.getName()},getValue:function(){return this.$.value},getFirst:function(e){var t=this.$.firstChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getNext(e)),t},getLast:function(e){var t=this.$.lastChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getPrevious(e)),t},getStyle:function(e){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]},is:function(){var e=this.getName();if("object"==typeof arguments[0])return!!arguments[0][e];for(var t=0;t<arguments.length;t++)if(arguments[t]==e)return!0;return!1},isEditable:function(e){var t=this.getName();return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[t]||CKEDITOR.dtd.$empty[t]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:e!==!1?(e=CKEDITOR.dtd[t]||CKEDITOR.dtd.span,!(!e||!e["#"])):!0},isIdentical:function(e){var t=this.clone(0,1),e=e.clone(0,1);if(t.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),e.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),t.$.isEqualNode)return t.$.style.cssText=CKEDITOR.tools.normalizeCssText(t.$.style.cssText),e.$.style.cssText=CKEDITOR.tools.normalizeCssText(e.$.style.cssText),t.$.isEqualNode(e.$);if(t=t.getOuterHtml(),e=e.getOuterHtml(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&this.is("a")){var i=this.getParent();i.type==CKEDITOR.NODE_ELEMENT&&(i=i.clone(),i.setHtml(t),t=i.getHtml(),i.setHtml(e),e=i.getHtml())}return t==e},isVisible:function(){var e,t,i=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return i&&CKEDITOR.env.webkit&&(e=this.getWindow(),!e.equals(CKEDITOR.document.getWindow())&&(t=e.$.frameElement)&&(i=new CKEDITOR.dom.element(t).isVisible())),!!i},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var e=this.getChildren(),t=0,i=e.count();i>t;t++){var n=e.getItem(t);if((n.type!=CKEDITOR.NODE_ELEMENT||!n.data("cke-bookmark"))&&(n.type==CKEDITOR.NODE_ELEMENT&&!n.isEmptyInlineRemoveable()||n.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(n.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var e=this.$.attributes,t=0;t<e.length;t++){var i=e[t];switch(i.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(i.specified)return!0}}return!1}:function(){var e=this.$.attributes,t=e.length,i={"data-cke-expando":1,_moz_dirty:1};return t>0&&(t>2||!i[e[0].nodeName]||2==t&&!i[e[1].nodeName])},hasAttribute:function(){function e(e){var t=this.$.attributes.getNamedItem(e);if("input"==this.getName())switch(e){case"class":return this.$.className.length>0;case"checked":return!!this.$.checked;case"value":return e=this.getAttribute("type"),"checkbox"==e||"radio"==e?"on"!=this.$.value:!!this.$.value}return t?t.specified:!1}return CKEDITOR.env.ie?CKEDITOR.env.version<8?function(t){return"name"==t?!!this.$.name:e.call(this,t)}:e:function(e){return!!this.$.attributes.getNamedItem(e)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(e,t){var i=this.$,e=e.$;if(i!=e){var n;if(t)for(;n=i.lastChild;)e.insertBefore(i.removeChild(n),e.firstChild);else for(;n=i.firstChild;)e.appendChild(i.removeChild(n))}},mergeSiblings:function(){function e(e,t,i){if(t&&t.type==CKEDITOR.NODE_ELEMENT){for(var n=[];t.data("cke-bookmark")||t.isEmptyInlineRemoveable();)if(n.push(t),t=i?t.getNext():t.getPrevious(),!t||t.type!=CKEDITOR.NODE_ELEMENT)return;if(e.isIdentical(t)){for(var o=i?e.getLast():e.getFirst();n.length;)n.shift().move(e,!i);t.moveChildren(e,!i),t.remove(),o&&o.type==CKEDITOR.NODE_ELEMENT&&o.mergeSiblings()}}}return function(t){(t===!1||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(e(this,this.getNext(),!0),e(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var e=function(e,t){return this.$.setAttribute(e,t),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(t,i){return"class"==t?this.$.className=i:"style"==t?this.$.style.cssText=i:"tabindex"==t?this.$.tabIndex=i:"checked"==t?this.$.checked=i:"contenteditable"==t?e.call(this,"contentEditable",i):e.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(t,i){if("src"==t&&i.match(/^http:\/\//))try{e.apply(this,arguments)}catch(n){}else e.apply(this,arguments);return this}:e}(),setAttributes:function(e){for(var t in e)this.setAttribute(t,e[t]);return this},setValue:function(e){return this.$.value=e,this},removeAttribute:function(){var e=function(e){this.$.removeAttribute(e)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e){"class"==e?e="className":"tabindex"==e?e="tabIndex":"contenteditable"==e&&(e="contentEditable"),this.$.removeAttribute(e)}:e}(),removeAttributes:function(e){if(CKEDITOR.tools.isArray(e))for(var t=0;t<e.length;t++)this.removeAttribute(e[t]);else for(t in e)e.hasOwnProperty(t)&&this.removeAttribute(t)},removeStyle:function(e){var t=this.$.style;if(t.removeProperty||"border"!=e&&"margin"!=e&&"padding"!=e)t.removeProperty?t.removeProperty(e):t.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(e)),this.$.style.cssText||this.removeAttribute("style");else{var i,n=["top","left","right","bottom"];"border"==e&&(i=["color","style","width"]);for(var t=[],o=0;o<n.length;o++)if(i)for(var r=0;r<i.length;r++)t.push([e,n[o],i[r]].join("-"));else t.push([e,n[o]].join("-"));for(e=0;e<t.length;e++)this.removeStyle(t[e])}},setStyle:function(e,t){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]=t,this},setStyles:function(e){for(var t in e)this.setStyle(t,e[t]);return this},setOpacity:function(e){CKEDITOR.env.ie&&CKEDITOR.env.version<9?(e=Math.round(100*e),this.setStyle("filter",e>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")")):this.setStyle("opacity",e)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var e,t=this.getElementsByTag("*"),i=0,n=t.count();n>i;i++)e=t.getItem(i),e.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var e=this;"html"!=e.getName();){if("static"!=e.getComputedStyle("position"))return e;e=e.getParent()}return null},getDocumentPosition:function(e){var t=0,i=0,n=this.getDocument(),o=n.getBody(),r="BackCompat"==n.$.compatMode;if(document.documentElement.getBoundingClientRect){var s=this.$.getBoundingClientRect(),a=n.$.documentElement,l=a.clientTop||o.$.clientTop||0,c=a.clientLeft||o.$.clientLeft||0,d=!0;CKEDITOR.env.ie&&(d=n.getDocumentElement().contains(this),n=n.getBody().contains(this),d=r&&n||!r&&d),d&&(CKEDITOR.env.webkit?(t=o.$.scrollLeft||a.scrollLeft,i=o.$.scrollTop||a.scrollTop):(i=r?o.$:a,t=i.scrollLeft,i=i.scrollTop),t=s.left+t-c,i=s.top+i-l)}else for(l=this,c=null;l&&"body"!=l.getName()&&"html"!=l.getName();){for(t+=l.$.offsetLeft-l.$.scrollLeft,i+=l.$.offsetTop-l.$.scrollTop,l.equals(this)||(t+=l.$.clientLeft||0,i+=l.$.clientTop||0);c&&!c.equals(l);)t-=c.$.scrollLeft,i-=c.$.scrollTop,c=c.getParent();c=l,l=(s=l.$.offsetParent)?new CKEDITOR.dom.element(s):null}return e&&(s=this.getWindow(),l=e.getWindow(),!s.equals(l)&&s.$.frameElement&&(e=new CKEDITOR.dom.element(s.$.frameElement).getDocumentPosition(e),t+=e.x,i+=e.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||r||(t+=this.$.clientLeft?1:0,i+=this.$.clientTop?1:0),{x:t,y:i}},scrollIntoView:function(e){var t=this.getParent();if(t)do if((t.$.clientWidth&&t.$.clientWidth<t.$.scrollWidth||t.$.clientHeight&&t.$.clientHeight<t.$.scrollHeight)&&!t.is("body")&&this.scrollIntoParent(t,e,1),t.is("html")){var i=t.getWindow();try{var n=i.$.frameElement;n&&(t=new CKEDITOR.dom.element(n))}catch(o){}}while(t=t.getParent())},scrollIntoParent:function(e,t,i){function n(t,i){/body|html/.test(e.getName())?e.getWindow().$.scrollBy(t,i):(e.$.scrollLeft=e.$.scrollLeft+t,e.$.scrollTop=e.$.scrollTop+i)}function o(e,t){var i={x:0,y:0};if(!e.is(d?"body":"html")){var n=e.$.getBoundingClientRect();i.x=n.left,i.y=n.top}return n=e.getWindow(),n.equals(t)||(n=o(CKEDITOR.dom.element.get(n.$.frameElement),t),i.x=i.x+n.x,i.y=i.y+n.y),i}function r(e,t){return parseInt(e.getComputedStyle("margin-"+t)||0,10)||0}var s,a,l,c;!e&&(e=this.getWindow()),l=e.getDocument();var d="BackCompat"==l.$.compatMode;e instanceof CKEDITOR.dom.window&&(e=d?l.getBody():l.getDocumentElement()),l=e.getWindow(),a=o(this,l);var u=o(e,l),h=this.$.offsetHeight;s=this.$.offsetWidth;var p=e.$.clientHeight,f=e.$.clientWidth;l=a.x-r(this,"left")-u.x||0,c=a.y-r(this,"top")-u.y||0,s=a.x+s+r(this,"right")-(u.x+f)||0,a=a.y+h+r(this,"bottom")-(u.y+p)||0,(0>c||a>0)&&n(0,t===!0?c:t===!1?a:0>c?c:a),i&&(0>l||s>0)&&n(0>l?l:s,0)},setState:function(e,t,i){switch(t=t||"cke",e){case CKEDITOR.TRISTATE_ON:this.addClass(t+"_on"),this.removeClass(t+"_off"),this.removeClass(t+"_disabled"),i&&this.setAttribute("aria-pressed",!0),i&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(t+"_disabled"),this.removeClass(t+"_off"),this.removeClass(t+"_on"),i&&this.setAttribute("aria-disabled",!0),i&&this.removeAttribute("aria-pressed");break;default:this.addClass(t+"_off"),this.removeClass(t+"_on"),this.removeClass(t+"_disabled"),i&&this.removeAttribute("aria-pressed"),i&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){
var e=this.$;try{e.contentWindow.document}catch(t){e.src=e.src}return e&&new CKEDITOR.dom.document(e.contentWindow.document)},copyAttributes:function(e,t){for(var i=this.$.attributes,t=t||{},n=0;n<i.length;n++){var o,r=i[n],s=r.nodeName.toLowerCase();s in t||("checked"==s&&(o=this.getAttribute(s))?e.setAttribute(s,o):(!CKEDITOR.env.ie||this.hasAttribute(s))&&(o=this.getAttribute(s),null===o&&(o=r.nodeValue),e.setAttribute(s,o)))}""!==this.$.style.cssText&&(e.$.style.cssText=this.$.style.cssText)},renameNode:function(e){if(this.getName()!=e){var t=this.getDocument(),e=new CKEDITOR.dom.element(e,t);this.copyAttributes(e),this.moveChildren(e),this.getParent()&&this.$.parentNode.replaceChild(e.$,this.$),e.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=e.$,delete this.getName}},getChild:function(){function e(e,t){var i=e.childNodes;return t>=0&&t<i.length?i[t]:void 0}return function(t){var i=this.$;if(t.slice)for(;t.length>0&&i;)i=e(i,t.shift());else i=e(i,t);return i?new CKEDITOR.dom.node(i):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(e){e.data.getTarget().hasClass("cke_enable_context_menu")||e.data.preventDefault()})},getDirection:function(e){return e?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(e,t){return e="data-"+e,void 0===t?this.getAttribute(e):(t===!1?this.removeAttribute(e):this.setAttribute(e,t),null)},getEditor:function(){var e,t,i=CKEDITOR.instances;for(e in i)if(t=i[e],t.element.equals(this)&&t.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO)return t;return null},find:function(i){var n=e(this),i=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(t(this,i)));return n(),i},findOne:function(i){var n=e(this),i=this.$.querySelector(t(this,i));return n(),i?new CKEDITOR.dom.element(i):null},forEach:function(e,t,i){if(!(i||t&&this.type!=t))var n=e(this);if(n!==!1)for(var i=this.getChildren(),o=0;o<i.count();o++)n=i.getItem(o),n.type==CKEDITOR.NODE_ELEMENT?n.forEach(e,t):(!t||n.type==t)&&e(n)}});var n={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(e,t,n){"number"==typeof t&&(!n||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(t-=i.call(this,e)),this.setStyle(e,t+"px"))},CKEDITOR.dom.element.prototype.getSize=function(e,t){var n=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(e)],this.$["client"+CKEDITOR.tools.capitalize(e)])||0;return t&&(n-=i.call(this,e)),n}}(),CKEDITOR.dom.documentFragment=function(e){e=e||CKEDITOR.document,this.$=e.type==CKEDITOR.NODE_DOCUMENT?e.$.createDocumentFragment():e},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(e){e=e.$,e.parentNode.insertBefore(this.$,e.nextSibling)}},!0,{append:1,appendBogus:1,getFirst:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function e(e,t){var i=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,i.collapsed)return this.end(),null;i.optimize()}var n,o=i.startContainer;n=i.endContainer;var r,s=i.startOffset,a=i.endOffset,l=this.guard,c=this.type,d=e?"getPreviousSourceNode":"getNextSourceNode";if(!e&&!this._.guardLTR){var u=n.type==CKEDITOR.NODE_ELEMENT?n:n.getParent(),h=n.type==CKEDITOR.NODE_ELEMENT?n.getChild(a):n.getNext();this._.guardLTR=function(e,t){return!(t&&u.equals(e)||h&&e.equals(h)||e.type==CKEDITOR.NODE_ELEMENT&&t&&e.equals(i.root))}}if(e&&!this._.guardRTL){var p=o.type==CKEDITOR.NODE_ELEMENT?o:o.getParent(),f=o.type==CKEDITOR.NODE_ELEMENT?s?o.getChild(s-1):null:o.getPrevious();this._.guardRTL=function(e,t){return!(t&&p.equals(e)||f&&e.equals(f)||e.type==CKEDITOR.NODE_ELEMENT&&t&&e.equals(i.root))}}var m=e?this._.guardRTL:this._.guardLTR;for(r=l?function(e,t){return m(e,t)===!1?!1:l(e,t)}:m,this.current?n=this.current[d](!1,c,r):(e?n.type==CKEDITOR.NODE_ELEMENT&&(n=a>0?n.getChild(a-1):r(n,!0)===!1?null:n.getPreviousSourceNode(!0,c,r)):(n=o,n.type!=CKEDITOR.NODE_ELEMENT||(n=n.getChild(s))||(n=r(o,!0)===!1?null:o.getNextSourceNode(!0,c,r))),n&&r(n)===!1&&(n=null));n&&!this._.end;){if(this.current=n,this.evaluator&&this.evaluator(n)===!1){if(t&&this.evaluator)return!1}else if(!t)return n;n=n[d](!1,c,r)}return this.end(),this.current=null}function t(t){for(var i,n=null;i=e.call(this,t);)n=i;return n}function i(e){if(c(e))return!1;if(e.type==CKEDITOR.NODE_TEXT)return!0;if(e.type==CKEDITOR.NODE_ELEMENT){if(e.is(CKEDITOR.dtd.$inline)||e.is("hr")||"false"==e.getAttribute("contenteditable"))return!0;var t;if((t=!CKEDITOR.env.needsBrFiller)&&(t=e.is(d)))e:{t=0;for(var i=e.getChildCount();i>t;++t)if(!c(e.getChild(t))){t=!1;break e}t=!0}if(t)return!0}return!1}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(e){this.range=e,this._={}},proto:{end:function(){this._.end=1},next:function(){return e.call(this)},previous:function(){return e.call(this,1)},checkForward:function(){return e.call(this,0,1)!==!1},checkBackward:function(){return e.call(this,1,1)!==!1},lastForward:function(){return t.call(this)},lastBackward:function(){return t.call(this,1)},reset:function(){delete this.current,this._={}}}});var n={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},o={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(e){return"none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in o||!n[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||e&&this.is(e)):!0},CKEDITOR.dom.walker.blockBoundary=function(e){return function(t){return!(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary(e))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(e,t){function i(e){return e&&e.getName&&"span"==e.getName()&&e.data("cke-bookmark")}return function(n){var o,r;return o=n&&n.type!=CKEDITOR.NODE_ELEMENT&&(r=n.getParent())&&i(r),o=e?o:o||i(n),!!(t^o)}},CKEDITOR.dom.walker.whitespaces=function(e){return function(t){var i;return t&&t.type==CKEDITOR.NODE_TEXT&&(i=!CKEDITOR.tools.trim(t.getText())||CKEDITOR.env.webkit&&"​"==t.getText()),!!(e^i)}},CKEDITOR.dom.walker.invisible=function(e){var t=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.env.webkit?1:0;return function(n){return t(n)?n=1:(n.type==CKEDITOR.NODE_TEXT&&(n=n.getParent()),n=n.$.offsetWidth<=i),!!(e^n)}},CKEDITOR.dom.walker.nodeType=function(e,t){return function(i){return!!(t^i.type==e)}},CKEDITOR.dom.walker.bogus=function(e){function t(e){return!s(e)&&!a(e)}return function(i){var n=CKEDITOR.env.needsBrFiller?i.is&&i.is("br"):i.getText&&r.test(i.getText());return n&&(n=i.getParent(),i=i.getNext(t),n=n.isBlockBoundary()&&(!i||i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary())),!!(e^n)}},CKEDITOR.dom.walker.temp=function(e){return function(t){return t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),t=t&&t.hasAttribute("data-cke-temp"),!!(e^t)}};var r=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,s=CKEDITOR.dom.walker.whitespaces(),a=CKEDITOR.dom.walker.bookmark(),l=CKEDITOR.dom.walker.temp();CKEDITOR.dom.walker.ignored=function(e){return function(t){return t=s(t)||a(t)||l(t),!!(e^t)}};var c=CKEDITOR.dom.walker.ignored(),d=function(e){var t,i={};for(t in e)CKEDITOR.dtd[t]["#"]&&(i[t]=1);return i}(CKEDITOR.dtd.$block);CKEDITOR.dom.walker.editable=function(e){return function(t){return!!(e^i(t))}},CKEDITOR.dom.element.prototype.getBogus=function(){var e=this;do e=e.getPreviousSourceNode();while(a(e)||s(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$inline)&&!e.is(CKEDITOR.dtd.$empty));return e&&(CKEDITOR.env.needsBrFiller?e.is&&e.is("br"):e.getText&&r.test(e.getText()))?e:!1}}(),CKEDITOR.dom.range=function(e){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var t=e instanceof CKEDITOR.dom.document;this.document=t?e:e.getDocument(),this.root=t?e.getBody():e},function(){function e(){var e=!1,t=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.dom.walker.bookmark(!0),n=CKEDITOR.dom.walker.bogus();return function(o){return i(o)||t(o)?!0:n(o)&&!e?e=!0:o.type==CKEDITOR.NODE_TEXT&&(o.hasAscendant("pre")||CKEDITOR.tools.trim(o.getText()).length)||o.type==CKEDITOR.NODE_ELEMENT&&!o.is(r)?!1:!0}}function t(e){var t=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.dom.walker.bookmark(1);return function(n){return i(n)||t(n)?!0:!e&&s(n)||n.type==CKEDITOR.NODE_ELEMENT&&n.is(CKEDITOR.dtd.$removeEmpty)}}function i(e){return function(){var t;return this[e?"getPreviousNode":"getNextNode"](function(e){return!t&&c(e)&&(t=e),l(e)&&!(s(e)&&e.equals(t))})}}var n=function(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer.equals(e.endContainer)&&e.startOffset==e.endOffset},o=function(e,t,i,n){e.optimizeBookmark();var o,r,s=e.startContainer,a=e.endContainer,l=e.startOffset,c=e.endOffset;a.type==CKEDITOR.NODE_TEXT?a=a.split(c):a.getChildCount()>0&&(c>=a.getChildCount()?(a=a.append(e.document.createText("")),r=!0):a=a.getChild(c)),s.type==CKEDITOR.NODE_TEXT?(s.split(l),s.equals(a)&&(a=s.getNext())):l?l>=s.getChildCount()?(s=s.append(e.document.createText("")),o=!0):s=s.getChild(l).getPrevious():(s=s.append(e.document.createText(""),1),o=!0);var d,u,h,l=s.getParents(),c=a.getParents();for(d=0;d<l.length&&(u=l[d],h=c[d],u.equals(h));d++);for(var p,f,m,g=i,v=d;v<l.length;v++){for(p=l[v],g&&!p.equals(s)&&(f=g.append(p.clone())),p=p.getNext();p&&(!p.equals(c[v])&&!p.equals(a));)m=p.getNext(),2==t?g.append(p.clone(!0)):(p.remove(),1==t&&g.append(p)),p=m;g&&(g=f)}for(g=i,i=d;i<c.length;i++){if(p=c[i],t>0&&!p.equals(a)&&(f=g.append(p.clone())),!l[i]||p.$.parentNode!=l[i].$.parentNode)for(p=p.getPrevious();p&&(!p.equals(l[i])&&!p.equals(s));)m=p.getPrevious(),2==t?g.$.insertBefore(p.$.cloneNode(!0),g.$.firstChild):(p.remove(),1==t&&g.$.insertBefore(p.$,g.$.firstChild)),p=m;g&&(g=f)}2==t?(u=e.startContainer,u.type==CKEDITOR.NODE_TEXT&&(u.$.data=u.$.data+u.$.nextSibling.data,u.$.parentNode.removeChild(u.$.nextSibling)),e=e.endContainer,e.type==CKEDITOR.NODE_TEXT&&e.$.nextSibling&&(e.$.data=e.$.data+e.$.nextSibling.data,e.$.parentNode.removeChild(e.$.nextSibling))):(u&&h&&(s.$.parentNode!=u.$.parentNode||a.$.parentNode!=h.$.parentNode)&&(t=h.getIndex(),o&&h.$.parentNode==s.$.parentNode&&t--,n&&u.type==CKEDITOR.NODE_ELEMENT?(n=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',e.document),n.insertAfter(u),u.mergeSiblings(!1),e.moveToBookmark({startNode:n})):e.setStart(h.getParent(),t)),e.collapse(!0)),o&&s.remove(),r&&a.$.parentNode&&a.remove()},r={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},s=CKEDITOR.dom.walker.bogus(),a=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,l=CKEDITOR.dom.walker.editable(),c=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var e=new CKEDITOR.dom.range(this.root);return e._setStartContainer(this.startContainer),e.startOffset=this.startOffset,e._setEndContainer(this.endContainer),e.endOffset=this.endOffset,e.collapsed=this.collapsed,e},collapse:function(e){e?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(){var e=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||o(this,2,e),e},deleteContents:function(e){this.collapsed||o(this,0,null,e)},extractContents:function(e){var t=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||o(this,1,t,e),t},createBookmark:function(e){var t,i,n,o,r=this.collapsed;return t=this.document.createElement("span"),t.data("cke-bookmark",1),t.setStyle("display","none"),t.setHtml("&nbsp;"),e&&(n="cke_bm_"+CKEDITOR.tools.getNextNumber(),t.setAttribute("id",n+(r?"C":"S"))),r||(i=t.clone(),i.setHtml("&nbsp;"),e&&i.setAttribute("id",n+"E"),o=this.clone(),o.collapse(),o.insertNode(i)),o=this.clone(),o.collapse(!0),o.insertNode(t),i?(this.setStartAfter(t),this.setEndBefore(i)):this.moveToPosition(t,CKEDITOR.POSITION_AFTER_END),{startNode:e?n+(r?"C":"S"):t,endNode:e?n+"E":i,serializable:e,collapsed:r}},createBookmark2:function(){function e(e){var i,n=e.container,o=e.offset;i=n;var r=o;if(i=i.type!=CKEDITOR.NODE_ELEMENT||0===r||r==i.getChildCount()?0:i.getChild(r-1).type==CKEDITOR.NODE_TEXT&&i.getChild(r).type==CKEDITOR.NODE_TEXT,i&&(n=n.getChild(o-1),o=n.getLength()),n.type==CKEDITOR.NODE_ELEMENT&&o>1&&(o=n.getChild(o-1).getIndex(!0)+1),n.type==CKEDITOR.NODE_TEXT){for(i=n,r=0;(i=i.getPrevious())&&i.type==CKEDITOR.NODE_TEXT;)r+=i.getLength();i=r,n.getText()?o+=i:(r=n.getPrevious(t),i?(o=i,n=r?r.getNext():n.getParent().getFirst()):(n=n.getParent(),o=r?r.getIndex(!0)+1:0))}e.container=n,e.offset=o}var t=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(t){var i=this.collapsed,n={container:this.startContainer,offset:this.startOffset},o={container:this.endContainer,offset:this.endOffset};return t&&(e(n),i||e(o)),{start:n.container.getAddress(t),end:i?null:o.container.getAddress(t),startOffset:n.offset,endOffset:o.offset,normalized:t,collapsed:i,is2:!0}}}(),moveToBookmark:function(e){if(e.is2){var t=this.document.getByAddress(e.start,e.normalized),i=e.startOffset,n=e.end&&this.document.getByAddress(e.end,e.normalized),e=e.endOffset;this.setStart(t,i),n?this.setEnd(n,e):this.collapse(!0)}else t=(i=e.serializable)?this.document.getById(e.startNode):e.startNode,e=i?this.document.getById(e.endNode):e.endNode,this.setStartBefore(t),t.remove(),e?(this.setEndBefore(e),e.remove()):this.collapse(!0)},getBoundaryNodes:function(){var e,t=this.startContainer,i=this.endContainer,n=this.startOffset,o=this.endOffset;if(t.type==CKEDITOR.NODE_ELEMENT)if(e=t.getChildCount(),e>n)t=t.getChild(n);else if(1>e)t=t.getPreviousSourceNode();else{for(t=t.$;t.lastChild;)t=t.lastChild;t=new CKEDITOR.dom.node(t),t=t.getNextSourceNode()||t}if(i.type==CKEDITOR.NODE_ELEMENT)if(e=i.getChildCount(),e>o)i=i.getChild(o).getPreviousSourceNode(!0);else if(1>e)i=i.getPreviousSourceNode();else{for(i=i.$;i.lastChild;)i=i.lastChild;i=new CKEDITOR.dom.node(i)}return t.getPosition(i)&CKEDITOR.POSITION_FOLLOWING&&(t=i),{startNode:t,endNode:i}},getCommonAncestor:function(e,t){var i=this.startContainer,n=this.endContainer,i=i.equals(n)?e&&i.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?i.getChild(this.startOffset):i:i.getCommonAncestor(n);return t&&!i.is?i.getParent():i},optimize:function(){var e=this.startContainer,t=this.startOffset;e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setStartAfter(e):this.setStartBefore(e)),e=this.endContainer,t=this.endOffset,e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setEndAfter(e):this.setEndBefore(e))},optimizeBookmark:function(){var e=this.startContainer,t=this.endContainer;e.is&&e.is("span")&&e.data("cke-bookmark")&&this.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),t&&t.is&&t.is("span")&&t.data("cke-bookmark")&&this.setEndAt(t,CKEDITOR.POSITION_AFTER_END)},trim:function(e,t){var i=this.startContainer,n=this.startOffset,o=this.collapsed;if((!e||o)&&i&&i.type==CKEDITOR.NODE_TEXT){if(n)if(n>=i.getLength())n=i.getIndex()+1,i=i.getParent();else{var r=i.split(n),n=i.getIndex()+1,i=i.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(r,this.endOffset-this.startOffset):i.equals(this.endContainer)&&(this.endOffset=this.endOffset+1)}else n=i.getIndex(),i=i.getParent();if(this.setStart(i,n),o)return void this.collapse(!0)}i=this.endContainer,n=this.endOffset,t||o||!i||i.type!=CKEDITOR.NODE_TEXT||(n?(n>=i.getLength()||i.split(n),n=i.getIndex()+1):n=i.getIndex(),i=i.getParent(),this.setEnd(i,n))},enlarge:function(e,t){function i(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable")?null:e}var n=RegExp(/[^\s\ufeff]/);switch(e){case CKEDITOR.ENLARGE_INLINE:var o=1;case CKEDITOR.ENLARGE_ELEMENT:if(this.collapsed)break;var r,s,a,l,c,d,u,h=this.getCommonAncestor(),p=this.root,f=!1;d=this.startContainer;var m=this.startOffset;for(d.type==CKEDITOR.NODE_TEXT?(m&&(d=!CKEDITOR.tools.trim(d.substring(0,m)).length&&d,f=!!d),d&&!(l=d.getPrevious())&&(a=d.getParent())):(m&&(l=d.getChild(m-1)||d.getLast()),l||(a=d)),a=i(a);a||l;){if(a&&!l){if(!c&&a.equals(h)&&(c=!0),o?a.isBlockBoundary():!p.contains(a))break;f&&"inline"==a.getComputedStyle("display")||(f=!1,c?r=a:this.setStartBefore(a)),l=a.getPrevious()}for(;l;)if(d=!1,l.type==CKEDITOR.NODE_COMMENT)l=l.getPrevious();else{if(l.type==CKEDITOR.NODE_TEXT)u=l.getText(),n.test(u)&&(l=null),d=/[\s\ufeff]$/.test(u);else if((l.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||t&&l.is("br"))&&!l.data("cke-bookmark"))if(f&&CKEDITOR.dtd.$removeEmpty[l.getName()]){if(u=l.getText(),n.test(u))l=null;else for(var g,m=l.$.getElementsByTagName("*"),v=0;g=m[v++];)if(!CKEDITOR.dtd.$removeEmpty[g.nodeName.toLowerCase()]){l=null;break}l&&(d=!!u.length)}else l=null;if(d&&(f?c?r=a:a&&this.setStartBefore(a):f=!0),l){if(d=l.getPrevious(),!a&&!d){a=l,l=null;break}l=d}else a=null}a&&(a=i(a.getParent()))}d=this.endContainer,m=this.endOffset,a=l=null,c=f=!1;var b=function(e,t){var i=new CKEDITOR.dom.range(p);i.setStart(e,t),i.setEndAt(p,CKEDITOR.POSITION_BEFORE_END);var o,i=new CKEDITOR.dom.walker(i);for(i.guard=function(e){return!(e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary())};o=i.next();){if(o.type!=CKEDITOR.NODE_TEXT)return!1;if(u=o!=e?o.getText():o.substring(t),n.test(u))return!1}return!0};for(d.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(d.substring(m)).length?f=!0:(f=!d.getLength(),m==d.getLength()?(l=d.getNext())||(a=d.getParent()):b(d,m)&&(a=d.getParent())):(l=d.getChild(m))||(a=d);a||l;){if(a&&!l){if(!c&&a.equals(h)&&(c=!0),o?a.isBlockBoundary():!p.contains(a))break;f&&"inline"==a.getComputedStyle("display")||(f=!1,c?s=a:a&&this.setEndAfter(a)),l=a.getNext()}for(;l;){if(d=!1,l.type==CKEDITOR.NODE_TEXT)u=l.getText(),b(l,0)||(l=null),d=/^[\s\ufeff]/.test(u);else if(l.type==CKEDITOR.NODE_ELEMENT){if((l.$.offsetWidth>0||t&&l.is("br"))&&!l.data("cke-bookmark"))if(f&&CKEDITOR.dtd.$removeEmpty[l.getName()]){if(u=l.getText(),n.test(u))l=null;else for(m=l.$.getElementsByTagName("*"),v=0;g=m[v++];)if(!CKEDITOR.dtd.$removeEmpty[g.nodeName.toLowerCase()]){l=null;break}l&&(d=!!u.length)}else l=null}else d=1;if(d&&f&&(c?s=a:this.setEndAfter(a)),l){if(d=l.getNext(),!a&&!d){a=l,l=null;break}l=d}else a=null}a&&(a=i(a.getParent()))}r&&s&&(h=r.contains(s)?s:r,this.setStartBefore(h),this.setEndAfter(h));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:a=new CKEDITOR.dom.range(this.root),p=this.root,a.setStartAt(p,CKEDITOR.POSITION_AFTER_START),a.setEnd(this.startContainer,this.startOffset),a=new CKEDITOR.dom.walker(a);var y,w,_=CKEDITOR.dom.walker.blockBoundary(e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),E=null,T=function(e){if(e.type==CKEDITOR.NODE_ELEMENT&&"false"==e.getAttribute("contenteditable"))if(E){if(E.equals(e))return void(E=null)}else E=e;else if(E)return;var t=_(e);return t||(y=e),t},o=function(e){var t=T(e);return!t&&e.is&&e.is("br")&&(w=e),t};if(a.guard=T,a=a.lastBackward(),y=y||p,this.setStartAt(y,!y.is("br")&&(!a&&this.checkStartOfBlock()||a&&y.contains(a))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){a=this.clone(),a=new CKEDITOR.dom.walker(a);var C=CKEDITOR.dom.walker.whitespaces(),S=CKEDITOR.dom.walker.bookmark();if(a.evaluator=function(e){return!C(e)&&!S(e)},(a=a.previous())&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("br"))break}a=this.clone(),a.collapse(),a.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),a=new CKEDITOR.dom.walker(a),a.guard=e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?o:T,y=E=w=null,a=a.lastForward(),y=y||p,this.setEndAt(y,!a&&this.checkEndOfBlock()||a&&y.contains(a)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),w&&this.setEndAfter(w)}},shrink:function(e,t,i){if(!this.collapsed){var e=e||CKEDITOR.SHRINK_TEXT,n=this.clone(),o=this.startContainer,r=this.endContainer,s=this.startOffset,a=this.endOffset,l=1,c=1;o&&o.type==CKEDITOR.NODE_TEXT&&(s?s>=o.getLength()?n.setStartAfter(o):(n.setStartBefore(o),l=0):n.setStartBefore(o)),r&&r.type==CKEDITOR.NODE_TEXT&&(a?a>=r.getLength()?n.setEndAfter(r):(n.setEndAfter(r),c=0):n.setEndBefore(r));var n=new CKEDITOR.dom.walker(n),d=CKEDITOR.dom.walker.bookmark();n.evaluator=function(t){return t.type==(e==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var u;return n.guard=function(t,n){return d(t)?!0:e==CKEDITOR.SHRINK_ELEMENT&&t.type==CKEDITOR.NODE_TEXT||n&&t.equals(u)||i===!1&&t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()||t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("contenteditable")?!1:(!n&&t.type==CKEDITOR.NODE_ELEMENT&&(u=t),!0)},l&&(o=n[e==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(o,t?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),c&&(n.reset(),(n=n[e==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(n,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!l&&!c)}},insertNode:function(e){this.optimizeBookmark(),this.trim(!1,!0);var t=this.startContainer,i=t.getChild(this.startOffset);i?e.insertBefore(i):t.append(e),e.getParent()&&e.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(e)},moveToPosition:function(e,t){this.setStartAt(e,t),this.collapse(!0)},moveToRange:function(e){this.setStart(e.startContainer,e.startOffset),this.setEnd(e.endContainer,e.endOffset)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e.type==CKEDITOR.NODE_TEXT?e.getLength():e.getChildCount())},setStart:function(e,t){e.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[e.getName()]&&(t=e.getIndex(),e=e.getParent()),this._setStartContainer(e),this.startOffset=t,this.endContainer||(this._setEndContainer(e),this.endOffset=t),n(this)},setEnd:function(e,t){e.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[e.getName()]&&(t=e.getIndex()+1,e=e.getParent()),this._setEndContainer(e),this.endOffset=t,this.startContainer||(this._setStartContainer(e),this.startOffset=t),n(this)},setStartAfter:function(e){this.setStart(e.getParent(),e.getIndex()+1)},setStartBefore:function(e){this.setStart(e.getParent(),e.getIndex())},setEndAfter:function(e){this.setEnd(e.getParent(),e.getIndex()+1)},setEndBefore:function(e){this.setEnd(e.getParent(),e.getIndex())},setStartAt:function(e,t){switch(t){case CKEDITOR.POSITION_AFTER_START:this.setStart(e,0);break;case CKEDITOR.POSITION_BEFORE_END:e.type==CKEDITOR.NODE_TEXT?this.setStart(e,e.getLength()):this.setStart(e,e.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(e);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(e)}n(this)},setEndAt:function(e,t){switch(t){case CKEDITOR.POSITION_AFTER_START:this.setEnd(e,0);break;case CKEDITOR.POSITION_BEFORE_END:e.type==CKEDITOR.NODE_TEXT?this.setEnd(e,e.getLength()):this.setEnd(e,e.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(e);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(e)}n(this)},fixBlock:function(e,t){var i=this.createBookmark(),n=this.document.createElement(t);return this.collapse(e),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(n),n.trim(),n.appendBogus(),this.insertNode(n),this.moveToBookmark(i),n},splitBlock:function(e){var t=new CKEDITOR.dom.elementPath(this.startContainer,this.root),i=new CKEDITOR.dom.elementPath(this.endContainer,this.root),n=t.block,o=i.block,r=null;return t.blockLimit.equals(i.blockLimit)?("br"!=e&&(n||(n=this.fixBlock(!0,e),o=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),o||(o=this.fixBlock(!1,e))),e=n&&this.checkStartOfBlock(),t=o&&this.checkEndOfBlock(),this.deleteContents(),n&&n.equals(o)&&(t?(r=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(o,CKEDITOR.POSITION_AFTER_END),o=null):e?(r=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(n,CKEDITOR.POSITION_BEFORE_START),n=null):(o=this.splitElement(n),n.is("ul","ol")||n.appendBogus())),{previousBlock:n,nextBlock:o,wasStartOfBlock:e,wasEndOfBlock:t,elementPath:r}):null},splitElement:function(e){if(!this.collapsed)return null;this.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);var t=this.extractContents(),i=e.clone(!1);return t.appendTo(i),i.insertAfter(e),this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),i},removeEmptyBlocksAtEnd:function(){function e(e){return function(n){return t(n)||i(n)||n.type==CKEDITOR.NODE_ELEMENT&&n.isEmptyInlineRemoveable()||e.is("table")&&n.is("caption")?!1:!0}}var t=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.dom.walker.bookmark(!1);return function(t){for(var i,n=this.createBookmark(),o=this[t?"endPath":"startPath"](),r=o.block||o.blockLimit;r&&!r.equals(o.root)&&!r.getFirst(e(r));)i=r.getParent(),this[t?"setEndAt":"setStartAt"](r,CKEDITOR.POSITION_AFTER_END),r.remove(1),r=i;this.moveToBookmark(n)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(e,i){var n=i==CKEDITOR.START,o=this.clone();return o.collapse(n),o[n?"setStartAt":"setEndAt"](e,n?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),o=new CKEDITOR.dom.walker(o),o.evaluator=t(n),o[n?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var t=this.startContainer,i=this.startOffset;return CKEDITOR.env.ie&&i&&t.type==CKEDITOR.NODE_TEXT&&(t=CKEDITOR.tools.ltrim(t.substring(0,i)),a.test(t)&&this.trim(0,1)),this.trim(),t=new CKEDITOR.dom.elementPath(this.startContainer,this.root),i=this.clone(),i.collapse(!0),i.setStartAt(t.block||t.blockLimit,CKEDITOR.POSITION_AFTER_START),t=new CKEDITOR.dom.walker(i),t.evaluator=e(),t.checkBackward()},checkEndOfBlock:function(){var t=this.endContainer,i=this.endOffset;return CKEDITOR.env.ie&&t.type==CKEDITOR.NODE_TEXT&&(t=CKEDITOR.tools.rtrim(t.substring(i)),a.test(t)&&this.trim(1,0)),this.trim(),t=new CKEDITOR.dom.elementPath(this.endContainer,this.root),i=this.clone(),i.collapse(!1),i.setEndAt(t.block||t.blockLimit,CKEDITOR.POSITION_BEFORE_END),t=new CKEDITOR.dom.walker(i),t.evaluator=e(),t.checkForward()},getPreviousNode:function(e,t,i){var n=this.clone();return n.collapse(1),n.setStartAt(i||this.root,CKEDITOR.POSITION_AFTER_START),i=new CKEDITOR.dom.walker(n),i.evaluator=e,i.guard=t,i.previous()},getNextNode:function(e,t,i){var n=this.clone();return n.collapse(),n.setEndAt(i||this.root,CKEDITOR.POSITION_BEFORE_END),i=new CKEDITOR.dom.walker(n),i.evaluator=e,i.guard=t,i.next()},checkReadOnly:function(){function e(e,t){for(;e;){if(e.type==CKEDITOR.NODE_ELEMENT){if("false"==e.getAttribute("contentEditable")&&!e.data("cke-editable"))return 0;if(e.is("html")||"true"==e.getAttribute("contentEditable")&&(e.contains(t)||e.equals(t)))break}e=e.getParent()}return 1}return function(){var t=this.startContainer,i=this.endContainer;return!(e(t,i)&&e(i,t))}}(),moveToElementEditablePosition:function(e,t){if(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEditable(!1))return this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var i=0;e;){if(e.type==CKEDITOR.NODE_TEXT){t&&this.endContainer&&this.checkEndOfBlock()&&a.test(e.getText())?this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),i=1;break}if(e.type==CKEDITOR.NODE_ELEMENT)if(e.isEditable())this.moveToPosition(e,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),i=1;else if(t&&e.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START);else if("false"==e.getAttribute("contenteditable")&&e.is(CKEDITOR.dtd.$block))return this.setStartBefore(e),this.setEndAfter(e),!0;var n=e,o=i,r=void 0;n.type==CKEDITOR.NODE_ELEMENT&&n.isEditable(!1)&&(r=n[t?"getLast":"getFirst"](c)),!o&&!r&&(r=n[t?"getPrevious":"getNext"](c)),e=r}return!!i},moveToClosestEditablePosition:function(e,t){var i,n=new CKEDITOR.dom.range(this.root),o=0,r=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return n.moveToPosition(e,r[t?0:1]),e.is(CKEDITOR.dtd.$block)?(i=n[t?"getNextEditableNode":"getPreviousEditableNode"]())&&(o=1,i.type==CKEDITOR.NODE_ELEMENT&&i.is(CKEDITOR.dtd.$block)&&"false"==i.getAttribute("contenteditable")?(n.setStartAt(i,CKEDITOR.POSITION_BEFORE_START),n.setEndAt(i,CKEDITOR.POSITION_AFTER_END)):n.moveToPosition(i,r[t?1:0])):o=1,o&&this.moveToRange(n),!!o},moveToElementEditStart:function(e){return this.moveToElementEditablePosition(e)},moveToElementEditEnd:function(e){return this.moveToElementEditablePosition(e,!0)},getEnclosedNode:function(){var e=this.clone();if(e.optimize(),e.startContainer.type!=CKEDITOR.NODE_ELEMENT||e.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var e=new CKEDITOR.dom.walker(e),t=CKEDITOR.dom.walker.bookmark(!1,!0),i=CKEDITOR.dom.walker.whitespaces(!0);e.evaluator=function(e){return i(e)&&t(e)};var n=e.next();return e.reset(),n&&n.equals(e.previous())?n:null},getTouchedStartNode:function(){var e=this.startContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.startOffset)||e},getTouchedEndNode:function(){var e=this.endContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.endOffset-1)||e},getNextEditableNode:i(),getPreviousEditableNode:i(1),scrollIntoView:function(){var e,t,i,n=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),o=this.clone();o.optimize(),(i=o.startContainer.type==CKEDITOR.NODE_TEXT)?(t=o.startContainer.getText(),e=o.startContainer.split(o.startOffset),n.insertAfter(o.startContainer)):o.insertNode(n),n.scrollIntoView(),i&&(o.startContainer.setText(t),e.remove()),n.remove()},_setStartContainer:function(e){this.startContainer=e},_setEndContainer:function(e){this.endContainer=e}}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function e(e){arguments.length<1||(this.range=e,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function t(e){var t=[];return e.forEach(function(e){return"true"==e.getAttribute("contenteditable")?(t.push(e),!1):void 0},CKEDITOR.NODE_ELEMENT,!0),t}function i(e,n,o,r){e:{null==r&&(r=t(o));for(var s;s=r.shift();)if(s.getDtd().p){r={element:s,remaining:r};break e}r=null}return r?(s=CKEDITOR.filter.instances[r.element.data("cke-filter")])&&!s.check(n)?i(e,n,o,r.remaining):(n=new CKEDITOR.dom.range(r.element),n.selectNodeContents(r.element),n=n.createIterator(),n.enlargeBr=e.enlargeBr,n.enforceRealBlocks=e.enforceRealBlocks,n.activeFilter=n.filter=s,e._.nestedEditable={element:r.element,container:o,remaining:r.remaining,iterator:n},1):0}function n(e,t,i){return t?(e=e.clone(),e.collapse(!i),e.checkBoundaryOfElement(t,i?CKEDITOR.START:CKEDITOR.END)):!1}var o=/^[\r\n\t ]+$/,r=CKEDITOR.dom.walker.bookmark(!1,!0),s=CKEDITOR.dom.walker.whitespaces(!0),a=function(e){return r(e)&&s(e)},l={dd:1,dt:1,li:1};e.prototype={getNextParagraph:function(e){var t,s,c,d,u,e=e||"p";if(this._.nestedEditable){if(t=this._.nestedEditable.iterator.getNextParagraph(e))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,t;if(this.activeFilter=this.filter,
i(this,e,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(e);this._.nestedEditable=null}if(!this.range.root.getDtd()[e])return null;if(!this._.started){var h=this.range.clone();s=h.startPath();var p=h.endPath(),f=!h.collapsed&&n(h,s.block),m=!h.collapsed&&n(h,p.block,1);h.shrink(CKEDITOR.SHRINK_ELEMENT,!0),f&&h.setStartAt(s.block,CKEDITOR.POSITION_BEFORE_END),m&&h.setEndAt(p.block,CKEDITOR.POSITION_AFTER_START),s=h.endContainer.hasAscendant("pre",!0)||h.startContainer.hasAscendant("pre",!0),h.enlarge(this.forceBrBreak&&!s||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),h.collapsed||(s=new CKEDITOR.dom.walker(h.clone()),p=CKEDITOR.dom.walker.bookmark(!0,!0),s.evaluator=p,this._.nextNode=s.next(),s=new CKEDITOR.dom.walker(h.clone()),s.evaluator=p,s=s.previous(),this._.lastNode=s.getNextSourceNode(!0,null,h.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(p=this.range.clone(),p.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),p.checkEndOfBlock()&&(p=new CKEDITOR.dom.elementPath(p.endContainer,p.root),this._.lastNode=(p.block||p.blockLimit).getNextSourceNode(!0))),this._.lastNode&&h.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=h.document.createText(""),this._.lastNode.insertAfter(s)),h=null),this._.started=1,s=h}for(p=this._.nextNode,h=this._.lastNode,this._.nextNode=null;p;){var f=0,m=p.hasAscendant("pre"),g=p.type!=CKEDITOR.NODE_ELEMENT,v=0;if(g)p.type==CKEDITOR.NODE_TEXT&&o.test(p.getText())&&(g=0);else{var b=p.getName();if(CKEDITOR.dtd.$block[b]&&"false"==p.getAttribute("contenteditable")){t=p,i(this,e,t);break}if(p.isBlockBoundary(this.forceBrBreak&&!m&&{br:1})){if("br"==b)g=1;else if(!s&&!p.getChildCount()&&"hr"!=b){t=p,c=p.equals(h);break}s&&(s.setEndAt(p,CKEDITOR.POSITION_BEFORE_START),"br"!=b&&(this._.nextNode=p)),f=1}else{if(p.getFirst()){s||(s=this.range.clone(),s.setStartAt(p,CKEDITOR.POSITION_BEFORE_START)),p=p.getFirst();continue}g=1}}if(g&&!s&&(s=this.range.clone(),s.setStartAt(p,CKEDITOR.POSITION_BEFORE_START)),c=(!f||g)&&p.equals(h),s&&!f)for(;!p.getNext(a)&&!c;){if(b=p.getParent(),b.isBlockBoundary(this.forceBrBreak&&!m&&{br:1})){f=1,g=0,c||b.equals(h),s.setEndAt(b,CKEDITOR.POSITION_BEFORE_END);break}p=b,g=1,c=p.equals(h),v=1}if(g&&s.setEndAt(p,CKEDITOR.POSITION_AFTER_END),p=this._getNextSourceNode(p,v,h),(c=!p)||f&&s)break}if(!t){if(!s)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;t=new CKEDITOR.dom.elementPath(s.startContainer,s.root),p=t.blockLimit,f={div:1,th:1,td:1},t=t.block,!t&&p&&!this.enforceRealBlocks&&f[p.getName()]&&s.checkStartOfBlock()&&s.checkEndOfBlock()&&!p.equals(s.root)?t=p:!t||this.enforceRealBlocks&&t.is(l)?(t=this.range.document.createElement(e),s.extractContents().appendTo(t),t.trim(),s.insertNode(t),d=u=!0):"li"!=t.getName()?s.checkStartOfBlock()&&s.checkEndOfBlock()||(t=t.clone(!1),s.extractContents().appendTo(t),t.trim(),u=s.splitBlock(),d=!u.wasStartOfBlock,u=!u.wasEndOfBlock,s.insertNode(t)):c||(this._.nextNode=t.equals(h)?null:this._getNextSourceNode(s.getBoundaryNodes().endNode,1,h))}return d&&(d=t.getPrevious())&&d.type==CKEDITOR.NODE_ELEMENT&&("br"==d.getName()?d.remove():d.getLast()&&"br"==d.getLast().$.nodeName.toLowerCase()&&d.getLast().remove()),u&&(d=t.getLast())&&d.type==CKEDITOR.NODE_ELEMENT&&"br"==d.getName()&&(!CKEDITOR.env.needsBrFiller||d.getPrevious(r)||d.getNext(r))&&d.remove(),this._.nextNode||(this._.nextNode=c||t.equals(h)||!h?null:this._getNextSourceNode(t,1,h)),t},_getNextSourceNode:function(e,t,i){function n(e){return!(e.equals(i)||e.equals(o))}for(var o=this.range.root,e=e.getNextSourceNode(t,null,n);!r(e);)e=e.getNextSourceNode(t,null,n);return e}},CKEDITOR.dom.range.prototype.createIterator=function(){return new e(this)}}(),CKEDITOR.command=function(e,t){this.uiItems=[],this.exec=function(i){return this.state!=CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()?(this.editorFocus&&e.focus(),this.fire("exec")===!1?!0:t.exec.call(this,e,i)!==!1):!1},this.refresh=function(e,i){return!this.readOnly&&e.readOnly?!0:this.context&&!i.isContextFor(this.context)?(this.disable(),!0):this.checkAllowed(!0)?(this.startDisabled||this.enable(),this.modes&&!this.modes[e.mode]&&this.disable(),this.fire("refresh",{editor:e,path:i})===!1?!0:t.refresh&&t.refresh.apply(this,arguments)!==!1):(this.disable(),!0)};var i;this.checkAllowed=function(t){return t||"boolean"!=typeof i?i=e.activeFilter.checkFeature(this):i},CKEDITOR.tools.extend(this,t,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!t.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(e){return this.state==e||e!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()?!1:(this.previousState=this.state,this.state=e,this.fire("state"),!0)},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function e(e,t,i,n,o){var r,a,e=[];for(r in t){a=t[r],a="boolean"==typeof a?{}:"function"==typeof a?{match:a}:k(a),"$"!=r.charAt(0)&&(a.elements=r),i&&(a.featureName=i.toLowerCase());var l=a;l.elements=s(l.elements,/\s+/)||null,l.propertiesOnly=l.propertiesOnly||l.elements===!0;var c=/\s*,\s*/,d=void 0;for(d in A){l[d]=s(l[d],c)||null;var u=l,h=P[d],p=s(l[P[d]],c),f=l[d],m=[],g=!0,b=void 0;p?g=!1:p={};for(b in f)"!"==b.charAt(0)&&(b=b.slice(1),m.push(b),p[b]=!0,g=!1);for(;b=m.pop();)f[b]=f["!"+b],delete f["!"+b];u[h]=(g?!1:p)||null}l.match=l.match||null,n.push(a),e.push(a)}for(var y,t=o.elements,o=o.generic,i=0,n=e.length;n>i;++i){r=k(e[i]),a=r.classes===!0||r.styles===!0||r.attributes===!0,l=r,d=h=c=void 0;for(c in A)l[c]=v(l[c]);u=!0;for(d in P){c=P[d],h=l[c],p=[],f=void 0;for(f in h)f.indexOf("*")>-1?p.push(RegExp("^"+f.replace(/\*/g,".*")+"$")):p.push(f);h=p,h.length&&(l[c]=h,u=!1)}if(l.nothingRequired=u,l.noProperties=!(l.attributes||l.classes||l.styles),r.elements===!0||null===r.elements)o[a?"unshift":"push"](r);else{l=r.elements,delete r.elements;for(y in l)t[y]?t[y][a?"unshift":"push"](r):t[y]=[r]}}}function t(e,t,n,o){if((!e.match||e.match(t))&&(o||a(e,t))&&(e.propertiesOnly||(n.valid=!0),n.allAttributes||(n.allAttributes=i(e.attributes,t.attributes,n.validAttributes)),n.allStyles||(n.allStyles=i(e.styles,t.styles,n.validStyles)),!n.allClasses)){if(e=e.classes,t=t.classes,o=n.validClasses,e)if(e===!0)e=!0;else{for(var r,s=0,l=t.length;l>s;++s)r=t[s],o[r]||(o[r]=e(r));e=!1}else e=!1;n.allClasses=e}}function i(e,t,i){if(!e)return!1;if(e===!0)return!0;for(var n in t)i[n]||(i[n]=e(n));return!1}function n(e,t,i){if(!e.match||e.match(t)){if(e.noProperties)return!1;if(i.hadInvalidAttribute=o(e.attributes,t.attributes)||i.hadInvalidAttribute,i.hadInvalidStyle=o(e.styles,t.styles)||i.hadInvalidStyle,e=e.classes,t=t.classes,e){for(var n=!1,r=e===!0,s=t.length;s--;)(r||e(t[s]))&&(t.splice(s,1),n=!0);e=n}else e=!1;i.hadInvalidClass=e||i.hadInvalidClass}}function o(e,t){if(!e)return!1;var i,n=!1,o=e===!0;for(i in t)(o||e(i))&&(delete t[i],n=!0);return n}function r(e,t,i){return e.disabled||e.customConfig&&!i||!t?!1:(e._.cachedChecks={},!0)}function s(e,t){if(!e)return!1;if(e===!0)return e;if("string"==typeof e)return e=O(e),"*"==e?!0:CKEDITOR.tools.convertArrayToObject(e.split(t));if(CKEDITOR.tools.isArray(e))return e.length?CKEDITOR.tools.convertArrayToObject(e):!1;var i,n={},o=0;for(i in e)n[i]=e[i],o++;return o?n:!1}function a(e,t){if(e.nothingRequired)return!0;var i,n,o,r;if(o=e.requiredClasses)for(r=t.classes,i=0;i<o.length;++i)if(n=o[i],"string"==typeof n){if(-1==CKEDITOR.tools.indexOf(r,n))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(r,n))return!1;return l(t.styles,e.requiredStyles)&&l(t.attributes,e.requiredAttributes)}function l(e,t){if(!t)return!0;for(var i,n=0;n<t.length;++n)if(i=t[n],"string"==typeof i){if(!(i in e))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(e,i))return!1;return!0}function c(e){if(!e)return{};for(var e=e.split(/\s*,\s*/).sort(),t={};e.length;)t[e.shift()]=R;return t}function d(e){for(var t,i,n,o,r={},s=1,e=O(e);t=e.match(M);)(i=t[2])?(n=u(i,"styles"),o=u(i,"attrs"),i=u(i,"classes")):n=o=i=null,r["$"+s++]={elements:t[1],classes:i,styles:n,attributes:o},e=e.slice(t[0].length);return r}function u(e,t){var i=e.match(N[t]);return i?O(i[1]):null}function h(e){var t=e.styleBackup=e.attributes.style,i=e.classBackup=e.attributes["class"];e.styles||(e.styles=CKEDITOR.tools.parseCssText(t||"",1)),e.classes||(e.classes=i?i.split(/\s+/):[])}function p(e,i,o,r){var s,a=0;if(r.toHtml&&(i.name=i.name.replace(L,"$1")),r.doCallbacks&&e.elementCallbacks){e:for(var l,c=e.elementCallbacks,d=0,u=c.length;u>d;++d)if(l=c[d](i)){s=l;break e}if(s)return s}if(r.doTransform&&(s=e._.transformations[i.name])){for(h(i),c=0;c<s.length;++c)_(e,i,s[c]);m(i)}if(r.doFilter){e:{c=i.name,d=e._,e=d.allowedRules.elements[c],s=d.allowedRules.generic,c=d.disallowedRules.elements[c],d=d.disallowedRules.generic,u=r.skipRequired,l={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1};var p,f;if(e||s){if(h(i),c)for(p=0,f=c.length;f>p;++p)if(n(c[p],i,l)===!1){e=null;break e}if(d)for(p=0,f=d.length;f>p;++p)n(d[p],i,l);if(e)for(p=0,f=e.length;f>p;++p)t(e[p],i,l,u);if(s)for(p=0,f=s.length;f>p;++p)t(s[p],i,l,u);e=l}else e=null}if(!e)return o.push(i),I;if(!e.valid)return o.push(i),I;f=e.validAttributes;var v=e.validStyles;s=e.validClasses;var b,y,c=i.attributes,w=i.styles,d=i.classes,u=i.classBackup,E=i.styleBackup,T=[];l=[];var C=/^data-cke-/;if(p=!1,delete c.style,delete c["class"],delete i.classBackup,delete i.styleBackup,!e.allAttributes)for(b in c)f[b]||(C.test(b)?b==(y=b.replace(/^data-cke-saved-/,""))||f[y]||(delete c[b],p=!0):(delete c[b],p=!0));if(!e.allStyles||e.hadInvalidStyle){for(b in w)e.allStyles||v[b]?T.push(b+":"+w[b]):p=!0;T.length&&(c.style=T.sort().join("; "))}else E&&(c.style=E);if(!e.allClasses||e.hadInvalidClass){for(b=0;b<d.length;++b)(e.allClasses||s[d[b]])&&l.push(d[b]);l.length&&(c["class"]=l.sort().join(" ")),u&&l.length<u.split(/\s+/).length&&(p=!0)}else u&&(c["class"]=u);if(p&&(a=I),!r.skipFinalValidation&&!g(i))return o.push(i),I}return r.toHtml&&(i.name=i.name.replace(B,"cke:$1")),a}function f(e){var t,i=[];for(t in e)t.indexOf("*")>-1&&i.push(t.replace(/\*/g,".*"));return i.length?RegExp("^(?:"+i.join("|")+")$"):null}function m(e){var t,i=e.attributes;delete i.style,delete i["class"],(t=CKEDITOR.tools.writeCssText(e.styles,!0))&&(i.style=t),e.classes.length&&(i["class"]=e.classes.sort().join(" "))}function g(e){switch(e.name){case"a":if(!e.children.length&&!e.attributes.name)return!1;break;case"img":if(!e.attributes.src)return!1}return!0}function v(e){if(!e)return!1;if(e===!0)return!0;var t=f(e);return function(i){return i in e||t&&i.match(t)}}function b(){return new CKEDITOR.htmlParser.element("br")}function y(e){return e.type==CKEDITOR.NODE_ELEMENT&&("br"==e.name||D.$block[e.name])}function w(e,t,i){var n=e.name;if(D.$empty[n]||!e.children.length)"hr"==n&&"br"==t?e.replaceWith(b()):(e.parent&&i.push({check:"it",el:e.parent}),e.remove());else if(D.$block[n]||"tr"==n)if("br"==t)e.previous&&!y(e.previous)&&(t=b(),t.insertBefore(e)),e.next&&!y(e.next)&&(t=b(),t.insertAfter(e)),e.replaceWithChildren();else{var o,n=e.children;e:{o=D[t];for(var r,s=0,a=n.length;a>s;++s)if(r=n[s],r.type==CKEDITOR.NODE_ELEMENT&&!o[r.name]){o=!1;break e}o=!0}if(o)e.name=t,e.attributes={},i.push({check:"parent-down",el:e});else{o=e.parent;for(var l,c,s=o.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==o.name,a=n.length;a>0;)r=n[--a],s&&(r.type==CKEDITOR.NODE_TEXT||r.type==CKEDITOR.NODE_ELEMENT&&D.$inline[r.name])?(l||(l=new CKEDITOR.htmlParser.element(t),l.insertAfter(e),i.push({check:"parent-down",el:l})),l.add(r,0)):(l=null,c=D[o.name]||D.span,r.insertAfter(e),o.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&r.type==CKEDITOR.NODE_ELEMENT&&!c[r.name]&&i.push({check:"el-up",el:r}));e.remove()}}else n in{style:1,script:1}?e.remove():(e.parent&&i.push({check:"it",el:e.parent}),e.replaceWithChildren())}function _(e,t,i){var n,o;for(n=0;n<i.length;++n)if(o=i[n],(!o.check||e.check(o.check,!1))&&(!o.left||o.left(t))){o.right(t,j);break}}function E(e,t){var i,n,o,r,s=t.getDefinition(),a=s.attributes,l=s.styles;if(e.name!=s.element)return!1;for(i in a)if("class"==i){for(s=a[i].split(/\s+/),o=e.classes.join("|");r=s.pop();)if(-1==o.indexOf(r))return!1}else if(e.attributes[i]!=a[i])return!1;for(n in l)if(e.styles[n]!=l[n])return!1;return!0}function T(e,t){var i,n;return"string"==typeof e?i=e:e instanceof CKEDITOR.style?n=e:(i=e[0],n=e[1]),[{element:i,left:n,right:function(e,i){i.transform(e,t)}}]}function C(e){return function(t){return E(t,e)}}function S(e){return function(t,i){i[e](t)}}var D=CKEDITOR.dtd,I=1,k=CKEDITOR.tools.copy,O=CKEDITOR.tools.trim,R="cke-test",x=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(e){if(this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}},CKEDITOR.filter.instances[this.id]=this,e instanceof CKEDITOR.editor){e=this.editor=e,this.customConfig=!0;var t=e.config.allowedContent;t===!0?this.disabled=!0:(t||(this.customConfig=!1),this.allow(t,"config",1),this.allow(e.config.extraAllowedContent,"extra",1),this.allow(x[e.enterMode]+" "+x[e.shiftEnterMode],"default",1),this.disallow(e.config.disallowedContent))}else this.customConfig=!1,this.allow(e,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(t,i,n){if(!r(this,t,n))return!1;var o,s;if("string"==typeof t)t=d(t);else if(t instanceof CKEDITOR.style){if(t.toAllowedContentRules)return this.allow(t.toAllowedContentRules(this.editor),i,n);o=t.getDefinition(),t={},n=o.attributes,t[o.element]=o={styles:o.styles,requiredStyles:o.styles&&CKEDITOR.tools.objectKeys(o.styles)},n&&(n=k(n),o.classes=n["class"]?n["class"].split(/\s+/):null,o.requiredClasses=o.classes,delete n["class"],o.attributes=n,o.requiredAttributes=n&&CKEDITOR.tools.objectKeys(n))}else if(CKEDITOR.tools.isArray(t)){for(o=0;o<t.length;++o)s=this.allow(t[o],i,n);return s}return e(this,t,i,this.allowedContent,this._.allowedRules),!0},applyTo:function(e,t,i,n){if(this.disabled)return!1;var o,r=this,s=[],a=this.editor&&this.editor.config.protectedSource,l=!1,c={doFilter:!i,doTransform:!0,doCallbacks:!0,toHtml:t};e.forEach(function(e){if(e.type==CKEDITOR.NODE_ELEMENT){if("off"==e.attributes["data-cke-filter"])return!1;if(!t||"span"!=e.name||!~CKEDITOR.tools.objectKeys(e.attributes).join("|").indexOf("data-cke-"))if(o=p(r,e,s,c),o&I)l=!0;else if(2&o)return!1}else if(e.type==CKEDITOR.NODE_COMMENT&&e.value.match(/^\{cke_protected\}(?!\{C\})/)){var i;e:{var n=decodeURIComponent(e.value.replace(/^\{cke_protected\}/,""));i=[];var d,u,h;if(a)for(u=0;u<a.length;++u)if((h=n.match(a[u]))&&h[0].length==n.length){i=!0;break e}n=CKEDITOR.htmlParser.fragment.fromHtml(n),1==n.children.length&&(d=n.children[0]).type==CKEDITOR.NODE_ELEMENT&&p(r,d,i,c),i=!i.length}i||s.push(e)}},null,!0),s.length&&(l=!0);for(var d,u,e=[],n=x[n||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];i=s.pop();)i.type==CKEDITOR.NODE_ELEMENT?w(i,n,e):i.remove();for(;d=e.pop();)if(i=d.el,i.parent)switch(u=D[i.parent.name]||D.span,d.check){case"it":D.$removeEmpty[i.name]&&!i.children.length?w(i,n,e):g(i)||w(i,n,e);break;case"el-up":i.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!u[i.name]&&w(i,n,e);break;case"parent-down":i.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!u[i.name]&&w(i.parent,n,e)}return l},checkFeature:function(e){return this.disabled||!e?!0:(e.toFeature&&(e=e.toFeature(this.editor)),!e.requiredContent||this.check(e.requiredContent))},disable:function(){this.disabled=!0},disallow:function(t){return r(this,t,!0)?("string"==typeof t&&(t=d(t)),e(this,t,null,this.disallowedContent,this._.disallowedRules),!0):!1},addContentForms:function(e){if(!this.disabled&&e){var t,i,n,o=[];for(t=0;t<e.length&&!n;++t)i=e[t],("string"==typeof i||i instanceof CKEDITOR.style)&&this.check(i)&&(n=i);if(n){for(t=0;t<e.length;++t)o.push(T(e[t],n));this.addTransformations(o)}}},addElementCallback:function(e){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(e)},addFeature:function(e){return this.disabled||!e?!0:(e.toFeature&&(e=e.toFeature(this.editor)),this.allow(e.allowedContent,e.name),this.addTransformations(e.contentTransformations),this.addContentForms(e.contentForms),e.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(e.requiredContent):!0)},addTransformations:function(e){var t,i;if(!this.disabled&&e){var n,o=this._.transformations;for(n=0;n<e.length;++n){t=e[n];var r=void 0,s=void 0,a=void 0,l=void 0,c=void 0,d=void 0;for(i=[],s=0;s<t.length;++s)a=t[s],"string"==typeof a?(a=a.split(/\s*:\s*/),l=a[0],c=null,d=a[1]):(l=a.check,c=a.left,d=a.right),r||(r=a,r=r.element?r.element:l?l.match(/^([a-z0-9]+)/i)[0]:r.left.getDefinition().element),c instanceof CKEDITOR.style&&(c=C(c)),i.push({check:l==r?null:l,left:c,right:"string"==typeof d?S(d):d});t=r,o[t]||(o[t]=[]),o[t].push(i)}}},check:function(e,t,i){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(e)){for(var n=e.length;n--;)if(this.check(e[n],t,i))return!0;return!1}var o,r;if("string"==typeof e){if(r=e+"<"+(t===!1?"0":"1")+(i?"1":"0")+">",r in this._.cachedChecks)return this._.cachedChecks[r];n=d(e).$1,o=n.styles;var s=n.classes;n.name=n.elements,n.classes=s=s?s.split(/\s*,\s*/):[],n.styles=c(o),n.attributes=c(n.attributes),n.children=[],s.length&&(n.attributes["class"]=s.join(" ")),o&&(n.attributes.style=CKEDITOR.tools.writeCssText(n.styles)),o=n}else n=e.getDefinition(),o=n.styles,s=n.attributes||{},o?(o=k(o),s.style=CKEDITOR.tools.writeCssText(o,!0)):o={},o={name:n.element,attributes:s,classes:s["class"]?s["class"].split(/\s+/):[],styles:o,children:[]};var a,s=CKEDITOR.tools.clone(o),l=[];if(t!==!1&&(a=this._.transformations[o.name])){for(n=0;n<a.length;++n)_(this,o,a[n]);m(o)}return p(this,s,l,{doFilter:!0,doTransform:t!==!1,skipRequired:!i,skipFinalValidation:!i}),t=l.length>0?!1:CKEDITOR.tools.objectCompare(o.attributes,s.attributes,!0)?!0:!1,"string"==typeof e&&(this._.cachedChecks[r]=t),t},getAllowedEnterMode:function(){var e=["p","div","br"],t={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(i,n){var o,r=e.slice();if(this.check(x[i]))return i;for(n||(r=r.reverse());o=r.pop();)if(this.check(o))return t[o];return CKEDITOR.ENTER_BR}}(),destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var A={styles:1,attributes:1,classes:1},P={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},M=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,N={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},L=/^cke:(object|embed|param)$/,B=/^(object|embed|param)$/,j=CKEDITOR.filter.transformationsTools={sizeToStyle:function(e){this.lengthToStyle(e,"width"),this.lengthToStyle(e,"height")},sizeToAttribute:function(e){this.lengthToAttribute(e,"width"),this.lengthToAttribute(e,"height")},lengthToStyle:function(e,t,i){if(i=i||t,!(i in e.styles)){var n=e.attributes[t];n&&(/^\d+$/.test(n)&&(n+="px"),e.styles[i]=n)}delete e.attributes[t]},lengthToAttribute:function(e,t,i){if(i=i||t,!(i in e.attributes)){var n=e.styles[t],o=n&&n.match(/^(\d+)(?:\.\d*)?px$/);o?e.attributes[i]=o[1]:n==R&&(e.attributes[i]=R)}delete e.styles[t]},alignmentToStyle:function(e){if(!("float"in e.styles)){var t=e.attributes.align;("left"==t||"right"==t)&&(e.styles["float"]=t)}delete e.attributes.align},alignmentToAttribute:function(e){if(!("align"in e.attributes)){var t=e.styles["float"];("left"==t||"right"==t)&&(e.attributes.align=t)}delete e.styles["float"]},matchesStyle:E,transform:function(e,t){if("string"==typeof t)e.name=t;else{var i,n,o,r,s=t.getDefinition(),a=s.styles,l=s.attributes;e.name=s.element;for(i in l)if("class"==i)for(s=e.classes.join("|"),o=l[i].split(/\s+/);r=o.pop();)-1==s.indexOf(r)&&e.classes.push(r);else e.attributes[i]=l[i];for(n in a)e.styles[n]=a[n]}}}}(),function(){CKEDITOR.focusManager=function(e){return e.focusManager?e.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:e},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(e){this._.timer&&clearTimeout(this._.timer),e&&(this.currentActive=e),this.hasFocus||this._.locked||((e=CKEDITOR.currentInstance)&&e.focusManager.blur(1),this.hasFocus=!0,(e=this._.editor.container)&&e.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(e){function t(){if(this.hasFocus){this.hasFocus=!1;var e=this._.editor.container;e&&e.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var i=CKEDITOR.focusManager._.blurDelay;e||!i?t.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,t.call(this)},i,this)}},add:function(e,t){var i=e.getCustomData("focusmanager");if(!i||i!=this){i&&i.remove(e);var i="focus",n="blur";t&&(CKEDITOR.env.ie?(i="focusin",n="focusout"):CKEDITOR.event.useCapture=1);var o={blur:function(){e.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(e)}};e.on(i,o.focus,this),e.on(n,o.blur,this),t&&(CKEDITOR.event.useCapture=0),e.setCustomData("focusmanager",this),e.setCustomData("focusmanager_handlers",o)}},remove:function(e){e.removeCustomData("focusmanager");var t=e.removeCustomData("focusmanager_handlers");e.removeListener("blur",t.blur),e.removeListener("focus",t.focus)}}}(),CKEDITOR.keystrokeHandler=function(e){return e.keystrokeHandler?e.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:e},this)},function(){var e,t=function(t){var t=t.data,i=t.getKeystroke(),n=this.keystrokes[i],o=this._.editor;return e=o.fire("key",{keyCode:i,domEvent:t})===!1,e||(n&&(e=o.execCommand(n,{from:"keystrokeHandler"})!==!1),e||(e=!!this.blockedKeystrokes[i])),e&&t.preventDefault(!0),!e},i=function(t){e&&(e=!1,t.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(e){e.on("keydown",t,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&e.on("keypress",i,this)}}}(),function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(e,t,i){e&&CKEDITOR.lang.languages[e]||(e=this.detect(t,e));var n=this,t=function(){n[e].dir=n.rtl[e]?"rtl":"ltr",i(e,n[e])};this[e]?t():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+e+".js"),t,this)},detect:function(e,t){var i=this.languages,t=t||navigator.userLanguage||navigator.language||e,n=t.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),o=n[1],n=n[2];return i[o+"-"+n]?o=o+"-"+n:i[o]||(o=null),CKEDITOR.lang.detect=o?function(){return o}:function(e){return e},o||e}}}(),CKEDITOR.scriptLoader=function(){var e={},t={};return{load:function(i,n,o,r){var s="string"==typeof i;s&&(i=[i]),o||(o=CKEDITOR);var a=i.length,l=[],c=[],d=function(e){n&&(s?n.call(o,e):n.call(o,l,c))};if(0===a)d(!0);else{var u=function(e,t){(t?l:c).push(e),--a<=0&&(r&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),d(t))},h=function(i,n){e[i]=1;var o=t[i];delete t[i];for(var r=0;r<o.length;r++)o[r](i,n)},p=function(i){if(e[i])u(i,!0);else{var o=t[i]||(t[i]=[]);if(o.push(u),!(o.length>1)){var r=new CKEDITOR.dom.element("script");r.setAttributes({type:"text/javascript",src:i}),n&&(CKEDITOR.env.ie&&CKEDITOR.env.version<11?r.$.onreadystatechange=function(){("loaded"==r.$.readyState||"complete"==r.$.readyState)&&(r.$.onreadystatechange=null,h(i,!0))}:(r.$.onload=function(){setTimeout(function(){h(i,!0)},0)},r.$.onerror=function(){h(i,!1)})),r.appendTo(CKEDITOR.document.getHead())}}};r&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var f=0;a>f;f++)p(i[f])}},queue:function(){function e(){var e;(e=t[0])&&this.load(e.scriptUrl,e.callback,CKEDITOR,0)}var t=[];return function(i,n){var o=this;t.push({scriptUrl:i,callback:function(){n&&n.apply(this,arguments),t.shift(),e.call(o)}}),1==t.length&&e.call(this)}}()}}(),CKEDITOR.resourceManager=function(e,t){this.basePath=e,this.fileName=t,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(e,t){if(this.registered[e])throw'[CKEDITOR.resourceManager.add] The resource name "'+e+'" is already registered.';var i=this.registered[e]=t||{};return i.name=e,i.path=this.getPath(e),CKEDITOR.fire(e+CKEDITOR.tools.capitalize(this.fileName)+"Ready",i),this.get(e)},get:function(e){return this.registered[e]||null},getPath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(t&&t.dir||this.basePath+e+"/")},getFilePath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(this.getPath(e)+(t?t.file:this.fileName+".js"))},addExternal:function(e,t,i){for(var e=e.split(","),n=0;n<e.length;n++){var o=e[n];i||(t=t.replace(/[^\/]+$/,function(e){return i=e,""})),this.externals[o]={dir:t,file:i||this.fileName+".js"}}},load:function(e,t,i){CKEDITOR.tools.isArray(e)||(e=e?[e]:[]);for(var n=this.loaded,o=this.registered,r=[],s={},a={},l=0;l<e.length;l++){var c=e[l];if(c)if(n[c]||o[c])a[c]=this.get(c);else{var d=this.getFilePath(c);r.push(d),d in s||(s[d]=[]),s[d].push(c)}}CKEDITOR.scriptLoader.load(r,function(e,o){if(o.length)throw'[CKEDITOR.resourceManager.load] Resource name "'+s[o[0]].join(",")+'" was not found at "'+o[0]+'".';for(var r=0;r<e.length;r++)for(var l=s[e[r]],c=0;c<l.length;c++){var d=l[c];a[d]=this.get(d),n[d]=1}t.call(i,a)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(e){var t={};return function(i,n,o){var r={},s=function(i){e.call(this,i,function(e){CKEDITOR.tools.extend(r,e);var i,a=[];for(i in e){var l=e[i],c=l&&l.requires;if(!t[i]){if(l.icons)for(var d=l.icons.split(","),u=d.length;u--;)CKEDITOR.skin.addIcon(d[u],l.path+"icons/"+(CKEDITOR.env.hidpi&&l.hidpi?"hidpi/":"")+d[u]+".png");t[i]=1}if(c)for(c.split&&(c=c.split(",")),l=0;l<c.length;l++)r[c[l]]||a.push(c[l])}if(a.length)s.call(this,a);else{for(i in r)l=r[i],l.onLoad&&!l.onLoad._called&&(l.onLoad()===!1&&delete r[i],l.onLoad._called=1);n&&n.call(o||window,r)}},this)};s.call(this,i)}}),CKEDITOR.plugins.setLang=function(e,t,i){var n=this.get(e),e=n.langEntries||(n.langEntries={}),n=n.lang||(n.lang=[]);n.split&&(n=n.split(",")),-1==CKEDITOR.tools.indexOf(n,t)&&n.push(t),e[t]=i},CKEDITOR.ui=function(e){return e.ui?e.ui:(this.items={},this.instances={},this.editor=e,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(e,t,i){i.name=e.toLowerCase();var n=this.items[e]={type:t,command:i.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(n,i)},get:function(e){return this.instances[e]},create:function(e){var t=this.items[e],i=t&&this._.handlers[t.type],n=t&&t.command&&this.editor.getCommand(t.command),i=i&&i.create.apply(this,t.args);return this.instances[e]=i,n&&n.uiItems.push(i),i&&!i.type&&(i.type=t.type),i},addHandler:function(e,t){this._.handlers[e]=t},space:function(e){return CKEDITOR.document.getById(this.spaceId(e))},spaceId:function(e){return this.editor.id+"_"+e}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function e(e,n,r){if(CKEDITOR.event.call(this),e=e&&CKEDITOR.tools.clone(e),void 0!==n){if(!(n instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!r)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&r==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!(r==CKEDITOR.ELEMENT_MODE_INLINE?n.is(CKEDITOR.dtd.$editable)||n.is("textarea"):r==CKEDITOR.ELEMENT_MODE_REPLACE?!n.is(CKEDITOR.dtd.$nonBodyContent):1))throw Error('The specified element mode is not supported on element: "'+n.getName()+'".');this.element=n,this.elementMode=r,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(n.getId()||n.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||t(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",i),this.on("selectionChange",function(e){o(this,e.data.path)}),this.on("activeFilterChange",function(){o(this,this.elementPath(),!0)}),this.on("mode",i),this.on("instanceReady",function(){this.config.startupFocus&&this.focus()}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){s(this,e)},0,this)}function t(){do var e="editor"+ ++h;while(CKEDITOR.instances[e]);return e}function i(){var e,t=this.commands;for(e in t)n(this,t[e])}function n(e,t){t[t.startDisabled?"disable":e.readOnly&&!t.readOnly?"disable":t.modes[e.mode]?"enable":"disable"]()}function o(e,t,i){if(t){var n,o,r=e.commands;for(o in r)n=r[o],(i||n.contextSensitive)&&n.refresh(e,t)}}function r(e){var t=e.config.customConfig;if(!t)return!1;var t=CKEDITOR.getUrl(t),i=p[t]||(p[t]={});return i.fn?(i.fn.call(e,e.config),(CKEDITOR.getUrl(e.config.customConfig)==t||!r(e))&&e.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(t,function(){i.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},r(e)}),!0}function s(e,t){e.on("customConfigLoaded",function(){if(t){if(t.on)for(var i in t.on)e.on(i,t.on[i]);CKEDITOR.tools.extend(e.config,t,!0),delete e.config.on}i=e.config,e.readOnly=!(!i.readOnly&&!(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.is("textarea")?e.element.hasAttribute("disabled"):e.element.isReadOnly():e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&e.element.hasAttribute("disabled"))),e.blockless=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(e.element.is("textarea")||CKEDITOR.dtd[e.element.getName()].p):!1,e.tabIndex=i.tabIndex||e.element&&e.element.getAttribute("tabindex")||0,e.activeEnterMode=e.enterMode=e.blockless?CKEDITOR.ENTER_BR:i.enterMode,e.activeShiftEnterMode=e.shiftEnterMode=e.blockless?CKEDITOR.ENTER_BR:i.shiftEnterMode,i.skin&&(CKEDITOR.skinName=i.skin),e.fireOnce("configLoaded"),e.dataProcessor=new CKEDITOR.htmlDataProcessor(e),
e.filter=e.activeFilter=new CKEDITOR.filter(e),a(e)}),t&&null!=t.customConfig&&(e.config.customConfig=t.customConfig),r(e)||e.fireOnce("customConfigLoaded")}function a(e){CKEDITOR.skin.loadPart("editor",function(){l(e)})}function l(e){CKEDITOR.lang.load(e.config.language,e.config.defaultLanguage,function(t,i){var n=e.config.title;e.langCode=t,e.lang=CKEDITOR.tools.prototypedCopy(i),e.title="string"==typeof n||n===!1?n:[e.lang.editor,e.name].join(", "),e.config.contentsLangDirection||(e.config.contentsLangDirection=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.getDirection(1):e.lang.dir),e.fire("langLoaded"),c(e)})}function c(e){e.getStylesSet(function(t){e.once("loaded",function(){e.fire("stylesSet",{styles:t})},null,null,1),d(e)})}function d(e){var t=e.config,i=t.plugins,n=t.extraPlugins,o=t.removePlugins;if(n)var r=RegExp("(?:^|,)(?:"+n.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),i=i.replace(r,""),i=i+(","+n);if(o)var s=RegExp("(?:^|,)(?:"+o.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),i=i.replace(s,"");CKEDITOR.env.air&&(i+=",adobeair"),CKEDITOR.plugins.load(i.split(","),function(i){var n=[],o=[],r=[];e.plugins=i;for(var a in i){var l,c=i[a],d=c.lang,u=null,h=c.requires;if(CKEDITOR.tools.isArray(h)&&(h=h.join(",")),h&&(l=h.match(s)))for(;h=l.pop();)CKEDITOR.tools.setTimeout(function(e,t){throw Error('Plugin "'+e.replace(",","")+'" cannot be removed from the plugins list, because it\'s required by "'+t+'" plugin.')},0,null,[h,a]);d&&!e.lang[a]&&(d.split&&(d=d.split(",")),CKEDITOR.tools.indexOf(d,e.langCode)>=0?u=e.langCode:(u=e.langCode.replace(/-.*/,""),u=u!=e.langCode&&CKEDITOR.tools.indexOf(d,u)>=0?u:CKEDITOR.tools.indexOf(d,"en")>=0?"en":d[0]),c.langEntries&&c.langEntries[u]?(e.lang[a]=c.langEntries[u],u=null):r.push(CKEDITOR.getUrl(c.path+"lang/"+u+".js"))),o.push(u),n.push(c)}CKEDITOR.scriptLoader.load(r,function(){for(var i=["beforeInit","init","afterInit"],r=0;r<i.length;r++)for(var s=0;s<n.length;s++){var a=n[s];0===r&&o[s]&&a.lang&&a.langEntries&&(e.lang[a.name]=a.langEntries[o[s]]),a[i[r]]&&a[i[r]](e)}for(e.fireOnce("pluginsLoaded"),t.keystrokes&&e.setKeystroke(e.config.keystrokes),s=0;s<e.config.blockedKeystrokes.length;s++)e.keystrokeHandler.blockedKeystrokes[e.config.blockedKeystrokes[s]]=1;e.status="loaded",e.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,e)})})}function u(){var e=this.element;if(e&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var t=this.getData();return this.config.htmlEncodeOutput&&(t=CKEDITOR.tools.htmlEncode(t)),e.is("textarea")?e.setValue(t):e.setHtml(t),!0}return!1}e.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=e;var h=0,p={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(e,t){t.name=e.toLowerCase();var i=new CKEDITOR.command(this,t);return this.mode&&n(this,i),this.commands[e]=i},_attachToForm:function(){function e(e){t.updateElement(),t._.required&&!i.getValue()&&t.fire("required")===!1&&e.data.preventDefault()}var t=this,i=t.element,n=new CKEDITOR.dom.element(i.$.form);i.is("textarea")&&n&&(n.on("submit",e),n.$.submit&&n.$.submit.call&&n.$.submit.apply&&(n.$.submit=CKEDITOR.tools.override(n.$.submit,function(t){return function(){e(),t.apply?t.apply(this):t()}})),t.on("destroy",function(){n.removeListener("submit",e)}))},destroy:function(e){this.fire("beforeDestroy"),!e&&u.call(this),this.editable(null),this.filter.destroy(),delete this.filter,delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(e){if(!e){if(e=this.getSelection(),!e)return null;e=e.getStartElement()}return e?new CKEDITOR.dom.elementPath(e,this.editable()):null},createRange:function(){var e=this.editable();return e?new CKEDITOR.dom.range(e):null},execCommand:function(e,t){var i=this.getCommand(e),n={name:e,commandData:t,command:i};return i&&i.state!=CKEDITOR.TRISTATE_DISABLED&&this.fire("beforeCommandExec",n)!==!1&&(n.returnValue=i.exec(n.commandData),!i.async&&this.fire("afterCommandExec",n)!==!1)?n.returnValue:!1},getCommand:function(e){return this.commands[e]},getData:function(e){!e&&this.fire("beforeGetData");var t=this._.data;return"string"!=typeof t&&(t=(t=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.is("textarea")?t.getValue():t.getHtml():""),t={dataValue:t},!e&&this.fire("getData",t),t.dataValue},getSnapshot:function(){var e=this.fire("getSnapshot");if("string"!=typeof e){var t=this.element;t&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e=t.is("textarea")?t.getValue():t.getHtml())}return e},loadSnapshot:function(e){this.fire("loadSnapshot",e)},setData:function(e,t,i){var n=!0,o=t;t&&"object"==typeof t&&(i=t.internal,o=t.callback,n=!t.noSnapshot),!i&&n&&this.fire("saveSnapshot"),(o||!i)&&this.once("dataReady",function(e){!i&&n&&this.fire("saveSnapshot"),o&&o.call(e.editor)}),e={dataValue:e},!i&&this.fire("setData",e),this._.data=e.dataValue,!i&&this.fire("afterSetData",e)},setReadOnly:function(e){e=null==e||e,this.readOnly!=e&&(this.readOnly=e,this.keystrokeHandler.blockedKeystrokes[8]=+e,this.editable().setReadOnly(e),this.fire("readOnly"))},insertHtml:function(e,t){this.fire("insertHtml",{dataValue:e,mode:t})},insertText:function(e){this.fire("insertText",e)},insertElement:function(e){this.fire("insertElement",e)},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return u.call(this)},setKeystroke:function(){for(var e,t,i=this.keystrokeHandler.keystrokes,n=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],o=n.length;o--;)e=n[o],t=0,CKEDITOR.tools.isArray(e)&&(t=e[1],e=e[0]),t?i[e]=t:delete i[e]},addFeature:function(e){return this.filter.addFeature(e)},setActiveFilter:function(e){e||(e=this.filter),this.activeFilter!==e&&(this.activeFilter=e,this.fire("activeFilterChange"),e===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(e.getAllowedEnterMode(this.enterMode),e.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(e,t){e=e?this.blockless?CKEDITOR.ENTER_BR:e:this.enterMode,t=t?this.blockless?CKEDITOR.ENTER_BR:t:this.shiftEnterMode,(this.activeEnterMode!=e||this.activeShiftEnterMode!=t)&&(this.activeEnterMode=e,this.activeShiftEnterMode=t,this.fire("activeEnterModeChange"))}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\>)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var e=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,t={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(i){for(var n,o,r,s=0;n=this._.htmlPartsRegex.exec(i);)if(o=n.index,o>s&&(s=i.substring(s,o),r?r.push(s):this.onText(s)),s=this._.htmlPartsRegex.lastIndex,!(o=n[1])||(o=o.toLowerCase(),r&&CKEDITOR.dtd.$cdata[o]&&(this.onCDATA(r.join("")),r=null),r))if(r)r.push(n[0]);else if(o=n[3]){if(o=o.toLowerCase(),!/="/.test(o)){var a,l={},c=n[4];if(n=!!n[5],c)for(;a=e.exec(c);){var d=a[1].toLowerCase();a=a[2]||a[3]||a[4]||"",l[d]=!a&&t[d]?d:CKEDITOR.tools.htmlDecodeAttr(a)}this.onTagOpen(o,l,n),!r&&CKEDITOR.dtd.$cdata[o]&&(r=[])}}else(o=n[2])&&this.onComment(o);else this.onTagClose(o);i.length>s&&this.onText(i.substring(s,i.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(e){this._.output.push("<",e)},openTagClose:function(e,t){t?this._.output.push(" />"):this._.output.push(">")},attribute:function(e,t){"string"==typeof t&&(t=CKEDITOR.tools.htmlEncodeAttr(t)),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){this._.output.push("</",e,">")},text:function(e){this._.output.push(e)},comment:function(e){this._.output.push("<!--",e,"-->")},write:function(e){this._.output.push(e)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(e){var t=this._.output.join("");return e&&this.reset(),t}}}),function(){CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var e=this.parent.children,t=CKEDITOR.tools.indexOf(e,this),i=this.previous,n=this.next;i&&(i.next=n),n&&(n.previous=i),e.splice(t,1),this.parent=null},replaceWith:function(e){var t=this.parent.children,i=CKEDITOR.tools.indexOf(t,this),n=e.previous=this.previous,o=e.next=this.next;n&&(n.next=e),o&&(o.previous=e),t[i]=e,e.parent=this.parent,this.parent=null},insertAfter:function(e){var t=e.parent.children,i=CKEDITOR.tools.indexOf(t,e),n=e.next;t.splice(i+1,0,this),this.next=e.next,this.previous=e,e.next=this,n&&(n.previous=this),this.parent=e.parent},insertBefore:function(e){var t=e.parent.children,i=CKEDITOR.tools.indexOf(t,e);t.splice(i,0,this),this.next=e,(this.previous=e.previous)&&(e.previous.next=this),e.previous=this,this.parent=e.parent},getAscendant:function(e){for(var t=("function"==typeof e?e:"string"==typeof e?function(t){return t.name==e}:function(t){return t.name in e}),i=this.parent;i&&i.type==CKEDITOR.NODE_ELEMENT;){if(t(i))return i;i=i.parent}return null},wrapWith:function(e){return this.replaceWith(e),e.add(this),e},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(e){return e||{}}}}(),CKEDITOR.htmlParser.comment=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(e,t){var i=this.value;return(i=e.onComment(t,i,this))?"string"!=typeof i?(this.replaceWith(i),!1):(this.value=i,!0):(this.remove(),!1)},writeHtml:function(e,t){t&&this.filter(t),e.comment(this.value)}}),function(){CKEDITOR.htmlParser.text=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(e,t){return(this.value=e.onText(t,this.value,this))?void 0:(this.remove(),!1)},writeHtml:function(e,t){t&&this.filter(t),e.text(this.value)}})}(),function(){CKEDITOR.htmlParser.cdata=function(e){this.value=e},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(e){e.write(this.value)}})}(),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function e(e){return e.attributes["data-cke-survive"]?!1:"a"==e.name&&e.attributes.href||CKEDITOR.dtd.$removeEmpty[e.name]}var t=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),i={ol:1,ul:1},n=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),o={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(r,s,a){function l(e){var t;if(g.length>0)for(var i=0;i<g.length;i++){var n=g[i],o=n.name,r=CKEDITOR.dtd[o],s=b.name&&CKEDITOR.dtd[b.name];s&&!s[o]||e&&r&&!r[e]&&CKEDITOR.dtd[e]?o==b.name&&(u(b,b.parent,1),i--):(t||(c(),t=1),n=n.clone(),n.parent=b,b=n,g.splice(i,1),i--)}}function c(){for(;v.length;)u(v.shift(),b)}function d(e){if(e._.isBlockLike&&"pre"!=e.name&&"textarea"!=e.name){var t,i=e.children.length,n=e.children[i-1];n&&n.type==CKEDITOR.NODE_TEXT&&((t=CKEDITOR.tools.rtrim(n.value))?n.value=t:e.children.length=i-1)}}function u(t,i,n){var i=i||b||m,o=b;void 0===t.previous&&(h(i,t)&&(b=i,f.onTagOpen(a,{}),t.returnPoint=i=b),d(t),(!e(t)||t.children.length)&&i.add(t),"pre"==t.name&&(w=!1),"textarea"==t.name&&(y=!1)),t.returnPoint?(b=t.returnPoint,delete t.returnPoint):b=n?i:o}function h(e,t){if((e==m||"body"==e.name)&&a&&(!e.name||CKEDITOR.dtd[e.name][a])){var i,n;return(i=t.attributes&&(n=t.attributes["data-cke-real-element-type"])?n:t.name)&&i in CKEDITOR.dtd.$inline&&!(i in CKEDITOR.dtd.head)&&!t.isOrphan||t.type==CKEDITOR.NODE_TEXT}}function p(e,t){return e in CKEDITOR.dtd.$listItem||e in CKEDITOR.dtd.$tableContent?e==t||"dt"==e&&"dd"==t||"dd"==e&&"dt"==t:!1}var f=new CKEDITOR.htmlParser,m=s instanceof CKEDITOR.htmlParser.element?s:"string"==typeof s?new CKEDITOR.htmlParser.element(s):new CKEDITOR.htmlParser.fragment,g=[],v=[],b=m,y="textarea"==m.name,w="pre"==m.name;f.onTagOpen=function(o,r,s,a){if(r=new CKEDITOR.htmlParser.element(o,r),r.isUnknown&&s&&(r.isEmpty=!0),r.isOptionalClose=a,e(r))g.push(r);else{if("pre"==o)w=!0;else{if("br"==o&&w)return void b.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==o&&(y=!0)}if("br"==o)v.push(r);else{for(;a=(s=b.name)?CKEDITOR.dtd[s]||(b._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):n,!(r.isUnknown||b.isUnknown||a[o]);)if(b.isOptionalClose)f.onTagClose(s);else if(o in i&&s in i)s=b.children,(s=s[s.length-1])&&"li"==s.name||u(s=new CKEDITOR.htmlParser.element("li"),b),!r.returnPoint&&(r.returnPoint=b),b=s;else if(o in CKEDITOR.dtd.$listItem&&!p(o,s))f.onTagOpen("li"==o?"ul":"dl",{},0,1);else if(s in t&&!p(o,s))!r.returnPoint&&(r.returnPoint=b),b=b.parent;else{if(s in CKEDITOR.dtd.$inline&&g.unshift(b),!b.parent){r.isOrphan=1;break}u(b,b.parent,1)}l(o),c(),r.parent=b,r.isEmpty?u(r):b=r}}},f.onTagClose=function(e){for(var t=g.length-1;t>=0;t--)if(e==g[t].name)return void g.splice(t,1);for(var i=[],n=[],o=b;o!=m&&o.name!=e;)o._.isBlockLike||n.unshift(o),i.push(o),o=o.returnPoint||o.parent;if(o!=m){for(t=0;t<i.length;t++){var r=i[t];u(r,r.parent)}b=o,o._.isBlockLike&&c(),u(o,o.parent),o==b&&(b=b.parent),g=g.concat(n)}"body"==e&&(a=!1)},f.onText=function(e){if(b._.hasInlineStarted&&!v.length||w||y||(e=CKEDITOR.tools.ltrim(e),0!==e.length)){var i=b.name,r=i?CKEDITOR.dtd[i]||(b._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):n;!y&&!r["#"]&&i in t?(f.onTagOpen(o[i]||""),f.onText(e)):(c(),l(),!w&&!y&&(e=e.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),e=new CKEDITOR.htmlParser.text(e),h(b,e)&&this.onTagOpen(a,{},0,1),b.add(e))}},f.onCDATA=function(e){b.add(new CKEDITOR.htmlParser.cdata(e))},f.onComment=function(e){c(),l(),b.add(new CKEDITOR.htmlParser.comment(e))},f.parse(r);for(c();b!=m;)u(b,b.parent,1);return d(m),m},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(e,t){isNaN(t)&&(t=this.children.length);var i=t>0?this.children[t-1]:null;if(i){if(e._.isBlockLike&&i.type==CKEDITOR.NODE_TEXT&&(i.value=CKEDITOR.tools.rtrim(i.value),0===i.value.length))return this.children.pop(),void this.add(e);i.next=e}e.previous=i,e.parent=this,this.children.splice(t,0,e),this._.hasInlineStarted||(this._.hasInlineStarted=e.type==CKEDITOR.NODE_TEXT||e.type==CKEDITOR.NODE_ELEMENT&&!e._.isBlockLike)},filter:function(e,t){t=this.getFilterContext(t),e.onRoot(t,this),this.filterChildren(e,!1,t)},filterChildren:function(e,t,i){if(this.childrenFilteredBy!=e.id)for(i=this.getFilterContext(i),t&&!this.parent&&e.onRoot(i,this),this.childrenFilteredBy=e.id,t=0;t<this.children.length;t++)this.children[t].filter(e,i)===!1&&t--},writeHtml:function(e,t){t&&this.filter(t),this.writeChildrenHtml(e)},writeChildrenHtml:function(e,t,i){var n=this.getFilterContext();for(i&&!this.parent&&t&&t.onRoot(n,this),t&&this.filterChildren(t,!1,n),t=0,i=this.children,n=i.length;n>t;t++)i[t].writeHtml(e)},forEach:function(e,t,i){if(!(i||t&&this.type!=t))var n=e(this);if(n!==!1)for(var i=this.children,o=0;o<i.length;o++)n=i[o],n.type==CKEDITOR.NODE_ELEMENT?n.forEach(e,t):(!t||n.type==t)&&e(n)},getFilterContext:function(e){return e||{}}}}(),function(){function e(){this.rules=[]}function t(t,i,n,o){var r,s;for(r in i)(s=t[r])||(s=t[r]=new e),s.add(i[r],n,o)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(t){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new e,this.attributeNameRules=new e,this.elementsRules={},this.attributesRules={},this.textRules=new e,this.commentRules=new e,this.rootRules=new e,t&&this.addRules(t,10)},proto:{addRules:function(e,i){var n;"number"==typeof i?n=i:i&&"priority"in i&&(n=i.priority),"number"!=typeof n&&(n=10),"object"!=typeof i&&(i={}),e.elementNames&&this.elementNameRules.addMany(e.elementNames,n,i),e.attributeNames&&this.attributeNameRules.addMany(e.attributeNames,n,i),e.elements&&t(this.elementsRules,e.elements,n,i),e.attributes&&t(this.attributesRules,e.attributes,n,i),e.text&&this.textRules.add(e.text,n,i),e.comment&&this.commentRules.add(e.comment,n,i),e.root&&this.rootRules.add(e.root,n,i)},applyTo:function(e){e.filter(this)},onElementName:function(e,t){return this.elementNameRules.execOnName(e,t)},onAttributeName:function(e,t){return this.attributeNameRules.execOnName(e,t)},onText:function(e,t,i){return this.textRules.exec(e,t,i)},onComment:function(e,t,i){return this.commentRules.exec(e,t,i)},onRoot:function(e,t){return this.rootRules.exec(e,t)},onElement:function(e,t){for(var i,n=[this.elementsRules["^"],this.elementsRules[t.name],this.elementsRules.$],o=0;3>o;o++)if(i=n[o]){if(i=i.exec(e,t,this),i===!1)return null;if(i&&i!=t)return this.onNode(e,i);if(t.parent&&!t.name)break}return t},onNode:function(e,t){var i=t.type;return i==CKEDITOR.NODE_ELEMENT?this.onElement(e,t):i==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(e,t.value)):i==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(e,t.value)):null},onAttribute:function(e,t,i,n){return(i=this.attributesRules[i])?i.exec(e,n,t,this):n}}}),CKEDITOR.htmlParser.filterRulesGroup=e,e.prototype={add:function(e,t,i){this.rules.splice(this.findIndex(t),0,{value:e,priority:t,options:i})},addMany:function(e,t,i){for(var n=[this.findIndex(t),0],o=0,r=e.length;r>o;o++)n.push({value:e[o],priority:t,options:i});this.rules.splice.apply(this.rules,n)},findIndex:function(e){for(var t=this.rules,i=t.length-1;i>=0&&e<t[i].priority;)i--;return i+1},exec:function(e,t){var i,n,o,r,s=t instanceof CKEDITOR.htmlParser.node||t instanceof CKEDITOR.htmlParser.fragment,a=Array.prototype.slice.call(arguments,1),l=this.rules,c=l.length;for(r=0;c>r;r++)if(s&&(i=t.type,n=t.name),o=l[r],!(e.nonEditable&&!o.options.applyToAll||e.nestedEditable&&o.options.excludeNestedEditable)){if(o=o.value.apply(null,a),o===!1||s&&o&&(o.name!=n||o.type!=i))return o;null!=o&&(a[0]=t=o)}return t},execOnName:function(e,t){for(var i,n=0,o=this.rules,r=o.length;t&&r>n;n++)i=o[n],!(e.nonEditable&&!i.options.applyToAll||e.nestedEditable&&i.options.excludeNestedEditable)&&(t=t.replace(i.value[0],i.value[1]));return t}}}(),function(){function e(e,t){function a(e){return e||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function l(e,t){return function(o){if(o.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var s,l,d=[],u=i(o);if(u)for(c(u,1)&&d.push(u);u;)r(u)&&(s=n(u))&&c(s)&&((l=n(s))&&!r(l)?d.push(s):(a(h).insertAfter(s),s.remove())),u=u.previous;for(u=0;u<d.length;u++)d[u].remove();(d=!e||("function"==typeof t?t(o):t)!==!1)&&((h||CKEDITOR.env.needsBrFiller||o.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(h||CKEDITOR.env.needsBrFiller||!(document.documentMode>7||o.name in CKEDITOR.dtd.tr||o.name in CKEDITOR.dtd.$listItem))?(d=i(o),d=!d||"form"==o.name&&"input"==d.name):d=!1),d&&o.add(a(e))}}}function c(e,t){if((!h||CKEDITOR.env.needsBrFiller)&&e.type==CKEDITOR.NODE_ELEMENT&&"br"==e.name&&!e.attributes["data-cke-eol"])return!0;var i;if(e.type==CKEDITOR.NODE_TEXT&&(i=e.value.match(g))){if(i.index&&(new CKEDITOR.htmlParser.text(e.value.substring(0,i.index)).insertBefore(e),e.value=i[0]),!CKEDITOR.env.needsBrFiller&&h&&(!t||e.parent.name in p))return!0;if(!h&&((i=e.previous)&&"br"==i.name||!i||r(i)))return!0}return!1}var d,u={elements:{}},h="html"==t,p=CKEDITOR.tools.extend({},w);for(d in p)"#"in b[d]||delete p[d];for(d in p)u.elements[d]=l(h,e.config.fillEmptyBlocks);return u.root=l(h,!1),u.elements.br=function(e){return function(t){if(t.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var i=t.attributes;if("data-cke-bogus"in i||"data-cke-eol"in i)delete i["data-cke-bogus"];else{for(i=t.next;i&&o(i);)i=i.next;var l=n(t);!i&&r(t.parent)?s(t.parent,a(e)):r(i)&&l&&!r(l)&&a(e).insertBefore(i)}}}}(h),u}function t(e,t){return e!=CKEDITOR.ENTER_BR&&t!==!1?e==CKEDITOR.ENTER_DIV?"div":"p":!1}function i(e){for(e=e.children[e.children.length-1];e&&o(e);)e=e.previous;return e}function n(e){for(e=e.previous;e&&o(e);)e=e.previous;return e}function o(e){return e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(e.value)||e.type==CKEDITOR.NODE_ELEMENT&&e.attributes["data-cke-bookmark"]}function r(e){return e&&(e.type==CKEDITOR.NODE_ELEMENT&&e.name in w||e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function s(e,t){var i=e.children[e.children.length-1];e.children.push(t),t.parent=e,i&&(i.next=t,t.previous=i)}function a(e){e=e.attributes,"false"!=e.contenteditable&&(e["data-cke-editable"]=e.contenteditable?"true":1),e.contenteditable="false"}function l(e){switch(e=e.attributes,e["data-cke-editable"]){case"true":e.contenteditable="true";break;case"1":delete e.contenteditable}}function c(e){return e.replace(S,function(e,t,i){return"<"+t+i.replace(D,function(e,t){return I.test(t)&&-1==i.indexOf("data-cke-saved-"+t)?" data-cke-saved-"+e+" data-cke-"+CKEDITOR.rnd+"-"+e:e})+">"})}function d(e,t){return e.replace(t,function(e,t,i){return 0===e.indexOf("<textarea")&&(e=t+p(i).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(e)+"</cke:encoded>"})}function u(e){return e.replace(R,function(e,t){return decodeURIComponent(t)})}function h(e){return e.replace(/<\!--(?!{cke_protected})[\s\S]+?--\>/g,function(e){return"<!--"+v+"{C}"+encodeURIComponent(e).replace(/--/g,"%2D%2D")+"-->"})}function p(e){return e.replace(/<\!--\{cke_protected\}\{C\}([\s\S]+?)--\>/g,function(e,t){return decodeURIComponent(t)})}function f(e,t){var i=t._.dataStore;return e.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g,function(e,t){return decodeURIComponent(t)}).replace(/\{cke_protected_(\d+)\}/g,function(e,t){return i&&i[t]||""})}function m(e,t){for(var i=[],n=t.config.protectedSource,o=t._.dataStore||(t._.dataStore={id:1}),r=/<\!--\{cke_temp(comment)?\}(\d*?)--\>/g,n=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(n),e=e.replace(/<\!--[\s\S]*?--\>/g,function(e){return"<!--{cke_tempcomment}"+(i.push(e)-1)+"-->"}),s=0;s<n.length;s++)e=e.replace(n[s],function(e){return e=e.replace(r,function(e,t,n){return i[n]}),/cke_temp(comment)?/.test(e)?e:"<!--{cke_temp}"+(i.push(e)-1)+"-->"});return e=e.replace(r,function(e,t,n){return"<!--"+v+(t?"{C}":"")+encodeURIComponent(i[n]).replace(/--/g,"%2D%2D")+"-->"}),e=e.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(e){return e.replace(/<\!--\{cke_protected\}([^>]*)--\>/g,function(e,t){return o[o.id]=decodeURIComponent(t),"{cke_protected_"+o.id++ +"}"})}),e=e.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(e,i,n,o){return"<"+i+n+">"+f(p(o),t)+"</"+i+">"})}CKEDITOR.htmlDataProcessor=function(i){var n,o,r=this;this.editor=i,this.dataFilter=n=new CKEDITOR.htmlParser.filter,this.htmlFilter=o=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,n.addRules(_),n.addRules(E,{applyToAll:!0}),n.addRules(e(i,"data"),{applyToAll:!0}),o.addRules(T),o.addRules(C,{applyToAll:!0}),o.addRules(e(i,"html"),{applyToAll:!0}),i.on("toHtml",function(e){var n,e=e.data,o=e.dataValue,o=m(o,i),o=d(o,O),o=c(o),o=d(o,k),o=o.replace(x,"$1cke:$2"),o=o.replace(P,"<cke:$1$2></cke:$1>"),o=o.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),o=o.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");n=e.context||i.editable().getName();var r;CKEDITOR.env.ie&&CKEDITOR.env.version<9&&"pre"==n&&(n="div",o="<pre>"+o+"</pre>",r=1),n=i.document.createElement(n),n.setHtml("a"+o),o=n.getHtml().substr(1),o=o.replace(RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),r&&(o=o.replace(/^<pre>|<\/pre>$/gi,"")),o=o.replace(A,"$1$2"),o=u(o),o=p(o),n=e.fixForBody===!1?!1:t(e.enterMode,i.config.autoParagraph),o=CKEDITOR.htmlParser.fragment.fromHtml(o,e.context,n),n&&(r=o,!r.children.length&&CKEDITOR.dtd[r.name][n]&&(n=new CKEDITOR.htmlParser.element(n),r.add(n))),e.dataValue=o},null,null,5),i.on("toHtml",function(e){e.data.filter.applyTo(e.data.dataValue,!0,e.data.dontFilter,e.data.enterMode)&&i.fire("dataFiltered")},null,null,6),i.on("toHtml",function(e){e.data.dataValue.filterChildren(r.dataFilter,!0)},null,null,10),i.on("toHtml",function(e){var e=e.data,t=e.dataValue,i=new CKEDITOR.htmlParser.basicWriter;t.writeChildrenHtml(i),t=i.getHtml(!0),e.dataValue=h(t)},null,null,15),i.on("toDataFormat",function(e){var n=e.data.dataValue;e.data.enterMode!=CKEDITOR.ENTER_BR&&(n=n.replace(/^<br *\/?>/i,"")),e.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(n,e.data.context,t(e.data.enterMode,i.config.autoParagraph))},null,null,5),i.on("toDataFormat",function(e){e.data.dataValue.filterChildren(r.htmlFilter,!0)},null,null,10),i.on("toDataFormat",function(e){e.data.filter.applyTo(e.data.dataValue,!1,!0)},null,null,11),i.on("toDataFormat",function(e){var t=e.data.dataValue,n=r.writer;n.reset(),t.writeChildrenHtml(n),t=n.getHtml(!0),t=p(t),t=f(t,i),e.data.dataValue=t},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(e,t,i,n){var o,r,s,a=this.editor;return t&&"object"==typeof t?(o=t.context,i=t.fixForBody,n=t.dontFilter,r=t.filter,s=t.enterMode):o=t,!o&&null!==o&&(o=a.editable().getName()),a.fire("toHtml",{dataValue:e,context:o,fixForBody:i,dontFilter:n,filter:r||a.filter,enterMode:s||a.enterMode}).dataValue},toDataFormat:function(e,t){var i,n,o;return t&&(i=t.context,n=t.filter,o=t.enterMode),!i&&null!==i&&(i=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:e,filter:n||this.editor.filter,context:i,enterMode:o||this.editor.enterMode}).dataValue}};var g=/(?:&nbsp;|\xa0)$/,v="{cke_protected}",b=CKEDITOR.dtd,y=["caption","colgroup","col","thead","tfoot","tbody"],w=CKEDITOR.tools.extend({},b.$blockLimit,b.$block),_={elements:{input:a,textarea:a}},E={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},T={elements:{embed:function(e){var t=e.parent;if(t&&"object"==t.name){var i=t.attributes.width,t=t.attributes.height;i&&(e.attributes.width=i),t&&(e.attributes.height=t)}},a:function(e){return e.children.length||e.attributes.name||e.attributes["data-cke-saved-name"]?void 0:!1}}},C={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(e){var t=e.attributes;if(t){if(t["data-cke-temp"])return!1;for(var i,n=["name","href","src"],o=0;o<n.length;o++)i="data-cke-saved-"+n[o],i in t&&delete t[n[o]]}return e},table:function(e){e.children.slice(0).sort(function(e,t){var i,n;return e.type==CKEDITOR.NODE_ELEMENT&&t.type==e.type&&(i=CKEDITOR.tools.indexOf(y,e.name),n=CKEDITOR.tools.indexOf(y,t.name)),i>-1&&n>-1&&i!=n||(i=e.parent?e.getIndex():-1,n=t.parent?t.getIndex():-1),i>n?1:-1})},param:function(e){return e.children=[],e.isEmpty=!0,e},span:function(e){"Apple-style-span"==e.attributes["class"]&&delete e.name},html:function(e){delete e.attributes.contenteditable,delete e.attributes["class"]},body:function(e){delete e.attributes.spellcheck,delete e.attributes.contenteditable},style:function(e){var t=e.children[0];t&&t.value&&(t.value=CKEDITOR.tools.trim(t.value)),e.attributes.type||(e.attributes.type="text/css")},title:function(e){var t=e.children[0];!t&&s(e,t=new CKEDITOR.htmlParser.text),t.value=e.attributes["data-cke-title"]||""},input:l,textarea:l},attributes:{"class":function(e){return CKEDITOR.tools.ltrim(e.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(C.attributes.style=function(e){return e.replace(/(^|;)([^\:]+)/g,function(e){return e.toLowerCase()})});var S=/<(a|area|img|input|source)\b([^>]*)>/gi,D=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,I=/^(href|src|name)$/i,k=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,O=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,R=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,x=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,A=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,P=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(e,t){this.name=e,this.attributes=t||{},this.children=[];var i=e||"",n=i.match(/^cke:(.*)/);n&&(i=n[1]),i=!!(CKEDITOR.dtd.$nonBodyContent[i]||CKEDITOR.dtd.$block[i]||CKEDITOR.dtd.$listItem[i]||CKEDITOR.dtd.$tableContent[i]||CKEDITOR.dtd.$nonEditable[i]||"br"==i),this.isEmpty=!!CKEDITOR.dtd.$empty[e],this.isUnknown=!CKEDITOR.dtd[e],this._={isBlockLike:i,hasInlineStarted:this.isEmpty||!i}},CKEDITOR.htmlParser.cssStyle=function(e){var t={};return((e instanceof CKEDITOR.htmlParser.element?e.attributes.style:e)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(e,i,n){"font-family"==i&&(n=n.replace(/["']/g,"")),t[i.toLowerCase()]=n}),{rules:t,populate:function(e){var t=this.toString();t&&(e instanceof CKEDITOR.dom.element?e.setAttribute("style",t):e instanceof CKEDITOR.htmlParser.element?e.attributes.style=t:e.style=t)},toString:function(){var e,i=[];for(e in t)t[e]&&i.push(e,":",t[e],";");return i.join("")}}},function(){function e(e){return function(t){return t.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof e?t.name==e:t.name in e)}}var t=function(e,t){return e=e[0],t=t[0],t>e?-1:e>t?1:0},i=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:i.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(e,t){var i,n,o=this,t=o.getFilterContext(t);if(t.off)return!0;for(o.parent||e.onRoot(t,o);;){if(i=o.name,!(n=e.onElementName(t,i)))return this.remove(),!1;if(o.name=n,!(o=e.onElement(t,o)))return this.remove(),!1;if(o!==this)return this.replaceWith(o),!1;if(o.name==i)break;if(o.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(o),!1;if(!o.name)return this.replaceWithChildren(),!1}i=o.attributes;var r,s;for(r in i){for(s=r,n=i[r];;){if(!(s=e.onAttributeName(t,r))){delete i[r];break}if(s==r)break;delete i[r],r=s}s&&((n=e.onAttribute(t,o,s,n))===!1?delete i[s]:i[s]=n)}return o.isEmpty||this.filterChildren(e,!1,t),!0},filterChildren:i.filterChildren,writeHtml:function(e,i){i&&this.filter(i);var n,o,r=this.name,s=[],a=this.attributes;e.openTag(r,a);for(n in a)s.push([n,a[n]]);for(e.sortAttributes&&s.sort(t),n=0,o=s.length;o>n;n++)a=s[n],e.attribute(a[0],a[1]);e.openTagClose(r,this.isEmpty),this.writeChildrenHtml(e),this.isEmpty||e.closeTag(r)},writeChildrenHtml:i.writeChildrenHtml,replaceWithChildren:function(){for(var e=this.children,t=e.length;t;)e[--t].insertAfter(this);this.remove()},forEach:i.forEach,getFirst:function(t){if(!t)return this.children.length?this.children[0]:null;"function"!=typeof t&&(t=e(t));for(var i=0,n=this.children.length;n>i;++i)if(t(this.children[i]))return this.children[i];return null},getHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(e),e.getHtml()},setHtml:function(e){for(var e=this.children=CKEDITOR.htmlParser.fragment.fromHtml(e).children,t=0,i=e.length;i>t;++t)e[t].parent=this},getOuterHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(e),e.getHtml()},split:function(e){for(var t=this.children.splice(e,this.children.length-e),i=this.clone(),n=0;n<t.length;++n)t[n].parent=i;return i.children=t,t[0]&&(t[0].previous=null),e>0&&(this.children[e-1].next=null),
this.parent.add(i,this.getIndex()+1),i},addClass:function(e){if(!this.hasClass(e)){var t=this.attributes["class"]||"";this.attributes["class"]=t+(t?" ":"")+e}},removeClass:function(e){var t=this.attributes["class"];t&&((t=CKEDITOR.tools.trim(t.replace(RegExp("(?:\\s+|^)"+e+"(?:\\s+|$)")," ")))?this.attributes["class"]=t:delete this.attributes["class"])},hasClass:function(e){var t=this.attributes["class"];return t?RegExp("(?:^|\\s)"+e+"(?=\\s|$)").test(t):!1},getFilterContext:function(e){var t=[];if(e||(e={off:!1,nonEditable:!1,nestedEditable:!1}),!e.off&&"off"==this.attributes["data-cke-processor"]&&t.push("off",!0),e.nonEditable||"false"!=this.attributes.contenteditable?e.nonEditable&&!e.nestedEditable&&"true"==this.attributes.contenteditable&&t.push("nestedEditable",!0):t.push("nonEditable",!0),t.length)for(var e=CKEDITOR.tools.copy(e),i=0;i<t.length;i+=2)e[t[i]]=t[i+1];return e}},!0)}(),function(){var e={},t=/{([^}]+)}/g,i=/([\\'])/g,n=/\n/g,o=/\r/g;CKEDITOR.template=function(r){if(e[r])this.output=e[r];else{var s=r.replace(i,"\\$1").replace(n,"\\n").replace(o,"\\r").replace(t,function(e,t){return"',data['"+t+"']==undefined?'{"+t+"}':data['"+t+"'],'"});this.output=e[r]=Function("data","buffer","return buffer?buffer.push('"+s+"'):['"+s+"'].join('');")}}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(e){CKEDITOR.instances[e.name]=e,e.on("focus",function(){CKEDITOR.currentInstance!=e&&(CKEDITOR.currentInstance=e,CKEDITOR.fire("currentInstance"))}),e.on("blur",function(){CKEDITOR.currentInstance==e&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}),CKEDITOR.fire("instance",null,e)},CKEDITOR.remove=function(e){delete CKEDITOR.instances[e.name]},function(){var e={};CKEDITOR.addTemplate=function(t,i){var n=e[t];return n?n:(n={name:t,source:i},CKEDITOR.fire("template",n),e[t]=new CKEDITOR.template(n.source))},CKEDITOR.getTemplate=function(t){return e[t]}}(),function(){var e=[];CKEDITOR.addCss=function(t){e.push(t)},CKEDITOR.getCss=function(){return e.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,function(){CKEDITOR.inline=function(e,t){if(!CKEDITOR.env.isCompatible)return null;if(e=CKEDITOR.dom.element.get(e),e.getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var i=new CKEDITOR.editor(t,e,CKEDITOR.ELEMENT_MODE_INLINE),n=e.is("textarea")?e:null;return n?(i.setData(n.getValue(),null,!0),e=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!i.readOnly+'" class="cke_textarea_inline">'+n.getValue()+"</div>",CKEDITOR.document),e.insertAfter(n),n.hide(),n.$.form&&i._attachToForm()):i.setData(e.getHtml(),null,!0),i.on("loaded",function(){i.fire("uiReady"),i.editable(e),i.container=e,i.setData(i.getData(1)),i.resetDirty(),i.fire("contentDom"),i.mode="wysiwyg",i.fire("mode"),i.status="ready",i.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,i)},null,null,1e4),i.on("destroy",function(){n&&(i.container.clearCustomData(),i.container.remove(),n.show()),i.element.clearCustomData(),delete i.element}),i},CKEDITOR.inlineAll=function(){var e,t,i;for(i in CKEDITOR.dtd.$editable)for(var n=CKEDITOR.document.getElementsByTag(i),o=0,r=n.count();r>o;o++)e=n.getItem(o),"true"==e.getAttribute("contenteditable")&&(t={element:e,config:{}},CKEDITOR.fire("inline",t)!==!1&&CKEDITOR.inline(e,t.config))},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})}(),CKEDITOR.replaceClass="ckeditor",function(){function e(e,n,o,r){if(!CKEDITOR.env.isCompatible)return null;if(e=CKEDITOR.dom.element.get(e),e.getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var s=new CKEDITOR.editor(n,e,r);return r==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.setStyle("visibility","hidden"),s._.required=e.hasAttribute("required"),e.removeAttribute("required")),o&&s.setData(o,null,!0),s.on("loaded",function(){i(s),r==CKEDITOR.ELEMENT_MODE_REPLACE&&s.config.autoUpdateElement&&e.$.form&&s._attachToForm(),s.setMode(s.config.startupMode,function(){s.resetDirty(),s.status="ready",s.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,s)})}),s.on("destroy",t),s}function t(){var e=this.container,t=this.element;e&&(e.clearCustomData(),e.remove()),t&&(t.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.show(),this._.required&&t.setAttribute("required","required")),delete this.element)}function i(e){var t=e.name,i=e.element,n=e.elementMode,o=e.fire("uiSpace",{space:"top",html:""}).html,r=e.fire("uiSpace",{space:"bottom",html:""}).html,s=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(e.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(e.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>'),t=CKEDITOR.dom.element.createFromHtml(s.output({id:e.id,name:t,langDir:e.lang.dir,langCode:e.langCode,voiceLabel:e.title,topHtml:o?'<span id="'+e.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+o+"</span>":"",contentId:e.ui.spaceId("contents"),bottomHtml:r?'<span id="'+e.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+r+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));n==CKEDITOR.ELEMENT_MODE_REPLACE?(i.hide(),t.insertAfter(i)):i.append(t),e.container=t,o&&e.ui.space("top").unselectable(),r&&e.ui.space("bottom").unselectable(),i=e.config.width,n=e.config.height,i&&t.setStyle("width",CKEDITOR.tools.cssLength(i)),n&&e.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(n)),t.disableContextMenu(),CKEDITOR.env.webkit&&t.on("focus",function(){e.focus()}),e.fireOnce("uiReady")}CKEDITOR.replace=function(t,i){return e(t,i,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(t,i,n){return e(t,i,n,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var e=document.getElementsByTagName("textarea"),t=0;t<e.length;t++){var i=null,n=e[t];if(n.name||n.id){if("string"==typeof arguments[0]){if(!RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(n.className))continue}else if("function"==typeof arguments[0]&&(i={},arguments[0](n,i)===!1))continue;this.replace(n,i)}}},CKEDITOR.editor.prototype.addMode=function(e,t){(this._.modes||(this._.modes={}))[e]=t},CKEDITOR.editor.prototype.setMode=function(e,t){var i=this,n=this._.modes;if(e!=i.mode&&n&&n[e]){if(i.fire("beforeSetMode",e),i.mode){var o,r=i.checkDirty(),n=i._.previousModeData,s=0;i.fire("beforeModeUnload"),i.editable(0),i._.previousMode=i.mode,i._.previousModeData=o=i.getData(1),"source"==i.mode&&n==o&&(i.fire("lockSnapshot",{forceUpdate:!0}),s=1),i.ui.space("contents").setHtml(""),i.mode=""}else i._.previousModeData=i.getData(1);this._.modes[e](function(){i.mode=e,void 0!==r&&!r&&i.resetDirty(),s?i.fire("unlockSnapshot"):"wysiwyg"==e&&i.fire("saveSnapshot"),setTimeout(function(){i.fire("mode"),t&&t.call(i)},0)})}},CKEDITOR.editor.prototype.resize=function(e,t,i,n){var o=this.container,r=this.ui.space("contents"),s=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement,n=n?this.container.getFirst(function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_inner")}):o;n.setSize("width",e,!0),s&&(s.style.width="1%"),r.setStyle("height",Math.max(t-(i?0:(n.$.offsetHeight||0)-(r.$.clientHeight||0)),0)+"px"),s&&(s.style.width="100%"),this.fire("resize")},CKEDITOR.editor.prototype.getResizable=function(e){return e?this.ui.space("contents"):this.container},CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function e(e){var i,o=e.editor,r=e.data.path,a=r.blockLimit,l=e.data.selection,c=l.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(l=t(l,r))&&(l.appendBogus(),i=CKEDITOR.env.ie),s(o,r.block,a)&&c.collapsed&&!c.getCommonAncestor().isReadOnly()&&(r=c.clone(),r.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),a=new CKEDITOR.dom.walker(r),a.guard=function(e){return!n(e)||e.type==CKEDITOR.NODE_COMMENT||e.isReadOnly()},(!a.checkForward()||r.checkStartOfBlock()&&r.checkEndOfBlock())&&(o=c.fixBlock(!0,o.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(o=o.getFirst(n))&&o.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(o.getText()).match(/^(?:&nbsp;|\xa0)$/)&&o.remove(),i=1,e.cancel())),i&&c.select()}function t(e,t){if(e.isFake)return 0;var i=t.block||t.blockLimit,o=i&&i.getLast(n);return!i||!i.isBlockBoundary()||o&&o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()||i.is("pre")||i.getBogus()?void 0:i}function i(e){var t=e.data.getTarget();t.is("input")&&(t=t.getAttribute("type"),("submit"==t||"reset"==t)&&e.data.preventDefault())}function n(e){return h(e)&&p(e)}function o(e,t){return function(i){var n=CKEDITOR.dom.element.get(i.data.$.toElement||i.data.$.fromElement||i.data.$.relatedTarget);(!n||!t.equals(n)&&!t.contains(n))&&e.call(this,i)}}function r(e){function t(e){return function(t,o){return o&&t.type==CKEDITOR.NODE_ELEMENT&&t.is(r)&&(i=t),o||!n(t)||e&&d(t)?void 0:!1}}var i,o=e.getRanges()[0],e=e.root,r={table:1,ul:1,ol:1,dl:1};if(o.startPath().contains(r)){var s=o.clone();if(s.collapse(1),s.setStartAt(e,CKEDITOR.POSITION_AFTER_START),e=new CKEDITOR.dom.walker(s),e.guard=t(),e.checkBackward(),i)return s=o.clone(),s.collapse(),s.setEndAt(i,CKEDITOR.POSITION_AFTER_END),e=new CKEDITOR.dom.walker(s),e.guard=t(!0),i=!1,e.checkForward(),i}return null}function s(e,t,i){return e.config.autoParagraph!==!1&&e.activeEnterMode!=CKEDITOR.ENTER_BR&&e.editable().equals(i)&&!t||t&&"true"==t.getAttribute("contenteditable")}function a(e){e.editor.focus(),e.editor.fire("saveSnapshot")}function l(e){var t=e.editor;t.getSelection().scrollIntoView(),setTimeout(function(){t.fire("saveSnapshot")},0)}function c(e,t,i){for(var n=e.getCommonAncestor(t),t=e=i?t:e;(e=e.getParent())&&!n.equals(e)&&1==e.getChildCount();)t=e;t.remove()}CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(e,t){this.base(t.$||t),this.editor=e,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var e;if(CKEDITOR.env.webkit&&!this.hasFocus&&(e=this.editor._.previousActive||this.getDocument().getActive(),this.contains(e)))return void e.focus();try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(t){if(!CKEDITOR.env.ie)throw t}CKEDITOR.env.safari&&!this.isInline()&&(e=CKEDITOR.document.getActive(),e.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(e,t){var i=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(e)&&(e="focus"==e?"focusin":"focusout",t=o(t,this),i[0]=e,i[1]=t),CKEDITOR.dom.element.prototype.on.apply(this,i)},attachListener:function(e){!this._.listeners&&(this._.listeners=[]);var t=Array.prototype.slice.call(arguments,1),t=e.on.apply(e,t);return this._.listeners.push(t),t},clearListeners:function(){var e=this._.listeners;try{for(;e.length;)e.pop().removeListener()}catch(t){}},restoreAttrs:function(){var e,t,i=this._.attrChanges;for(t in i)i.hasOwnProperty(t)&&(e=i[t],null!==e?this.setAttribute(t,e):this.removeAttribute(t))},attachClass:function(e){var t=this.getCustomData("classes");this.hasClass(e)||(!t&&(t=[]),t.push(e),this.setCustomData("classes",t),this.addClass(e))},changeAttr:function(e,t){var i=this.getAttribute(e);t!==i&&(!this._.attrChanges&&(this._.attrChanges={}),e in this._.attrChanges||(this._.attrChanges[e]=i),this.setAttribute(e,t))},insertHtml:function(e,t){a(this),f(this,t||"html",e)},insertText:function(e){a(this);var t=this.editor,i=t.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:t.activeEnterMode,t=i==CKEDITOR.ENTER_BR,n=CKEDITOR.tools,e=n.htmlEncode(e.replace(/\r\n/g,"\n")),e=e.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),i=i==CKEDITOR.ENTER_P?"p":"div";if(!t){var o=/\n{2}/g;if(o.test(e))var r="<"+i+">",s="</"+i+">",e=r+e.replace(o,function(){return s+r})+s}e=e.replace(/\n/g,"<br>"),t||(e=e.replace(RegExp("<br>(?=</"+i+">)"),function(e){return n.repeat(e,2)})),e=e.replace(/^ | $/g,"&nbsp;"),e=e.replace(/(>|\s) /g,function(e,t){return t+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;"),f(this,"text",e)},insertElement:function(e,t){t?this.insertElementIntoRange(e,t):this.insertElementIntoSelection(e)},insertElementIntoRange:function(e,t){var i=this.editor,n=i.config.enterMode,o=e.getName(),r=CKEDITOR.dtd.$block[o];if(t.checkReadOnly())return!1;t.deleteContents(1),t.startContainer.type==CKEDITOR.NODE_ELEMENT&&t.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&m(t);var s,a;if(r)for(;(s=t.getCommonAncestor(0,1))&&(a=CKEDITOR.dtd[s.getName()])&&(!a||!a[o]);)s.getName()in CKEDITOR.dtd.span?t.splitElement(s):t.checkStartOfBlock()&&t.checkEndOfBlock()?(t.setStartBefore(s),t.collapse(!0),s.remove()):t.splitBlock(n==CKEDITOR.ENTER_DIV?"div":"p",i.editable());return t.insertNode(e),!0},insertElementIntoSelection:function(e){a(this);var t=this.editor,i=t.activeEnterMode,t=t.getSelection(),o=t.getRanges()[0],r=e.getName(),r=CKEDITOR.dtd.$block[r];this.insertElementIntoRange(e,o)&&(o.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),r&&((r=e.getNext(function(e){return n(e)&&!d(e)}))&&r.type==CKEDITOR.NODE_ELEMENT&&r.is(CKEDITOR.dtd.$block)?r.getDtd()["#"]?o.moveToElementEditStart(r):o.moveToElementEditEnd(e):r||i==CKEDITOR.ENTER_BR||(r=o.fixBlock(!0,i==CKEDITOR.ENTER_DIV?"div":"p"),o.moveToElementEditStart(r)))),t.selectRanges([o]),l(this)},setData:function(e,t){t||(e=this.editor.dataProcessor.toHtml(e)),this.setHtml(e),this.fixInitialSelection(),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(e){var t=this.getHtml();return e||(t=this.editor.dataProcessor.toDataFormat(t)),t},setReadOnly:function(e){this.setAttribute("contenteditable",!e)},detach:function(){this.removeClass("cke_editable"),this.status="detached";var e=this.editor;this._.detach(),delete e.document,delete e.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function e(){var e,t=i.getDocument().$,n=t.getSelection();if(n.anchorNode&&n.anchorNode==i.$)e=!0;else if(CKEDITOR.env.webkit){var o=i.getDocument().getActive();o&&o.equals(i)&&!n.anchorNode&&(e=!0)}e&&(e=new CKEDITOR.dom.range(i),e.moveToElementEditStart(i),t=t.createRange(),t.setStart(e.startContainer.$,e.startOffset),t.collapse(!0),n.removeAllRanges(),n.addRange(t))}function t(){var e=i.getDocument().$,t=e.selection,n=i.getDocument().getActive();"None"==t.type&&n.equals(i)&&(t=new CKEDITOR.dom.range(i),e=e.body.createTextRange(),t.moveToElementEditStart(i),t=t.startContainer,t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),e.moveToElementText(t.$),e.collapse(!0),e.select())}var i=this;CKEDITOR.env.ie&&(CKEDITOR.env.version<9||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),t()):this.hasFocus?(this.focus(),e()):this.once("focus",function(){e()},null,null,-999)},setup:function(){var e=this.editor;if(this.attachListener(e,"beforeGetData",function(){var t=this.getData();this.is("textarea")||e.config.ignoreEmptyParagraph!==!1&&(t=t.replace(u,function(e,t){return t})),e.setData(t,null,1)},this),this.attachListener(e,"getSnapshot",function(e){e.data=this.getData(1)},this),this.attachListener(e,"afterSetData",function(){this.setData(e.getData(1))},this),this.attachListener(e,"loadSnapshot",function(e){this.setData(e.data,1)},this),this.attachListener(e,"beforeFocus",function(){var t=e.getSelection();(t=t&&t.getNative())&&"Control"==t.type||this.focus()},this),this.attachListener(e,"insertHtml",function(e){this.insertHtml(e.data.dataValue,e.data.mode)},this),this.attachListener(e,"insertElement",function(e){this.insertElement(e.data)},this),this.attachListener(e,"insertText",function(e){this.insertText(e.data)},this),this.setReadOnly(e.readOnly),this.attachClass("cke_editable"),this.attachClass(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"cke_editable_inline":e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE||e.elementMode==CKEDITOR.ELEMENT_MODE_APPENDTO?"cke_editable_themed":""),this.attachClass("cke_contents_"+e.config.contentsLangDirection),e.keystrokeHandler.blockedKeystrokes[8]=+e.readOnly,e.keystrokeHandler.attach(this),this.on("blur",function(){this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),e.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,e.once("contentDom",function(){e.focusManager.focus(this)},this)),this.isInline()&&this.changeAttr("tabindex",e.tabIndex),!this.is("textarea")){e.document=this.getDocument(),e.window=this.getWindow();var t=e.document;this.changeAttr("spellcheck",!e.config.disableNativeSpellChecker);var o=e.config.contentsLangDirection;this.getDirection(1)!=o&&this.changeAttr("dir",o);var s=CKEDITOR.getCss();s&&(o=t.getHead(),o.getCustomData("stylesheet")||(s=t.appendStyleText(s),s=new CKEDITOR.dom.element(s.ownerNode||s.owningElement),o.setCustomData("stylesheet",s),s.data("cke-temp",1))),o=t.getCustomData("stylesheet_ref")||0,t.setCustomData("stylesheet_ref",o+1),this.setCustomData("cke_includeReadonly",!e.config.disableReadonlyStyling),this.attachListener(this,"click",function(e){var e=e.data,t=new CKEDITOR.dom.elementPath(e.getTarget(),this).contains("a");t&&2!=e.$.button&&t.isReadOnly()&&e.preventDefault()});var a={8:1,46:1};this.attachListener(e,"key",function(t){if(e.readOnly)return!0;var i,n=t.data.domEvent.getKey();if(n in a){var o,s,l,c,t=e.getSelection(),d=t.getRanges()[0],u=d.startPath(),n=8==n;CKEDITOR.env.ie&&CKEDITOR.env.version<11&&(o=t.getSelectedElement())||(o=r(t))?(e.fire("saveSnapshot"),d.moveToPosition(o,CKEDITOR.POSITION_BEFORE_START),o.remove(),d.select(),e.fire("saveSnapshot"),i=1):d.collapsed&&((s=u.block)&&(c=s[n?"getPrevious":"getNext"](h))&&c.type==CKEDITOR.NODE_ELEMENT&&c.is("table")&&d[n?"checkStartOfBlock":"checkEndOfBlock"]()?(e.fire("saveSnapshot"),d[n?"checkEndOfBlock":"checkStartOfBlock"]()&&s.remove(),d["moveToElementEdit"+(n?"End":"Start")](c),d.select(),e.fire("saveSnapshot"),i=1):u.blockLimit&&u.blockLimit.is("td")&&(l=u.blockLimit.getAscendant("table"))&&d.checkBoundaryOfElement(l,n?CKEDITOR.START:CKEDITOR.END)&&(c=l[n?"getPrevious":"getNext"](h))?(e.fire("saveSnapshot"),d["moveToElementEdit"+(n?"End":"Start")](c),d.checkStartOfBlock()&&d.checkEndOfBlock()?c.remove():d.select(),e.fire("saveSnapshot"),i=1):(l=u.contains(["td","th","caption"]))&&d.checkBoundaryOfElement(l,n?CKEDITOR.START:CKEDITOR.END)&&(i=1))}return!i}),e.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(t){t.data.getKeystroke()in a&&!this.getFirst(n)&&(this.appendBogus(),t=e.createRange(),t.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),t.select())}),this.attachListener(this,"dblclick",function(t){return e.readOnly?!1:(t={element:t.data.getTarget()},void e.fire("doubleclick",t))}),CKEDITOR.env.ie&&this.attachListener(this,"click",i),CKEDITOR.env.ie||this.attachListener(this,"mousedown",function(t){var i=t.data.getTarget();i.is("img","hr","input","textarea","select")&&!i.isReadOnly()&&(e.getSelection().selectElement(i),i.is("input","textarea","select")&&t.data.preventDefault())}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(t){if(2==t.data.$.button&&(t=t.data.getTarget(),!t.getOuterHtml().replace(u,""))){var i=e.createRange();i.moveToElementEditStart(t),i.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(e){e.data.getTarget().is("input","select")&&e.data.preventDefault()}),this.attachListener(this,"mouseup",function(e){e.data.getTarget().is("input","textarea")&&e.data.preventDefault()})),CKEDITOR.env.webkit&&this.attachListener(e,"key",function(t){if(e.readOnly)return!0;if(t=t.data.domEvent.getKey(),t in a){var i=8==t,n=e.getSelection().getRanges()[0],t=n.startPath();if(n.collapsed){var o;e:{var r=t.block;if(r)if(n[i?"checkStartOfBlock":"checkEndOfBlock"]())if(n.moveToClosestEditablePosition(r,!i)&&n.collapsed){if(n.startContainer.type==CKEDITOR.NODE_ELEMENT){var s=n.startContainer.getChild(n.startOffset-(i?1:0));if(s&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("hr")){e.fire("saveSnapshot"),s.remove(),o=!0;break e}}if((n=n.startPath().block)&&(!n||!n.contains(r))){e.fire("saveSnapshot");var l;(l=(i?n:r).getBogus())&&l.remove(),o=e.getSelection(),l=o.createBookmarks(),(i?r:n).moveChildren(i?n:r,!1),t.lastElement.mergeSiblings(),c(r,n,!i),o.selectBookmarks(l),o=!0}}else o=!1;else o=!1;else o=!1}if(!o)return}else if(i=n,o=t.block,l=i.endPath().block,o&&l&&!o.equals(l)?(e.fire("saveSnapshot"),(r=o.getBogus())&&r.remove(),i.deleteContents(),l.getParent()&&(l.moveChildren(o,!1),t.lastElement.mergeSiblings(),c(o,l,!0)),i=e.getSelection().getRanges()[0],i.collapse(1),i.select(),t=!0):t=!1,!t)return;return e.getSelection().scrollIntoView(),e.fire("saveSnapshot"),!1}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs();var e;if(e=this.removeCustomData("classes"))for(;e.length;)this.removeClass(e.pop());if(!this.is("textarea")){e=this.getDocument();var t=e.getHead();if(t.getCustomData("stylesheet")){var i=e.getCustomData("stylesheet_ref");--i?e.setCustomData("stylesheet_ref",i):(e.removeCustomData("stylesheet_ref"),t.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(e){var t=this._.editable;return t&&e?0:(arguments.length&&(t=this._.editable=e?e instanceof CKEDITOR.editable?e:new CKEDITOR.editable(this,e):(t&&t.detach(),null)),t)};var d=CKEDITOR.dom.walker.bogus(),u=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,h=CKEDITOR.dom.walker.whitespaces(!0),p=CKEDITOR.dom.walker.bookmark(!1,!0);CKEDITOR.on("instanceLoaded",function(t){var i=t.editor;i.on("insertElement",function(e){e=e.data,e.type==CKEDITOR.NODE_ELEMENT&&(e.is("input")||e.is("textarea"))&&("false"!=e.getAttribute("contentEditable")&&e.data("cke-editable",e.hasAttribute("contenteditable")?"true":"1"),e.setAttribute("contentEditable",!1))}),i.on("selectionChange",function(t){if(!i.readOnly){var n=i.getSelection();n&&!n.isLocked&&(n=i.checkDirty(),i.fire("lockSnapshot"),e(t),i.fire("unlockSnapshot"),!n&&i.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(e){var t=e.editor;t.on("mode",function(){var e=t.editable();if(e&&e.isInline()){var i=t.title;e.changeAttr("role","textbox"),e.changeAttr("aria-label",i),i&&e.changeAttr("title",i);var n=t.fire("ariaEditorHelpLabel",{}).label;if(n&&(i=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var o=CKEDITOR.tools.getNextId(),n=CKEDITOR.dom.element.createFromHtml('<span id="'+o+'" class="cke_voice_label">'+n+"</span>");i.append(n),e.changeAttr("aria-describedby",o)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");var f=function(){function e(e){return e.type==CKEDITOR.NODE_ELEMENT}function t(i,n){var o,r,s,a,l=[],d=n.range.startContainer;o=n.range.startPath();for(var d=c[d.getName()],u=0,h=i.getChildren(),p=h.count(),f=-1,m=-1,g=0,v=o.contains(c.$list);p>u;++u)o=h.getItem(u),e(o)?(s=o.getName(),v&&s in CKEDITOR.dtd.$list?l=l.concat(t(o,n)):(a=!!d[s],"br"!=s||!o.data("cke-eol")||u&&u!=p-1||(g=(r=u?l[u-1].node:h.getItem(u+1))&&(!e(r)||!r.is("br")),r=r&&e(r)&&c.$block[r.getName()]),-1==f&&!a&&(f=u),a||(m=u),l.push({isElement:1,isLineBreak:g,isBlock:o.isBlockBoundary(),hasBlockSibling:r,node:o,name:s,allowed:a}),r=g=0)):l.push({isElement:0,node:o,allowed:1});return f>-1&&(l[f].firstNotAllowed=1),m>-1&&(l[m].lastNotAllowed=1),l}function i(t,n){var o,r=[],s=t.getChildren(),a=s.count(),l=0,d=c[n],u=!t.is(c.$inline)||t.is("br");for(u&&r.push(" ");a>l;l++)o=s.getItem(l),e(o)&&!o.is(d)?r=r.concat(i(o,n)):r.push(o);return u&&r.push(" "),r}function o(t){return t&&e(t)&&(t.is(c.$removeEmpty)||t.is("a")&&!t.isBlockBoundary())}function r(t,i,n,o){var s,a,l=t.clone();l.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),(s=new CKEDITOR.dom.walker(l).next())&&e(s)&&d[s.getName()]&&(a=s.getPrevious())&&e(a)&&!a.getParent().equals(t.startContainer)&&n.contains(a)&&o.contains(s)&&s.isIdentical(a)&&(s.moveChildren(a),s.remove(),r(t,i,n,o))}function a(t,i){function n(t,i){return i.isBlock&&i.isElement&&!i.node.is("br")&&e(t)&&t.is("br")?(t.remove(),1):void 0}var o=i.endContainer.getChild(i.endOffset),r=i.endContainer.getChild(i.endOffset-1);o&&n(o,t[t.length-1]),r&&n(r,t[0])&&(i.setEnd(i.endContainer,i.endOffset-1),i.collapse())}var c=CKEDITOR.dtd,d={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},u={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},h=CKEDITOR.tools.extend({},c.$inline);return delete h.br,function(d,p,f){var m=d.editor,g=m.getSelection().getRanges()[0],v=!1;if("unfiltered_html"==p&&(p="html",v=!0),!g.checkReadOnly()){var b,y,w,_,E=new CKEDITOR.dom.elementPath(g.startContainer,g.root).blockLimit||g.root,p={type:p,dontFilter:v,editable:d,editor:m,range:g,blockLimit:E,mergeCandidates:[],zombies:[]},m=p.range,v=p.mergeCandidates;if("text"==p.type&&m.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(b=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",m.document),m.insertNode(b),m.setStartAfter(b)),y=new CKEDITOR.dom.elementPath(m.startContainer),p.endPath=w=new CKEDITOR.dom.elementPath(m.endContainer),!m.collapsed){var E=w.block||w.blockLimit,T=m.getCommonAncestor();E&&!E.equals(T)&&!E.contains(T)&&m.checkEndOfBlock()&&p.zombies.push(E),m.deleteContents()}for(;(_=e(m.startContainer)&&m.startContainer.getChild(m.startOffset-1))&&e(_)&&_.isBlockBoundary()&&y.contains(_);)m.moveToPosition(_,CKEDITOR.POSITION_BEFORE_END);for(r(m,p.blockLimit,y,w),b&&(m.setEndBefore(b),m.collapse(),b.remove()),b=m.startPath(),(E=b.contains(o,!1,1))&&(m.splitElement(E),p.inlineStylesRoot=E,p.inlineStylesPeak=b.lastElement),b=m.createBookmark(),(E=b.startNode.getPrevious(n))&&e(E)&&o(E)&&v.push(E),(E=b.startNode.getNext(n))&&e(E)&&o(E)&&v.push(E),E=b.startNode;(E=E.getParent())&&o(E);)v.push(E);if(m.moveToBookmark(b),b=f){if(b=p.range,"text"==p.type&&p.inlineStylesRoot){for(_=p.inlineStylesPeak,m=_.getDocument().createText("{cke-peak}"),v=p.inlineStylesRoot.getParent();!_.equals(v);)m=m.appendTo(_.clone()),_=_.getParent();f=m.getOuterHtml().split("{cke-peak}").join(f)}if(_=p.blockLimit.getName(),/^\s+|\s+$/.test(f)&&"span"in CKEDITOR.dtd[_])var C='<span data-cke-marker="1">&nbsp;</span>',f=C+f+C;if(f=p.editor.dataProcessor.toHtml(f,{context:null,fixForBody:!1,dontFilter:p.dontFilter,filter:p.editor.activeFilter,enterMode:p.editor.activeEnterMode}),_=b.document.createElement("body"),_.setHtml(f),C&&(_.getFirst().remove(),_.getLast().remove()),(C=b.startPath().block)&&(1!=C.getChildCount()||!C.getBogus()))e:{var S;if(1==_.getChildCount()&&e(S=_.getFirst())&&S.is(u)){for(C=S.getElementsByTag("*"),b=0,v=C.count();v>b;b++)if(m=C.getItem(b),!m.is(h))break e;S.moveChildren(S.getParent(1)),S.remove()}}p.dataWrapper=_,b=f}if(b){S=p.range;var D,C=S.document,f=p.blockLimit;b=0;var I;_=[];var k,O,R,x,v=m=0;y=S.startContainer;var A,E=p.endPath.elements[0];for(w=E.getPosition(y),T=!(!E.getCommonAncestor(y)||w==CKEDITOR.POSITION_IDENTICAL||w&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),y=t(p.dataWrapper,p),a(y,S);b<y.length;b++){if(w=y[b],D=w.isLineBreak){D=S,R=f;var P=void 0,M=void 0;w.hasBlockSibling?D=1:(P=D.startContainer.getAscendant(c.$block,1),P&&P.is({div:1,p:1})?(M=P.getPosition(R),M==CKEDITOR.POSITION_IDENTICAL||M==CKEDITOR.POSITION_CONTAINS?D=0:(R=D.splitElement(P),D.moveToPosition(R,CKEDITOR.POSITION_AFTER_START),D=1)):D=0)}if(D)v=b>0;else{if(D=S.startPath(),!w.isBlock&&s(p.editor,D.block,D.blockLimit)&&(O=p.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&p.editor.config.autoParagraph!==!1?p.editor.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1)&&(O=C.createElement(O),O.appendBogus(),S.insertNode(O),CKEDITOR.env.needsBrFiller&&(I=O.getBogus())&&I.remove(),S.moveToPosition(O,CKEDITOR.POSITION_BEFORE_END)),(D=S.startPath().block)&&!D.equals(k)&&((I=D.getBogus())&&(I.remove(),_.push(D)),k=D),w.firstNotAllowed&&(m=1),m&&w.isElement){for(D=S.startContainer,R=null;D&&!c[D.getName()][w.name];){if(D.equals(f)){D=null;break}R=D,D=D.getParent()}if(D)R&&(x=S.splitElement(R),p.zombies.push(x),p.zombies.push(R));else{R=f.getName(),A=!b,D=b==y.length-1,R=i(w.node,R);for(var P=[],M=R.length,N=0,L=void 0,B=0,j=-1;M>N;N++)L=R[N]," "==L?(B||A&&!N||(P.push(new CKEDITOR.dom.text(" ")),j=P.length),B=1):(P.push(L),B=0);D&&j==P.length&&P.pop(),A=P}}if(A){for(;D=A.pop();)S.insertNode(D);A=0}else S.insertNode(w.node);w.lastNotAllowed&&b<y.length-1&&((x=T?E:x)&&S.setEndAt(x,CKEDITOR.POSITION_AFTER_START),m=0),S.collapse()}}p.dontMoveCaret=v,p.bogusNeededBlocks=_}I=p.range;var K;for(x=p.bogusNeededBlocks,A=I.createBookmark();k=p.zombies.pop();)k.getParent()&&(O=I.clone(),O.moveToElementEditStart(k),O.removeEmptyBlocksAtEnd());if(x)for(;k=x.pop();)CKEDITOR.env.needsBrFiller?k.appendBogus():k.append(I.document.createText(" "));for(;k=p.mergeCandidates.pop();)k.mergeSiblings();if(I.moveToBookmark(A),!p.dontMoveCaret){for(k=e(I.startContainer)&&I.startContainer.getChild(I.startOffset-1);k&&e(k)&&!k.is(c.$empty);){if(k.isBlockBoundary())I.moveToPosition(k,CKEDITOR.POSITION_BEFORE_END);else{if(o(k)&&k.getHtml().match(/(\s|&nbsp;)$/g)){K=null;break}K=I.clone(),K.moveToPosition(k,CKEDITOR.POSITION_BEFORE_END)}k=k.getLast(n)}K&&I.moveToRange(K)}g.select(),l(d)}}}(),m=function(){function e(e){return e=new CKEDITOR.dom.walker(e),e.guard=function(e,t){return t?!1:e.type==CKEDITOR.NODE_ELEMENT?e.is(CKEDITOR.dtd.$tableContent):void 0},e.evaluator=function(e){return e.type==CKEDITOR.NODE_ELEMENT},e}function t(e,t,i){return t=e.getDocument().createElement(t),e.append(t,i),t}function i(e){var t,i=e.count();for(i;i-- >0;)t=e.getItem(i),CKEDITOR.tools.trim(t.getHtml())||(t.appendBogus(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&t.getChildCount()&&t.getFirst().remove())}return function(n){var o=n.startContainer,r=o.getAscendant("table",1),s=!1;i(r.getElementsByTag("td")),i(r.getElementsByTag("th")),r=n.clone(),r.setStart(o,0),r=e(r).lastBackward(),r||(r=n.clone(),r.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),r=e(r).lastForward(),s=!0),r||(r=o),r.is("table")?(n.setStartAt(r,CKEDITOR.POSITION_BEFORE_START),n.collapse(!0),r.remove()):(r.is({tbody:1,thead:1,tfoot:1})&&(r=t(r,"tr",s)),r.is("tr")&&(r=t(r,r.getParent().is("thead")?"th":"td",s)),(o=r.getBogus())&&o.remove(),n.moveToPosition(r,s?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}()}(),function(){function e(){var e,t=this._.fakeSelection;t&&(e=this.getSelection(1),e&&e.isHidden()||(t.reset(),t=0)),(t||(t=e||this.getSelection(1),t&&t.getType()!=CKEDITOR.SELECTION_NONE))&&(this.fire("selectionCheck",t),e=this.elementPath(),e.compare(this._.selectionPreviousPath)||(CKEDITOR.env.webkit&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=e,this.fire("selectionChange",{selection:t,path:e})))}function t(){f=!0,p||(i.call(this),p=CKEDITOR.tools.setTimeout(i,200,this))}function i(){p=null,f&&(CKEDITOR.tools.setTimeout(e,0,this),f=!1)}function n(e){return m(e)||e.type==CKEDITOR.NODE_ELEMENT&&!e.is(CKEDITOR.dtd.$empty)?!0:!1}function o(e){function t(t,i){return t&&t.type!=CKEDITOR.NODE_TEXT?e.clone()["moveToElementEdit"+(i?"End":"Start")](t):!1}if(!(e.root instanceof CKEDITOR.editable))return!1;var i=e.startContainer,o=e.getPreviousNode(n,null,i),r=e.getNextNode(n,null,i);
return!t(o)&&!t(r,1)&&(o||r||i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary()&&i.getBogus())?!1:!0}function r(e){return e.getCustomData("cke-fillingChar")}function s(e,t){var i=e&&e.removeCustomData("cke-fillingChar");if(i){if(t!==!1){var n,o=e.getDocument().getSelection().getNative(),r=o&&"None"!=o.type&&o.getRangeAt(0);i.getLength()>1&&r&&r.intersectsNode(i.$)&&(n=l(o),r=o.focusNode==i.$&&o.focusOffset>0,o.anchorNode==i.$&&o.anchorOffset>0&&n[0].offset--,r&&n[1].offset--)}i.setText(a(i.getText())),n&&c(e.getDocument().$,n)}}function a(e){return e.replace(/\u200B( )?/g,function(e){return e[1]?" ":""})}function l(e){return[{node:e.anchorNode,offset:e.anchorOffset},{node:e.focusNode,offset:e.focusOffset}]}function c(e,t){var i=e.getSelection(),n=e.createRange();n.setStart(t[0].node,t[0].offset),n.collapse(!0),i.removeAllRanges(),i.addRange(n),i.extend(t[1].node,t[1].offset)}function d(e){var t=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+'">&nbsp;</div>',e.document);e.fire("lockSnapshot"),e.editable().append(t);var i=e.getSelection(1),n=e.createRange(),o=i.root.on("selectionchange",function(e){e.cancel()},null,null,0);n.setStartAt(t,CKEDITOR.POSITION_AFTER_START),n.setEndAt(t,CKEDITOR.POSITION_BEFORE_END),i.selectRanges([n]),o.removeListener(),e.fire("unlockSnapshot"),e._.hiddenSelectionContainer=t}function u(e){var t={37:1,39:1,8:1,46:1};return function(i){var n=i.data.getKeystroke();if(t[n]){var o=e.getSelection().getRanges(),r=o[0];1==o.length&&r.collapsed&&(n=r[38>n?"getPreviousEditableNode":"getNextEditableNode"]())&&n.type==CKEDITOR.NODE_ELEMENT&&"false"==n.getAttribute("contenteditable")&&(e.getSelection().fake(n),i.data.preventDefault(),i.cancel())}}}function h(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.getCommonAncestor().isReadOnly()&&e.splice(t,1),!i.collapsed){if(i.startContainer.isReadOnly())for(var n,o=i.startContainer;o&&!((n=o.type==CKEDITOR.NODE_ELEMENT)&&o.is("body")||!o.isReadOnly());)n&&"false"==o.getAttribute("contentEditable")&&i.setStartAfter(o),o=o.getParent();o=i.startContainer,n=i.endContainer;var r=i.startOffset,s=i.endOffset,a=i.clone();o&&o.type==CKEDITOR.NODE_TEXT&&(r>=o.getLength()?a.setStartAfter(o):a.setStartBefore(o)),n&&n.type==CKEDITOR.NODE_TEXT&&(s?a.setEndAfter(n):a.setEndBefore(n)),o=new CKEDITOR.dom.walker(a),o.evaluator=function(n){if(n.type==CKEDITOR.NODE_ELEMENT&&n.isReadOnly()){var o=i.clone();return i.setEndBefore(n),i.collapsed&&e.splice(t--,1),n.getPosition(a.endContainer)&CKEDITOR.POSITION_CONTAINS||(o.setStartAfter(n),o.collapsed||e.splice(t+1,0,o)),!0}return!1},o.next()}}return e}var p,f,m=CKEDITOR.dom.walker.invisible(1),g=function(){function e(e){return function(t){var i=t.editor.createRange();return i.moveToClosestEditablePosition(t.selected,e)&&t.editor.getSelection().selectRanges([i]),!1}}function t(e){return function(t){var i,n=t.editor,o=n.createRange();return(i=o.moveToClosestEditablePosition(t.selected,e))||(i=o.moveToClosestEditablePosition(t.selected,!e)),i&&n.getSelection().selectRanges([o]),n.fire("saveSnapshot"),t.selected.remove(),i||(o.moveToElementEditablePosition(n.editable()),n.getSelection().selectRanges([o])),n.fire("saveSnapshot"),!1}}var i=e(),n=e(1);return{37:i,38:i,39:n,40:n,8:t(),46:t(1)}}();CKEDITOR.on("instanceCreated",function(i){function n(){var e=o.getSelection();e&&e.removeAllRanges()}var o=i.editor;o.on("contentDom",function(){function i(){a=new CKEDITOR.dom.selection(o.getSelection()),a.lock()}function n(){c.removeListener("mouseup",n),p.removeListener("mouseup",n);var e=CKEDITOR.document.$.selection,t=e.createRange();"None"!=e.type&&t.parentElement().ownerDocument==l.$&&t.select()}var r,a,l=o.document,c=CKEDITOR.document,d=o.editable(),h=l.getBody(),p=l.getDocumentElement(),f=d.isInline();if(CKEDITOR.env.gecko&&d.attachListener(d,"focus",function(e){e.removeListener(),0!==r&&(e=o.getSelection().getNative())&&e.isCollapsed&&e.anchorNode==d.$&&(e=o.createRange(),e.moveToElementEditStart(d),e.select())},null,null,-2),d.attachListener(d,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){r&&CKEDITOR.env.webkit&&(r=o._.previousActive&&o._.previousActive.equals(l.getActive())),o.unlockSelection(r),r=0},null,null,-1),d.attachListener(d,"mousedown",function(){r=0}),(CKEDITOR.env.ie||f)&&(v?d.attachListener(d,"beforedeactivate",i,null,null,-1):d.attachListener(o,"selectionCheck",i,null,null,-1),d.attachListener(d,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){o.lockSelection(a),r=1},null,null,-1),d.attachListener(d,"mousedown",function(){r=0})),CKEDITOR.env.ie&&!f){var m;d.attachListener(d,"mousedown",function(e){2==e.data.$.button&&(e=o.document.getSelection(),e&&e.getType()!=CKEDITOR.SELECTION_NONE||(m=o.window.getScrollPosition()))}),d.attachListener(d,"mouseup",function(e){2==e.data.$.button&&m&&(o.document.$.documentElement.scrollLeft=m.x,o.document.$.documentElement.scrollTop=m.y),m=null}),"BackCompat"!=l.$.compatMode&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&p.on("mousedown",function(e){function t(e){if(e=e.data.$,n){var t=h.$.createTextRange();try{t.moveToPoint(e.clientX,e.clientY)}catch(i){}n.setEndPoint(r.compareEndPoints("StartToStart",t)<0?"EndToEnd":"StartToStart",t),n.select()}}function i(){p.removeListener("mousemove",t),c.removeListener("mouseup",i),p.removeListener("mouseup",i),n.select()}if(e=e.data,e.getTarget().is("html")&&e.$.y<p.$.clientHeight&&e.$.x<p.$.clientWidth){var n=h.$.createTextRange();try{n.moveToPoint(e.$.clientX,e.$.clientY)}catch(o){}var r=n.duplicate();p.on("mousemove",t),c.on("mouseup",i),p.on("mouseup",i)}}),CKEDITOR.env.version>7&&CKEDITOR.env.version<11&&p.on("mousedown",function(e){e.data.getTarget().is("html")&&(c.on("mouseup",n),p.on("mouseup",n))}))}if(d.attachListener(d,"selectionchange",e,o),d.attachListener(d,"keyup",t,o),d.attachListener(d,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){o.forceNextSelectionCheck(),o.selectionChange(1)}),f&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var g;d.attachListener(d,"mousedown",function(){g=1}),d.attachListener(l.getDocumentElement(),"mouseup",function(){g&&t.call(o),g=0})}else d.attachListener(CKEDITOR.env.ie?d:l.getDocumentElement(),"mouseup",t,o);CKEDITOR.env.webkit&&d.attachListener(l,"keydown",function(e){switch(e.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:s(d)}},null,null,-1),d.attachListener(d,"keydown",u(o),null,null,-1)}),o.on("setData",function(){o.unlockSelection(),CKEDITOR.env.webkit&&n()}),o.on("contentDomUnload",function(){o.unlockSelection()}),CKEDITOR.env.ie9Compat&&o.on("beforeDestroy",n,null,null,9),o.on("dataReady",function(){delete o._.fakeSelection,delete o._.hiddenSelectionContainer,o.selectionChange(1)}),o.on("loadSnapshot",function(){var e=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),t=o.editable().getLast(e);t&&t.hasAttribute("data-cke-hidden-sel")&&(t.remove(),CKEDITOR.env.gecko&&(e=o.editable().getFirst(e))&&e.is("br")&&e.getAttribute("_moz_editor_bogus_node")&&e.remove())},null,null,100),o.on("key",function(e){if("wysiwyg"==o.mode){var t=o.getSelection();if(t.isFake){var i=g[e.data.keyCode];if(i)return i({editor:o,selected:t.getSelectedElement(),selection:t,keyEvent:e})}}})}),CKEDITOR.on("instanceReady",function(e){function t(){var e=d.editable();if(e&&(e=r(e))){var t=d.document.$.getSelection();"None"==t.type||t.anchorNode!=e.$&&t.focusNode!=e.$||(o=l(t)),n=e.getText(),e.setText(a(n))}}function i(){var e=d.editable();e&&(e=r(e))&&(e.setText(n),o&&(c(d.document.$,o),o=null))}var n,o,d=e.editor;CKEDITOR.env.webkit&&(d.on("selectionChange",function(){var e=d.editable(),t=r(e);t&&(t.getCustomData("ready")?s(e):t.setCustomData("ready",1))},null,null,-1),d.on("beforeSetMode",function(){s(d.editable())},null,null,-1),d.on("beforeUndoImage",t),d.on("afterUndoImage",i),d.on("beforeGetData",t,null,null,0),d.on("getData",i))}),CKEDITOR.editor.prototype.selectionChange=function(i){(i?e:t).call(this)},CKEDITOR.editor.prototype.getSelection=function(e){return!this._.savedSelection&&!this._.fakeSelection||e?(e=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(e):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(e){return e=e||this.getSelection(1),e.getType()!=CKEDITOR.SELECTION_NONE?(!e.isLocked&&e.lock(),this._.savedSelection=e,!0):!1},CKEDITOR.editor.prototype.unlockSelection=function(e){var t=this._.savedSelection;return t?(t.unlock(e),delete this._.savedSelection,!0):!1},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var e=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return e.selectRanges([this]),e},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3;var v="function"!=typeof window.getSelection,b=1;CKEDITOR.dom.selection=function(e){if(e instanceof CKEDITOR.dom.selection)var t=e,e=e.root;var i=e instanceof CKEDITOR.dom.element;if(this.rev=t?t.rev:b++,this.document=e instanceof CKEDITOR.dom.document?e:e.getDocument(),this.root=i?e:this.document.getBody(),this.isLocked=0,this._={cache:{}},t)return CKEDITOR.tools.extend(this._.cache,t._.cache),this.isFake=t.isFake,this.isLocked=t.isLocked,this;var n,o,e=this.getNative();if(e)if(e.getRangeAt)n=(o=e.rangeCount&&e.getRangeAt(0))&&new CKEDITOR.dom.node(o.commonAncestorContainer);else{try{o=e.createRange()}catch(r){}n=o&&CKEDITOR.dom.element.get(o.item&&o.item(0)||o.parentElement())}return(!n||n.type!=CKEDITOR.NODE_ELEMENT&&n.type!=CKEDITOR.NODE_TEXT||!this.root.equals(n)&&!this.root.contains(n))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var y={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=v?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:v?function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_NONE;try{var i=this.getNative(),n=i.type;"Text"==n&&(t=CKEDITOR.SELECTION_TEXT),"Control"==n&&(t=CKEDITOR.SELECTION_ELEMENT),i.createRange().parentElement()&&(t=CKEDITOR.SELECTION_TEXT)}catch(o){}return e.type=t}:function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_TEXT,i=this.getNative();if(i&&i.rangeCount){if(1==i.rangeCount){var i=i.getRangeAt(0),n=i.startContainer;n==i.endContainer&&1==n.nodeType&&i.endOffset-i.startOffset==1&&y[n.childNodes[i.startOffset].nodeName.toLowerCase()]&&(t=CKEDITOR.SELECTION_ELEMENT)}}else t=CKEDITOR.SELECTION_NONE;return e.type=t},getRanges:function(){var e=v?function(){function e(e){return new CKEDITOR.dom.node(e).getIndex()}var t=function(t,i){t=t.duplicate(),t.collapse(i);var n=t.parentElement();if(!n.hasChildNodes())return{container:n,offset:0};for(var o,r,s,a,l=n.children,c=t.duplicate(),d=0,u=l.length-1,h=-1;u>=d;)if(h=Math.floor((d+u)/2),o=l[h],c.moveToElementText(o),s=c.compareEndPoints("StartToStart",t),s>0)u=h-1;else{if(!(0>s))return{container:n,offset:e(o)};d=h+1}if(-1==h||h==l.length-1&&0>s){if(c.moveToElementText(n),c.setEndPoint("StartToStart",t),c=c.text.replace(/(\r\n|\r)/g,"\n").length,l=n.childNodes,!c)return o=l[l.length-1],o.nodeType!=CKEDITOR.NODE_TEXT?{container:n,offset:l.length}:{container:o,offset:o.nodeValue.length};for(n=l.length;c>0&&n>0;)r=l[--n],r.nodeType==CKEDITOR.NODE_TEXT&&(a=r,c-=r.nodeValue.length);return{container:a,offset:-c}}if(c.collapse(s>0?!0:!1),c.setEndPoint(s>0?"StartToStart":"EndToStart",t),c=c.text.replace(/(\r\n|\r)/g,"\n").length,!c)return{container:n,offset:e(o)+(s>0?0:1)};for(;c>0;)try{r=o[s>0?"previousSibling":"nextSibling"],r.nodeType==CKEDITOR.NODE_TEXT&&(c-=r.nodeValue.length,a=r),o=r}catch(p){return{container:n,offset:e(o)}}return{container:a,offset:s>0?-c:a.nodeValue.length+c}};return function(){var e=this.getNative(),i=e&&e.createRange(),n=this.getType();if(!e)return[];if(n==CKEDITOR.SELECTION_TEXT)return e=new CKEDITOR.dom.range(this.root),n=t(i,!0),e.setStart(new CKEDITOR.dom.node(n.container),n.offset),n=t(i),e.setEnd(new CKEDITOR.dom.node(n.container),n.offset),e.endContainer.getPosition(e.startContainer)&CKEDITOR.POSITION_PRECEDING&&e.endOffset<=e.startContainer.getIndex()&&e.collapse(),[e];if(n==CKEDITOR.SELECTION_ELEMENT){for(var n=[],o=0;o<i.length;o++){for(var r=i.item(o),s=r.parentNode,a=0,e=new CKEDITOR.dom.range(this.root);a<s.childNodes.length&&s.childNodes[a]!=r;a++);e.setStart(new CKEDITOR.dom.node(s),a),e.setEnd(new CKEDITOR.dom.node(s),a+1),n.push(e)}return n}return[]}}():function(){var e,t=[],i=this.getNative();if(!i)return t;for(var n=0;n<i.rangeCount;n++){var o=i.getRangeAt(n);e=new CKEDITOR.dom.range(this.root),e.setStart(new CKEDITOR.dom.node(o.startContainer),o.startOffset),e.setEnd(new CKEDITOR.dom.node(o.endContainer),o.endOffset),t.push(e)}return t};return function(t){var i=this._.cache,n=i.ranges;return n||(i.ranges=n=new CKEDITOR.dom.rangeList(e.call(this))),t?h(new CKEDITOR.dom.rangeList(n.slice())):n}}(),getStartElement:function(){var e=this._.cache;if(void 0!==e.startElement)return e.startElement;var t;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var i=this.getRanges()[0];if(i){if(i.collapsed)t=i.startContainer,t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent());else{for(i.optimize();t=i.startContainer,i.startOffset==(t.getChildCount?t.getChildCount():t.getLength())&&!t.isBlockBoundary();)i.setStartAfter(t);if(t=i.startContainer,t.type!=CKEDITOR.NODE_ELEMENT)return t.getParent();if(t=t.getChild(i.startOffset),t&&t.type==CKEDITOR.NODE_ELEMENT)for(i=t.getFirst();i&&i.type==CKEDITOR.NODE_ELEMENT;)t=i,i=i.getFirst();else t=i.startContainer}t=t.$}}return e.startElement=t?new CKEDITOR.dom.element(t):null},getSelectedElement:function(){var e=this._.cache;if(void 0!==e.selectedElement)return e.selectedElement;var t=this,i=CKEDITOR.tools.tryThese(function(){return t.getNative().createRange().item(0)},function(){for(var e,i,n=t.getRanges()[0].clone(),o=2;o&&(!(e=n.getEnclosedNode())||e.type!=CKEDITOR.NODE_ELEMENT||!y[e.getName()]||!(i=e));o--)n.shrink(CKEDITOR.SHRINK_ELEMENT);return i&&i.$});return e.selectedElement=i?new CKEDITOR.dom.element(i):null},getSelectedText:function(){var e=this._.cache;if(void 0!==e.selectedText)return e.selectedText;var t=this.getNative(),t=v?"Control"==t.type?"":t.createRange().text:t.toString();return e.selectedText=t},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(e){if(this.isLocked){if(e)var t=this.getSelectedElement(),i=!t&&this.getRanges(),n=this.isFake;this.isLocked=0,this.reset(),e&&(e=t||i[0]&&i[0].getCommonAncestor())&&e.getAscendant("body",1)&&(n?this.fake(t):t?this.selectElement(t):this.selectRanges(i))}},reset:function(){this._.cache={},this.isFake=0;var e=this.root.editor;if(e&&e._.fakeSelection&&this.rev==e._.fakeSelection.rev){delete e._.fakeSelection;var t=e._.hiddenSelectionContainer;if(t){var i=e.checkDirty();e.fire("lockSnapshot"),t.remove(),e.fire("unlockSnapshot"),!i&&e.resetDirty()}delete e._.hiddenSelectionContainer}this.rev=b++},selectElement:function(e){var t=new CKEDITOR.dom.range(this.root);t.setStartBefore(e),t.setEndAfter(e),this.selectRanges([t])},selectRanges:function(e){var t=this.root.editor,t=t&&t._.hiddenSelectionContainer;if(this.reset(),t)for(var i,t=this.root,n=0;n<e.length;++n)i=e[n],i.endContainer.equals(t)&&(i.endOffset=Math.min(i.endOffset,t.getChildCount()));if(e.length)if(this.isLocked){var r=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(e),this.lock(),r&&!r.equals(this.root)&&r.focus()}else{var a,l,c;if((1!=e.length||(c=e[0]).collapsed||!(a=c.getEnclosedNode())||a.type!=CKEDITOR.NODE_ELEMENT||(c=c.clone(),c.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(l=c.getEnclosedNode())&&l.type==CKEDITOR.NODE_ELEMENT&&(a=l),"false"!=a.getAttribute("contenteditable")))&&(a=void 0),a)this.fake(a);else{if(v){c=CKEDITOR.dom.walker.whitespaces(!0),l=/\ufeff|\u00a0/,t={table:1,tbody:1,tr:1},e.length>1&&(a=e[e.length-1],e[0].setEnd(a.endContainer,a.endOffset)),a=e[0];var d,u,h,e=a.collapsed;if((i=a.getEnclosedNode())&&i.type==CKEDITOR.NODE_ELEMENT&&i.getName()in y&&(!i.is("a")||!i.getText()))try{return h=i.$.createControlRange(),h.addElement(i.$),void h.select()}catch(p){}(a.startContainer.type==CKEDITOR.NODE_ELEMENT&&a.startContainer.getName()in t||a.endContainer.type==CKEDITOR.NODE_ELEMENT&&a.endContainer.getName()in t)&&(a.shrink(CKEDITOR.NODE_ELEMENT,!0),e=a.collapsed),h=a.createBookmark(),t=h.startNode,e||(r=h.endNode),h=a.document.$.body.createTextRange(),h.moveToElementText(t.$),h.moveStart("character",1),r?(l=a.document.$.body.createTextRange(),l.moveToElementText(r.$),h.setEndPoint("EndToEnd",l),h.moveEnd("character",-1)):(d=t.getNext(c),u=t.hasAscendant("pre"),d=!(d&&d.getText&&d.getText().match(l))&&(u||!t.hasPrevious()||t.getPrevious().is&&t.getPrevious().is("br")),u=a.document.createElement("span"),u.setHtml("&#65279;"),u.insertBefore(t),d&&a.document.createText("\ufeff").insertBefore(t)),a.setStartBefore(t),t.remove(),e?(d?(h.moveStart("character",-1),h.select(),a.document.$.selection.clear()):h.select(),a.moveToPosition(u,CKEDITOR.POSITION_BEFORE_START),u.remove()):(a.setEndBefore(r),r.remove(),h.select())}else{if(r=this.getNative(),!r)return;for(this.removeAllRanges(),h=0;h<e.length;h++)if(h<e.length-1&&(d=e[h],u=e[h+1],l=d.clone(),l.setStart(d.endContainer,d.endOffset),l.setEnd(u.startContainer,u.startOffset),!l.collapsed&&(l.shrink(CKEDITOR.NODE_ELEMENT,!0),a=l.getCommonAncestor(),l=l.getEnclosedNode(),a.isReadOnly()||l&&l.isReadOnly())))u.setStart(d.startContainer,d.startOffset),e.splice(h--,1);else{a=e[h],u=this.document.$.createRange(),a.collapsed&&CKEDITOR.env.webkit&&o(a)&&(d=this.root,s(d,!1),l=d.getDocument().createText("​"),d.setCustomData("cke-fillingChar",l),a.insertNode(l),(d=l.getNext())&&!l.getPrevious()&&d.type==CKEDITOR.NODE_ELEMENT&&"br"==d.getName()?(s(this.root),a.moveToPosition(d,CKEDITOR.POSITION_BEFORE_START)):a.moveToPosition(l,CKEDITOR.POSITION_AFTER_END)),u.setStart(a.startContainer.$,a.startOffset);try{u.setEnd(a.endContainer.$,a.endOffset)}catch(f){if(!(f.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")>=0))throw f;a.collapse(1),u.setEnd(a.endContainer.$,a.endOffset)}r.addRange(u)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(e){var t=this.root.editor;this.reset(),d(t);var i=this._.cache,n=new CKEDITOR.dom.range(this.root);n.setStartBefore(e),n.setEndAfter(e),i.ranges=new CKEDITOR.dom.rangeList(n),i.selectedElement=i.startElement=e,i.type=CKEDITOR.SELECTION_ELEMENT,i.selectedText=i.nativeSel=null,this.isFake=1,this.rev=b++,t._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var e=this.getCommonAncestor();return e&&e.type==CKEDITOR.NODE_TEXT&&(e=e.getParent()),!(!e||!e.data("cke-hidden-sel"))},createBookmarks:function(e){return e=this.getRanges().createBookmarks(e),this.isFake&&(e.isFake=1),e},createBookmarks2:function(e){return e=this.getRanges().createBookmarks2(e),this.isFake&&(e.isFake=1),e},selectBookmarks:function(e){for(var t=[],i=0;i<e.length;i++){var n=new CKEDITOR.dom.range(this.root);n.moveToBookmark(e[i]),t.push(n)}return e.isFake?this.fake(t[0].getEnclosedNode()):this.selectRanges(t),this},getCommonAncestor:function(){var e=this.getRanges();return e.length?e[0].startContainer.getCommonAncestor(e[e.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var e=this.getNative();try{e&&e[v?"empty":"removeAllRanges"]()}catch(t){}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function e(e,t){for(var i,n;(e=e.getParent())&&!e.equals(t);)if(e.getAttribute("data-nostyle"))i=e;else if(!n){var o=e.getAttribute("contentEditable");"false"==o?i=e:"true"==o&&(n=1)}return i}function t(i){var o=i.document;if(i.collapsed)o=g(this,o),i.insertNode(o),i.moveToPosition(o,CKEDITOR.POSITION_BEFORE_END);else{var r,s=this.element,a=this._.definition,l=a.ignoreReadonly,c=l||a.includeReadonly;null==c&&(c=i.root.getCustomData("cke_includeReadonly"));var d=CKEDITOR.dtd[s];d||(r=!0,d=CKEDITOR.dtd.span),i.enlarge(CKEDITOR.ENLARGE_INLINE,1),i.trim();var u,h=i.createBookmark(),f=h.startNode,m=h.endNode,v=f;if(!l){var b=i.getCommonAncestor(),l=e(f,b),b=e(m,b);l&&(v=l.getNextSourceNode(!0)),b&&(m=b)}for(v.getPosition(m)==CKEDITOR.POSITION_FOLLOWING&&(v=0);v;){if(l=!1,v.equals(m))v=null,l=!0;else{var y=v.type==CKEDITOR.NODE_ELEMENT?v.getName():null,b=y&&"false"==v.getAttribute("contentEditable"),w=y&&v.getAttribute("data-nostyle");if(y&&v.data("cke-bookmark")){v=v.getNextSourceNode(!0);continue}if(b&&c&&CKEDITOR.dtd.$block[y])for(var _=v,E=n(_),T=void 0,C=E.length,S=0,_=C&&new CKEDITOR.dom.range(_.getDocument());C>S;++S){var T=E[S],I=CKEDITOR.filter.instances[T.data("cke-filter")];(I?I.check(this):1)&&(_.selectNodeContents(T),t.call(this,_))}if(E=y?!d[y]||w?0:b&&!c?0:(v.getPosition(m)|k)==k&&(!a.childRule||a.childRule(v)):1){if(!(E=v.getParent())||!(E.getDtd()||CKEDITOR.dtd.span)[s]&&!r||a.parentRule&&!a.parentRule(E))l=!0;else if(u||y&&CKEDITOR.dtd.$removeEmpty[y]&&(v.getPosition(m)|k)!=k||(u=i.clone(),u.setStartBefore(v)),y=v.type,y==CKEDITOR.NODE_TEXT||b||y==CKEDITOR.NODE_ELEMENT&&!v.getChildCount()){for(var R,y=v;(l=!y.getNext(D))&&(R=y.getParent(),d[R.getName()])&&(R.getPosition(f)|O)==O&&(!a.childRule||a.childRule(R));)y=R;u.setEndAfter(y)}}else l=!0;v=v.getNextSourceNode(w||b)}if(l&&u&&!u.collapsed){for(var x,A,P,l=g(this,o),b=l.hasAttributes(),w=u.getCommonAncestor(),y={},E={},T={},C={};l&&w;){if(w.getName()==s){for(x in a.attributes)!C[x]&&(P=w.getAttribute(A))&&(l.getAttribute(x)==P?E[x]=1:C[x]=1);for(A in a.styles)!T[A]&&(P=w.getStyle(A))&&(l.getStyle(A)==P?y[A]=1:T[A]=1)}w=w.getParent()}for(x in E)l.removeAttribute(x);for(A in y)l.removeStyle(A);b&&!l.hasAttributes()&&(l=null),l?(u.extractContents().appendTo(l),u.insertNode(l),p.call(this,l),l.mergeSiblings(),CKEDITOR.env.ie||l.$.normalize()):(l=new CKEDITOR.dom.element("span"),u.extractContents().appendTo(l),u.insertNode(l),p.call(this,l),l.remove(!0)),u=null}}i.moveToBookmark(h),i.shrink(CKEDITOR.SHRINK_TEXT),i.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function i(e){function t(){for(var e=new CKEDITOR.dom.elementPath(n.getParent()),t=new CKEDITOR.dom.elementPath(c.getParent()),i=null,o=null,r=0;r<e.elements.length;r++){var s=e.elements[r];if(s==e.block||s==e.blockLimit)break;d.checkElementRemovable(s,!0)&&(i=s)}for(r=0;r<t.elements.length&&(s=t.elements[r],s!=t.block&&s!=t.blockLimit);r++)d.checkElementRemovable(s,!0)&&(o=s);o&&c.breakParent(o),i&&n.breakParent(i)}e.enlarge(CKEDITOR.ENLARGE_INLINE,1);var i=e.createBookmark(),n=i.startNode;if(e.collapsed){for(var o,r,s=new CKEDITOR.dom.elementPath(n.getParent(),e.root),a=0;a<s.elements.length&&(r=s.elements[a])&&(r!=s.block&&r!=s.blockLimit);a++)if(this.checkElementRemovable(r)){var l;e.collapsed&&(e.checkBoundaryOfElement(r,CKEDITOR.END)||(l=e.checkBoundaryOfElement(r,CKEDITOR.START)))?(o=r,o.match=l?"start":"end"):(r.mergeSiblings(),r.is(this.element)?h.call(this,r):f(r,y(this)[r.getName()]))}if(o){for(r=n,a=0;l=s.elements[a],!l.equals(o);a++)l.match||(l=l.clone(),l.append(r),r=l);r["start"==o.match?"insertBefore":"insertAfter"](o)}}else{var c=i.endNode,d=this;for(t(),s=n;!s.equals(c);)o=s.getNextSourceNode(),s.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(s)&&(s.getName()==this.element?h.call(this,s):f(s,y(this)[s.getName()]),o.type==CKEDITOR.NODE_ELEMENT&&o.contains(n)&&(t(),o=n.getNext())),s=o}e.moveToBookmark(i),e.shrink(CKEDITOR.NODE_ELEMENT,!0)}function n(e){var t=[];return e.forEach(function(e){return"true"==e.getAttribute("contenteditable")?(t.push(e),!1):void 0},CKEDITOR.NODE_ELEMENT,!0),t}function o(e){var t=e.getEnclosedNode()||e.getCommonAncestor(!1,!0);(e=new CKEDITOR.dom.elementPath(t,e.root).contains(this.element,1))&&!e.isReadOnly()&&v(e,this)}function r(e){var t=e.getCommonAncestor(!0,!0);if(e=new CKEDITOR.dom.elementPath(t,e.root).contains(this.element,1)){var t=this._.definition,i=t.attributes;if(i)for(var n in i)e.removeAttribute(n,i[n]);if(t.styles)for(var o in t.styles)t.styles.hasOwnProperty(o)&&e.removeStyle(o)}}function s(e){var t=e.createBookmark(!0),i=e.createIterator();i.enforceRealBlocks=!0,this._.enterMode&&(i.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var n,o,r=e.document;n=i.getNextParagraph();)!n.isReadOnly()&&(i.activeFilter?i.activeFilter.check(this):1)&&(o=g(this,r,n),l(n,o));e.moveToBookmark(t)}function a(e){var t=e.createBookmark(1),i=e.createIterator();i.enforceRealBlocks=!0,i.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var n,o;n=i.getNextParagraph();)this.checkElementRemovable(n)&&(n.is("pre")?((o=this._.enterMode==CKEDITOR.ENTER_BR?null:e.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&n.copyAttributes(o),l(n,o)):h.call(this,n));e.moveToBookmark(t)}function l(e,t){var i=!t;i&&(t=e.getDocument().createElement("div"),e.copyAttributes(t));var n=t&&t.is("pre"),o=e.is("pre"),r=!n&&o;if(n&&!o){if(o=t,(r=e.getBogus())&&r.remove(),r=e.getHtml(),r=d(r,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),r=r.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),r=r.replace(/([ \t\n\r]+|&nbsp;)/g," "),r=r.replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var s=e.getDocument().createElement("div");s.append(o),o.$.outerHTML="<pre>"+r+"</pre>",o.copyAttributes(s.getFirst()),o=s.getFirst().remove()}else o.setHtml(r);t=o}else r?t=u(i?[e.getHtml()]:c(e),t):e.moveChildren(t);if(t.replace(e),n){var a,i=t;(a=i.getPrevious(I))&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("pre")&&(n=d(a.getHtml(),/\n$/,"")+"\n\n"+d(i.getHtml(),/^\n/,""),CKEDITOR.env.ie?i.$.outerHTML="<pre>"+n+"</pre>":i.setHtml(n),a.remove())}else i&&m(t)}function c(e){var t=[];return d(e.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(e,t,i){return t+"</pre>"+i+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(e,i){t.push(i)}),t}function d(e,t,i){var n="",o="",e=e.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(e,t,i){return t&&(n=t),i&&(o=i),""});return n+e.replace(t,i)+o}function u(e,t){var i;e.length>1&&(i=new CKEDITOR.dom.documentFragment(t.getDocument()));for(var n=0;n<e.length;n++){var o=e[n],o=o.replace(/(\r\n|\r)/g,"\n"),o=d(o,/^[ \t]*\n/,""),o=d(o,/\n$/,""),o=d(o,/^[ \t]+|[ \t]+$/g,function(e,t){return 1==e.length?"&nbsp;":t?" "+CKEDITOR.tools.repeat("&nbsp;",e.length-1):CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "}),o=o.replace(/\n/g,"<br>"),o=o.replace(/[ \t]{2,}/g,function(e){return CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "});if(i){var r=t.clone();r.setHtml(o),i.append(r)}else t.setHtml(o)}return i||t}function h(e,t){var i,n=this._.definition,o=n.attributes,n=n.styles,r=y(this)[e.getName()],s=CKEDITOR.tools.isEmpty(o)&&CKEDITOR.tools.isEmpty(n);for(i in o)("class"==i||this._.definition.fullMatch)&&e.getAttribute(i)!=w(i,o[i])||t&&"data-"==i.slice(0,5)||(s=e.hasAttribute(i),e.removeAttribute(i));for(var a in n)this._.definition.fullMatch&&e.getStyle(a)!=w(a,n[a],!0)||(s=s||!!e.getStyle(a),e.removeStyle(a));f(e,r,E[e.getName()]),s&&(this._.definition.alwaysRemoveElement?m(e,1):!CKEDITOR.dtd.$block[e.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!e.hasAttributes()?m(e):e.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function p(e){for(var t,i=y(this),n=e.getElementsByTag(this.element),o=n.count();--o>=0;)t=n.getItem(o),t.isReadOnly()||h.call(this,t,!0);for(var r in i)if(r!=this.element)for(n=e.getElementsByTag(r),o=n.count()-1;o>=0;o--)t=n.getItem(o),t.isReadOnly()||f(t,i[r])}function f(e,t,i){if(t=t&&t.attributes)for(var n=0;n<t.length;n++){var o,r=t[n][0];if(o=e.getAttribute(r)){var s=t[n][1];(null===s||s.test&&s.test(o)||"string"==typeof s&&o==s)&&e.removeAttribute(r)}}i||m(e)}function m(e,t){if(!e.hasAttributes()||t)if(CKEDITOR.dtd.$block[e.getName()]){var i=e.getPrevious(I),n=e.getNext(I);i&&(i.type==CKEDITOR.NODE_TEXT||!i.isBlockBoundary({br:1}))&&e.append("br",1),n&&(n.type==CKEDITOR.NODE_TEXT||!n.isBlockBoundary({br:1}))&&e.append("br"),e.remove(!0)}else i=e.getFirst(),n=e.getLast(),e.remove(!0),i&&(i.type==CKEDITOR.NODE_ELEMENT&&i.mergeSiblings(),n&&!i.equals(n)&&n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings())}function g(e,t,i){var n;return n=e.element,"*"==n&&(n="span"),n=new CKEDITOR.dom.element(n,t),i&&i.copyAttributes(n),n=v(n,e),t.getCustomData("doc_processing_style")&&n.hasAttribute("id")?n.removeAttribute("id"):t.setCustomData("doc_processing_style",1),n}function v(e,t){var i=t._.definition,n=i.attributes,i=CKEDITOR.style.getStyleText(i);if(n)for(var o in n)e.setAttribute(o,n[o]);return i&&e.setAttribute("style",i),e}function b(e,t){for(var i in e)e[i]=e[i].replace(S,function(e,i){return t[i]})}function y(e){if(e._.overrides)return e._.overrides;var t=e._.overrides={},i=e._.definition.overrides;if(i){CKEDITOR.tools.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++){var o,r,s=i[n];if("string"==typeof s?o=s.toLowerCase():(o=s.element?s.element.toLowerCase():e.element,r=s.attributes),s=t[o]||(t[o]={}),r){var a,s=s.attributes=s.attributes||[];for(a in r)s.push([a.toLowerCase(),r[a]])}}}return t}function w(e,t,i){var n=new CKEDITOR.dom.element("span");return n[i?"setStyle":"setAttribute"](e,t),n[i?"getStyle":"getAttribute"](e)}function _(e,t,i){for(var n,o=e.document,r=e.getRanges(),t=t?this.removeFromRange:this.applyToRange,s=r.createIterator();n=s.getNextRange();)t.call(this,n,i);e.selectRanges(r),o.removeCustomData("doc_processing_style")}var E={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},T={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},C=/\s*(?:;\s*|$)/,S=/#\((.+?)\)/g,D=CKEDITOR.dom.walker.bookmark(0,1),I=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(e,t){if("string"==typeof e.type)return new CKEDITOR.style.customHandlers[e.type](e);var i=e.attributes;i&&i.style&&(e.styles=CKEDITOR.tools.extend({},e.styles,CKEDITOR.tools.parseCssText(i.style)),delete i.style),t&&(e=CKEDITOR.tools.clone(e),b(e.attributes,t),b(e.styles,t)),i=this.element=e.element?"string"==typeof e.element?e.element.toLowerCase():e.element:"*",this.type=e.type||(E[i]?CKEDITOR.STYLE_BLOCK:T[i]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:e}},CKEDITOR.style.prototype={apply:function(e){if(e instanceof CKEDITOR.dom.document)return _.call(this,e.getSelection());if(this.checkApplicable(e.elementPath(),e)){var t=this._.enterMode;t||(this._.enterMode=e.activeEnterMode),_.call(this,e.getSelection(),0,e),this._.enterMode=t}},remove:function(e){if(e instanceof CKEDITOR.dom.document)return _.call(this,e.getSelection(),1);if(this.checkApplicable(e.elementPath(),e)){var t=this._.enterMode;t||(this._.enterMode=e.activeEnterMode),_.call(this,e.getSelection(),1,e),this._.enterMode=t}},applyToRange:function(e){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?t:this.type==CKEDITOR.STYLE_BLOCK?s:this.type==CKEDITOR.STYLE_OBJECT?o:null,this.applyToRange(e)},removeFromRange:function(e){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?i:this.type==CKEDITOR.STYLE_BLOCK?a:this.type==CKEDITOR.STYLE_OBJECT?r:null,
this.removeFromRange(e)},applyToObject:function(e){v(e,this)},checkActive:function(e,t){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(e.block||e.blockLimit,!0,t);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var i,n=e.elements,o=0;o<n.length;o++)if(i=n[o],this.type!=CKEDITOR.STYLE_INLINE||i!=e.block&&i!=e.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var r=i.getName();if(!("string"==typeof this.element?r==this.element:r in this.element))continue}if(this.checkElementRemovable(i,!0,t))return!0}}return!1},checkApplicable:function(e,t,i){if(t&&t instanceof CKEDITOR.filter&&(i=t),i&&!i.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!e.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!e.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(e,t){var i=this._.definition;if(!e||!i.ignoreReadonly&&e.isReadOnly())return!1;var n=e.getName();if("string"==typeof this.element?n==this.element:n in this.element){if(!t&&!e.hasAttributes())return!0;if(n=i._AC)i=n;else{var n={},o=0,r=i.attributes;if(r)for(var s in r)o++,n[s]=r[s];(s=CKEDITOR.style.getStyleText(i))&&(n.style||o++,n.style=s),n._length=o,i=i._AC=n}if(!i._length)return!0;for(var a in i)if("_length"!=a){if(o=e.getAttribute(a)||"","style"==a)e:{n=i[a],"string"==typeof n&&(n=CKEDITOR.tools.parseCssText(n)),"string"==typeof o&&(o=CKEDITOR.tools.parseCssText(o,!0)),s=void 0;for(s in n)if(!(s in o)||o[s]!=n[s]&&"inherit"!=n[s]&&"inherit"!=o[s]){n=!1;break e}n=!0}else n=i[a]==o;if(n){if(!t)return!0}else if(t)return!1}if(t)return!0}return!1},checkElementRemovable:function(e,t,i){if(this.checkElementMatch(e,t,i))return!0;if(t=y(this)[e.getName()]){var n;if(!(t=t.attributes))return!0;for(i=0;i<t.length;i++)if(n=t[i][0],n=e.getAttribute(n)){var o=t[i][1];if(null===o)return!0;if("string"==typeof o){if(n==o)return!0}else if(o.test(n))return!0}}return!1},buildPreview:function(e){var t=this._.definition,i=[],n=t.element;"bdo"==n&&(n="span");var i=["<",n],o=t.attributes;if(o)for(var r in o)i.push(" ",r,'="',o[r],'"');return(o=CKEDITOR.style.getStyleText(t))&&i.push(' style="',o,'"'),i.push(">",e||t.name,"</",n,">"),i.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(e){var t=e._ST;if(t)return t;var t=e.styles,i=e.attributes&&e.attributes.style||"",n="";i.length&&(i=i.replace(C,";"));for(var o in t){var r=t[o],s=(o+":"+r).replace(C,";");"inherit"==r?n+=s:i+=s}return i.length&&(i=CKEDITOR.tools.normalizeCssText(i,!0)),e._ST=i+n},CKEDITOR.style.customHandlers={},CKEDITOR.style.addCustomHandler=function(e){var t=function(e){this._={definition:e},this.setup&&this.setup(e)};return t.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},e,!0),this.customHandlers[e.type]=t};var k=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,O=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(e,t){this.requiredContent=this.allowedContent=this.style=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.styleCommand.prototype.exec=function(e){e.focus(),this.state==CKEDITOR.TRISTATE_OFF?e.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&e.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(e,t,i){CKEDITOR.stylesSet.addExternal(e,t,""),CKEDITOR.stylesSet.load(e,i)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(e,t){var i=this._.styleStateChangeCallbacks;i||(i=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(e){for(var t=0;t<i.length;t++){var n=i[t],o=n.style.checkActive(e.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;n.fn.call(this,o)}})),i.push({style:e,fn:t})},applyStyle:function(e){e.apply(this)},removeStyle:function(e){e.remove(this)},getStylesSet:function(e){if(this._.stylesDefinitions)e(this._.stylesDefinitions);else{var t=this,i=t.config.stylesCombo_stylesSet||t.config.stylesSet;if(i===!1)e(null);else if(i instanceof Array)t._.stylesDefinitions=i,e(i);else{i||(i="default");var i=i.split(":"),n=i[0];CKEDITOR.stylesSet.addExternal(n,i[1]?i.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(n,function(i){t._.stylesDefinitions=i[n],e(t._.stylesDefinitions)})}}}}),CKEDITOR.dom.comment=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createComment(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}}),function(){var e,t={},i={};for(e in CKEDITOR.dtd.$blockLimit)e in CKEDITOR.dtd.$list||(t[e]=1);for(e in CKEDITOR.dtd.$block)e in CKEDITOR.dtd.$blockLimit||e in CKEDITOR.dtd.$empty||(i[e]=1);CKEDITOR.dom.elementPath=function(e,n){var o,r=null,s=null,a=[],l=e,n=n||e.getDocument().getBody();do if(l.type==CKEDITOR.NODE_ELEMENT){if(a.push(l),!this.lastElement&&(this.lastElement=l,l.is(CKEDITOR.dtd.$object)||"false"==l.getAttribute("contenteditable")))continue;if(l.equals(n))break;if(!s&&(o=l.getName(),"true"==l.getAttribute("contenteditable")?s=l:!r&&i[o]&&(r=l),t[o])){var c;if(c=!r){if(o="div"==o){e:{o=l.getChildren(),c=0;for(var d=o.count();d>c;c++){var u=o.getItem(c);if(u.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[u.getName()]){o=!0;break e}}o=!1}o=!o}c=o}c?r=l:s=l}}while(l=l.getParent());s||(s=n),this.block=r,this.blockLimit=s,this.root=n,this.elements=a}}(),CKEDITOR.dom.elementPath.prototype={compare:function(e){var t=this.elements,e=e&&e.elements;if(!e||t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].equals(e[i]))return!1;return!0},contains:function(e,t,i){var n;"string"==typeof e&&(n=function(t){return t.getName()==e}),e instanceof CKEDITOR.dom.element?n=function(t){return t.equals(e)}:CKEDITOR.tools.isArray(e)?n=function(t){return CKEDITOR.tools.indexOf(e,t.getName())>-1}:"function"==typeof e?n=e:"object"==typeof e&&(n=function(t){return t.getName()in e});var o=this.elements,r=o.length;for(t&&r--,i&&(o=Array.prototype.slice.call(o,0),o.reverse()),t=0;r>t;t++)if(n(o[t]))return o[t];return null},isContextFor:function(e){var t;return e in CKEDITOR.dtd.$block?(t=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!t.getDtd()[e]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createTextNode(e)),this.$=e},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(e){this.$.nodeValue=e},split:function(e){var t=this.$.parentNode,i=t.childNodes.length,n=this.getLength(),o=this.getDocument(),r=new CKEDITOR.dom.text(this.$.splitText(e),o);return t.childNodes.length==i&&(e>=n?(r=o.createText(""),r.insertAfter(this)):(e=o.createText(""),e.insertAfter(r),e.remove())),r},substring:function(e,t){return"number"!=typeof t?this.$.nodeValue.substr(e):this.$.nodeValue.substring(e,t)}}),function(){function e(e,t,i){var n=e.serializable,o=t[i?"endContainer":"startContainer"],r=i?"endOffset":"startOffset",s=n?t.document.getById(e.startNode):e.startNode,e=n?t.document.getById(e.endNode):e.endNode;return o.equals(s.getPrevious())?(t.startOffset=t.startOffset-o.getLength()-e.getPrevious().getLength(),o=e.getNext()):o.equals(e.getPrevious())&&(t.startOffset=t.startOffset-o.getLength(),o=e.getNext()),o.equals(s.getParent())&&t[r]++,o.equals(e.getParent())&&t[r]++,t[i?"endContainer":"startContainer"]=o,t}CKEDITOR.dom.rangeList=function(e){return e instanceof CKEDITOR.dom.rangeList?e:(e?e instanceof CKEDITOR.dom.range&&(e=[e]):e=[],CKEDITOR.tools.extend(e,t))};var t={createIterator:function(){var e,t=this,i=CKEDITOR.dom.walker.bookmark(),n=[];return{getNextRange:function(o){e=void 0===e?0:e+1;var r=t[e];if(r&&t.length>1){if(!e)for(var s=t.length-1;s>=0;s--)n.unshift(t[s].createBookmark(!0));if(o)for(var a=0;t[e+a+1];){for(var l=r.document,o=0,s=l.getById(n[a].endNode),l=l.getById(n[a+1].startNode);;){if(s=s.getNextSourceNode(!1),l.equals(s))o=1;else if(i(s)||s.type==CKEDITOR.NODE_ELEMENT&&s.isBlockBoundary())continue;break}if(!o)break;a++}for(r.moveToBookmark(n.shift());a--;)s=t[++e],s.moveToBookmark(n.shift()),r.setEnd(s.endContainer,s.endOffset)}return r}}},createBookmarks:function(t){for(var i,n=[],o=0;o<this.length;o++){n.push(i=this[o].createBookmark(t,!0));for(var r=o+1;r<this.length;r++)this[r]=e(i,this[r]),this[r]=e(i,this[r],!0)}return n},createBookmarks2:function(e){for(var t=[],i=0;i<this.length;i++)t.push(this[i].createBookmark2(e));return t},moveToBookmarks:function(e){for(var t=0;t<this.length;t++)this[t].moveToBookmark(e[t])}}}(),function(){function e(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function t(t){var i=CKEDITOR.skin["ua_"+t],n=CKEDITOR.env;if(i)for(var o,i=i.split(",").sort(function(e,t){return e>t?-1:1}),r=0;r<i.length;r++)if(o=i[r],n.ie&&(o.replace(/^ie/,"")==n.version||n.quirks&&"iequirks"==o)&&(o="ie"),n[o]){t+="_"+i[r];break}return CKEDITOR.getUrl(e()+t+".css")}function i(e,i){r[e]||(CKEDITOR.document.appendStyleSheet(t(e)),r[e]=1),i&&i()}function n(e){var t=e.getById(s);return t||(t=e.getHead().append("style"),t.setAttribute("id",s),t.setAttribute("type","text/css")),t}function o(e,t,i){var n,o,r;if(CKEDITOR.env.webkit)for(t=t.split("}").slice(0,-1),o=0;o<t.length;o++)t[o]=t[o].split("{");for(var s=0;s<e.length;s++)if(CKEDITOR.env.webkit)for(o=0;o<t.length;o++){for(r=t[o][1],n=0;n<i.length;n++)r=r.replace(i[n][0],i[n][1]);e[s].$.sheet.addRule(t[o][0],r)}else{for(r=t,n=0;n<i.length;n++)r=r.replace(i[n][0],i[n][1]);CKEDITOR.env.ie&&CKEDITOR.env.version<11?e[s].$.styleSheet.cssText=e[s].$.styleSheet.cssText+r:e[s].$.innerHTML=e[s].$.innerHTML+r}}var r={};CKEDITOR.skin={path:e,loadPart:function(t,n){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e()+"skin.js"),function(){i(t,n)}):i(t,n)},getPath:function(e){return CKEDITOR.getUrl(t(e))},icons:{},addIcon:function(e,t,i,n){e=e.toLowerCase(),this.icons[e]||(this.icons[e]={path:t,offset:i||0,bgsize:n||"16px"})},getIconStyle:function(e,t,i,n,o){var r;return e&&(e=e.toLowerCase(),t&&(r=this.icons[e+"-rtl"]),r||(r=this.icons[e])),e=i||r&&r.path||"",n=n||r&&r.offset,o=o||r&&r.bgsize||"16px",e&&"background-image:url("+CKEDITOR.getUrl(e)+");background-position:0 "+n+"px;background-size:"+o+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(e){var t=n(CKEDITOR.document);return(this.setUiColor=function(e){this.uiColor=e;var i=CKEDITOR.skin.chameleon,n="",r="";"function"==typeof i&&(n=i(this,"editor"),r=i(this,"panel")),e=[[l,e]],o([t],n,e),o(a,r,e)}).call(this,e)}});var s="cke_ui_color",a=[],l=/\$color/g;CKEDITOR.on("instanceLoaded",function(e){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var t=e.editor,e=function(e){if(e=(e.data[0]||e.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument(),!e.getById("cke_ui_color")){e=n(e),a.push(e);var i=t.getUiColor();i&&o([e],CKEDITOR.skin.chameleon(t,"panel"),[[l,i]])}};t.on("panelShow",e),t.on("menuShow",e),t.config.uiColor&&t.setUiColor(t.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var e=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);e.appendTo(CKEDITOR.document.getHead());try{var t=e.getComputedStyle("border-top-color"),i=e.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!t||t!=i)}catch(n){CKEDITOR.env.hc=!1}e.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass=CKEDITOR.env.cssClass+" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),e=CKEDITOR._.pending)for(delete CKEDITOR._.pending,t=0;t<e.length;t++)CKEDITOR.editor.prototype.constructor.apply(e[t][0],e[t][1]),CKEDITOR.add(e[t][0])}(),CKEDITOR.skin.name="moono",CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8",CKEDITOR.skin.chameleon=function(){var e=function(){return function(e,t){for(var i=e.match(/[^#]./g),n=0;3>n;n++){var o,r=i,s=n;o=parseInt(i[n],16),o=("0"+(0>t?0|o*(1+t):0|o+(255-o)*t).toString(16)).slice(-2),r[s]=o}return"#"+i.join("")}}(),t=function(){var e=new CKEDITOR.template("background:#{to};background-image:-webkit-gradient(linear,lefttop,leftbottom,from({from}),to({to}));background-image:-moz-linear-gradient(top,{from},{to});background-image:-webkit-linear-gradient(top,{from},{to});background-image:-o-linear-gradient(top,{from},{to});background-image:-ms-linear-gradient(top,{from},{to});background-image:linear-gradient(top,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');");return function(t,i){return e.output({from:t,to:i})}}(),i={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(n,o){var r=n.uiColor,r={id:"."+n.id,defaultBorder:e(r,-.1),defaultGradient:t(e(r,.9),r),lightGradient:t(e(r,1),e(r,.7)),mediumGradient:t(e(r,.8),e(r,.5)),ckeButtonOn:t(e(r,.6),e(r,.7)),ckeResizer:e(r,-.4),ckeToolbarSeparator:e(r,.5),ckeColorauto:e(r,.8),dialogBody:e(r,.7),dialogTabSelected:t("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:e(r,-.6),elementsPathBg:r,menubuttonIcon:e(r,.5),menubuttonIconHover:e(r,.3)};return i[o].output(r).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var e=function(e){this._||(this._={}),this._["default"]=this._.initValue=e["default"]||"",this._.required=e.required||!1;for(var t=[this._],i=1;i<arguments.length;i++)t.push(arguments[i]);return t.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,t),this._},t={build:function(e,t,i){return new CKEDITOR.ui.dialog.textInput(e,t,i)}},i={build:function(e,t,i){return new CKEDITOR.ui.dialog[t.type](e,t,i)}},n={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(e){this.setValue(this.getInitValue(),e)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},o=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(e,t){this._.domOnChangeRegistered||(e.on("load",function(){this.getInputElement().on("change",function(){e.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",t)}},!0),r=/^on([A-Z]\w+)/,s=function(e){for(var t in e)(r.test(t)||"title"==t||"type"==t)&&delete e[t];return e};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(t,i,n,o){if(!(arguments.length<4)){var r=e.call(this,i);r.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var s={role:i.role||"presentation"};i.includeLabel&&(s["aria-labelledby"]=r.labelId),CKEDITOR.ui.dialog.uiElement.call(this,t,i,n,"div",null,s,function(){var e=[],n=i.required?" cke_required":"";return"horizontal"!=i.labelLayout?e.push('<label class="cke_dialog_ui_labeled_label'+n+'" ',' id="'+r.labelId+'"',r.inputId?' for="'+r.inputId+'"':"",(i.labelStyle?' style="'+i.labelStyle+'"':"")+">",i.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',i.controlStyle?' style="'+i.controlStyle+'"':"",' role="presentation">',o.call(this,t,i),"</div>"):(n={type:"hbox",widths:i.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+n+'" id="'+r.labelId+'" for="'+r.inputId+'"'+(i.labelStyle?' style="'+i.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(i.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(i.controlStyle?' style="'+i.controlStyle+'"':"")+">"+o.call(this,t,i)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(t,n,e)),e.join("")})}},textInput:function(t,i,n){if(!(arguments.length<3)){e.call(this,i);var o=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",r={"class":"cke_dialog_ui_input_"+i.type,id:o,type:i.type};i.validate&&(this.validate=i.validate),i.maxLength&&(r.maxlength=i.maxLength),i.size&&(r.size=i.size),i.inputStyle&&(r.style=i.inputStyle);var s=this,a=!1;t.on("load",function(){s.getInputElement().on("keydown",function(e){13==e.data.getKeystroke()&&(a=!0)}),s.getInputElement().on("keyup",function(e){13==e.data.getKeystroke()&&a&&(t.getButton("ok")&&setTimeout(function(){t.getButton("ok").click()},0),a=!1)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,t,i,n,function(){var e=['<div class="cke_dialog_ui_input_',i.type,'" role="presentation"'];i.width&&e.push('style="width:'+i.width+'" '),e.push("><input "),r["aria-labelledby"]=this._.labelId,this._.required&&(r["aria-required"]=this._.required);for(var t in r)e.push(t+'="'+r[t]+'" ');return e.push(" /></div>"),e.join("")})}},textarea:function(t,i,n){if(!(arguments.length<3)){e.call(this,i);var o=this,r=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",s={};i.validate&&(this.validate=i.validate),s.rows=i.rows||5,s.cols=i.cols||20,s["class"]="cke_dialog_ui_input_textarea "+(i["class"]||""),"undefined"!=typeof i.inputStyle&&(s.style=i.inputStyle),i.dir&&(s.dir=i.dir),CKEDITOR.ui.dialog.labeledElement.call(this,t,i,n,function(){s["aria-labelledby"]=this._.labelId,this._.required&&(s["aria-required"]=this._.required);var e,t=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',r,'" '];for(e in s)t.push(e+'="'+CKEDITOR.tools.htmlEncode(s[e])+'" ');return t.push(">",CKEDITOR.tools.htmlEncode(o._["default"]),"</textarea></div>"),t.join("")})}},checkbox:function(t,i,n){if(!(arguments.length<3)){var o=e.call(this,i,{"default":!!i["default"]});i.validate&&(this.validate=i.validate),CKEDITOR.ui.dialog.uiElement.call(this,t,i,n,"span",null,null,function(){var e=CKEDITOR.tools.extend({},i,{id:i.id?i.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),n=[],r=CKEDITOR.tools.getNextId()+"_label",a={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":r};return s(e),i["default"]&&(a.checked="checked"),"undefined"!=typeof e.inputStyle&&(e.style=e.inputStyle),o.checkbox=new CKEDITOR.ui.dialog.uiElement(t,e,n,"input",null,a),n.push(' <label id="',r,'" for="',a.id,'"'+(i.labelStyle?' style="'+i.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(i.label),"</label>"),n.join("")})}},radio:function(t,i,n){if(!(arguments.length<3)){e.call(this,i),this._["default"]||(this._["default"]=this._.initValue=i.items[0][1]),i.validate&&(this.validate=i.validate);var o=[],r=this;i.role="radiogroup",i.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,t,i,n,function(){for(var e=[],n=[],a=(i.id?i.id:CKEDITOR.tools.getNextId())+"_radio",l=0;l<i.items.length;l++){var c=i.items[l],d=void 0!==c[2]?c[2]:c[0],u=void 0!==c[1]?c[1]:c[0],h=CKEDITOR.tools.getNextId()+"_radio_input",p=h+"_label",h=CKEDITOR.tools.extend({},i,{id:h,title:null,type:null},!0),d=CKEDITOR.tools.extend({},h,{title:d},!0),f={type:"radio","class":"cke_dialog_ui_radio_input",name:a,value:u,"aria-labelledby":p},m=[];r._["default"]==u&&(f.checked="checked"),s(h),s(d),"undefined"!=typeof h.inputStyle&&(h.style=h.inputStyle),h.keyboardFocusable=!0,o.push(new CKEDITOR.ui.dialog.uiElement(t,h,m,"input",null,f)),m.push(" "),new CKEDITOR.ui.dialog.uiElement(t,d,m,"label",null,{id:p,"for":f.id},c[0]),e.push(m.join(""))}return new CKEDITOR.ui.dialog.hbox(t,o,e,n),n.join("")}),this._.children=o}},button:function(t,i,n){if(arguments.length){"function"==typeof i&&(i=i(t.getParentEditor())),e.call(this,i,{disabled:i.disabled||!1}),CKEDITOR.event.implementOn(this);var o=this;t.on("load",function(){var e=this.getElement();!function(){e.on("click",function(e){o.click(),e.data.preventDefault()}),e.on("keydown",function(e){e.data.getKeystroke()in{32:1}&&(o.click(),e.data.preventDefault())})}(),e.unselectable()},this);var r=CKEDITOR.tools.extend({},i);delete r.style;var s=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,t,r,n,"a",null,{style:i.style,href:"javascript:void(0)",title:i.label,hidefocus:"true","class":i["class"],role:"button","aria-labelledby":s},'<span id="'+s+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(i.label)+"</span>")}},select:function(t,i,n){if(!(arguments.length<3)){var o=e.call(this,i);i.validate&&(this.validate=i.validate),o.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,t,i,n,function(){var e=CKEDITOR.tools.extend({},i,{id:i.id?i.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),n=[],r=[],a={id:o.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};n.push('<div class="cke_dialog_ui_input_',i.type,'" role="presentation"'),i.width&&n.push('style="width:'+i.width+'" '),n.push(">"),void 0!==i.size&&(a.size=i.size),void 0!==i.multiple&&(a.multiple=i.multiple),s(e);for(var l,c=0;c<i.items.length&&(l=i.items[c]);c++)r.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==l[1]?l[1]:l[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(l[0]));return"undefined"!=typeof e.inputStyle&&(e.style=e.inputStyle),o.select=new CKEDITOR.ui.dialog.uiElement(t,e,n,"select",null,a,r.join("")),n.push("</div>"),n.join("")})}},file:function(t,i,n){if(!(arguments.length<3)){void 0===i["default"]&&(i["default"]="");var o=CKEDITOR.tools.extend(e.call(this,i),{definition:i,buttons:[]});i.validate&&(this.validate=i.validate),t.on("load",function(){CKEDITOR.document.getById(o.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,t,i,n,function(){o.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var e=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',o.frameId,'" title="',i.label,'" src="javascript:void('];return e.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),e.push(')"></iframe>'),e.join("")})}},fileButton:function(t,i,n){var o=this;if(!(arguments.length<3)){e.call(this,i),i.validate&&(this.validate=i.validate);var r=CKEDITOR.tools.extend({},i),s=r.onClick;r.className=(r.className?r.className+" ":"")+"cke_dialog_ui_button",r.onClick=function(e){var n=i["for"];s&&s.call(this,e)===!1||(t.getContentElement(n[0],n[1]).submit(),this.disable())},t.on("load",function(){t.getContentElement(i["for"][0],i["for"][1])._.buttons.push(o)}),CKEDITOR.ui.dialog.button.call(this,t,r,n)}},html:function(){var e=/^\s*<[\w:]+\s+([^>]*)?>/,t=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,i=/\/$/;return function(n,o,r){if(!(arguments.length<3)){var s=[],a=o.html;"<"!=a.charAt(0)&&(a="<span>"+a+"</span>");var l=o.focus;if(l){var c=this.focus;this.focus=function(){("function"==typeof l?l:c).call(this),this.fire("focus")},o.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,n,o,s,"span",null,null,""),s=s.join("").match(e),a=a.match(t)||["","",""],i.test(a[1])&&(a[1]=a[1].slice(0,-1),a[2]="/"+a[2]),r.push([a[1]," ",s[1]||"",a[2]].join(""))}}}(),fieldset:function(e,t,i,n,o){var r=o.label;this._={children:t},CKEDITOR.ui.dialog.uiElement.call(this,e,o,n,"fieldset",null,null,function(){var e=[];r&&e.push("<legend"+(o.labelStyle?' style="'+o.labelStyle+'"':"")+">"+r+"</legend>");for(var t=0;t<i.length;t++)e.push(i[t]);return e.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(e){var t=CKEDITOR.document.getById(this._.labelId);return t.getChildCount()<1?new CKEDITOR.dom.text(e,CKEDITOR.document).appendTo(t):t.getChild(0).$.nodeValue=e,this},getLabel:function(){var e=CKEDITOR.document.getById(this._.labelId);return!e||e.getChildCount()<1?"":e.getChild(0).getText()},eventProcessors:o},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var e=this.getElement();e&&e.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(e,t){this.on("click",function(){t.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&t.$.focus()},0)},select:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&(t.$.focus(),t.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(e){return!e&&(e=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},keyboardFocusable:!0},n,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(e,t,i){var n=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),o=this.getInputElement().$;return n.$.text=e,n.$.value=void 0===t||null===t?e:t,void 0===i||null===i?CKEDITOR.env.ie?o.add(n.$):o.add(n.$,null):o.add(n.$,i),this},remove:function(e){return this.getInputElement().$.remove(e),this},clear:function(){for(var e=this.getInputElement().$;e.length>0;)e.remove(0);return this},keyboardFocusable:!0},n,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(e,t){this.getInputElement().$.checked=e,!t&&this.fire("change",{value:e})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(e,t){return!CKEDITOR.env.ie||CKEDITOR.env.version>8?o.onChange.apply(this,arguments):(e.on("load",function(){var e=this._.checkbox.getElement();e.on("propertychange",function(t){t=t.data.$,"checked"==t.propertyName&&this.fire("change",{value:e.$.checked})},this)},this),this.on("change",t),null)}},keyboardFocusable:!0},n,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(e,t){for(var i,n=this._.children,o=0;o<n.length&&(i=n[o]);o++)i.getElement().$.checked=i.getValue()==e;!t&&this.fire("change",{value:e})},getValue:function(){for(var e=this._.children,t=0;t<e.length;t++)if(e[t].getElement().$.checked)return e[t].getValue();return null},accessKeyUp:function(){var e,t=this._.children;for(e=0;e<t.length;e++)if(t[e].getElement().$.checked)return void t[e].getElement().focus();t[0].getElement().focus()},eventProcessors:{onChange:function(e,t){return CKEDITOR.env.ie?(e.on("load",function(){for(var e=this._.children,t=this,i=0;i<e.length;i++)e[i].getElement().on("propertychange",function(e){e=e.data.$,"checked"==e.propertyName&&this.$.checked&&t.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",t),null):o.onChange.apply(this,arguments)}}},n,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,n,{getInputElement:function(){var e=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return e.$.forms.length>0?new CKEDITOR.dom.element(e.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(e){var t,i,n=/^on([A-Z]\w+)/,o=function(e,t,i,n){e.on("formLoaded",function(){e.getInputElement().on(i,n,e)})};for(i in e)(t=i.match(n))&&(this.eventProcessors[i]?this.eventProcessors[i].call(this,this._.dialog,e[i]):o(this,this._.dialog,t[1].toLowerCase(),e[i]));return this},reset:function(){function e(){i.$.open();var e="";n.size&&(e=n.size-(CKEDITOR.env.ie?7:0));var c=t.frameId+"_input";for(i.$.write(['<html dir="'+a+'" lang="'+l+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+a+'" lang="'+l+'" action="',CKEDITOR.tools.htmlEncode(n.action),'"><label id="',t.labelId,'" for="',c,'" style="display:none">',CKEDITOR.tools.htmlEncode(n.label),'</label><input style="width:100%" id="',c,'" aria-labelledby="',t.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(n.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(e>0?e:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+r+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+s+")}","</script>"].join("")),i.$.close(),e=0;e<o.length;e++)o[e].enable();
}var t=this._,i=CKEDITOR.document.getById(t.frameId).getFrameDocument(),n=t.definition,o=t.buttons,r=this.formLoadedNumber,s=this.formUnloadNumber,a=t.dialog._.editor.lang.dir,l=t.dialog._.editor.langCode;r||(r=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),s=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(r),CKEDITOR.tools.removeFunction(s)})),CKEDITOR.env.gecko?setTimeout(e,500):e()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(e,t){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",t)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",t),CKEDITOR.dialog.addUIElement("password",t),CKEDITOR.dialog.addUIElement("textarea",i),CKEDITOR.dialog.addUIElement("checkbox",i),CKEDITOR.dialog.addUIElement("radio",i),CKEDITOR.dialog.addUIElement("button",i),CKEDITOR.dialog.addUIElement("select",i),CKEDITOR.dialog.addUIElement("file",i),CKEDITOR.dialog.addUIElement("fileButton",i),CKEDITOR.dialog.addUIElement("html",i),CKEDITOR.dialog.addUIElement("fieldset",{build:function(e,t,i){for(var n,o=t.children,r=[],s=[],a=0;a<o.length&&(n=o[a]);a++){var l=[];r.push(l),s.push(CKEDITOR.dialog._.uiElementBuilders[n.type].build(e,n,l))}return new CKEDITOR.ui.dialog[t.type](e,s,r,i,t)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,function(){function e(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+e,i=t-1;i>t-e;i--)if(this._.tabs[this._.tabIdList[i%e]][0].$.offsetHeight)return this._.tabIdList[i%e];return null}function t(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),i=t+1;t+e>i;i++)if(this._.tabs[this._.tabIdList[i%e]][0].$.offsetHeight)return this._.tabIdList[i%e];return null}function i(e,t){for(var i=e.$.getElementsByTagName("input"),n=0,o=i.length;o>n;n++){var r=new CKEDITOR.dom.element(i[n]);"text"==r.getAttribute("type").toLowerCase()&&(t?(r.setAttribute("value",r.getCustomData("fake_value")||""),r.removeCustomData("fake_value")):(r.setCustomData("fake_value",r.getAttribute("value")),r.setAttribute("value","")))}}function n(e,t){var i=this.getInputElement();i&&(e?i.removeAttribute("aria-invalid"):i.setAttribute("aria-invalid",!0)),e||(this.select?this.select():this.focus()),t&&alert(t),this.fire("validated",{valid:e,msg:t})}function o(){var e=this.getInputElement();e&&e.removeAttribute("aria-invalid")}function r(e){var e=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",m).output({id:CKEDITOR.tools.getNextNumber(),editorId:e.id,langDir:e.lang.dir,langCode:e.langCode,editorDialogClass:"cke_editor_"+e.name.replace(/\./g,"\\.")+"_dialog",closeTitle:e.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),t=e.getChild([0,0,0,0,0]),i=t.getChild(0),n=t.getChild(1);if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var o="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())";CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+o+'" tabIndex="-1"></iframe>').appendTo(t.getParent())}return i.unselectable(),n.unselectable(),{element:e,parts:{dialog:e.getChild(0),title:i,close:n,tabs:t.getChild(2),contents:t.getChild([3,0,0,0]),footer:t.getChild([3,0,1,0])}}}function s(e,t,i){this.element=t,this.focusIndex=i,this.tabIndex=0,this.isFocusable=function(){return!t.getAttribute("disabled")&&t.isVisible()},this.focus=function(){e._.currentFocusIndex=this.focusIndex,this.element.focus()},t.on("keydown",function(e){e.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),t.on("focus",function(){this.fire("mouseover")}),t.on("blur",function(){this.fire("mouseout")})}function a(e){function t(){e.layout()}var i=CKEDITOR.document.getWindow();i.on("resize",t),e.on("hide",function(){i.removeListener("resize",t)})}function l(e,t){this._={dialog:e},CKEDITOR.tools.extend(this,t)}function c(e){function t(t){var i=e.getSize(),l=CKEDITOR.document.getWindow().getViewPaneSize(),c=t.data.$.screenX,d=t.data.$.screenY,u=c-n.x,h=d-n.y;n={x:c,y:d},o.x=o.x+u,o.y=o.y+h,e.move(o.x+a[3]<s?-a[3]:o.x-a[1]>l.width-i.width-s?l.width-i.width+("rtl"==r.lang.dir?0:a[1]):o.x,o.y+a[0]<s?-a[0]:o.y-a[2]>l.height-i.height-s?l.height-i.height+a[2]:o.y,1),t.data.preventDefault()}function i(){if(CKEDITOR.document.removeListener("mousemove",t),CKEDITOR.document.removeListener("mouseup",i),CKEDITOR.env.ie6Compat){var e=E.getChild(0).getFrameDocument();e.removeListener("mousemove",t),e.removeListener("mouseup",i)}}var n=null,o=null,r=e.getParentEditor(),s=r.config.dialog_magnetDistance,a=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof s&&(s=20),e.parts.title.on("mousedown",function(r){if(n={x:r.data.$.screenX,y:r.data.$.screenY},CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",i),o=e.getPosition(),CKEDITOR.env.ie6Compat){var s=E.getChild(0).getFrameDocument();s.on("mousemove",t),s.on("mouseup",i)}r.data.preventDefault()},e)}function d(e){function t(t){var i="rtl"==h.lang.dir,u=d.width,p=d.height,f=u+(t.data.$.screenX-n)*(i?-1:1)*(e._.moved?1:2),m=p+(t.data.$.screenY-o)*(e._.moved?1:2),g=e._.element.getFirst(),g=i&&g.getComputedStyle("right"),v=e.getPosition();v.y+m>c.height&&(m=c.height-v.y),(i?g:v.x)+f>c.width&&(f=c.width-(i?g:v.x)),(s==CKEDITOR.DIALOG_RESIZE_WIDTH||s==CKEDITOR.DIALOG_RESIZE_BOTH)&&(u=Math.max(r.minWidth||0,f-a)),(s==CKEDITOR.DIALOG_RESIZE_HEIGHT||s==CKEDITOR.DIALOG_RESIZE_BOTH)&&(p=Math.max(r.minHeight||0,m-l)),e.resize(u,p),e._.moved||e.layout(),t.data.preventDefault()}function i(){if(CKEDITOR.document.removeListener("mouseup",i),CKEDITOR.document.removeListener("mousemove",t),u&&(u.remove(),u=null),CKEDITOR.env.ie6Compat){var e=E.getChild(0).getFrameDocument();e.removeListener("mouseup",i),e.removeListener("mousemove",t)}}var n,o,r=e.definition,s=r.resizable;if(s!=CKEDITOR.DIALOG_RESIZE_NONE){var a,l,c,d,u,h=e.getParentEditor(),p=CKEDITOR.tools.addFunction(function(r){d=e.getSize();var s=e.parts.contents;s.$.getElementsByTagName("iframe").length&&(u=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),s.append(u)),l=d.height-e.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),a=d.width-e.parts.contents.getSize("width",1),n=r.screenX,o=r.screenY,c=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",i),CKEDITOR.env.ie6Compat&&(s=E.getChild(0).getFrameDocument(),s.on("mousemove",t),s.on("mouseup",i)),r.preventDefault&&r.preventDefault()});e.on("load",function(){var t="";s==CKEDITOR.DIALOG_RESIZE_WIDTH?t=" cke_resizer_horizontal":s==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(t=" cke_resizer_vertical"),t=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+t+" cke_resizer_"+h.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(h.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+p+', event )">'+("ltr"==h.lang.dir?"◢":"◣")+"</div>"),e.parts.footer.append(t,1)}),h.on("destroy",function(){CKEDITOR.tools.removeFunction(p)})}}function u(e){e.data.preventDefault(1)}function h(e){var t=CKEDITOR.document.getWindow(),i=e.config,n=i.dialog_backgroundCoverColor||"white",o=i.dialog_backgroundCoverOpacity,r=i.baseFloatZIndex,i=CKEDITOR.tools.genKey(n,o,r),s=T[i];s?s.show():(r=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",r,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+n,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(n="<html><body style=\\'background-color:"+n+";\\'></body></html>",r.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),r.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+n+"' );document.close();")+"})())"),r.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),r.push("</div>"),s=CKEDITOR.dom.element.createFromHtml(r.join("")),s.setOpacity(void 0!==o?o:.5),s.on("keydown",u),s.on("keypress",u),s.on("keyup",u),s.appendTo(CKEDITOR.document.getBody()),T[i]=s),e.focusManager.add(s),E=s;var e=function(){var e=t.getViewPaneSize();s.setStyles({width:e.width+"px",height:e.height+"px"})},a=function(){var e=t.getScrollPosition(),i=CKEDITOR.dialog._.currentTop;if(s.setStyles({left:e.x+"px",top:e.y+"px"}),i)do e=i.getPosition(),i.move(e.x,e.y);while(i=i._.parentDialog)};if(_=e,t.on("resize",e),e(),(!CKEDITOR.env.mac||!CKEDITOR.env.webkit)&&s.focus(),CKEDITOR.env.ie6Compat){var l=function(){a(),arguments.callee.prevScrollHandler.apply(this,arguments)};t.$.setTimeout(function(){l.prevScrollHandler=window.onscroll||function(){},window.onscroll=l},0),a()}}function p(e){E&&(e.focusManager.remove(E),e=CKEDITOR.document.getWindow(),E.hide(),e.removeListener("resize",_),CKEDITOR.env.ie6Compat&&e.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),_=null)}var f=CKEDITOR.tools.cssLength,m='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(i,s){function a(){var e=T._.focusList;e.sort(function(e,t){return e.tabIndex!=t.tabIndex?t.tabIndex-e.tabIndex:e.focusIndex-t.focusIndex});for(var t=e.length,i=0;t>i;i++)e[i].focusIndex=i}function l(e){var t=T._.focusList,e=e||0;if(!(t.length<1)){var i=T._.currentFocusIndex;T._.tabBarMode&&0>e&&(i=0);try{t[i].getInputElement().$.blur()}catch(n){}var o=i,r=T._.pageCount>1;do{if(o+=e,r&&!T._.tabBarMode&&(o==t.length||-1==o))return T._.tabBarMode=!0,T._.tabs[T._.currentTabId][0].focus(),void(T._.currentFocusIndex=-1);if(o=(o+t.length)%t.length,o==i)break}while(e&&!t[o].isFocusable());t[o].focus(),"text"==t[o].type&&t[o].select()}}function u(n){if(T==CKEDITOR.dialog._.currentTop){var o=n.data.getKeystroke(),r="rtl"==i.lang.dir,s=[37,38,39,40];if(p=f=0,9==o||o==CKEDITOR.SHIFT+9)l(o==CKEDITOR.SHIFT+9?-1:1),p=1;else if(o==CKEDITOR.ALT+121&&!T._.tabBarMode&&T.getPageCount()>1)T._.tabBarMode=!0,T._.tabs[T._.currentTabId][0].focus(),T._.currentFocusIndex=-1,p=1;else if(-1!=CKEDITOR.tools.indexOf(s,o)&&T._.tabBarMode)o=-1!=CKEDITOR.tools.indexOf([r?39:37,38],o)?e.call(T):t.call(T),T.selectPage(o),T._.tabs[o][0].focus(),p=1;else if(13!=o&&32!=o||!T._.tabBarMode)if(13==o)o=n.data.getTarget(),o.is("a","button","select","textarea")||o.is("input")&&"button"==o.$.type||((o=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(o.click,0,o),p=1),f=1;else{if(27!=o)return;(o=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(o.click,0,o):this.fire("cancel",{hide:!0}).hide!==!1&&this.hide(),f=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,l(1),p=1;h(n)}}function h(e){p?e.data.preventDefault(1):f&&e.data.stopPropagation()}var p,f,m=CKEDITOR.dialog._.dialogDefinitions[s],v=CKEDITOR.tools.clone(g),b=i.config.dialog_buttonsOrder||"OS",y=i.lang.dir,_={};if(("OS"==b&&CKEDITOR.env.mac||"rtl"==b&&"ltr"==y||"ltr"==b&&"rtl"==y)&&v.buttons.reverse(),m=CKEDITOR.tools.extend(m(i),v),m=CKEDITOR.tools.clone(m),m=new w(this,m),v=r(i),this._={editor:i,element:v.element,name:s,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=v.parts,CKEDITOR.tools.setTimeout(function(){i.fire("ariaWidget",this.parts.contents)},0,this),v={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"},v["rtl"==y?"right":"left"]=0,this.parts.dialog.setStyles(v),CKEDITOR.event.call(this),this.definition=m=CKEDITOR.fire("dialogDefinition",{name:s,definition:m},i).definition,!("removeDialogTabs"in i._)&&i.config.removeDialogTabs){for(v=i.config.removeDialogTabs.split(";"),y=0;y<v.length;y++)if(b=v[y].split(":"),2==b.length){var E=b[0];_[E]||(_[E]=[]),_[E].push(b[1])}i._.removeDialogTabs=_}if(i._.removeDialogTabs&&(_=i._.removeDialogTabs[s]))for(y=0;y<_.length;y++)m.removeContents(_[y]);m.onLoad&&this.on("load",m.onLoad),m.onShow&&this.on("show",m.onShow),m.onHide&&this.on("hide",m.onHide),m.onOk&&this.on("ok",function(e){i.fire("saveSnapshot"),setTimeout(function(){i.fire("saveSnapshot")},0),m.onOk.call(this,e)===!1&&(e.data.hide=!1)}),m.onCancel&&this.on("cancel",function(e){m.onCancel.call(this,e)===!1&&(e.data.hide=!1)});var T=this,C=function(e){var t,i=T._.contents,n=!1;for(t in i)for(var o in i[t])if(n=e.call(this,i[t][o]))return};this.on("ok",function(e){C(function(t){if(t.validate){var i=t.validate(this),o="string"==typeof i||i===!1;return o&&(e.data.hide=!1,e.stop()),n.call(t,!o,"string"==typeof i?i:void 0),o}})},this,null,0),this.on("cancel",function(e){C(function(t){return t.isChanged()?(i.config.dialog_noConfirmCancel||confirm(i.lang.common.confirmCancel)||(e.data.hide=!1),!0):void 0})},this,null,0),this.parts.close.on("click",function(e){this.fire("cancel",{hide:!0}).hide!==!1&&this.hide(),e.data.preventDefault()},this),this.changeFocus=l;var S=this._.element;for(i.focusManager.add(S,1),this.on("show",function(){S.on("keydown",u,this),CKEDITOR.env.gecko&&S.on("keypress",h,this)}),this.on("hide",function(){S.removeListener("keydown",u),CKEDITOR.env.gecko&&S.removeListener("keypress",h),C(function(e){o.apply(e)})}),this.on("iframeAdded",function(e){new CKEDITOR.dom.document(e.data.iframe.$.contentWindow.document).on("keydown",u,this,null,0)}),this.on("show",function(){a();var e=T._.pageCount>1;i.config.dialog_startupFocusTab&&e?(T._.tabBarMode=!0,T._.tabs[T._.currentTabId][0].focus(),T._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=e?-1:this._.focusList.length-1,m.onFocus?(e=m.onFocus.call(this))&&e.focus():l(1))},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var e=this.getElement(),t=e.getFirst();t.remove(),t.appendTo(e)},this),c(this),d(this),new CKEDITOR.dom.text(m.title,CKEDITOR.document).appendTo(this.parts.title),y=0;y<m.contents.length;y++)(_=m.contents[y])&&this.addPage(_);for(this.parts.tabs.on("click",function(e){var t=e.data.getTarget();t.hasClass("cke_dialog_tab")&&(t=t.$.id,this.selectPage(t.substring(4,t.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,l(1)),e.data.preventDefault())},this),y=[],_=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:m.buttons},y).getChild(),this.parts.footer.setHtml(y.join("")),y=0;y<_.length;y++)this._.buttons[_[y].id]=_[y]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(){return function(e,t){this._.contentSize&&this._.contentSize.width==e&&this._.contentSize.height==t||(CKEDITOR.dialog.fire("resize",{dialog:this,width:e,height:t},this._.editor),this.fire("resize",{width:e,height:t},this._.editor),this.parts.contents.setStyles({width:e+"px",height:t+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:e,height:t})}}(),getSize:function(){var e=this._.element.getFirst();return{width:e.$.offsetWidth||0,height:e.$.offsetHeight||0}},move:function(e,t,i){var n=this._.element.getFirst(),o="rtl"==this._.editor.lang.dir,r="fixed"==n.getComputedStyle("position");CKEDITOR.env.ie&&n.setStyle("zoom","100%"),r&&this._.position&&this._.position.x==e&&this._.position.y==t||(this._.position={x:e,y:t},r||(r=CKEDITOR.document.getWindow().getScrollPosition(),e+=r.x,t+=r.y),o&&(r=this.getSize(),e=CKEDITOR.document.getWindow().getViewPaneSize().width-r.width-e),t={top:(t>0?t:0)+"px"},t[o?"right":"left"]=(e>0?e:0)+"px",n.setStyles(t),i&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var e=this._.element,t=this.definition;e.getParent()&&e.getParent().equals(CKEDITOR.document.getBody())?e.setStyle("display","block"):e.appendTo(CKEDITOR.document.getBody()),this.resize(this._.contentSize&&this._.contentSize.width||t.width||t.minWidth,this._.contentSize&&this._.contentSize.height||t.height||t.minHeight),this.reset(),this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex=CKEDITOR.dialog._.currentZIndex+10),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,h(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),e.on("keydown",S),e.on("keyup",D),this._.hasFocus=!1;for(var i in t.contents)if(t.contents[i]){var e=t.contents[i],n=this._.tabs[e.id],o=e.requiredContent,r=0;if(n){for(var s in this._.contents[e.id]){var l=this._.contents[e.id][s];"hbox"!=l.type&&"vbox"!=l.type&&l.getInputElement()&&(l.requiredContent&&!this._.editor.activeFilter.check(l.requiredContent)?l.disable():(l.enable(),r++))}!r||o&&!this._.editor.activeFilter.check(o)?n[0].addClass("cke_dialog_tab_disabled"):n[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),a(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(e){e.setInitValue&&e.setInitValue()})},100,this)},layout:function(){var e=this.parts.dialog,t=this.getSize(),i=CKEDITOR.document.getWindow().getViewPaneSize(),n=(i.width-t.width)/2,o=(i.height-t.height)/2;CKEDITOR.env.ie6Compat||(t.height+(o>0?o:0)>i.height||t.width+(n>0?n:0)>i.width?e.setStyle("position","absolute"):e.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:n,this._.moved?this._.position.y:o)},foreach:function(e){for(var t in this._.contents)for(var i in this._.contents[t])e.call(this,this._.contents[t][i]);return this},reset:function(){var e=function(e){e.reset&&e.reset(1)};return function(){return this.foreach(e),this}}(),setupContent:function(){var e=arguments;this.foreach(function(t){t.setup&&t.setup.apply(t,e)})},commitContent:function(){var e=arguments;this.foreach(function(t){CKEDITOR.env.ie&&this._.currentFocusIndex==t.focusIndex&&t.getInputElement().$.blur(),t.commit&&t.commit.apply(t,e)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var e=this._.element;for(e.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),k(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var t=this._.parentDialog.getElement().getFirst();t.setStyle("z-index",parseInt(t.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else p(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex=CKEDITOR.dialog._.currentZIndex-10;else{CKEDITOR.dialog._.currentZIndex=null,e.removeListener("keydown",S),e.removeListener("keyup",D);var i=this._.editor;i.focus(),setTimeout(function(){i.focusManager.unlock(),CKEDITOR.env.iOS&&i.window.focus()},0)}delete this._.parentDialog,this.foreach(function(e){e.resetInitValue&&e.resetInitValue()})}},addPage:function(e){if(!e.requiredContent||this._.editor.filter.check(e.requiredContent)){for(var t=[],i=e.label?' title="'+CKEDITOR.tools.htmlEncode(e.label)+'"':"",n=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:e.elements,expand:!!e.expand,padding:e.padding,style:e.style||"width: 100%;"},t),o=this._.contents[e.id]={},r=n.getChild(),s=0;n=r.shift();)!n.notAllowed&&"hbox"!=n.type&&"vbox"!=n.type&&s++,o[n.id]=n,"function"==typeof n.getChild&&r.push.apply(r,n.getChild());s||(e.hidden=!0),t=CKEDITOR.dom.element.createFromHtml(t.join("")),t.setAttribute("role","tabpanel"),n=CKEDITOR.env,o="cke_"+e.id+"_"+CKEDITOR.tools.getNextNumber(),i=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',this._.pageCount>0?" cke_last":"cke_first",i,e.hidden?' style="display:none"':"",' id="',o,'"',n.gecko&&!n.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',e.label,"</a>"].join("")),t.setAttribute("aria-labelledby",o),this._.tabs[e.id]=[i,t],this._.tabIdList.push(e.id),!e.hidden&&this._.pageCount++,this._.lastTab=i,this.updateStyle(),t.setAttribute("name",e.id),t.appendTo(this.parts.contents),i.unselectable(),this.parts.tabs.append(i),e.accessKey&&(I(this,this,"CTRL+"+e.accessKey,R,O),this._.accessKeyMap["CTRL+"+e.accessKey]=e.id)}},selectPage:function(e){if(this._.currentTabId!=e&&!this._.tabs[e][0].hasClass("cke_dialog_tab_disabled")&&this.fire("selectPage",{page:e,currentPage:this._.currentTabId})!==!1){for(var t in this._.tabs){var n=this._.tabs[t][0],o=this._.tabs[t][1];t!=e&&(n.removeClass("cke_dialog_tab_selected"),o.hide()),o.setAttribute("aria-hidden",t!=e)}var r=this._.tabs[e];r[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(i(r[1]),r[1].show(),setTimeout(function(){i(r[1],1)},0)):r[1].show(),this._.currentTabId=e,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,e)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(t){var i=this._.tabs[t]&&this._.tabs[t][0];i&&1!=this._.pageCount&&i.isVisible()&&(t==this._.currentTabId&&this.selectPage(e.call(this)),i.hide(),this._.pageCount--,this.updateStyle())},showPage:function(e){(e=this._.tabs[e]&&this._.tabs[e][0])&&(e.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(e,t){var i=this._.contents[e];return i&&i[t]},getValueOf:function(e,t){return this.getContentElement(e,t).getValue()},setValueOf:function(e,t,i){return this.getContentElement(e,t).setValue(i)},getButton:function(e){return this._.buttons[e]},click:function(e){return this._.buttons[e].click()},disableButton:function(e){return this._.buttons[e].disable()},enableButton:function(e){return this._.buttons[e].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(e,t){if("undefined"==typeof t)t=this._.focusList.length,this._.focusList.push(new s(this,e,t));else{this._.focusList.splice(t,0,new s(this,e,t));for(var i=t+1;i<this._.focusList.length;i++)this._.focusList[i].focusIndex++}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(e,t){this._.dialogDefinitions[e]&&"function"!=typeof t||(this._.dialogDefinitions[e]=t)},exists:function(e){return!!this._.dialogDefinitions[e]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(e,t,i){return e=e.config.removeDialogTabs,!(e&&e.match(RegExp("(?:^|;)"+t+":"+i+"(?:$|;)","i")))},okButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:e.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(e){e=e.data.dialog,e.fire("ok",{hide:!0}).hide!==!1&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend(function(i){return e(i,t)},{type:"button"},!0)},e}(),cancelButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:e.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(e){e=e.data.dialog,e.fire("cancel",{hide:!0}).hide!==!1&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend(function(i){return e(i,t)},{type:"button"},!0)},e}(),addUIElement:function(e,t){this._.uiElementBuilders[e]=t}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var g={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},v=function(e,t,i){for(var n,o=0;n=e[o];o++){if(n.id==t)return n;if(i&&n[i]&&(n=v(n[i],t,i)))return n}return null},b=function(e,t,i,n,o){if(i){for(var r,s=0;r=e[s];s++){if(r.id==i)return e.splice(s,0,t),t;if(n&&r[n]&&(r=b(r[n],t,i,n,!0)))return r}if(o)return null}return e.push(t),t},y=function(e,t,i){for(var n,o=0;n=e[o];o++){if(n.id==t)return e.splice(o,1);if(i&&n[i]&&(n=y(n[i],t,i)))return n}return null},w=function(e,t){this.dialog=e;for(var i,n=t.contents,o=0;i=n[o];o++)n[o]=i&&new l(e,i);CKEDITOR.tools.extend(this,t)};w.prototype={getContents:function(e){return v(this.contents,e)},getButton:function(e){return v(this.buttons,e)},addContents:function(e,t){return b(this.contents,e,t)},addButton:function(e,t){return b(this.buttons,e,t)},removeContents:function(e){y(this.contents,e)},removeButton:function(e){y(this.buttons,e)}},l.prototype={get:function(e){return v(this.elements,e,"children")},add:function(e,t){return b(this.elements,e,t,"children")},remove:function(e){y(this.elements,e,"children")}};var _,E,T={},C={},S=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,i=e.data.$.altKey,n=e.data.$.shiftKey,o=String.fromCharCode(e.data.$.keyCode);(t=C[(t?"CTRL+":"")+(i?"ALT+":"")+(n?"SHIFT+":"")+o])&&t.length&&(t=t[t.length-1],t.keydown&&t.keydown.call(t.uiElement,t.dialog,t.key),e.data.preventDefault())},D=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,i=e.data.$.altKey,n=e.data.$.shiftKey,o=String.fromCharCode(e.data.$.keyCode);(t=C[(t?"CTRL+":"")+(i?"ALT+":"")+(n?"SHIFT+":"")+o])&&t.length&&(t=t[t.length-1],t.keyup&&(t.keyup.call(t.uiElement,t.dialog,t.key),e.data.preventDefault()))},I=function(e,t,i,n,o){(C[i]||(C[i]=[])).push({uiElement:e,dialog:t,key:i,keyup:o||e.accessKeyUp,keydown:n||e.accessKeyDown})},k=function(e){for(var t in C){for(var i=C[t],n=i.length-1;n>=0;n--)(i[n].dialog==e||i[n].uiElement==e)&&i.splice(n,1);0===i.length&&delete C[t]}},O=function(e,t){e._.accessKeyMap[t]&&e.selectPage(e._.accessKeyMap[t])},R=function(){};!function(){CKEDITOR.ui.dialog={uiElement:function(e,t,i,n,o,r,s){if(!(arguments.length<4)){var a=(n.call?n(t):n)||"div",l=["<",a," "],c=(o&&o.call?o(t):o)||{},d=(r&&r.call?r(t):r)||{},u=(s&&s.call?s.call(this,e,t):s)||"",h=this.domId=d.id||CKEDITOR.tools.getNextId()+"_uiElement";t.requiredContent&&!e.getParentEditor().filter.check(t.requiredContent)&&(c.display="none",this.notAllowed=!0),d.id=h;var p={};t.type&&(p["cke_dialog_ui_"+t.type]=1),t.className&&(p[t.className]=1),t.disabled&&(p.cke_disabled=1);for(var f=d["class"]&&d["class"].split?d["class"].split(" "):[],h=0;h<f.length;h++)f[h]&&(p[f[h]]=1);f=[];for(h in p)f.push(h);d["class"]=f.join(" "),t.title&&(d.title=t.title),p=(t.style||"").split(";"),t.align&&(f=t.align,c["margin-left"]="left"==f?0:"auto",c["margin-right"]="right"==f?0:"auto");for(h in c)p.push(h+":"+c[h]);for(t.hidden&&p.push("display:none"),h=p.length-1;h>=0;h--)""===p[h]&&p.splice(h,1);p.length>0&&(d.style=(d.style?d.style+"; ":"")+p.join("; "));for(h in d)l.push(h+'="'+CKEDITOR.tools.htmlEncode(d[h])+'" ');l.push(">",u,"</",a,">"),i.push(l.join("")),(this._||(this._={})).dialog=e,"boolean"==typeof t.isChanged&&(this.isChanged=function(){return t.isChanged}),"function"==typeof t.isChanged&&(this.isChanged=t.isChanged),"function"==typeof t.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(e){return function(i){e.call(this,t.setValue.call(this,i))}})),"function"==typeof t.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(e){return function(){return t.getValue.call(this,e.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(t),this.accessKeyUp&&this.accessKeyDown&&t.accessKey&&I(this,e,"CTRL+"+t.accessKey);var m=this;e.on("load",function(){var t=m.getInputElement();if(t){var i=m.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?"cke_dialog_ui_focused":"";t.on("focus",function(){e._.tabBarMode=!1,e._.hasFocus=!0,m.fire("focus"),i&&this.addClass(i)}),t.on("blur",function(){m.fire("blur"),i&&this.removeClass(i)})}}),CKEDITOR.tools.extend(this,t),this.keyboardFocusable&&(this.tabIndex=t.tabIndex||0,this.focusIndex=e._.focusList.push(this)-1,this.on("focus",function(){e._.currentFocusIndex=m.focusIndex}))}},hbox:function(e,t,i,n,o){if(!(arguments.length<4)){this._||(this._={});var r,s=this._.children=t,a=o&&o.widths||null,l=o&&o.height||null,c={role:"presentation"};o&&o.align&&(c.align=o.align),CKEDITOR.ui.dialog.uiElement.call(this,e,o||{type:"hbox"},n,"table",{},c,function(){var e=['<tbody><tr class="cke_dialog_ui_hbox">'];for(r=0;r<i.length;r++){var t="cke_dialog_ui_hbox_child",n=[];0===r&&(t="cke_dialog_ui_hbox_first"),r==i.length-1&&(t="cke_dialog_ui_hbox_last"),e.push('<td class="',t,'" role="presentation" '),a?a[r]&&n.push("width:"+f(a[r])):n.push("width:"+Math.floor(100/i.length)+"%"),l&&n.push("height:"+f(l)),o&&void 0!==o.padding&&n.push("padding:"+f(o.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&s[r].align&&n.push("text-align:"+s[r].align),n.length>0&&e.push('style="'+n.join("; ")+'" '),e.push(">",i[r],"</td>")}return e.push("</tr></tbody>"),e.join("")})}},vbox:function(e,t,i,n,o){if(!(arguments.length<3)){this._||(this._={});var r=this._.children=t,s=o&&o.width||null,a=o&&o.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,e,o||{type:"vbox"},n,"div",null,{role:"presentation"},function(){var t=['<table role="presentation" cellspacing="0" border="0" '];t.push('style="'),o&&o.expand&&t.push("height:100%;"),t.push("width:"+f(s||"100%"),";"),CKEDITOR.env.webkit&&t.push("float:none;"),t.push('"'),t.push('align="',CKEDITOR.tools.htmlEncode(o&&o.align||("ltr"==e.getParentEditor().lang.dir?"left":"right")),'" '),t.push("><tbody>");for(var n=0;n<i.length;n++){var l=[];t.push('<tr><td role="presentation" '),s&&l.push("width:"+f(s||"100%")),a?l.push("height:"+f(a[n])):o&&o.expand&&l.push("height:"+Math.floor(100/i.length)+"%"),o&&void 0!==o.padding&&l.push("padding:"+f(o.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&r[n].align&&l.push("text-align:"+r[n].align),
l.length>0&&t.push('style="',l.join("; "),'" '),t.push(' class="cke_dialog_ui_vbox_child">',i[n],"</td></tr>")}return t.push("</tbody></table>"),t.join("")})}}}}(),CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(e,t){return this.getInputElement().setValue(e),!t&&this.fire("change",{value:e}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var e=this.getInputElement();(e=e.getParent())&&-1==e.$.className.search("cke_dialog_page_contents"););return e?(e=e.getAttribute("name"),this._.dialog._.currentTabId!=e&&this._.dialog.selectPage(e),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(e){var t,i,n=/^on([A-Z]\w+)/,o=function(e,t,i,n){t.on("load",function(){e.getInputElement().on(i,n,e)})};for(i in e)(t=i.match(n))&&(this.eventProcessors[i]?this.eventProcessors[i].call(this,this._.dialog,e[i]):o(this,this._.dialog,t[1].toLowerCase(),e[i]));return this},eventProcessors:{onLoad:function(e,t){e.on("load",t,this)},onShow:function(e,t){e.on("show",t,this)},onHide:function(e,t){e.on("hide",t,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var e=this.getElement();this.getInputElement().setAttribute("disabled","true"),e.addClass("cke_disabled")},enable:function(){var e=this.getElement();this.getInputElement().removeAttribute("disabled"),e.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()?!0:!1}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(e){return arguments.length<1?this._.children.concat():(e.splice||(e=[e]),e.length<2?this._.children[e[0]]:this._.children[e[0]]&&this._.children[e[0]].getChild?this._.children[e[0]].getChild(e.slice(1,e.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var e={build:function(e,t,i){for(var n,o=t.children,r=[],s=[],a=0;a<o.length&&(n=o[a]);a++){var l=[];r.push(l),s.push(CKEDITOR.dialog._.uiElementBuilders[n.type].build(e,n,l))}return new CKEDITOR.ui.dialog[t.type](e,s,r,i,t)}};CKEDITOR.dialog.addUIElement("hbox",e),CKEDITOR.dialog.addUIElement("vbox",e)}(),CKEDITOR.dialogCommand=function(e,t){this.dialogName=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.dialogCommand.prototype={exec:function(e){e.openDialog(this.dialogName)},canUndo:!1,editorFocus:1},function(){var e=/^([a]|[^a])+$/,t=/^\d*$/,i=/^\d*(?:\.\d+)?$/,n=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,o=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,r=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var e=arguments;return function(){var t,i,n=this&&this.getValue?this.getValue():e[0],o=CKEDITOR.VALIDATE_AND,r=[];for(i=0;i<e.length&&"function"==typeof e[i];i++)r.push(e[i]);i<e.length&&"string"==typeof e[i]&&(t=e[i],i++),i<e.length&&"number"==typeof e[i]&&(o=e[i]);var s=o==CKEDITOR.VALIDATE_AND?!0:!1;for(i=0;i<r.length;i++)s=o==CKEDITOR.VALIDATE_AND?s&&r[i](n):s||r[i](n);return s?!0:t}},regex:function(e,t){return function(i){return i=this&&this.getValue?this.getValue():i,e.test(i)?!0:t}},notEmpty:function(t){return this.regex(e,t)},integer:function(e){return this.regex(t,e)},number:function(e){return this.regex(i,e)},cssLength:function(e){return this.functions(function(e){return o.test(CKEDITOR.tools.trim(e))},e)},htmlLength:function(e){return this.functions(function(e){return n.test(CKEDITOR.tools.trim(e))},e)},inlineStyle:function(e){return this.functions(function(e){return r.test(CKEDITOR.tools.trim(e))},e)},equals:function(e,t){return this.functions(function(t){return t==e},t)},notEqual:function(e,t){return this.functions(function(t){return t!=e},t)}},CKEDITOR.on("instanceDestroyed",function(e){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var t;t=CKEDITOR.dialog._.currentTop;)t.hide();for(var i in T)T[i].remove();T={}}var n,e=e.editor._.storedDialogs;for(n in e)e[n].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(e,t){var i=null,n=CKEDITOR.dialog._.dialogDefinitions[e];if(null===CKEDITOR.dialog._.currentTop&&h(this),"function"==typeof n)i=this._.storedDialogs||(this._.storedDialogs={}),i=i[e]||(i[e]=new CKEDITOR.dialog(this,e)),t&&t.call(i,i),i.show();else{if("failed"==n)throw p(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+e+'" failed when loading definition.');"string"==typeof n&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(n),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[e]&&(CKEDITOR.dialog._.dialogDefinitions[e]="failed"),this.openDialog(e,t)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),i}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(e){e.on("doubleclick",function(t){t.data.dialog&&e.openDialog(t.data.dialog)},null,null,999)}}),function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(e){var t=this;e.addCommand("a11yHelp",{exec:function(){var i=e.langCode,i=t.availableLangs[i]?i:t.availableLangs[i.replace(/-.*/,"")]?i.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+i+".js"),function(){e.lang.a11yhelp=t.langEntries[i],e.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),e.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js"),e.on("ariaEditorHelpLabel",function(t){t.data.label=e.lang.common.editorHelp})}})}(),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(e){var t=e.addCommand("about",new CKEDITOR.dialogCommand("about"));t.modes={wysiwyg:1,source:1},t.canUndo=!1,t.readOnly=1,e.ui.addButton&&e.ui.addButton("About",{label:e.lang.about.title,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("basicstyles",{init:function(e){var t=0,i=function(i,o,r,s){if(s){var s=new CKEDITOR.style(s),a=n[r];a.unshift(s),e.attachStyleStateChange(s,function(t){!e.readOnly&&e.getCommand(r).setState(t)}),e.addCommand(r,new CKEDITOR.styleCommand(s,{contentForms:a})),e.ui.addButton&&e.ui.addButton(i,{label:o,command:r,toolbar:"basicstyles,"+(t+=10)})}},n={bold:["strong","b",["span",function(e){return e=e.styles["font-weight"],"bold"==e||+e>=700}]],italic:["em","i",["span",function(e){return"italic"==e.styles["font-style"]}]],underline:["u",["span",function(e){return"underline"==e.styles["text-decoration"]}]],strike:["s","strike",["span",function(e){return"line-through"==e.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},o=e.config,r=e.lang.basicstyles;i("Bold",r.bold,"bold",o.coreStyles_bold),i("Italic",r.italic,"italic",o.coreStyles_italic),i("Underline",r.underline,"underline",o.coreStyles_underline),i("Strike",r.strike,"strike",o.coreStyles_strike),i("Subscript",r.subscript,"subscript",o.coreStyles_subscript),i("Superscript",r.superscript,"superscript",o.coreStyles_superscript),e.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var e={exec:function(e){var t=e.getCommand("blockquote").state,i=e.getSelection(),n=i&&i.getRanges()[0];if(n){var o=i.createBookmarks();if(CKEDITOR.env.ie){var r,s=o[0].startNode,a=o[0].endNode;if(s&&"blockquote"==s.getParent().getName())for(r=s;r=r.getNext();)if(r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary()){s.move(r,!0);break}if(a&&"blockquote"==a.getParent().getName())for(r=a;r=r.getPrevious();)if(r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary()){a.move(r);break}}var l=n.createIterator();if(l.enlargeBr=e.config.enterMode!=CKEDITOR.ENTER_BR,t==CKEDITOR.TRISTATE_OFF){for(s=[];t=l.getNextParagraph();)s.push(t);for(s.length<1&&(t=e.document.createElement(e.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),a=o.shift(),n.insertNode(t),t.append(new CKEDITOR.dom.text("\ufeff",e.document)),n.moveToBookmark(a),n.selectNodeContents(t),n.collapse(!0),a=n.createBookmark(),s.push(t),o.unshift(a)),r=s[0].getParent(),n=[],a=0;a<s.length;a++)t=s[a],r=r.getCommonAncestor(t.getParent());for(t={table:1,tbody:1,tr:1,ol:1,ul:1};t[r.getName()];)r=r.getParent();for(a=null;s.length>0;){for(t=s.shift();!t.getParent().equals(r);)t=t.getParent();t.equals(a)||n.push(t),a=t}for(;n.length>0;)if(t=n.shift(),"blockquote"==t.getName()){for(a=new CKEDITOR.dom.documentFragment(e.document);t.getFirst();)a.append(t.getFirst().remove()),s.push(a.getLast());a.replace(t)}else s.push(t);for(n=e.document.createElement("blockquote"),n.insertBefore(s[0]);s.length>0;)t=s.shift(),n.append(t)}else if(t==CKEDITOR.TRISTATE_ON){for(a=[],r={};t=l.getNextParagraph();){for(s=n=null;t.getParent();){if("blockquote"==t.getParent().getName()){n=t.getParent(),s=t;break}t=t.getParent()}n&&s&&!s.getCustomData("blockquote_moveout")&&(a.push(s),CKEDITOR.dom.element.setMarker(r,s,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(r),t=[],s=[],r={};a.length>0;)l=a.shift(),n=l.getParent(),l.getPrevious()?l.getNext()?(l.breakParent(l.getParent()),s.push(l.getNext())):l.remove().insertAfter(n):l.remove().insertBefore(n),n.getCustomData("blockquote_processed")||(s.push(n),CKEDITOR.dom.element.setMarker(r,n,"blockquote_processed",!0)),t.push(l);for(CKEDITOR.dom.element.clearAllMarkers(r),a=s.length-1;a>=0;a--){n=s[a];e:{r=n;for(var l=0,c=r.getChildCount(),d=void 0;c>l&&(d=r.getChild(l));l++)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){r=!1;break e}r=!0}r&&n.remove()}if(e.config.enterMode==CKEDITOR.ENTER_BR)for(n=!0;t.length;)if(l=t.shift(),"div"==l.getName()){for(a=new CKEDITOR.dom.documentFragment(e.document),n&&l.getPrevious()&&!(l.getPrevious().type==CKEDITOR.NODE_ELEMENT&&l.getPrevious().isBlockBoundary())&&a.append(e.document.createElement("br")),n=l.getNext()&&!(l.getNext().type==CKEDITOR.NODE_ELEMENT&&l.getNext().isBlockBoundary());l.getFirst();)l.getFirst().remove().appendTo(a);n&&a.append(e.document.createElement("br")),a.replace(l),n=!1}}i.selectBookmarks(o),e.focus()}},refresh:function(e,t){this.setState(e.elementPath(t.block||t.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(t){t.blockless||(t.addCommand("blockquote",e),t.ui.addButton&&t.ui.addButton("Blockquote",{label:t.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),function(){function e(e){function t(){var t=e.editable();t.on(b,function(e){(!CKEDITOR.env.ie||!m)&&h(e)}),CKEDITOR.env.ie&&t.on("paste",function(t){g||(o(),t.data.preventDefault(),h(t),s("paste")||e.openDialog("paste"))}),CKEDITOR.env.ie&&(t.on("contextmenu",r,null,null,0),t.on("beforepaste",function(e){e.data&&!e.data.$.ctrlKey&&!e.data.$.shiftKey&&r()},null,null,0)),t.on("beforecut",function(){!m&&l(e)});var i;t.attachListener(CKEDITOR.env.ie?t:e.document.getDocumentElement(),"mouseup",function(){i=setTimeout(function(){p()},0)}),e.on("destroy",function(){clearTimeout(i)}),t.on("keyup",p)}function i(t){return{type:t,canUndo:"cut"==t,startDisabled:!0,exec:function(){"cut"==this.type&&l();var t,i=this.type;if(CKEDITOR.env.ie)t=s(i);else try{t=e.document.$.execCommand(i,!1,null)}catch(n){t=!1}return t||alert(e.lang.clipboard[this.type+"Error"]),t}}}function n(){return{canUndo:!1,async:!0,exec:function(e,t){var i=function(t,i){t&&a(t.type,t.dataValue,!!i),e.fire("afterCommandExec",{name:"paste",command:n,returnValue:!!t})},n=this;"string"==typeof t?i({type:"auto",dataValue:t},1):e.getClipboardData(i)}}}function o(){g=1,setTimeout(function(){g=0},100)}function r(){m=1,setTimeout(function(){m=0},10)}function s(t){var i=e.document,n=i.getBody(),o=!1,r=function(){o=!0};return n.on(t,r),(CKEDITOR.env.version>7?i.$:i.$.selection.createRange()).execCommand(t),n.removeListener(t,r),o}function a(t,i,n){return t={type:t},n&&e.fire("beforePaste",t)===!1||!i?!1:(t.dataValue=i,e.fire("paste",t))}function l(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var t,i,n,o=e.getSelection();o.getType()==CKEDITOR.SELECTION_ELEMENT&&(t=o.getSelectedElement())&&(i=o.getRanges()[0],n=e.document.createText(""),n.insertBefore(t),i.setStartBefore(n),i.setEndAfter(t),o.selectRanges([i]),setTimeout(function(){t.getParent()&&(n.remove(),o.selectElement(t))},0))}}function c(t,i){var n,o=e.document,r=e.editable(),s=function(e){e.cancel()};if(!o.getById("cke_pastebin")){var a=e.getSelection(),l=a.createBookmarks();CKEDITOR.env.ie&&a.root.fire("selectionchange");var c=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!r.is("body")||CKEDITOR.env.ie?"div":"body",o);c.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var d=0,o=o.getWindow();CKEDITOR.env.webkit?(r.append(c),c.addClass("cke_editable"),r.is("body")||(d="static"!=r.getComputedStyle("position")?r:CKEDITOR.dom.element.get(r.$.offsetParent),d=d.getDocumentPosition().y)):r.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(c),c.setStyles({position:"absolute",top:o.getScrollPosition().y-d+10+"px",width:"1px",height:Math.max(1,o.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&c.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(d=c.getParent().isReadOnly())?(c.setOpacity(0),c.setAttribute("contenteditable",!0)):c.setStyle("ltr"==e.config.contentsLangDirection?"left":"right","-1000px"),e.on("selectionChange",s,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(n=r.once("blur",s,null,null,-100)),d&&c.focus(),d=new CKEDITOR.dom.range(c),d.selectNodeContents(c);var u=d.select();CKEDITOR.env.ie&&(n=r.once("blur",function(){e.lockSelection(u)}));var h=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=h),n&&n.removeListener(),CKEDITOR.env.ie&&r.focus(),a.selectBookmarks(l),c.remove();var t;CKEDITOR.env.webkit&&(t=c.getFirst())&&t.is&&t.hasClass("Apple-style-span")&&(c=t),e.removeListener("selectionChange",s),i(c.getHtml())},0)}}function d(){if(CKEDITOR.env.ie){e.focus(),o();var t=e.focusManager;if(t.lock(),e.editable().fire(b)&&!s("paste"))return t.unlock(),!1;t.unlock()}else try{if(e.editable().fire(b)&&!e.document.$.execCommand("Paste",!1,null))throw 0}catch(i){return!1}return!0}function u(t){if("wysiwyg"==e.mode)switch(t.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:t=e.editable(),o(),!CKEDITOR.env.ie&&t.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:e.fire("saveSnapshot"),setTimeout(function(){e.fire("saveSnapshot")},50)}}function h(t){var i={type:"auto"},n=e.fire("beforePaste",i);c(t,function(e){e=e.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),n&&a(i.type,e,0,1)})}function p(){if("wysiwyg"==e.mode){var t=f("paste");e.getCommand("cut").setState(f("cut")),e.getCommand("copy").setState(f("copy")),e.getCommand("paste").setState(t),e.fire("pasteState",t)}}function f(t){if(v&&t in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==t)return CKEDITOR.TRISTATE_OFF;var t=e.getSelection(),i=t.getRanges();return t.getType()==CKEDITOR.SELECTION_NONE||1==i.length&&i[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var m=0,g=0,v=0,b=CKEDITOR.env.ie?"beforepaste":"paste";!function(){e.on("key",u),e.on("contentDom",t),e.on("selectionChange",function(e){v=e.data.selection.getRanges()[0].checkReadOnly(),p()}),e.contextMenu&&e.contextMenu.addListener(function(e,t){return v=t.getRanges()[0].checkReadOnly(),{cut:f("cut"),copy:f("copy"),paste:f("paste")}})}(),function(){function t(t,i,n,o,r){var s=e.lang.clipboard[i];e.addCommand(i,n),e.ui.addButton&&e.ui.addButton(t,{label:s,command:i,toolbar:"clipboard,"+o}),e.addMenuItems&&e.addMenuItem(i,{label:s,command:i,group:"clipboard",order:r})}t("Cut","cut",i("cut"),10,1),t("Copy","copy",i("copy"),20,4),t("Paste","paste",n(),30,8)}(),e.getClipboardData=function(t,i){function n(e){e.removeListener(),e.cancel(),i(e.data)}function o(e){e.removeListener(),e.cancel(),l=!0,i({type:a,dataValue:e.data})}function r(){this.customTitle=t&&t.title}var s=!1,a="auto",l=!1;i||(i=t,t=null),e.on("paste",n,null,null,0),e.on("beforePaste",function(e){e.removeListener(),s=!0,a=e.data.type},null,null,1e3),d()===!1&&(e.removeListener("paste",n),s&&e.fire("pasteDialog",r)?(e.on("pasteDialogCommit",o),e.on("dialogHide",function(e){e.removeListener(),e.data.removeListener("pasteDialogCommit",o),setTimeout(function(){l||i(null)},10)})):i(null))}}function t(e){if(CKEDITOR.env.webkit){if(!e.match(/^[^<]*$/g)&&!e.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!e.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}function i(e,t){function i(e){return CKEDITOR.tools.repeat("</p><p>",~~(e/2))+(e%2==1?"<br>":"")}return t=t.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>"),t=t.replace(/<\/?[A-Z]+>/g,function(e){return e.toLowerCase()}),t.match(/^[^<]$/)?t:(CKEDITOR.env.webkit&&t.indexOf("<div>")>-1&&(t=t.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),t.match(/<div>(<br>|)<\/div>/)&&(t="<p>"+t.replace(/(<div>(<br>|)<\/div>)+/g,function(e){return i(e.split("</div><div>").length+1)})+"</p>"),t=t.replace(/<\/div><div>/g,"<br>"),t=t.replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&e.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(t=t.replace(/^<br><br>$/,"<br>")),t.indexOf("<br><br>")>-1&&(t="<p>"+t.replace(/(<br>){2,}/g,function(e){return i(e.length/4)})+"</p>")),r(e,t))}function n(){var e=new CKEDITOR.htmlParser.filter,t={blockquote:1,dl:1,fieldset:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ol:1,p:1,table:1,ul:1},i=CKEDITOR.tools.extend({br:0},CKEDITOR.dtd.$inline),n={p:1,br:1,"cke:br":1},o=CKEDITOR.dtd,r=CKEDITOR.tools.extend({area:1,basefont:1,embed:1,iframe:1,map:1,object:1,param:1},CKEDITOR.dtd.$nonBodyContent,CKEDITOR.dtd.$cdata),s=function(e){delete e.name,e.add(new CKEDITOR.htmlParser.text(" "))},a=function(e){for(var t,i=e;(i=i.next)&&i.name&&i.name.match(/^h\d$/);)for(t=new CKEDITOR.htmlParser.element("cke:br"),t.isEmpty=!0,e.add(t);t=i.children.shift();)e.add(t)};return e.addRules({elements:{h1:a,h2:a,h3:a,h4:a,h5:a,h6:a,img:function(e){var e=CKEDITOR.tools.trim(e.attributes.alt||""),t=" ";return e&&!e.match(/(^http|\.(jpe?g|gif|png))/i)&&(t=" ["+e+"] "),new CKEDITOR.htmlParser.text(t)},td:s,th:s,$:function(e){var s,a=e.name;if(r[a])return!1;if(e.attributes={},"br"==a)return e;if(t[a])e.name="p";else if(i[a])delete e.name;else if(o[a]){if(s=new CKEDITOR.htmlParser.element("cke:br"),s.isEmpty=!0,CKEDITOR.dtd.$empty[a])return s;e.add(s,0),s=s.clone(),s.isEmpty=!0,e.add(s),delete e.name}return n[e.name]||delete e.name,e}}},{applyToAll:!0}),e}function o(e,t,i){var t=new CKEDITOR.htmlParser.fragment.fromHtml(t),n=new CKEDITOR.htmlParser.basicWriter;t.writeHtml(n,i);var t=n.getHtml(),t=t.replace(/\s*(<\/?[a-z:]+ ?\/?>)\s*/g,"$1").replace(/(<cke:br \/>){2,}/g,"<cke:br />").replace(/(<cke:br \/>)(<\/?p>|<br \/>)/g,"$2").replace(/(<\/?p>|<br \/>)(<cke:br \/>)/g,"$1").replace(/<(cke:)?br( \/)?>/g,"<br>").replace(/<p><\/p>/g,""),o=0,t=t.replace(/<\/?p>/g,function(e){if("<p>"==e){if(++o>1)return"</p><p>"}else if(--o>0)return"</p><p>";return e}).replace(/<p><\/p>/g,"");return r(e,t)}function r(e,t){return e.enterMode==CKEDITOR.ENTER_BR?t=t.replace(/(<\/p><p>)+/g,function(e){return CKEDITOR.tools.repeat("<br>",e.length/7*2)}).replace(/<\/?p>/g,""):e.enterMode==CKEDITOR.ENTER_DIV&&(t=t.replace(/<(\/)?p>/g,"<$1div>")),t}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(r){var s;e(r),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),r.on("paste",function(e){var t=e.data.dataValue,i=CKEDITOR.dtd.$block;if(t.indexOf("Apple-")>-1&&(t=t.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=e.data.type&&(t=t.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(e,t){return t.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),t.indexOf('<br class="Apple-interchange-newline">')>-1&&(e.data.startsWithEOL=1,e.data.preSniffing="html",t=t.replace(/<br class="Apple-interchange-newline">/,"")),t=t.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),t.match(/^<[^<]+cke_(editable|contents)/i)){var n,o,r=new CKEDITOR.dom.element("div");for(r.setHtml(t);1==r.getChildCount()&&(n=r.getFirst())&&n.type==CKEDITOR.NODE_ELEMENT&&(n.hasClass("cke_editable")||n.hasClass("cke_contents"));)r=o=n;o&&(t=o.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?t=t.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(t,n){return n.toLowerCase()in i?(e.data.preSniffing="html","<"+n):t}):CKEDITOR.env.webkit?t=t.replace(/<\/(\w+)><div><br><\/div>$/,function(t,n){return n in i?(e.data.endsWithEOL=1,"</"+n+">"):t}):CKEDITOR.env.gecko&&(t=t.replace(/(\s)<br>$/,"$1")),e.data.dataValue=t},null,null,3),r.on("paste",function(e){var a,e=e.data,l=e.type,c=e.dataValue,d=r.config.clipboard_defaultContentType||"html";a="html"==l||"html"==e.preSniffing?"html":t(c),"htmlifiedtext"==a?c=i(r.config,c):"text"==l&&"html"==a&&(c=o(r.config,c,s||(s=n(r)))),e.startsWithEOL&&(c='<br data-cke-eol="1">'+c),e.endsWithEOL&&(c+='<br data-cke-eol="1">'),"auto"==l&&(l="html"==a||"html"==d?"html":"text"),e.type=l,e.dataValue=c,delete e.preSniffing,delete e.startsWithEOL,delete e.endsWithEOL},null,null,6),r.on("paste",function(e){e=e.data,r.insertHtml(e.dataValue,e.type),setTimeout(function(){r.fire("afterPaste")},0)},null,null,1e3),r.on("pasteDialog",function(e){setTimeout(function(){r.openDialog("paste",e.data)},0)})}})}(),function(){CKEDITOR.plugins.add("panel",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(e,t){t&&CKEDITOR.tools.extend(this,t),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=e,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(e){return new CKEDITOR.ui.panel(e)}};var e=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),t=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),i=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(n,o){this.getHolderElement=function(){var e=this._.holder;if(!e){if(this.isFramed){var e=this.document.getById(this.id+"_frame"),t=e.getParent(),e=e.getFrameDocument();CKEDITOR.env.iOS&&t.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),t=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),e.write(i.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+t+");"},r))),e.getWindow().$.CKEDITOR=CKEDITOR,e.on("keydown",function(e){var t=e.data.getKeystroke(),i=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&this._.onKeyDown(t)===!1?e.data.preventDefault():(27==t||t==("rtl"==i?39:37))&&this.onEscape&&this.onEscape(t)===!1&&e.data.preventDefault()},this),e=e.getBody(),e.unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(t)}else e=this.document.getById(this.id);this._.holder=e}return e};var r={editorId:n.id,id:this.id,langCode:n.langCode,dir:n.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":n.config.baseFloatZIndex+1};if(this.isFramed){var s=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";r.frame=t.output({id:this.id+"_frame",src:s})}return s=e.output(r),o&&o.push(s),s},addBlock:function(e,t){return t=this._.blocks[e]=t instanceof CKEDITOR.ui.panel.block?t:new CKEDITOR.ui.panel.block(this.getHolderElement(),t),this._.currentBlock||this.showBlock(e),t},getBlock:function(e){return this._.blocks[e]},showBlock:function(e){var e=this._.blocks[e],t=this._.currentBlock,i=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return t&&t.hide(),this._.currentBlock=e,CKEDITOR.fire("ariaWidget",i),e._.focusIndex=-1,this._.onKeyDown=e.onKeyDown&&CKEDITOR.tools.bind(e.onKeyDown,e),e.show(),e},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(e,t){this.element=e.append(e.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}})),t&&CKEDITOR.tools.extend(this,t),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(e){-1!=e&&(e=this.element.getElementsByTag("a").getItem(this._.focusIndex=e),CKEDITOR.env.webkit&&e.getDocument().getWindow().focus(),e.focus(),this.onMark&&this.onMark(e))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){(!this.onHide||this.onHide.call(this)!==!0)&&this.element.setStyle("display","none")},onKeyDown:function(e,t){var i=this.keys[e];switch(i){case"next":for(var n,o=this._.focusIndex,i=this.element.getElementsByTag("a");n=i.getItem(++o);)if(n.getAttribute("_cke_focus")&&n.$.offsetWidth){this._.focusIndex=o,n.focus();break}return n||t?!1:(this._.focusIndex=-1,this.onKeyDown(e,1));case"prev":for(o=this._.focusIndex,i=this.element.getElementsByTag("a");o>0&&(n=i.getItem(--o));){if(n.getAttribute("_cke_focus")&&n.$.offsetWidth){this._.focusIndex=o,n.focus();break}n=null}return n||t?!1:(this._.focusIndex=i.count(),this.onKeyDown(e,1));case"click":case"mouseup":return o=this._.focusIndex,(n=o>=0&&this.element.getElementsByTag("a").getItem(o))&&(n.$[i]?n.$[i]():n.$["on"+i]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function e(e,i,n,o,r){var r=CKEDITOR.tools.genKey(i.getUniqueId(),n.getUniqueId(),e.lang.dir,e.uiColor||"",o.css||"",r||""),s=t[r];return s||(s=t[r]=new CKEDITOR.ui.panel(i,o),s.element=n.append(CKEDITOR.dom.element.createFromHtml(s.render(e),i)),s.element.setStyles({display:"none",position:"absolute"})),s}var t={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(t,i,n,o){function r(){c.hide()}n.forceIFrame=1,n.toolbarRelated&&t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(i=CKEDITOR.document.getById("cke_"+t.name));var s=i.getDocument(),o=e(t,s,i,n,o||0),a=o.element,l=a.getFirst(),c=this;a.disableContextMenu(),this.element=a,this._={editor:t,panel:o,parentElement:i,definition:n,document:s,iframe:l,children:[],dir:t.lang.dir},t.on("mode",r),t.on("resize",r),CKEDITOR.env.iOS||s.getWindow().on("resize",r)},proto:{addBlock:function(e,t){return this._.panel.addBlock(e,t)},addListBlock:function(e,t){return this._.panel.addListBlock(e,t)},getBlock:function(e){return this._.panel.getBlock(e)},showBlock:function(e,t,i,n,o,r){var s=this._.panel,a=s.showBlock(e);this.allowBlur(!1),e=this._.editor.editable(),this._.returnFocus=e.hasFocus?e:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var l=this.element,e=this._.iframe,e=CKEDITOR.env.ie?e:new CKEDITOR.dom.window(e.$.contentWindow),c=l.getDocument(),d=this._.parentElement.getPositionedAncestor(),u=t.getDocumentPosition(c),c=d?d.getDocumentPosition(c):{x:0,y:0},h="rtl"==this._.dir,p=u.x+(n||0)-c.x,f=u.y+(o||0)-c.y;!h||1!=i&&4!=i?h||2!=i&&3!=i||(p+=t.$.offsetWidth-1):p+=t.$.offsetWidth,(3==i||4==i)&&(f+=t.$.offsetHeight-1),this._.panel._.offsetParentId=t.getId(),l.setStyles({top:f+"px",left:0,display:""}),l.setOpacity(0),l.getFirst().removeStyle("width"),this._.editor.focusManager.add(e),this._.blurSet||(CKEDITOR.event.useCapture=!0,e.on("blur",function(e){function t(){delete this._.returnFocus,this.hide()}this.allowBlur()&&e.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(t,0,this)):t.call(this))},this),e.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(e.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),e.on("touchend",function(){this._.hideTimeout=0,this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),s.onEscape=CKEDITOR.tools.bind(function(e){return this.onEscape&&this.onEscape(e)===!1?!1:void 0},this),CKEDITOR.tools.setTimeout(function(){var e=CKEDITOR.tools.bind(function(){if(l.removeStyle("width"),a.autoSize){var e=a.element.getDocument(),e=(CKEDITOR.env.webkit?a.element:e.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&e>0&&(e+=(l.$.offsetWidth||0)-(l.$.clientWidth||0)+3),l.setStyle("width",e+10+"px"),e=a.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&e>0&&(e+=(l.$.offsetHeight||0)-(l.$.clientHeight||0)+3),l.setStyle("height",e+"px"),s._.currentBlock.element.setStyle("display","none").removeStyle("display")}else l.removeStyle("height");h&&(p-=l.$.offsetWidth),l.setStyle("left",p+"px");var t=s.element.getWindow(),e=l.$.getBoundingClientRect(),t=t.getViewPaneSize(),i=e.width||e.right-e.left,n=e.height||e.bottom-e.top,o=h?e.right:t.width-e.left,c=h?t.width-e.right:e.left;h?i>o&&(p=c>i?p+i:t.width>i?p-e.left:p-e.right+t.width):i>o&&(p=c>i?p-i:t.width>i?p-e.right+t.width:p-e.left),i=e.top,t.height-e.top<n&&(f=i>n?f-n:t.height>n?f-e.bottom+t.height:f-e.top),CKEDITOR.env.ie&&(t=e=new CKEDITOR.dom.element(l.$.offsetParent),"html"==t.getName()&&(t=t.getDocument().getBody()),"rtl"==t.getComputedStyle("direction")&&(p=CKEDITOR.env.ie8Compat?p-2*l.getDocument().getDocumentElement().$.scrollLeft:p-(e.$.scrollWidth-e.$.clientWidth)));var d,e=l.getFirst();(d=e.getCustomData("activePanel"))&&d.onHide&&d.onHide.call(this,1),e.setCustomData("activePanel",this),l.setStyles({top:f+"px",left:p+"px"}),l.setOpacity(1),r&&r()},this);s.isLoaded?e():s.onLoad=e,CKEDITOR.tools.setTimeout(function(){var e=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),a.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=e),this.allowBlur(!0),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},focus:function(){if(CKEDITOR.env.webkit){var e=CKEDITOR.document.getActive();e&&!e.equals(this._.iframe)&&e.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus();
},blur:function(){var e=this._.iframe.getFrameDocument().getActive();e&&e.is("a")&&(this._.lastFocused=e)},hide:function(e){!this.visible||this.onHide&&this.onHide.call(this)===!0||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(e=e&&this._.returnFocus)&&(CKEDITOR.env.webkit&&e.type&&e.getWindow().$.focus(),e.focus()),delete this._.lastFocused,this._.editor.fire("panelHide",this))},allowBlur:function(e){var t=this._.panel;return void 0!==e&&(t.allowBlur=e),t.allowBlur},showAsChild:function(e,t,i,n,o,r){(this._.activeChild!=e||e._.panel._.offsetParentId!=i.getId())&&(this.hideChild(),e.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=e,this._.focused=!1,e.showBlock(t,i,n,o,r),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){e.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(e){var t=this._.activeChild;t&&(delete t.onHide,delete this._.activeChild,t.hide(),e&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var e,i=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(e in t){var n=t[e];i?n.destroy():n.element.hide()}i&&(t={})})}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(e){for(var t=e.config.menu_groups.split(","),i=e._.menuGroups={},n=e._.menuItems={},o=0;o<t.length;o++)i[t[o]]=o+1;e.addMenuGroup=function(e,t){i[e]=t||100},e.addMenuItem=function(e,t){i[t.group]&&(n[e]=new CKEDITOR.menuItem(this,e,t))},e.addMenuItems=function(e){for(var t in e)this.addMenuItem(t,e[t])},e.getMenuItem=function(e){return n[e]},e.removeMenuItem=function(e){delete n[e]}}}),function(){function e(e){e.sort(function(e,t){return e.group<t.group?-1:e.group>t.group?1:e.order<t.order?-1:e.order>t.order?1:0})}var t='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1"_cke_focus=1 hidefocus="true" role="{role}" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked}';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;"');var t=t+(' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">'),i=CKEDITOR.addTemplate("menuItem",t+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{arrowHtml}</span></a></span>'),n=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(e,t){t=this._.definition=t||{},this.id=CKEDITOR.tools.getNextId(),this.editor=e,this.items=[],this._.listeners=[],this._.level=t.level||1;var i=CKEDITOR.tools.extend({},t.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),n=i.block.attributes=i.attributes||{};!n.role&&(n.role="menu"),this._.panelDefinition=i},_:{onShow:function(){var e=this.editor.getSelection(),t=e&&e.getStartElement(),i=this.editor.elementPath(),n=this._.listeners;this.removeAll();for(var o=0;o<n.length;o++){var r=n[o](t,e,i);if(r)for(var s in r){var a=this.editor.getMenuItem(s);!a||a.command&&!this.editor.getCommand(a.command).state||(a.state=r[s],this.add(a))}}},onClick:function(e){this.hide(),e.onClick?e.onClick():e.command&&this.editor.execCommand(e.command)},onEscape:function(e){var t=this.parent;return t?t._.panel.hideChild(1):27==e&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(e){var t=this._.subMenu,i=this.items[e];if(i=i.getItems&&i.getItems()){t?t.removeAll():(t=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),t.parent=this,t._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var n in i){var o=this.editor.getMenuItem(n);o&&(o.state=i[n],t.add(o))}var r=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+(""+e));setTimeout(function(){t.show(r,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(e){e.order||(e.order=this.items.length),this.items.push(e)},removeAll:function(){this.items=[]},show:function(t,i,n,o){if(this.parent||(this._.onShow(),this.items.length)){var i=i||("rtl"==this.editor.lang.dir?2:1),r=this.items,s=this.editor,a=this._.panel,l=this._.element;if(!a){a=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level),a.onEscape=CKEDITOR.tools.bind(function(e){return this._.onEscape(e)===!1?!1:void 0},this),a.onShow=function(){a._.panel.getHolderElement().getParent().addClass("cke cke_reset_all")},a.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),l=a.addBlock(this.id,this._.panelDefinition.block),l.autoSize=!0;var c=l.keys;c[40]="next",c[9]="next",c[38]="prev",c[CKEDITOR.SHIFT+9]="prev",c["rtl"==s.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",c[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(c[13]="mouseup"),l=this._.element=l.element,c=l.getDocument(),c.getBody().setStyle("overflow","hidden"),c.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(e){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,s.config.menu_subMenuDelay||400,this,[e])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(e){var t=this.items[e];t.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):t.getItems?this._.showSubMenu(e):this._.onClick(t)},this)}e(r);for(var c=s.elementPath(),c=['<div class="cke_menu'+(c&&c.direction()!=s.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],d=r.length,u=d&&r[0].group,h=0;d>h;h++){var p=r[h];u!=p.group&&(c.push('<div class="cke_menuseparator" role="separator"></div>'),u=p.group),p.render(this,h,c)}c.push("</div>"),l.setHtml(c.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(a,this.id,t,i,n,o):a.showBlock(this.id,t,i,n,o),s.fire("menuShow",[a])}},addListener:function(e){this._.listeners.push(e)},hide:function(e){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(e)}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(e,t,i){CKEDITOR.tools.extend(this,i,{order:0,className:"cke_menubutton__"+t}),this.group=e._.menuGroups[this.group],this.editor=e,this.name=t},proto:{render:function(e,t,o){var r=e.id+(""+t),s="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,a="",l=s==CKEDITOR.TRISTATE_ON?"on":s==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(a=' aria-checked="'+(s==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var c=this.getItems,d="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",u=this.name;this.icon&&!/\./.test(this.icon)&&(u=this.icon),e={id:r,name:this.name,iconName:u,label:this.label,cls:this.className||"",state:l,hasPopup:c?"true":"false",disabled:s==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:e._.itemOverFn,moveOutFn:e._.itemOutFn,clickFn:e._.itemClickFn,index:t,iconStyle:CKEDITOR.skin.getIconStyle(u,"rtl"==this.editor.lang.dir,u==this.icon?null:this.icon,this.iconOffset),arrowHtml:c?n.output({label:d}):"",role:this.role?this.role:"menuitem",ariaChecked:a},i.output(e,o)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(e){this.base.call(this,e,{panel:{className:"cke_menu_panel",attributes:{"aria-label":e.lang.contextmenu.options}}})},proto:{addTarget:function(e,t){if(e.on("contextmenu",function(e){var e=e.data,n=CKEDITOR.env.webkit?i:CKEDITOR.env.mac?e.$.metaKey:e.$.ctrlKey;if(!t||!n){if(e.preventDefault(),CKEDITOR.env.mac&&CKEDITOR.env.webkit){var n=this.editor,o=new CKEDITOR.dom.elementPath(e.getTarget(),n.editable()).contains(function(e){return e.hasAttribute("contenteditable")},!0);o&&"false"==o.getAttribute("contenteditable")&&n.getSelection().fake(o)}var o=e.getTarget().getDocument(),r=e.getTarget().getDocument().getDocumentElement(),n=!o.equals(CKEDITOR.document),o=o.getWindow().getScrollPosition(),s=n?e.$.clientX:e.$.pageX||o.x+e.$.clientX,a=n?e.$.clientY:e.$.pageY||o.y+e.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(r,null,s,a)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.webkit){var i,n=function(){i=0};e.on("keydown",function(e){i=CKEDITOR.env.mac?e.data.$.metaKey:e.data.$.ctrlKey}),e.on("keyup",n),e.on("contextmenu",n)}},open:function(e,t,i,n){this.editor.focus(),e=e||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(e,t,i,n)}}})},beforeInit:function(e){var t=e.contextMenu=new CKEDITOR.plugins.contextMenu(e);e.on("contentDom",function(){t.addTarget(e.editable(),e.config.browserContextMenuOnCtrl!==!1)}),e.addCommand("contextMenu",{exec:function(){e.contextMenu.open(e.document.getBody())}}),e.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),e.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){function e(e,n){function r(t){if(t=c.list[t],t.equals(e.editable())||"true"==t.getAttribute("contenteditable")){var i=e.createRange();i.selectNodeContents(t),i.select()}else e.getSelection().selectElement(t);e.focus()}function s(){a&&a.setHtml(i),delete c.list}var a,l=e.ui.spaceId("path"),c=e._.elementsPath,d=c.idBase;n.html=n.html+('<span id="'+l+'_label" class="cke_voice_label">'+e.lang.elementspath.eleLabel+'</span><span id="'+l+'" class="cke_path" role="group" aria-labelledby="'+l+'_label">'+i+"</span>"),e.on("uiReady",function(){var t=e.ui.space("path");t&&e.focusManager.add(t,1)}),c.onClick=r;var u=CKEDITOR.tools.addFunction(r),h=CKEDITOR.tools.addFunction(function(t,i){var n,o=c.idBase,i=new CKEDITOR.dom.event(i);switch(n="rtl"==e.lang.dir,i.getKeystroke()){case n?39:37:case 9:return(n=CKEDITOR.document.getById(o+(t+1)))||(n=CKEDITOR.document.getById(o+"0")),n.focus(),!1;case n?37:39:case CKEDITOR.SHIFT+9:return(n=CKEDITOR.document.getById(o+(t-1)))||(n=CKEDITOR.document.getById(o+(c.list.length-1))),n.focus(),!1;case 27:return e.focus(),!1;case 13:case 32:return r(t),!1}return!0});e.on("selectionChange",function(){for(var t,n=[],r=c.list=[],s=[],p=c.filters,f=!0,m=e.elementPath().elements,g=m.length;g--;){var v=m[g],b=0;t=v.data("cke-display-name")?v.data("cke-display-name"):v.data("cke-real-element-type")?v.data("cke-real-element-type"):v.getName(),f=v.hasAttribute("contenteditable")?"true"==v.getAttribute("contenteditable"):f,!f&&!v.hasAttribute("contenteditable")&&(b=1);for(var y=0;y<p.length;y++){var w=p[y](v,t);if(w===!1){b=1;break}t=w||t}b||(r.unshift(v),s.unshift(t))}for(r=r.length,p=0;r>p;p++)t=s[p],f=e.lang.elementspath.eleTitle.replace(/%1/,t),t=o.output({id:d+p,label:f,text:t,jsTitle:"javascript:void('"+t+"')",index:p,keyDownFn:h,clickFn:u}),n.unshift(t);a||(a=CKEDITOR.document.getById(l)),s=a,s.setHtml(n.join("")+i),e.fire("elementsPathUpdate",{space:s})}),e.on("readOnly",s),e.on("contentDomUnload",s),e.addCommand("elementsPathFocus",t),e.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var t;t={editorFocus:!1,readOnly:1,exec:function(e){(e=CKEDITOR.document.getById(e._.elementsPath.idBase+"0"))&&e.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}};var i='<span class="cke_path_empty">&nbsp;</span>',n="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(n+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(n+=' onblur="this.style.cssText = this.style.cssText;"');var o=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+n+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(t){t._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},t.on("uiSpace",function(i){"bottom"==i.data.space&&e(t,i.data)})}})}(),function(){function e(e,n){var o,r;n.on("refresh",function(e){var n,o=[t];for(n in e.data.states)o.push(e.data.states[n]);this.setState(CKEDITOR.tools.search(o,i)?i:t)},n,null,100),n.on("exec",function(t){o=e.getSelection(),r=o.createBookmarks(1),t.data||(t.data={}),t.data.done=!1},n,null,0),n.on("exec",function(){e.forceNextSelectionCheck(),o.selectBookmarks(r)},n,null,100)}var t=CKEDITOR.TRISTATE_DISABLED,i=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(t){var i=CKEDITOR.plugins.indent.genericDefinition;e(t,t.addCommand("indent",new i(!0))),e(t,t.addCommand("outdent",new i)),t.ui.addButton&&(t.ui.addButton("Indent",{label:t.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),t.ui.addButton("Outdent",{label:t.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),t.on("dirChanged",function(e){var i=t.createRange(),n=e.data.node;i.setStartBefore(n),i.setEndAfter(n);for(var o,r=new CKEDITOR.dom.walker(i);o=r.next();)if(o.type==CKEDITOR.NODE_ELEMENT)if(!o.equals(n)&&o.getDirection())i.setStartAfter(o),r=new CKEDITOR.dom.walker(i);else{var s=t.config.indentClasses;if(s)for(var a="ltr"==e.data.dir?["_rtl",""]:["","_rtl"],l=0;l<s.length;l++)o.hasClass(s[l]+a[0])&&(o.removeClass(s[l]+a[0]),o.addClass(s[l]+a[1]));s=o.getStyle("margin-right"),a=o.getStyle("margin-left"),s?o.setStyle("margin-left",s):o.removeStyle("margin-left"),a?o.setStyle("margin-right",a):o.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(e){this.isIndent=!!e,this.startDisabled=!this.isIndent},specificDefinition:function(e,t,i){this.name=t,this.editor=e,this.jobs={},this.enterBr=e.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!i,this.relatedGlobal=i?"indent":"outdent",this.indentKey=i?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(e,t){e.on("pluginsLoaded",function(){for(var e in t)(function(e,t){var i,n=e.getCommand(t.relatedGlobal);for(i in t.jobs)n.on("exec",function(n){n.data.done||(e.fire("lockSnapshot"),t.execJob(e,i)&&(n.data.done=!0),e.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(t.database))},this,null,i),n.on("refresh",function(n){n.data.states||(n.data.states={}),n.data.states[t.name+"@"+i]=t.refreshJob(e,i,n.data.path)},this,null,i);e.addFeature(t)})(this,t[e])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(e,i){var n=this.jobs[i];return n.state!=t?n.exec.call(this,e):void 0},refreshJob:function(e,i,n){return i=this.jobs[i],i.state=e.activeFilter.checkFeature(this)?i.refresh.call(this,e,n):t,i.state},getContext:function(e){return e.contains(this.context)}}}(),function(){function e(e){function n(t){for(var n=o.startContainer,l=o.endContainer;n&&!n.getParent().equals(t);)n=n.getParent();for(;l&&!l.getParent().equals(t);)l=l.getParent();if(!n||!l)return!1;for(var c=n,n=[],d=!1;!d;)c.equals(l)&&(d=!0),n.push(c),c=c.getNext();if(n.length<1)return!1;for(c=t.getParents(!0),l=0;l<c.length;l++)if(c[l].getName&&a[c[l].getName()]){t=c[l];break}for(var c=r.isIndent?1:-1,l=n[0],n=n[n.length-1],d=CKEDITOR.plugins.list.listToArray(t,s),u=d[n.getCustomData("listarray_index")].indent,l=l.getCustomData("listarray_index");l<=n.getCustomData("listarray_index");l++)if(d[l].indent=d[l].indent+c,c>0){var h=d[l].parent;d[l].parent=new CKEDITOR.dom.element(h.getName(),h.getDocument())}for(l=n.getCustomData("listarray_index")+1;l<d.length&&d[l].indent>u;l++)d[l].indent=d[l].indent+c;if(n=CKEDITOR.plugins.list.arrayToList(d,s,null,e.config.enterMode,t.getDirection()),!r.isIndent){var p;if((p=t.getParent())&&p.is("li"))for(var f,c=n.listNode.getChildren(),m=[],l=c.count()-1;l>=0;l--)(f=c.getItem(l))&&f.is&&f.is("li")&&m.push(f)}if(n&&n.listNode.replace(t),m&&m.length)for(l=0;l<m.length;l++){for(f=t=m[l];(f=f.getNext())&&f.is&&f.getName()in a;)CKEDITOR.env.needsNbspFiller&&!t.getFirst(i)&&t.append(o.document.createText(" ")),t.append(f);t.insertAfter(p)}return n&&e.fire("contentDomInvalidated"),!0}for(var o,r=this,s=this.database,a=this.context,l=e.getSelection(),l=(l&&l.getRanges()).createIterator();o=l.getNextRange();){for(var c=o.getCommonAncestor();c&&(c.type!=CKEDITOR.NODE_ELEMENT||!a[c.getName()]);){if(e.editable().equals(c)){c=!1;break}c=c.getParent()}if(c||(c=o.startPath().contains(a))&&o.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),!c){var d=o.getEnclosedNode();d&&d.type==CKEDITOR.NODE_ELEMENT&&d.getName()in a&&(o.setStartAt(d,CKEDITOR.POSITION_AFTER_START),o.setEndAt(d,CKEDITOR.POSITION_BEFORE_END),c=d)}if(c&&o.startContainer.type==CKEDITOR.NODE_ELEMENT&&o.startContainer.getName()in a&&(d=new CKEDITOR.dom.walker(o),d.evaluator=t,o.startContainer=d.next()),c&&o.endContainer.type==CKEDITOR.NODE_ELEMENT&&o.endContainer.getName()in a&&(d=new CKEDITOR.dom.walker(o),d.evaluator=t,o.endContainer=d.previous()),c)return n(c)}return 0}function t(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is("li")}function i(e){return n(e)&&o(e)}var n=CKEDITOR.dom.walker.whitespaces(!0),o=CKEDITOR.dom.walker.bookmark(!1,!0),r=CKEDITOR.TRISTATE_DISABLED,s=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(t){function i(t){n.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],t.on("key",function(e){if("wysiwyg"==t.mode&&e.data.keyCode==this.indentKey){var i=this.getContext(t.elementPath());!i||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,t.elementPath(),i)||(t.execCommand(this.relatedGlobal),e.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(e,t){var i=this.getContext(t),n=CKEDITOR.plugins.indentList.firstItemInPath(this.context,t,i);return i&&this.isIndent&&!n?s:r}:function(e,t){return!this.getContext(t)||this.isIndent?r:s},exec:CKEDITOR.tools.bind(e,this)}}var n=CKEDITOR.plugins.indent;n.registerCommands(t,{indentlist:new i(t,"indentlist",!0),outdentlist:new i(t,"outdentlist")}),CKEDITOR.tools.extend(i.prototype,n.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(e,i,n){var o=i.contains(t);return n||(n=i.contains(e)),n&&o&&o.equals(n.getFirst(t))}}(),function(){function e(e,t,i){function n(i){!(l=d[i?"getFirst":"getLast"]())||l.is&&l.isBlockBoundary()||!(c=t.root[i?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||c.is&&c.isBlockBoundary({br:1})||e.document.createElement("br")[i?"insertBefore":"insertAfter"](l)}for(var o=CKEDITOR.plugins.list.listToArray(t.root,i),r=[],s=0;s<t.contents.length;s++){var a=t.contents[s];(a=a.getAscendant("li",!0))&&!a.getCustomData("list_item_processed")&&(r.push(a),CKEDITOR.dom.element.setMarker(i,a,"list_item_processed",!0))}for(a=null,s=0;s<r.length;s++)a=r[s].getCustomData("listarray_index"),o[a].indent=-1;for(s=a+1;s<o.length;s++)if(o[s].indent>o[s-1].indent+1){for(r=o[s-1].indent+1-o[s].indent,a=o[s].indent;o[s]&&o[s].indent>=a;)o[s].indent=o[s].indent+r,s++;s--}var l,c,d=CKEDITOR.plugins.list.arrayToList(o,i,null,e.config.enterMode,t.root.getAttribute("dir")).listNode;n(!0),n(),d.replace(t.root),e.fire("contentDomInvalidated")}function t(e,t){this.name=e,this.context=this.type=t,this.allowedContent=t+" li",this.requiredContent=t}function i(e,t,i,n){for(var o,r;o=e[n?"getLast":"getFirst"](p);)(r=o.getDirection(1))!==t.getDirection(1)&&o.setAttribute("dir",r),o.remove(),i?o[n?"insertBefore":"insertAfter"](i):t.append(o,n)}function n(e){function t(t){var n=e[t?"getPrevious":"getNext"](d);n&&n.type==CKEDITOR.NODE_ELEMENT&&n.is(e.getName())&&(i(e,n,null,!t),e.remove(),e=n)}t(),t(1)}function o(e){return e.type==CKEDITOR.NODE_ELEMENT&&(e.getName()in CKEDITOR.dtd.$block||e.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[e.getName()]["#"]}function r(e,t,o){e.fire("saveSnapshot"),o.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var r=o.extractContents();t.trim(!1,!0);var a=t.createBookmark(),l=new CKEDITOR.dom.elementPath(t.startContainer),c=l.block,l=l.lastElement.getAscendant("li",1)||c,h=new CKEDITOR.dom.elementPath(o.startContainer),p=h.contains(CKEDITOR.dtd.$listItem),h=h.contains(CKEDITOR.dtd.$list);for(c?(c=c.getBogus())&&c.remove():h&&(c=h.getPrevious(d))&&u(c)&&c.remove(),(c=r.getLast())&&c.type==CKEDITOR.NODE_ELEMENT&&c.is("br")&&c.remove(),(c=t.startContainer.getChild(t.startOffset))?r.insertBefore(c):t.startContainer.append(r),p&&(r=s(p))&&(l.contains(p)?(i(r,p.getParent(),p),r.remove()):l.append(r));o.checkStartOfBlock()&&o.checkEndOfBlock()&&(h=o.startPath(),r=h.block,r);)r.is("li")&&(l=r.getParent(),r.equals(l.getLast(d))&&r.equals(l.getFirst(d))&&(r=l)),o.moveToPosition(r,CKEDITOR.POSITION_BEFORE_START),r.remove();o=o.clone(),r=e.editable(),o.setEndAt(r,CKEDITOR.POSITION_BEFORE_END),o=new CKEDITOR.dom.walker(o),o.evaluator=function(e){return d(e)&&!u(e)},(o=o.next())&&o.type==CKEDITOR.NODE_ELEMENT&&o.getName()in CKEDITOR.dtd.$list&&n(o),t.moveToBookmark(a),t.select(),e.fire("saveSnapshot")}function s(e){return(e=e.getLast(d))&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in a?e:null}var a={ol:1,ul:1},l=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(),d=function(e){return!(l(e)||c(e))},u=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(e,t,i,n,o){if(!a[e.getName()])return[];n||(n=0),i||(i=[]);for(var r=0,s=e.getChildCount();s>r;r++){var l=e.getChild(r);if(l.type==CKEDITOR.NODE_ELEMENT&&l.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(l,t,i,n+1),"li"==l.$.nodeName.toLowerCase()){var c={parent:e,indent:n,element:l,contents:[]};o?c.grandparent=o:(c.grandparent=e.getParent(),c.grandparent&&"li"==c.grandparent.$.nodeName.toLowerCase()&&(c.grandparent=c.grandparent.getParent())),t&&CKEDITOR.dom.element.setMarker(t,l,"listarray_index",i.length),i.push(c);for(var d,u=0,h=l.getChildCount();h>u;u++)d=l.getChild(u),d.type==CKEDITOR.NODE_ELEMENT&&a[d.getName()]?CKEDITOR.plugins.list.listToArray(d,t,i,n+1,c.grandparent):c.contents.push(d)}}return i},arrayToList:function(e,t,i,n,o){if(i||(i=0),!e||e.length<i+1)return null;for(var r,s,l,u=e[i].parent.getDocument(),h=new CKEDITOR.dom.documentFragment(u),p=null,f=i,m=Math.max(e[i].indent,0),g=null,v=n==CKEDITOR.ENTER_P?"p":"div";;){var b=e[f];if(r=b.grandparent,s=b.element.getDirection(1),b.indent==m){for(p&&e[f].parent.getName()==p.getName()||(p=e[f].parent.clone(!1,1),o&&p.setAttribute("dir",o),h.append(p)),g=p.append(b.element.clone(0,1)),s!=p.getDirection(1)&&g.setAttribute("dir",s),r=0;r<b.contents.length;r++)g.append(b.contents[r].clone(1,1));f++}else if(b.indent==Math.max(m,0)+1)b=e[f-1].element.getDirection(1),f=CKEDITOR.plugins.list.arrayToList(e,null,f,n,b!=s?s:null),!g.getChildCount()&&CKEDITOR.env.needsNbspFiller&&u.$.documentMode<=7&&g.append(u.createText(" ")),g.append(f.listNode),f=f.nextIndex;else{if(-1!=b.indent||i||!r)return null;a[r.getName()]?(g=b.element.clone(!1,!0),s!=r.getDirection(1)&&g.setAttribute("dir",s)):g=new CKEDITOR.dom.documentFragment(u);var y,w,p=r.getDirection(1)!=s,_=b.element,E=_.getAttribute("class"),T=_.getAttribute("style"),C=g.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(n!=CKEDITOR.ENTER_BR||p||T||E),S=b.contents.length;for(r=0;S>r;r++)if(y=b.contents[r],c(y)&&S>1)C?w=y.clone(1,1):g.append(y.clone(1,1));else if(y.type==CKEDITOR.NODE_ELEMENT&&y.isBlockBoundary()){p&&!y.getDirection()&&y.setAttribute("dir",s),l=y;var D=_.getAttribute("style");D&&l.setAttribute("style",D.replace(/([^;])$/,"$1;")+(l.getAttribute("style")||"")),E&&y.addClass(E),l=null,w&&(g.append(w),w=null),g.append(y.clone(1,1))}else C?(l||(l=u.createElement(v),g.append(l),p&&l.setAttribute("dir",s)),T&&l.setAttribute("style",T),E&&l.setAttribute("class",E),w&&(l.append(w),w=null),l.append(y.clone(1,1))):g.append(y.clone(1,1));w&&((l||g).append(w),w=null),g.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&f!=e.length-1&&(CKEDITOR.env.needsBrFiller&&(s=g.getLast())&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("br")&&s.remove(),s=g.getLast(d),(!s||!(s.type==CKEDITOR.NODE_ELEMENT&&s.is(CKEDITOR.dtd.$block)))&&g.append(u.createElement("br"))),s=g.$.nodeName.toLowerCase(),("div"==s||"p"==s)&&g.appendBogus(),h.append(g),p=null,f++}if(l=null,e.length<=f||Math.max(e[f].indent,0)<m)break}if(t)for(e=h.getFirst();e;){if(e.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(t,e),e.getName()in CKEDITOR.dtd.$listItem&&(i=e,u=o=n=void 0,n=i.getDirection()))){for(o=i.getParent();o&&!(u=o.getDirection());)o=o.getParent();n==u&&i.removeAttribute("dir")}e=e.getNextSourceNode()}return{listNode:h,nextIndex:f}}};var h=/^h[1-6]$/,p=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);t.prototype={exec:function(t){this.refresh(t,t.elementPath());var i=t.config,o=t.getSelection(),r=o&&o.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var s=t.editable();if(s.getFirst(d)){var l=1==r.length&&r[0];(i=l&&l.getEnclosedNode())&&i.is&&this.type==i.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else i.enterMode==CKEDITOR.ENTER_BR?s.appendBogus():r[0].fixBlock(1,i.enterMode==CKEDITOR.ENTER_P?"p":"div"),o.selectRanges(r)}for(var i=o.createBookmarks(!0),s=[],c={},r=r.createIterator(),u=0;(l=r.getNextRange())&&++u;){var p=l.getBoundaryNodes(),f=p.startNode,m=p.endNode;for(f.type==CKEDITOR.NODE_ELEMENT&&"td"==f.getName()&&l.setStartAt(p.startNode,CKEDITOR.POSITION_AFTER_START),m.type==CKEDITOR.NODE_ELEMENT&&"td"==m.getName()&&l.setEndAt(p.endNode,CKEDITOR.POSITION_BEFORE_END),l=l.createIterator(),l.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;p=l.getNextParagraph();)if(!p.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(c,p,"list_block",1);for(var g,v=t.elementPath(p),f=v.elements,m=0,v=v.blockLimit,b=f.length-1;b>=0&&(g=f[b]);b--)if(a[g.getName()]&&v.contains(g)){v.removeCustomData("list_group_object_"+u),(f=g.getCustomData("list_group_object"))?f.contents.push(p):(f={root:g,contents:[p]},s.push(f),CKEDITOR.dom.element.setMarker(c,g,"list_group_object",f)),m=1;break}m||(m=v,m.getCustomData("list_group_object_"+u)?m.getCustomData("list_group_object_"+u).contents.push(p):(f={root:m,contents:[p]},CKEDITOR.dom.element.setMarker(c,m,"list_group_object_"+u,f),s.push(f)))}}for(g=[];s.length>0;)if(f=s.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(a[f.root.getName()]){for(r=t,u=f,f=c,l=g,m=CKEDITOR.plugins.list.listToArray(u.root,f),v=[],p=0;p<u.contents.length;p++)b=u.contents[p],(b=b.getAscendant("li",!0))&&!b.getCustomData("list_item_processed")&&(v.push(b),CKEDITOR.dom.element.setMarker(f,b,"list_item_processed",!0));for(var b=u.root.getDocument(),y=void 0,w=void 0,p=0;p<v.length;p++){var _=v[p].getCustomData("listarray_index"),y=m[_].parent;y.is(this.type)||(w=b.createElement(this.type),y.copyAttributes(w,{start:1,type:1}),w.removeStyle("list-style-type"),m[_].parent=w)}for(f=CKEDITOR.plugins.list.arrayToList(m,f,null,r.config.enterMode),m=void 0,v=f.listNode.getChildCount(),p=0;v>p&&(m=f.listNode.getChild(p));p++)m.getName()==this.type&&l.push(m);f.listNode.replace(u.root),r.fire("contentDomInvalidated")}else{for(m=t,p=f,l=g,v=p.contents,r=p.root.getDocument(),u=[],1==v.length&&v[0].equals(p.root)&&(f=r.createElement("div"),v[0].moveChildren&&v[0].moveChildren(f),v[0].append(f),v[0]=f),p=p.contents[0].getParent(),b=0;b<v.length;b++)p=p.getCommonAncestor(v[b].getParent());for(y=m.config.useComputedState,m=f=void 0,y=void 0===y||y,b=0;b<v.length;b++)for(w=v[b];_=w.getParent();){if(_.equals(p)){u.push(w),!m&&w.getDirection()&&(m=1),w=w.getDirection(y),null!==f&&(f=f&&f!=w?null:w);break}w=_}if(!(u.length<1)){for(v=u[u.length-1].getNext(),b=r.createElement(this.type),l.push(b),y=l=void 0;u.length;)l=u.shift(),y=r.createElement("li"),l.is("pre")||h.test(l.getName())||"false"==l.getAttribute("contenteditable")?l.appendTo(y):(l.copyAttributes(y),f&&l.getDirection()&&(y.removeStyle("direction"),y.removeAttribute("dir")),l.moveChildren(y),l.remove()),y.appendTo(b);f&&m&&b.setAttribute("dir",f),v?b.insertBefore(v):b.appendTo(p)}}else this.state==CKEDITOR.TRISTATE_ON&&a[f.root.getName()]&&e.call(this,t,f,c);for(b=0;b<g.length;b++)n(g[b]);CKEDITOR.dom.element.clearAllMarkers(c),o.selectBookmarks(i),t.focus()},refresh:function(e,t){var i=t.contains(a,1),n=t.blockLimit||t.root;i&&n.contains(i)?this.setState(i.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(e){e.blockless||(e.addCommand("numberedlist",new t("numberedlist","ol")),e.addCommand("bulletedlist",new t("bulletedlist","ul")),e.ui.addButton&&(e.ui.addButton("NumberedList",{label:e.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),e.ui.addButton("BulletedList",{label:e.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),e.on("key",function(t){var i,n=t.data.domEvent.getKey();if("wysiwyg"==e.mode&&n in{8:1,46:1}){var l=e.getSelection().getRanges()[0],c=l&&l.startPath();if(l&&l.collapsed){var h=8==n,p=e.editable(),f=new CKEDITOR.dom.walker(l.clone());if(f.evaluator=function(e){return d(e)&&!u(e)},f.guard=function(e,t){return!(t&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("table"))},n=l.clone(),h){var m;(m=c.contains(a))&&l.checkBoundaryOfElement(m,CKEDITOR.START)&&(m=m.getParent())&&m.is("li")&&(m=s(m))?(i=m,m=m.getPrevious(d),n.moveToPosition(m&&u(m)?m:i,CKEDITOR.POSITION_BEFORE_START)):(f.range.setStartAt(p,CKEDITOR.POSITION_AFTER_START),f.range.setEnd(l.startContainer,l.startOffset),(m=f.previous())&&m.type==CKEDITOR.NODE_ELEMENT&&(m.getName()in a||m.is("li"))&&(m.is("li")||(f.range.selectNodeContents(m),f.reset(),f.evaluator=o,m=f.previous()),i=m,n.moveToElementEditEnd(i),n.moveToPosition(n.endPath().block,CKEDITOR.POSITION_BEFORE_END))),i?(r(e,n,l),t.cancel()):(n=c.contains(a))&&l.checkBoundaryOfElement(n,CKEDITOR.START)&&(i=n.getFirst(d),l.checkBoundaryOfElement(i,CKEDITOR.START)&&(m=n.getPrevious(d),s(i)?m&&(l.moveToElementEditEnd(m),l.select()):e.execCommand("outdent"),t.cancel()))}else(i=c.contains("li"))?(f.range.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),p=(c=i.getLast(d))&&o(c)?c:i,i=0,(m=f.next())&&m.type==CKEDITOR.NODE_ELEMENT&&m.getName()in a&&m.equals(c)?(i=1,m=f.next()):l.checkBoundaryOfElement(p,CKEDITOR.END)&&(i=2),i&&m&&(l=l.clone(),l.moveToElementEditStart(m),2==i&&(n.moveToPosition(n.endPath().block,CKEDITOR.POSITION_BEFORE_END),l.endPath().block&&l.moveToPosition(l.endPath().block,CKEDITOR.POSITION_AFTER_START)),r(e,n,l),t.cancel())):(f.range.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),(m=f.next())&&m.type==CKEDITOR.NODE_ELEMENT&&m.is(a)&&(m=m.getFirst(d),c.block&&l.checkStartOfBlock()&&l.checkEndOfBlock()?(c.block.remove(),l.moveToElementEditStart(m),l.select()):s(m)?(l.moveToElementEditStart(m),l.select()):(l=l.clone(),l.moveToElementEditStart(m),r(e,n,l)),t.cancel()));setTimeout(function(){e.selectionChange(1)})}}}))}})}(),function(){function e(e,t,i){i=e.config.forceEnterMode||i,"wysiwyg"==e.mode&&(t||(t=e.activeEnterMode),e.elementPath().isContextFor("p")||(t=CKEDITOR.ENTER_BR,i=1),e.fire("saveSnapshot"),t==CKEDITOR.ENTER_BR?s(e,t,null,i):a(e,t,null,i),e.fire("saveSnapshot"))}function t(e){for(var e=e.getSelection().getRanges(!0),t=e.length-1;t>0;t--)e[t].deleteContents();return e[0]}function i(e){var t=e.startContainer.getAscendant(function(e){
return e.type==CKEDITOR.NODE_ELEMENT&&"true"==e.getAttribute("contenteditable")},!0);return e.root.equals(t)?e:(t=new CKEDITOR.dom.range(t),t.moveToRange(e),t)}CKEDITOR.plugins.add("enterkey",{init:function(t){t.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t)}}),t.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t,t.activeShiftEnterMode,1)}}),t.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var n=CKEDITOR.dom.walker.whitespaces(),o=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(e,r,a,c){if(a=a||t(e)){var d,a=i(a),u=a.document,h=a.checkStartOfBlock(),p=a.checkEndOfBlock(),f=e.elementPath(a.startContainer),m=f.block,g=r==CKEDITOR.ENTER_DIV?"div":"p";if(h&&p){if(m&&(m.is("li")||m.getParent().is("li"))){m.is("li")||(m=m.getParent()),a=m.getParent(),d=a.getParent();var c=!m.hasPrevious(),v=!m.hasNext(),g=e.getSelection(),b=g.createBookmarks(),h=m.getDirection(1),p=m.getAttribute("class"),y=m.getAttribute("style"),w=d.getDirection(1)!=h,e=e.enterMode!=CKEDITOR.ENTER_BR||w||y||p;if(d.is("li"))c||v?(c&&v&&a.remove(),m[v?"insertAfter":"insertBefore"](d)):m.breakParent(d);else{if(e)f.block.is("li")?(d=u.createElement(r==CKEDITOR.ENTER_P?"p":"div"),w&&d.setAttribute("dir",h),y&&d.setAttribute("style",y),p&&d.setAttribute("class",p),m.moveChildren(d)):d=f.block,c||v?d[c?"insertBefore":"insertAfter"](a):(m.breakParent(a),d.insertAfter(a));else if(m.appendBogus(!0),c||v)for(;u=m[c?"getFirst":"getLast"]();)u[c?"insertBefore":"insertAfter"](a);else for(m.breakParent(a);u=m.getLast();)u.insertAfter(a);m.remove()}return void g.selectBookmarks(b)}if(m&&m.getParent().is("blockquote"))return m.breakParent(m.getParent()),m.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||m.getPrevious().remove(),m.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||m.getNext().remove(),a.moveToElementEditStart(m),void a.select()}else if(m&&m.is("pre")&&!p)return void s(e,r,a,c);if(h=a.splitBlock(g)){if(r=h.previousBlock,m=h.nextBlock,f=h.wasStartOfBlock,e=h.wasEndOfBlock,m?(b=m.getParent(),b.is("li")&&(m.breakParent(b),m.move(m.getNext(),1))):r&&(b=r.getParent())&&b.is("li")&&(r.breakParent(b),b=r.getNext(),a.moveToElementEditStart(b),r.move(r.getPrevious())),f||e){if(r?(r.is("li")||!l.test(r.getName())&&!r.is("pre"))&&(d=r.clone()):m&&(d=m.clone()),d?c&&!d.is("li")&&d.renameNode(g):b&&b.is("li")?d=b:(d=u.createElement(g),r&&(v=r.getDirection())&&d.setAttribute("dir",v)),u=h.elementPath)for(c=0,g=u.elements.length;g>c&&(b=u.elements[c],!b.equals(u.block)&&!b.equals(u.blockLimit));c++)CKEDITOR.dtd.$removeEmpty[b.getName()]&&(b=b.clone(),d.moveChildren(b),d.append(b));d.appendBogus(),d.getParent()||a.insertNode(d),d.is("li")&&d.removeAttribute("value"),!CKEDITOR.env.ie||!f||e&&r.getChildCount()||(a.moveToElementEditStart(e?r:d),a.select()),a.moveToElementEditStart(f&&!e?m:d)}else m.is("li")&&(d=a.clone(),d.selectNodeContents(m),d=new CKEDITOR.dom.walker(d),d.evaluator=function(e){return!(o(e)||n(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$inline&&!(e.getName()in CKEDITOR.dtd.$empty))},(b=d.next())&&b.type==CKEDITOR.NODE_ELEMENT&&b.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?u.createElement("br"):u.createText(" ")).insertBefore(b)),m&&a.moveToElementEditStart(m);a.select(),a.scrollIntoView()}}},enterBr:function(e,i,n,o){if(n=n||t(e)){var r=n.document,s=n.checkEndOfBlock(),c=new CKEDITOR.dom.elementPath(e.getSelection().getStartElement()),d=c.block,u=d&&c.block.getName();o||"li"!=u?(!o&&s&&l.test(u)?(s=d.getDirection())?(r=r.createElement("div"),r.setAttribute("dir",s),r.insertAfter(d),n.setStart(r,0)):(r.createElement("br").insertAfter(d),CKEDITOR.env.gecko&&r.createText("").insertAfter(d),n.setStartAt(d.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(e="pre"==u&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?r.createText("\r"):r.createElement("br"),n.deleteContents(),n.insertNode(e),CKEDITOR.env.needsBrFiller?(r.createText("\ufeff").insertAfter(e),s&&(d||c.blockLimit).appendBogus(),e.getNext().$.nodeValue="",n.setStartAt(e.getNext(),CKEDITOR.POSITION_AFTER_START)):n.setStartAt(e,CKEDITOR.POSITION_AFTER_END)),n.collapse(!0),n.select(),n.scrollIntoView()):a(e,i,n,o)}}};var r=CKEDITOR.plugins.enterkey,s=r.enterBr,a=r.enterBlock,l=/^h[1-6]$/}(),function(){function e(e,t){var i={},n=[],o={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},e=e.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(e,r){var s=t?"&"+r+";":o[r];return i[s]=t?o[r]:"&"+r+";",n.push(s),""});if(!t&&e){var r,e=e.split(","),s=document.createElement("div");for(s.innerHTML="&"+e.join(";&")+";",r=s.innerHTML,s=null,s=0;s<r.length;s++){var a=r.charAt(s);i[a]="&"+e[s]+";",n.push(a)}}return i.regex=n.join(t?"|":""),i}CKEDITOR.plugins.add("entities",{afterInit:function(t){function i(e){return l[e]}function n(e){return"force"!=o.entities_processNumerical&&s[e]?s[e]:"&#"+e.charCodeAt(0)+";"}var o=t.config;if(t=(t=t.dataProcessor)&&t.htmlFilter){var r=[];o.basicEntities!==!1&&r.push("nbsp,gt,lt,amp"),o.entities&&(r.length&&r.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),o.entities_latin&&r.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),o.entities_greek&&r.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),o.entities_additional&&r.push(o.entities_additional));var s=e(r.join(",")),a=s.regex?"["+s.regex+"]":"a^";delete s.regex,o.entities&&o.entities_processNumerical&&(a="[^ -~]|"+a);var a=RegExp(a,"g"),l=e("nbsp,gt,lt,amp,shy",!0),c=RegExp(l.regex,"g");t.addRules({text:function(e){return e.replace(c,i).replace(a,n)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,t,i,n){t=t||"80%",i=i||"70%","string"==typeof t&&t.length>1&&"%"==t.substr(t.length-1,1)&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10)),"string"==typeof i&&i.length>1&&"%"==i.substr(i.length-1,1)&&(i=parseInt(window.screen.height*parseInt(i,10)/100,10)),640>t&&(t=640),420>i&&(i=420);var o=parseInt((window.screen.height-i)/2,10),r=parseInt((window.screen.width-t)/2,10),n=(n||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+t+",height="+i+",top="+o+",left="+r,s=window.open("",null,n,!0);if(!s)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(s.moveTo(r,o),s.resizeTo(t,i)),s.focus(),s.location.href=e}catch(a){window.open(e,null,n,!0)}return!0}}),function(){function e(e,t){var i=[];if(!t)return e;for(var n in t)i.push(n+"="+encodeURIComponent(t[n]));return e+(-1!=e.indexOf("?")?"&":"?")+i.join("&")}function t(e){return e+="",e.charAt(0).toUpperCase()+e.substr(1)}function i(){var i=this.getDialog(),n=i.getParentEditor();n._.filebrowserSe=this;var o=n.config["filebrowser"+t(i.getName())+"WindowWidth"]||n.config.filebrowserWindowWidth||"80%",i=n.config["filebrowser"+t(i.getName())+"WindowHeight"]||n.config.filebrowserWindowHeight||"70%",r=this.filebrowser.params||{};r.CKEditor=n.name,r.CKEditorFuncNum=n._.filebrowserFn,r.langCode||(r.langCode=n.langCode),r=e(this.filebrowser.url,r),n.popup(r,o,i,n.config.filebrowserWindowFeatures||n.config.fileBrowserWindowFeatures)}function n(){var e=this.getDialog();return e.getParentEditor()._.filebrowserSe=this,e.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value&&e.getContentElement(this["for"][0],this["for"][1]).getAction()?!0:!1}function o(t,i,n){var o=n.params||{};o.CKEditor=t.name,o.CKEditorFuncNum=t._.filebrowserFn,o.langCode||(o.langCode=t.langCode),i.action=e(n.url,o),i.filebrowser=n}function r(e,s,a,l){if(l&&l.length)for(var c,d=l.length;d--;)if(c=l[d],("hbox"==c.type||"vbox"==c.type||"fieldset"==c.type)&&r(e,s,a,c.children),c.filebrowser)if("string"==typeof c.filebrowser&&(c.filebrowser={action:"fileButton"==c.type?"QuickUpload":"Browse",target:c.filebrowser}),"Browse"==c.filebrowser.action){var u=c.filebrowser.url;void 0===u&&(u=e.config["filebrowser"+t(s)+"BrowseUrl"],void 0===u&&(u=e.config.filebrowserBrowseUrl)),u&&(c.onClick=i,c.filebrowser.url=u,c.hidden=!1)}else if("QuickUpload"==c.filebrowser.action&&c["for"]&&(u=c.filebrowser.url,void 0===u&&(u=e.config["filebrowser"+t(s)+"UploadUrl"],void 0===u&&(u=e.config.filebrowserUploadUrl)),u)){var h=c.onClick;c.onClick=function(e){var t=e.sender;return h&&h.call(t,e)===!1?!1:n.call(t,e)},c.filebrowser.url=u,c.hidden=!1,o(e,a.getContents(c["for"][0]).get(c["for"][1]),c.filebrowser)}}function s(e,t,i){if(-1!==i.indexOf(";")){for(var i=i.split(";"),n=0;n<i.length;n++)if(s(e,t,i[n]))return!0;return!1}return(e=e.getContents(t).get(i).filebrowser)&&e.url}function a(e,t){var i=this._.filebrowserSe.getDialog(),n=this._.filebrowserSe["for"],o=this._.filebrowserSe.filebrowser.onSelect;n&&i.getContentElement(n[0],n[1]).reset(),"function"==typeof t&&t.call(this._.filebrowserSe)===!1||o&&o.call(this._.filebrowserSe,e,t)===!1||("string"==typeof t&&t&&alert(t),e&&(n=this._.filebrowserSe,i=n.getDialog(),(n=n.filebrowser.target||null)&&(n=n.split(":"),(o=i.getContentElement(n[0],n[1]))&&(o.setValue(e),i.selectPage(n[0])))))}CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function(e){e._.filebrowserFn=CKEDITOR.tools.addFunction(a,e),e.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}}),CKEDITOR.on("dialogDefinition",function(e){if(e.editor.plugins.filebrowser)for(var t,i=e.data.definition,n=0;n<i.contents.length;++n)(t=i.contents[n])&&(r(e.editor,e.data.name,i,t.elements),t.hidden&&t.filebrowser&&(t.hidden=!s(i,t.id,t.filebrowser)))})}(),function(){function e(e){var n=e.config,o=e.fire("uiSpace",{space:"top",html:""}).html,r=function(){function o(e,t,n){a.setStyle(t,i(n)),a.setStyle("position",e)}function s(e){var t=c.getDocumentPosition();switch(e){case"top":o("absolute","top",t.y-p-g);break;case"pin":o("fixed","top",b);break;case"bottom":o("absolute","top",t.y+(u.height||u.bottom-u.top)+g)}l=e}var l,c,d,u,h,p,f,m=n.floatSpaceDockedOffsetX||0,g=n.floatSpaceDockedOffsetY||0,v=n.floatSpacePinnedOffsetX||0,b=n.floatSpacePinnedOffsetY||0;return function(n){if(c=e.editable())if(n&&"focus"==n.name&&a.show(),a.removeStyle("left"),a.removeStyle("right"),d=a.getClientRect(),u=c.getClientRect(),h=t.getViewPaneSize(),p=d.height,f="pageXOffset"in t.$?t.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,l){s(p+g<=u.top?"top":p+g>h.height-u.bottom?"pin":"bottom");var o,n=h.width/2,n=u.left>0&&u.right<h.width&&u.width>d.width?"rtl"==e.config.contentsLangDirection?"right":"left":n-u.left>u.right-n?"left":"right";d.width>h.width?(n="left",o=0):(o="left"==n?u.left>0?u.left:0:u.right<h.width?h.width-u.right:0,o+d.width>h.width&&(n="left"==n?"right":"left",o=0)),a.setStyle(n,i(("pin"==l?v:m)+o+("pin"==l?0:"left"==n?f:-f)))}else l="pin",s("pin"),r(n)}}();if(o){var s=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(e.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(e.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),a=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(s.output({content:o,id:e.id,langDir:e.lang.dir,langCode:e.langCode,name:e.name,style:"display:none;z-index:"+(n.baseFloatZIndex-1),topId:e.ui.spaceId("top"),voiceLabel:e.title}))),l=CKEDITOR.tools.eventsBuffer(500,r),c=CKEDITOR.tools.eventsBuffer(100,r);a.unselectable(),a.on("mousedown",function(e){e=e.data,e.getTarget().hasAscendant("a",1)||e.preventDefault()}),e.on("focus",function(i){r(i),e.on("change",l.input),t.on("scroll",c.input),t.on("resize",c.input)}),e.on("blur",function(){a.hide(),e.removeListener("change",l.input),t.removeListener("scroll",c.input),t.removeListener("resize",c.input)}),e.on("destroy",function(){t.removeListener("scroll",c.input),t.removeListener("resize",c.input),a.clearCustomData(),a.remove()}),e.focusManager.hasFocus&&a.show(),e.focusManager.add(a,1)}}var t=CKEDITOR.document.getWindow(),i=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(t){t.on("loaded",function(){e(this)},null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var e=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),t=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),i=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),n=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(e,t){return this.addBlock(e,new CKEDITOR.ui.listBlock(this.getHolderElement(),t))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(e,t){var t=t||{},i=t.attributes||(t.attributes={});(this.multiSelect=!!t.multiSelect)&&(i["aria-multiselectable"]=!0),!i.role&&(i.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",i.role),i=this.keys,i[40]="next",i[9]="next",i[38]="prev",i[CKEDITOR.SHIFT+9]="prev",i[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(i[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var t=e.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(t),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(e){var t=this.toggle(e);this.onClick&&this.onClick(e,t)},this)),this._.click}},proto:{add:function(e,i,o){var r=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[e]=r;var s;s=CKEDITOR.tools.htmlEncodeAttr(e).replace(n,"\\'"),e={id:r,val:s,onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(o||e),text:i||e},this._.pendingList.push(t.output(e))},startGroup:function(e){this._.close();var t=CKEDITOR.tools.getNextId();this._.groups[e]=t,this._.pendingHtml.push(i.output({id:t,label:e}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(e){var t=this.isMarked(e);return t?this.unmark(e):this.mark(e),!t},hideGroup:function(e){var t=(e=this.element.getDocument().getById(this._.groups[e]))&&e.getNext();e&&(e.setStyle("display","none"),t&&"ul"==t.getName()&&t.setStyle("display","none"))},hideItem:function(e){this.element.getDocument().getById(this._.items[e]).setStyle("display","none")},showAll:function(){var e,t=this._.items,i=this._.groups,n=this.element.getDocument();for(e in t)n.getById(t[e]).setStyle("display","");for(var o in i)t=n.getById(i[o]),e=t.getNext(),t.setStyle("display",""),e&&"ul"==e.getName()&&e.setStyle("display","")},mark:function(e){this.multiSelect||this.unmarkAll();var e=this._.items[e],t=this.element.getDocument().getById(e);t.addClass("cke_selected"),this.element.getDocument().getById(e+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(t)},unmark:function(e){var t=this.element.getDocument(),e=this._.items[e],i=t.getById(e);i.removeClass("cke_selected"),t.getById(e+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(i)},unmarkAll:function(){var e,t=this._.items,i=this.element.getDocument();for(e in t){var n=t[e];i.getById(n).removeClass("cke_selected"),i.getById(n+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(e){return this.element.getDocument().getById(this._.items[e]).hasClass("cke_selected")},focus:function(e){this._.focusIndex=-1;var t,i=this.element.getElementsByTag("a"),n=-1;if(e){for(t=this.element.getDocument().getById(this._.items[e]).getFirst();e=i.getItem(++n);)if(e.equals(t)){this._.focusIndex=n;break}}else this.element.focus();t&&setTimeout(function(){t.focus()},0)}}})}}),function(){var e='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var e=e+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"'),e=e+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span>{arrowHtml}</a>',t=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),i=CKEDITOR.addTemplate("button",e);CKEDITOR.plugins.add("button",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(e){CKEDITOR.tools.extend(this,e,{title:e.label,click:e.click||function(t){t.execCommand(e.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(e){return new CKEDITOR.ui.button(e)}},CKEDITOR.ui.button.prototype={render:function(e,n){function o(){var t=e.mode;t&&(t=this.modes[t]?void 0!==f[t]?f[t]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,t=e.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:t,this.setState(t),this.refresh&&this.refresh())}var r,s=CKEDITOR.env,a=this._.id=CKEDITOR.tools.getNextId(),l="",c=this.command;this._.editor=e;var d={id:a,button:this,editor:e,focus:function(){CKEDITOR.document.getById(a).focus()},execute:function(){this.button.click(e)},attach:function(e){this.button.attach(e)}},u=CKEDITOR.tools.addFunction(function(e){return d.onkey?(e=new CKEDITOR.dom.event(e),d.onkey(d,e.getKeystroke())!==!1):void 0}),h=CKEDITOR.tools.addFunction(function(e){var t;return d.onfocus&&(t=d.onfocus(d,new CKEDITOR.dom.event(e))!==!1),t}),p=0;if(d.clickFn=r=CKEDITOR.tools.addFunction(function(){p&&(e.unlockSelection(1),p=0),d.execute(),s.iOS&&e.focus()}),this.modes){var f={};e.on("beforeModeUnload",function(){e.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(f[e.mode]=this._.state)},this),e.on("activeFilterChange",o,this),e.on("mode",o,this),!this.readOnly&&e.on("readOnly",o,this)}else c&&(c=e.getCommand(c))&&(c.on("state",function(){this.setState(c.state)},this),l+=c.state==CKEDITOR.TRISTATE_ON?"on":c.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");this.directional&&e.on("contentDirChanged",function(t){var i=CKEDITOR.document.getById(this._.id),n=i.getFirst(),t=t.data;t!=e.lang.dir?i.addClass("cke_"+t):i.removeClass("cke_ltr").removeClass("cke_rtl"),n.setAttribute("style",CKEDITOR.skin.getIconStyle(g,"rtl"==t,this.icon,this.iconOffset))},this),c||(l+="off");var m=this.name||this.command,g=m;return this.icon&&!/\./.test(this.icon)&&(g=this.icon,this.icon=null),l={id:a,name:m,iconName:g,label:this.label,cls:this.className||"",state:l,ariaDisabled:"disabled"==l?"true":"false",title:this.title,titleJs:s.gecko&&!s.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:u,focusFn:h,clickFn:r,style:CKEDITOR.skin.getIconStyle(g,"rtl"==e.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?t.output():""},i.output(l,n),this.onRender&&this.onRender(),d},setState:function(e){if(this._.state==e)return!1;this._.state=e;var t=CKEDITOR.document.getById(this._.id);return t?(t.setState(e,"cke_button"),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),this.hasArrow?(e=e==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(e)):e==CKEDITOR.TRISTATE_ON?t.setAttribute("aria-pressed",!0):t.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(e){if(this._.feature)return this._.feature;var t=this;return!this.allowedContent&&!this.requiredContent&&this.command&&(t=e.getCommand(this.command)||t),this._.feature=t}},CKEDITOR.ui.prototype.addButton=function(e,t){this.add(e,CKEDITOR.UI_BUTTON,t)}}(),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var e='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var e=e+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>"),t=CKEDITOR.addTemplate("combo",e);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(e){CKEDITOR.tools.extend(this,e,{canGroup:!1,title:e.label,modes:{wysiwyg:1},editorFocus:1}),e=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=e.parent&&e.parent.getDocument()||CKEDITOR.document,e.className="cke_combopanel",e.block={multiSelect:e.multiSelect,attributes:e.attributes},e.toolbarRelated=!0,this._={panelDefinition:e,items:{}}},proto:{renderHtml:function(e){var t=[];return this.render(e,t),t.join("")},render:function(e,i){function n(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var t=this.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;e.readOnly&&!this.readOnly&&(t=CKEDITOR.TRISTATE_DISABLED),this.setState(t),this.setValue(""),t!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var o=CKEDITOR.env,r="cke_"+this.id,s=CKEDITOR.tools.addFunction(function(t){u&&(e.unlockSelection(1),u=0),l.execute(t)},this),a=this,l={id:r,combo:this,focus:function(){CKEDITOR.document.getById(r).getChild(1).focus()},execute:function(t){var i=a._;if(i.state!=CKEDITOR.TRISTATE_DISABLED)if(a.createPanel(e),i.on)i.panel.hide();else{a.commit();var n=a.getValue();n?i.list.mark(n):i.list.unmarkAll(),i.panel.showBlock(a.id,new CKEDITOR.dom.element(t),4)}},clickFn:s};e.on("activeFilterChange",n,this),e.on("mode",n,this),e.on("selectionChange",n,this),!this.readOnly&&e.on("readOnly",n,this);var c=CKEDITOR.tools.addFunction(function(t,i){var t=new CKEDITOR.dom.event(t),n=t.getKeystroke();switch(40==n&&e.once("panelShow",function(e){e.data._.panel._.currentBlock.onKeyDown(40)}),n){case 13:case 32:case 40:CKEDITOR.tools.callFunction(s,i);break;default:l.onkey(l,n)}t.preventDefault()}),d=CKEDITOR.tools.addFunction(function(){l.onfocus&&l.onfocus()}),u=0;return l.keyDownFn=c,o={id:r,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:o.gecko&&!o.hc?"":(this.title||"").replace("'",""),keydownFn:c,focusFn:d,clickFn:s},t.output(o,i),this.onRender&&this.onRender(),l},createPanel:function(e){if(!this._.panel){var t=this._.panelDefinition,i=this._.panelDefinition.block,n=t.parent||CKEDITOR.document.getBody(),o="cke_combopanel__"+this.name,r=new CKEDITOR.ui.floatPanel(e,n,t),s=r.addListBlock(this.id,i),a=this;r.onShow=function(){this.element.addClass(o),a.setState(CKEDITOR.TRISTATE_ON),a._.on=1,a.editorFocus&&!e.focusManager.hasFocus&&e.focus(),a.onOpen&&a.onOpen(),e.once("panelShow",function(){s.focus(!s.multiSelect&&a.getValue())})},r.onHide=function(t){this.element.removeClass(o),a.setState(a.modes&&a.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),a._.on=0,!t&&a.onClose&&a.onClose()},r.onEscape=function(){r.hide(1)},s.onClick=function(e,t){a.onClick&&a.onClick.call(a,e,t),r.hide()},this._.panel=r,this._.list=s,r.getBlock(this.id).onHide=function(){a._.on=0,a.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(e,t){this._.value=e;var i=this.document.getById("cke_"+this.id+"_text");i&&(e||t?i.removeClass("cke_combo_inlinelabel"):(t=this.label,i.addClass("cke_combo_inlinelabel")),i.setText("undefined"!=typeof t?t:e))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(e){this._.list.mark(e)},hideItem:function(e){this._.list.hideItem(e)},hideGroup:function(e){this._.list.hideGroup(e)},showAll:function(){this._.list.showAll()},add:function(e,t,i){this._.items[e]=i||e,this._.list.add(e,t,i)},startGroup:function(e){this._.list.startGroup(e)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(e){if(this._.state!=e){var t=this.document.getById("cke_"+this.id);t.setState(e,"cke_combo"),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),this._.state=e}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(e){return new CKEDITOR.ui.richCombo(e)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(e,t){this.add(e,CKEDITOR.UI_RICHCOMBO,t)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(e){if(!e.blockless){for(var t=e.config,i=e.lang.format,n=t.format_tags.split(";"),o={},r=0,s=[],a=0;a<n.length;a++){var l=n[a],c=new CKEDITOR.style(t["format_"+l]);(!e.filter.customConfig||e.filter.check(c))&&(r++,o[l]=c,o[l]._.enterMode=e.config.enterMode,s.push(c))}0!==r&&e.ui.addRichCombo("Format",{label:i.label,title:i.panelTitle,toolbar:"styles,20",allowedContent:s,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!1,attributes:{"aria-label":i.panelTitle}},init:function(){this.startGroup(i.panelTitle);for(var e in o){var t=i["tag_"+e];this.add(e,o[e].buildPreview(t),t)}},onClick:function(t){e.focus(),e.fire("saveSnapshot");var t=o[t],i=e.elementPath();e[t.checkActive(i,e)?"removeStyle":"applyStyle"](t),setTimeout(function(){e.fire("saveSnapshot")},0)},onRender:function(){e.on("selectionChange",function(t){var i=this.getValue(),t=t.data.path;this.refresh();for(var n in o)if(o[n].checkActive(t,e))return void(n!=i&&this.setValue(n,e.lang.format["tag_"+n]));this.setValue("")},this)},onOpen:function(){this.showAll();for(var t in o)e.activeFilter.check(o[t])||this.hideItem(t)},refresh:function(){var t=e.elementPath();if(t){if(t.isContextFor("p"))for(var i in o)if(e.activeFilter.check(o[i]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var e={canUndo:!1,exec:function(e){var t=e.document.createElement("hr");e.insertElement(t)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(t){t.blockless||(t.addCommand("horizontalrule",e),t.ui.addButton&&t.ui.addButton("HorizontalRule",{label:t.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(e){var t=new CKEDITOR.htmlWriter;t.forceSimpleAmpersand=e.config.forceSimpleAmpersand,t.indentationChars=e.config.dataIndentationChars||"	",e.dataProcessor.writer=t}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="	",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var e,t=CKEDITOR.dtd;for(e in CKEDITOR.tools.extend({},t.$nonBodyContent,t.$block,t.$listItem,t.$tableContent))this.setRules(e,{indent:!t[e]["#"],breakBeforeOpen:1,breakBeforeClose:!t[e]["#"],breakAfterClose:1,needsSpace:e in t.$block&&!(e in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(e){var t=this._.rules[e];this._.afterCloser&&t&&t.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():t&&t.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",e),this._.afterCloser=0},openTagClose:function(e,t){var i=this._.rules[e];t?(this._.output.push(this.selfClosingEnd),i&&i.breakAfterClose&&(this._.needsSpace=i.needsSpace)):(this._.output.push(">"),i&&i.indent&&(this._.indentation=this._.indentation+this.indentationChars)),i&&i.breakAfterOpen&&this.lineBreak(),"pre"==e&&(this._.inPre=1)},attribute:function(e,t){"string"==typeof t&&(this.forceSimpleAmpersand&&(t=t.replace(/&amp;/g,"&")),t=CKEDITOR.tools.htmlEncodeAttr(t)),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){var t=this._.rules[e];t&&t.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():t&&t.breakBeforeClose&&(this.lineBreak(),
this.indentation()),this._.output.push("</",e,">"),"pre"==e&&(this._.inPre=0),t&&t.breakAfterClose&&(this.lineBreak(),this._.needsSpace=t.needsSpace),this._.afterCloser=1},text:function(e){this._.indent&&(this.indentation(),!this._.inPre&&(e=CKEDITOR.tools.ltrim(e))),this._.output.push(e)},comment:function(e){this._.indent&&this.indentation(),this._.output.push("<!--",e,"-->")},lineBreak:function(){!this._.inPre&&this._.output.length>0&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0},setRules:function(e,t){var i=this._.rules[e];i?CKEDITOR.tools.extend(i,t,!0):this._.rules[e]=t}}}),function(){function e(e,t){return t||(t=e.getSelection().getSelectedElement()),t&&t.is("img")&&!t.data("cke-realelement")&&!t.isReadOnly()?t:void 0}function t(e){var t=e.getStyle("float");return("inherit"==t||"none"==t)&&(t=0),t||(t=e.getAttribute("align")),t}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(t){if(!t.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var i="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(t,"image","advanced")&&(i="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),t.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:i,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),t.ui.addButton&&t.ui.addButton("Image",{label:t.lang.common.image,command:"image",toolbar:"insert,10"}),t.on("doubleclick",function(e){var t=e.data.element;!t.is("img")||t.data("cke-realelement")||t.isReadOnly()||(e.data.dialog="image")}),t.addMenuItems&&t.addMenuItems({image:{label:t.lang.image.menu,command:"image",group:"image"}}),t.contextMenu&&t.contextMenu.addListener(function(i){return e(t,i)?{image:CKEDITOR.TRISTATE_OFF}:void 0})}},afterInit:function(i){function n(n){var o=i.getCommand("justify"+n);o&&(("left"==n||"right"==n)&&o.on("exec",function(o){var r,s=e(i);s&&(r=t(s),r==n?(s.removeStyle("float"),n==t(s)&&s.removeAttribute("align")):s.setStyle("float",n),o.cancel())}),o.on("refresh",function(o){var r=e(i);r&&(r=t(r),this.setState(r==n?CKEDITOR.TRISTATE_ON:"right"==n||"left"==n?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),o.cancel())}))}i.plugins.image2||(n("left"),n("right"),n("center"),n("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function e(e,t){var i=n.exec(e),o=n.exec(t);if(i){if(!i[2]&&"px"==o[2])return o[1];if("px"==i[2]&&!o[2])return o[1]+"px"}return t}var t=CKEDITOR.htmlParser.cssStyle,i=CKEDITOR.tools.cssLength,n=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,o={elements:{$:function(i){var n=i.attributes;if((n=(n=(n=n&&n["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(n)))&&n.children[0])&&i.attributes["data-cke-resizable"]){var o=new t(i).rules,i=n.attributes,r=o.width,o=o.height;r&&(i.width=e(i.width,r)),o&&(i.height=e(i.height,o))}return n}}};CKEDITOR.plugins.add("fakeobjects",{init:function(e){e.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(e){(e=(e=e.dataProcessor)&&e.htmlFilter)&&e.addRules(o,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(e,n,o,r){var s=this.lang.fakeobjects,s=s[o]||s.unknown,n={"class":n,"data-cke-realelement":encodeURIComponent(e.getOuterHtml()),"data-cke-real-node-type":e.type,alt:s,title:s,align:e.getAttribute("align")||""};return CKEDITOR.env.hc||(n.src=CKEDITOR.tools.transparentImageData),o&&(n["data-cke-real-element-type"]=o),r&&(n["data-cke-resizable"]=r,o=new t,r=e.getAttribute("width"),e=e.getAttribute("height"),r&&(o.rules.width=i(r)),e&&(o.rules.height=i(e)),o.populate(n)),this.document.createElement("img",{attributes:n})},CKEDITOR.editor.prototype.createFakeParserElement=function(e,n,o,r){var s,a=this.lang.fakeobjects,a=a[o]||a.unknown;return s=new CKEDITOR.htmlParser.basicWriter,e.writeHtml(s),s=s.getHtml(),n={"class":n,"data-cke-realelement":encodeURIComponent(s),"data-cke-real-node-type":e.type,alt:a,title:a,align:e.attributes.align||""},CKEDITOR.env.hc||(n.src=CKEDITOR.tools.transparentImageData),o&&(n["data-cke-real-element-type"]=o),r&&(n["data-cke-resizable"]=r,r=e.attributes,e=new t,o=r.width,r=r.height,void 0!==o&&(e.rules.width=i(o)),void 0!==r&&(e.rules.height=i(r)),e.populate(n)),new CKEDITOR.htmlParser.element("img",n)},CKEDITOR.editor.prototype.restoreRealElement=function(t){if(t.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var i=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(t.data("cke-realelement")),this.document);if(t.data("cke-resizable")){var n=t.getStyle("width"),t=t.getStyle("height");n&&i.setAttribute("width",e(i.getAttribute("width"),n)),t&&i.setAttribute("height",e(i.getAttribute("height"),t))}return i}}(),function(){function e(e){return e.replace(/'/g,"\\$&")}function t(e){for(var t,i=e.length,n=[],o=0;i>o;o++)t=e.charCodeAt(o),n.push(t);return"String.fromCharCode("+n.join(",")+")"}function i(t,i){var n,o,r=t.plugins.link,s=r.compiledProtectionFunction.params;o=[r.compiledProtectionFunction.name,"("];for(var a=0;a<s.length;a++)r=s[a].toLowerCase(),n=i[r],a>0&&o.push(","),o.push("'",n?e(encodeURIComponent(i[r])):"","'");return o.push(")"),o.join("")}function n(e){var t,e=e.config.emailProtection||"";return e&&"encode"!=e&&(t={},e.replace(/^([^(]+)\(([^)]+)\)$/,function(e,i,n){t.name=i,t.params=[],n.replace(/[^,\s]+/g,function(e){t.params.push(e)})})),t}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function e(e){return i.replace(/%1/g,"rtl"==e?"right":"left").replace(/%2/g,"cke_contents_"+e)}var t="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",i=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+t+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+t+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(e("ltr")+e("rtl"))},init:function(e){var t="a[!href]";CKEDITOR.dialog.isTabEnabled(e,"link","advanced")&&(t=t.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)")),CKEDITOR.dialog.isTabEnabled(e,"link","target")&&(t=t.replace("]",",target,onclick]")),e.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:t,requiredContent:"a[href]"})),e.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),e.addCommand("unlink",new CKEDITOR.unlinkCommand),e.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),e.setKeystroke(CKEDITOR.CTRL+76,"link"),e.ui.addButton&&(e.ui.addButton("Link",{label:e.lang.link.toolbar,command:"link",toolbar:"links,10"}),e.ui.addButton("Unlink",{label:e.lang.link.unlink,command:"unlink",toolbar:"links,20"}),e.ui.addButton("Anchor",{label:e.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),e.on("doubleclick",function(t){var i=CKEDITOR.plugins.link.getSelectedLink(e)||t.data.element;i.isReadOnly()||(i.is("a")?(t.data.dialog=!i.getAttribute("name")||i.getAttribute("href")&&i.getChildCount()?"link":"anchor",t.data.link=i):CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,i)&&(t.data.dialog="anchor"))},null,null,0),e.on("doubleclick",function(t){t.data.dialog in{link:1,anchor:1}&&t.data.link&&e.getSelection().selectElement(t.data.link)},null,null,20),e.addMenuItems&&e.addMenuItems({anchor:{label:e.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:e.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:e.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:e.lang.link.unlink,command:"unlink",group:"link",order:5}}),e.contextMenu&&e.contextMenu.addListener(function(t){if(!t||t.isReadOnly())return null;if(t=CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t),!t&&!(t=CKEDITOR.plugins.link.getSelectedLink(e)))return null;var i={};return t.getAttribute("href")&&t.getChildCount()&&(i={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),t&&t.hasAttribute("name")&&(i.anchor=i.removeAnchor=CKEDITOR.TRISTATE_OFF),i}),this.compiledProtectionFunction=n(e)},afterInit:function(e){e.dataProcessor.dataFilter.addRules({elements:{a:function(t){return t.attributes.name?t.children.length?null:e.createFakeParserElement(t,"cke_anchor","anchor"):null}}});var t=e._.elementsPath&&e._.elementsPath.filters;t&&t.push(function(t,i){return"a"!=i||!CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t)&&(!t.getAttribute("name")||t.getAttribute("href")&&t.getChildCount())?void 0:"anchor"})}});var o=/^javascript:/,r=/^mailto:([^?]+)(?:\?(.+))?$/,s=/subject=([^;?:@&=$,\/]*)/,a=/body=([^;?:@&=$,\/]*)/,l=/^#(.*)$/,c=/^((?:http|https|ftp|news):\/\/)?(.*)$/,d=/^(_(?:self|top|parent|blank))$/,u=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,h=/^javascript:([^(]+)\(([^)]+)\)$/,p=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,f=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,m={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType","class":"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(e){var t=e.getSelection(),i=t.getSelectedElement();return i&&i.is("a")?i:(t=t.getRanges()[0])?(t.shrink(CKEDITOR.SHRINK_TEXT),e.elementPath(t.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(e){for(var t,i=e.editable(),n=i.isInline()&&!e.plugins.divarea?e.document:i,i=n.getElementsByTag("a"),n=n.getElementsByTag("img"),o=[],r=0;t=i.getItem(r++);)(t.data("cke-saved-name")||t.hasAttribute("name"))&&o.push({name:t.data("cke-saved-name")||t.getAttribute("name"),id:t.getAttribute("id")});for(r=0;t=n.getItem(r++);)(t=this.tryRestoreFakeAnchor(e,t))&&o.push({name:t.getAttribute("name"),id:t.getAttribute("id")});return o},fakeAnchor:!0,tryRestoreFakeAnchor:function(e,t){if(t&&t.data("cke-real-element-type")&&"anchor"==t.data("cke-real-element-type")){var i=e.restoreRealElement(t);if(i.data("cke-saved-name"))return i}},parseLinkAttributes:function(e,t){var i,n=t&&(t.data("cke-saved-href")||t.getAttribute("href"))||"",g=e.plugins.link.compiledProtectionFunction,v=e.config.emailProtection,b={};if(n.match(o)&&("encode"==v?n=n.replace(u,function(e,t,i){return"mailto:"+String.fromCharCode.apply(String,t.split(","))+(i&&i.replace(/\\'/g,"'"))}):v&&n.replace(h,function(e,t,i){if(t==g.name){b.type="email";for(var n,o,e=b.email={},t=/(^')|('$)/g,i=i.match(/[^,\s]+/g),r=i.length,s=0;r>s;s++)n=decodeURIComponent,o=i[s].replace(t,"").replace(/\\'/g,"'"),o=n(o),n=g.params[s].toLowerCase(),e[n]=o;e.address=[e.name,e.domain].join("@")}})),!b.type)if(v=n.match(l))b.type="anchor",b.anchor={},b.anchor.name=b.anchor.id=v[1];else if(v=n.match(r)){i=n.match(s),n=n.match(a),b.type="email";var y=b.email={};y.address=v[1],i&&(y.subject=decodeURIComponent(i[1])),n&&(y.body=decodeURIComponent(n[1]))}else n&&(i=n.match(c))&&(b.type="url",b.url={},b.url.protocol=i[1],b.url.url=i[2]);if(t){if(n=t.getAttribute("target"))b.target={type:n.match(d)?n:"frame",name:n};else if(n=(n=t.data("cke-pa-onclick")||t.getAttribute("onclick"))&&n.match(p))for(b.target={type:"popup",name:n[1]};v=f.exec(n[2]);)"yes"!=v[2]&&"1"!=v[2]||v[1]in{height:1,width:1,top:1,left:1}?isFinite(v[2])&&(b.target[v[1]]=v[2]):b.target[v[1]]=!0;var w,n={};for(w in m)(v=t.getAttribute(w))&&(n[m[w]]=v);(w=t.data("cke-saved-name")||n.advName)&&(n.advName=w),CKEDITOR.tools.isEmpty(n)||(b.advanced=n)}return b},getLinkAttributes:function(n,o){var r=n.config.emailProtection||"",s={};switch(o.type){case"url":var r=o.url&&void 0!==o.url.protocol?o.url.protocol:"http://",a=o.url&&CKEDITOR.tools.trim(o.url.url)||"";s["data-cke-saved-href"]=0===a.indexOf("/")?a:r+a;break;case"anchor":r=o.anchor&&o.anchor.id,s["data-cke-saved-href"]="#"+(o.anchor&&o.anchor.name||r||"");break;case"email":var l=o.email,a=l.address;switch(r){case"":case"encode":var c=encodeURIComponent(l.subject||""),d=encodeURIComponent(l.body||""),l=[];c&&l.push("subject="+c),d&&l.push("body="+d),l=l.length?"?"+l.join("&"):"","encode"==r?(r=["javascript:void(location.href='mailto:'+",t(a)],l&&r.push("+'",e(l),"'"),r.push(")")):r=["mailto:",a,l];break;default:r=a.split("@",2),l.name=r[0],l.domain=r[1],r=["javascript:",i(n,l)]}s["data-cke-saved-href"]=r.join("")}if(o.target)if("popup"==o.target.type){for(var r=["window.open(this.href, '",o.target.name||"","', '"],u=["resizable","status","location","toolbar","menubar","fullscreen","scrollbars","dependent"],a=u.length,c=function(e){o.target[e]&&u.push(e+"="+o.target[e])},l=0;a>l;l++)u[l]=u[l]+(o.target[u[l]]?"=yes":"=no");c("width"),c("left"),c("height"),c("top"),r.push(u.join(","),"'); return false;"),s["data-cke-pa-onclick"]=r.join("")}else"notSet"!=o.target.type&&o.target.name&&(s.target=o.target.name);if(o.advanced){for(var h in m)(r=o.advanced[m[h]])&&(s[h]=r);s.name&&(s["data-cke-saved-name"]=s.name)}s["data-cke-saved-href"]&&(s.href=s["data-cke-saved-href"]),h={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1},o.advanced&&CKEDITOR.tools.extend(h,m);for(var p in s)delete h[p];return{set:s,removed:CKEDITOR.tools.objectKeys(h)}}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(e){var t=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});e.removeStyle(t)},refresh:function(e,t){var i=t.lastElement&&t.lastElement.getAscendant("a",!0);i&&"a"==i.getName()&&i.getAttribute("href")&&i.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(e){var t,i=e.getSelection(),n=i.createBookmarks();i&&(t=i.getSelectedElement())&&(t.getChildCount()?t.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t))?t.remove(1):(t=CKEDITOR.plugins.link.getSelectedLink(e))&&(t.hasAttribute("href")?(t.removeAttributes({name:1,"data-cke-saved-name":1}),t.removeClass("cke_anchor")):t.remove(1)),i.selectBookmarks(n)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})}(),function(){function e(e,t,i){return d(t)&&d(i)&&i.equals(t.getNext(function(e){return!(G(e)||Y(e)||u(e))}))}function t(e){this.upper=e[0],this.lower=e[1],this.set.apply(this,e.slice(2))}function i(e){var t=e.element;if(t&&d(t)&&(t=t.getAscendant(e.triggers,!0))&&e.editable.contains(t)){var i=r(t);if("true"==i.getAttribute("contenteditable"))return t;if(i.is(e.triggers))return i}return null}function n(e,t,i){return y(e,t),y(e,i),e=t.size.bottom,i=i.size.top,e&&i?0|(e+i)/2:e||i}function o(e,t,i){return t=t[i?"getPrevious":"getNext"](function(t){return t&&t.type==CKEDITOR.NODE_TEXT&&!G(t)||d(t)&&!u(t)&&!c(e,t)})}function r(e,t){if(e.data("cke-editable"))return null;for(t||(e=e.getParent());e&&!e.data("cke-editable");){if(e.hasAttribute("contenteditable"))return e;e=e.getParent()}return null}function s(e){var t=e.doc,i=S('<span contenteditable="false" style="'+V+"position:absolute;border-top:1px dashed "+e.boxColor+'"></span>',t),n=CKEDITOR.getUrl(this.path+"images/"+(D.hidpi?"hidpi/":"")+"icon"+(e.rtl?"-rtl":"")+".png");for(T(i,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(e.editable,!0),this},lineChildren:[T(S('<span title="'+e.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',t),{base:V+"height:17px;width:17px;"+(e.rtl?"left":"right")+":17px;background:url("+n+") center no-repeat "+e.boxColor+";cursor:pointer;"+(D.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(D.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px",1),"top:-17px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px 2px 0px 0px",1),"top:-1px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","0px 0px 2px 2px",1)]}),T(S(U,t),{base:z+"left:0px;border-left-color:"+e.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),T(S(U,t),{base:z+"right:0px;border-right-color:"+e.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){y(e,this);var t=e.holdDistance,i=this.size;return i&&e.mouse.y>i.top-t&&e.mouse.y<i.bottom+t&&e.mouse.x>i.left-t&&e.mouse.x<i.right+t?!0:!1},place:function(){var t=e.view,i=e.editable,n=e.trigger,o=n.upper,r=n.lower,s=o||r,a=s.getParent(),l={};this.trigger=n,o&&y(e,o,!0),r&&y(e,r,!0),y(e,a,!0),e.inInlineMode&&w(e,!0),a.equals(i)?(l.left=t.scroll.x,l.right=-t.scroll.x,l.width=""):(l.left=s.size.left-s.size.margin.left+t.scroll.x-(e.inInlineMode?t.editable.left+t.editable.border.left:0),l.width=s.size.outerWidth+s.size.margin.left+s.size.margin.right+t.scroll.x,l.right=""),o&&r?l.top=o.size.margin.bottom===r.size.margin.top?0|o.size.bottom+o.size.margin.bottom/2:o.size.margin.bottom<r.size.margin.top?o.size.bottom+o.size.margin.bottom:o.size.bottom+o.size.margin.bottom-r.size.margin.top:o?r||(l.top=o.size.bottom+o.size.margin.bottom):l.top=r.size.top-r.size.margin.top,n.is(N)||l.top>t.scroll.y-15&&l.top<t.scroll.y+5?(l.top=e.inInlineMode?0:t.scroll.y,this.look(N)):n.is(L)||l.top>t.pane.bottom-5&&l.top<t.pane.bottom+15?(l.top=e.inInlineMode?t.editable.height+t.editable.padding.top+t.editable.padding.bottom:t.pane.bottom-1,this.look(L)):(e.inInlineMode&&(l.top=l.top-(t.editable.top+t.editable.border.top)),this.look(B)),e.inInlineMode&&(l.top--,l.top=l.top+t.editable.scroll.top,l.left=l.left+t.editable.scroll.left);for(var c in l)l[c]=CKEDITOR.tools.cssLength(l[c]);this.setStyles(l)},look:function(e){if(this.oldLook!=e){for(var t,i=this.lineChildren.length;i--;)(t=this.lineChildren[i]).setAttribute("style",t.base+t.looks[0|e/2]);this.oldLook=e}},wrap:new C("span",e.doc)}),t=i.lineChildren.length;t--;)i.lineChildren[t].appendTo(i);i.look(B),i.appendTo(i.wrap),i.unselectable(),i.lineChildren[0].on("mouseup",function(t){i.detach(),a(e,function(t){var i=e.line.trigger;t[i.is(R)?"insertBefore":"insertAfter"](i.is(R)?i.lower:i.upper)},!0),e.editor.focus(),!D.ie&&e.enterMode!=CKEDITOR.ENTER_BR&&e.hotNode.scrollIntoView(),t.data.preventDefault(!0)}),i.on("mousedown",function(e){e.data.preventDefault(!0)}),e.line=i}function a(e,t,i){var n,o=new CKEDITOR.dom.range(e.doc),s=e.editor;D.ie&&e.enterMode==CKEDITOR.ENTER_BR?n=e.doc.createText(j):(n=(n=r(e.element,!0))&&n.data("cke-enter-mode")||e.enterMode,n=new C(O[n],e.doc),n.is("br")||e.doc.createText(j).appendTo(n)),i&&s.fire("saveSnapshot"),t(n),o.moveToPosition(n,CKEDITOR.POSITION_AFTER_START),s.getSelection().selectRanges([o]),e.hotNode=n,i&&s.fire("saveSnapshot")}function l(e,t){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function n(i){var n=D.ie&&D.version<9?" ":j,o=e.hotNode&&e.hotNode.getText()==n&&e.element.equals(e.hotNode)&&e.lastCmdDirection===!!t;a(e,function(n){o&&e.hotNode&&e.hotNode.remove(),n[t?"insertAfter":"insertBefore"](i),n.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!t}),e.lastCmdDirection=!!t}),!D.ie&&e.enterMode!=CKEDITOR.ENTER_BR&&e.hotNode.scrollIntoView(),e.line.detach()}return function(s){var a,s=s.getSelection().getStartElement(),s=s.getAscendant(W,1);if(!f(e,s)&&s&&!s.equals(e.editable)&&!s.contains(e.editable)){(a=r(s))&&"false"==a.getAttribute("contenteditable")&&(s=a),e.element=s,a=o(e,s,!t);var l;d(a)&&a.is(e.triggers)&&a.is(H)&&(!o(e,a,!t)||(l=o(e,a,!t))&&d(l)&&l.is(e.triggers))?n(a):(l=i(e,s),d(l)&&(o(e,l,!t)?(s=o(e,l,!t))&&d(s)&&s.is(e.triggers)&&n(l):n(l)))}}}()}}function c(e,t){if(!t||t.type!=CKEDITOR.NODE_ELEMENT||!t.$)return!1;var i=e.line;return i.wrap.equals(t)||i.wrap.contains(t)}function d(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.$}function u(e){if(!d(e))return!1;var t;return(t=h(e))||(d(e)?(t={left:1,right:1,center:1},t=!(!t[e.getComputedStyle("float")]&&!t[e.getAttribute("align")])):t=!1),t}function h(e){return!!{absolute:1,fixed:1}[e.getComputedStyle("position")]}function p(e,t){return d(t)?t.is(e.triggers):null}function f(e,t){if(!t)return!1;for(var i=t.getParents(1),n=i.length;n--;)for(var o=e.tabuList.length;o--;)if(i[n].hasAttribute(e.tabuList[o]))return!0;return!1}function m(e,t,i){return(t=t[i?"getLast":"getFirst"](function(t){return e.isRelevant(t)&&!t.is(F)}))?(y(e,t),i?t.size.top>e.mouse.y:t.size.bottom<e.mouse.y):!1}function g(e){var i=e.editable,n=e.mouse,o=e.view,r=e.triggerOffset;w(e);var s=n.y>(e.inInlineMode?o.editable.top+o.editable.height/2:Math.min(o.editable.height,o.pane.height)/2),i=i[s?"getLast":"getFirst"](function(e){return!(G(e)||Y(e))});return i?(c(e,i)&&(i=e.line.wrap[s?"getPrevious":"getNext"](function(e){return!(G(e)||Y(e))})),d(i)&&!u(i)&&p(e,i)?(y(e,i),!s&&i.size.top>=0&&n.y>0&&n.y<i.size.top+r?(e=e.inInlineMode||0===o.scroll.y?N:B,new t([null,i,R,P,e])):s&&i.size.bottom<=o.pane.height&&n.y>i.size.bottom-r&&n.y<o.pane.height?(e=e.inInlineMode||i.size.bottom>o.pane.height-r&&i.size.bottom<o.pane.height?L:B,new t([i,null,x,P,e])):null):null):null}function v(e){var n=e.mouse,r=e.view,s=e.triggerOffset,a=i(e);if(!a)return null;y(e,a);var l,c,s=Math.min(s,0|a.size.outerHeight/2),h=[];if(n.y>a.size.top-1&&n.y<a.size.top+s)c=!1;else{if(!(n.y>a.size.bottom-s&&n.y<a.size.bottom+1))return null;c=!0}if(u(a)||m(e,a,c)||a.getParent().is(K))return null;var f=o(e,a,!c);if(f){if(f&&f.type==CKEDITOR.NODE_TEXT)return null;if(d(f)){if(u(f)||!p(e,f)||f.getParent().is(K))return null;h=[f,a][c?"reverse":"concat"]().concat([A,P])}}else a.equals(e.editable[c?"getLast":"getFirst"](e.isRelevant))?(w(e),c&&n.y>a.size.bottom-s&&n.y<r.pane.height&&a.size.bottom>r.pane.height-s&&a.size.bottom<r.pane.height?l=L:n.y>0&&n.y<a.size.top+s&&(l=N)):l=B,h=[null,a][c?"reverse":"concat"]().concat([c?x:R,P,l,a.equals(e.editable[c?"getLast":"getFirst"](e.isRelevant))?c?L:N:B]);return 0 in h?new t(h):null}function b(e,t,i,n){for(var o=function(){var i=D.ie?t.$.currentStyle:e.win.$.getComputedStyle(t.$,"");return D.ie?function(e){return i[CKEDITOR.tools.cssStyleToDomStyle(e)]}:function(e){return i.getPropertyValue(e)}}(),r=t.getDocumentPosition(),s={},a={},l={},c={},d=J.length;d--;)s[J[d]]=parseInt(o("border-"+J[d]+"-width"),10)||0,l[J[d]]=parseInt(o("padding-"+J[d]),10)||0,a[J[d]]=parseInt(o("margin-"+J[d]),10)||0;return(!i||n)&&_(e,n),c.top=r.y-(i?0:e.view.scroll.y),c.left=r.x-(i?0:e.view.scroll.x),c.outerWidth=t.$.offsetWidth,c.outerHeight=t.$.offsetHeight,c.height=c.outerHeight-(l.top+l.bottom+s.top+s.bottom),c.width=c.outerWidth-(l.left+l.right+s.left+s.right),c.bottom=c.top+c.outerHeight,c.right=c.left+c.outerWidth,e.inInlineMode&&(c.scroll={top:t.$.scrollTop,left:t.$.scrollLeft}),T({border:s,padding:l,margin:a,ignoreScroll:i},c,!0)}function y(e,t,i){if(!d(t))return t.size=null;if(t.size){if(t.size.ignoreScroll==i&&t.size.date>new Date-$)return null}else t.size={};return T(t.size,b(e,t,i),{date:+new Date},!0)}function w(e,t){e.view.editable=b(e,e.editable,t,!0)}function _(e,t){e.view||(e.view={});var i=e.view;if(t||!(i&&i.date>new Date-$)){var n=e.win,i=n.getScrollPosition(),n=n.getViewPaneSize();T(e.view,{scroll:{x:i.x,y:i.y,width:e.doc.$.documentElement.scrollWidth-n.width,height:e.doc.$.documentElement.scrollHeight-n.height},pane:{width:n.width,height:n.height,bottom:n.height+i.y},date:+new Date},!0)}}function E(e,i,n,o){for(var r=o,s=o,a=0,l=!1,c=!1,d=e.view.pane.height,u=e.mouse;u.y+a<d&&u.y-a>0&&(l||(l=i(r,o)),c||(c=i(s,o)),!l&&u.y-a>0&&(r=n(e,{x:u.x,y:u.y-a})),!c&&u.y+a<d&&(s=n(e,{x:u.x,y:u.y+a})),!l||!c);)a+=2;return new t([r,s,null,null])}CKEDITOR.plugins.add("magicline",{init:function(e){var n,r,p,m=e.config,y=m.magicline_triggerOffset||30,E={editor:e,enterMode:m.enterMode,triggerOffset:y,holdDistance:0|y*(m.magicline_holdDistance||.5),boxColor:m.magicline_color||"#ff0000",rtl:"rtl"==m.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(m.magicline_tabuList||[]),triggers:m.magicline_everywhere?W:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}};E.isRelevant=function(e){return d(e)&&!c(E,e)&&!u(e)},e.on("contentDom",function(){var d=e.editable(),u=e.document,y=e.window;T(E,{editable:d,inInlineMode:d.isInline(),doc:u,win:y,hotNode:null},!0),E.boundary=E.inInlineMode?E.editable:E.doc.getDocumentElement(),d.is(k.$inline)||(E.inInlineMode&&!h(d)&&d.setStyles({position:"relative",top:null,left:null}),s.call(this,E),_(E),d.attachListener(e,"beforeUndoImage",function(){E.line.detach()}),d.attachListener(e,"beforeGetData",function(){E.line.wrap.getParent()&&(E.line.detach(),e.once("getData",function(){E.line.attach()},null,null,1e3))},null,null,0),d.attachListener(E.inInlineMode?u:u.getWindow().getFrame(),"mouseout",function(t){if("wysiwyg"==e.mode)if(E.inInlineMode){var i=t.data.$.clientX,t=t.data.$.clientY;_(E),w(E,!0);var n=E.view.editable,o=E.view.scroll;i>n.left-o.x&&i<n.right-o.x&&t>n.top-o.y&&t<n.bottom-o.y||(clearTimeout(p),p=null,E.line.detach())}else clearTimeout(p),p=null,E.line.detach()}),d.attachListener(d,"keyup",function(){E.hiddenMode=0}),d.attachListener(d,"keydown",function(t){if("wysiwyg"==e.mode)switch(t.data.getKeystroke()){case 2228240:case 16:E.hiddenMode=1,E.line.detach()}}),d.attachListener(E.inInlineMode?d:u,"mousemove",function(t){if(r=!0,"wysiwyg"==e.mode&&!e.readOnly&&!p){var i={x:t.data.$.clientX,y:t.data.$.clientY};p=setTimeout(function(){E.mouse=i,p=E.trigger=null,_(E),r&&!E.hiddenMode&&e.focusManager.hasFocus&&!E.line.mouseNear()&&(E.element=q(E,!0))&&((E.trigger=g(E)||v(E)||X(E))&&!f(E,E.trigger.upper||E.trigger.lower)?E.line.attach().place():(E.trigger=null,E.line.detach()),r=!1)},30)}}),d.attachListener(y,"scroll",function(){"wysiwyg"==e.mode&&(E.line.detach(),D.webkit&&(E.hiddenMode=1,clearTimeout(n),n=setTimeout(function(){E.mouseDown||(E.hiddenMode=0)},50)))}),d.attachListener(I?u:y,"mousedown",function(){"wysiwyg"==e.mode&&(E.line.detach(),E.hiddenMode=1,E.mouseDown=1)}),d.attachListener(I?u:y,"mouseup",function(){E.hiddenMode=0,E.mouseDown=0}),e.addCommand("accessPreviousSpace",l(E)),e.addCommand("accessNextSpace",l(E,!0)),e.setKeystroke([[m.magicline_keystrokePrevious,"accessPreviousSpace"],[m.magicline_keystrokeNext,"accessNextSpace"]]),e.on("loadSnapshot",function(){var t,i,n,o;for(o in{p:1,br:1,div:1})for(t=e.document.getElementsByTag(o),n=t.count();n--;)if((i=t.getItem(n)).data("cke-magicline-hot"))return E.hotNode=i,void(E.lastCmdDirection="true"===i.data("cke-magicline-dir")?!0:!1)}),this.backdoor={accessFocusSpace:a,boxTrigger:t,isLine:c,getAscendantTrigger:i,getNonEmptyNeighbour:o,getSize:b,that:E,triggerEdge:v,triggerEditable:g,triggerExpand:X})},this)}});var T=CKEDITOR.tools.extend,C=CKEDITOR.dom.element,S=C.createFromHtml,D=CKEDITOR.env,I=CKEDITOR.env.ie&&CKEDITOR.env.version<9,k=CKEDITOR.dtd,O={},R=128,x=64,A=32,P=16,M=8,N=4,L=2,B=1,j=" ",K=k.$listItem,F=k.$tableContent,H=T({},k.$nonEditable,k.$empty),W=k.$block,$=100,V="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",z=V+"border-color:transparent;display:block;border-style:solid;",U="<span>"+j+"</span>";O[CKEDITOR.ENTER_BR]="br",O[CKEDITOR.ENTER_P]="p",O[CKEDITOR.ENTER_DIV]="div",t.prototype={set:function(e,t,i){return this.properties=e+t+(i||B),this},is:function(e){return(this.properties&e)==e}};var q=function(){function e(e,t){var i=e.$.elementFromPoint(t.x,t.y);return i&&i.nodeType?new CKEDITOR.dom.element(i):null}return function(t,i,n){if(!t.mouse)return null;var o=t.doc,r=t.line.wrap,n=n||t.mouse,s=e(o,n);return i&&c(t,s)&&(r.hide(),s=e(o,n),r.show()),!s||s.type!=CKEDITOR.NODE_ELEMENT||!s.$||D.ie&&D.version<9&&!t.boundary.equals(s)&&!t.boundary.contains(s)?null:s}}(),G=CKEDITOR.dom.walker.whitespaces(),Y=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),X=function(){function t(t){var o,r,s,a=t.element;if(!d(a)||a.contains(t.editable)||a.isReadOnly())return null;if(s=E(t,function(e,t){return!t.equals(e)},function(e,t){return q(e,!0,t)},a),o=s.upper,r=s.lower,e(t,o,r))return s.set(A,M);if(o&&a.contains(o))for(;!o.getParent().equals(a);)o=o.getParent();else o=a.getFirst(function(e){return i(t,e)});if(r&&a.contains(r))for(;!r.getParent().equals(a);)r=r.getParent();else r=a.getLast(function(e){return i(t,e)});if(!o||!r)return null;if(y(t,o),y(t,r),!(t.mouse.y>o.size.top&&t.mouse.y<r.size.bottom))return null;for(var l,c,u,h,a=Number.MAX_VALUE;r&&!r.equals(o)&&(c=o.getNext(t.isRelevant));)l=Math.abs(n(t,o,c)-t.mouse.y),a>l&&(a=l,u=o,h=c),o=c,y(t,o);return u&&h&&t.mouse.y>u.size.top&&t.mouse.y<h.size.bottom?(s.upper=u,s.lower=h,s.set(A,M)):null}function i(e,t){return!(t&&t.type==CKEDITOR.NODE_TEXT||Y(t)||u(t)||c(e,t)||t.type==CKEDITOR.NODE_ELEMENT&&t.$&&t.is("br"))}return function(i){var n,o=t(i);if(n=o){n=o.upper;var r=o.lower;n=!n||!r||u(r)||u(n)||r.equals(n)||n.equals(r)||r.contains(n)||n.contains(r)?!1:p(i,n)&&p(i,r)&&e(i,n,r)?!0:!1}return n?o:null}}(),J=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function e(e){if(!e||e.type!=CKEDITOR.NODE_ELEMENT||"form"!=e.getName())return[];for(var t=[],i=["style","className"],n=0;n<i.length;n++){var o=e.$.elements.namedItem(i[n]);o&&(o=new CKEDITOR.dom.element(o),t.push([o,o.nextSibling]),o.remove())}return t}function t(e,t){if(e&&e.type==CKEDITOR.NODE_ELEMENT&&"form"==e.getName()&&t.length>0)for(var i=t.length-1;i>=0;i--){var n=t[i][0],o=t[i][1];o?n.insertBefore(o):n.appendTo(e)}}function i(i,n){var o=e(i),r={},s=i.$;return n||(r["class"]=s.className||"",s.className=""),r.inline=s.style.cssText||"",n||(s.style.cssText="position: static; overflow: visible"),t(o),r}function n(i,n){var o=e(i),r=i.$;"class"in n&&(r.className=n["class"]),"inline"in n&&(r.style.cssText=n.inline),t(o)}function o(e){if(!e.editable().isInline()){var t,i=CKEDITOR.instances;for(t in i){var n=i[t];"wysiwyg"!=n.mode||n.readOnly||(n=n.document.getBody(),n.setAttribute("contentEditable",!1),n.setAttribute("contentEditable",!0))}e.editable().hasFocus&&(e.toolbox.focus(),e.focus())}}CKEDITOR.plugins.add("maximize",{init:function(e){function t(){var t=d.getViewPaneSize();e.resize(t.width,t.height,null,!0)}if(e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var r,s,a,l=e.lang,c=CKEDITOR.document,d=c.getWindow(),u=CKEDITOR.TRISTATE_OFF;e.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var h=e.container.getFirst(function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_inner")}),p=e.ui.space("contents");if("wysiwyg"==e.mode){var f=e.getSelection();r=f&&f.getRanges(),s=d.getScrollPosition()}else{var m=e.editable().$;r=!CKEDITOR.env.ie&&[m.selectionStart,m.selectionEnd],s=[m.scrollLeft,m.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(d.on("resize",t),a=d.getScrollPosition(),f=e.container;f=f.getParent();)f.setCustomData("maximize_saved_styles",i(f)),f.setStyle("z-index",e.config.baseFloatZIndex-5);p.setCustomData("maximize_saved_styles",i(p,!0)),h.setCustomData("maximize_saved_styles",i(h,!0)),p={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},c.getDocumentElement().setStyles(p),!CKEDITOR.env.gecko&&c.getDocumentElement().setStyle("position","fixed"),
(!CKEDITOR.env.gecko||!CKEDITOR.env.quirks)&&c.getBody().setStyles(p),CKEDITOR.env.ie?setTimeout(function(){d.$.scrollTo(0,0)},0):d.$.scrollTo(0,0),h.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),h.$.offsetLeft,h.setStyles({"z-index":e.config.baseFloatZIndex-5,left:"0px",top:"0px"}),h.addClass("cke_maximized"),t(),p=h.getDocumentPosition(),h.setStyles({left:-1*p.x+"px",top:-1*p.y+"px"}),CKEDITOR.env.gecko&&o(e)}else if(this.state==CKEDITOR.TRISTATE_ON){for(d.removeListener("resize",t),p=[p,h],f=0;f<p.length;f++)n(p[f],p[f].getCustomData("maximize_saved_styles")),p[f].removeCustomData("maximize_saved_styles");for(f=e.container;f=f.getParent();)n(f,f.getCustomData("maximize_saved_styles")),f.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){d.$.scrollTo(a.x,a.y)},0):d.$.scrollTo(a.x,a.y),h.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(h.setStyle("display","inline"),setTimeout(function(){h.setStyle("display","block")},0)),e.fire("resize")}this.toggleState(),(f=this.uiItems[0])&&(p=this.state==CKEDITOR.TRISTATE_OFF?l.maximize.maximize:l.maximize.minimize,f=CKEDITOR.document.getById(f._.id),f.getChild(1).setHtml(p),f.setAttribute("title",p),f.setAttribute("href",'javascript:void("'+p+'");')),"wysiwyg"==e.mode?r?(CKEDITOR.env.gecko&&o(e),e.getSelection().selectRanges(r),(m=e.getSelection().getStartElement())&&m.scrollIntoView(!0)):d.$.scrollTo(s.x,s.y):(r&&(m.selectionStart=r[0],m.selectionEnd=r[1]),m.scrollLeft=s[0],m.scrollTop=s[1]),r=s=null,u=this.state,e.fire("maximize",this.state)},canUndo:!1}),e.ui.addButton&&e.ui.addButton("Maximize",{label:l.maximize.maximize,command:"maximize",toolbar:"tools,10"}),e.on("mode",function(){var t=e.getCommand("maximize");t.setState(t.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:u)},null,null,100)}}})}(),function(){function e(e,t,i){var n=CKEDITOR.cleanWord;return n?i():(e=CKEDITOR.getUrl(e.config.pasteFromWordCleanupFile||t+"filter/default.js"),CKEDITOR.scriptLoader.load(e,i,null,!0)),!n}function t(e){e.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(i){var n=0,o=this.path;i.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(e){var i=this;n=1,e.once("beforePaste",t),e.getClipboardData({title:e.lang.pastefromword.title},function(t){t&&e.fire("paste",{type:"html",dataValue:t.dataValue}),e.fire("afterCommandExec",{name:"pastefromword",command:i,returnValue:!!t})})}}),i.ui.addButton&&i.ui.addButton("PasteFromWord",{label:i.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),i.on("pasteState",function(e){i.getCommand("pastefromword").setState(e.data)}),i.on("paste",function(t){var r=t.data,s=r.dataValue;if(s&&(n||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(s))){var a=e(i,o,function(){a?i.fire("paste",r):(!i.config.pasteFromWordPromptCleanup||n||confirm(i.lang.pastefromword.confirmCleanup))&&(r.dataValue=CKEDITOR.cleanWord(s,i)),n=0});a&&t.cancel()}},null,null,3)}})}(),function(){var e={canUndo:!1,async:!0,exec:function(t){t.getClipboardData({title:t.lang.pastetext.title},function(i){i&&t.fire("paste",{type:"text",dataValue:i.dataValue}),t.fire("afterCommandExec",{name:"pastetext",command:e,returnValue:!!i})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(t){t.addCommand("pastetext",e),t.ui.addButton&&t.ui.addButton("PasteText",{label:t.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),t.config.forcePasteAsPlainText&&t.on("beforePaste",function(e){"html"!=e.data.type&&(e.data.type="text")}),t.on("pasteState",function(e){t.getCommand("pastetext").setState(e.data)})}})}(),CKEDITOR.plugins.add("removeformat",{init:function(e){e.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),e.ui.addButton&&e.ui.addButton("RemoveFormat",{label:e.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(e){for(var t,i=e._.removeFormatRegex||(e._.removeFormatRegex=RegExp("^(?:"+e.config.removeFormatTags.replace(/,/g,"|")+")$","i")),n=e._.removeAttributes||(e._.removeAttributes=e.config.removeFormatAttributes.split(",")),o=CKEDITOR.plugins.removeformat.filter,r=e.getSelection().getRanges(),s=r.createIterator(),a=function(e){return e.type==CKEDITOR.NODE_ELEMENT};t=s.getNextRange();){t.collapsed||t.enlarge(CKEDITOR.ENLARGE_ELEMENT);var l=t.createBookmark(),c=l.startNode,d=l.endNode,u=function(t){for(var n,r=e.elementPath(t),s=r.elements,a=1;(n=s[a])&&(!n.equals(r.block)&&!n.equals(r.blockLimit));a++)i.test(n.getName())&&o(e,n)&&t.breakParent(n)};if(u(c),d)for(u(d),c=c.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);c&&!c.equals(d);)if(c.isReadOnly()){if(c.getPosition(d)&CKEDITOR.POSITION_CONTAINS)break;c=c.getNext(a)}else u=c.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==c.getName()&&c.data("cke-realelement")||!o(e,c)||(i.test(c.getName())?c.remove(1):(c.removeAttributes(n),e.fire("removeFormatCleanup",c))),c=u;t.moveToBookmark(l)}e.forceNextSelectionCheck(),e.getSelection().selectRanges(r)}}},filter:function(e,t){for(var i=e._.removeFormatFilters||[],n=0;n<i.length;n++)if(i[n](t)===!1)return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(e){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(e)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",CKEDITOR.plugins.add("resize",{init:function(e){function t(t){var i=n,l=o,d=i+(t.data.$.screenX-r)*("rtl"==c?-1:1),t=l+(t.data.$.screenY-s);u&&(i=Math.max(a.resize_minWidth,Math.min(d,a.resize_maxWidth))),h&&(l=Math.max(a.resize_minHeight,Math.min(t,a.resize_maxHeight))),e.resize(u?i:null,l)}function i(){CKEDITOR.document.removeListener("mousemove",t),CKEDITOR.document.removeListener("mouseup",i),e.document&&(e.document.removeListener("mousemove",t),e.document.removeListener("mouseup",i))}var n,o,r,s,a=e.config,l=e.ui.spaceId("resizer"),c=e.element?e.element.getDirection(1):"ltr";if(!a.resize_dir&&(a.resize_dir="vertical"),void 0===a.resize_maxWidth&&(a.resize_maxWidth=3e3),void 0===a.resize_maxHeight&&(a.resize_maxHeight=3e3),void 0===a.resize_minWidth&&(a.resize_minWidth=750),void 0===a.resize_minHeight&&(a.resize_minHeight=250),a.resize_enabled!==!1){var d=null,u=("both"==a.resize_dir||"horizontal"==a.resize_dir)&&a.resize_minWidth!=a.resize_maxWidth,h=("both"==a.resize_dir||"vertical"==a.resize_dir)&&a.resize_minHeight!=a.resize_maxHeight,p=CKEDITOR.tools.addFunction(function(l){d||(d=e.getResizable()),n=d.$.offsetWidth||0,o=d.$.offsetHeight||0,r=l.screenX,s=l.screenY,a.resize_minWidth>n&&(a.resize_minWidth=n),a.resize_minHeight>o&&(a.resize_minHeight=o),CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",i),e.document&&(e.document.on("mousemove",t),e.document.on("mouseup",i)),l.preventDefault&&l.preventDefault()});e.on("destroy",function(){CKEDITOR.tools.removeFunction(p)}),e.on("uiSpace",function(t){if("bottom"==t.data.space){var i="";u&&!h&&(i=" cke_resizer_horizontal"),!u&&h&&(i=" cke_resizer_vertical");var n='<span id="'+l+'" class="cke_resizer'+i+" cke_resizer_"+c+'" title="'+CKEDITOR.tools.htmlEncode(e.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+p+', event)">'+("ltr"==c?"◢":"◣")+"</span>";"ltr"==c&&"ltr"==i?t.data.html=t.data.html+n:t.data.html=n+t.data.html}},e,null,100),e.on("maximize",function(t){e.ui.space("resizer")[t.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var e=function(e){var t=this._,i=t.menu;t.state!==CKEDITOR.TRISTATE_DISABLED&&(t.on&&i?i.hide():(t.previousState=t.state,i||(i=t.menu=new CKEDITOR.menu(e,{panel:{className:"cke_menu_panel",attributes:{"aria-label":e.lang.common.options}}}),i.onHide=CKEDITOR.tools.bind(function(){var i=this.command?e.getCommand(this.command).modes:this.modes;this.setState(!i||i[e.mode]?t.previousState:CKEDITOR.TRISTATE_DISABLED),t.on=0},this),this.onMenu&&i.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),t.on=1,setTimeout(function(){i.show(CKEDITOR.document.getById(t.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(t){delete t.panel,this.base(t),this.hasArrow=!0,this.click=e},statics:{handler:{create:function(e){return new CKEDITOR.ui.menuButton(e)}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",init:function(e){var t=this,i=CKEDITOR.plugins.scayt;this.bindEvents(e),this.parseConfig(e),this.addRule(e),CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js")),this.addMenuItems(e);var n=e.lang.scayt,o=CKEDITOR.env;e.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:n.text_title,title:e.plugins.wsc?e.lang.wsc.title:n.text_title,modes:{wysiwyg:!(o.ie&&(o.version<8||o.quirks))},toolbar:"spellchecker,20",refresh:function(){var t=e.ui.instances.Scayt.getState();e.scayt&&(t=i.state[e.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.fire("scaytButtonState",t)},onRender:function(){var t=this;e.on("scaytButtonState",function(e){void 0!==typeof e.data&&t.setState(e.data)})},onMenu:function(){var t=e.scayt;return e.getMenuItem("scaytToggle").label=e.lang.scayt[t&&i.state[e.name]?"btn_disable":"btn_enable"],t={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:e.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED},e.config.scayt_uiTabs[0]||delete t.scaytOptions,e.config.scayt_uiTabs[1]||delete t.scaytLangs,e.config.scayt_uiTabs[2]||delete t.scaytDict,t}}),e.contextMenu&&e.addMenuItems&&(e.contextMenu.addListener(function(){var i,n=e.scayt;if(n){var o=n.getSelectionNode();(o=o?o.getAttribute(n.getNodeAttribute()):o)&&(i=t.menuGenerator(e,o,t),n.showBanner("."+e.contextMenu._.definition.panel.className.split(" ").join(" .")))}return i}),e.contextMenu._.onHide=CKEDITOR.tools.override(e.contextMenu._.onHide,function(t){return function(){var i=e.scayt;return i&&i.hideBanner(),t.apply(this)}}))},addMenuItems:function(e){var t=this,i=CKEDITOR.plugins.scayt;e.addMenuGroup("scaytButton");var n=e.config.scayt_contextMenuItemsOrder.split("|");if(n&&n.length)for(var o=0;o<n.length;o++)e.addMenuGroup("scayt_"+n[o],o-10);e.addCommand("scaytToggle",{exec:function(e){var t=e.scayt;i.state[e.name]=!i.state[e.name],i.state[e.name]===!0?t||i.createScayt(e):t&&i.destroy(e)}}),e.addCommand("scaytAbout",{exec:function(e){e.scayt.tabToOpen="about",e.lockSelection(),e.openDialog(t.dialogName)}}),e.addCommand("scaytOptions",{exec:function(e){e.scayt.tabToOpen="options",e.lockSelection(),e.openDialog(t.dialogName)}}),e.addCommand("scaytLangs",{exec:function(e){e.scayt.tabToOpen="langs",e.lockSelection(),e.openDialog(t.dialogName)}}),e.addCommand("scaytDict",{exec:function(e){e.scayt.tabToOpen="dictionaries",e.lockSelection(),e.openDialog(t.dialogName)}}),n={scaytToggle:{label:e.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:e.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:e.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:e.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:e.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}},e.plugins.wsc&&(n.WSC={label:e.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var t=CKEDITOR.plugins.scayt,i=e.scayt,n=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(n=n.replace(/\s/g,""))?(i&&t.state[e.name]&&i.setMarkupPaused&&i.setMarkupPaused(!0),e.lockSelection(),e.execCommand("checkspell")):alert("Nothing to check!")}}),e.addMenuItems(n)},bindEvents:function(e){function t(){var t=e.scayt;t&&(t.removeMarkupInSelectionNode(),t.fire("startSpellCheck"))}var i=CKEDITOR.plugins.scayt,n=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,o=function(){i.destroy(e)},r=function(){i.state[e.name]&&!e.readOnly&&!e.scayt&&i.createScayt(e)},s=function(){var t=e.editable();t.attachListener(t,"focus",function(){CKEDITOR.plugins.scayt&&!e.scayt&&setTimeout(r,0);var t,i,o=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state[e.name]&&e.scayt;if((n||o)&&e._.savedSelection)for(var o=e._.savedSelection.getSelectedElement(),o=!o&&e._.savedSelection.getRanges(),s=0;s<o.length;s++)i=o[s],"string"==typeof i.startContainer.$.nodeValue&&(t=i.startContainer.getText().length,(t<i.startOffset||t<i.endOffset)&&e.unlockSelection(!1))},this,null,-10)},a=function(){n?(e.on("blur",o),e.on("focus",r),e.focusManager.hasFocus&&r()):r(),s()};e.on("contentDom",a),e.on("beforeCommandExec",function(t){var n;t.data.name in i.options.disablingCommandExec&&"wysiwyg"==e.mode?(n=e.scayt)&&(i.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):("bold"===t.data.name||"italic"===t.data.name||"underline"===t.data.name||"strike"===t.data.name||"subscript"===t.data.name||"superscript"===t.data.name||"enter"===t.data.name)&&(n=e.scayt)&&(n.removeMarkupInSelectionNode(),setTimeout(function(){n.fire("startSpellCheck")},0))}),e.on("beforeSetMode",function(t){"source"==t.data&&((t=e.scayt)&&(i.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)),e.document&&e.document.getBody().removeAttribute("_jquid"))}),e.on("afterCommandExec",function(t){var i;"wysiwyg"!=e.mode||"undo"!=t.data.name&&"redo"!=t.data.name||(i=e.scayt)&&setTimeout(function(){i.fire("startSpellCheck")},250)}),e.on("readOnly",function(t){var n;t&&(n=e.scayt,t.editor.readOnly===!0?n&&n.fire("removeMarkupInDocument",{}):n?n.fire("startSpellCheck"):"wysiwyg"==t.editor.mode&&i.state[t.editor.name]===!0&&(i.createScayt(e),t.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))}),e.on("beforeDestroy",o),e.on("setData",function(){o(),(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||e.plugins.divarea)&&a()},this,null,50),e.on("insertElement",function(){CKEDITOR.env.ie?setTimeout(function(){t()},50):t()},this,null,50),e.on("insertHtml",function(){t()},this,null,50),e.on("insertText",function(){t()},this,null,50),e.on("scaytDialogShown",function(t){t.data.selectPage(e.scayt.tabToOpen)}),e.on("paste",function(){var t=e.scayt;t&&t.removeMarkupInSelectionNode()},null,null,0)},parseConfig:function(e){var t=CKEDITOR.plugins.scayt;if(t.replaceOldOptionsNames(e.config),"boolean"!=typeof e.config.scayt_autoStartup&&(e.config.scayt_autoStartup=!1),t.state[e.name]=e.config.scayt_autoStartup,e.config.scayt_contextCommands||(e.config.scayt_contextCommands="ignore|ignoreall|add"),e.config.scayt_contextMenuItemsOrder||(e.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control"),e.config.scayt_sLang||(e.config.scayt_sLang="en_US"),(void 0===e.config.scayt_maxSuggestions||"number"!=typeof e.config.scayt_maxSuggestions||e.config.scayt_maxSuggestions<0)&&(e.config.scayt_maxSuggestions=5),(void 0===e.config.scayt_minWordLength||"number"!=typeof e.config.scayt_minWordLength||e.config.scayt_minWordLength<1)&&(e.config.scayt_minWordLength=4),(void 0===e.config.scayt_customDictionaryIds||"string"!=typeof e.config.scayt_customDictionaryIds)&&(e.config.scayt_customDictionaryIds=""),(void 0===e.config.scayt_userDictionaryName||"string"!=typeof e.config.scayt_userDictionaryName)&&(e.config.scayt_userDictionaryName=null),"string"==typeof e.config.scayt_uiTabs&&3===e.config.scayt_uiTabs.split(",").length){var i=[],n=[];e.config.scayt_uiTabs=e.config.scayt_uiTabs.split(","),CKEDITOR.tools.search(e.config.scayt_uiTabs,function(e){1===Number(e)||0===Number(e)?(n.push(!0),i.push(Number(e))):n.push(!1)}),e.config.scayt_uiTabs=null===CKEDITOR.tools.search(n,!1)?i:[1,1,1]}else e.config.scayt_uiTabs=[1,1,1];if("string"!=typeof e.config.scayt_serviceProtocol&&(e.config.scayt_serviceProtocol=null),"string"!=typeof e.config.scayt_serviceHost&&(e.config.scayt_serviceHost=null),"string"!=typeof e.config.scayt_servicePort&&(e.config.scayt_servicePort=null),"string"!=typeof e.config.scayt_servicePath&&(e.config.scayt_servicePath=null),e.config.scayt_moreSuggestions||(e.config.scayt_moreSuggestions="on"),"string"!=typeof e.config.scayt_customerId&&(e.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2"),"string"!=typeof e.config.scayt_srcUrl&&(t=document.location.protocol,t=-1!=t.search(/https?:/)?t:"http:",e.config.scayt_srcUrl=t+"//svc.webspellchecker.net/spellcheck31/lf/scayt3/ckscayt/ckscayt.js"),"boolean"!=typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0),"boolean"!=typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0),e.config.scayt_disableOptionsStorage){var t=CKEDITOR.tools.isArray(e.config.scayt_disableOptionsStorage)?e.config.scayt_disableOptionsStorage:"string"==typeof e.config.scayt_disableOptionsStorage?[e.config.scayt_disableOptionsStorage]:void 0,o=["all","options","lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],r=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],s=CKEDITOR.tools.search,a=CKEDITOR.tools.indexOf;e.config.scayt_disableOptionsStorage=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i],l=!!s(e,"options");if(!s(o,n)||l&&s(r,function(e){return"lang"===e?!1:void 0}))return;if(s(r,n)&&r.splice(a(r,n),1),"all"===n||l&&s(e,"lang"))return[];"options"===n&&(r=["lang"])}return t=t.concat(r)}(t)}},addRule:function(e){var t=e.dataProcessor,i=t&&t.htmlFilter,n=e._.elementsPath&&e._.elementsPath.filters,t=t&&t.dataFilter,o=e.addRemoveFormatFilter,r=function(t){var i=CKEDITOR.plugins.scayt;return e.scayt&&t.hasAttribute(i.options.data_attribute_name)?!1:void 0},s=function(t){var i=CKEDITOR.plugins.scayt,n=!0;return e.scayt&&t.hasAttribute(i.options.data_attribute_name)&&(n=!1),n};n&&n.push(r),t&&t.addRules({elements:{span:function(t){var i=CKEDITOR.plugins.scayt;return i&&i.state[e.name]&&t.classes&&CKEDITOR.tools.search(t.classes,i.options.misspelled_word_class)&&(t.classes&&t.parent.type===CKEDITOR.NODE_DOCUMENT_FRAGMENT?(delete t.attributes.style,delete t.name):delete t.classes[CKEDITOR.tools.indexOf(t.classes,i.options.misspelled_word_class)]),t}}}),i&&i.addRules({elements:{span:function(t){var i=CKEDITOR.plugins.scayt;return i&&i.state[e.name]&&t.hasClass(i.options.misspelled_word_class)&&t.attributes[i.options.data_attribute_name]&&(t.removeClass(i.options.misspelled_word_class),delete t.attributes[i.options.data_attribute_name],delete t.name),t}}}),o&&o.call(e,s)},scaytMenuDefinition:function(e){var t=this,e=e.scayt;return{scayt_ignore:{label:e.getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(e){e.scayt.ignoreWord()}},scayt_ignoreall:{label:e.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(e){e.scayt.ignoreAllWords()}},scayt_add:{label:e.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(e){var t=e.scayt;setTimeout(function(){t.addWordToUserDictionary()},10)}},option:{label:e.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(e){e.scayt.tabToOpen="options",e.lockSelection(),e.openDialog(t.dialogName)},verification:function(e){return 1==e.config.scayt_uiTabs[0]?!0:!1}},language:{label:e.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(e){e.scayt.tabToOpen="langs",e.lockSelection(),e.openDialog(t.dialogName)},verification:function(e){return 1==e.config.scayt_uiTabs[1]?!0:!1}},dictionary:{label:e.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(e){e.scayt.tabToOpen="dictionaries",e.lockSelection(),e.openDialog(t.dialogName)},verification:function(e){return 1==e.config.scayt_uiTabs[2]?!0:!1}},about:{label:e.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(e){e.scayt.tabToOpen="about",e.lockSelection(),e.openDialog(t.dialogName)}}}},buildSuggestionMenuItems:function(e,t){var i={},n={},o=e.scayt;if(t.length>0&&"no_any_suggestions"!==t[0])for(var r=0;r<t.length;r++){var s="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[r].replace(" ","_");e.addCommand(s,this.createCommand(CKEDITOR.plugins.scayt.suggestions[r])),r<e.config.scayt_maxSuggestions?(e.addMenuItem(s,{label:t[r],command:s,group:"scayt_suggest",order:r+1}),i[s]=CKEDITOR.TRISTATE_OFF):(e.addMenuItem(s,{label:t[r],command:s,group:"scayt_moresuggest",order:r+1}),n[s]=CKEDITOR.TRISTATE_OFF,"on"===e.config.scayt_moreSuggestions&&(e.addMenuItem("scayt_moresuggest",{label:o.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return n}}),i.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else i.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,e.addCommand("no_scayt_suggest",{exec:function(){}}),e.addMenuItem("no_scayt_suggest",{label:o.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return i},menuGenerator:function(e,t){var i=e.scayt,n=this.scaytMenuDefinition(e),o={},r=e.config.scayt_contextCommands.split("|");if(i.fire("getSuggestionsList",{lang:i.getLang(),word:t}),o=this.buildSuggestionMenuItems(e,CKEDITOR.plugins.scayt.suggestions),"off"==e.config.scayt_contextCommands)return o;for(var s in n)(-1!=CKEDITOR.tools.indexOf(r,s.replace("scayt_",""))||"all"==e.config.scayt_contextCommands)&&(o[s]=CKEDITOR.TRISTATE_OFF,"function"==typeof n[s].verification&&!n[s].verification(e)&&delete o[s],e.addCommand(s,{exec:n[s].exec}),e.addMenuItem(s,{label:e.lang.scayt[n[s].label]||n[s].label,command:s,group:n[s].group,order:n[s].order}));return o},createCommand:function(e){return{exec:function(t){t.scayt.replaceSelectionNode({word:e})}}}}),CKEDITOR.plugins.scayt={state:{},suggestions:[],loadingHelper:{loadOrder:[]},isLoading:!1,options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},replaceOldOptionsNames:function(e){for(var t in e)t in this.backCompatibilityMap&&(e[this.backCompatibilityMap[t]]=e[t],delete e[t])},createScayt:function(e){var t=this;this.loadScaytLibrary(e,function(e){var i={lang:e.config.scayt_sLang,container:"BODY"==e.editable().$.nodeName?e.document.getWindow().$.frameElement:e.editable().$,customDictionary:e.config.scayt_customDictionaryIds,userDictionaryName:e.config.scayt_userDictionaryName,localization:e.langCode,customer_id:e.config.scayt_customerId,debug:e.config.scayt_debug,data_attribute_name:t.options.data_attribute_name,misspelled_word_class:t.options.misspelled_word_class,"options-to-restore":e.config.scayt_disableOptionsStorage,focused:e.editable().hasFocus,ignoreElementsRegex:e.config.scayt_elementsToIgnore,minWordLength:e.config.scayt_minWordLength};e.config.scayt_serviceProtocol&&(i.service_protocol=e.config.scayt_serviceProtocol),e.config.scayt_serviceHost&&(i.service_host=e.config.scayt_serviceHost),e.config.scayt_servicePort&&(i.service_port=e.config.scayt_servicePort),e.config.scayt_servicePath&&(i.service_path=e.config.scayt_servicePath),i=new SCAYT.CKSCAYT(i,function(){},function(){}),i.subscribe("suggestionListSend",function(e){for(var t={},i=[],n=0;n<e.suggestionList.length;n++)t["word_"+e.suggestionList[n]]||(t["word_"+e.suggestionList[n]]=e.suggestionList[n],i.push(e.suggestionList[n]));CKEDITOR.plugins.scayt.suggestions=i}),i.subscribe("selectionIsChanged",function(){e.getSelection().isLocked&&e.lockSelection()}),e.scayt=i,e.fire("scaytButtonState",e.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)})},destroy:function(e){e.scayt&&e.scayt.destroy(),delete e.scayt,e.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(e,t){var i,n=this;"undefined"==typeof window.SCAYT||"function"!=typeof window.SCAYT.CKSCAYT?this.loadingHelper[e.name]||(this.loadingHelper[e.name]=t,this.loadingHelper.loadOrder.push(e.name),i=new Date,i=i.getTime(),i=e.config.scayt_srcUrl+"?"+i,CKEDITOR.scriptLoader.load(i,function(){var e;CKEDITOR.fireOnce("scaytReady");for(var t=0;t<n.loadingHelper.loadOrder.length;t++)e=n.loadingHelper.loadOrder[t],"function"==typeof n.loadingHelper[e]&&n.loadingHelper[e](CKEDITOR.instances[e]),delete n.loadingHelper[e];n.loadingHelper.loadOrder=[]})):window.SCAYT&&"function"==typeof window.SCAYT.CKSCAYT&&(CKEDITOR.fireOnce("scaytReady"),e.scayt||"function"==typeof t&&t(e))}},CKEDITOR.on("dialogDefinition",function(e){"scaytDialog"===e.data.name&&e.data.definition.dialog.on("cancel",function(){return!1},this,null,-1)}),CKEDITOR.on("scaytReady",function(){if(CKEDITOR.config.scayt_handleCheckDirty===!0){var e=CKEDITOR.editor.prototype;e.checkDirty=CKEDITOR.tools.override(e.checkDirty,function(e){return function(){var t=null,i=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state[this.name]&&this.scayt){if(t="ready"==this.status)var n=i.removeMarkupFromString(this.getSnapshot()),i=i.removeMarkupFromString(this._.previousValue),t=t&&i!==n}else t=e.call(this);return t}}),e.resetDirty=CKEDITOR.tools.override(e.resetDirty,function(e){return function(){var t=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state[this.name]&&this.scayt?this._.previousValue=t.removeMarkupFromString(this.getSnapshot()):e.call(this)}})}if(CKEDITOR.config.scayt_handleUndoRedo===!0){var e=CKEDITOR.plugins.undo.Image.prototype,t="function"==typeof e.equalsContent?"equalsContent":"equals";e[t]=CKEDITOR.tools.override(e[t],function(e){return function(t){var i=t.editor.scayt,n=this.contents,o=t.contents,r=null;return CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state[t.editor.name]&&t.editor.scayt&&(this.contents=i.removeMarkupFromString(n)||"",t.contents=i.removeMarkupFromString(o)||""),r=e.apply(this,arguments),this.contents=n,t.contents=o,r}})}}),function(){var e={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(e){this.toggleState(),this.refresh(e)},refresh:function(e){if(e.document){var t=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";e.editable()[t]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var e;e=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:[".%1 table.%2,",".%1 table.%2 > tr > td, .%1 table.%2 > tr > th,",".%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,",".%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,",".%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th","{","border : #d3d3d3 1px dotted","}"]).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders "),CKEDITOR.addCss(e)},init:function(t){var i=t.addCommand("showborders",e);i.canUndo=!1,t.config.startupShowBorders!==!1&&i.setState(CKEDITOR.TRISTATE_ON),t.on("mode",function(){i.state!=CKEDITOR.TRISTATE_DISABLED&&i.refresh(t)},null,null,100),t.on("contentDom",function(){i.state!=CKEDITOR.TRISTATE_DISABLED&&i.refresh(t)}),t.on("removeFormatCleanup",function(e){e=e.data,t.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&e.is("table")&&(!e.hasAttribute("border")||parseInt(e.getAttribute("border"),10)<=0)&&e.addClass("cke_show_border")})},afterInit:function(e){var t=e.dataProcessor,e=t&&t.dataFilter,t=t&&t.htmlFilter;e&&e.addRules({elements:{table:function(e){var e=e.attributes,t=e["class"],i=parseInt(e.border,10);i&&!(0>=i)||t&&-1!=t.indexOf("cke_show_border")||(e["class"]=(t||"")+" cke_show_border")}}}),t&&t.addRules({elements:{table:function(e){var e=e.attributes,t=e["class"];t&&(e["class"]=t.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),CKEDITOR.on("dialogDefinition",function(e){var t=e.data.name;("table"==t||"tableProperties"==t)&&(e=e.data.definition,t=e.getContents("info").get("txtBorder"),t.commit=CKEDITOR.tools.override(t.commit,function(e){return function(t,i){e.apply(this,arguments);var n=parseInt(this.getValue(),10);i[!n||0>=n?"addClass":"removeClass"]("cke_show_border")}}),(e=(e=e.getContents("advanced"))&&e.get("advCSSClasses"))&&(e.setup=CKEDITOR.tools.override(e.setup,function(e){return function(){e.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}}),e.commit=CKEDITOR.tools.override(e.commit,function(e){return function(t,i){e.apply(this,arguments),parseInt(i.getAttribute("border"),10)||i.addClass("cke_show_border")}})))})}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(t){function i(){var e=o&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),e&&this.focus()}if(t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var n=CKEDITOR.plugins.sourcearea;t.addMode("source",function(n){var o=t.ui.space("contents").getDocument().createElement("textarea");o.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",t.config.sourceAreaTabSize||4))),o.setAttribute("dir","ltr"),o.addClass("cke_source cke_reset cke_enable_context_menu"),t.ui.space("contents").append(o),o=t.editable(new e(t,o)),o.setData(t.getData(1)),CKEDITOR.env.ie&&(o.attachListener(t,"resize",i,o),o.attachListener(CKEDITOR.document.getWindow(),"resize",i,o),CKEDITOR.tools.setTimeout(i,0,o)),t.fire("ariaWidget",this),n()}),t.addCommand("source",n.commands.source),t.ui.addButton&&t.ui.addButton("Source",{label:t.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),t.on("mode",function(){t.getCommand("source").setState("source"==t.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var o=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var e=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(e){this.setValue(e),this.status="ready",this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(e){this[(e?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){e.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(e){"wysiwyg"==e.mode&&e.fire("saveSnapshot"),e.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),e.setMode("source"==e.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(e){var t=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),e.addCommand("specialchar",{exec:function(){var i=e.langCode,i=t.availableLangs[i]?i:t.availableLangs[i.replace(/-.*/,"")]?i.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+i+".js"),function(){CKEDITOR.tools.extend(e.lang.specialchar,t.langEntries[i]),e.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),e.ui.addButton&&e.ui.addButton("SpecialChar",{label:e.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),
function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(e){var t=e.config,i=e.lang.stylescombo,n={},o=[],r=[];e.on("stylesSet",function(i){if(i=i.data.styles){for(var s,a,l,c=0,d=i.length;d>c;c++)s=i[c],e.blockless&&s.element in CKEDITOR.dtd.$block||(a=s.name,s=new CKEDITOR.style(s),(!e.filter.customConfig||e.filter.check(s))&&(s._name=a,s._.enterMode=t.enterMode,s._.type=l=s.assignedTo||s.type,s._.weight=c+1e3*(l==CKEDITOR.STYLE_OBJECT?1:l==CKEDITOR.STYLE_BLOCK?2:3),n[a]=s,o.push(s),r.push(s)));o.sort(function(e,t){return e._.weight-t._.weight})}}),e.ui.addRichCombo("Styles",{label:i.label,title:i.panelTitle,toolbar:"styles,10",allowedContent:r,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!0,attributes:{"aria-label":i.panelTitle}},init:function(){var e,t,n,r,s,a;for(s=0,a=o.length;a>s;s++)e=o[s],t=e._name,r=e._.type,r!=n&&(this.startGroup(i["panelTitle"+r]),n=r),this.add(t,e.type==CKEDITOR.STYLE_OBJECT?t:e.buildPreview(),t);this.commit()},onClick:function(t){e.focus(),e.fire("saveSnapshot");var t=n[t],i=e.elementPath();e[t.checkActive(i,e)?"removeStyle":"applyStyle"](t),e.fire("saveSnapshot")},onRender:function(){e.on("selectionChange",function(t){for(var i,o=this.getValue(),t=t.data.path.elements,r=0,s=t.length;s>r;r++){i=t[r];for(var a in n)if(n[a].checkElementRemovable(i,!0,e))return void(a!=o&&this.setValue(a))}this.setValue("")},this)},onOpen:function(){var t=e.getSelection().getSelectedElement(),t=e.elementPath(t),o=[0,0,0,0];this.showAll(),this.unmarkAll();for(var r in n){var s=n[r],a=s._.type;s.checkApplicable(t,e,e.activeFilter)?o[a]++:this.hideItem(r),s.checkActive(t,e)&&this.mark(r)}o[CKEDITOR.STYLE_BLOCK]||this.hideGroup(i["panelTitle"+CKEDITOR.STYLE_BLOCK]),o[CKEDITOR.STYLE_INLINE]||this.hideGroup(i["panelTitle"+CKEDITOR.STYLE_INLINE]),o[CKEDITOR.STYLE_OBJECT]||this.hideGroup(i["panelTitle"+CKEDITOR.STYLE_OBJECT])},refresh:function(){var t=e.elementPath();if(t){for(var i in n)if(n[i].checkApplicable(t,e,e.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){n={},o=[]}})}})}(),function(){function e(e){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(t){if(t.editable().hasFocus){var i,n=t.getSelection();if(i=new CKEDITOR.dom.elementPath(n.getCommonAncestor(),n.root).contains({td:1,th:1},1)){var n=t.createRange(),o=CKEDITOR.tools.tryThese(function(){var t=i.getParent().$.cells[i.$.cellIndex+(e?-1:1)];return t.parentNode.parentNode,t},function(){var t=i.getParent(),t=t.getAscendant("table").$.rows[t.$.rowIndex+(e?-1:1)];return t.cells[e?t.cells.length-1:0]});if(o||e){if(!o)return!0;o=new CKEDITOR.dom.element(o),n.moveToElementEditStart(o),(!n.checkStartOfBlock()||!n.checkEndOfBlock())&&n.selectNodeContents(o)}else{for(var r=i.getAscendant("table").$,o=i.getParent().$.cells,r=new CKEDITOR.dom.element(r.insertRow(-1),t.document),s=0,a=o.length;a>s;s++)r.append(new CKEDITOR.dom.element(o[s],t.document).clone(!1,!1)).appendBogus();n.moveToElementEditStart(r)}return n.select(!0),!0}}return!1}}}var t={editorFocus:!1,modes:{wysiwyg:1,source:1}},i={exec:function(e){e.container.focusNext(!0,e.tabIndex)}},n={exec:function(e){e.container.focusPrevious(!0,e.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(o){for(var r=o.config.enableTabKeyTools!==!1,s=o.config.tabSpaces||0,a="";s--;)a+=" ";a&&o.on("key",function(e){9==e.data.keyCode&&(o.insertText(a),e.cancel())}),r&&o.on("key",function(e){(9==e.data.keyCode&&o.execCommand("selectNextCell")||e.data.keyCode==CKEDITOR.SHIFT+9&&o.execCommand("selectPreviousCell"))&&e.cancel()}),o.addCommand("blur",CKEDITOR.tools.extend(i,t)),o.addCommand("blurBack",CKEDITOR.tools.extend(n,t)),o.addCommand("selectNextCell",e()),o.addCommand("selectPreviousCell",e(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(e,t){var i,n,o,r,s,a,l=void 0===t?this.getTabIndex():t;if(0>=l)for(s=this.getNextSourceNode(e,CKEDITOR.NODE_ELEMENT);s;){if(s.isVisible()&&0===s.getTabIndex()){o=s;break}s=s.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(s=this.getDocument().getBody().getFirst();s=s.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!i)if(!n&&s.equals(this)){if(n=!0,e){if(!(s=s.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;i=1}}else n&&!this.contains(s)&&(i=1);if(s.isVisible()&&!((a=s.getTabIndex())<0)){if(i&&a==l){o=s;break}a>l&&(!o||!r||r>a)?(o=s,r=a):o||0!==a||(o=s,r=a)}}o&&o.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(e,t){for(var i,n,o,r,s=void 0===t?this.getTabIndex():t,a=0,l=this.getDocument().getBody().getLast();l=l.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!i)if(!n&&l.equals(this)){if(n=!0,e){if(!(l=l.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;i=1}}else n&&!this.contains(l)&&(i=1);if(l.isVisible()&&!((r=l.getTabIndex())<0))if(0>=s){if(i&&0===r){o=l;break}r>a&&(o=l,a=r)}else{if(i&&r==s){o=l;break}s>r&&(!o||r>a)&&(o=l,a=r)}}o&&o.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(e){function t(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!e.blockless){var i=e.lang.table;e.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(e.plugins.dialogadvtab?"table"+e.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]})),e.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",t())),e.addCommand("tableDelete",t({exec:function(e){var t=e.elementPath().contains("table",1);if(t){var i=t.getParent(),n=e.editable();1==i.getChildCount()&&!i.is("td","th")&&!i.equals(n)&&(t=i),e=e.createRange(),e.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START),t.remove(),e.select()}}})),e.ui.addButton&&e.ui.addButton("Table",{label:i.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),e.addMenuItems&&e.addMenuItems({table:{label:i.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:i.deleteTable,command:"tableDelete",group:"table",order:1}}),e.on("doubleclick",function(e){e.data.element.is("table")&&(e.data.dialog="tableProperties")}),e.contextMenu&&e.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}}),function(){function e(e){function t(e){i.length>0||e.type!=CKEDITOR.NODE_ELEMENT||!h.test(e.getName())||e.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(n,e,"selected_cell",!0),i.push(e))}for(var e=e.getRanges(),i=[],n={},o=0;o<e.length;o++){var r=e[o];if(r.collapsed)r=r.getCommonAncestor(),(r=r.getAscendant("td",!0)||r.getAscendant("th",!0))&&i.push(r);else{var s,r=new CKEDITOR.dom.walker(r);for(r.guard=t;s=r.next();)s.type==CKEDITOR.NODE_ELEMENT&&s.is(CKEDITOR.dtd.table)||(s=s.getAscendant("td",!0)||s.getAscendant("th",!0))&&!s.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(n,s,"selected_cell",!0),i.push(s))}}return CKEDITOR.dom.element.clearAllMarkers(n),i}function t(t,i){for(var n=e(t),o=n[0],r=o.getAscendant("table"),o=o.getDocument(),s=n[0].getParent(),a=s.$.rowIndex,n=n[n.length-1],l=n.getParent().$.rowIndex+n.$.rowSpan-1,n=new CKEDITOR.dom.element(r.$.rows[l]),a=i?a:l,s=i?s:n,n=CKEDITOR.tools.buildTableMap(r),r=n[a],a=i?n[a-1]:n[a+1],n=n[0].length,o=o.createElement("tr"),l=0;r[l]&&n>l;l++){var c;r[l].rowSpan>1&&a&&r[l]==a[l]?(c=r[l],c.rowSpan=c.rowSpan+1):(c=new CKEDITOR.dom.element(r[l]).clone(),c.removeAttribute("rowSpan"),c.appendBogus(),o.append(c),c=c.$),l+=c.colSpan-1}i?o.insertBefore(s):o.insertAfter(s)}function i(t){if(t instanceof CKEDITOR.dom.selection){for(var n=e(t),o=n[0].getAscendant("table"),r=CKEDITOR.tools.buildTableMap(o),t=n[0].getParent().$.rowIndex,n=n[n.length-1],s=n.getParent().$.rowIndex+n.$.rowSpan-1,n=[],a=t;s>=a;a++){for(var l=r[a],c=new CKEDITOR.dom.element(o.$.rows[a]),d=0;d<l.length;d++){var u=new CKEDITOR.dom.element(l[d]),h=u.getParent().$.rowIndex;1==u.$.rowSpan?u.remove():(u.$.rowSpan=u.$.rowSpan-1,h==a&&(h=r[a+1],h[d-1]?u.insertAfter(new CKEDITOR.dom.element(h[d-1])):new CKEDITOR.dom.element(o.$.rows[a+1]).append(u,1))),d+=u.$.colSpan-1}n.push(c)}for(r=o.$.rows,o=new CKEDITOR.dom.element(r[s+1]||(t>0?r[t-1]:null)||o.$.parentNode),a=n.length;a>=0;a--)i(n[a]);return o}return t instanceof CKEDITOR.dom.element&&(o=t.getAscendant("table"),1==o.$.rows.length?o.remove():t.remove()),null}function n(e,t){for(var i=t?1/0:0,n=0;n<e.length;n++){var o;o=e[n];for(var r=t,s=o.getParent().$.cells,a=0,l=0;l<s.length;l++){var c=s[l],a=a+(r?1:c.colSpan);if(c==o.$)break}o=a-1,(t?i>o:o>i)&&(i=o)}return i}function o(t,i){for(var o=e(t),r=o[0].getAscendant("table"),s=n(o,1),o=n(o),s=i?s:o,a=CKEDITOR.tools.buildTableMap(r),r=[],o=[],l=a.length,c=0;l>c;c++)r.push(a[c][s]),o.push(i?a[c][s-1]:a[c][s+1]);for(c=0;l>c;c++)r[c]&&(r[c].colSpan>1&&o[c]==r[c]?(s=r[c],s.colSpan=s.colSpan+1):(s=new CKEDITOR.dom.element(r[c]).clone(),s.removeAttribute("colSpan"),s.appendBogus(),s[i?"insertBefore":"insertAfter"].call(s,new CKEDITOR.dom.element(r[c])),s=s.$),c+=s.rowSpan-1)}function r(e,t){var i=e.getStartElement();if(i=i.getAscendant("td",1)||i.getAscendant("th",1)){var n=i.clone();n.appendBogus(),t?n.insertBefore(i):n.insertAfter(i)}}function s(t){if(t instanceof CKEDITOR.dom.selection){var i,t=e(t),n=t[0]&&t[0].getAscendant("table");e:{var o=0;i=t.length-1;for(var r,l,c={};r=t[o++];)CKEDITOR.dom.element.setMarker(c,r,"delete_cell",!0);for(o=0;r=t[o++];)if((l=r.getPrevious())&&!l.getCustomData("delete_cell")||(l=r.getNext())&&!l.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(c),i=l;break e}CKEDITOR.dom.element.clearAllMarkers(c),l=t[0].getParent(),(l=l.getPrevious())?i=l.getLast():(l=t[i].getParent(),i=(l=l.getNext())?l.getChild(0):null)}for(l=t.length-1;l>=0;l--)s(t[l]);i?a(i,!0):n&&n.remove()}else t instanceof CKEDITOR.dom.element&&(n=t.getParent(),1==n.getChildCount()?n.remove():t.remove())}function a(e,t){var i=e.getDocument(),n=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(n.focus(),i.focus()),i=new CKEDITOR.dom.range(i),i["moveToElementEdit"+(t?"End":"Start")](e)||(i.selectNodeContents(e),i.collapse(t?!1:!0)),i.select(!0)}function l(e,t,i){if(e=e[t],"undefined"==typeof i)return e;for(t=0;e&&t<e.length;t++){if(i.is&&e[t]==i.$)return t;if(t==i)return new CKEDITOR.dom.element(e[t])}return i.is?-1:null}function c(t,i,n){var o,r=e(t);if((i?1!=r.length:r.length<2)||(o=t.getCommonAncestor())&&o.type==CKEDITOR.NODE_ELEMENT&&o.is("table"))return!1;var s,t=r[0];o=t.getAscendant("table");var a=CKEDITOR.tools.buildTableMap(o),c=a.length,d=a[0].length,u=t.getParent().$.rowIndex,h=l(a,u,t);if(i){var p;try{var f=parseInt(t.getAttribute("rowspan"),10)||1;s=parseInt(t.getAttribute("colspan"),10)||1,p=a["up"==i?u-f:"down"==i?u+f:u]["left"==i?h-s:"right"==i?h+s:h]}catch(m){return!1}if(!p||t.$==p)return!1;r["up"==i||"left"==i?"unshift":"push"](new CKEDITOR.dom.element(p))}for(var i=t.getDocument(),g=u,f=p=0,v=!n&&new CKEDITOR.dom.documentFragment(i),b=0,i=0;i<r.length;i++){s=r[i];var y=s.getParent(),w=s.getFirst(),_=s.$.colSpan,E=s.$.rowSpan,y=y.$.rowIndex,T=l(a,y,s),b=b+_*E,f=Math.max(f,T-h+_);p=Math.max(p,y-u+E),n||(_=s,(E=_.getBogus())&&E.remove(),_.trim(),s.getChildren().count()&&(y==g||!w||w.isBlockBoundary&&w.isBlockBoundary({br:1})||(g=v.getLast(CKEDITOR.dom.walker.whitespaces(!0)))&&(!g.is||!g.is("br"))&&v.append("br"),s.moveChildren(v)),i?s.remove():s.setHtml("")),g=y}if(n)return p*f==b;for(v.moveChildren(t),t.appendBogus(),f>=d?t.removeAttribute("rowSpan"):t.$.rowSpan=p,p>=c?t.removeAttribute("colSpan"):t.$.colSpan=f,n=new CKEDITOR.dom.nodeList(o.$.rows),r=n.count(),i=r-1;i>=0;i--)o=n.getItem(i),o.$.cells.length||(o.remove(),r++);return t}function d(t,i){var n=e(t);if(n.length>1)return!1;if(i)return!0;var o,n=n[0],r=n.getParent(),s=r.getAscendant("table"),a=CKEDITOR.tools.buildTableMap(s),c=r.$.rowIndex,d=l(a,c,n),u=n.$.rowSpan;if(u>1){o=Math.ceil(u/2);for(var h,u=Math.floor(u/2),r=c+o,s=new CKEDITOR.dom.element(s.$.rows[r]),a=l(a,r),r=n.clone(),c=0;c<a.length;c++){if(h=a[c],h.parentNode==s.$&&c>d){r.insertBefore(new CKEDITOR.dom.element(h));break}h=null}h||s.append(r)}else for(u=o=1,s=r.clone(),s.insertAfter(r),s.append(r=n.clone()),h=l(a,c),d=0;d<h.length;d++)h[d].rowSpan++;return r.appendBogus(),n.$.rowSpan=o,r.$.rowSpan=u,1==o&&n.removeAttribute("rowSpan"),1==u&&r.removeAttribute("rowSpan"),r}function u(t,i){var n=e(t);if(n.length>1)return!1;if(i)return!0;var n=n[0],o=n.getParent(),r=o.getAscendant("table"),r=CKEDITOR.tools.buildTableMap(r),s=l(r,o.$.rowIndex,n),a=n.$.colSpan;if(a>1)o=Math.ceil(a/2),a=Math.floor(a/2);else{for(var a=o=1,c=[],d=0;d<r.length;d++){var u=r[d];c.push(u[s]),u[s].rowSpan>1&&(d+=u[s].rowSpan-1)}for(r=0;r<c.length;r++)c[r].colSpan++}return r=n.clone(),r.insertAfter(n),r.appendBogus(),n.$.colSpan=o,r.$.colSpan=a,1==o&&n.removeAttribute("colSpan"),1==a&&r.removeAttribute("colSpan"),r}var h=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(n){function l(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function h(e,t){var i=n.addCommand(e,t);n.addFeature(i)}var p=n.lang.table;h("cellProperties",new CKEDITOR.dialogCommand("cellProperties",l({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table"}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),h("rowDelete",l({requiredContent:"table",exec:function(e){e=e.getSelection(),a(i(e))}})),h("rowInsertBefore",l({requiredContent:"table",exec:function(e){e=e.getSelection(),t(e,!0)}})),h("rowInsertAfter",l({requiredContent:"table",exec:function(e){e=e.getSelection(),t(e)}})),h("columnDelete",l({requiredContent:"table",exec:function(t){for(var i,n,t=t.getSelection(),t=e(t),o=t[0],r=t[t.length-1],t=o.getAscendant("table"),s=CKEDITOR.tools.buildTableMap(t),l=[],c=0,d=s.length;d>c;c++)for(var u=0,h=s[c].length;h>u;u++)s[c][u]==o.$&&(i=u),s[c][u]==r.$&&(n=u);for(c=i;n>=c;c++)for(u=0;u<s.length;u++)r=s[u],o=new CKEDITOR.dom.element(t.$.rows[u]),r=new CKEDITOR.dom.element(r[c]),r.$&&(1==r.$.colSpan?r.remove():r.$.colSpan=r.$.colSpan-1,u+=r.$.rowSpan-1,o.$.cells.length||l.push(o));n=t.$.rows[0]&&t.$.rows[0].cells,i=new CKEDITOR.dom.element(n[i]||(i?n[i-1]:t.$.parentNode)),l.length==d&&t.remove(),i&&a(i,!0)}})),h("columnInsertBefore",l({requiredContent:"table",exec:function(e){e=e.getSelection(),o(e,!0)}})),h("columnInsertAfter",l({requiredContent:"table",exec:function(e){e=e.getSelection(),o(e)}})),h("cellDelete",l({requiredContent:"table",exec:function(e){e=e.getSelection(),s(e)}})),h("cellMerge",l({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(e){a(c(e.getSelection()),!0)}})),h("cellMergeRight",l({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){a(c(e.getSelection(),"right"),!0)}})),h("cellMergeDown",l({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){a(c(e.getSelection(),"down"),!0)}})),h("cellVerticalSplit",l({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){a(d(e.getSelection()))}})),h("cellHorizontalSplit",l({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){a(u(e.getSelection()))}})),h("cellInsertBefore",l({requiredContent:"table",exec:function(e){e=e.getSelection(),r(e,!0)}})),h("cellInsertAfter",l({requiredContent:"table",exec:function(e){e=e.getSelection(),r(e)}})),n.addMenuItems&&n.addMenuItems({tablecell:{label:p.cell.menu,group:"tablecell",order:1,getItems:function(){var t=n.getSelection(),i=e(t);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:c(t,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:c(t,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:c(t,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:d(t,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:u(t,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:i.length>0?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:p.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:p.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:p.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:p.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:p.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:p.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:p.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:p.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:p.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:p.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:p.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:p.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:p.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:p.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:p.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:p.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:p.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),n.contextMenu&&n.contextMenu.addListener(function(e,t,i){return(e=i.contains({td:1,th:1},1))&&!e.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:e},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(e){for(var e=e.$.rows,t=-1,i=[],n=0;n<e.length;n++){t++,!i[t]&&(i[t]=[]);for(var o=-1,r=0;r<e[n].cells.length;r++){var s=e[n].cells[r];for(o++;i[t][o];)o++;for(var a=isNaN(s.colSpan)?1:s.colSpan,s=isNaN(s.rowSpan)?1:s.rowSpan,l=0;s>l;l++){i[t+l]||(i[t+l]=[]);for(var c=0;a>c;c++)i[t+l][o+c]=e[n].cells[r]}o+=a-1}}return i},function(){function e(e){function i(){for(var i=n(),r=CKEDITOR.tools.clone(e.config.toolbarGroups)||t(e),s=0;s<r.length;s++){var a=r[s];if("/"!=a){"string"==typeof a&&(a=r[s]={name:a});var l,c=a.groups;if(c)for(var d=0;d<c.length;d++)l=c[d],(l=i[l])&&o(a,l);(l=i[a.name])&&o(a,l)}}return r}function n(){var t,i,n,o={};for(t in e.ui.items)i=e.ui.items[t],n=i.toolbar||"others",n=n.split(","),i=n[0],n=parseInt(n[1]||-1,10),o[i]||(o[i]=[]),o[i].push({name:t,order:n});for(i in o)o[i]=o[i].sort(function(e,t){return e.order==t.order?0:t.order<0?-1:e.order<0?1:e.order<t.order?-1:1});return o}function o(t,i){if(i.length){t.items?t.items.push(e.ui.create("-")):t.items=[];for(var n;n=i.shift();)n="string"==typeof n?n:n.name,s&&-1!=CKEDITOR.tools.indexOf(s,n)||(n=e.ui.create(n))&&e.addFeature(n)&&t.items.push(n)}}function r(e){var t,i,n,r=[];for(t=0;t<e.length;++t)i=e[t],n={},"/"==i?r.push(i):CKEDITOR.tools.isArray(i)?(o(n,CKEDITOR.tools.clone(i)),r.push(n)):i.items&&(o(n,CKEDITOR.tools.clone(i.items)),n.name=i.name,r.push(n));return r}var s=e.config.removeButtons,s=s&&s.split(","),a=e.config.toolbar;return"string"==typeof a&&(a=e.config["toolbar_"+a]),e.toolbar=a?r(a):i()}function t(e){return e._.toolbarGroups||(e._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var i=function(){this.toolbars=[],this.focusCommandExecuted=!1};i.prototype.focus=function(){for(var e,t=0;e=this.toolbars[t++];)for(var i,n=0;i=e.items[n++];)if(i.focus)return void i.focus()};var n={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(e){e.toolbox&&(e.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){e.toolbox.focus()},100):e.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(t){var o,r=function(e,i){var n,s="rtl"==t.lang.dir,a=t.config.toolbarGroupCycling,l=s?37:39,s=s?39:37,a=void 0===a||a;switch(i){case 9:case CKEDITOR.SHIFT+9:for(;!n||!n.items.length;)if(n=9==i?(n?n.next:e.toolbar.next)||t.toolbox.toolbars[0]:(n?n.previous:e.toolbar.previous)||t.toolbox.toolbars[t.toolbox.toolbars.length-1],n.items.length)for(e=n.items[o?n.items.length-1:0];e&&!e.focus;)(e=o?e.previous:e.next)||(n=0);return e&&e.focus(),!1;case l:n=e;do n=n.next,!n&&a&&(n=e.toolbar.items[0]);while(n&&!n.focus);return n?n.focus():r(e,9),!1;case 40:return e.button&&e.button.hasArrow?(t.once("panelShow",function(e){e.data._.panel._.currentBlock.onKeyDown(40)}),e.execute()):r(e,40==i?l:s),!1;case s:case 38:n=e;do n=n.previous,!n&&a&&(n=e.toolbar.items[e.toolbar.items.length-1]);while(n&&!n.focus);return n?n.focus():(o=1,r(e,CKEDITOR.SHIFT+9),o=0),!1;case 27:return t.focus(),!1;case 13:case 32:return e.execute(),!1}return!0};t.on("uiSpace",function(n){if(n.data.space==t.config.toolbarLocation){n.removeListener(),t.toolbox=new i;var o,s,a=CKEDITOR.tools.getNextId(),l=['<span id="',a,'" class="cke_voice_label">',t.lang.toolbar.toolbars,"</span>",'<span id="'+t.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',a,'" onmousedown="return false;">'],a=t.config.toolbarStartupExpanded!==!1;t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&l.push('<span class="cke_toolbox_main"'+(a?">":' style="display:none">'));for(var c=t.toolbox.toolbars,d=e(t),u=0;u<d.length;u++){var h,p,f,m=0,g=d[u];if(g)if(o&&(l.push("</span>"),s=o=0),"/"===g)l.push('<span class="cke_toolbar_break"></span>');else{f=g.items||g;for(var v=0;v<f.length;v++){var b,y=f[v];if(y)if(y.type==CKEDITOR.UI_SEPARATOR)s=o&&y;else{if(b=y.canGroup!==!1,!m){h=CKEDITOR.tools.getNextId(),m={id:h,items:[]},p=g.name&&(t.lang.toolbar.toolbarGroups[g.name]||g.name),l.push('<span id="',h,'" class="cke_toolbar"',p?' aria-labelledby="'+h+'_label"':"",' role="toolbar">'),p&&l.push('<span id="',h,'_label" class="cke_voice_label">',p,"</span>"),l.push('<span class="cke_toolbar_start"></span>');var w=c.push(m)-1;w>0&&(m.previous=c[w-1],m.previous.next=m)}b?o||(l.push('<span class="cke_toolgroup" role="presentation">'),o=1):o&&(l.push("</span>"),o=0),h=function(e){e=e.render(t,l),w=m.items.push(e)-1,w>0&&(e.previous=m.items[w-1],e.previous.next=e),e.toolbar=m,e.onkey=r,e.onfocus=function(){t.toolbox.focusCommandExecuted||t.focus()}},s&&(h(s),s=0),h(y)}}o&&(l.push("</span>"),s=o=0),m&&l.push('<span class="cke_toolbar_end"></span></span>')}}if(t.config.toolbarCanCollapse&&l.push("</span>"),t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var _=CKEDITOR.tools.addFunction(function(){t.execCommand("toolbarCollapse")});t.on("destroy",function(){CKEDITOR.tools.removeFunction(_)}),t.addCommand("toolbarCollapse",{readOnly:1,exec:function(e){var t=e.ui.space("toolbar_collapser"),i=t.getPrevious(),n=e.ui.space("contents"),o=i.getParent(),r=parseInt(n.$.style.height,10),s=o.$.offsetHeight,a=t.hasClass("cke_toolbox_collapser_min");a?(i.show(),t.removeClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarCollapse)):(i.hide(),t.addClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarExpand)),t.getFirst().setText(a?"▲":"◀"),n.setStyle("height",r-(o.$.offsetHeight-s)+"px"),e.fire("resize")},modes:{wysiwyg:1,source:1}}),t.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),l.push('<a title="'+(a?t.lang.toolbar.toolbarCollapse:t.lang.toolbar.toolbarExpand)+'" id="'+t.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),a||l.push(" cke_toolbox_collapser_min"),l.push('" onclick="CKEDITOR.tools.callFunction('+_+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}l.push("</span>"),n.data.html=n.data.html+l.join("")}}),t.on("destroy",function(){if(this.toolbox){var e,t,i,n,o=0;for(e=this.toolbox.toolbars;o<e.length;o++)for(i=e[o].items,t=0;t<i.length;t++)n=i[t],n.clickFn&&CKEDITOR.tools.removeFunction(n.clickFn),n.keyDownFn&&CKEDITOR.tools.removeFunction(n.keyDownFn)}}),t.on("uiReady",function(){var e=t.ui.space("toolbox");e&&t.focusManager.add(e,1)}),t.addCommand("toolbarFocus",n),t.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),t.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),t.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(e,t){return t.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(e,i,n){var o=t(this.editor),r=0===i,s={name:e};if(n){if(n=CKEDITOR.tools.search(o,function(e){return e.name==n}))return!n.groups&&(n.groups=[]),i&&(i=CKEDITOR.tools.indexOf(n.groups,i),i>=0)?void n.groups.splice(i+1,0,e):void(r?n.groups.splice(0,0,e):n.groups.push(e));i=null}i&&(i=CKEDITOR.tools.indexOf(o,function(e){return e.name==i})),r?o.splice(0,0,e):"number"==typeof i?o.splice(i+1,0,s):o.push(e)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){var e=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],t={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(t){function n(e){s.enabled&&e.data.command.canUndo!==!1&&s.save()}function o(){s.enabled=t.readOnly?!1:"wysiwyg"==t.mode,s.onChange()}var s=t.undoManager=new i(t),a=s.editingHandler=new r(s),l=t.addCommand("undo",{exec:function(){s.undo()&&(t.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),c=t.addCommand("redo",{exec:function(){s.redo()&&(t.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});t.setKeystroke([[e[0],"undo"],[e[1],"redo"],[e[2],"redo"]]),s.onChange=function(){l.setState(s.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),c.setState(s.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},t.on("beforeCommandExec",n),t.on("afterCommandExec",n),t.on("saveSnapshot",function(e){s.save(e.data&&e.data.contentOnly)}),t.on("contentDom",a.attachListeners,a),t.on("instanceReady",function(){t.fire("saveSnapshot")}),t.on("beforeModeUnload",function(){"wysiwyg"==t.mode&&s.save(!0)}),t.on("mode",o),t.on("readOnly",o),t.ui.addButton&&(t.ui.addButton("Undo",{label:t.lang.undo.undo,command:"undo",toolbar:"undo,10"}),t.ui.addButton("Redo",{label:t.lang.undo.redo,command:"redo",toolbar:"undo,20"})),t.resetUndo=function(){s.reset(),t.fire("saveSnapshot")},t.on("updateSnapshot",function(){s.currentImage&&s.update()}),t.on("lockSnapshot",function(e){e=e.data,s.lock(e&&e.dontUpdate,e&&e.forceUpdate)}),t.on("unlockSnapshot",s.unlock,s)}}),CKEDITOR.plugins.undo={};var i=CKEDITOR.plugins.undo.UndoManager=function(e){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=e.config.undoStackSize||20,this.strokesLimit=25,this.editor=e,this.reset()};i.prototype={type:function(e,t){var n=i.getKeyGroup(e),o=this.strokesRecorded[n]+1,t=t||o>=this.strokesLimit;this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),t?(o=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[n]=o,this.previousKeyGroup=n},keyGroupChanged:function(e){return i.getKeyGroup(e)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(e,t,i){var o=this.editor;if(this.locked||"ready"!=o.status||"wysiwyg"!=o.mode)return!1;var r=o.editable();if(!r||"ready"!=r.status)return!1;if(r=this.snapshots,t||(t=new n(o)),t.contents===!1)return!1;if(this.currentImage)if(t.equalsContent(this.currentImage)){if(e||t.equalsSelection(this.currentImage))return!1}else i!==!1&&o.fire("change");return r.splice(this.index+1,r.length-this.index-1),r.length==this.limit&&r.shift(),this.index=r.push(t)-1,this.currentImage=t,i!==!1&&this.refreshState(),!0},restoreImage:function(e){var t,i=this.editor;e.bookmarks&&(i.focus(),t=i.getSelection()),this.locked={level:999},this.editor.loadSnapshot(e.contents),e.bookmarks?t.selectBookmarks(e.bookmarks):CKEDITOR.env.ie&&(t=this.editor.document.getBody().$.createTextRange(),t.collapse(!0),t.select()),this.locked=null,this.index=e.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),i.fire("change")},getNextImage:function(e){var t,i=this.snapshots,n=this.currentImage;if(n)if(e){for(t=this.index-1;t>=0;t--)if(e=i[t],!n.equalsContent(e))return e.index=t,e}else for(t=this.index+1;t<i.length;t++)if(e=i[t],!n.equalsContent(e))return e.index=t,e;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var e=this.getNextImage(!0);if(e)return this.restoreImage(e),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var e=this.getNextImage(!1);if(e)return this.restoreImage(e),!0}return!1},update:function(e){if(!this.locked){e||(e=new n(this.editor));for(var t=this.index,i=this.snapshots;t>0&&this.currentImage.equalsContent(i[t-1]);)t-=1;i.splice(t,this.index-t+1,e),this.index=t,this.currentImage=e}},updateSelection:function(e){if(!this.snapshots.length)return!1;var t=this.snapshots,i=t[t.length-1];return i.equalsContent(e)&&!i.equalsSelection(e)?(this.currentImage=t[t.length-1]=e,!0):!1},lock:function(e,t){if(this.locked)this.locked.level++;else if(e)this.locked={level:1};else{var i=null;if(t)i=!0;else{var o=new n(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(o)&&(i=o)}this.locked={update:i,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var e=this.locked.update;if(this.locked=null,e===!0)this.update();else if(e){var t=new n(this.editor,!0);e.equalsContent(t)||this.update()}}}},i.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},i.keyGroups={PRINTABLE:0,FUNCTIONAL:1},i.isNavigationKey=function(e){return!!i.navigationKeyCodes[e]},i.getKeyGroup=function(e){var n=i.keyGroups;return t[e]?n.FUNCTIONAL:n.PRINTABLE},i.getOppositeKeyGroup=function(e){var t=i.keyGroups;return e==t.FUNCTIONAL?t.PRINTABLE:t.FUNCTIONAL},i.ieFunctionalKeysBug=function(e){return CKEDITOR.env.ie&&i.getKeyGroup(e)==i.keyGroups.FUNCTIONAL};var n=CKEDITOR.plugins.undo.Image=function(e,t){this.editor=e,e.fire("beforeUndoImage");var i=e.getSnapshot();CKEDITOR.env.ie&&i&&(i=i.replace(/\s+data-cke-expando=".*?"/g,"")),
this.contents=i,t||(this.bookmarks=(i=i&&e.getSelection())&&i.createBookmarks2(!0)),e.fire("afterUndoImage")},o=/\b(?:href|src|name)="[^"]*?"/gi;n.prototype={equalsContent:function(e){var t=this.contents,e=e.contents;return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(t=t.replace(o,""),e=e.replace(o,"")),t!=e?!1:!0},equalsSelection:function(e){var t=this.bookmarks,e=e.bookmarks;if(t||e){if(!t||!e||t.length!=e.length)return!1;for(var i=0;i<t.length;i++){var n=t[i],o=e[i];if(n.startOffset!=o.startOffset||n.endOffset!=o.endOffset||!CKEDITOR.tools.arrayCompare(n.start,o.start)||!CKEDITOR.tools.arrayCompare(n.end,o.end))return!1}}return!0}};var r=CKEDITOR.plugins.undo.NativeEditingHandler=function(e){this.undoManager=e,this.ignoreInputEvent=!1,this.keyEventsStack=new s,this.lastKeydownImage=null};r.prototype={onKeydown:function(t){var o=t.data.getKey();229!==o&&(CKEDITOR.tools.indexOf(e,t.data.getKeystroke())>-1?t.data.preventDefault():(this.keyEventsStack.cleanUp(t),t=this.undoManager,this.keyEventsStack.getLast(o)||this.keyEventsStack.push(o),this.lastKeydownImage=new n(t.editor),(i.isNavigationKey(o)||this.undoManager.keyGroupChanged(o))&&(t.strokesRecorded[0]||t.strokesRecorded[1])&&(t.save(!1,this.lastKeydownImage,!1),t.resetType())))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var e=this.keyEventsStack.getLast();e||(e=this.keyEventsStack.push(0)),this.keyEventsStack.increment(e.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(e.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(e){var t=this.undoManager,e=e.data.getKey(),o=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(e),i.ieFunctionalKeysBug(e)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new n(t.editor,!0))||(o>0?t.type(e):i.isNavigationKey(e)&&this.onNavigationKey(!0))},onNavigationKey:function(e){var t=this.undoManager;(e||!t.save(!0,null,!1))&&t.updateSelection(new n(t.editor)),t.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},attachListeners:function(){var e=this.undoManager.editor,t=e.editable(),n=this;t.attachListener(t,"keydown",function(e){n.onKeydown(e),i.ieFunctionalKeysBug(e.data.getKey())&&n.onInput()},null,null,999),t.attachListener(t,CKEDITOR.env.ie?"keypress":"input",n.onInput,n,null,999),t.attachListener(t,"keyup",n.onKeyup,n,null,999),t.attachListener(t,"paste",n.ignoreInputEventListener,n,null,999),t.attachListener(t,"drop",n.ignoreInputEventListener,n,null,999),t.attachListener(t.isInline()?t:e.document.getDocumentElement(),"click",function(){n.onNavigationKey()},null,null,999),t.attachListener(this.undoManager.editor,"blur",function(){n.keyEventsStack.remove(9)},null,null,999)}};var s=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};s.prototype={push:function(e){return this.stack[this.stack.push({keyCode:e,inputs:0})-1]},getLastIndex:function(e){if("number"!=typeof e)return this.stack.length-1;for(var t=this.stack.length;t--;)if(this.stack[t].keyCode==e)return t;return-1},getLast:function(e){return e=this.getLastIndex(e),-1!=e?this.stack[e]:null},increment:function(e){this.getLast(e).inputs++},remove:function(e){e=this.getLastIndex(e),-1!=e&&this.stack.splice(e,1)},resetInputs:function(e){if("number"==typeof e)this.getLast(e).inputs=0;else for(e=this.stack.length;e--;)this.stack[e].inputs=0},getTotalInputs:function(){for(var e=this.stack.length,t=0;e--;)t+=this.stack[e].inputs;return t},cleanUp:function(e){e=e.data.$,!e.ctrlKey&&!e.metaKey&&this.remove(17),e.shiftKey||this.remove(16),e.altKey||this.remove(18)}}}(),CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(e){e.config.wsc_onFinish="function"==typeof e.config.wsc_onFinish?e.config.wsc_onFinish:function(){},e.config.wsc_onClose="function"==typeof e.config.wsc_onClose?e.config.wsc_onClose:function(){}},parseConfig:function(e){e.config.wsc_customerId=e.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",e.config.wsc_customDictionaryIds=e.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",e.config.wsc_userDictionaryName=e.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",e.config.wsc_customLoaderScript=e.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,CKEDITOR.config.wsc_cmd=e.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version="v4.3.0-master-aa00a1e",CKEDITOR.config.wsc_removeGlobalVariable=!0},init:function(e){var t=CKEDITOR.env;this.parseConfig(e),this.parseApi(e),e.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!(CKEDITOR.env.opera||CKEDITOR.env.air||document.domain!=window.location.hostname||t.ie&&(t.version<8||t.quirks))},"undefined"==typeof e.plugins.scayt&&e.ui.addButton&&e.ui.addButton("SpellChecker",{label:e.lang.wsc.toolbar,click:function(e){var t=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(t=t.replace(/\s/g,""))?e.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&CKEDITOR.env.version<=7?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),function(){function e(e){var i=this.editor,n=e.document,o=n.body,r=n.getElementById("cke_actscrpt");r&&r.parentNode.removeChild(r),(r=n.getElementById("cke_shimscrpt"))&&r.parentNode.removeChild(r),(r=n.getElementById("cke_basetagscrpt"))&&r.parentNode.removeChild(r),o.contentEditable=!0,CKEDITOR.env.ie&&(o.hideFocus=!0,o.disabled=!0,o.removeAttribute("disabled")),delete this._.isLoadingData,this.$=o,n=new CKEDITOR.dom.document(n),this.setup(),this.fixInitialSelection(),CKEDITOR.env.ie&&(n.getDocumentElement().addClass(n.$.compatMode),i.config.enterMode!=CKEDITOR.ENTER_P&&this.attachListener(n,"selectionchange",function(){var e=n.getBody(),t=i.getSelection(),o=t&&t.getRanges()[0];o&&e.getHtml().match(/^<p>(?:&nbsp;|<br>)<\/p>$/i)&&o.startContainer.equals(e)&&setTimeout(function(){o=i.getSelection().getRanges()[0],o.startContainer.equals("body")||(e.getFirst().remove(1),o.moveToElementEditEnd(e),o.select())},0)})),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&CKEDITOR.env.version>10)&&n.getDocumentElement().on("mousedown",function(e){e.data.getTarget().is("html")&&setTimeout(function(){i.editable().focus()})}),t(i);try{i.document.$.execCommand("2D-position",!1,!0)}catch(s){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==i.document.$.compatMode)&&this.attachListener(this,"keydown",function(e){var t=e.data.getKeystroke();if(33==t||34==t)if(CKEDITOR.env.ie)setTimeout(function(){i.getSelection().scrollIntoView()},0);else if(i.window.$.innerHeight>this.$.offsetHeight){var n=i.createRange();n[33==t?"moveToElementEditStart":"moveToElementEditEnd"](this),n.select(),e.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(n,"blur",function(){try{n.$.selection.empty()}catch(e){}}),CKEDITOR.env.iOS&&this.attachListener(n,"touchend",function(){e.focus()}),o=i.document.getElementsByTag("title").getItem(0),o.data("cke-title",o.getText()),CKEDITOR.env.ie&&(i.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready"),i.fire("contentDom"),this._.isPendingFocus&&(i.focus(),this._.isPendingFocus=!1),setTimeout(function(){i.fire("dataReady")},0),CKEDITOR.env.ie&&setTimeout(function(){if(i.document){var e=i.document.$.body;e.runtimeStyle.marginBottom="0px",e.runtimeStyle.marginBottom=""}},1e3)},0,this)}function t(e){function t(){var t;e.editable().attachListener(e,"selectionChange",function(){var n=e.getSelection().getSelectedElement();n&&(t&&(t.detachEvent("onresizestart",i),t=null),n.$.attachEvent("onresizestart",i),t=n.$)})}function i(e){e.returnValue=!1}if(CKEDITOR.env.gecko)try{var n=e.document.$;n.execCommand("enableObjectResizing",!1,!e.config.disableObjectResizing),n.execCommand("enableInlineTableEditing",!1,!e.config.disableNativeTableHandles)}catch(o){}else CKEDITOR.env.ie&&CKEDITOR.env.version<11&&e.config.disableObjectResizing&&t(e)}function i(){var e=[];if(CKEDITOR.document.$.documentMode>=8){e.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var t,i=[];for(t in CKEDITOR.dtd.$removeEmpty)i.push("html.CSS1Compat "+t+"[contenteditable=false]");e.push(i.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(e.push("html{height:100% !important}"),e.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return e.push("html{cursor:text;*cursor:auto}"),e.push("img,input,textarea{cursor:default}"),e.join("\n")}CKEDITOR.plugins.add("wysiwygarea",{init:function(e){e.config.fullPage&&e.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),e.addMode("wysiwyg",function(t){function i(i){i&&i.removeListener(),e.editable(new n(e,r.$.contentWindow.document.body)),e.setData(e.getData(1),t)}var o="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",o=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent(o)+"}())":"",r=CKEDITOR.dom.element.createFromHtml('<iframe src="'+o+'" frameBorder="0"></iframe>');r.setStyles({width:"100%",height:"100%"}),r.addClass("cke_wysiwyg_frame cke_reset");var s=e.ui.space("contents");s.append(r),(o=CKEDITOR.env.ie||CKEDITOR.env.gecko)&&r.on("load",i);var a=e.title,l=e.fire("ariaEditorHelpLabel",{}).label;if(a&&(CKEDITOR.env.ie&&l&&(a+=", "+l),r.setAttribute("title",a)),l){var a=CKEDITOR.tools.getNextId(),c=CKEDITOR.dom.element.createFromHtml('<span id="'+a+'" class="cke_voice_label">'+l+"</span>");s.append(c,1),r.setAttribute("aria-describedby",a)}e.on("beforeModeUnload",function(e){e.removeListener(),c&&c.remove()}),r.setAttributes({tabIndex:e.tabIndex,allowTransparency:"true"}),!o&&i(),CKEDITOR.env.webkit&&(o=function(){s.setStyle("width","100%"),r.hide(),r.setSize("width",s.getSize("width")),s.removeStyle("width"),r.show()},r.setCustomData("onResize",o),CKEDITOR.document.getWindow().on("resize",o)),e.fire("ariaWidget",r)})}}),CKEDITOR.editor.prototype.addContentsCss=function(e){var t=this.config,i=t.contentsCss;CKEDITOR.tools.isArray(i)||(t.contentsCss=i?[i]:[]),t.contentsCss.push(e)};var n=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(t){CKEDITOR.tools.setTimeout(e,0,this,t)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(e,t){var n=this.editor;if(t)this.setHtml(e),this.fixInitialSelection(),n.fire("dataReady");else{this._.isLoadingData=!0,n._.dataStore={id:1};var o=n.config,r=o.fullPage,s=o.docType,a=CKEDITOR.tools.buildStyleHtml(i()).replace(/<style>/,'<style data-cke-temp="1">');r||(a+=CKEDITOR.tools.buildStyleHtml(n.config.contentsCss));var l=o.baseHref?'<base href="'+o.baseHref+'" data-cke-temp="1" />':"";r&&(e=e.replace(/<!DOCTYPE[^>]*>/i,function(e){return n.docType=s=e,""}).replace(/<\?xml\s[^\?]*\?>/i,function(e){return n.xmlDeclaration=e,""})),e=n.dataProcessor.toHtml(e),r?(/<body[\s|>]/.test(e)||(e="<body>"+e),/<html[\s|>]/.test(e)||(e="<html>"+e+"</html>"),/<head[\s|>]/.test(e)?/<title[\s|>]/.test(e)||(e=e.replace(/<head[^>]*>/,"$&<title></title>")):e=e.replace(/<html[^>]*>/,"$&<head><title></title></head>"),l&&(e=e.replace(/<head[^>]*?>/,"$&"+l)),e=e.replace(/<\/head\s*>/,a+"$&"),e=s+e):e=o.docType+'<html dir="'+o.contentsLangDirection+'" lang="'+(o.contentsLanguage||n.langCode)+'"><head><title>'+this._.docTitle+"</title>"+l+a+"</head><body"+(o.bodyId?' id="'+o.bodyId+'"':"")+(o.bodyClass?' class="'+o.bodyClass+'"':"")+">"+e+"</body></html>",CKEDITOR.env.gecko&&(e=e.replace(/<body/,'<body contenteditable="true" '),CKEDITOR.env.version<2e4&&(e=e.replace(/<body[^>]*>/,"$&<!-- cke-content-start -->"))),o='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"</script>",CKEDITOR.env.ie&&CKEDITOR.env.version<9&&(o+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)</script>'),l&&CKEDITOR.env.ie&&CKEDITOR.env.version<10&&(o+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;</script>'),e=e.replace(/(?=\s*<\/(:?head)>)/,o),this.clearCustomData(),this.clearListeners(),n.fire("contentDomUnload");var c=this.getDocument();try{c.write(e)}catch(d){setTimeout(function(){c.write(e)},0)}}},getData:function(e){if(e)return this.getHtml();var e=this.editor,t=e.config,i=t.fullPage,n=i&&e.docType,o=i&&e.xmlDeclaration,r=this.getDocument(),i=i?r.getDocumentElement().getOuterHtml():r.getBody().getHtml();return CKEDITOR.env.gecko&&t.enterMode!=CKEDITOR.ENTER_BR&&(i=i.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),i=e.dataProcessor.toDataFormat(i),o&&(i=o+"\n"+i),n&&(i=n+"\n"+i),i},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:n.baseProto.focus.call(this)},detach:function(){var e=this.editor,t=e.document,e=e.window.getFrame();n.baseProto.detach.call(this),this.clearCustomData(),t.getDocumentElement().clearCustomData(),e.clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),(t=e.removeCustomData("onResize"))&&t.removeListener(),e.remove()}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.contentsCss=CKEDITOR.getUrl("contents.css"),CKEDITOR.config.plugins="dialogui,dialog,a11yhelp,about,basicstyles,blockquote,clipboard,panel,floatpanel,menu,contextmenu,elementspath,indent,indentlist,list,enterkey,entities,popup,filebrowser,floatingspace,listblock,button,richcombo,format,horizontalrule,htmlwriter,image,fakeobjects,link,magicline,maximize,pastefromword,pastetext,removeformat,resize,menubutton,scayt,showborders,sourcearea,specialchar,stylescombo,tab,table,tabletools,toolbar,undo,wsc,wysiwygarea",CKEDITOR.config.skin="moono",function(){var e=function(e,t){for(var i=CKEDITOR.getUrl("plugins/"+t),e=e.split(","),n=0;n<e.length;n++)CKEDITOR.skin.icons[e[n]]={path:i,offset:-e[++n],bgsize:e[++n]}};CKEDITOR.env.hidpi?e("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,codesnippet,384,,bgcolor,408,,textcolor,432,,creatediv,456,,docprops-rtl,480,,docprops,504,,find-rtl,528,,find,552,,replace,576,,flash,600,,button,624,,checkbox,648,,form,672,,hiddenfield,696,,imagebutton,720,,radio,744,,select-rtl,768,,select,792,,textarea-rtl,816,,textarea,840,,textfield-rtl,864,,textfield,888,,horizontalrule,912,,iframe,936,,image,960,,indent-rtl,984,,indent,1008,,outdent-rtl,1032,,outdent,1056,,justifyblock,1080,,justifycenter,1104,,justifyleft,1128,,justifyright,1152,,language,1176,,anchor-rtl,1200,,anchor,1224,,link,1248,,unlink,1272,,bulletedlist-rtl,1296,,bulletedlist,1320,,numberedlist-rtl,1344,,numberedlist,1368,,mathjax,1392,,maximize,1416,,newpage-rtl,1440,,newpage,1464,,pagebreak-rtl,1488,,pagebreak,1512,,pastefromword-rtl,1536,,pastefromword,1560,,pastetext-rtl,1584,,pastetext,1608,,placeholder,1632,,preview-rtl,1656,,preview,1680,,print,1704,,removeformat,1728,,save,1752,,scayt,1776,,selectall,1800,,showblocks-rtl,1824,,showblocks,1848,,smiley,1872,,source-rtl,1896,,source,1920,,sourcedialog-rtl,1944,,sourcedialog,1968,,specialchar,1992,,table,2016,,templates-rtl,2040,,templates,2064,,uicolor,2088,,redo-rtl,2112,,redo,2136,,undo-rtl,2160,,undo,2184,,simplebox,4416,auto,spellchecker,2232,","icons_hidpi.png"):e("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,codesnippet,384,auto,bgcolor,408,auto,textcolor,432,auto,creatediv,456,auto,docprops-rtl,480,auto,docprops,504,auto,find-rtl,528,auto,find,552,auto,replace,576,auto,flash,600,auto,button,624,auto,checkbox,648,auto,form,672,auto,hiddenfield,696,auto,imagebutton,720,auto,radio,744,auto,select-rtl,768,auto,select,792,auto,textarea-rtl,816,auto,textarea,840,auto,textfield-rtl,864,auto,textfield,888,auto,horizontalrule,912,auto,iframe,936,auto,image,960,auto,indent-rtl,984,auto,indent,1008,auto,outdent-rtl,1032,auto,outdent,1056,auto,justifyblock,1080,auto,justifycenter,1104,auto,justifyleft,1128,auto,justifyright,1152,auto,language,1176,auto,anchor-rtl,1200,auto,anchor,1224,auto,link,1248,auto,unlink,1272,auto,bulletedlist-rtl,1296,auto,bulletedlist,1320,auto,numberedlist-rtl,1344,auto,numberedlist,1368,auto,mathjax,1392,auto,maximize,1416,auto,newpage-rtl,1440,auto,newpage,1464,auto,pagebreak-rtl,1488,auto,pagebreak,1512,auto,pastefromword-rtl,1536,auto,pastefromword,1560,auto,pastetext-rtl,1584,auto,pastetext,1608,auto,placeholder,1632,auto,preview-rtl,1656,auto,preview,1680,auto,print,1704,auto,removeformat,1728,auto,save,1752,auto,scayt,1776,auto,selectall,1800,auto,showblocks-rtl,1824,auto,showblocks,1848,auto,smiley,1872,auto,source-rtl,1896,auto,source,1920,auto,sourcedialog-rtl,1944,auto,sourcedialog,1968,auto,specialchar,1992,auto,table,2016,auto,templates-rtl,2040,auto,templates,2064,auto,uicolor,2088,auto,redo-rtl,2112,auto,redo,2136,auto,undo-rtl,2160,auto,undo,2184,auto,simplebox,2208,auto,spellchecker,2232,auto","icons.png")}())}(),_wAMD.define("ckeditor",["jquery"],function(e){return function(){var t;return t||e.CKEDITOR}}(this)),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/wColorChooser",["jquery","vendor/spectrum"],e):e(window.jQuery)}(function(e){function t(t){return e.extend({showInput:!0,showPalette:!0,chooseText:"Ok",theme:"sp-w",clickoutFiresChange:!0,clickPaletteToClose:!1,preferredFormat:"hex6",showSelectionPalette:!1,dontHideBoundElement:!0,palette:[["#d5d5d5","#a1a1a1","#818181","#626262","#515151","#3f3f3f","#2a2a2a"],["#f8a9a9","#e97676","#e05c5c","#da4444","#c23b3b","#a82e2e","#8d2424"],["#f8c7a9","#e9a476","#e0915c","#da8044","#c2743b","#a85f2e","#8d5024"],["#f8eaa9","#e9cf76","#e0bf5c","#dab844","#c2a43b","#a88d2e","#8d7824"],["#c9f8a9","#a9e976","#91e05c","#81c94c","#6cb83a","#5fa233","#508d24"],["#a9f8dd","#76e9c7","#5ce0b6","#4cc9a4","#3ab890","#33a27f","#248d6c"],["#a9e4f8","#76cae9","#5cbce0","#4caac9","#3a96b8","#3387a2","#24678d"],["#b5aaf6","#9789e8","#8273da","#7161d0","#6555c2","#5848b7","#5040ae"],["#d8aaf6","#c389e8","#b073da","#a561d0","#9555c2","#8c48b7","#8640ae"],["#f6aaf0","#e889e0","#da73d2","#d061c7","#c255b9","#b748ae","#ae40a5"]]},t)}function i(t,i){var n,o,r;return e.extend({},i,{beforeShow:function(o){n=!1,r=null,i.onBeforeShow&&i.onBeforeShow(o),e(t).spectrum("container").off("selectstart").on("selectstart",!1).find(".sp-color, .sp-hue").off(".wColorChooser").on("mouseup.wColorChooser",function(){r&&i.onUpdate&&i.onUpdate(r)})},move:function(e){r=e.toHexString(),n||i.onMove&&i.onMove(r)},change:function(e){n=!0,i.onChange&&i.onChange(e.toHexString())},hide:function(){i.onBeforeHide&&i.onBeforeHide(),!n&&r&&i.onRevert&&i.onRevert(o)}})}function n(t,i){var n,o,r,s=e(t),a=s.find(".color-square");return e.extend({},i,{beforeShow:function(t){n=!1,r=null,o=a.css("background-color"),s.spectrum("set",o),o=s.spectrum("get").toHexString(),i.onBeforeShow&&i.onBeforeShow(t);var l=s.spectrum("container");l.find(".sp-color, .sp-hue").off(".wColorChooser").on("mousedown.wColorChooser",function(){e(document).off("mouseup.wColorChooser").one("mouseup.wColorChooser",function(){r&&i.onUpdate&&i.onUpdate(r)})}),l.find(".sp-input").off(".wColorChooser").on("change.wColorChooser",function(){r&&i.onUpdate&&i.onUpdate(r)})},show:function(){},move:function(e){r=e.toHexString(),a.css("background-color",r),n||i.onMove&&i.onMove(r)},change:function(e){n=!0,a.css("background-color",e.toHexString()),i.onChange&&i.onChange(e.toHexString())},hide:function(){i.onBeforeHide&&i.onBeforeHide(),!n&&r&&(a.css("background-color",o),i.onRevert&&i.onRevert(o))}})}"undefined"==typeof e.fn.wColorChooser&&e.fn.extend({wColorChooser:function(o){if(o=o||{},"set"==o)this.find(".color-square").css("background-color",arguments[1]);else if("smart"==o){var r=e(this),s=r.spectrum("isPaletteColor",r.spectrum("get"));r.spectrum(s?"collapse":"expand")}else"advanced"===o?e(this).spectrum("expand"):"basic"===o?e(this).spectrum("collapse"):this.each(function(){switch(o=t(o),o.mode){case"colorSquare":o=n(this,o);break;default:o=i(this,o)}e(this).spectrum(o)});return this}})}),window.rangy=function(){function e(e,t){var i=typeof e[t];return"function"==i||!("object"!=i||!e[t])||"unknown"==i}function t(e,t){return!("object"!=typeof e[t]||!e[t])}function i(e,t){return"undefined"!=typeof e[t]}function n(e){return function(t,i){for(var n=i.length;n--;)if(!e(t,i[n]))return!1;return!0}}function o(e){return e&&h(e,u)&&f(e,d)}function r(e){window.alert("Rangy not supported in your browser. Reason: "+e),m.initialized=!0,m.supported=!1}function s(){if(!m.initialized){var i,n=!1,s=!1;for(e(document,"createRange")&&(i=document.createRange(),h(i,c)&&f(i,l)&&(n=!0),i.detach()),(i=t(document,"body")?document.body:document.getElementsByTagName("body")[0])&&e(i,"createTextRange")&&(i=i.createTextRange(),o(i)&&(s=!0)),!n&&!s&&r("Neither Range nor TextRange are implemented"),m.initialized=!0,m.features={implementsDomRange:n,implementsTextRange:s},n=v.concat(g),s=0,i=n.length;i>s;++s)try{n[s](m)}catch(a){t(window,"console")&&e(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",a)}}}function a(e){this.name=e,this.supported=this.initialized=!1}var l=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],c=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],d=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],u=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],h=n(e),p=n(t),f=n(i),m={version:"1.2.3",initialized:!1,supported:!0,util:{isHostMethod:e,isHostObject:t,isHostProperty:i,areHostMethods:h,areHostObjects:p,areHostProperties:f,isTextRange:o},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};m.fail=r,m.warn=function(e){e="Rangy warning: "+e,m.config.alertOnWarn?window.alert(e):"undefined"!=typeof window.console&&"undefined"!=typeof window.console.log&&window.console.log(e)},{}.hasOwnProperty?m.util.extend=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}:r("hasOwnProperty not supported");var g=[],v=[];m.init=s,m.addInitListener=function(e){m.initialized?e(m):g.push(e)};var b=[];m.addCreateMissingNativeApiListener=function(e){b.push(e)},m.createMissingNativeApi=function(e){e=e||window,s();for(var t=0,i=b.length;i>t;++t)b[t](e)},a.prototype.fail=function(e){throw this.initialized=!0,this.supported=!1,Error("Module '"+this.name+"' failed to load: "+e)},a.prototype.warn=function(e){m.warn("Module "+this.name+": "+e)},a.prototype.createError=function(e){return Error("Error in Rangy "+this.name+" module: "+e)},m.createModule=function(e,t){var i=new a(e);m.modules[e]=i,v.push(function(e){t(e,i),i.initialized=!0,i.supported=!0})},m.requireModules=function(e){for(var t,i,n=0,o=e.length;o>n;++n){if(i=e[n],t=m.modules[i],!(t&&t instanceof a))throw Error("Module '"+i+"' not found");if(!t.supported)throw Error("Module '"+i+"' not supported")}};var y=!1;if(p=function(){y||(y=!0,m.initialized||s())},"undefined"==typeof window)r("No window found");else{if("undefined"!=typeof document)return e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",p,!1),e(window,"addEventListener")?window.addEventListener("load",p,!1):e(window,"attachEvent")?window.attachEvent("onload",p):r("Window does not have required addEventListener or attachEvent method"),m;r("No document found")}}(),rangy.createModule("DomUtil",function(e,t){function i(e){for(var t=0;e=e.previousSibling;)t++;return t}function n(e,t){var i,n=[];for(i=e;i;i=i.parentNode)n.push(i);for(i=t;i;i=i.parentNode)if(f(n,i))return i;return null}function o(e,t,i){for(i=i?e:e.parentNode;i;){if(e=i.parentNode,e===t)return i;i=e}return null}function r(e){return e=e.nodeType,3==e||4==e||8==e}function s(e,t){var i=t.nextSibling,n=t.parentNode;return i?n.insertBefore(e,i):n.appendChild(e),e}function a(e){if(9==e.nodeType)return e;if("undefined"!=typeof e.ownerDocument)return e.ownerDocument;if("undefined"!=typeof e.document)return e.document;if(e.parentNode)return a(e.parentNode);throw Error("getDocument: no document found for node")}function l(e){return e?r(e)?'"'+e.data+'"':1==e.nodeType?"<"+e.nodeName+(e.id?' id="'+e.id+'"':"")+">["+e.childNodes.length+"]":e.nodeName:"[No node]"}function c(e){this._next=this.root=e}function d(e,t){this.node=e,this.offset=t}function u(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var h=e.util;h.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),h.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var p=document.createElement("div");h.areHostMethods(p,["insertBefore","appendChild","cloneNode"])||t.fail("Incomplete Element implementation"),h.isHostProperty(p,"innerHTML")||t.fail("Element is missing innerHTML property"),p=document.createTextNode("test"),h.areHostMethods(p,["splitText","deleteData","insertData","appendData","cloneNode"])||t.fail("Incomplete Text Node implementation");var f=function(e,t){for(var i=e.length;i--;)if(e[i]===t)return!0;return!1};c.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t=this._current=this._next;if(this._current)if(e=t.firstChild)this._next=e;else{for(e=null;t!==this.root&&!(e=t.nextSibling);)t=t.parentNode;this._next=e}return this._current},detach:function(){this._current=this._next=this.root=null}},d.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+l(this.node)+":"+this.offset+")]"}},u.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},u.prototype.toString=function(){return this.message},e.dom={arrayContains:f,isHtmlNamespace:function(e){var t;return"undefined"==typeof e.namespaceURI||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t},parentElement:function(e){return e=e.parentNode,1==e.nodeType?e:null},getNodeIndex:i,getNodeLength:function(e){var t;return r(e)?e.length:(t=e.childNodes)?t.length:0},getCommonAncestor:n,isAncestorOf:function(e,t,i){for(t=i?t:t.parentNode;t;){if(t===e)return!0;t=t.parentNode}return!1},getClosestAncestorIn:o,isCharacterDataNode:r,insertAfter:s,splitDataNode:function(e,t){var i=e.cloneNode(!1);return i.deleteData(0,t),e.deleteData(t,e.length-t),s(i,e),i},getDocument:a,getWindow:function(e){if(e=a(e),"undefined"!=typeof e.defaultView)return e.defaultView;if("undefined"!=typeof e.parentWindow)return e.parentWindow;throw Error("Cannot get a window object for node")},getIframeWindow:function(e){if("undefined"!=typeof e.contentWindow)return e.contentWindow;if("undefined"!=typeof e.contentDocument)return e.contentDocument.defaultView;throw Error("getIframeWindow: No Window object found for iframe element")},getIframeDocument:function(e){if("undefined"!=typeof e.contentDocument)return e.contentDocument;if("undefined"!=typeof e.contentWindow)return e.contentWindow.document;throw Error("getIframeWindow: No Document object found for iframe element")},getBody:function(e){return h.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]},getRootContainer:function(e){for(var t;t=e.parentNode;)e=t;return e},comparePoints:function(e,t,r,s){var a;if(e==r)return t===s?0:s>t?-1:1;if(a=o(r,e,!0))return t<=i(a)?-1:1;if(a=o(e,r,!0))return i(a)<s?-1:1;if(t=n(e,r),e=e===t?t:o(e,t,!0),r=r===t?t:o(r,t,!0),e===r)throw Error("comparePoints got to case 4 and childA and childB are the same!");for(t=t.firstChild;t;){if(t===e)return-1;if(t===r)return 1;t=t.nextSibling}throw Error("Should not be here!")},inspectNode:l,fragmentFromNodeChildren:function(e){for(var t,i=a(e).createDocumentFragment();t=e.firstChild;)i.appendChild(t);return i},createIterator:function(e){return new c(e)},DomPosition:d},e.DOMException=u}),rangy.createModule("DomRange",function(e){function t(e,t){return 3!=e.nodeType&&(M.isAncestorOf(e,t.startContainer,!0)||M.isAncestorOf(e,t.endContainer,!0))}function i(e){return M.getDocument(e.startContainer)}function n(e,t,i){if(t=e._listeners[t])for(var n=0,o=t.length;o>n;++n)t[n].call(e,{target:e,args:i})}function o(e){return new N(e.parentNode,M.getNodeIndex(e))}function r(e){return new N(e.parentNode,M.getNodeIndex(e)+1)}function s(e,t,i){var n=11==e.nodeType?e.firstChild:e;return M.isCharacterDataNode(t)?i==t.length?M.insertAfter(e,t):t.parentNode.insertBefore(e,0==i?t:M.splitDataNode(t,i)):i>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[i]),n}function a(e){for(var t,n,o=i(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(t=e.getSubtreeIterator(),n.appendChild(a(t)),t.detach(!0)),10==n.nodeType)throw new L("HIERARCHY_REQUEST_ERR");o.appendChild(n)}return o}function l(e,t,i){var n,o;for(i=i||{stop:!1};n=e.next();)if(e.isPartiallySelectedSubtree()){if(t(n)===!1)return void(i.stop=!0);if(n=e.getSubtreeIterator(),l(n,t,i),n.detach(!0),i.stop)return}else for(n=M.createIterator(n);o=n.next();)if(t(o)===!1)return void(i.stop=!0)}function c(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),c(t),t.detach(!0)):e.remove()}function d(e){for(var t,n,o=i(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(d(n)),n.detach(!0)):e.remove(),10==t.nodeType)throw new L("HIERARCHY_REQUEST_ERR");o.appendChild(t)}return o}function u(e,t,i){var n,o=!(!t||!t.length),r=!!i;o&&(n=RegExp("^("+t.join("|")+")$"));var s=[];return l(new p(e,!1),function(e){o&&!n.test(e.nodeType)||r&&!i(e)||s.push(e)}),s}function h(e){return"["+("undefined"==typeof e.getName?"Range":e.getName())+"("+M.inspectNode(e.startContainer)+":"+e.startOffset+", "+M.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function p(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var i=e.commonAncestorContainer;this.sc===this.ec&&M.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==i||M.isCharacterDataNode(this.sc)?M.getClosestAncestorIn(this.sc,i,!0):this.sc.childNodes[this.so],this._last=this.ec!==i||M.isCharacterDataNode(this.ec)?M.getClosestAncestorIn(this.ec,i,!0):this.ec.childNodes[this.eo-1])}}function f(e){this.code=this[e],this.codeName=e,this.message="RangeException: "+this.codeName}function m(e,t,i){this.nodes=u(e,t,i),this._next=this.nodes[0],this._position=0}function g(e){return function(t,i){for(var n,o=i?t:t.parentNode;o;){
if(n=o.nodeType,M.arrayContains(e,n))return o;o=o.parentNode}return null}}function v(e,t){if(V(e,t))throw new f("INVALID_NODE_TYPE_ERR")}function b(e){if(!e.startContainer)throw new L("INVALID_STATE_ERR")}function y(e,t){if(!M.arrayContains(t,e.nodeType))throw new f("INVALID_NODE_TYPE_ERR")}function w(e,t){if(0>t||t>(M.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new L("INDEX_SIZE_ERR")}function _(e,t){if(W(e,!0)!==W(t,!0))throw new L("WRONG_DOCUMENT_ERR")}function E(e){if($(e,!0))throw new L("NO_MODIFICATION_ALLOWED_ERR")}function T(e,t){if(!e)throw new L(t)}function C(e){return!!e.startContainer&&!!e.endContainer&&!(!M.arrayContains(j,e.startContainer.nodeType)&&!W(e.startContainer,!0))&&!(!M.arrayContains(j,e.endContainer.nodeType)&&!W(e.endContainer,!0))&&e.startOffset<=(M.isCharacterDataNode(e.startContainer)?e.startContainer.length:e.startContainer.childNodes.length)&&e.endOffset<=(M.isCharacterDataNode(e.endContainer)?e.endContainer.length:e.endContainer.childNodes.length)}function S(e){if(b(e),!C(e))throw Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function D(){}function I(e){e.START_TO_START=Y,e.START_TO_END=X,e.END_TO_END=J,e.END_TO_START=Q,e.NODE_BEFORE=Z,e.NODE_AFTER=ee,e.NODE_BEFORE_AND_AFTER=te,e.NODE_INSIDE=ie}function k(e){I(e),I(e.prototype)}function O(e,t){return function(){S(this);var i=this.startContainer,n=this.startOffset,o=this.commonAncestorContainer,s=new p(this,!0);return i!==o&&(i=M.getClosestAncestorIn(i,o,!0),n=r(i),i=n.node,n=n.offset),l(s,E),s.reset(),o=e(s),s.detach(),t(this,i,n,i,n),o}}function R(i,n,s){function a(e,t){return function(i){b(this),y(i,B),y(H(i),j),i=(e?o:r)(i),(t?l:u)(this,i.node,i.offset)}}function l(e,t,i){var o=e.endContainer,r=e.endOffset;(t!==e.startContainer||i!==e.startOffset)&&((H(t)!=H(o)||1==M.comparePoints(t,i,o,r))&&(o=t,r=i),n(e,t,i,o,r))}function u(e,t,i){var o=e.startContainer,r=e.startOffset;(t!==e.endContainer||i!==e.endOffset)&&((H(t)!=H(o)||-1==M.comparePoints(t,i,o,r))&&(o=t,r=i),n(e,o,r,t,i))}i.prototype=new D,e.util.extend(i.prototype,{setStart:function(e,t){b(this),v(e,!0),w(e,t),l(this,e,t)},setEnd:function(e,t){b(this),v(e,!0),w(e,t),u(this,e,t)},setStartBefore:a(!0,!0),setStartAfter:a(!1,!0),setEndBefore:a(!0,!1),setEndAfter:a(!1,!1),collapse:function(e){S(this),e?n(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):n(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){b(this),v(e,!0),n(this,e,0,e,M.getNodeLength(e))},selectNode:function(e){b(this),v(e,!1),y(e,B);var t=o(e);e=r(e),n(this,t.node,t.offset,e.node,e.offset)},extractContents:O(d,n),deleteContents:O(c,n),canSurroundContents:function(){S(this),E(this.startContainer),E(this.endContainer);var e=new p(this,!0),i=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!i},detach:function(){s(this)},splitBoundaries:function(){S(this);var e=this.startContainer,t=this.startOffset,i=this.endContainer,o=this.endOffset,r=e===i;M.isCharacterDataNode(i)&&o>0&&o<i.length&&M.splitDataNode(i,o),M.isCharacterDataNode(e)&&t>0&&t<e.length&&(e=M.splitDataNode(e,t),r?(o-=t,i=e):i==e.parentNode&&o>=M.getNodeIndex(e)&&o++,t=0),n(this,e,t,i,o)},normalizeBoundaries:function(){S(this);var e=this.startContainer,t=this.startOffset,i=this.endContainer,o=this.endOffset,r=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(i=e,o=e.length,e.appendData(t.data),t.parentNode.removeChild(t))},s=function(n){var r=n.previousSibling;if(r&&r.nodeType==n.nodeType){e=n;var s=n.length;t=r.length,n.insertData(0,r.data),r.parentNode.removeChild(r),e==i?(o+=t,i=e):i==n.parentNode&&(r=M.getNodeIndex(n),o==r?(i=n,o=s):o>r&&o--)}},a=!0;M.isCharacterDataNode(i)?i.length==o&&r(i):(o>0&&(a=i.childNodes[o-1])&&M.isCharacterDataNode(a)&&r(a),a=!this.collapsed),a?M.isCharacterDataNode(e)?0==t&&s(e):t<e.childNodes.length&&(r=e.childNodes[t])&&M.isCharacterDataNode(r)&&s(r):(e=i,t=o),n(this,e,t,i,o)},collapseToPoint:function(e,t){b(this),v(e,!0),w(e,t),(e!==this.startContainer||t!==this.startOffset||e!==this.endContainer||t!==this.endOffset)&&n(this,e,t,e,t)}}),k(i)}function x(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:M.getCommonAncestor(e.startContainer,e.endContainer)}function A(e,t,i,o,r){var s=e.startContainer!==t||e.startOffset!==i,a=e.endContainer!==o||e.endOffset!==r;e.startContainer=t,e.startOffset=i,e.endContainer=o,e.endOffset=r,x(e),n(e,"boundarychange",{startMoved:s,endMoved:a})}function P(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},x(this)}e.requireModules(["DomUtil"]);var M=e.dom,N=M.DomPosition,L=e.DOMException;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,M.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,i=this._current;!M.isCharacterDataNode(i)||i!==this.sc&&i!==this.ec?i.parentNode&&i.parentNode.removeChild(i):(e=i===this.sc?this.so:0,t=i===this.ec?this.eo:i.length,e!=t&&i.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){return t(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)e=this.range.cloneRange(),e.collapse();else{e=new P(i(this.range));var t=this._current,n=t,o=0,r=t,s=M.getNodeLength(t);M.isAncestorOf(t,this.sc,!0)&&(n=this.sc,o=this.so),M.isAncestorOf(t,this.ec,!0)&&(r=this.ec,s=this.eo),A(e,n,o,r,s)}return new p(e,this.clonePartiallySelectedTextNodes)},detach:function(e){e&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},f.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},f.prototype.toString=function(){return this.message},m.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var B=[1,3,4,5,7,8,10],j=[2,9,11],K=[1,3,4,5,7,8,10,11],F=[1,3,4,5,7,8],H=M.getRootContainer,W=g([9,11]),$=g([5,6,10,12]),V=g([6,10,12]),z=document.createElement("style"),U=!1;try{z.innerHTML="<b>x</b>",U=3==z.firstChild.nodeType}catch(q){}e.features.htmlParsingConforms=U;var G=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],Y=0,X=1,J=2,Q=3,Z=0,ee=1,te=2,ie=3;D.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){S(this),_(this.startContainer,t.startContainer);var i=e==Q||e==Y?"start":"end",n=e==X||e==Y?"start":"end";return M.comparePoints(this[i+"Container"],this[i+"Offset"],t[n+"Container"],t[n+"Offset"])},insertNode:function(e){if(S(this),y(e,K),E(this.startContainer),M.isAncestorOf(e,this.startContainer,!0))throw new L("HIERARCHY_REQUEST_ERR");this.setStartBefore(s(e,this.startContainer,this.startOffset))},cloneContents:function(){S(this);var e,t;return this.collapsed?i(this).createDocumentFragment():this.startContainer===this.endContainer&&M.isCharacterDataNode(this.startContainer)?(e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=i(this).createDocumentFragment(),t.appendChild(e),t):(t=new p(this,!0),e=a(t),t.detach(),e)},canSurroundContents:function(){S(this),E(this.startContainer),E(this.endContainer);var e=new p(this,!0),i=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!i},surroundContents:function(e){if(y(e,F),!this.canSurroundContents())throw new f("BAD_BOUNDARYPOINTS_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);s(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){S(this);for(var e,t=new P(i(this)),n=G.length;n--;)e=G[n],t[e]=this[e];return t},toString:function(){S(this);var e=this.startContainer;if(e===this.endContainer&&M.isCharacterDataNode(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[];return e=new p(this,!0),l(e,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),e.detach(),t.join("")},compareNode:function(e){S(this);var t=e.parentNode,i=M.getNodeIndex(e);if(!t)throw new L("NOT_FOUND_ERR");return e=this.comparePoint(t,i),t=this.comparePoint(t,i+1),0>e?t>0?te:Z:t>0?ee:ie},comparePoint:function(e,t){return S(this),T(e,"HIERARCHY_REQUEST_ERR"),_(e,this.startContainer),M.comparePoints(e,t,this.startContainer,this.startOffset)<0?-1:M.comparePoints(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:U?function(e){var t=this.startContainer,i=M.getDocument(t);if(!t)throw new L("INVALID_STATE_ERR");var n=null;return 1==t.nodeType?n=t:M.isCharacterDataNode(t)&&(n=M.parentElement(t)),n=null===n||"HTML"==n.nodeName&&M.isHtmlNamespace(M.getDocument(n).documentElement)&&M.isHtmlNamespace(n)?i.createElement("body"):n.cloneNode(!1),n.innerHTML=e,M.fragmentFromNodeChildren(n)}:function(e){b(this);var t=i(this).createElement("body");return t.innerHTML=e,M.fragmentFromNodeChildren(t)},toHtml:function(){S(this);var e=i(this).createElement("div");return e.appendChild(this.cloneContents()),e.innerHTML},intersectsNode:function(e,t){if(S(this),T(e,"NOT_FOUND_ERR"),M.getDocument(e)!==i(this))return!1;var n=e.parentNode,o=M.getNodeIndex(e);T(n,"NOT_FOUND_ERR");var r=M.comparePoints(n,o,this.endContainer,this.endOffset);return n=M.comparePoints(n,o+1,this.startContainer,this.startOffset),t?0>=r&&n>=0:0>r&&n>0},isPointInRange:function(e,t){return S(this),T(e,"HIERARCHY_REQUEST_ERR"),_(e,this.startContainer),M.comparePoints(e,t,this.startContainer,this.startOffset)>=0&&M.comparePoints(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e,t){if(S(this),i(e)!=i(this))throw new L("WRONG_DOCUMENT_ERR");var n=M.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),o=M.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?0>=n&&o>=0:0>n&&o>0},intersection:function(e){if(this.intersectsRange(e)){var t=M.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),i=M.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),n=this.cloneRange();return-1==t&&n.setStart(e.startContainer,e.startOffset),1==i&&n.setEnd(e.endContainer,e.endOffset),n}return null},union:function(e){if(this.intersectsRange(e,!0)){var t=this.cloneRange();return-1==M.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==M.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new f("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==ie},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,M.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var i=t.getNodes([3]);return i.length>0?(t.setStart(i[0],0),e=i.pop(),t.setEnd(e,e.length),e=this.containsRange(t),t.detach(),e):this.containsNodeContents(e)},createNodeIterator:function(e,t){return S(this),new m(this,e,t)},getNodes:function(e,t){return S(this),u(this,e,t)},getDocument:function(){return i(this)},collapseBefore:function(e){b(this),this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){b(this),this.setStartAfter(e),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(e){return P.rangesEqual(this,e)},isValid:function(){return C(this)},inspect:function(){return h(this)}},R(P,A,function(e){b(e),e.startContainer=e.startOffset=e.endContainer=e.endOffset=null,e.collapsed=e.commonAncestorContainer=null,n(e,"detach",null),e._listeners=null}),e.rangePrototype=D.prototype,P.rangeProperties=G,P.RangeIterator=p,P.copyComparisonConstants=k,P.createPrototypeRange=R,P.inspect=h,P.getRangeDocument=i,P.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},e.DomRange=P,e.RangeException=f}),rangy.createModule("WrappedRange",function(e){function t(e,t,i,n){var s=e.duplicate();s.collapse(i);var a=s.parentElement();if(o.isAncestorOf(t,a,!0)||(a=t),!a.canHaveHTML)return new r(a.parentNode,o.getNodeIndex(a));t=o.getDocument(a).createElement("span");var l,c=i?"StartToStart":"StartToEnd";do a.insertBefore(t,t.previousSibling),s.moveToElementText(t);while((l=s.compareEndPoints(c,e))>0&&t.previousSibling);if(c=t.nextSibling,-1==l&&c&&o.isCharacterDataNode(c)){if(s.setEndPoint(i?"EndToStart":"EndToEnd",e),/[\r\n]/.test(c.data))for(a=s.duplicate(),i=a.text.replace(/\r\n/g,"\r").length,i=a.moveStart("character",i);-1==a.compareEndPoints("StartToEnd",a);)i++,a.moveStart("character",1);else i=s.text.length;a=new r(c,i)}else c=(n||!i)&&t.previousSibling,a=(i=(n||i)&&t.nextSibling)&&o.isCharacterDataNode(i)?new r(i,0):c&&o.isCharacterDataNode(c)?new r(c,c.length):new r(a,o.getNodeIndex(t));return t.parentNode.removeChild(t),a}function i(e,t){var i,n,r=e.offset,s=o.getDocument(e.node),a=s.body.createTextRange(),l=o.isCharacterDataNode(e.node);return l?(i=e.node,n=i.parentNode):(i=e.node.childNodes,i=r<i.length?i[r]:null,n=e.node),s=s.createElement("span"),s.innerHTML="&#feff;",i?n.insertBefore(s,i):n.appendChild(s),a.moveToElementText(s),a.collapse(!t),n.removeChild(s),l&&a[t?"moveStart":"moveEnd"]("character",r),a}e.requireModules(["DomUtil","DomRange"]);var n,o=e.dom,r=o.DomPosition,s=e.DomRange;if(!e.features.implementsDomRange||e.features.implementsTextRange&&e.config.preferTextRange){if(e.features.implementsTextRange){n=function(e){this.textRange=e,this.refresh()},n.prototype=new s(document),n.prototype.refresh=function(){var e,i,n=this.textRange;e=n.parentElement();var r=n.duplicate();r.collapse(!0),i=r.parentElement(),r=n.duplicate(),r.collapse(!1),n=r.parentElement(),i=i==n?i:o.getCommonAncestor(i,n),i=i==e?i:o.getCommonAncestor(e,i),0==this.textRange.compareEndPoints("StartToEnd",this.textRange)?i=e=t(this.textRange,i,!0,!0):(e=t(this.textRange,i,!0,!1),i=t(this.textRange,i,!1,!1)),this.setStart(e.node,e.offset),this.setEnd(i.node,i.offset)},s.copyComparisonConstants(n);var a=function(){return this}();"undefined"==typeof a.Range&&(a.Range=n),e.createNativeRange=function(e){return e=e||document,e.body.createTextRange()}}}else!function(){function t(e){for(var t,i=l.length;i--;)t=l[i],e[t]=e.nativeRange[t]}var i,r,a,l=s.rangeProperties;n=function(e){if(!e)throw Error("Range must be specified");this.nativeRange=e,t(this)},s.createPrototypeRange(n,function(e,t,i,n,o){var r=e.endContainer!==n||e.endOffset!=o;(e.startContainer!==t||e.startOffset!=i||r)&&(e.setEnd(n,o),e.setStart(t,i))},function(e){e.nativeRange.detach(),e.detached=!0;for(var t,i=l.length;i--;)t=l[i],e[t]=null}),i=n.prototype,i.selectNode=function(e){this.nativeRange.selectNode(e),t(this)},i.deleteContents=function(){this.nativeRange.deleteContents(),t(this)},i.extractContents=function(){var e=this.nativeRange.extractContents();return t(this),e},i.cloneContents=function(){return this.nativeRange.cloneContents()},i.surroundContents=function(e){this.nativeRange.surroundContents(e),t(this)},i.collapse=function(e){this.nativeRange.collapse(e),t(this)},i.cloneRange=function(){return new n(this.nativeRange.cloneRange())},i.refresh=function(){t(this)},i.toString=function(){return this.nativeRange.toString()};var c=document.createTextNode("test");o.getBody(document).appendChild(c);var d=document.createRange();d.setStart(c,0),d.setEnd(c,0);try{d.setStart(c,1),r=!0,i.setStart=function(e,i){this.nativeRange.setStart(e,i),t(this)},i.setEnd=function(e,i){this.nativeRange.setEnd(e,i),t(this)},a=function(e){return function(i){this.nativeRange[e](i),t(this)}}}catch(u){r=!1,i.setStart=function(e,i){try{this.nativeRange.setStart(e,i)}catch(n){this.nativeRange.setEnd(e,i),this.nativeRange.setStart(e,i)}t(this)},i.setEnd=function(e,i){try{this.nativeRange.setEnd(e,i)}catch(n){this.nativeRange.setStart(e,i),this.nativeRange.setEnd(e,i)}t(this)},a=function(e,i){return function(n){try{this.nativeRange[e](n)}catch(o){this.nativeRange[i](n),this.nativeRange[e](n)}t(this)}}}i.setStartBefore=a("setStartBefore","setEndBefore"),i.setStartAfter=a("setStartAfter","setEndAfter"),i.setEndBefore=a("setEndBefore","setStartBefore"),i.setEndAfter=a("setEndAfter","setStartAfter"),d.selectNodeContents(c),i.selectNodeContents=d.startContainer==c&&d.endContainer==c&&0==d.startOffset&&d.endOffset==c.length?function(e){this.nativeRange.selectNodeContents(e),t(this)}:function(e){this.setStart(e,0),this.setEnd(e,s.getEndOffset(e))},d.selectNodeContents(c),d.setEnd(c,3),r=document.createRange(),r.selectNodeContents(c),r.setEnd(c,4),r.setStart(c,2),i.compareBoundaryPoints=-1==d.compareBoundaryPoints(d.START_TO_END,r)&1==d.compareBoundaryPoints(d.END_TO_START,r)?function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},e.util.isHostMethod(d,"createContextualFragment")&&(i.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),o.getBody(document).removeChild(c),d.detach(),r.detach()}(),e.createNativeRange=function(e){return e=e||document,e.createRange()};e.features.implementsTextRange&&(n.rangeToTextRange=function(e){if(e.collapsed)return i(new r(e.startContainer,e.startOffset),!0);var t=i(new r(e.startContainer,e.startOffset),!0),n=i(new r(e.endContainer,e.endOffset),!1);return e=o.getDocument(e.startContainer).body.createTextRange(),e.setEndPoint("StartToStart",t),e.setEndPoint("EndToEnd",n),e}),n.prototype.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createRange=function(t){return t=t||document,new n(e.createNativeRange(t))},e.createRangyRange=function(e){return e=e||document,new s(e)},e.createIframeRange=function(t){return e.createRange(o.getIframeDocument(t))},e.createIframeRangyRange=function(t){return e.createRangyRange(o.getIframeDocument(t))},e.addCreateMissingNativeApiListener(function(t){t=t.document,"undefined"==typeof t.createRange&&(t.createRange=function(){return e.createRange(this)}),t=t=null})}),rangy.createModule("WrappedSelection",function(e,t){function i(e){return(e||window).getSelection()}function n(e){return(e||window).document.selection}function o(e,t,i){var n=i?"end":"start";i=i?"start":"end",e.anchorNode=t[n+"Container"],e.anchorOffset=t[n+"Offset"],e.focusNode=t[i+"Container"],e.focusOffset=t[i+"Offset"]}function r(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function s(t){var i;return t instanceof y?(i=t._selectionNativeRange,i||(i=e.createNativeRange(v.getDocument(t.startContainer)),i.setEnd(t.endContainer,t.endOffset),i.setStart(t.startContainer,t.startOffset),t._selectionNativeRange=i,t.attachListener("detach",function(){this._selectionNativeRange=null}))):t instanceof w?i=t.nativeRange:e.features.implementsDomRange&&t instanceof v.getWindow(t.startContainer).Range&&(i=t),i}function a(e){var t,i=e.getNodes();e:if(i.length&&1==i[0].nodeType){t=1;for(var n=i.length;n>t;++t)if(!v.isAncestorOf(i[0],i[t])){t=!1;break e}t=!0}else t=!1;if(!t)throw Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return i[0]}function l(e,t){var i=new w(t);e._ranges=[i],o(e,i,!1),e.rangeCount=1,e.isCollapsed=i.collapsed}function c(t){if(t._ranges.length=0,"None"==t.docSelection.type)r(t);else{var i=t.docSelection.createRange();if(i&&"undefined"!=typeof i.text)l(t,i);else{t.rangeCount=i.length;for(var n,s=v.getDocument(i.item(0)),a=0;a<t.rangeCount;++a)n=e.createRange(s),n.selectNode(i.item(a)),t._ranges.push(n);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,o(t,t._ranges[t.rangeCount-1],!1)}}}function d(e,t){var i=e.docSelection.createRange(),n=a(t),o=v.getDocument(i.item(0));o=v.getBody(o).createControlRange();for(var r=0,s=i.length;s>r;++r)o.add(i.item(r));try{o.add(n)}catch(l){throw Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select(),c(e)}function u(e,t,i){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=i,this.refresh()}function h(e,t){var i=v.getDocument(t[0].startContainer);i=v.getBody(i).createControlRange();for(var n,o=0;o<rangeCount;++o){n=a(t[o]);try{i.add(n)}catch(r){throw Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}i.select(),c(e)}function p(e,t){if(e.anchorNode&&v.getDocument(e.anchorNode)!==v.getDocument(t))throw new _("WRONG_DOCUMENT_ERR")}function f(e){var t=[],i=new E(e.anchorNode,e.anchorOffset),n=new E(e.focusNode,e.focusOffset),o="function"==typeof e.getName?e.getName():"Selection";if("undefined"!=typeof e.rangeCount)for(var r=0,s=e.rangeCount;s>r;++r)t[r]=y.inspect(e.getRangeAt(r));return"["+o+"(Ranges: "+t.join(", ")+")(anchor: "+i.inspect()+", focus: "+n.inspect()+"]"}e.requireModules(["DomUtil","DomRange","WrappedRange"]),e.config.checkSelectionRanges=!0;var m,g,v=e.dom,b=e.util,y=e.DomRange,w=e.WrappedRange,_=e.DOMException,E=v.DomPosition,T=e.util.isHostMethod(window,"getSelection"),C=e.util.isHostObject(document,"selection"),S=C&&(!T||e.config.preferTextRange);S?(m=n,e.isSelectionValid=function(e){e=(e||window).document;var t=e.selection;return"None"!=t.type||v.getDocument(t.createRange().parentElement())==e}):T?(m=i,e.isSelectionValid=function(){return!0}):t.fail("Neither document.selection or window.getSelection() detected."),e.getNativeSelection=m,T=m();var D=e.createNativeRange(document),I=v.getBody(document),k=b.areHostObjects(T,b.areHostProperties(T,["anchorOffset","focusOffset"]));e.features.selectionHasAnchorAndFocus=k;var O=b.isHostMethod(T,"extend");e.features.selectionHasExtend=O;var R="number"==typeof T.rangeCount;e.features.selectionHasRangeCount=R;var x=!1,A=!0;b.areHostMethods(T,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof T.rangeCount&&e.features.implementsDomRange&&function(){var e=document.createElement("iframe");e.frameBorder=0,e.style.position="absolute",e.style.left="-10000px",I.appendChild(e);var t=v.getIframeDocument(e);t.open(),t.write("<html><head></head><body>12</body></html>"),t.close();var i=v.getIframeWindow(e).getSelection(),n=t.documentElement.lastChild.firstChild;t=t.createRange(),t.setStart(n,1),t.collapse(!0),i.addRange(t),A=1==i.rangeCount,i.removeAllRanges();var o=t.cloneRange();t.setStart(n,0),o.setEnd(n,2),i.addRange(t),i.addRange(o),x=2==i.rangeCount,t.detach(),o.detach(),I.removeChild(e)}(),e.features.selectionSupportsMultipleRanges=x,e.features.collapsedNonEditableSelectionsSupported=A;var P,M=!1;I&&b.isHostMethod(I,"createControlRange")&&(P=I.createControlRange(),b.areHostProperties(P,["item","add"])&&(M=!0)),e.features.implementsControlRange=M,g=k?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:!1};var N;if(b.isHostMethod(T,"getRangeAt")?N=function(e,t){try{return e.getRangeAt(t)}catch(i){return null}}:k&&(N=function(t){var i=v.getDocument(t.anchorNode);return i=e.createRange(i),i.setStart(t.anchorNode,t.anchorOffset),i.setEnd(t.focusNode,t.focusOffset),i.collapsed!==this.isCollapsed&&(i.setStart(t.focusNode,t.focusOffset),i.setEnd(t.anchorNode,t.anchorOffset)),i}),e.getSelection=function(e){e=e||window;var t=e._rangySelection,i=m(e),o=C?n(e):null;return t?(t.nativeSelection=i,t.docSelection=o,t.refresh(e)):(t=new u(i,o,e),e._rangySelection=t),t},e.getIframeSelection=function(t){return e.getSelection(v.getIframeWindow(t))},P=u.prototype,!S&&k&&b.areHostMethods(T,["removeAllRanges","addRange"])){P.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),r(this)};var L=function(t,i){var n=y.getRangeDocument(i);n=e.createRange(n),n.collapseToPoint(i.endContainer,i.endOffset),t.nativeSelection.addRange(s(n)),t.nativeSelection.extend(i.startContainer,i.startOffset),t.refresh()};P.addRange=R?function(t,i){if(M&&C&&"Control"==this.docSelection.type)d(this,t);else if(i&&O)L(this,t);else{var n;x?n=this.rangeCount:(this.removeAllRanges(),n=0),this.nativeSelection.addRange(s(t)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==n+1?(e.config.checkSelectionRanges&&(n=N(this.nativeSelection,this.rangeCount-1))&&!y.rangesEqual(n,t)&&(t=new w(n)),this._ranges[this.rangeCount-1]=t,o(this,t,K(this.nativeSelection)),this.isCollapsed=g(this)):this.refresh()}}:function(e,t){t&&O?L(this,e):(this.nativeSelection.addRange(s(e)),this.refresh())},P.setRanges=function(e){if(M&&e.length>1)h(this,e);else{this.removeAllRanges();for(var t=0,i=e.length;i>t;++t)this.addRange(e[t])}}}else{if(!(b.isHostMethod(T,"empty")&&b.isHostMethod(D,"select")&&M&&S))return t.fail("No means of selecting a Range or TextRange was found"),!1;P.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=v.getDocument(this.anchorNode);else if("Control"==this.docSelection.type){var t=this.docSelection.createRange();t.length&&(e=v.getDocument(t.item(0)).body.createTextRange())}e&&(e.body.createTextRange().select(),this.docSelection.empty())}}catch(i){}r(this)},P.addRange=function(e){"Control"==this.docSelection.type?d(this,e):(w.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,o(this,e,!1))},P.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?h(this,e):t&&this.addRange(e[0])}}P.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new _("INDEX_SIZE_ERR");return this._ranges[e]};var B;if(S)B=function(t){var i;e.isSelectionValid(t.win)?i=t.docSelection.createRange():(i=v.getBody(t.win.document).createTextRange(),i.collapse(!0)),"Control"==t.docSelection.type?c(t):i&&"undefined"!=typeof i.text?l(t,i):r(t)};else if(b.isHostMethod(T,"getRangeAt")&&"number"==typeof T.rangeCount)B=function(t){if(M&&C&&"Control"==t.docSelection.type)c(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var i=0,n=t.rangeCount;n>i;++i)t._ranges[i]=new e.WrappedRange(t.nativeSelection.getRangeAt(i));o(t,t._ranges[t.rangeCount-1],K(t.nativeSelection)),t.isCollapsed=g(t)}else r(t)};else{if(!k||"boolean"!=typeof T.isCollapsed||"boolean"!=typeof D.collapsed||!e.features.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;B=function(e){var t;t=e.nativeSelection,t.anchorNode?(t=N(t,0),e._ranges=[t],e.rangeCount=1,t=e.nativeSelection,e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset,e.isCollapsed=g(e)):r(e)}}P.refresh=function(e){var t=e?this._ranges.slice(0):null;if(B(this),e){if(e=t.length,e!=this._ranges.length)return!1;for(;e--;)if(!y.rangesEqual(t[e],this._ranges[e]))return!1;return!0}};var j=function(e,t){var i=e.getAllRanges(),n=!1;e.removeAllRanges();for(var o=0,s=i.length;s>o;++o)n||t!==i[o]?e.addRange(i[o]):n=!0;e.rangeCount||r(e)};P.removeRange=M?function(e){if("Control"==this.docSelection.type){var t=this.docSelection.createRange();e=a(e);var i=v.getDocument(t.item(0));i=v.getBody(i).createControlRange();for(var n,o=!1,r=0,s=t.length;s>r;++r)n=t.item(r),n!==e||o?i.add(t.item(r)):o=!0;i.select(),c(this)}else j(this,e)}:function(e){j(this,e)};var K;!S&&k&&e.features.implementsDomRange?(K=function(e){var t=!1;return e.anchorNode&&(t=1==v.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t},P.isBackwards=function(){return K(this)}):K=P.isBackwards=function(){return!1},P.toString=function(){for(var e=[],t=0,i=this.rangeCount;i>t;++t)e[t]=""+this._ranges[t];return e.join("")},P.collapse=function(t,i){p(this,t);var n=e.createRange(v.getDocument(t));n.collapseToPoint(t,i),this.removeAllRanges(),this.addRange(n),this.isCollapsed=!0},P.collapseToStart=function(){if(!this.rangeCount)throw new _("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},P.collapseToEnd=function(){if(!this.rangeCount)throw new _("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},P.selectAllChildren=function(t){p(this,t);var i=e.createRange(v.getDocument(t));i.selectNodeContents(t),this.removeAllRanges(),this.addRange(i)},P.deleteFromDocument=function(){if(M&&C&&"Control"==this.docSelection.type){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),e.parentNode.removeChild(e);this.refresh()}else if(this.rangeCount){t=this.getAllRanges(),this.removeAllRanges(),e=0;for(var i=t.length;i>e;++e)t[e].deleteContents();this.addRange(t[i-1])}},P.getAllRanges=function(){return this._ranges.slice(0)},P.setSingleRange=function(e){this.setRanges([e])},P.containsNode=function(e,t){for(var i=0,n=this._ranges.length;n>i;++i)if(this._ranges[i].containsNode(e,t))return!0;return!1},P.toHtml=function(){var e="";if(this.rangeCount){e=y.getRangeDocument(this._ranges[0]).createElement("div");for(var t=0,i=this._ranges.length;i>t;++t)e.appendChild(this._ranges[t].cloneContents());e=e.innerHTML}return e},P.getName=function(){return"WrappedSelection"},P.inspect=function(){return f(this)},P.detach=function(){this.win=this.anchorNode=this.focusNode=this.win._rangySelection=null},u.inspect=f,e.Selection=u,e.selectionPrototype=P,e.addCreateMissingNativeApiListener(function(t){"undefined"==typeof t.getSelection&&(t.getSelection=function(){return e.getSelection(this)}),t=null})}),_wAMD.define("legacy/rangy-1.2.3/rangy-core",function(){}),rangy.createModule("SaveRestore",function(e,t){function i(e,t){var i,n="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),o=s.getDocument(e.startContainer),r=e.cloneRange();return r.collapse(t),i=o.createElement("span"),i.id=n,i.style.lineHeight="0",i.style.display="none",i.className="rangySelectionBoundary",i.appendChild(o.createTextNode(a)),r.insertNode(i),r.detach(),i}function n(e,i,n,o){(e=(e||document).getElementById(n))?(i[o?"setStartBefore":"setEndBefore"](e),e.parentNode.removeChild(e)):t.warn("Marker element has been removed. Cannot restore selection.")}function o(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function r(e,t){var i=(e||document).getElementById(t);i&&i.parentNode.removeChild(i)}e.requireModules(["DomUtil","DomRange","WrappedRange"]);var s=e.dom,a="\ufeff";e.saveSelection=function(n){n=n||window;var r=n.document;if(e.isSelectionValid(n)){var s,a,l=e.getSelection(n),c=l.getAllRanges(),d=[];c.sort(o);for(var u=0,h=c.length;h>u;++u)s=c[u],s.collapsed?(a=i(s,!1),d.push({markerId:a.id,collapsed:!0})):(a=i(s,!1),s=i(s,!0),d[u]={startMarkerId:s.id,endMarkerId:a.id,collapsed:!1,backwards:1==c.length&&l.isBackwards()});for(u=h-1;u>=0;--u)s=c[u],s.collapsed?s.collapseBefore((r||document).getElementById(d[u].markerId)):(s.setEndBefore((r||document).getElementById(d[u].endMarkerId)),s.setStartAfter((r||document).getElementById(d[u].startMarkerId)));return l.setRanges(c),{win:n,doc:r,rangeInfos:d,restored:!1}}t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus.")},e.restoreSelection=function(i,o){if(!i.restored){for(var r,s,a=i.rangeInfos,l=e.getSelection(i.win),c=[],d=a.length,u=d-1;u>=0;--u){
if(r=a[u],s=e.createRange(i.doc),r.collapsed)if(r=(i.doc||document).getElementById(r.markerId)){r.style.display="inline";var h=r.previousSibling;h&&3==h.nodeType?(r.parentNode.removeChild(r),s.collapseToPoint(h,h.length)):(s.collapseBefore(r),r.parentNode.removeChild(r))}else t.warn("Marker element has been removed. Cannot restore selection.");else n(i.doc,s,r.startMarkerId,!0),n(i.doc,s,r.endMarkerId,!1);1==d&&s.normalizeBoundaries(),c[u]=s}1==d&&o&&e.features.selectionHasExtend&&a[0].backwards?(l.removeAllRanges(),l.addRange(c[0],!0)):l.setRanges(c),i.restored=!0}},e.removeMarkerElement=r,e.removeMarkers=function(e){for(var t,i=e.rangeInfos,n=0,o=i.length;o>n;++n)t=i[n],t.collapsed?r(e.doc,t.markerId):(r(e.doc,t.startMarkerId),r(e.doc,t.endMarkerId))}}),_wAMD.define("legacy/rangy-1.2.3/rangy-selectionsaverestore",["legacy/rangy-1.2.3/rangy-core"],function(){}),window.PR_SHOULD_USE_CONTINUATION=!0,function(){function e(e){function t(e){var t=e.charCodeAt(0);if(92!==t)return t;var i=e.charAt(1);return t=u[i],t?t:i>="0"&&"7">=i?parseInt(e.substring(1),8):"u"===i||"x"===i?parseInt(e.substring(2),16):e.charCodeAt(1)}function i(e){if(32>e)return(16>e?"\\x0":"\\x")+e.toString(16);var t=String.fromCharCode(e);return("\\"===t||"-"===t||"["===t||"]"===t)&&(t="\\"+t),t}function n(e){for(var n=e.substring(1,e.length-1).match(new RegExp("\\\\u[0-9A-Fa-f]{4}|\\\\x[0-9A-Fa-f]{2}|\\\\[0-3][0-7]{0,2}|\\\\[0-7]{1,2}|\\\\[\\s\\S]|-|[^-\\\\]","g")),o=[],r=[],s="^"===n[0],a=s?1:0,l=n.length;l>a;++a){var c=n[a];if(/\\[bdsw]/i.test(c))o.push(c);else{var d,u=t(c);l>a+2&&"-"===n[a+1]?(d=t(n[a+2]),a+=2):d=u,r.push([u,d]),65>d||u>122||(65>d||u>90||r.push([32|Math.max(65,u),32|Math.min(d,90)]),97>d||u>122||r.push([-33&Math.max(97,u),-33&Math.min(d,122)]))}}r.sort(function(e,t){return e[0]-t[0]||t[1]-e[1]});for(var h=[],p=[NaN,NaN],a=0;a<r.length;++a){var f=r[a];f[0]<=p[1]+1?p[1]=Math.max(p[1],f[1]):h.push(p=f)}var m=["["];s&&m.push("^"),m.push.apply(m,o);for(var a=0;a<h.length;++a){var f=h[a];m.push(i(f[0])),f[1]>f[0]&&(f[1]+1>f[0]&&m.push("-"),m.push(i(f[1])))}return m.push("]"),m.join("")}function o(e){for(var t=e.source.match(new RegExp("(?:\\[(?:[^\\x5C\\x5D]|\\\\[\\s\\S])*\\]|\\\\u[A-Fa-f0-9]{4}|\\\\x[A-Fa-f0-9]{2}|\\\\[0-9]+|\\\\[^ux0-9]|\\(\\?[:!=]|[\\(\\)\\^]|[^\\x5B\\x5C\\(\\)\\^]+)","g")),i=t.length,o=[],a=0,l=0;i>a;++a){var c=t[a];if("("===c)++l;else if("\\"===c.charAt(0)){var d=+c.substring(1);d&&l>=d&&(o[d]=-1)}}for(var a=1;a<o.length;++a)-1===o[a]&&(o[a]=++r);for(var a=0,l=0;i>a;++a){var c=t[a];if("("===c)++l,void 0===o[l]&&(t[a]="(?:");else if("\\"===c.charAt(0)){var d=+c.substring(1);d&&l>=d&&(t[a]="\\"+o[l])}}for(var a=0,l=0;i>a;++a)"^"===t[a]&&"^"!==t[a+1]&&(t[a]="");if(e.ignoreCase&&s)for(var a=0;i>a;++a){var c=t[a],u=c.charAt(0);c.length>=2&&"["===u?t[a]=n(c):"\\"!==u&&(t[a]=c.replace(/[a-zA-Z]/g,function(e){var t=e.charCodeAt(0);return"["+String.fromCharCode(-33&t,32|t)+"]"}))}return t.join("")}for(var r=0,s=!1,a=!1,l=0,c=e.length;c>l;++l){var d=e[l];if(d.ignoreCase)a=!0;else if(/[a-z]/i.test(d.source.replace(/\\u[0-9a-f]{4}|\\x[0-9a-f]{2}|\\[^ux]/gi,""))){s=!0,a=!1;break}}for(var u={b:8,t:9,n:10,v:11,f:12,r:13},h=[],l=0,c=e.length;c>l;++l){var d=e[l];if(d.global||d.multiline)throw new Error(""+d);h.push("(?:"+o(d)+")")}return new RegExp(h.join("|"),a?"gi":"g")}function t(e){function t(e){switch(e.nodeType){case 1:if(n.test(e.className))return;for(var i=e.firstChild;i;i=i.nextSibling)t(i);var c=e.nodeName;("BR"===c||"LI"===c)&&(o[a]="\n",s[a<<1]=r++,s[a++<<1|1]=e);break;case 3:case 4:var d=e.nodeValue;d.length&&(d=l?d.replace(/\r\n?/g,"\n"):d.replace(/[ \t\r\n]+/g," "),o[a]=d,s[a<<1]=r,r+=d.length,s[a++<<1|1]=e)}}var i,n=/(?:^|\s)nocode(?:\s|$)/,o=[],r=0,s=[],a=0;e.currentStyle?i=e.currentStyle.whiteSpace:window.getComputedStyle&&(i=document.defaultView.getComputedStyle(e,null).getPropertyValue("white-space"));var l=i&&"pre"===i.substring(0,3);return t(e),{sourceCode:o.join("").replace(/\n$/,""),spans:s}}function i(e,t,i,n){if(t){var o={sourceCode:t,basePos:e};i(o),n.push.apply(n,o.decorations)}}function n(e){for(var t=void 0,i=e.firstChild;i;i=i.nextSibling){var n=i.nodeType;t=1===n?t?e:i:3===n&&W.test(i.nodeValue)?e:t}return t===e?void 0:t}function o(t,n){var o,r={};!function(){for(var i=t.concat(n),s=[],a={},l=0,c=i.length;c>l;++l){var d=i[l],u=d[3];if(u)for(var h=u.length;--h>=0;)r[u.charAt(h)]=d;var p=d[1],f=""+p;a.hasOwnProperty(f)||(s.push(p),a[f]=null)}s.push(/[\0-\uffff]/),o=e(s)}();var s=n.length,a=function(e){for(var t=e.sourceCode,l=e.basePos,d=[l,M],u=0,h=t.match(o)||[],p={},f=0,m=h.length;m>f;++f){var g,v=h[f],b=p[v],y=void 0;if("string"==typeof b)g=!1;else{var w=r[v.charAt(0)];if(w)y=v.match(w[1]),b=w[0];else{for(var _=0;s>_;++_)if(w=n[_],y=v.match(w[1])){b=w[0];break}y||(b=M)}g=b.length>=5&&"lang-"===b.substring(0,5),!g||y&&"string"==typeof y[1]||(g=!1,b=B),g||(p[v]=b)}var E=u;if(u+=v.length,g){var T=y[1],C=v.indexOf(T),S=C+T.length;y[2]&&(S=v.length-y[2].length,C=S-T.length);var D=b.substring(5);i(l+E,v.substring(0,C),a,d),i(l+E+C,T,c(D,T),d),i(l+E+S,v.substring(S),a,d)}else d.push(l+E,b)}e.decorations=d};return a}function r(e){var t=[],i=[];e.tripleQuotedStrings?t.push([k,/^(?:\'\'\'(?:[^\'\\]|\\[\s\S]|\'{1,2}(?=[^\']))*(?:\'\'\'|$)|\"\"\"(?:[^\"\\]|\\[\s\S]|\"{1,2}(?=[^\"]))*(?:\"\"\"|$)|\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$))/,null,"'\""]):e.multiLineStrings?t.push([k,/^(?:\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$)|\`(?:[^\\\`]|\\[\s\S])*(?:\`|$))/,null,"'\"`"]):t.push([k,/^(?:\'(?:[^\\\'\r\n]|\\.)*(?:\'|$)|\"(?:[^\\\"\r\n]|\\.)*(?:\"|$))/,null,"\"'"]),e.verbatimStrings&&i.push([k,/^@\"(?:[^\"]|\"\")*(?:\"|$)/,null]);var n=e.hashComments;if(n&&(e.cStyleComments?(n>1?t.push([R,/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,null,"#"]):t.push([R,/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\r\n]*)/,null,"#"]),i.push([k,/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,null])):t.push([R,/^#[^\r\n]*/,null,"#"])),e.cStyleComments&&(i.push([R,/^\/\/[^\r\n]*/,null]),i.push([R,/^\/\*[\s\S]*?(?:\*\/|$)/,null])),e.regexLiterals){var r="/(?=[^/*])(?:[^/\\x5B\\x5C]|\\x5C[\\s\\S]|\\x5B(?:[^\\x5C\\x5D]|\\x5C[\\s\\S])*(?:\\x5D|$))+/";i.push(["lang-regex",new RegExp("^"+H+"("+r+")")])}var s=e.types;s&&i.push([x,s]);var a=(""+e.keywords).replace(/^ | $/g,"");return a.length&&i.push([O,new RegExp("^(?:"+a.replace(/[\s,]+/g,"|")+")\\b"),null]),t.push([M,/^\s+/,null," \r\n	 "]),i.push([A,/^@[a-z_$][a-z_$@0-9]*/i,null],[x,/^(?:[@_]?[A-Z]+[a-z][A-Za-z_$@0-9]*|\w+_t\b)/,null],[M,/^[a-z_$][a-z_$@0-9]*/i,null],[A,new RegExp("^(?:0x[a-f0-9]+|(?:\\d(?:_\\d+)*\\d*(?:\\.\\d*)?|\\.\\d\\+)(?:e[+\\-]?\\d+)?)[a-z]*","i"),null,"0123456789"],[M,/^\\[\s\S]?/,null],[P,/^.[^\s\w\.$@\'\"\`\/\#\\]*/,null]),o(t,i)}function s(e,t){function i(e){switch(e.nodeType){case 1:if(r.test(e.className))break;if("BR"===e.nodeName)n(e),e.parentNode&&e.parentNode.removeChild(e);else for(var t=e.firstChild;t;t=t.nextSibling)i(t);break;case 3:case 4:if(l){var o=e.nodeValue,c=o.match(s);if(c){var d=o.substring(0,c.index);e.nodeValue=d;var u=o.substring(c.index+c[0].length);if(u){var h=e.parentNode;h.insertBefore(a.createTextNode(u),e.nextSibling)}n(e),d||e.parentNode.removeChild(e)}}}}function n(e){function t(e,i){var n=i?e.cloneNode(!1):e,o=e.parentNode;if(o){var r=t(o,1),s=e.nextSibling;r.appendChild(n);for(var a=s;a;a=s)s=a.nextSibling,r.appendChild(a)}return n}for(;!e.nextSibling;)if(e=e.parentNode,!e)return;for(var i,n=t(e.nextSibling,0);(i=n.parentNode)&&1===i.nodeType;)n=i;d.push(n)}var o,r=/(?:^|\s)nocode(?:\s|$)/,s=/\r\n?|\n/,a=e.ownerDocument;e.currentStyle?o=e.currentStyle.whiteSpace:window.getComputedStyle&&(o=a.defaultView.getComputedStyle(e,null).getPropertyValue("white-space"));for(var l=o&&"pre"===o.substring(0,3),c=a.createElement("LI");e.firstChild;)c.appendChild(e.firstChild);for(var d=[c],u=0;u<d.length;++u)i(d[u]);t===(0|t)&&d[0].setAttribute("value",t);var h=a.createElement("OL");h.className="linenums";for(var p=Math.max(0,t-1|0)||0,u=0,f=d.length;f>u;++u)c=d[u],c.className="L"+(u+p)%10,c.firstChild||c.appendChild(a.createTextNode(" ")),h.appendChild(c);e.appendChild(h)}function a(e){var t=/\bMSIE\b/.test(navigator.userAgent),i=/\n/g,n=e.sourceCode,o=n.length,r=0,s=e.spans,a=s.length,l=0,c=e.decorations,d=c.length,u=0;c[d]=o;var h,p;for(p=h=0;d>p;)c[p]!==c[p+2]?(c[h++]=c[p++],c[h++]=c[p++]):p+=2;for(d=h,p=h=0;d>p;){for(var f=c[p],m=c[p+1],g=p+2;d>=g+2&&c[g+1]===m;)g+=2;c[h++]=f,c[h++]=m,p=g}d=c.length=h;for(;a>l;){var v,b=(s[l],s[l+2]||o),y=(c[u],c[u+2]||o),g=Math.min(b,y),w=s[l+1];if(1!==w.nodeType&&(v=n.substring(r,g))){t&&(v=v.replace(i,"\r")),w.nodeValue=v;var _=w.ownerDocument,E=_.createElement("SPAN");E.className=c[u+1];var T=w.parentNode;T.replaceChild(E,w),E.appendChild(w),b>r&&(s[l+1]=w=_.createTextNode(n.substring(g,b)),T.insertBefore(w,E.nextSibling))}r=g,r>=b&&(l+=2),r>=y&&(u+=2)}}function l(e,t){for(var i=t.length;--i>=0;){var n=t[i];V.hasOwnProperty(n)?window.console&&console.warn("cannot override language handler %s",n):V[n]=e}}function c(e,t){return e&&V.hasOwnProperty(e)||(e=/^\s*</.test(t)?"default-markup":"default-code"),V[e]}function d(e){var i=e.langExtension;try{var n=t(e.sourceNode),o=n.sourceCode;e.sourceCode=o,e.spans=n.spans,e.basePos=0,c(i,o)(e),a(e)}catch(r){"console"in window&&console.log(r&&r.stack?r.stack:r)}}function u(e,t,i){var n=document.createElement("PRE");n.innerHTML=e,i&&s(n,i);var o={langExtension:t,numberLines:i,sourceNode:n};return d(o),n.innerHTML}function h(e){function t(e){return document.getElementsByTagName(e)}function i(){for(var t=window.PR_SHOULD_USE_CONTINUATION?u.now()+250:1/0;p<r.length&&u.now()<t;p++){var o=r[p],a=o.className;if(a.indexOf("prettyprint")>=0){var l,c=a.match(f);!c&&(l=n(o))&&"CODE"===l.tagName&&(c=l.className.match(f)),c&&(c=c[1]);for(var m=!1,g=o.parentNode;g;g=g.parentNode)if(("pre"===g.tagName||"code"===g.tagName||"xmp"===g.tagName)&&g.className&&g.className.indexOf("prettyprint")>=0){m=!0;break}var v=o.className.match("processed")?!0:!1;if(!m&&!v){var b=o.className.match(/\blinenums\b(?::(\d+))?/);b=b?b[1]&&b[1].length?+b[1]:!0:!1;var y=o.innerHTML.match(/<\s?br\s?/i)||o.innerHTML.match("\n");b&&y?s(o,b):o.removeClassName("linenums"),h={langExtension:c,sourceNode:o,numberLines:b},d(h),o.className+=" processed",o.style.paddingLeft="10px"}}}p<r.length?setTimeout(i,250):e&&e()}for(var o=[t("pre"),t("code"),t("xmp")],r=[],a=0;a<o.length;++a)for(var l=0,c=o[a].length;c>l;++l)r.push(o[a][l]);o=null;var u=Date;u.now||(u={now:function(){return+new Date}});var h,p=0,f=/\blang(?:uage)?-([\w.]+)(?!\S)/;i()}function p(e){function t(e){if(3==e.nodeType)i.push(e);else{e.tagName.match("LI")?i.push(document.createElement("BR")):e.tagName.match("SPAN")&&e.className.match("rangySelectionBoundary")&&i.push(e);for(var n=0,o=e.childNodes.length;o>n;++n)t(e.childNodes[n])}}var i=[];t(e);for(var n,o="",r="",s=!1,a=0;a<i.length;a++){var l=i[a];l.tagName&&l.tagName.match("BR")&&a>0?s?r+="\n":o+="\n":l.tagName&&l.tagName.match(/SPAN/i)?(n=l,s=!0):l.nodeType?s?r+=l.textContent:o+=l.textContent:s?r+=l:o+=l}var c=document.createTextNode(o),d=document.createTextNode(r);e.innerText="",e.appendChild(c),e.appendChild(n),e.appendChild(d),e.removeClassName("processed"),e.style.padding="10px",e.className.match("linenums")&&(e.style.paddingLeft="50px")}var f=["break,continue,do,else,for,if,return,while"],m=[f,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],g=[m,"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],v=[g,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],b=[g,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],y=[b,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],w="all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",_=[g,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],E="caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",T=[f,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],C=[f,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],S=[f,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],D=[v,y,_,E+T,C,S],I=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,k="str",O="kwd",R="com",x="typ",A="lit",P="pun",M="pln",N="tag",L="dec",B="src",j="atn",K="atv",F="nocode",H="(?:^^\\.?|[+-]|\\!|\\!=|\\!==|\\#|\\%|\\%=|&|&&|&&=|&=|\\(|\\*|\\*=|\\+=|\\,|\\-=|\\->|\\/|\\/=|:|::|\\;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\@|\\[|\\^|\\^=|\\^\\^|\\^\\^=|\\{|\\||\\|=|\\|\\||\\|\\|=|\\~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*",W=/\S/,$=r({keywords:D,hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),V={};l($,["default-code"]),l(o([],[[M,/^[^<?]+/],[L,/^<!\w[^>]*(?:>|$)/],[R,/^<\!--[\s\S]*?(?:-\->|$)/],["lang-",/^<\?([\s\S]+?)(?:\?>|$)/],["lang-",/^<%([\s\S]+?)(?:%>|$)/],[P,/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\s\S]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\s\S]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),l(o([[M,/^[\s]+/,null," 	\r\n"],[K,/^(?:\"[^\"]*\"?|\'[^\']*\'?)/,null,"\"'"]],[[N,/^^<\/?[a-z](?:[\w.:-]*\w)?|\/?>$/i],[j,/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^>\'\"\s]*(?:[^>\'\"\s\/]|\/(?=\s)))/],[P,/^[=<>\/]+/],["lang-js",/^on\w+\s*=\s*\"([^\"]+)\"/i],["lang-js",/^on\w+\s*=\s*\'([^\']+)\'/i],["lang-js",/^on\w+\s*=\s*([^\"\'>\s]+)/i],["lang-css",/^style\s*=\s*\"([^\"]+)\"/i],["lang-css",/^style\s*=\s*\'([^\']+)\'/i],["lang-css",/^style\s*=\s*([^\"\'>\s]+)/i]]),["in.tag"]),l(o([],[[K,/^[\s\S]+/]]),["uq.val"]),l(r({keywords:v,hashComments:!0,cStyleComments:!0,types:I}),["c","cc","cpp","cxx","cyc","m"]),l(r({keywords:"null,true,false"}),["json"]),l(r({keywords:y,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:I}),["cs"]),l(r({keywords:b,cStyleComments:!0}),["java"]),l(r({keywords:S,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]),l(r({keywords:T,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]),l(r({keywords:E,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]),l(r({keywords:C,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]),l(r({keywords:_,cStyleComments:!0,regexLiterals:!0}),["js"]),l(r({keywords:w,hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),l(o([],[[k,/^[\s\S]+/]]),["regex"]),window.unPrettifyOne=p,window.prettyPrintOne=u,window.prettyPrint=h,window.PR={createSimpleLexer:o,registerLangHandler:l,sourceDecorator:r,PR_ATTRIB_NAME:j,PR_ATTRIB_VALUE:K,PR_COMMENT:R,PR_DECLARATION:L,PR_KEYWORD:O,PR_LITERAL:A,PR_NOCODE:F,PR_PLAIN:M,PR_PUNCTUATION:P,PR_SOURCE:B,PR_STRING:k,PR_TAG:N,PR_TYPE:x}}(),_wAMD.define("legacy/prettify/prettify",function(){}),CKEDITOR.lang.en={wsc:{btnIgnore:"Ignore",btnIgnoreAll:"Ignore All",btnReplace:"Replace",btnReplaceAll:"Replace All",btnUndo:"Undo",changeTo:"Change to",errorLoading:"Error loading application service host: %s.",ieSpellDownload:"Spell checker not installed. Do you want to download it now?",manyChanges:"Spell check complete: %1 words changed",noChanges:"Spell check complete: No words changed",noMispell:"Spell check complete: No misspellings found",noSuggestions:"- No suggestions -",notAvailable:"Sorry, but service is unavailable now.",notInDic:"Not in dictionary",oneChange:"Spell check complete: One word changed",progress:"Spell check in progress...",title:"Spell Checker",toolbar:"Check Spelling"},undo:{redo:"Redo",undo:"Undo"},toolbar:{toolbarCollapse:"Collapse Toolbar",toolbarExpand:"Expand Toolbar",toolbarGroups:{document:"Document",clipboard:"Clipboard/Undo",editing:"Editing",forms:"Forms",basicstyles:"Basic Styles",paragraph:"Paragraph",links:"Links",insert:"Insert",styles:"Styles",colors:"Colors",tools:"Tools"},toolbars:"Editor toolbars"},table:{border:"Border size",caption:"Caption",cell:{menu:"Cell",insertBefore:"Insert Cell Before",insertAfter:"Insert Cell After",deleteCell:"Delete Cells",merge:"Merge Cells",mergeRight:"Merge Right",mergeDown:"Merge Down",splitHorizontal:"Split Cell Horizontally",splitVertical:"Split Cell Vertically",title:"Cell Properties",cellType:"Cell Type",rowSpan:"Rows Span",colSpan:"Columns Span",wordWrap:"Word Wrap",hAlign:"Horizontal Alignment",vAlign:"Vertical Alignment",alignBaseline:"Baseline",bgColor:"Background Color",borderColor:"Border Color",data:"Data",header:"Header",yes:"Yes",no:"No",invalidWidth:"Cell width must be a number.",invalidHeight:"Cell height must be a number.",invalidRowSpan:"Rows span must be a whole number.",invalidColSpan:"Columns span must be a whole number.",chooseColor:"Choose"},cellPad:"Cell padding",cellSpace:"Cell spacing",column:{menu:"Column",insertBefore:"Insert Column Before",insertAfter:"Insert Column After",deleteColumn:"Delete Columns"},columns:"Columns",deleteTable:"Delete Table",headers:"Headers",headersBoth:"Both",headersColumn:"First column",headersNone:"None",headersRow:"First Row",invalidBorder:"Border size must be a number.",invalidCellPadding:"Cell padding must be a positive number.",invalidCellSpacing:"Cell spacing must be a positive number.",invalidCols:"Number of columns must be a number greater than 0.",invalidHeight:"Table height must be a number.",invalidRows:"Number of rows must be a number greater than 0.",invalidWidth:"Table width must be a number.",menu:"Table Properties",row:{menu:"Row",insertBefore:"Insert Row Before",insertAfter:"Insert Row After",deleteRow:"Delete Rows"},rows:"Rows",summary:"Summary",title:"Table Properties",toolbar:"Table",widthPc:"percent",widthPx:"pixels",widthUnit:"width unit"},stylescombo:{label:"Styles",panelTitle:"Formatting Styles",panelTitle1:"Block Styles",panelTitle2:"Inline Styles",panelTitle3:"Object Styles"},specialchar:{options:"Special Character Options",title:"Select Special Character",toolbar:"Insert Special Character"},sourcearea:{toolbar:"Source"},scayt:{btn_about:"About SCAYT",btn_dictionaries:"Dictionaries",btn_disable:"Disable SCAYT",btn_enable:"Enable SCAYT",btn_langs:"Languages",btn_options:"Options",text_title:"Spell Check As You Type"},removeformat:{toolbar:"Remove Format"},pastetext:{button:"Paste as plain text",title:"Paste as Plain Text"},pastefromword:{confirmCleanup:"The text you want to paste seems to be copied from Word. Do you want to clean it before pasting?",error:"It was not possible to clean up the pasted data due to an internal error",title:"Paste from Word",toolbar:"Paste from Word"},maximize:{maximize:"Maximize",minimize:"Minimize"},magicline:{title:"Insert paragraph here"},list:{bulletedlist:"Insert/Remove Bulleted List",numberedlist:"Insert/Remove Numbered List"},link:{acccessKey:"Access Key",advanced:"Advanced",advisoryContentType:"Advisory Content Type",advisoryTitle:"Advisory Title",anchor:{toolbar:"Anchor",menu:"Edit Anchor",title:"Anchor Properties",name:"Anchor Name",errorName:"Please type the anchor name",remove:"Remove Anchor"},anchorId:"By Element Id",anchorName:"By Anchor Name",charset:"Linked Resource Charset",cssClasses:"Stylesheet Classes",emailAddress:"E-Mail Address",emailBody:"Message Body",emailSubject:"Message Subject",id:"Id",info:"Link Info",langCode:"Language Code",langDir:"Language Direction",langDirLTR:"Left to Right (LTR)",langDirRTL:"Right to Left (RTL)",menu:"Edit Link",name:"Name",noAnchors:"(No anchors available in the document)",noEmail:"Please type the e-mail address",noUrl:"Please type the link URL",other:"<other>",popupDependent:"Dependent (Netscape)",popupFeatures:"Popup Window Features",popupFullScreen:"Full Screen (IE)",popupLeft:"Left Position",popupLocationBar:"Location Bar",popupMenuBar:"Menu Bar",popupResizable:"Resizable",popupScrollBars:"Scroll Bars",popupStatusBar:"Status Bar",popupToolbar:"Toolbar",popupTop:"Top Position",rel:"Relationship",selectAnchor:"Select an Anchor",styles:"Style",tabIndex:"Tab Index",target:"Target",targetFrame:"<frame>",targetFrameName:"Target Frame Name",targetPopup:"<popup window>",targetPopupName:"Popup Window Name",title:"Link",toAnchor:"Link to anchor in the text",toEmail:"E-mail",toUrl:"URL",toolbar:"Link",type:"Link Type",unlink:"Unlink",upload:"Upload"},indent:{indent:"Increase Indent",outdent:"Decrease Indent"},image:{alertUrl:"Please type the image URL",alt:"Alternative Text",border:"Border",btnUpload:"Send it to the Server",button2Img:"Do you want to transform the selected image button on a simple image?",hSpace:"HSpace",img2Button:"Do you want to transform the selected image on a image button?",infoTab:"Image Info",linkTab:"Link",lockRatio:"Lock Ratio",menu:"Image Properties",resetSize:"Reset Size",title:"Image Properties",titleButton:"Image Button Properties",upload:"Upload",urlMissing:"Image source URL is missing.",vSpace:"VSpace",validateBorder:"Border must be a whole number.",validateHSpace:"HSpace must be a whole number.",validateVSpace:"VSpace must be a whole number."},horizontalrule:{toolbar:"Insert Horizontal Line"},format:{label:"Format",panelTitle:"Paragraph Format",tag_address:"Address",tag_div:"Normal (DIV)",tag_h1:"Heading 1",tag_h2:"Heading 2",tag_h3:"Heading 3",tag_h4:"Heading 4",tag_h5:"Heading 5",tag_h6:"Heading 6",tag_p:"Normal",tag_pre:"Formatted"},fakeobjects:{anchor:"Anchor",flash:"Flash Animation",hiddenfield:"Hidden Field",iframe:"IFrame",unknown:"Unknown Object"},elementspath:{eleLabel:"Elements path",eleTitle:"%1 element"},contextmenu:{options:"Context Menu Options"},clipboard:{copy:"Copy",copyError:"Your browser security settings don't permit the editor to automatically execute copying operations. Please use the keyboard for that (Ctrl/Cmd+C).",cut:"Cut",cutError:"Your browser security settings don't permit the editor to automatically execute cutting operations. Please use the keyboard for that (Ctrl/Cmd+X).",paste:"Paste",pasteArea:"Paste Area",pasteMsg:"Please paste inside the following box using the keyboard (<strong>Ctrl/Cmd+V</strong>) and hit OK",securityMsg:"Because of your browser security settings, the editor is not able to access your clipboard data directly. You are required to paste it again in this window.",title:"Paste"},button:{selectedLabel:"%1 (Selected)"},blockquote:{toolbar:"Block Quote"},basicstyles:{bold:"Bold",italic:"Italic",strike:"Strikethrough",subscript:"Subscript",superscript:"Superscript",underline:"Underline"},about:{copy:"Copyright &copy; $1. All rights reserved.",dlgTitle:"About CKEditor",help:"Check $1 for help.",moreInfo:"For licensing information please visit our web site:",title:"About CKEditor",userGuide:"CKEditor User's Guide"},editor:"Rich Text Editor",editorPanel:"Rich Text Editor panel",common:{editorHelp:"Press ALT 0 for help",browseServer:"Browse Server",url:"URL",protocol:"Protocol",upload:"Upload",uploadSubmit:"Send it to the Server",image:"Image",flash:"Flash",form:"Form",checkbox:"Checkbox",radio:"Radio Button",textField:"Text Field",textarea:"Textarea",hiddenField:"Hidden Field",button:"Button",select:"Selection Field",imageButton:"Image Button",notSet:"<not set>",id:"Id",name:"Name",langDir:"Language Direction",langDirLtr:"Left to Right (LTR)",langDirRtl:"Right to Left (RTL)",langCode:"Language Code",longDescr:"Long Description URL",cssClass:"Stylesheet Classes",advisoryTitle:"Advisory Title",cssStyle:"Style",ok:"OK",cancel:"Cancel",close:"Close",preview:"Preview",resize:"Resize",generalTab:"General",advancedTab:"Advanced",validateNumberFailed:"This value is not a number.",confirmNewPage:"Any unsaved changes to this content will be lost. Are you sure you want to load new page?",confirmCancel:"You have changed some options. Are you sure you want to close the dialog window?",options:"Options",target:"Target",targetNew:"New Window (_blank)",targetTop:"Topmost Window (_top)",targetSelf:"Same Window (_self)",targetParent:"Parent Window (_parent)",langDirLTR:"Left to Right (LTR)",langDirRTL:"Right to Left (RTL)",styles:"Style",cssClasses:"Stylesheet Classes",width:"Width",height:"Height",align:"Alignment",alignLeft:"Left",alignRight:"Right",alignCenter:"Center",alignJustify:"Justify",alignTop:"Top",alignMiddle:"Middle",alignBottom:"Bottom",alignNone:"None",invalidValue:"Invalid value.",invalidHeight:"Height must be a number.",invalidWidth:"Width must be a number.",invalidCssLength:'Value specified for the "%1" field must be a positive number with or without a valid CSS measurement unit (px, %, in, cm, mm, em, ex, pt, or pc).',invalidHtmlLength:'Value specified for the "%1" field must be a positive number with or without a valid HTML measurement unit (px or %).',invalidInlineStyle:'Value specified for the inline style must consist of one or more tuples with the format of "name : value", separated by semi-colons.',cssLengthTooltip:"Enter a number for a value in pixels or a number with a valid CSS unit (px, %, in, cm, mm, em, ex, pt, or pc).",unavailable:'%1<span class="cke_accessibility">, unavailable</span>'}},_wAMD.define("ckeditor-lang",["ckeditor"],function(){}),CKEDITOR.stylesSet.add("default",[{name:"Italic Title",element:"h2",styles:{"font-style":"italic"}},{name:"Subtitle",element:"h3",styles:{color:"#aaa","font-style":"italic"}},{name:"Special Container",element:"div",styles:{padding:"5px 10px",background:"#eee",border:"1px solid #ccc"}},{name:"Marker",element:"span",attributes:{"class":"marker"}},{name:"Big",element:"big"},{name:"Small",element:"small"},{name:"Typewriter",element:"tt"},{name:"Computer Code",element:"code"},{name:"Keyboard Phrase",element:"kbd"},{name:"Sample Text",element:"samp"},{name:"Variable",element:"var"},{name:"Deleted Text",element:"del"},{name:"Inserted Text",element:"ins"},{name:"Cited Work",element:"cite"},{name:"Inline Quotation",element:"q"},{name:"Language: RTL",element:"span",attributes:{dir:"rtl"}},{name:"Language: LTR",element:"span",attributes:{dir:"ltr"}},{name:"Styled image (left)",element:"img",attributes:{"class":"left"}},{name:"Styled image (right)",element:"img",attributes:{"class":"right"}},{name:"Compact table",element:"table",attributes:{cellpadding:"5",cellspacing:"0",border:"1",bordercolor:"#ccc"},styles:{"border-collapse":"collapse"}},{name:"Borderless Table",element:"table",styles:{"border-style":"hidden","background-color":"#E6E6FA"}},{name:"Square Bulleted List",element:"ul",styles:{"list-style-type":"square"}}]),_wAMD.define("ckeditor-styles",["ckeditor"],function(){}),_wAMD.define("site/editor/ui/weebly_editbox",["w-global","jquery","underscore","config","editor/app","site/editor/app","editor/page-manager/pages","editor-site-shared/relay","editor/content/main","site/editor/ui/weebly_elements","commerce/util/product-utils","editor-site-shared/ui/context","site/editor/relay-constants","legacy/weebly_element_utils","ckeditor","site/editor/ui/DeadClickSpotlight","editor-site-shared/build/linker/utils","util/ui/wColorChooser","legacy/rangy-1.2.3/rangy-selectionsaverestore","legacy/prettify/prettify","ckeditor-lang","ckeditor-styles"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p,f,m,g){function v(){var e={customConfig:"",enterMode:f.ENTER_BR,allowedContent:"p li ol ul h1 h2 h3 b i u em strong [style] {color}; span font [size, color, style] {font-weight, color, size}; a [href, target];",pasteFromWordRemoveStyles:!0,pasteFromWordRemoveFontStyles:!0,title:!1,coreStyles_bold:{element:"b",overrides:"strong"},coreStyles_italic:{element:"i",overrides:"em"},tabSpaces:4,toolbarGroups:[],removeDisallowedTags:"link:advanced",removeButtons:"Cut,Copy,Paste,Undo,Redo,Anchor,Underline,Strike,Subscript,Superscript",disableNativeSpellChecker:!1};n.chromeless?e.removePlugins="pastefromword, pastetext, clipboard":e.removePlugins="magicline, contextmenu, liststyle, tabletools, toolbar, link, scayt, menubutton",t.extend(f.config,e),n.chromeless&&(f.basePath="//"+ASSETS_BASE+"/js/vendor/bower_components/ckeditor/")}function b(e){var i=t("#"+e.editor.name),o=e.editor.name;if(window.currentBox&&window.currentBox===o){var r=window._editBoxOptions[i[0].id];if(r&&!n.chromeless){var s=Date.now();if((!le||s>le+2e4)&&(le=s,"wsite-title"!=o&&"function"!=typeof ce&&!i.hasClass("input"))){var a=i.html();l.saveContent(o,a,se,1)}}}9===e.data.keyCode&&(e.cancel(),"wsite-title"!==o&&te.runCommand(e.editor.name,"indent",null));var c=i[0].id;i&&c&&(window.editBoxSelectingText=!0,window.currentBox&&window.currentBox==c||te.showEditBox(c,null,window._editBoxOptions[c]))}function y(e){he=t("#"+window.currentBox).height()}function w(e){he!=t("#"+window.currentBox).height()&&r.vent.trigger("forceDocumentSizeChange")}function _(e){if(!n.chromeless){var i=t(e.target);i.is(document)||!i.hasClass("editable-text")&&!i.closest(".editable-text").length?G():V(e)}}function E(e){if(!ie){window.editBoxSelectingText=!1;var i=t(e.target);i=i.hasClass("editable-text")?i[0]:i.closest(".editable-text")[0],i&&i.id&&(window.editBoxSelectingText=!0,o.vent.trigger("editor:element:props:show"),window.currentBox&&window.currentBox==i.id||te.showEditBox(i.id,null,window._editBoxOptions[i.id]))}}function T(){Z=ee}function C(){var e=W();if(!e)return void(me={});ee=e.cloneRange();var n={};["bold","fontSize","foreColor","italic","justify","link","orderedList","underline","unorderedList"].each(function(e){var t=te.getCurrentValue(e);i.isEqual(me[e],t)||(me[e]=t,n[e]=void 0!==t?t:!1)}),t.isEmptyObject(n)||a.trigger(h.EVENTS.TEXT_EDITING_TOOLBAR_UPDATE,n)}function S(e,t,o){var r=L(e);return t&&(r=r.replace(/^(\s|&nbsp;|&#160;|<br\s*\/?>)*/i,"")),(t||"wsite-title"==window.currentBox)&&(r=r.replace(/(\s|&nbsp;|&#160;|<br\s*\/?>)*$/i,"")),n.chromeless&&(r=r.replace(/&nbsp;/gi," "),r=i.unescape(r)),r}function D(e){var i;f.instances[e]||(i=t("#"+e),i.is("span")&&(i=te.convertSpanToDiv(i)),f.inline(e,{on:{key:function(e){b(e)}}}))}function I(){te.runCommand(window.currentBox,"selectAll",!1),setTimeout(function(){te.runCommand(window.currentBox,"delete")},0)}function k(e,t){if(e=e||"",e.match(/^(Product.*)?Click here to edit.$/)||e.match(/^(Product.*)?Double-tap to edit.$/))return!0;if(e.replace(/<.*?>/g,"").match(/Click here to edit\.$/)||e.replace(/<.*?>/g,"").match(/Double-tap to edit\.$/))return!0;if(e.indexOf("This is your new blog post.")>-1)return!0;if(t.$el&&e==t.$el.attr("placeholder"))return!0;if(e==n.defaultPlaceholderText)return!0;for(var i in n.areaDefaultPlaceholderText)if(e==n.areaDefaultPlaceholderText[i])return!0;return t.emptyText?e.indexOf(t.emptyText)>-1:!1}function O(e){var n=t("#editMenu"),o={},r=t("#"+e),s=r.closest("li.inside"),a=s.length?s:r;(!r.is("div")||r.hasClass("product-title")||"true"===r.data("converted"))&&(o.unorderedList=!1,o.orderedList=!1),(r.hasClass("wsite-product-description")||r.parent().is("#wsite-com-product-short-description"))&&(a=r,o.alignment=!1,o.changecolor=!1);var l=t("#menuitem-a");l.toggle(o.alignment!==!1);var c=t("#menuitem-ul");
c.toggle(o.unorderedList!==!1);var d=t("#menuitem-ol");d.toggle(o.orderedList!==!1);var u=t("#menuitem-cc");if(u.toggle(o.changecolor!==!1),!fe){fe=!0;var h={delay:{show:600,hide:100},placement:"bottom"};t("#editMenuChild").on("click","a[data-command]",R),t("#menuitem-b").tooltip(h),t("#menuitem-i").tooltip(h),t("#menuitem-u").tooltip(h),t("#menuitem-if").tooltip(h),t("#menuitem-df").tooltip(h),u.tooltip(h).wColorChooser({id:"editmenu-color-chooser",autoExpand:!0,containerOffsetY:5,parent:"#_editor-ui",onBeforeShow:function(){var e=W();if(e){var i=t(e.commonAncestorContainer).closest("font").css("color");i&&u.spectrum("set",i)}},onMove:x,onUpdate:x,onChange:function(e){u.spectrum("hide"),x(e)}}),t("#menuitem-cl").tooltip(h).on("mousedown",N).on("click",function(e){e.preventDefault(),e.stopPropagation(),te.showCreateLink()}),l.tooltip(h),c.tooltip(h),d.tooltip(h),t("#menuitem-rf").tooltip(h),t("#menuitem-z").tooltip(h),t("#menuitem-r").tooltip(h)}n.show();var p=t(window),f=function(e,i){var n=t(document.body);A(e,i,n)};pe=i.partial(f,n,a);var m=i.debounce(pe,100);pe(),p.on("scroll",m),Q=function(){p.off("scroll",m),pe=t.noop}}function R(e){te.runCommand(window.currentBox,t(e.currentTarget).data("command"),null),e.preventDefault()}function x(e){f.env.ie&&10==f.env.version||te.runCommand(window.currentBox,"foreColor",e)}function A(e,i,n){var o=n.offset(),r=n.outerWidth(),s=i.offset(),a=i.outerWidth(),l=i.outerHeight(),c=t("#_editor-ui").length>0?t("#_editor-ui").offset().top:0;s.top=s.top-t(document).scrollTop()-c;var d=e.outerWidth(),u=e.outerHeight(),h=!1,p=s.top-u-10;p<o.top+10&&(p=o.top+10,h=!0),p=Math.min(s.top+l+10,p);var f=i.find("[contenteditable=true]")[0];!f&&i.is("[contenteditable=true]")&&(f=i[0]);var m;if(f){var g=window.getComputedStyle(f);switch(g["text-align"]){case"right":m=s.left+a-d;break;case"center":m=s.left+a/2-d/2;break;case"left":case"justify":default:m=s.left-(h?10:0),m+d-o.left>=r&&(m=s.left+a-d)}}else r>d?(m=s.left-(h?10:0),m+d-o.left>=r&&(m=s.left+a-d)):m=s.left+a/2-d/2;var v=t(document);e.css({top:p+v.scrollTop(),left:m+v.scrollLeft()})}function P(e,i){var n=t(e).closest("li");return n.is(".inside")?!1:n.parent().is(i)?!0:!1}function M(e){var t=3;return 13>e?t=1:e>=13&&16>e?t=2:e>=18&&24>e?t=4:e>=24&&32>e?t=5:e>=32&&(t=6),t}function N(){var e=window.rangy.getSelection();e.rangeCount<1&&(ee&&ee.isValid()?e.addRange(ee):Z&&Z.isValid()&&e.addRange(Z)),ae=window.rangy.saveSelection()}function L(e){return e=e.replace(/<!--.*?-->/gi,""),(navigator.appVersion.match("Safari/")||navigator.appVersion.match("AppleWebKit/"))&&(e=e.replace(/^\s+|\s+$/g,"").replace(/^(<\/?div>)*|(<\/?div>)*$/gi,"").replace(/(<br[ \/]*>)?(\s*<\/?div>)+\s*/gi,"<br />")),e=e.replace(/<b(\s+|>)/gi,"<strong$1"),e=e.replace(/<\/b(\s+|>)/gi,"</strong$1"),e=e.replace(/<i(\s+|>)/gi,"<em$1"),e=e.replace(/<\/i(\s+|>)/gi,"</em$1"),e=e.replace(/<br ?>/gi,"<br />"),e=e.replace(/<br style=[\'\"].*?[\'\"]>/gi,"<br />"),e=e.replace(/<p>&nbsp;<\/p>/gi,""),e=e.replace(/<\/p[^>]*>/gi,"<br /><span></span>"),e=e.replace(/<p[^>]*>/gi,""),e=e.replace(/<([\w-]+)(?:|[^>]*[^\/])>((?:\s|<br[ \/]*>)*)<\/\1>/gi,B),e=e.replace(/(<span><\/span>)+/gi,"<span></span>"),e=e.replace(/<\/?([\w-]+)[^>]*>/gi,j),e=e.replace(/<[^>]*>/g,K)}function B(e,t,i){return"span"==t.toLowerCase()?e:i}function j(e,t){return/^(span|strong|u|em|br|big|small|a|font|ul|ol|li)$/i.test(t)||n.chromeless&&/^(img)$/i.test(t)?e:""}function K(e){return e=e.replace(/\s+([\w-]+)\s*=\s*["'][^"']*["']/g,F)}function F(e,t){var i=/^(src|alt|href|target|title|style|size|color)$/i;return e.match(/selectionboundary/i)||i.test(t)?e:""}function H(e){if(!e)return!1;var t=window.rangy.createRange();t.selectNode(e),te.selectRange(t)}function W(e){ge=!!e;var t=window.rangy.getSelection();return t.rangeCount<1?null:t.getRangeAt(0)}function $(){var e=window.rangy.getSelection().anchorNode;return 3===e.nodeType&&(e=e.parentNode),e}function V(){try{var e=t($()),i="a:not(.wbutton)",n=e.closest(i);if(e.length&&(e.is(i)||1===n.length)&&(1===n.length&&(e=t(n[0])),0===e.closest(".wsite-logo").length))return void a.request("settings:siteDomain").done(function(t){G(),q(e,t)});G(),window.currentBox&&X()}catch(o){}}function z(e){return e.offset().left-t(document).scrollLeft()}function U(e){return e.offset().top-t(document).scrollTop()}function q(i,n){if(i.length&&i.is("a")){re=i;var o=te.parseLinkString(i.attr("href")),l=function(e){e.stopPropagation(),ie=!0;var t=i.closest(".element");te.getChannel().request("linker:open",{existing:o,remove:!0,ucfid:t.length?t[0].id:null,coordinates:t.length?{docLeft:z(t),docTop:U(t),height:t.height(),width:t.width()}:null}).done(function(e,t){e?(i.attr("href",e),t?i.attr("target","_blank"):i.removeAttr("target")):(H(i[0]),te.runCommand(window.currentBox,"unlink",null))}).always(te.linkerAlwaysCallback)},c=t("<div>",{id:"link-info-box"});if("_blank"==i.attr("target")&&(o.newWindow=!0),o.pageID){var d=s.getPage(o.pageID);c.append(e.utl("html.weebly.libraries.weebly_editbox_1"),t("<a>",{html:d.get("title"),on:{click:function(){a.request("page:navigate:go",o.pageID)}}}))}else if(o.location)if(e.Restrictions.published){var u=n?"http://"+n+"/uploads/"+o.location:"/uploads/"+o.location;c.append(e.utl("html.weebly.libraries.weebly_editbox_2"),t("<a>",{href:u,target:"_blank",html:o.location.replace(/^.*\//,"")}))}else c.append(e.utl("javascript.site.editor.ui.weebly_editbox_10"),t("<a>",{html:o.location.replace(/^.*\//,"")}));else if(o.email)c.append(o.email);else if(o.store)c.append(e.utl("html.weebly.libraries.weebly_editbox_3"),t("<a>",{html:o.store,on:{click:function(){a.request("page:navigate:commerce",o.store)}}}));else if(o.phone)c.append(e.utl("javascript.site.editor.ui.weebly_editbox_9")+" : ",t("<span>",{text:o.phone}));else if(o.blogPost){var h=g.getBlogPostDetailsFromLink(o.blogPost);c.append(e.utl("javascript.site.editor.ui.weebly_editbox_8"),t("<a>",{html:h.title,on:{click:function(){r.vent.trigger("navClicked",h.pageId),r.vent.once({pageRendered:function(){a.execute("blog:post:edit",h.postId)}})}}}))}else c.append(e.utl("html.weebly.libraries.weebly_editbox_4"),t("<a>",{href:o.url,target:"_blank",html:o.url}));c.append(" - ",t("<a>",{html:e.utl("html.weebly.libraries.weebly_editbox_5"),on:{click:l}})," - ",t("<a>",{html:e.utl("html.weebly.libraries.weebly_editbox_6"),on:{click:Y}}),t("<a>",{html:"&times;",alt:e.utl("javascript.site.editor.ui.weebly_editbox_7"),css:{padding:"0px 5px 0px 10px"}})),t("#menuitem-lu").on("click.link-info-box",l).show(),t("#menuitem-cl").hide();var p=t("#_editor-ui"),f=p.offset(),m=i.offset();c.css({top:m.top+i.height()+2-f.top+"px",left:m.left-f.left+"px"}),p.append(c)}}function G(){t("#link-info-box").remove(),t("#menuitem-lu").off("click.link-info-box").hide(),t("#menuitem-cl").show()}function Y(){re.length&&re.is("a")&&(H(re[0]),te.runCommand(window.currentBox,"unlink",null),G())}function X(){var e=t("#"+window.currentBox);if(Prototype.Browser.IE){var i=t(window),n=i.scrollTop();e.css("position","fixed").focus().css("position","relative"),i.scrollTop(n)}else e.focus()}function J(){if(ge=!1,ae)return window.rangy.restoreSelection(ae),window.rangy.removeMarkers(ae),void(ae=null);var e=W();e&&e.isValid()||(e=null,ee&&ee.isValid()?e=ee:Z&&Z.isValid()&&(e=Z),e&&te.selectRange(e))}var Q,Z,ee,te={currentBox:"",_editBoxOptions:{},editBoxRedrawOptions:!1,editBoxSelectingText:!1},ie=!1,ne=!1,oe="",re="",se=null,ae=null,le=null,ce=null,de=!0,ue=null,he=0,pe=t.noop,fe=!1,me={},ge=!1,ve=0,be=null;return te.getChannel=function(){return null==be&&(be=u.inEditorContext()?o:a),be},te.makeElementContentEditable=function(e,o){if(e){o=o||{};var r;e instanceof t?(r=e,e=e[0]):r=t(e),e.id||(e.id="editableElementContent"+ve++),e.contentEditable=!0,r.addClass("editable-text"),void 0!==r.attr("placeholder")&&(o.emptyText=r.attr("placeholder"),r.html()||r.html(r.attr("placeholder"))),o.$el=r,i.isUndefined(o.richTextControls)&&(o.richTextControls=!n.chromeless),window._editBoxOptions[e.id]=o}},te.initEditBox=function(){window.rangy.initialized||window.rangy.init(),v(),window.onbeforeunload=function(){te.hideEditBox(window.currentBox)},t(document).on({click:_,mousedown:E,selectstart:T,selectionchange:C}),n.chromeless&&t(document).on({keypress:y,keyup:w,focusin:E})},te.closePlatformSettingsPanel=function(){r.elementSettings.close()},a.on({"site:overlays:hide":function(){te.hideEditBox(null,!0)},dragstart:te.hideEditBox}),r.on({dragstart:te.hideEditBox}),te.hideEditBox=function(e,i){if(window.currentBox&&(window.currentBox===e||i)){window.currentBox&&i&&(e=window.currentBox),ue&&(ue.parents("li.inside").removeClass("inside-child-active"),ue.removeClass("inside-active"),ue=null);var o=t("#"+e),r=window._editBoxOptions[o.id]||{richTextControls:!n.chromeless};if(o.length){var s=S(o.html(),!!ce,o);if("wsite-title"==e?a.trigger(h.EVENTS.AREA_TEXT_EDITING_END,"logo","",s):"function"!=typeof ce&&a.trigger(h.EVENTS.TEXT_EDITING_END,e,s),"wsite-title"!=e&&(!s||s.match(/^(<span><\/span>)*<br \/>$/))){var d=o.attr("placeholder"),u=e.replace(/wsite-/,"");"string"!=typeof r.emptyText&&"string"==typeof d&&(r.emptyText=d),s="string"==typeof r.emptyText?r.emptyText:n.areaDefaultPlaceholderText[u]||n.defaultPlaceholderText,"undefined"!=typeof o.parents("li.inside.platform-element-child").data("default-text")&&(s=o.parents("li.inside.platform-element-child").data("default-text")),o.html(s)}"function"==typeof ce?ce(e,k(s,r)?"":s,se):"wsite-title"!=e||n.chromeless?o.hasClass("input")||n.chromeless||l.saveContent(e,s,se):l.updateSiteTitle(s);var m=p.getContentField(window.currentBox);if(m&&(m.contentFieldContent=s,m.content=m.render()),f.instances[e]){f.instances[e].setData(s),f.instances[e].focusManager.blur();try{f.instances[e].destroy()}catch(g){}G(),n.chromeless&&(o.off("blur"),o.blur())}}Q&&(Q(),Q=null),window.currentBox=null,r.richTextControls&&(t("#editMenu").hide(),te.getChannel().execute("linker:close"),o.off("blur")),window.editBoxRedrawOptions&&c.generateProperties(c.currentElement),o.attr("class")&&o.attr("class").match("prettyprint")&&window.prettyPrint(),"wsite-title"==e&&window.refreshNavCondense&&window.refreshNavCondense()}},te.showEditBox=function(e,o,s){function l(i){ie||t.contains(p[0],i.target)||u.length&&t.contains(u[0],i.target)||p.is(document.activeElement)||(v.off("click",l),te.hideEditBox(e))}var u=t("#editMenu:hidden");if(s=s||{richTextControls:!n.chromeless},r.vent.trigger("editor:element:text:modify"),closePlatformSettingsPanel(),D(e),e==window.currentBox)return void(u.length&&"wsite-title"!=e&&de&&s.richTextControls!==!1&&O(e));window.currentBox&&te.hideEditBox(window.currentBox);var p=t("#"+e),f=p.hasClass("wsite-button-inner");f===!0?c.selectElement(p.closest(".element").get(0)):c.unselectElement(),ue=p.closest("li.inside"),ue.length?(ue.parents("li.inside").addClass("inside-child-active"),ue.addClass("inside-active")):ue=null,window.currentBox=e,se=p[0].style.textAlign||null,ce=null,(p.hasClass("product-description")||p.hasClass("product-title"))&&(s=i.extend({saveCallback:d.saveProductField,redrawOptions:!0,showOptions:!0},s)),p.hasClass("product-price")&&(s=i.extend({saveCallback:d.saveProductField,redrawOptions:!0,showOptions:!1},s)),s&&("function"==typeof s.saveCallback&&(ce=s.saveCallback),"undefined"!=typeof s.redrawOptions&&(window.editBoxRedrawOptions=s.redrawOptions),"undefined"!=typeof s.showOptions&&(de=s.showOptions)),"wsite-title"!=e&&de&&s.richTextControls!==!1&&(O(e),m.show({element:p.closest("li.inside")}),m.once("destroy",function(){ie&&(oe=e,ne=!0)}));var g=W();if(g&&N(),p.html(S(p.html(),!!ce,p)),g?J():(g=window.rangy.createRange(),g.selectNodeContents(p[0]),g.collapse(!1),te.selectRange(g)),s.richTextControls){var v=t(document);v.on("click",l)}else p.on("blur",function(){ge||te.hideEditBox(e)});var b=p.html(),y=p.parents("li.inside.platform-element-child")[0];if(k(b,s)||"undefined"!=typeof y&&""!==b&&t(y).data("default-text")===b)try{setTimeout(I,0)}catch(w){}s.startedEditingCallback?s.startedEditingCallback():"wsite-title"==e?a.trigger(h.EVENTS.AREA_TEXT_EDITING_START,"logo",""):a.trigger(h.EVENTS.TEXT_EDITING_START,e)},te.runCommand=function(e,i,o){var r,s,a,l,c=document,d=t("#"+window.currentBox),u=f.instances[window.currentBox],h=window.rangy.getSelection(),p=h.toString();if(!(d.length&&u||n.chromeless))return!1;u.focus(),k(d.html(),{$el:d})?(r=window.rangy.createRange(),r.selectNodeContents(d[0]),te.selectRange(r),r.deleteContents()):"increaseFontSize"===i||"decreaseFontSize"===i||"unlink"===i||"foreColor"===i&&""!==p||"bold"===i&&!n.chromeless?(l=u.getSelection().createBookmarks(),""===p&&(u.getSelection().selectBookmarks(l),l=null)):(J(),l&&u.getSelection().selectBookmarks(l));try{switch(i){case"foreColor":l&&u.getSelection().selectBookmarks(l),c.execCommand(i,!1,o),l=u.getSelection().createBookmarks(),f.env.gecko&&d.find("[type=_moz]").remove();break;case"fontSize":c.execCommand("FontSize",!1,o);break;case"increaseFontSize":try{s=c.queryCommandValue("FontSize"),s?"string"==typeof s?(a=s.match("px")?M(parseInt(s.replace("px",""),10)):parseInt(s,10),a=a>6?7:a+1,""!==p||n.chromeless?c.execCommand("FontSize",!1,a):u.insertHtml('<font size="'+a+'"></font>')):(a=s>6?7:s+1,""!==p||n.chromeless?c.execCommand("FontSize",!1,a):u.insertHtml('<font size="'+a+'"></font>')):(u.getSelection().selectBookmarks(l),s=c.queryCommandValue("FontSize")||3,c.execCommand("FontSize",!1,parseInt(s)+1),l=u.getSelection().createBookmarks())}catch(m){c.execCommand(i,!1,o)}break;case"decreaseFontSize":try{s=c.queryCommandValue("FontSize"),s?"string"==typeof s?(a=s.match("px")?M(parseInt(s.replace("px",""),10)):parseInt(s,10),a=a>1?a-1:1,""!==p||n.chromeless?c.execCommand("FontSize",!1,a):u.insertHtml('<font size="'+a+'"></font>')):(a=s>1?s-1:1,""!==p||n.chromeless?c.execCommand("FontSize",!1,a):u.insertHtml('<font size="'+a+'"></font>')):(u.getSelection().selectBookmarks(l),s=c.queryCommandValue("FontSize")||3,c.execCommand("FontSize",!1,s-1),l=u.getSelection().createBookmarks())}catch(m){c.execCommand(i,!1,o)}break;case"promptLink":te.showCreateLink({useExisting:!0,remove:!0,modal:!0});break;case"justifyLeft":case"justifyCenter":case"justifyRight":se=i.toLowerCase().replace("justify",""),d.css("text-align",se),pe();break;case"justifyFull":se="justify",d.css("text-align","justify"),pe();break;case"insertOrderedList":n.chromeless?c.execCommand(i,!1,o):u.execCommand("numberedlist");break;case"insertUnorderedList":n.chromeless?c.execCommand(i,!1,o):u.execCommand("bulletedlist");break;case"createLink":if(""===p){var r=h.rangeCount?h.getRangeAt(0):null;r&&g.getNameFromParsedLink(te.parseLinkString(o),function(e){var t=document.createTextNode(e);r.insertNode(t),r.selectNodeContents(t),h.setSingleRange(r),c.execCommand(i,!1,o)})}else c.execCommand(i,!1,o);break;case"unlink":var v=c.execCommand(i,!1,o);!f.env.gecko&&v||!re.length||t(re[0]).contents().unwrap();break;case"selectAll":case"delete":case"bold":c.execCommand(i,!1,o);break;default:u.execCommand(i)}}catch(b){c.execCommand(i,!1,o)}l&&u.getSelection().selectBookmarks(l),"promptLink"!=i&&X()},te.getCurrentValue=function(e){var i,n=document,o=t("#"+window.currentBox);if(!o.length)return null;switch(J(),e){case"link":var r=t($()).closest("a");i=r.length?{href:r.attr("href")||"",target:r.attr("target")||""}:!1;break;case"justify":i=o.css("text-align"),"justify"===i&&(i="full");break;case"orderedList":i=P($(),"ol");break;case"unorderedList":i=P($(),"ul");break;default:try{i=n.queryCommandValue(e)}catch(s){}}return i},te.convertSpanToDiv=function(e){var i,n,o={};return t.each(e.get(0).attributes,function(e,t){o[t.name]=t.value}),n=window.getComputedStyle(e.get(0)),o.css={display:n.display||"inline"},o.data={converted:"true"},o.append=e.contents(),i=t("<div/>",o),e.replaceWith(i),i},te.saveSelection=N,te.getSelectionHtml=function(){return window.rangy.getSelection().toHtml()},te.getSelectionRange=W,te.selectRange=function(e){var t=window.rangy.getSelection();t.setSingleRange(e)},te.parseLinkString=function(e){if("undefined"==typeof e)return{url:""};var t,i={},n=e.replace("weeblylink_new_window","");if(n!==e&&(i.newWindow=!0,e=n),t=e.match(/^http:\/\/weebly-link\/(.*)/))i.pageID=t[1];else if(t=e.match(/^http:\/\/weebly-file\/(.*)/))i.location=t[1];else if(t=e.match(/^http:\/\/weebly-image-full\//))i.fullSized=!0;else if(t=e.match(/^mailto:(.*)/))i.email=t[1];else if(t=e.match(/store\/[pc]\d+\/.*/))i.store=t[0];else if(t=e.match(/^http:\/\/weebly-blog-post-link\/(.*)/))i.blogPost=e;else if(t=e.match(/^tel:(.*)/))i.phone=t[1];else if(t=e.match(/^http:\/\/(.*)/)){var o=t[1].replace(/<\/?[^>]+>/g,"");o!=t[1]?i.url="":i.url=n}else i.url=n;return i.url&&"string"==typeof i.url&&(i.url.indexOf("javascript:;")>-1&&(i.url=i.url.replace("javascript:;","")),"<a>"===i.url&&(i.url="")),i},te.showCreateLink=function(e){ie=!0,e=e||{};var i=!1,n=null;if(e.isConfLink||(n=t($())),e.useExisting){var o,r=t(e.ucfpid);if(r.length&&r.val())o=r.val().match(/href=["'](.*?)["']/),o&&(i=te.parseLinkString(o[1]));else{var s=te.getSelectionHtml();n&&n.is("a")?i=te.parseLinkString(n[0].href):s&&(o=s.match(/href=["'](.*?)["']/),o&&(i=te.parseLinkString(o[1])))}}var a=W(),l=t("#"+currentBox);te.getChannel().request("linker:open",{ucfid:window.currentBox,modal:e.modal,existing:i,remove:e.remove&&!!i,disableFile:e.isConfLink,disableEmail:e.isConfLink,disableNewWindow:e.isConfLink,coordinates:l.length?{docLeft:z(l),docTop:U(l),height:l.height(),width:l.width()}:null}).done(function(t,i){e.range=a,e.node=n,te.setLink(t,i,e)}).fail(function(i){if(a&&window.currentBox&&(X(),te.selectRange(a)),i){var n=t("#"+this.ucfid).find('a[href="'+i+'"]');n.replaceWith(n.html())}else e.onCancel&&e.onCancel()}).always(te.linkerAlwaysCallback)},te.linkerAlwaysCallback=function(){ne&&(te.hideEditBox(oe),ne=!1,oe=""),ie=!1},te.tryRestoreSelection=J,te.updateLink=function(e,i){J();var n=t($()),o="a:not(.wbutton)";n.length&&(n.is(o)||(n=n.closest(o)))&&(e?(n.attr("href",e),i?n.attr("target","_blank"):n.removeAttr("target")):(H(n[0]),te.runCommand(window.currentBox,"unlink",null)))},te.setLink=function(e,i,n){if(n=n||{},n.ucfpid)p.setContentFieldProperty(c.ucfid,n.ucfpid,"<a"+(e?" href='"+e+"'":"")+(i?" target='_blank'":"")+">"),c.skipRerender=!0,c.onChange(n.ucfpid),r.execute("element:setHandlers");else if(n.range&&window.currentBox?te.selectRange(n.range):J(),e)i?(te.runCommand(window.currentBox,"createLink",e),t("#"+window.currentBox).find('a[href="'+e+'"]').attr("target","_blank")):te.runCommand(window.currentBox,"createLink",e);else if(n.remove){te.runCommand(window.currentBox,"unlink");var o=t($());o.length&&o.is("a")&&(N(),o.replaceWith(o.html()),J())}n.onChoose&&n.onChoose(e,i)},te.cleanEditableText=S,i.extend(window,te),te});var tipsShown=20,tooltipCallbacks={};_wAMD.define("legacy/weebly_tooltip",function(){});var previousPages=0,currentSite=0,siteType=null,currentPage=0,currentPagePublished=null,obtainedPage=0,currentElement=0,currentThemesPage=0,imageUploadSize=0,userID=0,userIDLocation="",publishingWindow=0,publishingAnim=0,publishingLoc="left",uploadUpdater=new Object,oldSecondList="",oldPages="",externalSites=0,scriptType=[],originalPages="",documentWriteElement="body",currentThemesPerPage=8,currentThemesCategory="",validateChangeFunction=function(){},headerSelected=null,headerDimensions=Array(),uploadId=null,currentHeader=null,resetScrollTop=null,adsenseID=0,currentImageNum=Math.floor(10000000001*Math.random()),newSitePassword="",currentSiteLocation="",userEvents={},xhrUploading=null,optionsBoxSelectingText=!1,Relay=require("editor-site-shared/relay"),RELAY_CONST=require("site/editor/relay-constants"),PublishWindow=require("editor/publish-window/PublishWindow"),NewBlogPost=require("editor/publish-window/NewBlogPost");Prototype.Browser.IE6=Prototype.Browser.IE&&6==parseInt(navigator.userAgent.substring(navigator.userAgent.indexOf("MSIE")+5)),Prototype.Browser.IE6=Prototype.Browser.IE&&6==parseInt(navigator.userAgent.substring(navigator.userAgent.indexOf("MSIE")+5));var calledAdsenseSetup=!1,calledExternalSetup=!1;Event.observe(document,"mouseup",clickHandler),Prototype.Browser.Gecko&&window.navigator.userAgent.match(/Macintosh/)&&Event.observe(document,"click",function(e){var t=Event.element(e);"EMBED"==t.tagName&&clickHandler(e)}),shortcut.add("Ctrl+B",function(){runCommand(currentBox,"Bold",null)}),shortcut.add("Ctrl+U",function(){runCommand(currentBox,"Underline",null)}),shortcut.add("Ctrl+I",function(){runCommand(currentBox,"Italic",null)});var faviconUploading=!1,alt=!1;_wAMD.define("legacy/weebly_main",["editor/app","editor/page-manager/pages","editor/events","editor/blog-editor","editor/publish-window/PublishWindow","editor/publish-window/NewBlogPost","editor/publish-window/BlogPost","legacy/weebly_utils","legacy/weebly_timing_test","legacy/weebly_dialog","legacy/weebly_site_settings","site/editor/ui/weebly_elements","legacy/slideshow-jq","shared/permissions/restrictions","site/editor/ui/weebly_form","legacy/weebly_image_gallery","legacy/weebly_sliding_panel","legacy/weebly_color_chooser","site/editor/ui/images/utils","site/editor/ui/weebly_editbox","config","editor-site-shared/relay","site/editor/relay-constants","legacy/weebly_tooltip","site/editor/app"],function(){}),_wAMD.define("editor/build/utils",["jquery","underscore","editor/app","editor/page-manager/pages","editor-site-shared/relay","editor/build/themes/main","editor/content/main","editor/build/ui/weebly_view","editor/build/themes/data","editor-site-shared/ui/utils","legacy/weebly_utils","legacy/weebly_element_utils","legacy/weebly_main"],function(e,t,i,n,o,r,s,a,l,c){function d(e,t,o){"undefined"==typeof o&&(o=window.currentPage);var r=!1,a={};e=e.replace(/<!--%%(PAGELOCKED|PAGELOCKDATA)%%:(.*?)-->/,function(e,t,i){try{a=JSON.parse(i)}catch(n){return""}return"PAGELOCKED"==t&&(r=!0),""}),e=e.replace(/<!--%%PAGES%%:(.*?)-->/,function(e,t){try{s.updatePageData(JSON.parse(t))}catch(i){}return""}),e=e.replace(/<!-- %%ALREADY_PUBLISHED%%:(.*?) -->/,function(e,t){return t&&i.vent.trigger("blog:already_published",t),""}),e.match(/^Authentication error/)&&Weebly.Permissions.isContributor&&window.hasAllowedPages()&&!r&&window.reloadAllowedPages();var l=n.getPage(o),c="store"===l.get("kind")&&!Weebly.Permissions.store_edit;if(e.match(/^Authentication error/)&&window.hasAllowedPages()||r||c){var d=window._W.utl("javascript.editor.build.utils_1"),u="";if(r){var h=a[o];d=window._W.utl("javascript.editor.build.utils_8"),u=h&&h.email?window._W.utl("javascript.editor.build.utils_7",h.email):window._W.utl("javascript.editor.build.utils_6")}else window.externalLibariesLoaded&&(d=window._W.utl("javascript.editor.build.utils_4"));window.showPageChooser(d,u,{page_locked:r,page_locks:a,initial_load:t})}}var u={};return u.removeEmptyColumns=function(){return i.loading.start("EditorBuildUtils::removeEmptyColumns::start"),e.when(c.getActiveContentAreas(),l.getCurrentThemeData(a.isMobileView)).always(function(){i.loading.stop("EditorBuildUtils::removeEmptyColumns::start")}).then(function(e,t){return i.loading.start("EditorBuildUtils::removeEmptyColumns::request"),Weebly.Editor.RPC.Elements.removeEmptyColumns(window.currentPage,r.getAreaSummary(window.currentPage.replace(/\/.*/,""),t),window.currentBlog.postId,e[0].parentString,void 0!==i.request("blog:current")?1:0).always(function(){i.loading.stop("EditorBuildUtils::removeEmptyColumns::request")})})},o.commands.setHandler("removeEmptyColumns",u.removeEmptyColumns),u.parseMiddleData=function(e,i,n){if(t.isObject(e)){if(t.isEmpty(e))return d(e,i,n),!1}else try{e=JSON.parse(e)}catch(o){return d(e,i,n),!1}return e},u.setProperty=function(e,t){return window.setContentFieldProperty(Weebly.Elements.ucfid,e,t)},u}),_wAMD.define("editor-site-shared/build/elements/combineUtils",["jquery","underscore","editor/app","editor/build/utils","editor-site-shared/relay","legacy/weebly_element_utils"],function(e,t,i,n,o,r){var s=function(e,t){this.searchElements=e,this.cssClasses="inside-hover-highlight",t&&(this.cssClasses+=" ",this.cssClasses+=t)};return s.prototype.testPoint=function(i,n){var r=this,s=this.searchElements instanceof e,a=this.found;this.found=null;var l=5;return t.each(this.searchElements,function(t){var a,c,d,u;if(s){if(t=e(t),t.hasClass("platform-element-child"))return!1;var h=t.offset();a=h.left,c=h.top,d=t.width(),u=t.height()}else a=t.left,c=t.top,d=t.width,u=t.height;if(i>=a+l&&a+d-l>=i&&n>=c+l&&c+u-l>=n){var p=e("#inside_"+t.id);return p.length?t=p:(t=e("<div>",{id:t.id,css:{width:d,height:u,left:a,top:c},data:{is_site_wide:t.is_site_wide,parentString:t.parentString,area:t.area}}),t.offset=function(){return{left:a,top:c}},t.addClass=function(e){o.execute("combiner:addClass",this[0].id,e)},t.removeClass=function(e){o.execute("combiner:removeClass",this[0].id,e)}),r.found=t,!1}}),!a||this.found&&a[0].id===this.found[0].id||a.removeClass(this.cssClasses),this.found&&this.found.addClass(this.cssClasses),this.found},o.commands.setHandlers({"combiner:addClass":function(t,i){e("#inside_"+t).addClass(i)},"combiner:removeClass":function(t,i){e("#inside_"+t).removeClass(i)}}),s.prototype.callMethod=function(t,s){this.found.removeClass(this.cssClasses);var a,l,c,d=this.found[0].id.replace(/[\D]/g,""),u=r.getElementObject(d).elData,h=u.parentString,p=u.area.name,f=u.area.is_site_wide;if(s instanceof e){s.hide();var m=s.find(".element");m.length&&(window.xhrUploading=m[0].id),a=s[0].id.replace(/[\D]/g,"");var g=r.getElementObject(a).elData;l=g.area.name,c=g.parentString}else a=s.id,l=p,c="";i.loading.start("CombineUtils::"+t),Weebly.Editor.RPC.Elements[t](window.currentPage,f,l,a,c,p,d,h).always(function(){i.loading.stop("CombineUtils::"+t),this.constructor.afterRPC()}.bind(this));var v=!1;null!==c.match(/-col/)&&(v=!0),s instanceof e?(v&&o.execute("removeEmptyColumns"),o.request("page:navigate",window.currentPage)):(v&&n.removeEmptyColumns(),i.build.updateList(window.currentPage))},s.afterRPC=function(){window.xhrUploading=null},s}),_wAMD.define("editor-site-shared/build/elements/TextElement",["jquery","underscore","editor-site-shared/build/elements/combineUtils","editor-site-shared/ui/constants","editor-site-shared/build/elements/Element","editor-site-shared/build/elements/LegacyElement","editor-site-shared/ui/utils"],function(e,t,i,n,o,r,s){function a(e){return-1!==n.STANDALONE_IMAGE_ELEMENTS.indexOf(e.element_id)}var l=window.Class.create(r,{initialize:function($super,e,t){$super(e,t),s.init(t.currentApp)},startDrag:function(){var e=this;s.getActiveContentAreas().done(function(n){e.combiner=new i(t.filter(s.flattenElements(n,!0),a),"wsite-text-combine")})},onDrag:function($super,e,t,i){if(i=$super(e,t,i),this.combiner&&this.combiner.testPoint(e.pageX,e.pageY)){var n=this.combiner.found.offset();return t.originalPosition.left=n.left,t.originalPosition.top=n.top,"absolute"===t.helper.css("position")?(n=t.helper.offsetParent().offset(),t.originalPosition.left-=n.left,t.originalPosition.top-=n.top):(t.originalPosition.left-=t.offset.left-t.position.left,t.originalPosition.top-=t.offset.top-t.position.top),null}return i},stopDrag:function(t,i){this.combiner&&this.combiner.found&&(i.noDrop=!0,this.isNew===!0?this.combiner.callMethod("replaceWithImageTextElement",{id:this.eid,parentString:""}):this.combiner.callMethod("combineTextImageElements",e(this.li)))},afterRender:function($super,t,i){$super(t,i),e(t).addClass("wsite-text")}});return l.element_ids=["44785763","4884809","39750678"],l.element_ids.forEach(function(e){o.register(e,l)}),l}),_wAMD.define("editor-site-shared/build/elements/ImageElement",["jquery","underscore","editor-site-shared/build/elements/combineUtils","editor-site-shared/ui/constants","editor-site-shared/build/elements/Element","editor-site-shared/build/elements/TextElement","editor-site-shared/build/elements/LegacyElement","editor-site-shared/ui/utils"],function(e,t,i,n,o,r,s,a){function l(e){return-1!==r.element_ids.indexOf(e.element_id)}for(var c=window.Class.create(s,{initialize:function($super,e,t){$super(e,t),a.init(t.currentApp)},startDrag:function(){var e=this;a.getActiveContentAreas().done(function(n){e.combiner=new i(t.filter(a.flattenElements(n,!0),l),"wsite-image-combine")})},onDrag:function($super,e,t,i){if(i=$super(e,t,i),this.combiner&&this.combiner.testPoint(e.pageX,e.pageY)){var n=this.combiner.found.offset();t.originalPosition.left=n.left,t.originalPosition.top=n.top;var o=t.helper.find("#weebly_image_extras_helper");o.length||(o=t.helper),"absolute"===o.css("position")?(n=o.offsetParent().offset(),t.originalPosition.left-=n.left,t.originalPosition.top-=n.top):(t.originalPosition.left-=t.offset.left-t.position.left,t.originalPosition.top-=t.offset.top-t.position.top);var r=this.getPropertyResult("<!ALIGN!>");return"right"===r?(this.combiner.found.addClass("wsite-image-combine-right"),t.originalPosition.left+=this.combiner.found.outerWidth()-o.outerWidth()):this.combiner.found.removeClass("wsite-image-combine-right"),null}return i},stopDrag:function(t,i){this.combiner&&this.combiner.found&&(i.noDrop=!0,this.isNew===!0?this.combiner.callMethod("replaceWithImageTextElement",{id:this.eid,parentString:""}):this.imageText===!0?this.combiner.callMethod("moveImageTextElementImage",e(this.li)):this.combiner.callMethod("combineImageTextElements",e(this.li)))},afterRender:function($super,t,i){$super(t,i),e(t).addClass("wsite-image")},"<!SRC!>":function(){var e;try{e=JSON.parse(this.getPropertyResult("<!DATA!>"))}catch(t){}return e&&e.image?e.image.editorUrl:this.getPropertyResult("<!SRC!>")}}),d=0;d<n.STANDALONE_IMAGE_ELEMENTS.length;d++)o.register(n.STANDALONE_IMAGE_ELEMENTS[d],c);return c}),_wAMD.define("tpl!elements/commerce-product.tpl",[],function(){return"<div class='wsite-product' style='margin-top:{{marginTop}}; margin-bottom:{{marginBottom}}'>\n\n	{{#showImage}}\n		<div class='wsite-product-image-wrap' style='width:{{imageWidth}}'>\n			<a class='wsite-product-image' {{{imageLinkAttrs}}}>\n				{{{imageHtml}}}\n			</a>\n		</div>\n	{{/showImage}}\n\n	<div class='wsite-product-right'>\n\n		<div class='wsite-product-top'>\n\n			<h2 class='wsite-product-title'{{#inEditor}} placeholder=''{{/inEditor}}>{{title}}</h2>\n			{{#hasVariants}}\n				<ul class='wsite-product-variations'>\n					{{#variantOptions}}\n						<li class='wsite-product-variant {{#disabled}}wsite-com-product-disabled{{/disabled}}'><span class=\"wsite-option-name\">{{name}}</span>:\n						{{#text}}\n							{{^showTextArea}}\n							<input id=\"wsite-com-product-option-{{safe_option_name}}\" class=\"wsite-field wsite-form-input product-text-option\" {{#disabled}}disabled{{/disabled}} name=\"{{name}}\" {{{textInputDataAttrs}}}>\n							{{/showTextArea}}\n							{{#showTextArea}}\n							<textarea id=\"wsite-com-product-option-{{safe_option_name}}\" class=\"wsite-field wsite-form-input product-text-option\" {{#disabled}}disabled{{/disabled}} name=\"{{name}}\" {{{textInputDataAttrs}}}></textarea>\n							{{/showTextArea}}\n							{{#required}}\n								<span class=\"form-required {{#disabled}}wsite-com-product-disabled{{/disabled}}\">*</span>\n							{{/required}}\n							<div class=\"text-option-error-message\"></div>\n						{{/text}}\n						{{^text}}\n							{{choice}}\n						{{/text}}\n						</li>\n					{{/variantOptions}}\n				</ul>\n			{{/hasVariants}}\n\n			{{#hasRequiredOption}}\n				<p {{#disabled}}class=\"wsite-com-product-disabled\"{{/disabled}}>{{#stl}}ecommerce.common.indicates_required{{/stl}}</p>\n			{{/hasRequiredOption}}\n\n			{{#showPrice}}\n				<div class='wsite-product-price'>\n					{{{priceHtml}}}\n				</div>\n			{{/showPrice}}\n\n		</div>\n\n		<div class='wsite-product-button-wrap'>\n			<a href='{{buttonUrl}}' class='{{buttonClass}} {{#disabled}}wsite-com-product-disabled{{/disabled}}' {{{buttonDataAttrs}}} >\n				<span class='wsite-button-inner'>{{buttonText}}</span>\n			</a>\n		</div>\n\n		{{#showDescription}}\n			<div class='wsite-product-description paragraph'{{#inEditor}} placeholder=\"{{#esc_attr}}{{#tl}}templates.elements.commerce-product_1{{/tl}}{{/esc_attr}}\"{{/inEditor}}>{{{descriptionHtml}}}</div>\n		{{/showDescription}}\n\n	</div>\n\n</div>\n";
}),_wAMD.define("tpl!elements/commerce-product-price.tpl",[],function(){return"\n{{#salePrice}}\n	<a class='wsite-product-original-price'>\n		{{{currencyPrefix}}}{{price}}{{{currencySuffix}}}\n	</a>\n	<a class='wsite-product-sale-price'>\n		{{{currencyPrefix}}}{{salePrice}}{{{currencySuffix}}}\n	</a>\n{{/salePrice}}\n\n{{^salePrice}}\n	<a>\n		{{{currencyPrefix}}}{{price}}{{{currencySuffix}}}\n	</a>\n{{/salePrice}}"}),_wAMD.define("tpl!elements/commerce-product-legacy-grid.tpl",[],function(){return"<div class='product-block product' style='{{alignCss}}'>\n\n	<div class='product-block-inner'>\n		{{#showImage}}\n			<a {{{imageLinkAttrs}}}>\n				<span class='product-block-image' style='background-image:url(\"{{imageUrl}}\")'></span>\n			</a>\n		{{/showImage}}\n	</div>\n\n	<div class='product-title'>\n		{{title}}\n	</div>\n\n	{{#showPrice}}\n		<div class='product-block-price'>\n			{{{priceHtml}}}\n		</div>\n	{{/showPrice}}\n\n	<input\n		class='product-button'\n		type='image'\n		{{#isNotAvailableButton}}\n			src='//{{staticDomain}}/editor/images/view_product_small.gif'\n		{{/isNotAvailableButton}}\n		{{#isViewButton}}\n			src='//{{staticDomain}}/editor/images/view_product_small.gif'\n		{{/isViewButton}}\n		{{#isAddToCartButton}}\n			src='//{{staticDomain}}/editor/images/add_to_cart_small.gif'\n		{{/isAddToCartButton}}\n		{{#isBuyNowButton}}\n			src='//{{staticDomain}}/editor/images/buy_now_small.gif'\n		{{/isBuyNowButton}}\n		{{#buttonUrl}}\n			onclick=\"window.location.href='{{buttonUrl}}'\"\n		{{/buttonUrl}}\n		{{{buttonDataAttrs}}}\n	/>\n\n	<div style='clear:both'></div>\n	\n</div>\n"}),_wAMD.define("tpl!elements/commerce-product-legacy-large.tpl",[],function(){return"<div class='product-large product'>\n\n	{{#showImage}}\n		<a {{{imageLinkAttrs}}}>\n			<img src='{{imageUrl}}' class='product-image' style='width:{{imageWidth}}' />\n		</a>\n	{{/showImage}}\n\n	<div class='product-title'>\n		{{title}}\n	</div>\n\n	{{#showDescription}}\n		<div class='product-description'>\n			{{{descriptionHtml}}}\n		</div>\n	{{/showDescription}}\n\n	{{#showPrice}}\n		<div class='product-large-price'>\n			{{{priceHtml}}}\n			&nbsp;\n		</div>\n	{{/showPrice}}\n\n	<div style='height:24px'>\n		<input\n			class='product-button'\n			type='image'\n			{{#isNotAvailableButton}}\n				src='//{{staticDomain}}/editor/images/view_product_big.gif'\n			{{/isNotAvailableButton}}\n			{{#isViewButton}}\n				src='//{{staticDomain}}/editor/images/view_product_big.gif'\n			{{/isViewButton}}\n			{{#isAddToCartButton}}\n				src='//{{staticDomain}}/editor/images/add_to_cart_big.gif'\n			{{/isAddToCartButton}}\n			{{#isBuyNowButton}}\n				src='//{{staticDomain}}/editor/images/buy_now_big.gif'\n			{{/isBuyNowButton}}\n			{{#buttonUrl}}\n				onclick=\"window.location.href='{{buttonUrl}}'\"\n			{{/buttonUrl}}\n			{{{buttonDataAttrs}}}\n		/>\n	</div>\n\n	<div style='clear:both'></div>\n	\n</div>\n"}),_wAMD.define("tpl!elements/commerce-product-legacy-long.tpl",[],function(){return"<div class='product-long product'>\n\n	<div class='product-title'>\n		{{title}}\n	</div>\n\n	{{#showImage}}\n		<a {{{imageLinkAttrs}}}>\n			<img src='{{imageUrl}}' class='product-image' style='width:{{imageWidth}}' />\n		</a>\n	{{/showImage}}\n\n	<div class='product-long-detail'>\n\n		{{#showPrice}}\n			<div class='product-long-price'>\n				{{{priceHtml}}}\n			</div>\n		{{/showPrice}}\n\n		<div style='clear:both'></div>\n\n		<div style='font-size:5px'>&nbsp;</div>\n\n		<div style='height:36px; float:left'>&nbsp;</div>\n\n		<input\n			class='product-button'\n			type='image'\n			{{#isNotAvailableButton}}\n				src='//{{staticDomain}}/editor/images/view_product_big.gif'\n			{{/isNotAvailableButton}}\n			{{#isViewButton}}\n				src='//{{staticDomain}}/editor/images/view_product_big.gif'\n			{{/isViewButton}}\n			{{#isAddToCartButton}}\n				src='//{{staticDomain}}/editor/images/add_to_cart_big.gif'\n			{{/isAddToCartButton}}\n			{{#isBuyNowButton}}\n				src='//{{staticDomain}}/editor/images/buy_now_big.gif'\n			{{/isBuyNowButton}}\n			{{#buttonUrl}}\n				onclick=\"window.location.href='{{buttonUrl}}'\"\n			{{/buttonUrl}}\n			{{{buttonDataAttrs}}}\n		/>\n\n		<div style='clear:both'></div>\n\n	</div>\n\n	{{#showDescription}}\n		<div class='product-description'>\n			{{{descriptionHtml}}}\n		</div>\n	{{/showDescription}}\n\n	<div style='clear:both'></div>\n\n</div>\n"}),_wAMD.define("tpl!elements/commerce-product-legacy-small.tpl",[],function(){return"<div class='product-small product'>\n\n	{{#showImage}}\n		<a {{{imageLinkAttrs}}}>\n			<img src='{{imageUrl}}' class='product-image' style='width:{{imageWidth}}' />\n		</a>\n	{{/showImage}}\n\n	<div class='product-title'>\n		{{title}}\n	</div>\n\n	{{#showDescription}}\n		<div class='product-description'>\n			{{{descriptionHtml}}}\n		</div>\n	{{/showDescription}}\n\n	{{#showPrice}}\n		<div class='product-small-price'>\n			{{{priceHtml}}}\n		</div>\n	{{/showPrice}}\n\n	<input\n		class='product-button'\n		type='image'\n		{{#isNotAvailableButton}}\n			src='//{{staticDomain}}/editor/images/view_product_big.gif'\n		{{/isNotAvailableButton}}\n		{{#isViewButton}}\n			src='//{{staticDomain}}/editor/images/view_product_big.gif'\n		{{/isViewButton}}\n		{{#isAddToCartButton}}\n			src='//{{staticDomain}}/editor/images/add_to_cart_big.gif'\n		{{/isAddToCartButton}}\n		{{#isBuyNowButton}}\n			src='//{{staticDomain}}/editor/images/buy_now_big.gif'\n		{{/isBuyNowButton}}\n		{{#buttonUrl}}\n			onclick=\"window.location.href='{{buttonUrl}}'\"\n		{{/buttonUrl}}\n		{{{buttonDataAttrs}}}\n	/>\n\n	<div style='clear:both'></div>\n\n</div>\n"}),_wAMD.define("tpl!elements/commerce-product-legacy-price.tpl",[],function(){return"\n{{#salePrice}}\n	<div class='product-price'>\n		<span style='text-decoration:line-through; margin-right:8px'>\n			{{{currencyPrefix}}}{{price}}{{{currencySuffix}}}\n		</span>\n		{{{currencyPrefix}}}{{salePrice}}{{{currencySuffix}}}\n	</div>\n{{/salePrice}}\n\n{{^salePrice}}\n	<div class='product-currency' style='float:left'>\n		{{{currencyPrefix}}}\n	</div>\n	<div class='product-price'>\n		{{price}}{{{currencySuffix}}}\n		&nbsp;&nbsp;&nbsp;\n	</div>\n{{/salePrice}}"}),_wAMD.define("tpl!platform/theme/core/shared/commerce/aspect-ratio-image.tpl",[],function(){return'<div class="{{class_prefix}}-image-container wsite-imageaspectratio-image-container">\n	<div class="{{class_prefix}}-image-height wsite-imageaspectratio-image-height">\n	</div>\n	<div class="{{class_prefix}}-image-wrap wsite-imageaspectratio-image-wrap">\n		<img class="{{class_prefix}}-image wsite-imageaspectratio-image" src="{{image_source}}" style="width:{{image_percent_width}}%;top:{{image_percent_top}}%;left:{{image_percent_left}}%">\n	</div>\n</div>\n'}),_wAMD.define("tpl!editor/dialogs/product-element/product-element-item.tpl",[],function(){return'{{#hasSku}}\n	<div class="product-thumb-holder">{{{thumb}}}</div>\n	<div class="product-sku-name" title="{{variation}}">\n		{{variation}}\n	</div>\n	<div class="product-actions">\n		<button class="connect-product-button btn-com">{{#tl}}templates.editor.dialogs.product-element.product-element-item_1{{/tl}}</button>\n	</div>\n{{/hasSku}}\n'}),_wAMD.define("commerce/editor/view/elements/ProductSelectListItem",["underscore","backbone-all","mustache","commerce/util/product-utils","tpl!editor/dialogs/product-element/product-element-item.tpl"],function(e,t,i,n,o){var r=t.Marionette.ItemView.extend({template:i.compile(o),tagName:"li",className:"product-sku-item",templateHelpers:function(){var t=this.options.product;return{hasSku:function(){return this.optionchoices.size()>0},variation:function(){var t,i=[];return e.each(this.optionchoices,function(e){t=n.filterOptionText(e.choice),i.push(t)}),i.join(", ")},thumb:function(){return t.thumbnail(null,this.image_order?this.image_order[0]:null)}}},events:{"click .connect-product-button":"selectProduct"},initialize:function(e){this.options=e},selectProduct:function(){this.trigger("select",this.model)}});return r}),_wAMD.define("tpl!editor/dialogs/product-element/product-element-item-view.tpl",[],function(){return'<div class="product-thumb-holder">{{{thumb}}}</div>\n<div class="product-name" title="{{productName}}">{{productName}}</div>\n	<div class="product-actions">\n		{{#hasSku}}\n			<button class="toggle-product-button btn-com"><span class="w-icon-increase"></span></button>\n		{{/hasSku}}\n		{{^hasSku}}\n			<button class="connect-single-product-button btn-com">{{#tl}}templates.editor.dialogs.product-element.product-element-item-view_1{{/tl}}</button>\n		{{/hasSku}}\n	</div>\n</div>\n\n<ul class="product-skus"></ul>\n'}),_wAMD.define("commerce/editor/view/elements/ProductSelectListItemView",["backbone-all","mustache","commerce/editor/view/elements/ProductSelectListItem","tpl!editor/dialogs/product-element/product-element-item-view.tpl"],function(e,t,i,n){var o=e.Marionette.CompositeView.extend({template:t.compile(n),itemView:i,itemViewContainer:".product-skus",tagName:"li",className:"product-item",ui:{skus:".product-skus",skuToggle:".toggle-product-button span"},events:{"click .toggle-product-button":"toggleProduct","click .connect-single-product-button":"selectProduct"},templateHelpers:function(){var e=this.model;return{thumb:function(){return e.thumbnail()},productName:function(){return this.name},hasSku:function(){return this.skus.length>1&&this.options2.length?!0:null}}},initialize:function(){this.model.get("skus").size()>1&&(this.collection=this.model.get("skus"))},itemViewOptions:function(){return{product:this.model}},toggleProduct:function(e){var t=this.ui.skus,i=t.is(":visible")?"w-icon-increase":"w-icon-decrease";this.ui.skuToggle.attr("class",i),t.toggle()},selectProduct:function(){this.trigger("select",this.model.get("skus").first())},onItemviewSelect:function(e,t){this.trigger("select",t)}});return o}),_wAMD.define("tpl!editor/dialogs/product-element/product-element-empty.tpl",[],function(){return'<div class="product-name">\n	{{#tl}}templates.editor.dialogs.product-element.product-element-empty_1{{/tl}}\n</div>\n'}),_wAMD.define("commerce/editor/view/elements/ProductSelectListEmptyView",["jquery","backbone-all","mustache","editor/app","tpl!editor/dialogs/product-element/product-element-empty.tpl"],function(e,t,i,n,o){var r=t.Marionette.ItemView.extend({template:i.compile(o),tagName:"li",className:"product-item-empty"});return r}),_wAMD.define("tpl!commerce/editor/store/components/loading.tpl",[],function(){return'<div class="store-loading">\n	<div class="store-loading-spinner">\n		<div class="store-loading-spinner__bg"></div>\n	</div>\n	<span class="store-loading__text">{{loadingText}}</span>\n</div>\n'}),_wAMD.define("components/views/LoadingView",["backbone-all","mustache","tpl!commerce/editor/store/components/loading.tpl"],function(e,t,i){var n=e.Marionette.ItemView.extend({template:i,templateHelpers:function(){var e=this.options.loadingText||_W.utl("javascript.components.views.EmptyLoadingView_1");return{loadingText:e}}});return n}),function(){var e=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1},t=[].slice;!function(e,t){return"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("waypoints",["jquery"],function(i){return t(i,e)}):t(e.jQuery,e)}(this,function(i,n){var o,r,s,a,l,c,d,u,h,p,f,m,g,v,b,y;return o=i(n),u=e.call(n,"ontouchstart")>=0,a={horizontal:{},vertical:{}},l=1,d={},c="waypoints-context-id",f="resize.waypoints",m="scroll.waypoints",g=1,v="waypoints-waypoint-ids",b="waypoint",y="waypoints",r=function(){function e(e){var t=this;this.$element=e,this.element=e[0],this.didResize=!1,this.didScroll=!1,this.id="context"+l++,this.oldScroll={x:e.scrollLeft(),y:e.scrollTop()},this.waypoints={horizontal:{},vertical:{}},e.data(c,this.id),d[this.id]=this,e.bind(m,function(){var e;return t.didScroll||u?void 0:(t.didScroll=!0,e=function(){return t.doScroll(),t.didScroll=!1},n.setTimeout(e,i[y].settings.scrollThrottle))}),e.bind(f,function(){var e;return t.didResize?void 0:(t.didResize=!0,e=function(){return i[y]("refresh"),t.didResize=!1},n.setTimeout(e,i[y].settings.resizeThrottle))})}return e.prototype.doScroll=function(){var e,t=this;return e={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!u||e.vertical.oldScroll&&e.vertical.newScroll||i[y]("refresh"),i.each(e,function(e,n){var o,r,s;return s=[],r=n.newScroll>n.oldScroll,o=r?n.forward:n.backward,i.each(t.waypoints[e],function(e,t){var i,o;return n.oldScroll<(i=t.offset)&&i<=n.newScroll?s.push(t):n.newScroll<(o=t.offset)&&o<=n.oldScroll?s.push(t):void 0}),s.sort(function(e,t){return e.offset-t.offset}),r||s.reverse(),i.each(s,function(e,t){return t.options.continuous||e===s.length-1?t.trigger([o]):void 0})}),this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.refresh=function(){var e,t,n,o=this;return n=i.isWindow(this.element),t=this.$element.offset(),this.doScroll(),e={horizontal:{contextOffset:n?0:t.left,contextScroll:n?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:n?0:t.top,contextScroll:n?0:this.oldScroll.y,contextDimension:n?i[y]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},i.each(e,function(e,t){return i.each(o.waypoints[e],function(e,n){var o,r,s,a,l;return o=n.options.offset,s=n.offset,r=i.isWindow(n.element)?0:n.$element.offset()[t.offsetProp],i.isFunction(o)?o=o.apply(n.element):"string"==typeof o&&(o=parseFloat(o),n.options.offset.indexOf("%")>-1&&(o=Math.ceil(t.contextDimension*o/100))),n.offset=r-t.contextOffset+t.contextScroll-o,n.options.onlyOnScroll&&null!=s||!n.enabled?void 0:null!==s&&s<(a=t.oldScroll)&&a<=n.offset?n.trigger([t.backward]):null!==s&&s>(l=t.oldScroll)&&l>=n.offset?n.trigger([t.forward]):null===s&&t.oldScroll>=n.offset?n.trigger([t.forward]):void 0})})},e.prototype.checkEmpty=function(){return i.isEmptyObject(this.waypoints.horizontal)&&i.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([f,m].join(" ")),delete d[this.id]):void 0},e}(),s=function(){function e(e,t,n){var o,r;n=i.extend({},i.fn[b].defaults,n),"bottom-in-view"===n.offset&&(n.offset=function(){var e;return e=i[y]("viewportHeight"),i.isWindow(t.element)||(e=t.$element.height()),e-i(this).outerHeight()}),this.$element=e,this.element=e[0],this.axis=n.horizontal?"horizontal":"vertical",this.callback=n.handler,this.context=t,this.enabled=n.enabled,this.id="waypoints"+g++,this.offset=null,this.options=n,t.waypoints[this.axis][this.id]=this,a[this.axis][this.id]=this,o=null!=(r=e.data(v))?r:[],o.push(this.id),e.data(v,o)}return e.prototype.trigger=function(e){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,e),this.options.triggerOnce?this.destroy():void 0):void 0},e.prototype.disable=function(){return this.enabled=!1},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},e.prototype.destroy=function(){return delete a[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},e.getWaypointsByElement=function(e){var t,n;return(n=i(e).data(v))?(t=i.extend({},a.horizontal,a.vertical),i.map(n,function(e){return t[e]})):[]},e}(),p={init:function(e,t){var n;return null==t&&(t={}),null==(n=t.handler)&&(t.handler=e),this.each(function(){var e,n,o,a;return e=i(this),o=null!=(a=t.context)?a:i.fn[b].defaults.context,i.isWindow(o)||(o=e.closest(o)),o=i(o),n=d[o.data(c)],n||(n=new r(o)),new s(e,n,t)}),i[y]("refresh"),this},disable:function(){return p._invoke(this,"disable")},enable:function(){return p._invoke(this,"enable")},destroy:function(){return p._invoke(this,"destroy")},prev:function(e,t){return p._traverse.call(this,e,t,function(e,t,i){return t>0?e.push(i[t-1]):void 0})},next:function(e,t){return p._traverse.call(this,e,t,function(e,t,i){return t<i.length-1?e.push(i[t+1]):void 0})},_traverse:function(e,t,o){var r,s;return null==e&&(e="vertical"),null==t&&(t=n),s=h.aggregate(t),r=[],this.each(function(){var t;return t=i.inArray(this,s[e]),o(r,t,s[e])}),this.pushStack(r)},_invoke:function(e,t){return e.each(function(){var e;return e=s.getWaypointsByElement(this),i.each(e,function(e,i){return i[t](),!0})}),this}},i.fn[b]=function(){var e,n;return n=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],p[n]?p[n].apply(this,e):i.isFunction(n)?p.init.apply(this,arguments):i.isPlainObject(n)?p.init.apply(this,[null,n]):n?i.error("The "+n+" method does not exist in jQuery Waypoints."):i.error("jQuery Waypoints needs a callback function or handler option.")},i.fn[b].defaults={context:n,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},h={refresh:function(){return i.each(d,function(e,t){return t.refresh()})},viewportHeight:function(){var e;return null!=(e=n.innerHeight)?e:o.height()},aggregate:function(e){var t,n,o;return t=a,e&&(t=null!=(o=d[i(e).data(c)])?o.waypoints:void 0),t?(n={horizontal:[],vertical:[]},i.each(n,function(e,o){return i.each(t[e],function(e,t){return o.push(t)}),o.sort(function(e,t){return e.offset-t.offset}),n[e]=i.map(o,function(e){return e.element}),n[e]=i.unique(n[e])}),n):[]},above:function(e){return null==e&&(e=n),h._filter(e,"vertical",function(e,t){return t.offset<=e.oldScroll.y})},below:function(e){return null==e&&(e=n),h._filter(e,"vertical",function(e,t){return t.offset>e.oldScroll.y})},left:function(e){return null==e&&(e=n),h._filter(e,"horizontal",function(e,t){return t.offset<=e.oldScroll.x})},right:function(e){return null==e&&(e=n),h._filter(e,"horizontal",function(e,t){return t.offset>e.oldScroll.x})},enable:function(){return h._invoke("enable")},disable:function(){return h._invoke("disable")},destroy:function(){return h._invoke("destroy")},extendFn:function(e,t){return p[e]=t},_invoke:function(e){var t;return t=i.extend({},a.vertical,a.horizontal),i.each(t,function(t,i){return i[e](),!0})},_filter:function(e,t,n){var o,r;return(o=d[i(e).data(c)])?(r=[],i.each(o.waypoints[t],function(e,t){return n(o,t)?r.push(t):void 0}),r.sort(function(e,t){return e.offset-t.offset}),i.map(r,function(e){return e.element})):[]}},i[y]=function(){var e,i;return i=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],h[i]?h[i].apply(null,e):h.aggregate.call(null,i)},i[y].settings={resizeThrottle:100,scrollThrottle:30},o.load(function(){return i[y]("refresh")})})}.call(this),_wAMD.define("commerce/editor/view/elements/ProductSelectListView",["jquery","backbone-all","mustache","editor/app","commerce/editor/collection/Product","./ProductSelectListItemView","./ProductSelectListEmptyView","components/views/LoadingView","waypoints"],function(e,t,i,n,o,r,s,a){var l=t.Marionette.CollectionView,c=l.prototype,d=l.extend({tagName:"ul",itemView:r,emptyView:t.View,initialize:function(e){var t=this;t.currentProduct=e.currentProduct,t.pagedCollection=new o([],{mode:"infinite",state:{pageSize:10},searchText:e.searchText,view:"detail"}),t.collection=t.pagedCollection.fullCollection,t.fetchPromise=t.pagedCollection.fetch({allowGiftCards:!0}).done(function(){t.emptyView=s,!t.isClosed&&t.collection.isEmpty()&&t.render()})},_initialEvents:function(){var t=this;c._initialEvents.apply(t,arguments),t.listenTo(t.collection,"add remove reset",function(){e.waypoints("refresh")})},onShow:function(){var t=this,i=t.pagedCollection,n=t.parent=t.$el.parent(),o=new a({el:e("<div>").insertAfter(t.$el).addClass("loading")}).render(),r=function(){i.hasNext()||o.close()};t.fetchPromise.done(r),t.$el.waypoint({context:n,offset:"bottom-in-view",handler:function(e){"down"==e&&i.hasNext()&&i.getNextPage().done(r)}})},onClose:function(){this.parent.weeblyScroll("destroy")},onItemviewSelect:function(e,t){this.trigger("select",t)}});return d}),_wAMD.define("tpl!editor/dialogs/product-element/product-element-layout.tpl",[],function(){return'<div class="product-element-chooser-header">\n	<input class="product-element-chooser-search" type="text" name="search" placeholder="{{#esc_attr}}{{#tl}}templates.editor.dialogs.product-element.product-element-layout_1{{/tl}}{{/esc_attr}}" />\n	<button class="product-element-add-product btn-com">{{#tl}}templates.editor.dialogs.product-element.product-element-layout_2{{/tl}}</button>\n</div>\n<div class="product-element-chooser w-massless-scroll">\n	<div class="scroll-outer">\n		<div class="scroll-inner">\n			<div class="list-region products-holder">{{! listRegion }}</div>\n		</div>\n	</div>\n</div>\n'}),_wAMD.define("commerce/editor/view/elements/ProductSelectListLayoutView",["backbone-all","mustache","editor/app","./ProductSelectListView","tpl!editor/dialogs/product-element/product-element-layout.tpl"],function(e,t,i,n,o){var r=e.Marionette.Layout.extend({template:t.compile(o),ui:{search:"input[name=search]",addNewBtn:".product-element-add-product",scrollInner:".scroll-inner"},regions:{listRegion:".list-region"},events:{"keyup input[name=search]":"search","click @ui.addNewBtn":"addNewProduct","click .btn-cancel":"dialogCancel"},dialog:{title:_W.utl("javascript.commerce.editor.view.elements.ProductSelectListLayoutView_1"),buttons:[{group:"pull-right",buttons:[{text:_W.utl("javascript.commerce.editor.view.elements.ProductSelectListLayoutView_2"),className:"btn-com btn-cancel"}]}],dialogClass:"product-element-chose-product-dialog"},initialize:function(e){this.deferred=e},onRender:function(){this.renderList(),this.ui.scrollInner.weeblyScroll(),Weebly.Permissions.store_settings||this.ui.addNewBtn.remove()},onClose:function(){this.ui.scrollInner.weeblyScroll("destroy")},renderList:function(){var e=this,t=new n({searchText:e.searchText});e.listRegion.show(t),e.listenTo(t,"select",function(t){e.trigger("dialog:close"),e.deferred.resolve({site_product_id:t.get("site_product_id"),site_product_sku_id:t.get("site_product_sku_id")})})},dialogCancel:function(){this.deferred.reject(),this.trigger("dialog:close")},search:function(e){var t=this,i=e.which||e.keyCode,n=13==i?0:250;clearTimeout(t.searchTimeout),t.searchTimeout=setTimeout(function(){t.searchText=t.ui.search.val(),t.renderList()},n)},addNewProduct:function(){var e=this;e.trigger("dialog:close"),i.vent.triggerCascade("store:product:addOrList",{onSave:function(t){var i=t.get("skus");1==i.size()&&e.deferred.resolve({site_product_id:i.first().get("site_product_id"),site_product_sku_id:i.first().get("site_product_sku_id")})},closeStoreTab:!0})}});return r}),_wAMD.define("editor-site-shared/build/elements/CommerceProduct",["jquery","underscore","mustache","tpl!elements/commerce-product.tpl","tpl!elements/commerce-product-price.tpl","tpl!elements/commerce-product-legacy-grid.tpl","tpl!elements/commerce-product-legacy-large.tpl","tpl!elements/commerce-product-legacy-long.tpl","tpl!elements/commerce-product-legacy-small.tpl","tpl!elements/commerce-product-legacy-price.tpl","tpl!platform/theme/core/shared/commerce/aspect-ratio-image.tpl","editor-site-shared/build/elements/Element","editor/app","config","editor-site-shared/relay","commerce/editor/model/Product","commerce/editor/view/elements/ProductSelectListLayoutView","commerce/util/product-utils","editor-site-shared/build/elements/utils","site/editor/ui/weebly_editbox","site/editor/ui/images/resizing","site/editor/commerce/module"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p,f,m,g,v,b,y,w,_){var E={view:_W.stl("javascript.cart.viewDetails"),buy:_W.stl("javascript.cart.buyNow"),cart:_W.stl("javascript.cart.addToCart"),notAvailable:_W.stl("templates.platform.theme.core.shared.commerce.add-to-cart_3")},T={tpl_commerce_product_legacy_grid:r,tpl_commerce_product_legacy_large:s,tpl_commerce_product_legacy_long:a,tpl_commerce_product_legacy_small:l},C=window.Class.create(u,{"<!PRODUCT!>":function(){return""},afterRender:function($super,e,t){$super(e,t);var i=this,n=this.getContentField(),o=n.getProperty("<!PRODUCTID!>").property_result||!1,r=n.getProperty("<!PRODUCTSKUID!>").property_result||!1;(!p.chromeless||o&&r)&&(p.chromeless||o&&r?this.renderProduct(o,r):f.request("commerce:productSelectView:show").done(function(e){i.saveProductAssociation(e.site_product_id,e.site_product_sku_id),i.renderProduct(e.site_product_id,e.site_product_sku_id)}).fail(function(){b.deleteWeeblyElement(i.li,!0)}))},renderProduct:function(e,i){function n(n,l){var c=_.storefrontSettings,d="buynow"==c.get("store_mode"),u=c.getRatioAsPercent("product_image_ratio");if(s=c.get("element_legacy_mode"),n.marginTop=a.getProperty("<!MARGINTOP!>").property_result,n.marginBottom=a.getProperty("<!MARGINBOTTOM!>").property_result,n.showPrice="1"==a.getProperty("<!SHOWPRICE!>").property_result,n.showImage="1"==a.getProperty("<!SHOWIMAGE!>").property_result,n.showDescription="1"==a.getProperty("<!SHOWDESCRIPTION!>").property_result,n.productId=e,n.productSkuId=i,n.inEditor=!0,n.staticDomain=window.editorStatic,n.imageWidth=a.getProperty("<!IMAGEWIDTH!>").property_result,n.imageLinkAttrs="href='#' onclick='return false'",l){n.imageHtml=o.thumbnail(320,f),n.imageUrl=o.getImageUrl(320,f),n.title=o.get("name"),n.descriptionHtml=o.get("short_description"),n.currencyPrefix=c.get("currency_prefix"),n.currencySuffix=c.get("currency_suffix");var h=o.get("skus").filter(function(e){return e.get("site_product_sku_id")==i}).first(),f=h.get("image_order")?h.get("image_order")[0]:void 0;n.price="number"==typeof h.get("price")&&h.get("price").toFixed(2),n.salePrice="number"==typeof h.get("sale_price")&&h.get("sale_price").toFixed(2);var m=o.isGiftCardProduct()&&!o.get("published");n.disabled=m;var g=a.getProperty("<!BUTTONTYPE!>").property_result;"view"!=g?m?(g="notAvailable",n.isNotAvailableButton=!0):d?(g="buy",n.isBuyNowButton=!0):(g="cart",n.isAddToCartButton=!0):n.isViewButton=!0,n.buttonType=g,n.buttonText=E[g],n.buttonUrl="javascript:;"}if(n.buttonClass=["wsite-button","wsite-product-button","wsite-button-"+a.getProperty("<!BUTTONSIZE!>").property_result,"view"==g?"wsite-button-normal":"wsite-button-highlight"].join(" "),s){var b=a.getProperty("<!LEGACYALIGN!>").property_result;"right"==b?n.alignCss="margin-left: auto !important":"center"==b&&(n.alignCss="margin-left: auto !important; margin-right: auto !important"),l&&"view"!==g&&h.get("optionchoices").each(function(e){"text"===e.get("option_type")&&(n.isViewButton=!0,n.isAddToCartButton=!1,n.isBuyNowButton=!1)})}else if(l&&"view"!=g&&h.get("optionchoices").size()){var y=h.get("optionchoices");n.hasVariants=!0,n.variantOptions=[],y.each(function(e){var t={name:e.get("name"),choice:v.filterOptionText(e.get("choice"))};"text"==e.get("option_type")&&(t.text=!0,t.safe_option_name=t.name.replace(/[\W]/g,"_")),n.variantOptions.push(t)})}if(p.chromeless){var w=n.product_sku_id?n.product_sku_id:n.productSkuId,T={};t.each(n.product_skus,function(e){return e.product_sku_id===w?(T=e,!1):void 0});var C=_.storefrontSettings.getRatioAsNumber("product_image_ratio");n.imageHtml=r.getProductImageHtml(n,T,C,u),"undefined"==typeof n.variantOptions&&("undefined"==typeof n.variant_options?n.variantOptions=null:n.variantOptions=n.variant_options),null!==n.variantOptions&&(n.hasVariants=!0)}n.name&&(n.title=n.name),n.short_description&&(n.descriptionHtml=n.short_description)}var o,r=this;o=p.chromeless?m.find({site_product_id:e}):m.findOrCreate({site_product_id:e});var s,a=this.getContentField();if(p.chromeless){var l=this.product_data;n(l),this.renderProductHTML(l,s),p.chromeless||delete this.product_data}else o.fetch().done(function(e){if(e.success){var i=t.isEmpty(r.product_data)?{}:r.product_data;n(i,!0),r.renderProductHTML(i,s)}})},renderProductHTML:function(t,r){var s,a,l=this.getContentField(),d=e(this.li).find(".element");if(r){var u=l.getProperty("<!LEGACYDISPLAY!>").property_result;s=i.compile(T["tpl_commerce_product_legacy_"+u]),a=i.compile(c)}else s=i.compile(n),a=i.compile(o);t.priceHtml=a({currencyPrefix:t.currencyPrefix,currencySuffix:t.currencySuffix,price:t.price,salePrice:t.salePrice}),d.html(s(t)),!r&&Weebly.Permissions.store_edit&&(y.makeElementContentEditable(d.find(".wsite-product-title").get(0),{richTextControls:!1,saveCallback:function(){v.saveProductChanges("title",t.productId,d.find(".wsite-product-title"),{entryPoint:"commerceProductTitleEdit"})}}),"1"==l.getProperty("<!SHOWDESCRIPTION!>").property_result&&y.makeElementContentEditable(d.find(".wsite-product-description").get(0),{saveCallback:function(){v.saveProductChanges("description",t.productId,d.find(".wsite-product-description"),{entryPoint:"commerceProductDescriptionEdit"})}})),this.initImageResizing()},initImageResizing:function(){var t=this,i=e(t.li).find(".wsite-product-image, .product-image"),n=i.parent(),o=i.is(".product-image");o&&n.parent().is(".product-block-inner")||(o&&n.css({position:"relative","float":"left"}),n.resizable({aspectRatio:!0,handles:"se",minWidth:50,start:function(){w.resizing=!0},resize:function(e,t){o&&i.css("width",Math.round(t.size.width)-(o?10:0))},stop:function(){w.resizing=!1,n.css("height","");var e=n.width()-(o?10:0)+"px",i=t.getContentField();i.getProperty("<!IMAGEWIDTH!>").property_result=e,i.saveProperties()}}))},saveProductAssociation:function(e,t){var i=this.getContentField();i.getProperty("<!PRODUCTID!>").property_result=e,i.getProperty("<!PRODUCTSKUID!>").property_result=t,i.saveProperties()},calculateProductImageAspectRatio:function(e,t){var i=Math.round(100*e.width/e.height)/100,n={};return void 0===e.width?(n.width=100,n.top=0,n.left=0):i>t?(n.width=(i/t*100).toFixed(2),n.top=0,n.left=(50*(1-i/t)).toFixed(2)):(n.width=100,n.top=(50*(1-t/i)).toFixed(2),n.left=0),n},getProductImageHtml:function(e,n,o,r){var s=i.compile(d),a="",l="";e.product_images&&0!==e.product_images.length?e.product_images.length>1&&e.product_skus.length>1?(l=t.isArray(n.product_sku_image_id)?n.product_sku_image_id[0]:n.product_sku_image_id,a=this.getProductSkuImage(l,e.product_images)):a=e.product_images[0]:a={width:320,height:320,path:"blank-product-w320.png"};var c=this.calculateProductImageAspectRatio(a,o),u=s({class_prefix:"wsite-product-image",image_source:a.path,image_percent_width:c.width,image_percent_left:c.left,image_percent_top:c.top});return u=u.split('wsite-imageaspectratio-image-height"'),u=u[0]+'wsite-imageaspectratio-image-height" style="margin-bottom:'+r+'% !important;"'+u[1]},getProductSkuImage:function(e,i){var n=i[0];return t.each(i,function(t){return t.product_image_id===e?(n=t,!1):void 0}),n}});return C.afterRender=function(){h.vent.trigger("store:setting:applySettingStyles")},f.reqres.setHandlers({"commerce:productSelectView:show":function(){var t=e.Deferred();return h.showDialog(new g(t)),t.promise()}}),Weebly.CommerceProduct=C,u.register("5699726",C),C}),_wAMD.define("tpl!elements/customhtml/customhtml.tpl",[],function(){return'<html>\n	<head>\n		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n		\n		<link rel=\'stylesheet\' href=\'{{{ sites_css_url }}}\' type=\'text/css\' />\n\n		<style rel=\'stylesheet\' type=\'text/css\' title="wsite-theme-css" >{{{ theme_css }}}</style>\n\n		<script type=\'text/javascript\' src=\'{{{ jquery_url }}}\'></script>\n	</head>\n	<body style=\'margin: 0; padding: 0; background: transparent; min-height:10px; _height:10px\' onclick="parent.clickHandler(event, \'{{ ucfid }}\');">\n		<div id="icontent_container" class="icontent_container">\n			<div id="icontent" class="icontent">\n				<div id="secondlist">\n					<div class="paragraph" id="customhtml-content" style="text-align:{{ align }};">\n						{{{ content }}}\n					</div>\n				</div>\n			</div>\n		</div>\n	</body>\n</html>\n'}),_wAMD.define("tpl!elements/customhtml/iframe-wrapper.tpl",[],function(){return'<div class="customhtml-wrapper">\n	<div class="customhtml-blocker">\n	</div>\n</div>'}),_wAMD.define("editor-site-shared/build/elements/CustomHTMLElement",["jquery","underscore","mustache","editor-site-shared/build/elements/Element","editor-site-shared/build/elements/LegacyElement","tpl!elements/customhtml/customhtml.tpl","tpl!elements/customhtml/iframe-wrapper.tpl","site/editor/app"],function(e,t,i,n,o,r,s,a){
function l(e){var i=e.data;t.defer(t.bind(i.afterRender,i,this))}var c=window.Class.create(o,{resizeFrameInterval:null,written:!1,85662917:function(t,i){var n=this.getContentField(),o=n.ucfid,r=e("#custom-frame-"+o,this.li),s=r[0].contentWindow||r[0];s.updateAlign(t)},appendIframeCover:function(t){var n=i.render(s),o=e(n),r=t.parent();this.$frameBlocker=o.find(".customhtml-blocker"),t.detach(),this.$frameBlocker.after(t),r.append(o),this.setFrameBlockerEvents()},afterRender:function($super,n,o){$super(n,o);var s=e(n);if(s.off("dragstop:drop",l).on("dragstop:drop",this,l),!o){var c=this.getContentField(),d=c.getProperty("<!HTML!>").property_result;d=d.replace(/<script[^>]*www.clickbook.net[^>]*cb_mode1\.js[^>]*>\s*<\/script>/i,"");var u=s.find("iframe");this.appendIframeCover(u);var h=u[0].contentWindow||u[0],p=u[0].contentDocument||h.document,f=e("#wsite-theme-"+window.currentTheme+"-file").html(),m=e("#designOptionsStyle");m.length&&(f+=m.html());var g=f.split("@media");if(g.length>1){f=g[0];for(var v=1;v<g.length;v++){var b=g[v].split(/\n\s*\}\s*\n/,2);2===b.length&&(f+=b[1])}}var y=e('script[src*="jquery"]').eq(0).attr("src"),w=e("#wsite-base-style").eq(0).attr("href");h.ucfid=c.ucfid;var _=null,E=function(){if(jQuery){var e=jQuery("#secondlist",p).outerHeight();e>0&&_!==e&&this.parent.resizeCustomHtml&&(_=e,this.parent.resizeCustomHtml(c.ucfid,_),a.vent.trigger("forceDocumentSizeChange"))}},T=function(e){var t=i.render(r,{theme:window.currentTheme,align:c.getProperty("<!ALIGN!>").property_result,content:e,jquery_url:y,sites_css_url:w,theme_css:f,ucfid:c.ucfid});if(this.written){var n=new DOMParser,o=n.parseFromString(t,"text/html");p.childNodes[0].replaceChild(o.body,p.body)}else p.open(),p.write(t),p.close(),h.setContent||(h.resizeFrame=E,h.setContent=T,h.updateAlign=C),this.written=!0}.bind(this),C=function(e){this.jQuery&&e&&this.jQuery("#customhtml-content").css({"text-align":e})};h.resizeFrame=E,h.setContent=T,h.updateAlign=C,this.resizeFrameInterval&&clearInterval(this.resizeFrameInterval),this.resizeFrameInterval=setInterval(t.bind(h.resizeFrame,h),500),h.setContent(d)}},unrender:function($super){$super(),this.resizeFrameInterval&&clearInterval(this.resizeFrameInterval),this.unsetFrameBlockerEvents()},setFrameBlockerEvents:function(){this.$frameBlocker.on("click",function(){this.style.visibility="hidden",a.vent.on({"element:options:dialog:close":function(){this.style.visibility="visible"}.bind(this)})})},unsetFrameBlockerEvents:function(){this.$frameBlocker&&(this.$frameBlocker.off("click"),this.$frameBlocker=null,a.vent.off("element:options:dialog:close",null,this))}});return window.resizeCustomHtml=function(t,i){var n=e("#custom-frame-"+t);n.css({height:i+"px"})},n.register("92495494",c),c}),_wAMD.define("editor-site-shared/build/elements/ReadMoreElement",["editor-site-shared/build/elements/Element","editor-site-shared/build/elements/LegacyElement","editor-site-shared/ui/utils","editor-site-shared/ui/constants"],function(e,t,i,n){var o=window.Class.create(t,{onDrag:function($super,e,t,o){return o=$super(e,t,o),o&&(o.position===n.POSITION_LEFT||o.position===n.POSITION_RIGHT||i.isChildOfMultiColumn(o.el))?null:o}});return e.register("16151740",o),o}),_wAMD.define("editor-site-shared/build/elements/ImageTextElement",["jquery","editor-site-shared/ui/constants","editor-site-shared/build/elements/Element","editor-site-shared/build/elements/LegacyElement"],function(e,t,i,n){function o(){e(this).closest(".element").addClass("inside-delete-hover")}function r(){e(this).closest(".element").removeClass("inside-delete-hover")}var s=window.Class.create(n,{afterRender:function($super,t,i){$super(t,i);var n=e(t);if(i){var s=n.find("img");s.data("ui-resizable")&&(s=s.closest(".ui-wrapper")),n.find(".element").eq(0).css("width",s.outerWidth(!0)+"px")}e("<div>",{"class":"w-delete-outer",html:'<div class="w-delete" title="'+window._W.utl("javascript.editor-site-shared.build.elements.ImageTextElement_2")+'"></div>',on:{mouseover:o,mouseout:r},appendTo:n.find(".imgPusher").closest(".element")})},"<!SRC!>":function(){var e;try{e=JSON.parse(this.getPropertyResult("<!DATA!>"))}catch(t){}return e&&e.image?e.image.editorUrl:this.getPropertyResult("<!SRC!>")}});return i.register(t.CURRENT_PARAGRAPH_IMAGE_ELEMENT,s),s}),_wAMD.define("editor-site-shared/build/elements/PlatformElement",["jquery","underscore","editor-site-shared/build/elements/Element","editor-site-shared/ui/utils","editor-site-shared/ui/constants"],function(e,t,i,n,o){var r=window.Class.create(i,{initialize:function($super,e,i){$super(e,i);var n=this;n.context=i,n.children&&t.each(n.children,function(e){n.context.loadElement(e)})},afterRender:function($super,i,n){$super(i,n);var r=this,s=e(i);s.find(".platform-element-child-placeholder").each(function(i,s){var a=e(s),l=a.data("field-name"),c=a.data("field-type"),d=a.data("default"),u=a.data("width"),h=l+":"+c,p=r.children[h];if(p||t.each(r.children,function(e){e.platform_setting_name==h&&(p=e)}),p){var f=r.context.elementsByID[p.id];f.beforeRender(n);var m=f.renderHTML();f.li=e(m)[0],e(f.li).addClass("platform-element-child"),e(f.li).attr("data-field-name",l),e(f.li).attr("data-field-type",c),e(f.li).attr("data-default-text",d),e(f.li).attr("data-page-element-order",p.page_element_order),a.replaceWith(f.li),f.afterRender(f.li,n),"44785763"==p.eid&&d&&t.each(f.content_fields,function(t){"93182214"==t.cfid&&(""==t.contentFieldContent||t.contentFieldContent.match(_W.utl("javascript.editor-site-shared.build.elements.PlatformElement_2")))&&e(f.li).find(".editable-text").text(d)}),p.eid==o.CONTENT_AREA_ELEMENT_ID&&u&&e(f.li).css("width",u)}});var a=0===s.find(".platform-element-overlay").length;window.inEditor&&window.inEditor()&&a&&s.find(".platform-element-contents").prepend("<div class='platform-element-overlay'> </div>")},onDrag:function($super,e,t,i){return i=$super(e,t,i),i&&i.el&&this.elData&&n.isChildOf(i.el,this.elData.id)?null:i}});return window.PlatformElement=r,i.register("75699656",r),r}),_wAMD.define("editor-site-shared/build/elements/ContentAreaElement",["jquery","underscore","editor/app","editor-site-shared/build/elements/Element","config","editor-site-shared/ui/constants"],function($,_,editorApp,Element,Config,UICONST){var ContentAreaElement=window.Class.create(Element,{initialize:function($super,e,t){$super(e,t);var i=this;i.context=t,i.children&&(i.children=t.loadElements(i.children))},afterRender:function($super,li,isRerender){$super(li,isRerender);var element=this,elementLi=$(li);elementLi.addClass("content-area-element"),elementLi.attr("data-ucfid",Object.keys(element.content_fields)[0]),elementLi.attr("data-peid",element.id),element.children&&0==element.children.length?Config.chromeless||elementLi.append('<div class="empty-content-area-element">'+_W.utl("javascript.editor-site-shared.build.elements.ContentAreaElement_2")+'<ul class="content-area-list"></ul></div>'):(elementLi.append('<ul class="content-area-list"></ul>'),_.each(element.children,function(childData,index){var childElement=element.context.elementsByID[childData.id];childElement.beforeRender(isRerender);var childHtml=childElement.renderHTML();childElement.li=$(childHtml)[0];var scriptsToEval=[];$(childHtml).length>0&&_.each($(childHtml),function(e){$(e).is("script")&&scriptsToEval.push(e)}),$(childElement.li).attr("data-page-element-order",childData.page_element_order),elementLi.find(".content-area-list").first().append(childElement.li),childElement.afterRender(childElement.li,isRerender),_.each(scriptsToEval,function(oneScript){eval($(oneScript).html())})}))}});return Element.register(UICONST.CONTENT_AREA_ELEMENT_ID,ContentAreaElement),ContentAreaElement}),function(e,t){"function"==typeof define&&define.amd?_wAMD.define("jquery-bridget/jquery-bridget",["jquery"],function(i){t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("jquery")):e.jQueryBridget=t(e,e.jQuery)}(window,function(e,t){function i(i,r,a){function l(e,t,n){var o,r="$()."+i+'("'+t+'")';return e.each(function(e,l){var c=a.data(l,i);if(!c)return void s(i+" not initialized. Cannot call methods, i.e. "+r);var d=c[t];if(!d||"_"==t.charAt(0))return void s(r+" is not a valid method");var u=d.apply(c,n);o=void 0===o?u:o}),void 0!==o?o:e}function c(e,t){e.each(function(e,n){var o=a.data(n,i);o?(o.option(t),o._init()):(o=new r(n,t),a.data(n,i,o))})}a=a||t||e.jQuery,a&&(r.prototype.option||(r.prototype.option=function(e){a.isPlainObject(e)&&(this.options=a.extend(!0,this.options,e))}),a.fn[i]=function(e){if("string"==typeof e){var t=o.call(arguments,1);return l(this,e,t)}return c(this,e),this},n(a))}function n(e){!e||e&&e.bridget||(e.bridget=i)}var o=Array.prototype.slice,r=e.console,s="undefined"==typeof r?function(){}:function(e){r.error(e)};return n(t||e.jQuery),i}),function(e,t){"function"==typeof define&&define.amd?_wAMD.define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}(this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return-1!=n&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=0,o=i[n];t=t||[];for(var r=this._onceEvents&&this._onceEvents[e];o;){var s=r&&r[o];s&&(this.off(e,o),delete r[o]),o.apply(this,t),n+=s?0:1,o=i[n]}return this}},e}),function(e,t){"function"==typeof define&&define.amd?_wAMD.define("get-size/get-size",[],function(){return t()}):"object"==typeof module&&module.exports?module.exports=t():e.getSize=t()}(window,function(){function e(e){var t=parseFloat(e),i=-1==e.indexOf("%")&&!isNaN(t);return i&&t}function t(){}function i(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;c>t;t++){var i=l[t];e[i]=0}return e}function n(e){var t=getComputedStyle(e);return t||a("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),t}function o(){if(!d){d=!0;var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(t);var o=n(t);r.isBoxSizeOuter=s=200==e(o.width),i.removeChild(t)}}function r(t){if(o(),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var r=n(t);if("none"==r.display)return i();var a={};a.width=t.offsetWidth,a.height=t.offsetHeight;for(var d=a.isBorderBox="border-box"==r.boxSizing,u=0;c>u;u++){var h=l[u],p=r[h],f=parseFloat(p);a[h]=isNaN(f)?0:f}var m=a.paddingLeft+a.paddingRight,g=a.paddingTop+a.paddingBottom,v=a.marginLeft+a.marginRight,b=a.marginTop+a.marginBottom,y=a.borderLeftWidth+a.borderRightWidth,w=a.borderTopWidth+a.borderBottomWidth,_=d&&s,E=e(r.width);E!==!1&&(a.width=E+(_?0:m+y));var T=e(r.height);return T!==!1&&(a.height=T+(_?0:g+w)),a.innerWidth=a.width-(m+y),a.innerHeight=a.height-(g+w),a.outerWidth=a.width+v,a.outerHeight=a.height+b,a}}var s,a="undefined"==typeof console?t:function(e){console.error(e)},l=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],c=l.length,d=!1;return r}),function(e,t){"function"==typeof define&&define.amd?_wAMD.define("desandro-matches-selector/matches-selector",t):"object"==typeof module&&module.exports?module.exports=t():e.matchesSelector=t()}(window,function(){var e=function(){var e=Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],i=0;i<t.length;i++){var n=t[i],o=n+"MatchesSelector";if(e[o])return o}}();return function(t,i){return t[e](i)}}),function(e,t){"function"==typeof define&&define.amd?_wAMD.define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("desandro-matches-selector")):e.fizzyUIUtils=t(e,e.matchesSelector)}(window,function(e,t){var i={};i.extend=function(e,t){for(var i in t)e[i]=t[i];return e},i.modulo=function(e,t){return(e%t+t)%t},i.makeArray=function(e){var t=[];if(Array.isArray(e))t=e;else if(e&&"number"==typeof e.length)for(var i=0;i<e.length;i++)t.push(e[i]);else t.push(e);return t},i.removeFrom=function(e,t){var i=e.indexOf(t);-1!=i&&e.splice(i,1)},i.getParent=function(e,i){for(;e!=document.body;)if(e=e.parentNode,t(e,i))return e},i.getQueryElement=function(e){return"string"==typeof e?document.querySelector(e):e},i.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.filterFindElements=function(e,n){e=i.makeArray(e);var o=[];return e.forEach(function(e){if(e instanceof HTMLElement){if(!n)return void o.push(e);t(e,n)&&o.push(e);for(var i=e.querySelectorAll(n),r=0;r<i.length;r++)o.push(i[r])}}),o},i.debounceMethod=function(e,t,i){var n=e.prototype[t],o=t+"Timeout";e.prototype[t]=function(){var e=this[o];e&&clearTimeout(e);var t=arguments,r=this;this[o]=setTimeout(function(){n.apply(r,t),delete r[o]},i||100)}},i.docReady=function(e){"complete"==document.readyState?e():document.addEventListener("DOMContentLoaded",e)},i.toDashed=function(e){return e.replace(/(.)([A-Z])/g,function(e,t,i){return t+"-"+i}).toLowerCase()};var n=e.console;return i.htmlInit=function(t,o){i.docReady(function(){var r=i.toDashed(o),s="data-"+r,a=document.querySelectorAll("["+s+"]"),l=document.querySelectorAll(".js-"+r),c=i.makeArray(a).concat(i.makeArray(l)),d=s+"-options",u=e.jQuery;c.forEach(function(e){var i,r=e.getAttribute(s)||e.getAttribute(d);try{i=r&&JSON.parse(r)}catch(a){return void(n&&n.error("Error parsing "+s+" on "+e.className+": "+a))}var l=new t(e,i);u&&u.data(e,o,l)})})},i}),function(e,t){"function"==typeof define&&define.amd?_wAMD.define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],t):"object"==typeof module&&module.exports?module.exports=t(require("ev-emitter"),require("get-size")):(e.Outlayer={},e.Outlayer.Item=t(e.EvEmitter,e.getSize))}(window,function(e,t){function i(e){for(var t in e)return!1;return t=null,!0}function n(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}function o(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}var r=document.documentElement.style,s="string"==typeof r.transition?"transition":"WebkitTransition",a="string"==typeof r.transform?"transform":"WebkitTransform",l={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[s],c={transform:a,transition:s,transitionDuration:s+"Duration",transitionProperty:s+"Property",transitionDelay:s+"Delay"},d=n.prototype=Object.create(e.prototype);d.constructor=n,d._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},d.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},d.getSize=function(){this.size=t(this.element)},d.css=function(e){var t=this.element.style;for(var i in e){var n=c[i]||i;t[n]=e[i]}},d.getPosition=function(){var e=getComputedStyle(this.element),t=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=e[t?"left":"right"],o=e[i?"top":"bottom"],r=this.layout.size,s=-1!=n.indexOf("%")?parseFloat(n)/100*r.width:parseInt(n,10),a=-1!=o.indexOf("%")?parseFloat(o)/100*r.height:parseInt(o,10);s=isNaN(s)?0:s,a=isNaN(a)?0:a,s-=t?r.paddingLeft:r.paddingRight,a-=i?r.paddingTop:r.paddingBottom,this.position.x=s,this.position.y=a},d.layoutPosition=function(){var e=this.layout.size,t={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),o=i?"paddingLeft":"paddingRight",r=i?"left":"right",s=i?"right":"left",a=this.position.x+e[o];t[r]=this.getXValue(a),t[s]="";var l=n?"paddingTop":"paddingBottom",c=n?"top":"bottom",d=n?"bottom":"top",u=this.position.y+e[l];t[c]=this.getYValue(u),t[d]="",this.css(t),this.emitEvent("layout",[this])},d.getXValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!t?e/this.layout.size.width*100+"%":e+"px"},d.getYValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&t?e/this.layout.size.height*100+"%":e+"px"},d._transitionTo=function(e,t){this.getPosition();var i=this.position.x,n=this.position.y,o=parseInt(e,10),r=parseInt(t,10),s=o===this.position.x&&r===this.position.y;if(this.setPosition(e,t),s&&!this.isTransitioning)return void this.layoutPosition();var a=e-i,l=t-n,c={};c.transform=this.getTranslate(a,l),this.transition({to:c,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},d.getTranslate=function(e,t){var i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop");return e=i?e:-e,t=n?t:-t,"translate3d("+e+"px, "+t+"px, 0)"},d.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},d.moveTo=d._transitionTo,d.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},d._nonTransition=function(e){this.css(e.to),e.isCleaning&&this._removeStyles(e.to);for(var t in e.onTransitionEnd)e.onTransitionEnd[t].call(this)},d.transition=function(e){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(e);var t=this._transn;for(var i in e.onTransitionEnd)t.onEnd[i]=e.onTransitionEnd[i];for(i in e.to)t.ingProperties[i]=!0,e.isCleaning&&(t.clean[i]=!0);if(e.from){this.css(e.from);var n=this.element.offsetHeight;n=null}this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0};var u="opacity,"+o(a);d.enableTransition=function(){if(!this.isTransitioning){var e=this.layout.options.transitionDuration;e="number"==typeof e?e+"ms":e,this.css({transitionProperty:u,transitionDuration:e,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(l,this,!1)}},d.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},d.onotransitionend=function(e){this.ontransitionend(e)};var h={"-webkit-transform":"transform"};d.ontransitionend=function(e){if(e.target===this.element){var t=this._transn,n=h[e.propertyName]||e.propertyName;if(delete t.ingProperties[n],i(t.ingProperties)&&this.disableTransition(),n in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[n]),n in t.onEnd){var o=t.onEnd[n];o.call(this),delete t.onEnd[n]}this.emitEvent("transitionEnd",[this])}},d.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(l,this,!1),this.isTransitioning=!1},d._removeStyles=function(e){var t={};for(var i in e)t[i]="";this.css(t)};var p={transitionProperty:"",transitionDuration:"",transitionDelay:""};return d.removeTransitionStyles=function(){this.css(p)},d.stagger=function(e){e=isNaN(e)?0:e,this.staggerDelay=e+"ms"},d.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},d.remove=function(){return s&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},d.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,t={},i=this.getHideRevealTransitionEndProperty("visibleStyle");t[i]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:t})},d.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},d.getHideRevealTransitionEndProperty=function(e){var t=this.layout.options[e];if(t.opacity)return"opacity";for(var i in t)return i},d.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,t={},i=this.getHideRevealTransitionEndProperty("hiddenStyle");t[i]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},d.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},d.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},n}),function(e,t){"function"==typeof define&&define.amd?_wAMD.define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(i,n,o,r){return t(e,i,n,o,r)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):e.Outlayer=t(e,e.EvEmitter,e.getSize,e.fizzyUIUtils,e.Outlayer.Item)}(window,function(e,t,i,n,o){function r(e,t){var i=n.getQueryElement(e);if(!i)return void(l&&l.error("Bad element for "+this.constructor.namespace+": "+(i||e)));this.element=i,c&&(this.$element=c(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(t);var o=++u;this.element.outlayerGUID=o,h[o]=this,this._create();var r=this._getOption("initLayout");r&&this.layout()}function s(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}function a(e){if("number"==typeof e)return e;var t=e.match(/(^\d*\.?\d*)(\w*)/),i=t&&t[1],n=t&&t[2];if(!i.length)return 0;i=parseFloat(i);var o=f[n]||1;return i*o}var l=e.console,c=e.jQuery,d=function(){},u=0,h={};r.namespace="outlayer",r.Item=o,r.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var p=r.prototype;n.extend(p,t.prototype),p.option=function(e){n.extend(this.options,e)},p._getOption=function(e){var t=this.constructor.compatOptions[e];return t&&void 0!==this.options[t]?this.options[t]:this.options[e]},r.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},p._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle);var e=this._getOption("resize");e&&this.bindResize()},p.reloadItems=function(){this.items=this._itemize(this.element.children)},p._itemize=function(e){for(var t=this._filterFindItemElements(e),i=this.constructor.Item,n=[],o=0;o<t.length;o++){var r=t[o],s=new i(r,this);n.push(s)}return n},p._filterFindItemElements=function(e){return n.filterFindElements(e,this.options.itemSelector)},p.getItemElements=function(){return this.items.map(function(e){return e.element})},p.layout=function(){this._resetLayout(),this._manageStamps();var e=this._getOption("layoutInstant"),t=void 0!==e?e:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},p._init=p.layout,p._resetLayout=function(){this.getSize()},p.getSize=function(){this.size=i(this.element)},p._getMeasurement=function(e,t){var n,o=this.options[e];o?("string"==typeof o?n=this.element.querySelector(o):o instanceof HTMLElement&&(n=o),this[e]=n?i(n)[t]:o):this[e]=0},p.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},p._getItemsForLayout=function(e){return e.filter(function(e){return!e.isIgnored})},p._layoutItems=function(e,t){if(this._emitCompleteOnItems("layout",e),e&&e.length){var i=[];e.forEach(function(e){var n=this._getItemLayoutPosition(e);n.item=e,n.isInstant=t||e.isLayoutInstant,i.push(n)},this),this._processLayoutQueue(i)}},p._getItemLayoutPosition=function(){return{x:0,y:0}},p._processLayoutQueue=function(e){this.updateStagger(),e.forEach(function(e,t){this._positionItem(e.item,e.x,e.y,e.isInstant,t)},this)},p.updateStagger=function(){var e=this.options.stagger;return null===e||void 0===e?void(this.stagger=0):(this.stagger=a(e),this.stagger)},p._positionItem=function(e,t,i,n,o){n?e.goTo(t,i):(e.stagger(o*this.stagger),e.moveTo(t,i))},p._postLayout=function(){this.resizeContainer()},p.resizeContainer=function(){var e=this._getOption("resizeContainer");if(e){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},p._getContainerSize=d,p._setContainerMeasure=function(e,t){if(void 0!==e){var i=this.size;i.isBorderBox&&(e+=t?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"}},p._emitCompleteOnItems=function(e,t){function i(){o.dispatchEvent(e+"Complete",null,[t])}function n(){s++,s==r&&i()}var o=this,r=t.length;if(!t||!r)return void i();var s=0;t.forEach(function(t){t.once(e,n)})},p.dispatchEvent=function(e,t,i){var n=t?[t].concat(i):i;if(this.emitEvent(e,n),c)if(this.$element=this.$element||c(this.element),t){var o=c.Event(t);o.type=e,this.$element.trigger(o,i)}else this.$element.trigger(e,i)},p.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},p.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},p.stamp=function(e){e=this._find(e),e&&(this.stamps=this.stamps.concat(e),e.forEach(this.ignore,this))},p.unstamp=function(e){e=this._find(e),e&&e.forEach(function(e){n.removeFrom(this.stamps,e),this.unignore(e)},this)},p._find=function(e){return e?("string"==typeof e&&(e=this.element.querySelectorAll(e)),e=n.makeArray(e)):void 0},p._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},p._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},p._manageStamp=d,p._getElementOffset=function(e){var t=e.getBoundingClientRect(),n=this._boundingRect,o=i(e),r={left:t.left-n.left-o.marginLeft,top:t.top-n.top-o.marginTop,right:n.right-t.right-o.marginRight,bottom:n.bottom-t.bottom-o.marginBottom};return r},p.handleEvent=n.handleEvent,p.bindResize=function(){e.addEventListener("resize",this),this.isResizeBound=!0},p.unbindResize=function(){e.removeEventListener("resize",this),this.isResizeBound=!1},p.onresize=function(){this.resize()},n.debounceMethod(r,"onresize",100),p.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},p.needsResizeLayout=function(){var e=i(this.element),t=this.size&&e;return t&&e.innerWidth!==this.size.innerWidth},p.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},p.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},p.prepended=function(e){var t=this._itemize(e);if(t.length){var i=this.items.slice(0);this.items=t.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(i)}},p.reveal=function(e){if(this._emitCompleteOnItems("reveal",e),e&&e.length){var t=this.updateStagger();e.forEach(function(e,i){e.stagger(i*t),e.reveal()})}},p.hide=function(e){if(this._emitCompleteOnItems("hide",e),e&&e.length){var t=this.updateStagger();e.forEach(function(e,i){e.stagger(i*t),e.hide()})}},p.revealItemElements=function(e){var t=this.getItems(e);this.reveal(t)},p.hideItemElements=function(e){var t=this.getItems(e);this.hide(t)},p.getItem=function(e){for(var t=0;t<this.items.length;t++){var i=this.items[t];if(i.element==e)return i}},p.getItems=function(e){e=n.makeArray(e);var t=[];return e.forEach(function(e){var i=this.getItem(e);i&&t.push(i)},this),t},p.remove=function(e){var t=this.getItems(e);this._emitCompleteOnItems("remove",t),t&&t.length&&t.forEach(function(e){e.remove(),n.removeFrom(this.items,e)},this)},p.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="",this.items.forEach(function(e){e.destroy()}),this.unbindResize();var t=this.element.outlayerGUID;delete h[t],delete this.element.outlayerGUID,c&&c.removeData(this.element,this.constructor.namespace)},r.data=function(e){e=n.getQueryElement(e);var t=e&&e.outlayerGUID;return t&&h[t]},r.create=function(e,t){var i=s(r);return i.defaults=n.extend({},r.defaults),n.extend(i.defaults,t),i.compatOptions=n.extend({},r.compatOptions),i.namespace=e,i.data=r.data,i.Item=s(o),n.htmlInit(i,e),c&&c.bridget&&c.bridget(e,i),i};var f={ms:1,s:1e3};return r.Item=o,r}),function(e,t){"function"==typeof define&&define.amd?_wAMD.define("vendor/bower_components/masonry/dist/masonry.pkgd",["outlayer/outlayer","get-size/get-size"],t):"object"==typeof module&&module.exports?module.exports=t(require("outlayer"),require("get-size")):e.Masonry=t(e.Outlayer,e.getSize)}(window,function(e,t){var i=e.create("masonry");return i.compatOptions.fitWidth="isFitWidth",i.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var e=0;e<this.cols;e++)this.colYs.push(0);this.maxY=0},i.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var e=this.items[0],i=e&&e.element;this.columnWidth=i&&t(i).outerWidth||this.containerWidth}var n=this.columnWidth+=this.gutter,o=this.containerWidth+this.gutter,r=o/n,s=n-o%n,a=s&&1>s?"round":"floor";r=Math[a](r),this.cols=Math.max(r,1)},i.prototype.getContainerWidth=function(){var e=this._getOption("fitWidth"),i=e?this.element.parentNode:this.element,n=t(i);this.containerWidth=n&&n.innerWidth},i.prototype._getItemLayoutPosition=function(e){e.getSize();var t=e.size.outerWidth%this.columnWidth,i=t&&1>t?"round":"ceil",n=Math[i](e.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var o=this._getColGroup(n),r=Math.min.apply(Math,o),s=o.indexOf(r),a={x:this.columnWidth*s,y:r},l=r+e.size.outerHeight,c=this.cols+1-o.length,d=0;c>d;d++)this.colYs[s+d]=l;return a},i.prototype._getColGroup=function(e){if(2>e)return this.colYs;for(var t=[],i=this.cols+1-e,n=0;i>n;n++){var o=this.colYs.slice(n,n+e);t[n]=Math.max.apply(Math,o)}return t},i.prototype._manageStamp=function(e){var i=t(e),n=this._getElementOffset(e),o=this._getOption("originLeft"),r=o?n.left:n.right,s=r+i.outerWidth,a=Math.floor(r/this.columnWidth);a=Math.max(0,a);var l=Math.floor(s/this.columnWidth);l-=s%this.columnWidth?0:1,l=Math.min(this.cols-1,l);for(var c=this._getOption("originTop"),d=(c?n.top:n.bottom)+i.outerHeight,u=a;l>=u;u++)this.colYs[u]=Math.max(d,this.colYs[u])},i.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this._getOption("fitWidth")&&(e.width=this._getContainerFitWidth()),e},i.prototype._getContainerFitWidth=function(){for(var e=0,t=this.cols;--t&&0===this.colYs[t];)e++;return(this.cols-e)*this.columnWidth-this.gutter},i.prototype.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!=this.containerWidth},i}),function(e,t){"function"==typeof define&&define.amd?_wAMD.define("vendor/bower_components/jquery-bridget/jquery-bridget",["jquery"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("jquery")):e.jQueryBridget=t(e,e.jQuery)}(window,function(e,t){function i(i,r,a){function l(e,t,n){var o,r="$()."+i+'("'+t+'")';return e.each(function(e,l){var c=a.data(l,i);if(!c)return void s(i+" not initialized. Cannot call methods, i.e. "+r);var d=c[t];if(!d||"_"==t.charAt(0))return void s(r+" is not a valid method");var u=d.apply(c,n);o=void 0===o?u:o}),void 0!==o?o:e}function c(e,t){e.each(function(e,n){var o=a.data(n,i);o?(o.option(t),o._init()):(o=new r(n,t),a.data(n,i,o))})}a=a||t||e.jQuery,a&&(r.prototype.option||(r.prototype.option=function(e){a.isPlainObject(e)&&(this.options=a.extend(!0,this.options,e))}),a.fn[i]=function(e){if("string"==typeof e){var t=o.call(arguments,1);return l(this,e,t);
}return c(this,e),this},n(a))}function n(e){!e||e&&e.bridget||(e.bridget=i)}var o=Array.prototype.slice,r=e.console,s="undefined"==typeof r?function(){}:function(e){r.error(e)};return n(t||e.jQuery),i}),_wAMD.define("site/published/commerce-elements/utils",["jquery","underscore","mustache","vendor/bower_components/masonry/dist/masonry.pkgd","vendor/bower_components/jquery-bridget/jquery-bridget"],function(e,t,i,n,o){var r='<div class="product-pagination" data-max-page="{{max_page}}">\n<div class="product-grid__paging clearfix">\n<a class="product-grid__paging--link js-products-prev">\n<span class="product-grid__paging--arrow"></span>\n</a>\n<div class="pagination-wrapper">\n<a class="product-grid__paging--count js-page-num wsite-first" data-page="1">1</a>\n{{#show_head_ellipsis}}\n<span class="pagination-ellipsis"></span>\n{{/show_head_ellipsis}}\n{{#pages}}\n<a class="product-grid__paging--count js-page-num" data-page="{{.}}">{{.}}</a>\n{{/pages}}\n{{#show_tail_ellipsis}}\n<span class="pagination-ellipsis"></span>\n{{/show_tail_ellipsis}}\n<a class="product-grid__paging--count js-page-num wsite-last" data-page="{{max_page}}">{{max_page}}</a>\n</div>\n<a class="product-grid__paging--link product-grid--next js-products-next">\n<span class="product-grid__paging--arrow"></span>\n</a>\n</div>\n</div>',s={bindSlideshowListener:function(t){var i,n,o=!1,r=function(e,t,i){var n=e.eq(t%e.length);n.css({marginTop:-1*i,paddingTop:i}).fadeIn(400,function(){e.not(n).hide()})},s=function(t){var s=0,a=e(t.currentTarget),l=a.find(".js-slideshow-img");if(n=a.clone(),o=!0,l.length>1){var c=a.find(".js-default-img"),d=parseFloat(c.css("paddingTop"));r(l,++s,d),clearInterval(i),i=setInterval(function(){r(l,++s,d)},1e3)}},a=function(t){if(o){o=!1;var r=e(t.currentTarget);r.replaceWith(n),clearInterval(i)}};t.off("mouseenter.slideshow",".product-grid__item").on("mouseenter.slideshow",".product-grid__item",s).off("mouseleave.slideshow",".product-grid__item").on("mouseleave.slideshow",".product-grid__item",a)},listenToPagination:function(e,t,i){var n=e.find(".js-products-prev, .js-products-next"),o=e.find(".js-page-num");n.off("click.arrow").on("click.arrow",function(n){this.onArrowClick(n,e,t,i)}.bind(this)),o.off("click.number").on("click.number",function(n){this.onNumberClick(n,e,t,i)}.bind(this))},onArrowClick:function(t,i,n,o){var r=e(t.currentTarget),s=r.hasClass("js-products-prev")?-1:1,a=r.siblings(".pagination-wrapper"),l=parseInt(a.children(".wsite-selected").attr("data-page")),c=l+s;c>=1&&n>=c&&this.gotoPage(i,c,n,o)},onNumberClick:function(t,i,n,o){var r=e(t.currentTarget),s=parseInt(r.attr("data-page"));s>=1&&n>=s&&this.gotoPage(i,s,n,o)},gotoPage:function(e,t,i,n){this.renderPagination(e,t,i,n),this.renderPage(e,t,n)},renderPagination:function(e,t,n,o){var s=e.find(".product-pagination"),a=this.getPaginationData(t,n),l=i.render(r,a);s.replaceWith(l),e.find('a[data-page="'+t+'"]').addClass("wsite-selected"),this.listenToPagination(e,n,o)},assignShowMorePagination:function(t,i,n){t.find(".product-grid__more").on("click",function(o){var r=e(o.currentTarget),s=r.data("current-page");i>s&&!r.hasClass("disabled")&&(r.data("current-page",++s),r.addClass("disabled"),this.renderPage(t,s,n)),s===i&&r.remove()}.bind(this))},assignRowScrollListener:function(e,i,n){var o=e.find(".product-grid__item");if(0!==o.length){var r=o.outerWidth(!0),s=e.find(".js-row-wrapper");this.scrollIntervalFired=!1,this.scrollInterval=null,e.find(".js-scroll-arrow").off("mousedown touchstart mouseup touchend").on("mousedown touchstart",function(e){this.onSingleRowArrowMousedown(e,s)}.bind(this)).on("mouseup touchend",function(e){this.onSingleArrowMouseUp(e,s,r)}.bind(this)),i>1&&(this.singleRowWidth=0,s.off("scroll.singlerow").on("scroll.singlerow",t.throttle(function(t){this.onSingleRowScroll(t,e,i,r,n)}.bind(this),150)))}},onSingleRowArrowMousedown:function(t,i){if(3!==t.which){var n=e(t.currentTarget),o=n.hasClass("js-scroll-left")?-1:1;this.scrollTimeout=setTimeout(function(){this.scrollInterval=setInterval(function(){this.intervalFired=!0,i.animate({scrollLeft:0>o?"-=30":"+=30"},10)}.bind(this),15)}.bind(this),150)}},onSingleArrowMouseUp:function(t,i,n){if(3!==t.which){var o=e(t.currentTarget),r=o.hasClass("js-scroll-left")?-1:1;if(!this.intervalFired){var s=n,a=i.scrollLeft()%n;a>0&&(0>r?s=a:s-=a),s=Math.ceil(s),i.animate({scrollLeft:0>r?"-="+s+"px":"+="+s+"px"},100)}clearTimeout(this.scrollTimeout),clearInterval(this.scrollInterval),this.intervalFired=!1,this.scrollInterval=null}},onSingleRowScroll:function(t,i,n,o,r){var s=e(t.currentTarget);if(0===this.singleRowWidth){var a=i.find(".js-row-wrapper").get(0);this.singleRowWidth=a.scrollWidth}if(s.scrollLeft()>this.singleRowWidth-2*s.width()){var l=s.data("current-page");n>l&&(this.renderPage(i,++l,r),s.data("current-page",l),this.singleRowWidth=0)}},initializeMasonry:function(t){var i=t.find(".product-grid-masonry");if(i.length>0){i.data("masonry")&&i.masonry("destroy"),e.fn.masonry||o("masonry",n,e);var r={itemSelector:".product-grid__item",columnWidth:".product-grid__item",gutter:".product-grid-masonry--gutter",percentPosition:!0},s=i.find("img"),a=[];s.each(function(){var t=e(this),i=this.complete;if(!i){var n=new e.Deferred;a.push(n),t.on("load",function(){n.resolve()})}}),e.when.apply(e,a).done(function(){i.masonry(r)})}},removeListeners:function(t){t.off("mouseenter mouseleave click"),t.find(".js-products-prev, .js-products-next").off("click"),t.find(".js-page-num").off("click"),t.find(".js-row-wrapper").off("scroll.singlerow"),t.find(".js-scroll-arrow").off("mousedown mouseup mouseleave touchstart touchend"),e.fn.masonry&&t.find(".product-grid-masonry").masonry("destroy")},renderPage:function(e,t,i){var n=t-1;i(e,n)},resetPagination:function(e,t){e.replaceWith(t)},getPaginationData:function(e,i){var n,o=t.range(1,e),r=t.range(e+1,i+1);return i>5&&e>2&&o.splice(0,e-3),i>5&&i-2>e&&r.splice(2,r.length),n=o.concat([e],r),n=t.filter(n,function(e){return 1!==e&&e!==i}),{max_page:i,pages:n,show_head_ellipsis:o[0]>2,show_tail_ellipsis:t.last(r)<i-1}}};return s}),_wAMD.define("tpl!elements/commerce-elements/element-wrapper.tpl",[],function(){return'<div class="element" id="{{ucfid}}">\n	{{{ contentHTML }}}\n</div>'}),_wAMD.define("tpl!elements/commerce-elements/layout-wrapper.tpl",[],function(){return'<div class="commerce-elements-wrapper {{publish_class}}"  {{#publish_class}}data-page-id="{{page_id}}" data-page-element-id="{{page_element_id}}"{{/publish_class}}>\n	<div class="pagination__overlay"></div>\n	<div class="commerce-layout-wrapper">\n		{{{layout_html}}}\n	</div>\n	{{#show_pagination}}\n		{{#show_more_link}}\n			{{>elements/commerce-elements/pagination/show-more}}\n		{{/show_more_link}}\n		{{^show_more_link}}\n			{{>elements/commerce-elements/pagination/pagination}}\n		{{/show_more_link}}\n	{{/show_pagination}}\n</div>'}),_wAMD.define("tpl!elements/commerce-elements/layouts/multiimage.tpl",[],function(){return'<div class="product-grid product-grid-columns--{{COLUMNS}} product-grid-layout--multiimage product-grid-layout--{{INFOPLACEMENT}}">\n	{{{models_html}}}\n</div>\n'}),_wAMD.define("tpl!elements/commerce-elements/layouts/masonry.tpl",[],function(){return'<div class="product-grid product-grid-masonry  product-grid-masonry--{{COLUMNS}} product-grid-layout--{{INFOPLACEMENT}}">\n	<div class="product-grid-masonry--gutter"></div>\n	{{{models_html}}}\n</div>\n'}),_wAMD.define("tpl!elements/commerce-elements/layouts/grid.tpl",[],function(){return'<div class="product-grid product-grid-columns--{{COLUMNS}} product-grid-layout--{{INFOPLACEMENT}}">\n	{{{models_html}}}\n</div>\n'}),_wAMD.define("tpl!elements/commerce-elements/layouts/singlerow.tpl",[],function(){return'<div class="product-grid product-grid-single-row--{{COLUMNS}} product-grid-layout--{{INFOPLACEMENT}} js-single-row-layout">\n		<div class="product-grid__controls js-single-row-controls">\n			<div class="product-grid__controls--link product-grid-single-row__prev js-scroll-arrow js-scroll-left">\n				<a class="product-grid-image-aspect--{{ASPECTRATIO}}">\n					<span class="product-grid__paging--arrow"></span>\n				</a>\n			</div>\n			<div class="product-grid__controls--link product-grid-single-row__next js-scroll-arrow js-scroll-right">\n				<a class="product-grid-image-aspect--{{ASPECTRATIO}}">\n					<span class="product-grid__paging--arrow"></span>\n				</a>\n			</div>\n		</div>\n		<div class="product-grid-single-row__contents">\n		<div class="product-grid-single-row__wrapper js-row-wrapper" data-current-page="1" data-max-page="{{max_page}}">\n			{{{models_html}}}\n		</div>\n	</div>\n</div>'}),_wAMD.define("tpl!elements/commerce-elements/pagination/pagination.tpl",[],function(){return'{{! please reflect any changes here to the string template in javascript/site/published/commerce-elements/utils.js }}\n<div class="product-pagination" data-max-page="{{max_page}}">\n	<div class="product-grid__paging clearfix">\n		<a class="product-grid__paging--link js-products-prev">\n			<span class="product-grid__paging--arrow"></span>\n		</a>\n		<div class="pagination-wrapper">\n			<a class="product-grid__paging--count js-page-num wsite-first" data-page="1">1</a>\n\n			{{#show_head_ellipsis}}\n				<span class="pagination-ellipsis"></span>\n			{{/show_head_ellipsis}}\n\n			{{#pages}}\n				<a class="product-grid__paging--count js-page-num" data-page="{{.}}">{{.}}</a>\n			{{/pages}}\n\n			{{#show_tail_ellipsis}}\n				<span class="pagination-ellipsis"></span>\n			{{/show_tail_ellipsis}}\n\n			<a class="product-grid__paging--count js-page-num wsite-last" data-page="{{max_page}}">{{max_page}}</a>\n		</div>\n		<a class="product-grid__paging--link product-grid--next js-products-next">\n			<span class="product-grid__paging--arrow"></span>\n		</a>\n	</div>\n</div>'}),_wAMD.define("tpl!elements/commerce-elements/pagination/show-more.tpl",[],function(){return'<div class="product-pagination" data-max-page="{{max_page}}">\n	<div class="product-grid__more" data-current-page="1">{{#tl}}templates.elements.commerce-elements.pagination.show-more{{/tl}}</div>\n</div>'}),_wAMD.define("tpl!elements/commerce-elements/info-placement/above-left.tpl",[],function(){return'{{#models}}\n	<div class="product-grid__item">\n		{{#model_url}}\n			<a class="product-grid__item-overlay" href="{{.}}"></a>\n		{{/model_url}}\n		<div class="product-grid__content">\n			{{#SHOWIMAGE}}\n				{{#is_multi_image}}\n					<div class="product-grid__images product-grid-multi-image images-{{image_count}}">\n						{{#image_urls}}\n							<div class="product-grid-image image-{{index}}" style="background-image: url(\'{{url}}\')"></div>\n						{{/image_urls}}\n					</div>\n				{{/is_multi_image}}\n				{{^is_multi_image}}\n					{{#first_image}}\n						<div class="product-grid__images">\n							{{#is_masonry}}\n								<div class="product-grid-image image-{{index}}"><img src="{{url}}" /></div>\n							{{/is_masonry}}\n							{{^is_masonry}}\n								<div class="product-grid-image image-{{index}} product-grid-image__default product-grid-image-aspect--{{ASPECTRATIO}} js-default-img" style="background-image: url({{url}})"></div>\n							{{/is_masonry}}\n							{{#can_view_slideshow}}\n								{{#image_urls}}\n									<div class="product-grid-image product-grid-image__slideshow image-{{index}} product-grid-image-aspect--{{ASPECTRATIO}} js-slideshow-img" style="background-image: url({{url}});"></div>\n								{{/image_urls}}\n							{{/can_view_slideshow}}\n						</div>\n					{{/first_image}}\n				{{/is_multi_image}}\n			{{/SHOWIMAGE}}\n			<div class="product-grid__info" style="text-align:{{TEXTALIGN}}">\n				{{#SHOWNAME}}\n					<h2 class="product-grid__title">\n						<span class="product-grid-reset">{{name}}</span>\n					</h2>\n				{{/SHOWNAME}}\n				{{#SHOWPRICE}}\n					<div class="product-grid__price paragraph">\n						<span class="product-grid-reset">\n							{{#price}}\n								<span class="product-grid__sale">\n									{{{price}}}\n								</span>\n							{{/price}}\n							{{{sale_price}}}\n						</span>\n					</div>\n				{{/SHOWPRICE}}\n				{{#SHOWSHORTDESCRIPTION}}\n					<div class="product-grid__description paragraph">\n						<span class="product-grid-reset product-grid__description--shortened">{{{short_description}}}</span>\n					</div>\n				{{/SHOWSHORTDESCRIPTION}}\n				{{#SHOWBUTTON}}\n					<div class="product-grid__button">\n						<a {{#model_url}}href="{{.}}"{{/model_url}} class="{{BUTTONSTYLE}}">\n							<span class="wsite-button-inner">{{BUTTONTEXT}}</span>\n						</a>\n					</div>\n				{{/SHOWBUTTON}}\n			</div>\n		</div>\n	</div>\n{{/models}}'}),_wAMD.define("tpl!elements/commerce-elements/info-placement/over-hover.tpl",[],function(){return'{{#models}}\n	<div class="product-grid__item">\n		{{#model_url}}\n			<a class="product-grid__item-overlay" href="{{.}}"></a>\n		{{/model_url}}\n		<div class="product-grid__content">\n			{{#SHOWIMAGE}}\n				{{#is_multi_image}}\n					<div class="product-grid__images product-grid-multi-image images-{{image_count}}">\n						{{#image_urls}}\n							<div class="product-grid-image image-{{index}}" style="background-image: url(\'{{url}}\')"></div>\n						{{/image_urls}}\n					</div>\n				{{/is_multi_image}}\n				{{^is_multi_image}}\n					{{#first_image}}\n						<div class="product-grid__images">\n							{{#is_masonry}}\n								<div class="product-grid-image image-{{index}}"><img src="{{url}}" /></div>\n							{{/is_masonry}}\n							{{^is_masonry}}\n								<div class="product-grid-image image-{{index}} product-grid-image__default product-grid-image-aspect--{{ASPECTRATIO}} js-default-img" style="background-image: url({{url}})"></div>\n							{{/is_masonry}}\n							{{#can_view_slideshow}}\n								{{#image_urls}}\n									<div class="product-grid-image product-grid-image__slideshow image-{{index}} product-grid-image-aspect--{{ASPECTRATIO}} js-slideshow-img" style="background-image: url({{url}});"></div>\n								{{/image_urls}}\n							{{/can_view_slideshow}}\n						</div>\n					{{/first_image}}\n				{{/is_multi_image}}\n			{{/SHOWIMAGE}}\n			<div class="product-grid__overlay">\n				<div class="product-grid__overlay-inner">\n					<div class="product-grid__info" style="text-align:{{TEXTALIGN}}">\n						{{#SHOWNAME}}\n							<h2 class="product-grid__title">\n								<span class="product-grid-reset">{{name}}</span>\n							</h2>\n						{{/SHOWNAME}}\n						{{#SHOWPRICE}}\n							<div class="product-grid__price paragraph">\n								<span class="product-grid-reset">\n									{{#price}}\n										<span class="product-grid__sale">\n											{{{price}}}\n										</span>\n									{{/price}}\n									{{{sale_price}}}\n								</span>\n							</div>\n						{{/SHOWPRICE}}\n						{{#SHOWSHORTDESCRIPTION}}\n							<div class="product-grid__description paragraph">\n								<span class="product-grid-reset product-grid__description--shortened">{{{short_description}}}</span>\n							</div>\n						{{/SHOWSHORTDESCRIPTION}}\n						{{#SHOWBUTTON}}\n							<div class="product-grid__button">\n								<a {{#model_url}}href="{{.}}"{{/model_url}} class="{{BUTTONSTYLE}}">\n									<span class="wsite-button-inner">{{BUTTONTEXT}}</span>\n								</a>\n							</div>\n						{{/SHOWBUTTON}}\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n{{/models}}'}),_wAMD.define("tpl!elements/commerce-elements/info-placement/below-right.tpl",[],function(){return'{{#models}}\n	<div class="product-grid__item">\n		{{#model_url}}\n			<a class="product-grid__item-overlay" href="{{.}}"></a>\n		{{/model_url}}\n		<div class="product-grid__content">\n			<div class="product-grid__info" style="text-align:{{TEXTALIGN}}">\n				{{#SHOWNAME}}\n					<h2 class="product-grid__title">\n						<span class="product-grid-reset">{{name}}</span>\n					</h2>\n				{{/SHOWNAME}}\n				{{#SHOWPRICE}}\n					<div class="product-grid__price paragraph">\n						<span class="product-grid-reset">\n							{{#price}}\n								<span class="product-grid__sale">\n									{{{price}}}\n								</span>\n							{{/price}}\n							{{{sale_price}}}\n						</span>\n					</div>\n				{{/SHOWPRICE}}\n				{{#SHOWSHORTDESCRIPTION}}\n					<div class="product-grid__description paragraph">\n						<span class="product-grid-reset product-grid__description--shortened">{{{short_description}}}</span>\n					</div>\n				{{/SHOWSHORTDESCRIPTION}}\n				{{#SHOWBUTTON}}\n					<div class="product-grid__button">\n						<a {{#model_url}}href="{{.}}"{{/model_url}}  class="{{BUTTONSTYLE}}">\n							<span class="wsite-button-inner">{{BUTTONTEXT}}</span>\n						</a>\n					</div>\n				{{/SHOWBUTTON}}\n			</div>\n			{{#SHOWIMAGE}}\n				{{#is_multi_image}}\n					<div class="product-grid__images product-grid-multi-image images-{{image_count}}">\n						{{#image_urls}}\n							<div class="product-grid-image image-{{index}}" style="background-image: url(\'{{url}}\')"></div>\n						{{/image_urls}}\n					</div>\n				{{/is_multi_image}}\n				{{^is_multi_image}}\n					{{#first_image}}\n						<div class="product-grid__images">\n							{{#is_masonry}}\n								<div class="product-grid-image image-{{index}}"><img src="{{url}}" /></div>\n							{{/is_masonry}}\n							{{^is_masonry}}\n								<div class="product-grid-image image-{{index}} product-grid-image__default product-grid-image-aspect--{{ASPECTRATIO}} js-default-img" style="background-image: url({{url}})"></div>\n							{{/is_masonry}}\n							{{#can_view_slideshow}}\n								{{#image_urls}}\n									<div class="product-grid-image product-grid-image__slideshow image-{{index}} product-grid-image-aspect--{{ASPECTRATIO}} js-slideshow-img" style="background-image: url({{url}});"></div>\n								{{/image_urls}}\n							{{/can_view_slideshow}}\n						</div>\n					{{/first_image}}\n				{{/is_multi_image}}\n			{{/SHOWIMAGE}}\n		</div>\n	</div>\n{{/models}}'}),_wAMD.define("editor-site-shared/build/elements/BaseCommerceElement",["jquery","underscore","mustache","config","editor-site-shared/relay","editor-site-shared/build/elements/Element","site/published/commerce-elements/utils","editor-site-shared/ui/context","tpl!elements/commerce-elements/element-wrapper.tpl","tpl!elements/commerce-elements/layout-wrapper.tpl","tpl!elements/commerce-elements/layouts/multiimage.tpl","tpl!elements/commerce-elements/layouts/masonry.tpl","tpl!elements/commerce-elements/layouts/grid.tpl","tpl!elements/commerce-elements/layouts/singlerow.tpl","tpl!elements/commerce-elements/pagination/pagination.tpl","tpl!elements/commerce-elements/pagination/show-more.tpl","tpl!elements/commerce-elements/info-placement/above-left.tpl","tpl!elements/commerce-elements/info-placement/over-hover.tpl","tpl!elements/commerce-elements/info-placement/below-right.tpl"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p,f,m,g,v,b){var y=window.Class.create(r,{PROPERTIES_TO_PARSE:["IMAGEDATA","SEQUENCE"],models:null,initialize:function($super,e){$super(e),t.defaults(this,{models:[],maxPage:1}),i.compilePartial("elements/commerce-elements/pagination/pagination",f),i.compilePartial("elements/commerce-elements/pagination/show-more",m)},renderHTML:function($super,e){if(n.chromeless){var t,o=this.getContentField();this.models.length>0?(this.propertiesModel=this.propertiesToModel(o),this.propertiesModel.models=this.models,t=this.renderModels(o)):t=i.render(e),o.content=i.render(l,{ucfid:o.ucfid,contentHTML:t})}return $super()},afterRender:function($super,t,i){$super(t,i),this.$li=e(t),a.inEditorContext()||(this.propertiesModel||(this.propertiesModel=this.propertiesToModel(this.getContentField())),this.$initialPaginationEl=this.$li.find(".product-pagination").clone(),this.bindEventListeners())},unrender:function($super){$super(),a.inEditorContext()||s.removeListeners(this.$li)},mapProperties:function(t,i){var n=this.propertiesToModel(t);return n.models=this.models,this.models&&!this.shouldFetchModels(t,i)?e.Deferred().resolve(n):this.fetchModelsPage(n,0).then(function(e){return this.models=n.models=e,n}.bind(this))},fetchModelsPage:function(e,t){throw"Please override this method in subclasses"},renderModels:function(e){var n=this.propertiesModel.LAYOUT,o=this.propertiesModel.PAGINATIONOPTS,r="showMoreLink"===o,a=this.maxPage>1&&"singlerow"!==n;t.extend(this.propertiesModel,{show_pagination:a,show_more_link:r}),this.maxPage>1&&t.extend(this.propertiesModel,s.getPaginationData(1,this.maxPage));var l=this.renderLayout(this.propertiesModel);return i.render(c,t.extend({},this.propertiesModel,{layout_html:l}))},renderLayout:function(e){var t,n=e.LAYOUT;switch(e.models_html=this.renderModelsHtml(e),n){case"masonry":t=i.render(u,e);break;case"multiimage":t=i.render(d,e);break;case"singlerow":t=i.render(p,e);break;case"grid":default:t=i.render(h,e)}return t},renderModelsHtml:function(e){var t,n=e.INFOPLACEMENT;switch(n){case"above":case"left":t=i.render(g,e);break;case"over":case"hover":t=i.render(v,e);break;case"below":case"right":default:t=i.render(b,e)}return t},renderItemsPage:function(t,i){this.propertiesModel.models=i;var n=this.propertiesModel.LAYOUT,o=this.propertiesModel.SHOWSLIDESHOW,r=this.propertiesModel.PAGINATIONOPTS,a=t.find(".commerce-layout-wrapper"),l=t.find(".product-grid-single-row__wrapper"),c=e(this.renderLayout(this.propertiesModel)),d=t.find(".pagination__overlay");l.length?l.append(c.find(".product-grid__item")):"showMoreLink"===r?(a.children(":first").append(c.children()),t.find(".product-grid__more").removeClass("disabled"),d.hide()):(e("body, html").animate({scrollTop:t.offset().top-70+"px"},300),a.html(c),d.hide());var u="singlerow"===n||"grid"===n;o&&u&&s.bindSlideshowListener(t),"masonry"===n&&s.initializeMasonry(t)},bindEventListeners:function(){var e=this.propertiesModel.LAYOUT.toLowerCase();this.maxPage>1&&this.bindPaginationListeners();var t=this.propertiesModel.SHOWSLIDESHOW;!t||"grid"!==e&&"singlerow"!==e||s.bindSlideshowListener(this.$li),"singlerow"===e?s.assignRowScrollListener(this.$li,this.maxPage,this.paginationCallback.bind(this)):"masonry"===e&&this.propertiesModel.SHOWIMAGE&&s.initializeMasonry(this.$li),this.assignEmptyElementListener(this.getContentField())},bindPaginationListeners:function(){var e=this.propertiesModel.PAGINATIONOPTS;if("numberedPages"===e){var t=this.$li.find("[data-page]");t.eq(0).addClass("wsite-selected"),s.listenToPagination(this.$li,this.maxPage,this.paginationCallback.bind(this))}else"showMoreLink"===e&&s.assignShowMorePagination(this.$li,this.maxPage,this.paginationCallback.bind(this))},assignEmptyElementListener:function(e){this.models&&0!==this.models.length||this.$li.off("click.commerce-element",".empty-commerce-element").on("click.commerce-element",".empty-commerce-element",function(){this.openSequenceSelectDialog(e)}.bind(this))},afterAdd:function($super,e){$super(e),this.openSequenceSelectDialog(this.getContentField())},propertiesToModel:function(e){var i={};t.each(t.values(e.properties),function(e){var n=e.reference_property.match(/<!(.*?)!>/)[1];"true"===e.property_result||"false"===e.property_result?i[n]="true"===e.property_result:t.indexOf(this.PROPERTIES_TO_PARSE,n)>-1?i[n]=JSON.parse(e.property_result):i[n]=e.property_result}.bind(this));var n=i.LAYOUT;return i.is_multi_image="multiimage"===n,i.is_masonry="masonry"===n,i.can_view_slideshow=i.SHOWSLIDESHOW&&"multiimage"!==n&&"masonry"!==n,i}});return y}),_wAMD.define("tpl!elements/commerce-elements/products-element/empty-products-element.tpl",[],function(){return'<div class="ui-framework empty-commerce-element">\n	<div class="commerce-element__overlay">\n		<p class="empty-state__message">{{#tl}}templates.elements.empty-select-products{{/tl}}</p>\n	</div>\n	<div class="product-grid product-grid-columns--3 product-grid-layout--above">\n		<div class="product-grid__item">\n			<div class="product-grid__images">\n					<div class="product-grid-image image-1 default-image product-grid-image-aspect--1-1" style="background-image: url(//{{ASSETS_BASE}}/images/editor/elements/commerce-elements/products-1.jpg)"></div>\n			</div>\n			<div class="product-grid__info" style="text-align: left;">\n				<h2 class="product-grid__title">\n					<span class="product-grid-reset">{{#tl}}templates.elements.commerce-elements.products-element.product-name{{/tl}}</span>\n				</h2>\n				<div class="product-grid__price paragraph">\n					<span class="product-grid-reset">{{#tl}}templates.elements.commerce-elements.products-element.product-price{{/tl}}</span>\n				</div>\n				<div class="product-grid__description paragraph">\n					<span class="product-grid-reset product-grid__description--shortened">\n						{{#tl}}templates.elements.commerce-elements.products-element.product-description{{/tl}}\n					</span>\n				</div>\n				<div class="product-grid__button">\n					<a class="wsite-button wsite-button-small wsite-button-normal">\n						<span class="wsite-button-inner">{{#tl}}templates.elements.commerce-elements.products-element.buy-now{{/tl}}</span>\n					</a>\n				</div>\n			</div>\n		</div>\n		<div class="product-grid__item">\n			<div class="product-grid__images">\n					<div class="product-grid-image image-1 default-image product-grid-image-aspect--1-1" style="background-image: url(//{{ASSETS_BASE}}/images/editor/elements/commerce-elements/products-2.jpg)"></div>\n			</div>\n			<div class="product-grid__info" style="text-align: left;">\n				<h2 class="product-grid__title">\n					<span class="product-grid-reset">{{#tl}}templates.elements.commerce-elements.products-element.product-name{{/tl}}</span>\n				</h2>\n				<div class="product-grid__price paragraph">\n					<span class="product-grid-reset">{{#tl}}templates.elements.commerce-elements.products-element.product-price{{/tl}}</span>\n				</div>\n				<div class="product-grid__description paragraph">\n					<span class="product-grid-reset product-grid__description--shortened">\n						{{#tl}}templates.elements.commerce-elements.products-element.product-description{{/tl}}\n					</span>\n				</div>\n				<div class="product-grid__button">\n					<a class="wsite-button wsite-button-small wsite-button-normal">\n						<span class="wsite-button-inner">{{#tl}}templates.elements.commerce-elements.products-element.buy-now{{/tl}}</span>\n					</a>\n				</div>\n			</div>\n		</div>\n		<div class="product-grid__item">\n			<div class="product-grid__images">\n					<div class="product-grid-image image-1 default-image product-grid-image-aspect--1-1" style="background-image: url(//{{ASSETS_BASE}}/images/editor/elements/commerce-elements/products-3.jpg)"></div>\n			</div>\n			<div class="product-grid__info" style="text-align: left;">\n				<h2 class="product-grid__title">\n					<span class="product-grid-reset">{{#tl}}templates.elements.commerce-elements.products-element.product-name{{/tl}}</span>\n				</h2>\n				<div class="product-grid__price paragraph">\n					<span class="product-grid-reset">{{#tl}}templates.elements.commerce-elements.products-element.product-price{{/tl}}</span>\n				</div>\n				<div class="product-grid__description paragraph">\n					<span class="product-grid-reset product-grid__description--shortened">\n						{{#tl}}templates.elements.commerce-elements.products-element.product-description{{/tl}}\n					</span>\n				</div>\n				<div class="product-grid__button">\n					<a class="wsite-button wsite-button-small wsite-button-normal">\n						<span class="wsite-button-inner">{{#tl}}templates.elements.commerce-elements.products-element.buy-now{{/tl}}</span>\n					</a>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>'}),_wAMD.define("tpl!elements/commerce-elements/products-element/empty-products-element-mobile.tpl",[],function(){return'<div class="ui-framework empty-commerce-element">\n	<div class="commerce-element__overlay">\n		<p class="empty-state__message">{{#tl}}templates.elements.empty-select-products{{/tl}}</p>\n	</div>\n	<div class="product-grid product-grid-columns--2 product-grid-layout--above">\n		<div class="product-grid__item">\n			<div class="product-grid__images">\n					<div class="product-grid-image image-1 default-image product-grid-image-aspect--1-1" style="background-image: url(products-1.jpg)"></div>\n			</div>\n			<div class="product-grid__info" style="text-align: left;">\n				<h2 class="product-grid__title">\n					<span class="product-grid-reset">{{#tl}}templates.elements.commerce-elements.products-element.product-name{{/tl}}</span>\n				</h2>\n				<div class="product-grid__price paragraph">\n					<span class="product-grid-reset">{{#tl}}templates.elements.commerce-elements.products-element.product-price{{/tl}}</span>\n				</div>\n				<div class="product-grid__description paragraph">\n					<span class="product-grid-reset product-grid__description--shortened">\n						{{#tl}}templates.elements.commerce-elements.products-element.product-description{{/tl}}\n					</span>\n				</div>\n				<div class="product-grid__button">\n					<a class="wsite-button wsite-button-small wsite-button-normal">\n						<span class="wsite-button-inner">{{#tl}}templates.elements.commerce-elements.products-element.buy-now{{/tl}}</span>\n					</a>\n				</div>\n			</div>\n		</div>\n		<div class="product-grid__item">\n			<div class="product-grid__images">\n					<div class="product-grid-image image-1 default-image product-grid-image-aspect--1-1" style="background-image: url(products-2.jpg)"></div>\n			</div>\n			<div class="product-grid__info" style="text-align: left;">\n				<h2 class="product-grid__title">\n					<span class="product-grid-reset">{{#tl}}templates.elements.commerce-elements.products-element.product-name{{/tl}}</span>\n				</h2>\n				<div class="product-grid__price paragraph">\n					<span class="product-grid-reset">{{#tl}}templates.elements.commerce-elements.products-element.product-price{{/tl}}</span>\n				</div>\n				<div class="product-grid__description paragraph">\n					<span class="product-grid-reset product-grid__description--shortened">\n						{{#tl}}templates.elements.commerce-elements.products-element.product-description{{/tl}}\n					</span>\n				</div>\n				<div class="product-grid__button">\n					<a class="wsite-button wsite-button-small wsite-button-normal">\n						<span class="wsite-button-inner">{{#tl}}templates.elements.commerce-elements.products-element.buy-now{{/tl}}</span>\n					</a>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>'}),_wAMD.define("tpl!elements/commerce-elements/products-element/hidden-products-element.tpl",[],function(){return'<div class="ui-framework hidden-commerce-element">\n	<h2>{{#tl}}templates.elements.products-element.product-info-hidden{{/tl}}</h2>\n	<p>{{#tl}}templates.elements.products-element.dont-show-on-publish{{/tl}}</p>\n</div>\n'}),_wAMD.define("editor-site-shared/build/elements/ProductsElement",["jquery","underscore","mustache","config","editor-site-shared/relay","editor-site-shared/build/elements/Element","editor-site-shared/build/elements/BaseCommerceElement","site/published/commerce-elements/utils","editor-site-shared/ui/context","tpl!elements/commerce-elements/layout-wrapper.tpl","tpl!elements/commerce-elements/products-element/empty-products-element.tpl","tpl!elements/commerce-elements/products-element/empty-products-element-mobile.tpl","tpl!elements/commerce-elements/products-element/hidden-products-element.tpl"],function(e,t,i,n,o,r,s,a,l,c,d,u,h){var p=window.Class.create(s,{renderHTML:function($super){return d=n.chromeless?u:d,$super(d)},rerenderContentField:function(n,o,r,s){var l,u,p=e(o);this.mapProperties(n,s).then(function(e){this.propertiesModel=e;var f=n.getProperty("<!PRODSPERPAGE!>").ucfpid,m=n.getProperty("<!PAGINATIONOPTS!>").ucfpid,g=n.getProperty("<!LAYOUT!>").ucfpid,v=n.getProperty("<!SEQUENCE!>").ucfpid,b=!1,y=this.propertiesModel.INFOPLACEMENT;(this.propertiesModel.SHOWIMAGE||this.propertiesModel.SHOWBUTTON||this.propertiesModel.SHOWSHORTDESCRIPTION||this.propertiesModel.SHOWPRICE||this.propertiesModel.SHOWNAME)&&(this.propertiesModel.SHOWIMAGE||"over"!==y&&"hover"!==y)?0===e.models.length?(u=i.render(d),l=i.render(c,{layout_html:u}),p.find(".commerce-elements-wrapper").html(l)):b=!0:(u=i.render(h),l=i.render(c,{layout_html:u}),p.find(".commerce-elements-wrapper").html(l)),
b?t.isUndefined(s[f])&&t.isUndefined(s[g])&&t.isUndefined(s[m])&&t.isUndefined(s[v])?(l=this.renderLayout(e),p.find(".commerce-layout-wrapper").html(l),this.maxPage>1&&a.resetPagination(p.find(".product-pagination"),this.$initialPaginationEl),this.afterRerenderContentField(n,o,r)):this.rerenderProducts(p,n,r):this.afterRerenderContentField(n,o,r)}.bind(this))},paginationCallback:function(e,t){"singlerow"!==this.propertiesModel.LAYOUT&&e.find(".pagination__overlay").show(),this.fetchModelsPage(this.propertiesModel,t).done(this.renderItemsPage.bind(this,e))},fetchModelsPage:function(e,t){var i=e.SEQUENCE,n=e.IMAGEDATA,r=parseInt(e.PRODSPERPAGE),s=t*r,a=this.getContentField();return o.execute("loading:start","products-element::pagination-fetch"),o.request("products-element:pagination:fetch",a.ucfid,i,n,s,r).always(o.execute.bind(o,"loading:stop","products-element::pagination-fetch")).then(function(e){return e.data})},openSequenceSelectDialog:function(e){o.execute("products-element:select-products",{origin:"empty-element",ucfid:e.ucfid,sequence:JSON.parse(e.getProperty("<!SEQUENCE!>").property_result),imageData:JSON.parse(e.getProperty("<!IMAGEDATA!>").property_result)})},shouldFetchModels:function(e,i){var n=e.getProperty("<!SEQUENCE!>").ucfpid,o=e.getProperty("<!IMAGEDATA!>").ucfpid,r=e.getProperty("<!PRODSPERPAGE!>").ucfpid;return!t.isUndefined(i[n])||!t.isUndefined(i[o])||!t.isUndefined(i[r])},rerenderProducts:function(e,t,i){var n=parseInt(this.propertiesModel.PRODSPERPAGE),r=this.propertiesModel.SEQUENCE,t=this.getContentField();o.execute("loading:start","products-element::max-page"),o.request("products-element:pagination:max-page:get",t.ucfid,r,n).always(o.execute.bind(o,"loading:stop","products-element::max-page")).done(function(n){this.maxPage=parseInt(n.data);var o=this.renderModels(t);e.html(o),this.afterRerenderContentField(t,e.get(0),i)}.bind(this))}});return r.register("90123932",p),p}),_wAMD.define("tpl!elements/commerce-elements/categories-element/empty-categories-element.tpl",[],function(){return'<div class="ui-framework empty-commerce-element">\n	<div class="commerce-element__overlay">\n		<p class="empty-state__message">{{#tl}}templates.elements.categories-element.select-categories{{/tl}}</p>\n	</div>\n	<div class="product-grid product-grid-columns--3 product-grid-layout--above">\n		<div class="product-grid__item">\n			<div class="product-grid__images">\n					<div class="product-grid-image image-1 default-image product-grid-image-aspect--1-1" style="background-image: url(//{{ASSETS_BASE}}/images/editor/elements/commerce-elements/categories-1.jpg)"></div>\n			</div>\n			<div class="product-grid__info" style="text-align: left;">\n				<h2 class="product-grid__title">\n					<span class="product-grid-reset">{{#tl}}templates.elements.commerce-elements.categories-element.category-name{{/tl}}</span>\n				</h2>\n				<div class="product-grid__description paragraph">\n					<span class="product-grid-reset product-grid__description--shortened">\n						{{#tl}}templates.elements.commerce-elements.categories-element.category-description{{/tl}}\n					</span>\n				</div>\n				<div class="product-grid__button">\n					<a class="wsite-button wsite-button-small wsite-button-normal">\n						<span class="wsite-button-inner">{{#tl}}templates.elements.commerce-elements.categories-element.view-category{{/tl}}</span>\n					</a>\n				</div>\n			</div>\n		</div>\n		<div class="product-grid__item">\n			<div class="product-grid__images">\n					<div class="product-grid-image image-1 default-image product-grid-image-aspect--1-1" style="background-image: url(//{{ASSETS_BASE}}/images/editor/elements/commerce-elements/categories-2.jpg)"></div>\n			</div>\n			<div class="product-grid__info" style="text-align: left;">\n				<h2 class="product-grid__title">\n					<span class="product-grid-reset">{{#tl}}templates.elements.commerce-elements.categories-element.category-name{{/tl}}</span>\n				</h2>\n				<div class="product-grid__description paragraph">\n					<span class="product-grid-reset product-grid__description--shortened">\n						{{#tl}}templates.elements.commerce-elements.categories-element.category-description{{/tl}}\n					</span>\n				</div>\n				<div class="product-grid__button">\n					<a class="wsite-button wsite-button-small wsite-button-normal">\n						<span class="wsite-button-inner">{{#tl}}templates.elements.commerce-elements.categories-element.view-category{{/tl}}</span>\n					</a>\n				</div>\n			</div>\n		</div>\n		<div class="product-grid__item">\n			<div class="product-grid__images">\n					<div class="product-grid-image image-1 default-image product-grid-image-aspect--1-1" style="background-image: url(//{{ASSETS_BASE}}/images/editor/elements/commerce-elements/categories-3.jpg)"></div>\n			</div>\n			<div class="product-grid__info" style="text-align: left;">\n				<h2 class="product-grid__title">\n					<span class="product-grid-reset">{{#tl}}templates.elements.commerce-elements.categories-element.category-name{{/tl}}</span>\n				</h2>\n				<div class="product-grid__description paragraph">\n					<span class="product-grid-reset product-grid__description--shortened">\n						{{#tl}}templates.elements.commerce-elements.categories-element.category-description{{/tl}}\n					</span>\n				</div>\n				<div class="product-grid__button">\n					<a class="wsite-button wsite-button-small wsite-button-normal">\n						<span class="wsite-button-inner">{{#tl}}templates.elements.commerce-elements.categories-element.view-category{{/tl}}</span>\n					</a>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>'}),_wAMD.define("tpl!elements/commerce-elements/categories-element/empty-categories-element-mobile.tpl",[],function(){return'<div class="ui-framework empty-commerce-element">\n	<div class="commerce-element__overlay">\n		<p class="empty-state__message">{{#tl}}templates.elements.categories-element.select-categories{{/tl}}</p>\n	</div>\n	<div class="product-grid product-grid-columns--2 product-grid-layout--above">\n		<div class="product-grid__item">\n			<div class="product-grid__images">\n					<div class="product-grid-image image-1 default-image product-grid-image-aspect--1-1" style="background-image: url(categories-1.jpg)"></div>\n			</div>\n			<div class="product-grid__info" style="text-align: left;">\n				<h2 class="product-grid__title">\n					<span class="product-grid-reset">{{#tl}}templates.elements.commerce-elements.categories-element.category-name{{/tl}}</span>\n				</h2>\n				<div class="product-grid__description paragraph">\n					<span class="product-grid-reset product-grid__description--shortened">\n						{{#tl}}templates.elements.commerce-elements.categories-element.category-description{{/tl}}\n					</span>\n				</div>\n				<div class="product-grid__button">\n					<a class="wsite-button wsite-button-small wsite-button-normal">\n						<span class="wsite-button-inner">{{#tl}}templates.elements.commerce-elements.categories-element.view-category{{/tl}}</span>\n					</a>\n				</div>\n			</div>\n		</div>\n		<div class="product-grid__item">\n			<div class="product-grid__images">\n					<div class="product-grid-image image-1 default-image product-grid-image-aspect--1-1" style="background-image: url(categories-2.jpg)"></div>\n			</div>\n			<div class="product-grid__info" style="text-align: left;">\n				<h2 class="product-grid__title">\n					<span class="product-grid-reset">{{#tl}}templates.elements.commerce-elements.categories-element.category-name{{/tl}}</span>\n				</h2>\n				<div class="product-grid__description paragraph">\n					<span class="product-grid-reset product-grid__description--shortened">\n						{{#tl}}templates.elements.commerce-elements.categories-element.category-description{{/tl}}\n					</span>\n				</div>\n				<div class="product-grid__button">\n					<a class="wsite-button wsite-button-small wsite-button-normal">\n						<span class="wsite-button-inner">{{#tl}}templates.elements.commerce-elements.categories-element.view-category{{/tl}}</span>\n					</a>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n'}),_wAMD.define("tpl!elements/commerce-elements/categories-element/hidden-categories-element.tpl",[],function(){return'<div class="ui-framework hidden-commerce-element">\n	<h2>{{#tl}}templates.elements.categories-element.category-info-hidden{{/tl}}</h2>\n	<p>{{#tl}}templates.elements.categories-element.dont-show-on-publish{{/tl}}</p>\n</div>\n'}),_wAMD.define("editor-site-shared/build/elements/CategoriesElement",["jquery","underscore","mustache","config","editor-site-shared/relay","editor-site-shared/build/elements/Element","editor-site-shared/build/elements/BaseCommerceElement","site/published/commerce-elements/utils","editor-site-shared/ui/context","tpl!elements/commerce-elements/layout-wrapper.tpl","tpl!elements/commerce-elements/categories-element/empty-categories-element.tpl","tpl!elements/commerce-elements/categories-element/empty-categories-element-mobile.tpl","tpl!elements/commerce-elements/categories-element/hidden-categories-element.tpl"],function(e,t,i,n,o,r,s,a,l,c,d,u,h){var p=window.Class.create(s,{renderHTML:function($super){return d=n.chromeless?u:d,$super(d)},rerenderContentField:function($super,n,o,r,s){var l,u,p=e(o);this.mapProperties(n,s).then(function(e){this.propertiesModel=e;var f=n.getProperty("<!CATSPERPAGE!>").ucfpid,m=n.getProperty("<!PAGINATIONOPTS!>").ucfpid,g=n.getProperty("<!LAYOUT!>").ucfpid,v=n.getProperty("<!SEQUENCE!>").ucfpid,b=!1,y=this.propertiesModel.INFOPLACEMENT;(this.propertiesModel.SHOWIMAGE||this.propertiesModel.SHOWBUTTON||this.propertiesModel.SHOWNAME)&&(this.propertiesModel.SHOWIMAGE||"hover"!==y&&"over"!==y)?0===e.models.length?(u=i.render(d),l=i.render(c,{layout_html:u}),p.find(".commerce-elements-wrapper").html(l)):b=!0:(u=i.render(h),l=i.render(c,{layout_html:u}),p.find(".commerce-elements-wrapper").html(l)),b?t.isUndefined(s[f])&&t.isUndefined(s[g])&&t.isUndefined(s[m])&&t.isUndefined(s[v])?(l=this.renderLayout(e),p.find(".commerce-layout-wrapper").html(l),this.maxPage>1&&a.resetPagination(p.find(".product-pagination"),this.$initialPaginationEl),this.afterRerenderContentField(n,o,r)):this.rerenderCategories(p,n,r):this.afterRerenderContentField(n,o,r)}.bind(this))},paginationCallback:function(e,t){"singlerow"!==this.propertiesModel.LAYOUT&&e.find(".pagination__overlay").show(),this.fetchModelsPage(this.propertiesModel,t).done(this.renderItemsPage.bind(this,e))},fetchModelsPage:function(e,t){var i=e.SEQUENCE,n=parseInt(e.CATSPERPAGE),r=t*n,s=this.getContentField();return o.execute("loading:start","categories-element::pagination-fetch"),o.request("categories-element:pagination:fetch",s.ucfid,i,r,n).always(o.execute.bind(o,"loading:stop","categories-element::pagination-fetch")).then(function(e){return e.data})},openSequenceSelectDialog:function($super,e){o.execute("categories-element:select-categories",{origin:"empty-element",ucfid:e.ucfid,sequence:JSON.parse(e.getProperty("<!SEQUENCE!>").property_result),imageData:JSON.parse(e.getProperty("<!IMAGEDATA!>").property_result)})},shouldFetchModels:function($super,e,i){var n=e.getProperty("<!SEQUENCE!>").ucfpid,o=e.getProperty("<!CATSPERPAGE!>").ucfpid;return!t.isUndefined(i[n])||!t.isUndefined(i[o])},rerenderCategories:function(e,t,i){var n=parseInt(this.propertiesModel.CATSPERPAGE),o=this.propertiesModel.SEQUENCE;this.maxPage=Math.ceil(o.length/n);var r=this.renderModels(t);e.html(r),this.afterRerenderContentField(t,e.get(0),i)}});return r.register("90123933",p),p}),_wAMD.define("ui-framework/js/components/alert",["jquery","./base-view","./overlay","./panel"],function(e,t,i,n,o){var r=t.extend(e.extend({},i.Mixin,{className:"alert",template:"<div class='alert__content'>\n	{{#title}}\n		<h2 class='alert__title'>\n			{{title}}\n		</h2>\n	{{/title}}\n	{{#message}}\n	    <div class='alert__paragraph {{#messageAlignment}}alert__paragraph--text-{{messageAlignment}}{{/messageAlignment}}'>\n		    {{message}}\n	    </div>\n	{{/message}}\n	{{#messageHtml}}\n		<div class='alert__paragraph {{#messageAlignment}}alert__paragraph--text-{{messageAlignment}}{{/messageAlignment}}'>\n			{{{messageHtml}}}\n		</div>\n	{{/messageHtml}}\n</div>\n<div class='alert__footer'>\n	{{{proceedButtonHtml}}}\n	{{{cancelButtonHtml}}}\n</div>",zIndex:9999,isModal:!0,hAlignment:"center",vAlignment:"center",messageAlignment:"center",vAlignmentTopClassName:"alert--v-top",vAlignmentCenterClassName:"alert--v-center",proceedText:"OK",isProceedEnabled:!0,isCancelEnabled:!0,buttonEvents:{"click .js-proceed-btn":"proceed","click .js-cancel-btn":"cancel"},getRenderData:function(){return{title:this.queryOption("title"),message:this.queryOption("message"),messageHtml:this.queryOption("messageHtml"),messageAlignment:this.queryOption("messageAlignment"),proceedButtonHtml:this.renderProceedButtonHtml(),cancelButtonHtml:this.queryOption("cancelButton")||this.queryOption("cancelText")?this.renderCancelButtonHtml():""}},render:function(){t.prototype.render.call(this),this.delegateEvents(e.extend({},this.buttonEvents,this.events)),this.$contentEl=this.$(".alert__content"),this.$footerEl=this.$(".alert__footer"),this.$proceedEl=this.$(".js-proceed-btn"),this.$cancelEl=this.$(".js-cancel-btn"),this.renderContent(this.$contentEl),this.renderFooter(this.$footerEl)},renderContent:function(e){},renderFooter:function(e){},setProceedButtonEnabled:function(e){this.isProceedEnabled=e,this.$proceedEl.toggleClass("is-inactive",!e),e||this.$proceedEl.blur()},setCancelButtonEnabled:function(e){this.isCancelEnabled=e,this.$cancelEl.toggleClass("is-inactive",!e),e||this.$cancelEl.blur()},resetFocus:function(){this.$proceedEl.focus()},proceed:function(){var e=this;return this.isProceedEnabled?this._trigger("before:proceed").then(function(){return e.close()}).then(function(){e._trigger("proceed")}):void 0},cancel:function(){var e=this;return this.isCancelEnabled?this._trigger("before:cancel").then(function(){return e.close()}).then(function(){e._trigger("cancel")}):void 0},promise:function(){var t=e.Deferred();return this.once("proceed",function(){t.resolve()}),this.once("cancel",function(){t.reject()}),t.promise()}}));return r.alert=function(e){var t=e instanceof r?e:new r(e);return t.open(),t.promise()},n.prototype.alert=function(e){var t=e instanceof r?e:new r(e);return this.openOverlay(t,{vAlignment:"top"}),t.promise()},r}),_wAMD.define("editor-site-shared/build/elements/SectionElement",["editor-site-shared/build/elements/LegacyElement","editor-site-shared/ui/constants","editor-site-shared/build/elements/Element","editor/sections/utils","ui-framework/js/components/alert","editor/build/themes/data"],function(e,t,i,n,o,r){var s=window.Class.create(e,{stopDrag:function(e,t,i){i||n.pageHasDroppableSections(r.currentThemeData.page_type_templates[window.currentPageType],window.currentPageKind)||o.alert({parent:"#orbitDialogContainer",title:_W.utl("sections.dialogs.SectionsUnsupported_title"),message:_W.utl("sections.dialogs.SectionsUnsupported_message")})}});return i.register(t.SECTION_ELEMENT,s),s}),_wAMD.define("editor-site-shared/build/elements/ElementContext",["jquery","underscore","legacy/weebly_element_utils","editor-site-shared/build/elements/Element","editor-site-shared/build/elements/LegacyElement","editor-site-shared/build/elements/FormElement","editor-site-shared/build/elements/ButtonElement","editor-site-shared/build/elements/MultiColumnElement","editor-site-shared/build/elements/SocialElement","editor-site-shared/build/elements/AudioElement","editor-site-shared/build/elements/MapElement","editor-site-shared/build/elements/SearchElement","editor-site-shared/build/elements/SpacerElement","editor-site-shared/build/elements/VideoElement","editor-site-shared/build/elements/ImageElement","editor-site-shared/build/elements/TextElement","editor-site-shared/build/elements/CommerceProduct","editor-site-shared/build/elements/CustomHTMLElement","editor-site-shared/build/elements/ReadMoreElement","editor-site-shared/build/elements/ImageTextElement","editor-site-shared/build/elements/PlatformElement","editor-site-shared/build/elements/ContentAreaElement","editor-site-shared/build/elements/ProductsElement","editor-site-shared/build/elements/CategoriesElement","editor-site-shared/build/elements/SectionElement"],function(e,t,i,n){function o(){function o(e){var o=i.getElementObject(e),r=!1,s=!1;return o?(s=!0,o.context&&o.context!==a&&(r=!0,delete o.context.elementsByID[o.id])):o=n.load(e,a),a.elementsByID[o.id]=o,t.each(o.content_fields,function(i){if(r&&delete o.context.contentFieldsByID[i.ucfid],a.contentFieldsByID[i.ucfid]=i,s&&e.content_fields){var n=t.findWhere(e.content_fields,{ucfid:i.ucfid});n&&n.content&&(i.content=n.content)}}),r&&(o.context=a),o}function r(e){return e.map(function(e){return o(e,a)})}function s(n){var o=i.getElementObject(n);return t.each(o.content_fields,function(e){delete a.contentFieldsByID[e.ucfid]}),delete a.elementsByID[o.id],e("#inside_"+o.id).remove(),o.unrender(),o}var a=this;a.elementsByID={},a.contentFieldsByID={},a.loadElement=o,a.loadElements=r,a.deleteElement=s}return o}),_wAMD.define("editor-site-shared/build/areas/Area",["underscore","w-global","config","editor-site-shared/build/GenericLoader","editor-site-shared/relay","site/editor/relay-constants"],function(e,t,i,n,o,r){function s(){return"weebly-area-"+l++}var a=Class.create({tagName:"div",initialize:function(e,t){this.type=e.type,this.name=e.name||"",this.data=ensureObject(e.data),this.attrs={},this.context=t,this.name==this.type&&(this.name=""),this.elID||(this.elID=s())},getHTML:function(){return"<"+this.tagName+" id='"+this.elID+"' class='weebly-area weebly-"+this.type+"-area'>"+this.getInnerHTML()+"</"+this.tagName+">"},beforeRender:function(){},getInnerHTML:function(){return""},afterRender:function(){if(this.el){var e=t.view.isMobileView;e&&this.data.mobileHidden||!e&&this.data.hidden?this.el.hide():this.el.show()}},render:function(){this.beforeRender(),this.el.innerHTML=this.getInnerHTML(),this.afterRender()},rerender:function(){var e=this.el;e&&this.unrender(),this.beforeRender(),this.el=e,this.el.innerHTML=this.getInnerHTML(),this.afterRender()},save:function(n){"text"==this.type&&o.trigger(r.EVENTS.AREA_TEXT_EDITING_END,this.type,this.name,this.data.text),i.chromeless||new Ajax.Request(window.ajax,{parameters:{pos:"savearea",page_id:this.context.pageID||"",area_type:this.type,area_name:this.name,area_data:Object.toJSON(this.data),extra_data:n?Object.toJSON(n):"",cookie:document.cookie,token:t.RequestToken},onSuccess:function(){if(-1!==["search","social","text"].indexOf(this.type)){var t=e.result(this.data,"hidden")?"hide_area":"show_area";o.execute("analytics:track:event","site",t,this.type)}}.bind(this)})},hide:function(){this.el&&this.el.hide?this.el.hide():o.execute("area:hideArea",this.type,this.name,this.context===t.siteContext),t.view.isMobileView?this.data.mobileHidden=!0:this.data.hidden=!0,this.save()},show:function(){this.el?this.el.show():o.execute("area:showArea",this.type,this.name,this.context===t.siteContext),t.view.isMobileView?delete this.data.mobileHidden:delete this.data.hidden,this.save()},reposition:function(){},unrender:function(){},replaceArea:function(e){var t=new Element("div");t.innerHTML=this.getHTML(),this.el=t.down(),e.replace(this.el)}}),l=1;return n.call(a,"type"),a.getNewElID=s,t.Area=a,a}),_wAMD.define("tpl!sections/element-area.tpl",[],function(){return'<ul id="{{elID}}" class="weebly-content-area {{classNames}}">\n	{{& elements}}\n</ul>'}),_wAMD.define("tpl!sections/element-area-wrapper.tpl",[],function(){return'<div id="{{elID}}" class="{{classNames}}">\n	{{& innerHtml}}\n</div>\n'}),_wAMD.define("tpl!sections/empty-messages/empty.tpl",[],function(){return'<div id="empty-message-standard" class="empty-element-message">\n	<div class="empty-message-inner">\n		{{#tl}}templates.sections.empty-messages.empty_1{{/tl}}\n	</div>\n</div>\n'}),_wAMD.define("tpl!sections/empty-messages/blog.tpl",[],function(){return'<div id="empty-message" class="empty-element-message">\n	<div id="empty-message-inner">\n		{{#tl}}templates.sections.empty-messages.blog_1{{/tl}}\n	</div>\n</div>\n'}),_wAMD.define("tpl!sections/empty-messages/layouts.tpl",[],function(){return'<div id="empty-message" class="{{^has_sections}}layout-chooser{{/has_sections}} empty-element-message" data-content-area="{{content_area}}" data-layout-section-id="{{layout_section_id}}">\n	{{^has_sections}}\n		<div class="w-ui">\n			<button class="choose-a-layout btn-flat btn-flat-outline btn-flat-light">\n				{{#tl}}templates.sections.empty-messages.layouts_1{{/tl}}\n			</button>\n		</div>\n		<div class="or-separator">\n			{{#tl}}templates.sections.empty-messages.layouts_2{{/tl}}\n		</div>\n		<div id="empty-message-inner">\n			{{#tl}}templates.sections.empty-messages.layouts_3{{/tl}}\n		</div>\n	{{/has_sections}}\n	{{#has_sections}}\n		<span style="display: none;">\n			<div id="empty-message-inner">\n				{{#tl}}templates.sections.empty-messages.layouts_3{{/tl}}\n			</div>\n		</span>\n	{{/has_sections}}\n</div>\n'}),_wAMD.define("tpl!sections/empty-messages/product.tpl",[],function(){return'<div id="empty-message" class="wsite-com-empty-long-description inside empty-message">\n	<div id="empty-message-inner">\n		{{#tl}}templates.sections.empty-messages.product_1{{/tl}}\n		<div class="empty-message-line2"></div>\n	</div>\n</div>\n'}),_wAMD.define("site/editor/areas/mixins/ElementAreaMixin",["legacy/weebly_element_utils"],function(e){var t={addColumn:function(t,i,n,o,r){var s=e.getElementObject(t),a=o?o:r;return s?void s.addColumn(i,n,a):!1}};return t}),_wAMD.define("editor-site-shared/build/areas/ElementArea",["jquery","underscore","w-global","mustache","config","site/editor/app","editor-site-shared/ui/context","editor-site-shared/ui/constants","editor/build/ui/weebly_view","editor/page-manager/pages","tpl!sections/element-area.tpl","tpl!sections/element-area-wrapper.tpl","tpl!sections/empty-messages/empty.tpl","tpl!sections/empty-messages/blog.tpl","tpl!sections/empty-messages/layouts.tpl","tpl!sections/empty-messages/product.tpl","editor-site-shared/build/areas/Area","site/editor/areas/mixins/ElementAreaMixin","editor/sections/utils","editor/build/themes/data"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p,f,m,g,v,b,y){var w=window.Class.create(g,v,{initialize:function($super,e,t){$super(e,t),this.template=d,this.isFooter="content"===this.type&&"footer"===this.name,this.isBlogArea="blog"==this.context.kind&&currentBlog.postId||this.elID&&this.elID.indexOf("sidebar")>-1,this.isMain()&&(this.elID="secondlist"),this.elements=t.loadElements(e.elements),r.vent.on("editor:elements:changed",this.addOrRemoveEmptyMessage,this)},unrender:function(){r.vent.off("editor:elements:changed",this.addOrRemoveEmptyMessage,this)},getHTML:function(){var e=this.getInnerHTML(),t={elID:this.elID,classNames:this.getWrapperClassNames(),innerHtml:e};return n.render(u,t)},getWrapperClassNames:function(){var e=["weebly-area","wsite-elements"];return"footer"==this.name||"footer"==this.type?e.push("wsite-footer"):e.push("wsite-not-footer"),"platform"==this.name&&e.push("wsite-platform-area"),e.join(" ")},getInnerHTML:function(){var e={elID:"",classNames:this.getClassNames(),elements:""},t=this.elements;return"secondlist"!==this.elID&&(e.elID=this.innerElID?this.innerElID:this.elID),t.length?this.elements.each(function(t){e.elements+=t.renderHTML(!1)+"\n"}):e.elements=this.insertEmptyMessage(),n.render(d,e)},getClassNames:function(){var e="";return this.isFooter&&(e+="weebly-footer-list"),e},insertEmptyMessage:function(){var t="";if(this.isMain()&&"blog"!==this.context.kind){var i=c.getPage(window.currentPage);if(!i||"splash"==i.get("layout")||l.isMobileView||o.chromeless)t=n.render(h,{});else{var r={layout_section_id:this.sectionId,content_area:this.name,has_sections:this.hasSections()};t=n.render(f,r)}}else"store"==this.context.kind&&e("#wsite-com-area-product").length?t=n.render(m,{}):"blog"==this.context.kind&&(t=n.render(p,{}));return t},isEmpty:function(){return 0===this.elements.length},addOrRemoveEmptyMessage:function(){if(!this.el)return this;var e=!1;return e=this.isEmpty()?this.addEmptyMessage():this.removeEmptyMessage(),e&&r.vent.trigger("editor:elements:changed"),this},getListElement:function(){if(!this.el)return e();var t=e(this.el);return t.is("ul")||(t=t.find("ul")),t},getEmptyMessage:function(){var e=this.getListElement();return e.find("#empty-message, .empty-element-message").eq(0)},removeEmptyMessage:function(){var e=this.getEmptyMessage();return e.length?(e.remove(),!0):!1},addEmptyMessage:function(){var e=this.getListElement(),t=this.getEmptyMessage();if(e.length&&!t.length){var i=this.insertEmptyMessage();if(i){e.append(i);var n=e.closest(".wsite-section");return b.resizeEmptyMessage(n),!0}}return!1},relocateElement:function(t,i){var n,o,r=e("#inside_"+t.id);this.elements.splice(i,0,t),n="UL"===this.el.nodeName?e(this.el):e(this.el).find("> ul, div > ul").first(),n.find("#empty-message, .empty-element-message").eq(0).remove(),o=n.children("li").eq(i),o.length?o.before(r):n.append(r)},addElement:function(t,i){this.spliceExistingElements([t]);var n=this.context.loadElement(t);if(this.elements.splice(i,0,n),!s.inEditorContext()){var o;o=n.li?n.li:n.renderHTML(!1);var r,a;r="UL"===this.el.nodeName?e(this.el):e(this.el).find("> ul, div > ul").first(),r.find("#empty-message, .empty-element-message").eq(0).remove(),a=r.children("li").eq(i);var l;a.length?(a.before(o),l=a.prev()):(r.append(o),l=r.children().last()),this.removeEmptyColumns(),!n.li&&n.afterAdd&&n.afterAdd(l[0]),this.afterAddElement&&this.afterAddElement()}},removeEmptyColumns:function(){e("#"+this.elID+" .wsite-multicol-li").each(function(){var t=e(this),i=t.prop("id").replace("inside_",""),n=window.getElementObject(i);n.removeEmptyColumns()})},removeElement:function(e){var t=this.context.deleteElement(e);this.spliceElement(t.id),this.afterRemoveElement()},removeAllElements:function(){this.elements.forEach(function(e){this.context.deleteElement(e.id)}.bind(this)),this.elements.length=0,s.inEditorContext()||this.addOrRemoveEmptyMessage()},spliceExistingElements:function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.columns)for(var n=0;n<i.columns.length;n++){var o=i.columns[n];this.spliceExistingElements(o)}this.spliceElement(i.id,!0)}},replaceElement:function(e,t){t=[].concat(t);var i=this.findElement(this.elements,e.id);if(i){var n=i.list,o=i.index;n.splice.apply(n,[o,1].concat(t))}},spliceElement:function(e,t){var i=this.findElement(this.elements,e,t);return i?i.list.splice(i.index,1)[0]:null},findElement:function(e,i,n){var o;return t.any(e,function(e,t,r){if(e.id==i)return o={element:e,index:t,list:r},!0;if(n)return!1;var s;if(e.columns)for(var a=0;a<e.columns.length;a++){var l=e.columns[a];if(s=this.findElement(l,i))return o=s,!0}return e.children&&(s=this.findElement(e.children,i))?(o=s,!0):void 0}.bind(this)),o||null},afterRemoveElement:function(){if(this.removeEmptyColumns(),0==this.elements.length){var t=e(this.el).parent().find(".weebly-content-area"),i=t.find("#secondlist-blog").first(),n=t.find(".columnlist-blog");0!==i.length?i.html(this.insertEmptyMessage()):0!==n.length?n.html(this.insertEmptyMessage()):t.html(this.insertEmptyMessage())}},moveBelow:function(t,i){var n=e("#inside_"+i.id),o=e("#inside_"+t);if(o.after(n),o.parent().hasClass("columnlist"))this.moveToColumn(i,t);else if(o.parent().hasClass("formlist"))this.moveWithinForm(i,t,!1);else{for(var r=0,s=0;s<this.elements.length;s++)if(this.elements[s].id==t){r=s;break}this.elements.splice(r+1,0,i)}this.removeEmptyColumns()},moveAbove:function(t,i){var n=e("#inside_"+i.id),o=e("#inside_"+t);if(o.before(n),o.parent().hasClass("columnlist"))this.moveToColumn(i,t,!0);else if(o.parent().hasClass("formlist"))this.moveWithinForm(i,t,!0);else{for(var r=0,s=0;s<this.elements.length;s++)if(this.elements[s].id==t){r=s;break}this.elements.splice(r,0,i)}this.removeEmptyColumns()},moveWithinForm:function(t,i,n){for(var o=n?0:1,r=e("#inside_"+i),s=r.closest(".weebly-form-container"),a=s.closest("li"),l=a.attr("id").replace("inside_",""),c=this.findElement(this.elements,l).element,d=0;d<c.children.length;d++)if(c.children[d].id==i){c.children.splice(d+o,0,t);break}},moveToColumn:function(t,i,n){var o=n?0:1,r=e("#inside_"+i).closest(".wsite-multicol-li"),s=r.attr("id").replace("inside_",""),a=this.findElement(this.elements,s).element;a.columns.each(function(e){for(var n=0;n<e.length;n++)if(e[n].id==i){e.splice(n+o,0,t);break}})},moveToArea:function(e){this.relocateElement(e,0)},afterRender:function($super){this.el=e("#"+this.elID),this.innerEl=this.el.children("#"+this.elID)[0],this.el=this.el[0],$super(),t.each(this.elements,function(t){var i=e("#inside_"+t.id)[0];i&&t.afterRender(i)})},isMain:function(){var e=!this.type||"content"===this.type,t="blog"==this.context.kind&&currentBlog.postId||this.elID&&this.elID.indexOf("sidebar")>-1,i=this.name||"store"==this.context.kind;return(e||t)&&!i},getElements:function(){return this.elements},hasSections:function(){var e=window.getPageType(currentPage,currentThemeData,i.view.isMobileView),t=y.currentThemeData.page_type_templates[e];return b.pageHasSectionsMarkup(t)&&this.isMain()}});return i.ElementArea=w,g.register(function(e){return"content"===e.type&&e.elements&&"footer"!==e.name&&e.name!==a.HEADER_SECTION_TAG_NAME&&!e.is_blog},w),w}),function(e,t){var i=[],n=function(e){function i(e){return-1!==e.indexOf("px")&&-1===e.indexOf("calc")?parseInt(e):0}var n=e.width();if(0===n){var o=e.parentsUntil(".platform-element-contents");if("HTML"!==o.eq(o.length-1).prop("tagName").toUpperCase()){var r=0;o.each(function(e){e+1!==o.length&&(r+=i(t(this).css("padding-left")),r+=i(t(this).css("padding-right")),r+=i(t(this).css("margin-left")),r+=i(t(this).css("margin-right")))}),n=Math.max(o.eq(o.length-1).width()-r,0)}}return n=n&&400>n?235>n?235:n:400},o=function(){t.each(i,function(){var e=t(this.container).parents(".wsite-html5audio"),i=n(e.parent());this.setPlayerSize(i,this.height),this.setControlsSize()})},r=function(o){function r(e,i){var n=t("#"+i.id).find("button");e.addEventListener("play",function(){n.blur()},!1),e.addEventListener("pause",function(){n.blur()},!1)}var s=t(".wsite-html5audio audio",o),a=!1;i=[],s.each(function(){var o,s=t(this),l=s.parents(".wsite-html5audio"),c=s.attr("data-track"),d=s.attr("data-artist"),u=s.attr("data-autostart");s.attr("preload","none"),u="yes"===u?!0:!1,u&&!a?a=!0:u=!1,o=n(l.parent());var h={audioWidth:o,enableKeyboard:!1,success:function(t,i,n){e.mobile_navigation&&e.mobile_navigation.resizeScreen&&e.mobile_navigation.resizeScreen(),r(t,n)}},p=s.attr("src");("undefined"==typeof p||null===p||""==p||"/"==p.charAt(p.length-1))&&(h.type="audio/mp3"),u&&(h.success=function(e,t,i){i&&i.play&&("native"===e.pluginType&&i.load(),r(e,i),i.play())});var f=new mejs.MediaElementPlayer(s,h);i.push(f);var m=l.find(".mejs-container");if(m.length>0){var g=c&&c.length>0,v=d&&d.length>0,b='<div class="wsite-mejs-track">';g&&v?b+='<span class="wsite-mejs-title">'+c+'</span><span class="wsite-mejs-track-sep"> - </span><span class="wsite-mejs-artist">'+d+"</span></div>":g?b+='<span class="wsite-mejs-title">'+c+"</span></div>":v?b+='<span class="wsite-mejs-artist">'+d+"</span></div>":b="",m.append(b)}})};t(function(){return e.EDITOR?void editorApp.vent.on("themeRendered",o):(r(),o(),void t(window).load(o))}),e.MediaElement={},e.MediaElement.init=r}(Weebly,Weebly.jQuery),_wAMD.define("legacy/mediaelement/media_element_renderer",["editor/app"],function(e){return function(){var t;return t||e.Weebly.MediaElement}}(this)),_wAMD.define("editor-site-shared/build/areas/BlogArea",["jquery","underscore","w-global","config","editor/sections/utils","editor-site-shared/build/areas/Area","editor-site-shared/build/areas/ElementArea","legacy/mediaelement/media_element_renderer","legacy/slideshow-jq"],function(e,t,i,n,o,r,s,a,l){function c(e){return e=e.replace(/wSlideshow\.render\((\{.*?\})\)/g,function(e,t){var i=t;return i=i.replace(/images:\}$/,"images:[]}"),i=i.evalJSON(),
l.generateHTML(i.elementID,i),setTimeout(function(){whenThemeCSSLoaded(function(){l.init(i.elementID)})},0),""}),n.chromeless&&(e=e.replace(/(['"\(])\s*(\/uploads|weebly\/)/gi,"$1http://"+configSiteName+"$2"),e=e.replace(/(['"'\(])\s*\/\//gi,"$1http://")),e}var d=Class.create(r,{initialize:function($super,e,t){$super(e,t),this.elID="secondlist",this.template=e.template,e.main_elements&&(this.main=new s({elements:e.main_elements},t)),e.sidebar_elements&&(this.sidebar=new s({elements:e.sidebar_elements},t))},getHTML:function(){return"<div id='"+this.elID+"' class='weebly-area wsite-not-footer'>"+this.getInnerHTML()+"</div>"},getInnerHTML:function(){return"<ul class='weebly-content-area'>"+c(this.template)+"</ul>"},afterRender:function($super){$super();var t,i=(currentPage.replace(/^(\d+).*/,"$1"),this.main);i?(i.elID=e(".blog-content").children('[id$="-blog"]').attr("id"),i.el=$(i.elID),i.innerElID="secondlist-blog",i.beforeRender(),i.el.innerHTML="<div>"+i.getInnerHTML()+"</div>",i.afterRender(),$("secondlist-blog").removeClassName("weebly-content-area").setStyle({margin:0,padding:0,width:"100%","min-height":"400px",position:"relative"})):(t=e(this.el),a.init(t));var o=this.sidebar,r=$$(".blog-sidebar .column-blog");o&&r.length&&(o.elID=r[0].id,o.el=$(o.elID),o.beforeRender(),o.el.innerHTML='<div class="blog-sidebar-separator">'+o.getInnerHTML()+"</div>",o.afterRender(),$(o.el).down().down().removeClassName("weebly-content-area").addClassName("columnlist-blog").setStyle({margin:0,padding:0})),n.chromeless&&e("#blog-navigation, #blog-navigation-placeholder").hide()},unrender:function(){this.main&&this.main.unrender(),this.sidebar&&this.sidebar.unrender()}});return t.each(["addColumn","addElement","removeEmptyColumns","removeElement","spliceExistingElements","replaceElement","spliceElement","findElement","moveBelow","moveAbove","moveToColumn","insertEmptyMessage"],function(e){d.prototype[e]=function(){if(this.main)return this.main[e].apply(this.main,arguments);if(this.sidebar)return this.sidebar[e].apply(this.sidebar,arguments)}}),i.BlogArea=d,r.register(function(e){return e.is_blog===!0},d),d}),_wAMD.define("site/editor/build/droppable",["jquery","underscore","site/editor/app","editor-site-shared/build/elements/FormElement","site/editor/ui/ElementSpotlight","legacy/weebly_element_utils","legacy/weebly_utils"],function(e,t,i,n,o){function r(){s(),e(l()).addClass("weebly-area-active"),window.repositionElements()}function s(){e(f.topLevelDroppables).removeClass("weebly-area-active"),a()}function a(){f.topLevelDroppables.length=0,f.allDroppables.length=0}function l(){var t,i=o.getCurrent();return t=i?"UL"===i.container.context.tagName?i.container.filter(".weebly-content-area, .formlist").eq(0).get():i.container.find("ul").filter(".weebly-content-area, .formlist").eq(0).get():Weebly.pageContext&&"blog"===Weebly.pageContext.kind?Weebly.pageContext.post_id&&"0"!=Weebly.pageContext.post_id?e("#secondlist-blog").eq(0).get():e(".columnlist-blog,.weebly-area:not(.weebly-spotlighted, #secondlist, .wsite-platform-area) .weebly-content-area").get():e(".weebly-area:not(.weebly-spotlighted, .wsite-platform-area) .weebly-content-area, .wsite-custom-content, .wsite-com-long-description").get(),a(),f.topLevelDroppables.push.apply(f.topLevelDroppables,t),f.allDroppables.push.apply(f.allDroppables,f.topLevelDroppables),f.allDroppables.push.apply(f.allDroppables,u()),f.allDroppables.push.apply(f.allDroppables,h()),f.topLevelDroppables}function c(e,t){return t.depth-e.depth}function d(){return{element:this,depth:e(this).parents().length}}function u(){var i,o=[];i=n.isEditing?e(f.topLevelDroppables).find(".columnlist"):e(f.topLevelDroppables).find(".columnlist:not(.formlist .columnlist)");var r=i.map(d).get().sort(c);return o.push.apply(o,t.pluck(r,"element")),o}function h(){var t=e(f.topLevelDroppables).find(".content-area-element .content-area-list");return t}function p(t){for(var i=0;i<f.topLevelDroppables.length;i++)if(e.contains(f.topLevelDroppables[i],t))return f.topLevelDroppables[i];return null}var f={topLevelDroppables:[],allDroppables:[]};return i.vent.on({"editor:middle editor:spotlight:open editor:spotlight:close":r}),f.buildTopLevelDroppables=l,f.getElementsInDroppable=function(t){return t instanceof e&&(t=t[0]),e(p(t)).find("li.inside")},f}),_wAMD.define("site/editor/ui/spotlights",["jquery","editor-site-shared/relay","site/editor/ui/Spotlight","site/editor/build/droppable","editor-site-shared/ui/constants"],function(e,t,i,n,o){function r(t,n){n||(n="content");var o={paddingHeight:0,paddingWidth:0,opacity:.65};return s(),t=e.extend({},o,t),l=new i(t),l.show(),c=n,l}function s(e){e&&e!==c||(l&&l.destroy(),a&&a.setAnts(!1))}var a,l,c,d={};return d.showContentAreaSpotlights=function(t){var o={elements:n.topLevelDroppables,ants:!0,roundedCorners:!0,zIndex:9};a=i.getCurrent(),a?a.setAnts(!0):(t=t||{},t=e.extend({},o,t),r(t,"content"))},d.showSectionSpotlights=function(e){var t={elements:e,opacity:.2,interval:o.SECTION_SPOTLIGHT_REPOSITION_INTERVAL,borderWidths:"2 0 2 0",borderColor:"#78C7FB",maskColor:"#000",zIndex:16};return r(t,"section")},d.hideContentAreaSpotlights=function(){s("content")},d.hideSectionSpotlights=function(){s("section")},t.commands.setHandlers({showContentAreaSpotlights:d.showContentAreaSpotlights,hideContentAreaSpotlights:d.hideContentAreaSpotlights}),d}),_wAMD.define("site/editor/ui/utils",["jquery","underscore"],function(e,t){var i={},n=null;return i.shakeElement=function(t){return n||(n=e.Deferred()),t.hasClass("shake")||t.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t.removeClass("shake"),n.resolve(),n=null}).addClass("shake"),n.promise()},i.scrollToElement=function(e,t){return i.scrollTo({height:e.height(),offset:e.offset()},t)},i.scrollTo=function(i,n){var o=e.Deferred(),r=e(window),s=r.innerHeight();n=t.defaults(n||{},{centerFallback:"top",paddingTop:0,paddingBottom:0,dontScrollWhenFocused:!1});var a=i.height+n.paddingTop+n.paddingBottom,l=i.offset,c=l.top-n.paddingTop;0>c&&(c=0);var d=c-s/2;if(s>a||!n.centerFallback?d+=a/2:"bottom"===n.centerFallback&&(d+=a),0>d&&(d=0),n.dontScrollWhenFocused){var u=r.scrollTop(),h=c+a>u+s,p=u>c;if(!h&&!p)return o.reject(),o.promise()}var f=e("body, html");return d===!1||f.is(":animated")?o.reject():f.animate({scrollTop:d+"px"},n).promise().done(function(){o.resolve()}),o.promise()},i}),_wAMD.define("site/editor/sections/view/BackgroundSwitcher",["ui-framework/js/components/panel-switcher"],function(e){var t=e.extend({height:260,dialogOptions:{title:_W.utl("javascript.editor.sections.view.BackgroundSwitcher_1"),backLink:!1},initialize:function(e){_.each(e.panels,function(e){this.listenTo(e,{"section:switcher:panel:labels:hide":function(){this.hideNewLabels()}})}.bind(this))},hideNewLabels:function(){this.$el.find(".js-new-label").remove(),this.switcher.collection.invoke("set","textHtml",null)}});return t}),_wAMD.define("tpl!sections/section-advanced-options.tpl",[],function(){return'{{#show_save_to_pages}}\n<button class="js-manage btn-control section-manage-bg-button">\n	<span class="btn-control__label">{{#tl}}sections.dialogs.SectionOptions_save_to_pages_label{{/tl}}</span>\n	<span class="btn-control__sublabel js-connect-page-count"></span>\n</button>\n{{/show_save_to_pages}}\n\n{{#show_alignment}}\n<div class="form-control form-control--selector section-content-align">\n	<div class="form-control__item">{{#tl}}sections.dialogs.SectionOptions_align_label{{/tl}}</div>\n	<div class="form-control__item--right">\n		<div class="inline-selector">\n			<span class="inline-selector__option{{#align_top_selected}} is-selected{{/align_top_selected}}" data-alignment="top">\n				<span class="icon">bodytop</span>\n			</span>\n			<span class="inline-selector__option{{#align_middle_selected}} is-selected{{/align_middle_selected}}" data-alignment="middle">\n				<span class="icon">bodycenter</span>\n			</span>\n			<span class="inline-selector__option{{#align_bottom_selected}} is-selected{{/align_bottom_selected}}" data-alignment="bottom">\n				<span class="icon">bodybottom</span>\n			</span>\n		</div>\n	</div>\n</div>\n{{/show_alignment}}\n'}),_wAMD.define("site/editor/sections/view/SectionAdvancedOptionsPanel",["jquery","mustache","editor-site-shared/relay","ui-framework/js/components/combo-dialog","tpl!sections/section-advanced-options.tpl"],function(e,t,i,n,o){var r=n.Panel.extend({title:_W.utl("sections.dialogs.SectionOptions_advanced_title"),events:{"click [data-alignment]":"onAlignmentClick","click .js-manage":"manageBackground"},templateHelpers:function(){var e=this.options.fallbackAlignment,t=this.options.dialog.section.getBaseStyle();return this.options.baseSetting&&this.options.baseSetting["vertical-align"]?e=this.options.baseSetting["vertical-align"]:t["vertical-align"]&&(e=t["vertical-align"]),{show_save_to_pages:this.options.showSaveToPages,show_alignment:this.options.showAlignment,align_top_selected:"top"===e,align_middle_selected:"middle"===e,align_bottom_selected:"bottom"===e}},renderContent:function(e){e.html(t.render(o,this.templateHelpers())),this.options.showSaveToPages&&(this.connectedPages=[],this.updateConnectedPageCount())},updateConnectedPageCount:function(){Weebly.Section.RPC.HeaderSection.getConnectedHeaderBackgroundPages(window.currentPage).done(function(e){this.connectedPages=e;var t=e?Math.max(e.length-1,0):0;this.$(".js-connect-page-count").text(t)}.bind(this))},onAlignmentClick:function(t){var i=e(t.currentTarget),n=i.data("alignment"),o=this.$("[data-alignment]");o.removeClass("is-selected"),i.addClass("is-selected"),this.options.dialog.trigger("section:control:baseStyle:set",{"vertical-align":n})},manageBackground:function(){i.request("backgroundConnector:open",{pages:this.connectedPages,currentPage:window.currentPage}).then(function(e,t){return Weebly.Section.RPC.HeaderSection.setConnectedHeaderBackgroundPages(window.currentPage,e,t)}).done(function(){this.updateConnectedPageCount()}.bind(this))}},{hasVisibleOptions:function(e){return e.showAlignment||e.showSaveToPages}});return r}),_wAMD.define("tpl!sections/section-effects-options.tpl",[],function(){return'<ul class="group group--flush group--hoverable js-effects-container">\n	{{#effects}}\n		<li class="group__item">\n			<label class="form-control form-control--radio-check form-control--borderless">\n				<input type="radio" name="section-effects" value="{{value}}"{{#selected}} checked{{/selected}}/>\n				<span class="form-control__indicator"></span>\n				{{label}}\n			</label>\n		</li>\n	{{/effects}}\n</ul>\n'}),_wAMD.define("site/editor/sections/view/SectionEffectsOptionsPanel",["underscore","mustache","ui-framework/js/components/combo-dialog","tpl!sections/section-effects-options.tpl"],function(e,t,i,n){var o=i.Panel.extend({title:_W.utl("sections.dialogs.SectionOptions_effects_title"),events:{'click [name="section-effects"]':"onClick"},templateHelpers:function(){return{effects:this.effects}},initialize:function(t){this.section=t.section,this.effects=[],e.each(this.section.SECTION_BACKGROUND_EFFECTS,function(i){-1!==i.available.indexOf(t.panelType)&&this.effects.push(e.clone(i))},this);var i=[],n=this.section.getBackgroundEffects(),o=Object.keys(n);o.length&&(i=e.filter(this.effects,function(e){return-1!==o.indexOf(e.value)})),i.length||(i=e.where(this.effects,{value:"none"})),i.forEach(function(e){e.selected=!0})},renderContent:function(e){e.html(t.render(n,this.templateHelpers()))},onClick:e.throttle(function(e){var t=e.currentTarget.value,i={};"none"!==t&&(i[t]={}),this.section.setBackgroundEffects(i)},200)});return o}),_wAMD.define("tpl!sections/section-options.tpl",[],function(){return'<ul class="group group--hoverable group--flush">\n	<li class="group__item">\n		<button class="btn-control btn-control--borderless js-effects">\n			<span class="btn-control__label">\n				{{#tl}}sections.dialogs.SectionOptions_effects_button{{/tl}}\n			</span>\n			<span class="btn-control__sublabel">{{selected_effects}}</span>\n		</button>\n	</li>\n	{{#show_advanced}}\n		<li class="group__item">\n			<button class="btn-control btn-control--borderless js-advanced">\n				<span class="btn-control__label">\n					{{#tl}}sections.dialogs.SectionOptions_advanced_button{{/tl}}\n				</span>\n			</button>\n		</li>\n	{{/show_advanced}}\n</ul>\n\n'}),_wAMD.define("site/editor/sections/view/SectionOptionsView",["jquery","underscore","backbone-all","site/editor/sections/view/SectionAdvancedOptionsPanel","site/editor/sections/view/SectionEffectsOptionsPanel","ui-framework/js/components/combo-dialog","tpl!sections/section-options.tpl"],function(e,t,i,n,o,r,s){var a=i.Marionette.ItemView.extend({template:s,events:{"click .js-effects":"onEffectsClick","click .js-advanced":"onAdvancedClick"},templateHelpers:function(){var e=this.options.section;return{show_advanced:n.hasVisibleOptions(this.options),selected_effects:function(){var i=e.getBackgroundEffects(),n=Object.keys(i);if(1===n.length){var o=t.findWhere(e.SECTION_BACKGROUND_EFFECTS,{value:n[0]});return t.result(o,"label",_W.utl("sections.effects.none"))}return n.length>1?n.length:_W.utl("sections.effects.none")}}},onAdvancedClick:function(){this.options.dialog.pushPanel(new n(e.extend({forwardLink:!1,backLink:{isDirectional:!0}},this.options)))},onEffectsClick:function(){this.options.dialog.pushPanel(new o({section:this.options.dialog.section,panelType:this.options.panelType,forwardLink:!1,backLink:{isDirectional:!0}}))}});return a}),_wAMD.define("tpl!sections/new-label.tpl",[],function(){return'<span class="label label--new js-new-label">\n    {{#tl}}templates.sections.new-label_1{{/tl}}\n</span>\n'}),_wAMD.define("site/editor/sections/view/BaseBackgroundPanel",["mustache","ui-framework/js/components/panel-switcher","site/editor/sections/view/SectionOptionsView","tpl!sections/new-label.tpl"],function(e,t,i,n){var o=t.Panel.extend({initialize:function(e){this.section=this.options.section},newLabelTpl:function(){return e.render(n)},renderOptions:function(){this.dialog=this.panelSwitcher.dialog.comboDialog;var e=new i({panelType:this.value,dialog:this.dialog,section:this.section,showAlignment:this.options.showAlignment,fallbackAlignment:this.options.fallbackAlignment,baseSetting:this.options.baseSetting,showSaveToPages:this.options.showSaveToPages});this.$(".bgpanel__body").append(e.render().$el)},renderContent:function(e){e.html('<div class="bgpanel__body"></div>'),this.renderOptions()},hideNewLabels:function(){this.trigger("section:switcher:panel:labels:hide")}});return o}),_wAMD.define("tpl!sections/dialogs/change-bgimage-panel.tpl",[],function(){return'{{#image}}\n	<div class="bgpanel__header" style="background-image: url({{image.url}});">\n		<div class="sbg__btns-row">\n			<button class="btn--action replace-image">{{#tl}}templates.sections.change-bgimage.replace{{/tl}}</button>\n			<button class="btn--action change-image">{{#tl}}templates.sections.change-bgimage.edit{{/tl}}</button>\n		</div>\n	</div>\n{{/image}}\n\n{{^image}}\n	<div class="bgpanel__header">\n		<button class="btn--action change-image">{{#tl}}templates.sections.change-bgimage.add{{/tl}}</button>\n	</div>\n{{/image}}\n<div class="bgpanel__body"></div>\n'}),_wAMD.define("site/editor/sections/view/image/ImageBackgroundPanel",["mustache","editor-site-shared/relay","site/editor/sections/view/BaseBackgroundPanel","tpl!sections/dialogs/change-bgimage-panel.tpl"],function(e,t,i,n){var o=i.extend({title:_W.utl("javascript.editor.sections.view.image.ImageBackgroundPanel_1"),icon:"bgtypeimage",value:"imageBackground",events:{"click .change-image":"onClickChangeImage","click .replace-image":"onClickReplaceImage"},initialize:function(e){i.prototype.initialize.apply(this,arguments),this.selected=e.section.userSelectedBackground()&&e.section.hasBackgroundImage(),this.trackingContext=e.isHeaderSection?"header_change_image":"section_change_image"},beforeRender:function(){this.section.hadBackgroundImage()&&(this.section.setTypeToImage(),this.trigger("section:control:background:extend",this.section.getImageEditorObject()))},renderContent:function(t){this.beforeRender();var i=this.section.getBackgroundContent();t.html(e.render(n,i)),this.renderOptions()},onClickChangeImage:function(e){this.trigger("section:control:background:open",this.section.id,!1),this.afterOnClickImage()},onClickReplaceImage:function(e){this.trigger("section:control:background:open",this.section.id,!0),this.afterOnClickImage()},afterOnClickImage:function(){this.trigger("dialog:close"),t.execute("analytics:track:event","editor.elements",this.trackingContext)}});return o}),_wAMD.define("tpl!sections/dialogs/change-bgcolor-panel.tpl",[],function(){return'<div class="bgpanel__header" {{#background-color}} style="background-color: {{background-color}}; {{/background-color}}">\n	<button class="btn--action add-color">{{#tl}}templates.sections.change-bgcolor-panel_1{{/tl}}</button>\n</div>\n<div class="bgpanel__body"></div>\n'}),_wAMD.define("site/editor/sections/view/color/ColorBackgroundPanel",["mustache","editor-site-shared/relay","site/editor/sections/view/BaseBackgroundPanel","tpl!sections/dialogs/change-bgcolor-panel.tpl"],function(e,t,i,n){var o=i.extend({title:_W.utl("javascript.editor.sections.view.color.ColorBackgroundPanel_1"),icon:"bgtypecolor",value:"colorBackground",events:{"click .add-color":"onClickChangeColor"},initialize:function(e){i.prototype.initialize.apply(this,arguments),this.selected=e.section.userSelectedBackground()&&e.section.hasBackgroundColor(),this.trackingContext=e.isHeaderSection?"header_change_color":"section_change_color",e.showNewLabels&&(this.titleHtml=this.newLabelTpl())},onEnter:function(){this.options.showNewLabels&&(this.hideNewLabels(),this.options.showNewLabels=!1)},renderContent:function(t){this.beforeRender();var i=this.section.getBackgroundContent();t.html(e.render(n,i)),this.renderOptions()},beforeRender:function(){this.section.hadBackgroundColor()&&this.section.setTypeToColor()},onClickChangeColor:function(e){this.trigger("panel:color:push"),t.execute("analytics:track:event","editor.elements",this.trackingContext)}});return o}),_wAMD.define("site/editor/sections/model/BackgroundVideo",["jquery","underscore","backbone"],function(e,t,i){var n=i.Model.extend({defaults:{video_type:null,video_url:"",video_id:null,loop:1,autoplay:1,mute:1,background_url:""},initialize:function(e,i){var n=t.result(e,"video_url","");if(!this.has("video_type")){var o=n.match(/youtube/)||n.match(/vimeo/);this.set("video_type",t.first(o)),this.setIdAndBackground()}"upload"===this.get("video_type")&&this.set("encoding_done",t.result(e,"encoding_done")!==!1)},reset:function(){return this.set(this.defaults),this},setIdAndBackground:function(){var e=this.get("video_type");switch(e){case"youtube":this.set("video_id",this.getYoutubeVideoId()),this.set("background_url","https://img.youtube.com/vi/"+this.get("video_id")+"/0.jpg");break;case"vimeo":this.set("video_id",this.getVimeoVideoId()),this.fetchVimeoBackground()}},fetchVimeoBackground:function(){var t=this,i="https://vimeo.com/api/v2/video/"+t.get("video_id")+".json";e.getJSON(i,function(e){t.set("background_url",e[0].thumbnail_large)})},getYoutubeVideoId:function(){var e=this.get("video_url"),t=e.match(/v=([a-zA-Z0-9_\-]+)/);return t?t[1]:null},getVimeoVideoId:function(){var e=this.get("video_url"),t=e.match(/\/([0-9]+)$/);return t?t[1]:null}});return n}),_wAMD.define("tpl!sections/dialogs/videos/video-gallery.tpl",[],function(){return'<div class="video-gallery__snapshot" style="background-image: url({{snapshot_url}})" {{#show_hovertip}}data-hover-tip="" data-hover-tip-text="{{shortname}}" data-hover-tip-wrap-class-name="ui-framework" data-hover-tip-follow="true"{{/show_hovertip}}>\n</div>\n'}),_wAMD.define("site/editor/sections/view/video/item-view/VideoGalleryItemView",["backbone-all","mustache","ui-framework/js/components/hover-tip","tpl!sections/dialogs/videos/video-gallery.tpl"],function(e,t,i,n){var o=e.Marionette.ItemView.extend({tagName:"section",className:"dialog__section js-video",initialize:function(e){this.showHovertip=!1,e.showHovertip&&(this.showHovertip=!0,i.initialize())},getTemplate:function(){return t.compile(n)},templateHelpers:function(){return{show_hovertip:this.showHovertip}},events:{"click @ui.snapshot":"select","mouseenter @ui.snapshot":"showGif","mouseleave @ui.snapshot":"hideGif"},ui:{snapshot:".video-gallery__snapshot"},select:function(){this.trigger("select",this.model)},showGif:function(){var e=this.model.get("gif_url");if(e)if(this.showing=!0,this.loaded||this.loading)this.loaded&&this.ui.snapshot.css("background-image",'url("'+e+'")');else{this.loading=!0;var t=document.createElement("img");t.src=e,t.onload=function(){this.showing&&this.ui.snapshot.css("background-image",'url("'+e+'")'),this.loaded=!0,this.loading=!1,this.$el.removeClass("loading")}.bind(this),this.$el.addClass("loading")}},hideGif:function(){this.showing=!1,this.ui.snapshot.css("background-image",'url("'+this.model.get("snapshot_url")+'")')}});return o}),_wAMD.define("site/editor/sections/view/video/item-view/VideoGalleryView",["jquery","backbone-all","site/editor/app","site/editor/sections/view/video/item-view/VideoGalleryItemView","site/editor/sections/model/BackgroundVideo","editor/sections/utils","site/published/sections/utils","editor-site-shared/ui/constants"],function(e,t,i,n,o,r,s,a){var l=t.Marionette.CollectionView.extend({itemView:n,itemViewOptions:function(){return{showHovertip:!!this.options.showHovertip}},itemEvents:{select:"previewVideo"},initialize:function(){this.comboDialog=this.options.dialog.comboDialog,this.collection=this.options.galleryVideos,this.comboDialog.$contentInnerEl.find(".dialog__scroll").on("scroll",this.onScroll.bind(this)),this.onScrollStopDebounced=_.debounce(this.onScrollStop.bind(this),200)},onScroll:function(){this.el.classList.add("dialog__scrolling"),this.onScrollStopDebounced()},onScrollStop:function(){this.el.classList.remove("dialog__scrolling")},onRender:function(){var e=550;this.comboDialog.setHeight(e),this.comboDialog.trigger("change:height",e)},previewVideo:function(t,i){var n=i.model,s=this.comboDialog,a=s.section,l=s.video=new o({video_type:"gallery",video_url:n.get("video_url"),video_id:n.get("video_url"),background_url:n.get("snapshot_url")}),c=l.has("video_id")?l.toJSON():{},d=e(a.generateSelector());r.previewBackgroundVideo(d,c)}});return l}),_wAMD.define("tpl!page-layouts/site-editor/encoding-failure.tpl",[],function(){return'<div class="dialog__section">\n	{{#tl}}templates.page-layouts.site-editor.encoding_failure_retry_message{{/tl}}\n</div>\n\n<button class="btn--action js-confirm">{{#tl}}templates.page-layouts.site-editor.encoding_failure_retry_confirm{{/tl}}</button>\n'}),_wAMD.define("site/editor/sections/view/video/EncodingFailedDialog",["mustache","ui-framework/js/components/dialog","tpl!page-layouts/site-editor/encoding-failure.tpl"],function(e,t,i){var n=t.extend({title:_W.utl("javascript.editor.sections.view.video.encoding_failure_title"),isModal:!1,events:{"click .js-confirm":"confirm"},renderContent:function(t){t.html(e.render(i))},confirm:function(){this.close()}});return n}),_wAMD.define("tpl!sections/dialogs/videos/video-upload.tpl",[],function(){return'{{#videoFileName}}\n	<fieldset class="input-group el-options-url-group">\n		<div class="input-group__content">\n			<div class="input-group__row">\n				<div class="input-group__item form-control form-control__el-options--input js-upload">\n					<input type="text" readonly="readonly" value="{{videoFileName}}">\n					<button class="btn--link action-btn__el-options">{{#tl}}templates.sections.dialogs.videos.video-upload_1{{/tl}}</button>\n				</div>\n			</div>\n		</div>\n	</fieldset>\n{{/videoFileName}}\n{{^videoFileName}}\n<div class="placeholder--video__upload js-upload">\n	<div class="icon icon--large">videoholder64</div>\n	<button class="btn btn--action placeholder--video__upload-btn">{{#tl}}templates.sections.dialogs.videos.video-upload_2{{/tl}}</button>\n	<div class="warning__video-size">{{#tl}}templates.sections.dialogs.videos.video-upload_3{{/tl}}</div>\n</div>\n{{/videoFileName}}'}),_wAMD.define("site/editor/sections/view/video/item-view/VideoUploadView",["jquery","mustache","editor-site-shared/relay","backbone-all","site/editor/sections/model/BackgroundVideo","site/editor/sections/view/video/EncodingFailedDialog","tpl!sections/dialogs/videos/video-upload.tpl"],function(e,t,i,n,o,r,s){var a=n.Marionette.ItemView.extend({ui:{uploadVideo:".js-upload"},events:{"click @ui.uploadVideo":"triggerUploadVideo"},initialize:function(){this.comboDialog=this.options.dialog.comboDialog,this.dialog=this.options.dialog,this.listenTo(this.dialog,{leave:function(){this.stopListening(i)}}),this.listenTo(i,{"encoding:failure":function(e){e===this.dialog.comboDialog.section.id&&this.dialog.pushDialog(new r)}})},onRender:function(){var e=325;this.comboDialog.setHeight(e),this.comboDialog.trigger("change:height",e)},getTemplate:function(){return t.compile(s)},templateHelpers:function(){var e="upload"===this.model.get("video_type")?this.model.get("video_url"):void 0;return{videoFileName:e?e.replace(/^.*[\\\/]/,""):void 0}},saveVideo:function(t){var i=e(t.currentTarget),n=i.closest(".video-gallery__snapshot").data("snapshot-url"),r=e(t.currentTarget).attr("src"),s=this.comboDialog.section,a=this.comboDialog.video=new o({video_url:r,video_type:"gallery",video_id:r,background_url:n}),l=a.has("video_id")?a.toJSON():{};s.setBackgroundVideo(l)},triggerUploadVideo:function(){this.videoUploadCallbackName="section:bgvideo:upload:chosen:"+this.cid,this.videoErrorCallbackName="section:bgvideo:upload:error:"+this.cid,this.videoAbortCallbackName="section:bgvideo:upload:abort:"+this.cid,i.commands.setHandler(this.videoUploadCallbackName,this.onVideoUploaded.bind(this)),i.commands.setHandler(this.videoErrorCallbackName,this.onVideoUploadError.bind(this)),i.commands.setHandler(this.videoAbortCallbackName,this.removeRelayHandlers.bind(this)),i.execute("determineUpload","video","","","",this.videoUploadCallbackName,this.videoErrorCallbackName,this.videoAbortCallbackName)},onVideoUploaded:function(e,t){var i=t.match(/^%%QUEUEID:([^%]*)%%([^%]*)%%$/);if(!i)return void this.onVideoUploadError(t);this.removeRelayHandlers();var n="/uploads/"+i[2],r=n.replace(/\.[^.]+$/,".jpg");this.comboDialog.video=new o({video_type:"upload",video_url:n,video_id:n,background_url:r,encoding_done:!1});var s=this.comboDialog.video.toJSON();this.comboDialog.section.setBackgroundVideo(s),this.model.set(s),this.render(),this.trigger("video:upload:uploaded")},onVideoUploadError:function(){this.removeRelayHandlers(),this.comboDialog.currentPanel.alert({title:_W.utl("javascript.editor.sections.view.video.error_title"),message:_W.utl("javascript.editor.sections.view.video.error_message")})},removeRelayHandlers:function(){i.commands.removeHandlers([this.videoUploadCallbackName,this.videoErrorCallbackName,this.videoAbortCallbackName])}});return a}),_wAMD.define("tpl!sections/dialogs/videos/video-url.tpl",[],function(){return'	<section class="dialog__section">\n		<label class="form-control">\n			<span class="form-control__label-text">Insert URL</span>\n			<input type="text" class="bgvideo__input" placeholder="http://www.youtube.com/watch?v=dQw4w9WgXcQ" value="{{videoUrl}}">\n		</label>\n\n		<label class="form-control">\n			<button class="btn--primary add-video">{{#tl}}templates.sections.add-video-panel_1{{/tl}}</button>\n		</label>\n	</section>\n'}),_wAMD.define("site/editor/sections/view/video/item-view/VideoUrlView",["jquery","mustache","backbone-all","site/editor/sections/model/BackgroundVideo","tpl!sections/dialogs/videos/video-url.tpl"],function(e,t,i,n,o){var r=i.Marionette.ItemView.extend({events:{"click .add-video":"saveVideo"},initialize:function(e){this.comboDialog=e.dialog.comboDialog},getTemplate:function(){return t.compile(o)},templateHelpers:function(){var e=this.model.get("video_type"),t="vimeo"===e||"youtube"===e?this.model.get("video_url"):void 0;return{videoUrl:t}},saveVideo:function(){var e=this.$(".bgvideo__input").val(),t=this.comboDialog.section;if(e){var i=this.comboDialog.video=new n({video_url:e});this.model.set(this.comboDialog.video.toJSON());var o=i.has("video_id")?i.toJSON():{};t.setBackgroundVideo(o),this.comboDialog.popPanel()}}});return r}),_wAMD.define("tpl!sections/dialogs/videos/video-upload-gallery-header.tpl",[],function(){return'<div class="user-uploaded">\n	<span class="dialog__section form-control__label-text">{{#tl}}templates.sections.dialogs.videos.previously-uploaded-videos{{/tl}}</span>\n</div>'}),_wAMD.define("site/editor/sections/view/video/item-view/VideoUploadGalleryHeaderView",["jquery","mustache","backbone-all","tpl!sections/dialogs/videos/video-upload-gallery-header.tpl"],function(e,t,i,n){var o=i.Marionette.ItemView.extend({template:n});return o}),_wAMD.define("tpl!page-layouts/site-editor/upgrade.tpl",[],function(){return'{{^no_image}}\n	<div class="upgrade page-layout-option page-layout-{{name}}" data-id="{{page_layout_id}}">\n	{{#show_background}}\n		<img class="background-image static-background" src="{{{preview_image_with_bg}}}" data-id="{{page_layout_id}}">\n	{{/show_background}}\n	{{^show_background}}\n		<img class="background-image static-background" src="{{{preview_image}}}" data-id="{{page_layout_id}}">\n	{{/show_background}}\n	</div>\n{{/no_image}}\n\n<div class="section-layout-upgrade-desc">\n	<h2>{{header}}</h2>\n	<div class="content">{{content}}</div>\n	<button class="layout-upgrade__btn btn--rounded btn--secondary">\n		<span class="icon">bolt</span>\n		{{#tl}}sections.layouts.apply.upgrade.upgrade{{/tl}}\n	</button>\n</div>'}),_wAMD.define("editor/sections/layouts/SectionLayoutsUpgradeView",["backbone-all","tpl!page-layouts/site-editor/upgrade.tpl"],function(e,t){var i=e.Marionette.ItemView.extend({template:t,className:"section-layout-upgrade",triggers:{"click .layout-upgrade__btn":"section:upgrade:request"},initialize:function(e){var t=this;t.section=t.options.section,t.listenTo(e.listenTo,{"billing:upgrade:restrictions:refreshed":t.postUpgradeActions})},templateHelpers:function(){var e=this,t=!0;e.section&&(t=!e.section.isCustomized());var i={show_background:t,no_image:e.options.noImage};switch(e.options.restrictionID){case"63260230":case"67748238":case"82970842":i.header=_W.utl("sections.layouts.apply.upgrade.header.audio"),i.content=_W.utl("sections.layouts.apply.upgrade.content.audio");break;case"63419613":i.header=_W.utl("sections.layouts.apply.upgrade.header.hd_video"),i.content=_W.utl("sections.layouts.apply.upgrade.content.hd_video");break;case"82023692":i.header=_W.utl("sections.layouts.apply.upgrade.header.file_upload"),i.content=_W.utl("sections.layouts.apply.upgrade.content.file_upload");break;case"90122486":i.header=_W.utl("sections.layouts.apply.upgrade.header.search"),i.content=_W.utl("sections.layouts.apply.upgrade.content.search");break;case"section_video_backgrounds":i.header=_W.utl("sections.layouts.apply.upgrade.header.video_background"),i.content=_W.utl("sections.layouts.apply.upgrade.content.video_background")}return i},postUpgradeActions:function(){this.trigger("section:upgrade:complete")}});return i}),_wAMD.define("tpl!sections/dialogs/videos/add-video-panel.tpl",[],function(){return'<section class="dialog__section dialog__section--white">\n	<div class="btn-group btn-group__add-video">\n		<button data-type="gallery">{{#tl}}templates.sections.dialogs.videos.add-video-panel_1{{/tl}}</button>\n		<button data-type="upload">{{#tl}}templates.sections.dialogs.videos.add-video-panel_2{{/tl}}</button>\n		{{#has_url}}<button data-type="url">{{#tl}}templates.sections.dialogs.videos.add-video-panel_3{{/tl}}</button>{{/has_url}}\n	</div>\n</section>\n\n{{#show_paywall}}\n	<div class="message message--upgrade upgrade-video-message">\n		<a href="#" class="message__content" data-icon-before="bolt">\n			{{#tl}}sections.dialogs.video_upgrade_message{{/tl}}\n		</a>\n	</div>\n{{/show_paywall}}\n\n<div class="add-video-container">\n</div>\n';
}),_wAMD.define("site/editor/sections/view/video/item-view/AddVideoView",["jquery","backbone-all","editor-site-shared/relay","site/editor/sections/view/video/item-view/VideoGalleryView","site/editor/sections/view/video/item-view/VideoUploadView","site/editor/sections/view/video/item-view/VideoUrlView","site/editor/sections/view/video/item-view/VideoUploadGalleryHeaderView","editor/sections/layouts/SectionLayoutsUpgradeView","editor/sections/utils","ui-framework/js/components/dialog","editor-site-shared/ui/constants","tpl!sections/dialogs/videos/add-video-panel.tpl"],function(e,t,i,n,o,r,s,a,l,c,d,u){var h=t.Marionette.ItemView.extend({ui:{videoUpgradeMessage:".upgrade-video-message",videoSwitchers:".btn-group__add-video > button",videoButtonGroup:".btn-group__add-video",videoViewContainer:".add-video-container",videoUrlButton:"[data-type=url]"},events:{"click @ui.videoSwitchers":"toggleViews"},triggers:{"click @ui.videoUpgradeMessage":"gallery:upgrade"},heights:{"default":350,max:550,perVideo:110},dialogOptions:{hasContentPadding:!1,backLink:{text:_W.utl("sections.layouts.cancel")},forwardLink:{text:_W.utl("sections.layouts.save")},onBeforeClose:function(){this.contentView.cancel()},onForward:function(){this.contentView.save()}},template:u,templateHelpers:function(){var e=this.model.get("video_type");return{has_url:"vimeo"===e||"youtube"===e,show_paywall:this.options.showPaywall}},onRender:function(){var e=this;e.comboDialog=e.dialog.comboDialog,this.dialog.setForwardEnabled(!1);var t=e.model.has("video_id")?_W.utl("javascript.editor.sections.view.video.AddVideoPanel_1"):_W.utl("javascript.editor.sections.view.video.AddVideoPanel_2"),i=e.model.get("video_type");e.dialog.setTitle(t),i?"vimeo"===i||"youtube"===i?(this.prepareVideoView("url"),this.ui.videoUrlButton.addClass("is-active")):(this.prepareVideoView(i),this.ui.videoButtonGroup.find("[data-type="+i+"]").addClass("is-active")):(this.prepareVideoView("gallery"),this.ui.videoButtonGroup.find("[data-type=gallery]").addClass("is-active"))},toggleViews:function(t){var i=e(t.currentTarget),n=i.data("type");return"upload"===n&&this.options.showPaywall?void this.showPaywall():(this.ui.videoSwitchers.removeClass("is-active"),i.addClass("is-active"),void this.prepareVideoView(n))},prepareVideoView:function(i){var n=this,o=e.Deferred();switch(this.ui.videoViewContainer.empty(),n.currentView&&n.currentView.close(),i){case"gallery":n.galleryVideos?o.resolve():(n.dialog.setIsLoading(!0),Weebly.Editor.RPC.BackgroundVideo.getBackgroundVideosByCategory("all").done(function(e){n.dialog.setIsLoading(!1),n.galleryVideos=new t.Collection(e),o.resolve()})),o.done(function(){n.renderVideoViewByType(i)});break;case"upload":case"url":n.renderVideoViewByType(i)}},renderVideoViewByType:function(e){var i,s={model:this.model,dialog:this.dialog};switch(e){case"gallery":s.galleryVideos=this.galleryVideos,this.currentView=new n(s),this.listenTo(this.currentView,{"itemview:select":function(){this.hasPreviewed=!0,this.dialog.setForwardEnabled(!0)}}),this.listenTo(s.model,{"change:video_id":function(){this.trigger("gallery:selected")}});break;case"upload":this.currentView=new o(s),this.listenTo(this.currentView,{"video:upload:uploaded":function(){this.trigger("gallery:close")}});break;case"url":this.currentView=new r(s)}if(i=this.currentView.render().$el,this.ui.videoViewContainer.append(i),this.dialog.comboDialog.applyScrollbar(),"upload"===e){var a=this;Weebly.Editor.RPC.BackgroundVideo.getBackgroundVideosByCategory("uploaded").done(function(e){a.uploadedVideos=new t.Collection(e),a.renderUploadedVideoView()})}},renderUploadedVideoView:function(){var e,t={model:this.model,dialog:this.dialog,galleryVideos:this.uploadedVideos,showHovertip:!0},i=t.galleryVideos.length;if(i){this.uploadGalleryHeaderView=new s,e=this.uploadGalleryHeaderView.render().$el,this.ui.videoViewContainer.append(e),this.uploadGalleryView=new n(t),this.listenTo(this.uploadGalleryView,{"itemview:select":function(){this.hasPreviewed=!0,this.dialog.setForwardEnabled(!0)}}),this.listenTo(t.model,{"change:video_id":function(){this.trigger("gallery:selected")}}),e=this.uploadGalleryView.render().$el;var o=this.getViewHeight(i);this.comboDialog.setHeight(o),this.comboDialog.trigger("change:height",o),this.ui.videoViewContainer.append(e)}},getViewHeight:function(e){e||(e=0);var t=this.heights["default"];return t+=this.heights.perVideo*e,t<=this.heights.max?t:this.heights.max},cancel:function(){this.hasPreviewed&&this.trigger("gallery:reset")},save:function(){var e=this.comboDialog.video,t=e.has("video_id")?e.toJSON():{};this.options.showPaywall?this.showPaywall(t):(this.comboDialog.section.setBackgroundVideo(t),this.trigger("gallery:close"))},showPaywall:function(e){var t=new a({noImage:!0,restrictionID:"section_video_backgrounds",listenTo:i});t.on({"section:upgrade:request":function(){this.trigger("gallery:upgrade")},"section:upgrade:complete":function(){e&&(this.comboDialog.section.setBackgroundVideo(e),this.trigger("gallery:close"))}},this);var n=new c({title:_W.utl("sections.layouts.apply.upgrade.title"),backLink:{text:_W.utl("sections.layouts.apply.upgrade.cancel"),action:"close"},isModal:!1,content:t});this.dialogPanel.pushDialog(n)}});return h}),_wAMD.define("site/editor/ui/sitemask",["jquery","underscore","editor-site-shared/relay","site/editor/ui/utils"],function(e,t,i,n){var o={},r={};return r.initialize=function(n,r){var s=e("#_editor-ui-mask").addClass("show");return r=r||{},r.zIndex&&s.css("zIndex",r.zIndex),t.each(n,function(e,t){s.on(t+".sitemask",function(t){e.apply(o,arguments)}),i.on("editormask:"+t,e,o)}),o},r.start=function(e,n){var o={};t.each(e,function(e){o[e]=function(){i.trigger("sitemask:"+e)}}),r.initialize(o,n)},o.show=function(e,t){i.execute("editor:mask:start",Object.keys(e)),r.initialize(e,t)},o.hide=function(t){return e("#_editor-ui-mask").removeClass("show").attr("style","").off(".sitemask"),i.off(null,null,o),t||i.execute("editor:mask:hide"),o},o.scrollTo=function(t){if(t instanceof e){var i=t.offset(),o=t.outerHeight();t={top:i.top,left:i.left,height:o}}else{var r=e(window).scrollTop()+t.top;t.top=r}return n.scrollTo({height:t.height,offset:{top:t.top,left:t.left}},{dontScrollWhenFocused:!0})},i.commands.setHandlers({"site:mask:start":r.start,"site:mask:hide":o.hide.bind(o,!0)}),i.reqres.setHandlers({"site:mask:scrollTo":o.scrollTo}),o}),_wAMD.define("tpl!sections/dialogs/videos/initial-bgvideo-panel.tpl",[],function(){return'<div class="bgpanel__header" style="background-image: url({{background_url}});">\n	<ul class="group group--flush group--hoverable">\n		<li class="group__item">\n			<button class="btn-control btn-control--borderless add-video">\n				<span class="btn-control__label">{{#tl}}templates.sections.dialogs.videos.initial-bgvideo-panel_1{{/tl}}</span>\n				<span class="btn-control__sublabel"></span>\n			</button>\n		</li>\n	</ul>\n</div>\n<div class="bgpanel__body"></div>\n'}),_wAMD.define("tpl!sections/dialogs/videos/change-bgvideo-panel.tpl",[],function(){return'<div class="bgpanel__header" {{#encoding_done}}style="background-image: url({{background_url}});"{{/encoding_done}}>\n	{{#encoding_done}}\n		<button class="btn--action change-video">{{#tl}}templates.sections.change-bgvideo-panel_1{{/tl}}</button>\n	{{/encoding_done}}\n	{{^encoding_done}}\n		<p>{{#tl}}templates.sections.change-bgvideo-panel_encoding{{/tl}}</p>\n	{{/encoding_done}}\n</div>\n<div class="bgpanel__body">\n	<ul class="group group--flush">\n		<li class="group__item">\n			<button class="btn-control btn-control--borderless btn-control--no_padding btn-control--preview_video js-preview">\n				<span class="btn-control__label preview-label">{{#tl}}templates.sections.dialogs.videos.change-bgvideo-panel_preview-video{{/tl}}</span>\n				<span class="video-control preview icon">play</span>\n				<span class="video-control stop icon">stop</span>\n			</button>\n		</li>\n	</ul>\n	<ul class="group group--flush">\n		<li class="group__item">\n			<div class="form-row form-row--borderless">\n				<div class="form-row__left">{{#tl}}templates.sections.change-bgvideo-panel_4{{/tl}}</div>\n				<div class="form-row__right">\n					<label class="toggle toggle__loop">\n						<input type="checkbox" name="loop" {{#loop}}checked="checked"{{/loop}}>\n						<span class="toggle__option"></span>\n					</label>\n				</div>\n			</div>\n		</li>\n	</ul>\n</div>\n'}),_wAMD.define("site/editor/sections/view/video/VideoBackgroundPanel",["jquery","mustache","site/editor/app","editor-site-shared/relay","ui-framework/js/components/combo-dialog","site/editor/sections/view/BaseBackgroundPanel","site/editor/sections/model/BackgroundVideo","site/editor/sections/view/video/item-view/AddVideoView","editor/sections/utils","site/published/sections/utils","site/editor/ui/sitemask","editor-site-shared/ui/constants","tpl!sections/dialogs/videos/initial-bgvideo-panel.tpl","tpl!sections/dialogs/videos/change-bgvideo-panel.tpl","ui-framework/js/components/alert"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p){var f=r.extend({icon:"bgtypevideo",title:_W.utl("javascript.editor.sections.view.video.VideoBackgroundPanel_1"),iconAfterText:function(){return _W.Restrictions.hasAccess("section_video_backgrounds")?void 0:"bolt"},value:"videoBackground",events:{"click .add-video":"onClickChangeVideo","click .change-video":"onClickChangeVideo","change .toggle__loop input":"onToggle","click .js-preview":"toggleVideoPreview"},initialize:function(e){r.prototype.initialize.apply(this,arguments),this.selected=e.section.userSelectedBackground()&&e.section.hasBackgroundVideo(),this.trackingContext=e.isHeaderSection?"header_change_video":"section_change_video",e.showNewLabels&&(this.titleHtml=this.newLabelTpl())},onEnter:function(){var e=this.section,t=this.$(".videobg__header");this.$preview=this.$(".js-preview"),this.listenTo(this.options.video,{change:function(i){e.setBackgroundVideo(i.toJSON()),t.css("background-image","url("+i.get("background_url")+")")}}),this.listenTo(i.vent,{"section:background:video:render":this.resetVideo}),this.listenTo(n,{"encoding:success encoding:failure":function(t){t===e.id&&(this.options.video.unset("encoding_done"),this.render())}}),this.options.showNewLabels&&(this.hideNewLabels(),this.options.showNewLabels=!1)},beforeRender:function(){this.section.hadBackgroundVideo()?this.section.setTypeToVideo():"video"===this.section.getBackgroundType()&&this.options.$sectionEl.css({"background-color":"","background-image":"url("+this.section.getVideoBackgroundSnapshot()+")"}),this.options.video=new s(this.section.getBackgroundContent())},renderContent:function(e){this.beforeRender();var i=this.options.video,n=i.has("video_id")?p:h,o=i.toJSON();o.encoding_done=o.encoding_done!==!1,e.html(t.render(n,o)),this.renderOptions()},onClickChangeVideo:function(){var e=this.dialog;if(!e.$el.children().eq(0).hasClass("is-transitioning")){var t=new a({model:this.options.video,showPaywall:!_W.Restrictions.hasAccess("section_video_backgrounds")}),i=new o.Panel({content:t});this.listenTo(t,{"gallery:selected":this.playVideoPreview,"gallery:close":function(){s(),this.trigger("dialog:close"),d.hide()}.bind(this),"gallery:upgrade":function(){n.request("billing:upgrade:prompt",{restrictionID:"section_video_backgrounds",restrictionType:"feature",refer:"element_trial_upgrade"}).done(function(e){var t=JSON.parse(e.responseText);t&&"successBillingPremium"===t.action&&s()})},"gallery:reset":function(){var e=this.options.$sectionEl,t=this.section.getBackgroundContent();l.previewBackgroundVideo(e,t)},close:function(){s(),d.hide()}});var r=new o({initialPanel:i,size:"medium",height:550});r.section=this.section,e.currentPanel.pushDialog(r);var s=function(){e.onBeforeClose=e.savedOnBeforeClose,delete e.savedOnBeforeClose};e.savedOnBeforeClose=e.onBeforeClose,e.onBeforeClose=function(){return!1},d.show({mousedown:function(){this.scrollTo(r.$el).always(function(){setTimeout(function(){e.shake()},100)})}},{zIndex:parseInt(e.$el.css("z-index"))-1}),this.listenTo(r,{"change:height":function(e){this.trigger("dialog:set:height",e)}.bind(this),"before:close":function(){this.trigger("dialog:set:height",this.options.baseHeight)}.bind(this)}),n.execute("analytics:track:event","editor.elements",this.trackingContext)}},onLeave:function(){this.destroyVideoBackground()},onToggle:function(t){var i=e(t.currentTarget),n=i.attr("name"),o=this.options.video;o.set(n,i.attr("checked")?1:0)},resetVideo:function(){var e=this.$preview.hasClass("js-playing"),t=this.options.$sectionEl.data("has-video");t&&this.destroyVideoBackground(),e&&this.toggleVideoPreview()},toggleVideoPreview:function(){var e=this.options.$sectionEl;e.data("in-preview")?this.stopVideoPreview():this.playVideoPreview()},stopVideoPreview:function(){var e=this.options.$sectionEl,t=e.data("has-video");if(t&&e.data("in-preview")){c.toggleVideoBackground(e);var i=_W.utl("javascript.editor.sections.view.video.VideoBackgroundPanel_preview-video");e.removeData("in-preview"),this.$preview.removeClass("js-playing"),this.$(".preview-label").text(i)}},playVideoPreview:function(){this.stopVideoPreview();var e=this.options.$sectionEl,t=e.data("has-video");t?c.toggleVideoBackground(e):c.applyBackgroundVideo(e,this.section.getBackgroundContent(),!0);var i=_W.utl("javascript.editor.sections.view.video.VideoBackgroundPanel_stop-video");e.data("in-preview",!0),this.$preview.addClass("js-playing"),this.$(".preview-label").text(i)},destroyVideoBackground:function(){var e=this.options.$sectionEl.hasClass(u.SECTION_BACKGROUND_VIDEO_CLASS_NAME);this.$preview.removeClass("js-playing"),this.options.$sectionEl.removeData("in-preview"),c.destroyVideoBackground(this.options.$sectionEl),e&&this.options.$sectionEl.addClass(u.SECTION_BACKGROUND_VIDEO_CLASS_NAME)}});return f}),_wAMD.define("ui-framework/js/components/model/color",["backbone"],function(e){var t=e.Model.extend({defaults:{hsv:{h:0,s:1,v:1},rgb:{},hex:""},initialize:function(e){this.on({"change:hsv":this.onChangeHsv,"change:rgb":this.onChangeRgb,"change:hex":this.onChangeHex})},toJSON:function(e){return JSON.parse(JSON.stringify(this.attributes))},set:function(t,i,n){"hsv"===t?i.h%=360:"object"==typeof t&&t.hsv&&(t.hsv.h%=360),e.Model.prototype.set.apply(this,arguments)},onChangeHsv:function(e,t){var i=this.hsv2rgb(t);this.set({rgb:i,hex:i.hex},{silent:!0})},onChangeRgb:function(e,t){this.set({hex:this.rgb2hex(t),hsv:this.rgb2hsv(t)},{silent:!0})},onChangeHex:function(e,t){this.set({rgb:this.hex2rgb(t),hsv:this.hex2hsv(t)},{silent:!0})},hsv2rgb:function(e){var t,i,n,o,r,s=e.h%360/60;r=e.v*e.s,o=r*(1-Math.abs(s%2-1)),t=i=n=e.v-r,s=~~s,t+=[r,o,0,0,o,r][s],i+=[o,r,r,o,0,0][s],n+=[0,0,o,r,r,o][s];var a=Math.floor(255*t),l=Math.floor(255*i),c=Math.floor(255*n);return{r:a,g:l,b:c,hex:"#"+(16777216|c|l<<8|a<<16).toString(16).slice(1)}},hsv2hex:function(e){return this.hsv2rgb(e).hex},rgb2hsv:function(e){var t=e.r,i=e.g,n=e.b;(e.r>1||e.g>1||e.b>1)&&(t/=255,i/=255,n/=255);var o,r,s,a;return s=Math.max(t,i,n),a=s-Math.min(t,i,n),o=0==a?null:s==t?(i-n)/a+(n>i?6:0):s==i?(n-t)/a+2:(t-i)/a+4,o=o%6*60,r=0==a?0:a/s,{h:o,s:r,v:s}},rgb2hex:function(e){return this.hsv2rgb(this.rgb2hsv(e)).hex},hex2hsv:function(e){return this.rgb2hsv(this.hex2rgb(e))},hex2rgb:function(e){return 4===e.length&&(e=this.shorthand2hex(e)),{r:parseInt(e.substr(1,2),16),g:parseInt(e.substr(3,2),16),b:parseInt(e.substr(5,2),16)}},shorthand2hex:function(e){return e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]},isHexColor:function(e){var t=/(^[0-9a-f]{6}$)|(^[0-9a-f]{3}$)/i;return t.test(e)}});return t}),!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("tillwatch",[],t):"object"==typeof exports?exports.TillWatch=t():e.TillWatch=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(12),c=n(l),d=i(15),u=n(d),h=i(10),p=n(h),f=i(13),m=n(f),g=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(i.timeout=6e4,i.interval=50,"function"!=typeof e.condition)throw new Error("You must pass in a condition function");return(0,u["default"])(i,e),i}return s(t,e),a(t,[{key:"condition",value:function(e){return!0}}]),a(t,[{key:"watch",value:function(e,t){var i=new c["default"];if(this.condition(e))return i.resolve(e),i.promise;this.observer||this.startObserving();var n=this.watchList.get(e);return n||(n=[],n.created=Date.now(),n.timeout=t,this.watchList.set(e,n)),n.push(i),i.promise}},{key:"unwatch",value:function(e,t){var i=["Unwatching",e];if(!t)return this.forDeferreds(e,function(e){return e.reject(i)});var n=this.watchList.get(e);if(n){var o=(0,p["default"])(n,function(e){return e.promise===t});if(o){var r=n.indexOf(o);n.splice(r,1),o.reject(i),0===n.length&&(this.watchList["delete"](e),this.checkWatchList())}}}}]),t}(m["default"]);e.exports=g},function(e,t,i){e.exports=!i(2)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var i=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=i)},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,i){var n=i(19);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},function(e,t,i){var n=i(7),o=i(6);e.exports=function(e){return n(o(e))}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){if(null==e)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i,n=Object(e),o=n.length>>>0,r=arguments[1],s=0;o>s;s++)if(i=n[s],t.call(r,i,s,n))return i}},function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(14),a=n(s),l=function(){function e(){o(this,e),this.watchList=new a["default"]}return r(e,[{key:"checkWatchList",value:function(){0===this.watchList.size&&this.stopObserving()}},{key:"forDeferreds",value:function(e,t){var i=this.watchList.get(e);if(i){for(var n,o=function(e){setTimeout(function(){return t(e)},0)};n=i.pop();)o(n);this.watchList["delete"](e),this.checkWatchList()}}}]),e}();t["default"]=l},function(e,t,i){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=i(42),r=function s(){var e=this;n(this,s),this.promise=new o.Promise(function(t,i){e.resolve=t,e.reject=i})};t["default"]=r},function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(11),c=n(l),d=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"startObserving",value:function(){var e=this;this.observer=window.setInterval(function(){e.watchList.forEach(function(t,i){e.condition(i)?e.forDeferreds(i,function(e){return e.resolve(i)}):Date.now()-t.created>(t.timeout||e.timeout)&&e.forDeferreds(i,function(e){return e.reject([new Error("Watching timed out"),i])})})},this.interval)}},{key:"stopObserving",value:function(){window.clearInterval(this.observer),this.observer=null}}]),t}(c["default"]);t["default"]=d},function(e,t){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(){i(this,e),this.keys=[],this.values=[],this.size=0}return n(e,[{key:"get",value:function(e){var t=this.keys.indexOf(e);return-1!==t?this.values[t]:void 0}},{key:"set",value:function(e,t){var i=this.keys.indexOf(e);return-1===i?(this.keys.push(e),this.values.push(t),void this.size++):void(this.values[i]=t)}},{key:"delete",value:function(e){var t=this.keys.indexOf(e);-1!==t&&(this.keys.splice(t,1),this.values.splice(t,1),this.size--)}},{key:"forEach",value:function(e){for(var t=0;t<this.keys.length;t++)e(this.values[t],this.keys[t])}}]),e}();t["default"]=window.Map||o},function(e,t,i){i(41),e.exports=i(5).Object.assign},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,i){var n=i(4);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,i){var n=i(9),o=i(37),r=i(36);e.exports=function(e){return function(t,i,s){var a,l=n(t),c=o(l.length),d=r(s,c);if(e&&i!=i){for(;c>d;)if(a=l[d++],a!=a)return!0}else for(;c>d;d++)if((e||d in l)&&l[d]===i)return e||d||0;return!e&&-1}}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t,i){var n=i(16);e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,o){return e.call(t,i,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,i){var n=i(4),o=i(3).document,r=n(o)&&n(o.createElement);e.exports=function(e){return r?o.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,i){var n=i(3),o=i(5),r=i(20),s=i(25),a="prototype",l=function(e,t,i){var c,d,u,h=e&l.F,p=e&l.G,f=e&l.S,m=e&l.P,g=e&l.B,v=e&l.W,b=p?o:o[t]||(o[t]={}),y=b[a],w=p?n:f?n[t]:(n[t]||{})[a];p&&(i=t);for(c in i)d=!h&&w&&void 0!==w[c],d&&c in b||(u=d?w[c]:i[c],b[c]=p&&"function"!=typeof w[c]?i[c]:g&&d?r(u,n):v&&w[c]==u?function(e){var t=function(t,i,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,n)}return e.apply(this,arguments)};return t[a]=e[a],t}(u):m&&"function"==typeof u?r(Function.call,u):u,m&&((b.virtual||(b.virtual={}))[c]=u,e&l.R&&y&&!y[c]&&s(y,c,u)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){var n=i(28),o=i(33);e.exports=i(1)?function(e,t,i){return n.f(e,t,o(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){e.exports=!i(1)&&!i(2)(function(){return 7!=Object.defineProperty(i(21)("div"),"a",{get:function(){return 7}}).a})},function(e,t,i){var n=i(31),o=i(29),r=i(32),s=i(38),a=i(7),l=Object.assign;e.exports=!l||i(2)(function(){var e={},t={},i=Symbol(),n="abcdefghijklmnopqrst";return e[i]=7,n.split("").forEach(function(e){t[e]=e}),7!=l({},e)[i]||Object.keys(l({},t)).join("")!=n})?function(e,t){for(var i=s(e),l=arguments.length,c=1,d=o.f,u=r.f;l>c;)for(var h,p=a(arguments[c++]),f=d?n(p).concat(d(p)):n(p),m=f.length,g=0;m>g;)u.call(p,h=f[g++])&&(i[h]=p[h]);return i}:l},function(e,t,i){var n=i(17),o=i(26),r=i(39),s=Object.defineProperty;t.f=i(1)?Object.defineProperty:function(e,t,i){if(n(e),t=r(t,!0),n(i),o)try{return s(e,t,i)}catch(a){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,i){var n=i(24),o=i(9),r=i(18)(!1),s=i(34)("IE_PROTO");e.exports=function(e,t){var i,a=o(e),l=0,c=[];for(i in a)i!=s&&n(a,i)&&c.push(i);for(;t.length>l;)n(a,i=t[l++])&&(~r(c,i)||c.push(i));return c}},function(e,t,i){var n=i(30),o=i(22);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,i){var n=i(35)("keys"),o=i(40);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t,i){var n=i(3),o="__core-js_shared__",r=n[o]||(n[o]={});e.exports=function(e){return r[e]||(r[e]={})}},function(e,t,i){var n=i(8),o=Math.max,r=Math.min;e.exports=function(e,t){return e=n(e),0>e?o(e+t,0):r(e,t)}},function(e,t,i){var n=i(8),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,i){var n=i(6);e.exports=function(e){return Object(n(e))}},function(e,t,i){var n=i(4);e.exports=function(e,t){if(!n(e))return e;var i,o;if(t&&"function"==typeof(i=e.toString)&&!n(o=i.call(e)))return o;if("function"==typeof(i=e.valueOf)&&!n(o=i.call(e)))return o;if(!t&&"function"==typeof(i=e.toString)&&!n(o=i.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},function(e,t,i){var n=i(23);n(n.S+n.F,"Object",{assign:i(27)})},function(e,t,i){var n;(function(e,o,r){(function(){function s(e){return"function"==typeof e||"object"==typeof e&&null!==e}function a(e){return"function"==typeof e}function l(e){X=e}function c(e){ee=e}function d(){return function(){e.nextTick(m)}}function u(){return function(){Y(m)}}function h(){var e=0,t=new ne(m),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}function p(){var e=new MessageChannel;return e.port1.onmessage=m,function(){e.port2.postMessage(0)}}function f(){return function(){setTimeout(m,1)}}function m(){for(var e=0;Z>e;e+=2){var t=se[e],i=se[e+1];t(i),se[e]=void 0,se[e+1]=void 0}Z=0}function g(){try{var e=i(46);return Y=e.runOnLoop||e.runOnContext,u()}catch(t){return f()}}function v(e,t){var i=this,n=new this.constructor(y);void 0===n[ce]&&j(n);var o=i._state;if(o){var r=arguments[o-1];ee(function(){N(o,n,r,i._result)})}else x(i,n,e,t);return n}function b(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var i=new t(y);return I(i,e),i}function y(){}function w(){return new TypeError("You cannot resolve a promise with itself")}function _(){return new TypeError("A promises callback cannot return that same promise.")}function E(e){try{return e.then}catch(t){return pe.error=t,pe}}function T(e,t,i,n){try{e.call(t,i,n)}catch(o){return o}}function C(e,t,i){ee(function(e){var n=!1,o=T(i,t,function(i){n||(n=!0,t!==i?I(e,i):O(e,i))},function(t){n||(n=!0,R(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&o&&(n=!0,R(e,o))},e)}function S(e,t){t._state===ue?O(e,t._result):t._state===he?R(e,t._result):x(t,void 0,function(t){I(e,t)},function(t){R(e,t)})}function D(e,t,i){t.constructor===e.constructor&&i===ae&&constructor.resolve===le?S(e,t):i===pe?R(e,pe.error):void 0===i?O(e,t):a(i)?C(e,t,i):O(e,t)}function I(e,t){e===t?R(e,w()):s(t)?D(e,t,E(t)):O(e,t)}function k(e){e._onerror&&e._onerror(e._result),A(e)}function O(e,t){e._state===de&&(e._result=t,e._state=ue,0!==e._subscribers.length&&ee(A,e))}function R(e,t){e._state===de&&(e._state=he,e._result=t,ee(k,e))}function x(e,t,i,n){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+ue]=i,o[r+he]=n,0===r&&e._state&&ee(A,e)}function A(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n,o,r=e._result,s=0;s<t.length;s+=3)n=t[s],o=t[s+i],n?N(i,n,o,r):o(r);e._subscribers.length=0}}function P(){this.error=null}function M(e,t){try{return e(t)}catch(i){return fe.error=i,fe}}function N(e,t,i,n){var o,r,s,l,c=a(i);if(c){if(o=M(i,n),o===fe?(l=!0,r=o.error,o=null):s=!0,t===o)return void R(t,_())}else o=n,s=!0;t._state!==de||(c&&s?I(t,o):l?R(t,r):e===ue?O(t,o):e===he&&R(t,o))}function L(e,t){try{t(function(t){I(e,t)},function(t){R(e,t)})}catch(i){R(e,i)}}function B(){return me++}function j(e){e[ce]=me++,e._state=void 0,e._result=void 0,e._subscribers=[]}function K(e){return new we(this,e).promise}function F(e){var t=this;return new t(Q(e)?function(i,n){for(var o=e.length,r=0;o>r;r++)t.resolve(e[r]).then(i,n)}:function(e,t){t(new TypeError("You must pass an array to race."))})}function H(e){var t=this,i=new t(y);return R(i,e),i}function W(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function $(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function V(e){this[ce]=B(),this._result=this._state=void 0,this._subscribers=[],y!==e&&("function"!=typeof e&&W(),this instanceof V?L(this,e):$())}function z(e,t){this._instanceConstructor=e,this.promise=new e(y),this.promise[ce]||j(this.promise),Q(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&O(this.promise,this._result))):R(this.promise,U())}function U(){return new Error("Array Methods must be provided an Array")}function q(){var e;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=e.Promise;i&&"[object Promise]"===Object.prototype.toString.call(i.resolve())&&!i.cast||(e.Promise=ye)}var G;G=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y,X,J,Q=G,Z=0,ee=function(e,t){se[Z]=e,se[Z+1]=t,Z+=2,2===Z&&(X?X(m):J())},te="undefined"!=typeof window?window:void 0,ie=te||{},ne=ie.MutationObserver||ie.WebKitMutationObserver,oe="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),re="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,se=new Array(1e3);
J=oe?d():ne?h():re?p():void 0===te?g():f();var ae=v,le=b,ce=Math.random().toString(36).substring(16),de=void 0,ue=1,he=2,pe=new P,fe=new P,me=0,ge=K,ve=F,be=H,ye=V;V.all=ge,V.race=ve,V.resolve=le,V.reject=be,V._setScheduler=l,V._setAsap=c,V._asap=ee,V.prototype={constructor:V,then:ae,"catch":function(e){return this.then(null,e)}};var we=z;z.prototype._enumerate=function(){for(var e=this.length,t=this._input,i=0;this._state===de&&e>i;i++)this._eachEntry(t[i],i)},z.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,n=i.resolve;if(n===le){var o=E(e);if(o===ae&&e._state!==de)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(i===ye){var r=new i(y);D(r,e,o),this._willSettleAt(r,t)}else this._willSettleAt(new i(function(t){t(e)}),t)}else this._willSettleAt(n(e),t)},z.prototype._settledAt=function(e,t,i){var n=this.promise;n._state===de&&(this._remaining--,e===he?R(n,i):this._result[t]=i),0===this._remaining&&O(n,this._result)},z.prototype._willSettleAt=function(e,t){var i=this;x(e,void 0,function(e){i._settledAt(ue,t,e)},function(e){i._settledAt(he,t,e)})};var _e=q,Ee={Promise:ye,polyfill:_e};i(44).amd?(n=function(){return Ee}.call(t,i,t,r),!(void 0!==n&&(r.exports=n))):"undefined"!=typeof r&&r.exports?r.exports=Ee:"undefined"!=typeof this&&(this.ES6Promise=Ee),_e()}).call(this)}).call(t,i(43),function(){return this}(),i(45)(e))},function(e,t){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(d===setTimeout)return setTimeout(e,0);if((d===i||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function r(e){if(u===clearTimeout)return clearTimeout(e);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function s(){m&&p&&(m=!1,p.length?f=p.concat(f):g=-1,f.length&&a())}function a(){if(!m){var e=o(s);m=!0;for(var t=f.length;t;){for(p=f,f=[];++g<t;)p&&p[g].run();g=-1,t=f.length}p=null,m=!1,r(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var d,u,h=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:i}catch(e){d=i}try{u="function"==typeof clearTimeout?clearTimeout:n}catch(e){u=n}}();var p,f=[],m=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];f.push(new l(e,t)),1!==f.length||m||o(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){}])}),_wAMD.define("ui-framework/js/components/onVisible",["tillwatch"],function(e){var t=new e({isVisible:function(e){return e.offsetWidth>0||e.offsetHeight>0},condition:function(e){return document.body.contains(e)&&this.isVisible(e)}});return t}),_wAMD.define("ui-framework/js/components/input-prefix",["jquery","underscore","backbone","./onVisible","./utils"],function(e,t,i,n,o){var r=i.View.extend({type:"prefix",initialize:function(e){if(0===this.$el.length)throw new Error("Please select a specific input element");if(this.$el.length>1)return this.spawnInstances(e);if("INPUT"!==this.$el.prop("tagName"))throw new Error("Please select an input element");var t=e.text||this.$el.data(this.type);if(!t)throw new Error("Please pass in the affixed text");var i=this.type+"Instance",n=this.$el.data(i);if(n)return this.remove(),n.waitTillAttached(),n;this.$el.data(i,this),this.createAffixEl(t),this.attachAffix(),this.waitTillAttached()},waitTillAttached:function(){this.waitAttach&&n.unwatch(this.el,this.waitAttach);var e=this;this.waitAttach=n.watch(this.el,6e4),this.waitAttach.then(function(){e.applyStyles()})["catch"](function(){})},spawnInstances:function(e){var t=this,i=this.$el.splice(0).map(function(i){var n=Object.create(e);return n.el=i,new t.constructor(n)});return this.remove(),i},attachAffix:function(){if(0===this.$el.parent().length)throw new Error("Cannot insert prefix because the element does not have a parent.");this.$affix.insertBefore(this.$el)},createAffixEl:function(t){this.$affix=e("<span></span>",{"class":"form-control__"+this.type,text:o.unescapeHtmlEntities(t)})},alignAffix:function(){this.$affix.css({lineHeight:this.$el.outerHeight()+"px",top:this.$el.position().top}),this.affixWidth=this.$affix.outerWidth()},applyStyles:function(){this.alignAffix(),this.elPaddingLeft=this.elPaddingLeft||+this.$el.css("padding-left").slice(0,-2),this.$affix.css("left",this.elPaddingLeft),this.$el.css("padding-left",this.affixWidth+this.elPaddingLeft)},remove:function(){return this.events=null,this.undelegateEvents(),this.$affix&&this.$affix.remove(),this.waitAttach&&n.unwatch(this.el,this.waitAttach),this.stopListening(),this}});return r}),function(e,t){"function"==typeof define&&define.amd?_wAMD.define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.Unipointer=t(e,e.EvEmitter)}(window,function(e,t){function i(){}function n(){}var o=n.prototype=Object.create(t.prototype);o.bindStartEvent=function(e){this._bindStartEvent(e,!0)},o.unbindStartEvent=function(e){this._bindStartEvent(e,!1)},o._bindStartEvent=function(t,i){i=void 0===i?!0:!!i;var n=i?"addEventListener":"removeEventListener";e.navigator.pointerEnabled?t[n]("pointerdown",this):e.navigator.msPointerEnabled?t[n]("MSPointerDown",this):(t[n]("mousedown",this),t[n]("touchstart",this))},o.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},o.getTouch=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.identifier==this.pointerIdentifier)return i}},o.onmousedown=function(e){var t=e.button;t&&0!==t&&1!==t||this._pointerDown(e,e)},o.ontouchstart=function(e){this._pointerDown(e,e.changedTouches[0])},o.onMSPointerDown=o.onpointerdown=function(e){this._pointerDown(e,e)},o._pointerDown=function(e,t){this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,this.pointerDown(e,t))},o.pointerDown=function(e,t){this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t])};var r={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"],MSPointerDown:["MSPointerMove","MSPointerUp","MSPointerCancel"]};return o._bindPostStartEvents=function(t){if(t){var i=r[t.type];i.forEach(function(t){e.addEventListener(t,this)},this),this._boundPointerEvents=i}},o._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(t){e.removeEventListener(t,this)},this),delete this._boundPointerEvents)},o.onmousemove=function(e){this._pointerMove(e,e)},o.onMSPointerMove=o.onpointermove=function(e){e.pointerId==this.pointerIdentifier&&this._pointerMove(e,e)},o.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerMove(e,t)},o._pointerMove=function(e,t){this.pointerMove(e,t)},o.pointerMove=function(e,t){this.emitEvent("pointerMove",[e,t])},o.onmouseup=function(e){this._pointerUp(e,e)},o.onMSPointerUp=o.onpointerup=function(e){e.pointerId==this.pointerIdentifier&&this._pointerUp(e,e)},o.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerUp(e,t)},o._pointerUp=function(e,t){this._pointerDone(),this.pointerUp(e,t)},o.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t])},o._pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this._unbindPostStartEvents(),this.pointerDone()},o.pointerDone=i,o.onMSPointerCancel=o.onpointercancel=function(e){e.pointerId==this.pointerIdentifier&&this._pointerCancel(e,e)},o.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerCancel(e,t)},o._pointerCancel=function(e,t){this._pointerDone(),this.pointerCancel(e,t)},o.pointerCancel=function(e,t){this.emitEvent("pointerCancel",[e,t])},n.getPointerPoint=function(e){return{x:e.pageX,y:e.pageY}},n}),function(e,t){"function"==typeof define&&define.amd?_wAMD.define("unidragger/unidragger",["unipointer/unipointer"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("unipointer")):e.Unidragger=t(e,e.Unipointer)}(window,function(e,t){function i(){}function n(){}var o=n.prototype=Object.create(t.prototype);o.bindHandles=function(){this._bindHandles(!0)},o.unbindHandles=function(){this._bindHandles(!1)};var r=e.navigator;return o._bindHandles=function(e){e=void 0===e?!0:!!e;var t;t=r.pointerEnabled?function(t){t.style.touchAction=e?"none":""}:r.msPointerEnabled?function(t){t.style.msTouchAction=e?"none":""}:i;for(var n=e?"addEventListener":"removeEventListener",o=0;o<this.handles.length;o++){var s=this.handles[o];this._bindStartEvent(s,e),t(s),s[n]("click",this)}},o.pointerDown=function(e,t){if("INPUT"==e.target.nodeName&&"range"==e.target.type)return this.isPointerDown=!1,void delete this.pointerIdentifier;this._dragPointerDown(e,t);var i=document.activeElement;i&&i.blur&&i.blur(),this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t])},o._dragPointerDown=function(e,i){this.pointerDownPoint=t.getPointerPoint(i);var n=this.canPreventDefaultOnPointerDown(e,i);n&&e.preventDefault()},o.canPreventDefaultOnPointerDown=function(e){return"SELECT"!=e.target.nodeName},o.pointerMove=function(e,t){var i=this._dragPointerMove(e,t);this.emitEvent("pointerMove",[e,t,i]),this._dragMove(e,t,i)},o._dragPointerMove=function(e,i){var n=t.getPointerPoint(i),o={x:n.x-this.pointerDownPoint.x,y:n.y-this.pointerDownPoint.y};return!this.isDragging&&this.hasDragStarted(o)&&this._dragStart(e,i),o},o.hasDragStarted=function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3},o.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t]),this._dragPointerUp(e,t)},o._dragPointerUp=function(e,t){this.isDragging?this._dragEnd(e,t):this._staticClick(e,t)},o._dragStart=function(e,i){this.isDragging=!0,this.dragStartPoint=t.getPointerPoint(i),this.isPreventingClicks=!0,this.dragStart(e,i)},o.dragStart=function(e,t){this.emitEvent("dragStart",[e,t])},o._dragMove=function(e,t,i){this.isDragging&&this.dragMove(e,t,i)},o.dragMove=function(e,t,i){e.preventDefault(),this.emitEvent("dragMove",[e,t,i])},o._dragEnd=function(e,t){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(e,t)},o.dragEnd=function(e,t){this.emitEvent("dragEnd",[e,t])},o.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},o._staticClick=function(e,t){if(!this.isIgnoringMouseUp||"mouseup"!=e.type){var i=e.target.nodeName;("INPUT"==i||"TEXTAREA"==i)&&e.target.focus(),this.staticClick(e,t),"mouseup"!=e.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400))}},o.staticClick=function(e,t){this.emitEvent("staticClick",[e,t])},n.getPointerPoint=t.getPointerPoint,n}),function(e,t){"function"==typeof define&&define.amd?_wAMD.define("draggabilly",["get-size/get-size","unidragger/unidragger"],function(i,n){return t(e,i,n)}):"object"==typeof module&&module.exports?module.exports=t(e,require("get-size"),require("unidragger")):e.Draggabilly=t(e,e.getSize,e.Unidragger)}(window,function(e,t,i){function n(){}function o(e,t){for(var i in t)e[i]=t[i];return e}function r(e){return e instanceof HTMLElement}function s(e,t){this.element="string"==typeof e?l.querySelector(e):e,p&&(this.$element=p(this.element)),this.options=o({},this.constructor.defaults),this.option(t),this._create()}function a(e,t,i){return i=i||"round",t?Math[i](e/t)*t:e}var l=e.document,c=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame,d=0;c||(c=function(e){var t=(new Date).getTime(),i=Math.max(0,16-(t-d)),n=setTimeout(e,i);return d=t+i,n});var u=l.documentElement,h="string"==typeof u.style.transform?"transform":"WebkitTransform",p=e.jQuery,f=s.prototype=Object.create(i.prototype);s.defaults={},f.option=function(e){o(this.options,e)};var m={relative:!0,absolute:!0,fixed:!0};return f._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=o({},this.position);var e=getComputedStyle(this.element);m[e.position]||(this.element.style.position="relative"),this.enable(),this.setHandles()},f.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},f.dispatchEvent=function(t,i,n){var o=[i].concat(n);this.emitEvent(t,o);var r=e.jQuery;if(r&&this.$element)if(i){var s=r.Event(i);s.type=t,this.$element.trigger(s,n)}else this.$element.trigger(t,n)},f._getPosition=function(){var e=getComputedStyle(this.element),t=this._getPositionCoord(e.left,"width"),i=this._getPositionCoord(e.top,"height");this.position.x=isNaN(t)?0:t,this.position.y=isNaN(i)?0:i,this._addTransformPosition(e)},f._getPositionCoord=function(e,i){if(-1!=e.indexOf("%")){var n=t(this.element.parentNode);return n?parseFloat(e)/100*n[i]:0}return parseInt(e,10)},f._addTransformPosition=function(e){var t=e[h];if(0===t.indexOf("matrix")){var i=t.split(","),n=0===t.indexOf("matrix3d")?12:4,o=parseInt(i[n],10),r=parseInt(i[n+1],10);this.position.x+=o,this.position.y+=r}},f.pointerDown=function(e,t){this._dragPointerDown(e,t);var i=l.activeElement;i&&i.blur&&i!=l.body&&i.blur(),this._bindPostStartEvents(e),this.element.classList.add("is-pointer-down"),this.dispatchEvent("pointerDown",e,[t])},f.pointerMove=function(e,t){var i=this._dragPointerMove(e,t);this.dispatchEvent("pointerMove",e,[t,i]),this._dragMove(e,t,i)},f.dragStart=function(e,t){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",e,[t]),this.animate())},f.measureContainment=function(){var e=this.options.containment;if(e){var i=r(e)?e:"string"==typeof e?l.querySelector(e):this.element.parentNode,n=t(this.element),o=t(i),s=this.element.getBoundingClientRect(),a=i.getBoundingClientRect(),c=o.borderLeftWidth+o.borderRightWidth,d=o.borderTopWidth+o.borderBottomWidth,u=this.relativeStartPosition={x:s.left-(a.left+o.borderLeftWidth),y:s.top-(a.top+o.borderTopWidth)};this.containSize={width:o.width-c-u.x-n.width,height:o.height-d-u.y-n.height}}},f.dragMove=function(e,t,i){if(this.isEnabled){var n=i.x,o=i.y,r=this.options.grid,s=r&&r[0],l=r&&r[1];n=a(n,s),o=a(o,l),n=this.containDrag("x",n,s),o=this.containDrag("y",o,l),n="y"==this.options.axis?0:n,o="x"==this.options.axis?0:o,this.position.x=this.startPosition.x+n,this.position.y=this.startPosition.y+o,this.dragPoint.x=n,this.dragPoint.y=o,this.dispatchEvent("dragMove",e,[t,i])}},f.containDrag=function(e,t,i){if(!this.options.containment)return t;var n="x"==e?"width":"height",o=this.relativeStartPosition[e],r=a(-o,i,"ceil"),s=this.containSize[n];return s=a(s,i,"floor"),Math.min(s,Math.max(r,t))},f.pointerUp=function(e,t){this.element.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",e,[t]),this._dragPointerUp(e,t)},f.dragEnd=function(e,t){this.isEnabled&&(h&&(this.element.style[h]="",this.setLeftTop()),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",e,[t]))},f.animate=function(){if(this.isDragging){this.positionDrag();var e=this;c(function(){e.animate()})}},f.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},f.positionDrag=function(){this.element.style[h]="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},f.staticClick=function(e,t){this.dispatchEvent("staticClick",e,[t])},f.enable=function(){this.isEnabled=!0},f.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},f.destroy=function(){this.disable(),this.element.style[h]="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},f._init=n,p&&p.bridget&&p.bridget("draggabilly",s),s}),_wAMD.define("ui-framework/js/components/color-picker",["jquery","./base-view","./model/color","./input-prefix","draggabilly"],function(e,t,i,n,o){var r=t.extend({className:"color-picker",template:'<div class="color-picker__controls">\n<div class="color-picker__slider color-picker__slider--hue">\n<div class="color-picker__slider-indicator">\n<div class="color-picker__slider-indicator-handle js-handle"></div>\n</div>\n</div>\n<div class="color-picker__mixer color-mixer">\n<div class="color-mixer__container">\n<div class="color-mixer__lightness"></div>\n<div class="color-mixer__darkness"></div>\n<div class="color-mixer__indicator">\n<div class="color-mixer__indicator-handle js-handle"></div>\n</div>\n</div>\n</div>\n</div>\n',DEFAULT_COLOR:"#1B87D0",initialize:function(e){return this.color=new i,this.initialColor=e.color,this},onAttach:function(){this.createColorInput(),this.cacheElementsData(),this.enableDragging(this.slider),this.enableDragging(this.picker),this.setColor(this.initialColor||this.DEFAULT_COLOR),this.updatePickerColor(),this.listenToColorChange()},setColor:function(e){this.color.set("hex",e);var t=this.color.get("hsv");this.computeDimensions(),this.positionIndicator(this.slider,this.sliderPosition(t)),this.positionIndicator(this.picker,this.pickerPosition(t))},pickColor:function(e){this.setColor(e),this.trigger("pick",this.color.toJSON())},cacheElementsData:function(){var e=this.$(".color-picker__slider"),t=this.$(".color-mixer");this.slider={el:e,indicator:e.find(".color-picker__slider-indicator"),callback:this.sliderListener.bind(this),dragAxis:"x"},this.picker={el:t,indicator:t.find(".color-mixer__indicator"),callback:this.pickerListener.bind(this),dragAxis:!1},this.computeDimensions()},computeDimensions:function(){this.slider.width=this.slider.el.width(),this.picker.width=this.picker.el.width(),this.picker.height=this.picker.el.height(),this.slider.width&&this.picker.width&&this.picker.height&&(this.computeDimensions=Function.prototype)},listenToColorChange:function(){this.listenTo(this.color,"change",function(e,t){this.updatePickerColor(),this.trigger("change",e.toJSON())})},enableDragging:function(e){var t=this,i=new o(e.indicator[0],{containment:!0,axis:e.dragAxis,handle:".js-handle"});i.on("dragMove",function(){var t={x:Math.abs(Math.floor(i.position.x)),y:Math.abs(Math.floor(i.position.y))};e.callback(t)}),i.on("dragEnd",function(){t.trigger("pick",t.color.toJSON())}),e.el.on("mousedown",function(n){if(-1===n.target.className.indexOf("js-handle")){var o=t.mousePosition(n);t.positionIndicator(e,o),i.pointerDown(n,n),e.callback(o),t.trigger("pick",t.color.toJSON())}})},createColorInput:function(){var e=this.queryOption("hasInput");e&&new r.Input({model:this.color,picker:this})},updatePickerColor:function(){var e=this.color.get("hsv"),t=this.color.hsv2hex({h:e.h,s:1,v:1});this.picker.el.css("background-color",t)},sliderListener:function(e){this.computeDimensions();var t=this.slider.width,i=this.color.get("hsv");this.color.set("hsv",{h:e.x/t*360,s:i.s,v:i.v})},pickerListener:function(e){this.computeDimensions();var t=this.picker.width,i=this.picker.height,n=this.color.get("hsv");this.color.set("hsv",{h:n.h,s:e.x/t,v:(i-e.y)/i})},sliderPosition:function(e){return{x:e.h*this.slider.width/360,y:0}},pickerPosition:function(e){return{x:e.s*this.picker.width,y:this.picker.height-e.v*this.picker.height}},positionIndicator:function(e,t){t&&(e.indicator.css("left",t.x+"px"),"x"!==e.dragAxis&&e.indicator.css("top",t.y+"px"))},mousePosition:function(e){return{x:e.offsetX,y:e.offsetY}}}),s=t.extend({template:'<h4 class="form-header">{{inputLabel}}</h4>\n<div class="form-control form-control--color">\n<div class="form-control__item">\n<span class="form-control--color__swatch"></span>\n</div>\n<div class="form-control__item form-control__item--right">\n<input type="text" class="js-input-hex" data-prefix="#" maxlength="6" />\n</div>\n</div>\n',initialize:function(e){this.picker=e.picker,this.render()},events:{"focusout .js-input-hex":"onFocusOutHexInput","focusin .js-input-hex":"onFocusHexInput"},render:function(){var e=this;t.prototype.render.call(this),e.picker.$el.after(e.$el),e.$inputEl=e.$(".js-input-hex"),e.$inputEl.on({input:e.validateHexInput.bind(e),blur:function(){e.setHexInput(e.model.get("hex"))}}),new n({el:e.$inputEl}),e.$swatchEl=e.$(".form-control--color__swatch"),e.updateColorInput(),e.listenToColorPickerChange()},getRenderData:function(){return{inputLabel:this.picker.queryOption("inputLabel")}},listenToColorPickerChange:function(){this.listenTo(this.model,"change",function(){this.updateColorInput()})},updateColorInput:function(){var e=this.model.get("hex");this.setSwatchColor(e),this.setHexInput(e)},setSwatchColor:function(e){this.$swatchEl.css("background-color",e)},setHexInput:function(e){e=e.substring(1),this.$inputEl.val().toLowerCase()!==e.toLowerCase()&&this.$inputEl.val(e)},validateHexInput:function(e){var t=this.$inputEl.val();this.model.isHexColor(t)&&(t="#"+t,this.picker.pickColor(t))},setHexInput:function(){var e=this.model.get("hex");this.$inputEl.val(e.substring(1))},onFocusHexInput:function(e){this.$el.find(".form-control--color").addClass("is-active")},onFocusOutHexInput:function(e){this.$el.children(".form-control--color").removeClass("is-active")}});return r.Input=s,r}),_wAMD.define("tpl!sections/dialogs/pick-background-color.tpl",[],function(){return'<div class="color-picker__container">\n	<span class="form-control__label-text">{{#tl}}templates.sections.pick-background-color_1{{/tl}}</span>\n	{{! color picker rendered here by ColorPanel.js }}\n</div>'}),_wAMD.define("site/editor/sections/view/color/ColorPanel",["jquery","mustache","ui-framework/js/components/combo-dialog","ui-framework/js/components/color-picker","tpl!sections/dialogs/pick-background-color.tpl"],function(e,t,i,n,o){var r=i.Panel.extend({title:_W.utl("javascript.editor.sections.view.color.ColorPanel_1"),height:365,backLink:{isDirectional:!0},renderContent:function(e){e.html(t.render(o)),this.createColorPicker()},onEnter:function(){this.prevHeight=this.comboDialog.height,this.comboDialog.setHeight(this.height),this.colorPicker.showWithin(this.$(".color-picker__container"))},onLeave:function(){this.comboDialog.setHeight(this.prevHeight)},onDestroy:function(){this.colorPicker.destroy()},createColorPicker:function(){var e=this,t=this.comboDialog.section.getBackgroundContent(),i=t["background-color"]||"#ffffff";e.colorPicker=new n({color:i,hasInput:!0,inputLabel:_W.utl("javascript.editor.sections.view.color.ColorPanel_2")}),e.listenTo(e.colorPicker,"change",_.throttle(e.onColorChange,50)),e.listenTo(e.colorPicker,"pick",e.onColorPick)},onColorChange:function(t){var i=this.comboDialog.section.generateSelector(),n=e(i);n&&n.css({"background-color":t.hex,"background-image":"none"})},onColorPick:function(e){this.comboDialog.section.setBackgroundColor({"background-color":e.hex,"background-image":"none"})}});return r}),_wAMD.define("site/editor/sections/view/EditDialog",["underscore","ui-framework/js/components/combo-dialog","site/editor/ui/utils","site/editor/sections/view/BackgroundSwitcher","site/editor/sections/view/image/ImageBackgroundPanel","site/editor/sections/view/color/ColorBackgroundPanel","site/editor/sections/view/video/VideoBackgroundPanel","site/editor/sections/view/color/ColorPanel"],function(e,t,i,n,o,r,s,a){var l=300,c=t.extend({outerClassName:"section-set-background dialog-option-tip",parent:"._editor-ui__framework",size:"small",height:l,isModal:!1,closeOnClickAway:!0,positionRefresh:!1,allowLeftRight:!1,initialize:function(t){t=e.defaults(t||{},{showAlignment:!0,isHeaderSection:!1}),this.section=t.section,this.$sectionEl=t.$sectionEl},onOpen:function(){if(!this.section.userSelectedBackground()){var e=null;switch(this.section.getBackgroundType()){case this.section.SECTION_PROPERTIES.BACKGROUND_TYPES.COLOR:e=this.$el.find('input[value="colorBackground"]');break;case this.section.SECTION_PROPERTIES.BACKGROUND_TYPES.VIDEO:e=this.$el.find('input[value="videoBackground"]');break;case this.section.SECTION_PROPERTIES.BACKGROUND_TYPES.IMAGE:e=this.$el.find('input[value="imageBackground"]')}e&&e.prop("checked",!0)}},shake:function(){i.shakeElement(this.$el)}}),d=function(t){var t=e.defaults({baseHeight:l},t),i=new o(t),d=new r(t),u=new s(t),h=new n({panels:[i,d,u]});return this.dialog=new c(e.extend({initialPanel:h},t)),this.dialog.listenTo(d,"panel:color:push",function(){this.dialog.pushPanel(new a)}.bind(this)),this.dialog.listenTo(i,{"dialog:close":function(){this.dialog.close()}.bind(this),"section:control:background:open":function(e,t){this.dialog.trigger("section:control:background:open",e,t)}.bind(this),"section:control:background:extend":function(e){this.dialog.trigger("section:control:background:extend",e)}.bind(this)}),this.dialog.listenTo(u,{"dialog:close":function(){this.dialog.close()}.bind(this),"dialog:set:height":function(e){this.dialog.setHeight(e)}.bind(this)}),this.dialog.open()};return d}),_wAMD.define("tpl!sections/sections-controller.tpl",[],function(){return'<ul class="section-controller {{#prefer_bottom}}arrow-up{{/prefer_bottom}}">\n\n	{{#show_edit}}\n		<li class="section-edit"><a role="button">{{#tl}}templates.sections.sections-controller_1{{/tl}}</a></li>\n	{{/show_edit}}\n\n	{{#show_add_layout}}\n		<li class="section-add-layout"><a role="button">{{#tl}}templates.sections.sections-controller_7{{/tl}}</a></li>\n	{{/show_add_layout}}\n\n	{{#show_add_header_layout}}\n		<li class="section-add-layout"><a role="button">{{#tl}}sections.layouts.change.control.header.add_layout{{/tl}}</a></li>\n	{{/show_add_header_layout}}\n\n	{{#show_change_header_layout}}\n		<li class="section-change-layout"><a role="button">{{#tl}}sections.layouts.change.control.header.change_layout{{/tl}}</a></li>\n	{{/show_change_header_layout}}	\n\n	{{#show_move}}\n		<li class="section-move"><a role="button">{{#tl}}templates.sections.sections-controller_6{{/tl}}</a></li>\n	{{/show_move}}\n\n	{{#show_delete}}\n		<li class="section-delete"><a role="button">{{#tl}}templates.sections.sections-controller_4{{/tl}}</a></li>\n	{{/show_delete}}\n\n	{{#show_clear}}\n		<li class="section-clear"><a role="button">{{#tl}}templates.sections.sections-controller_4{{/tl}}</a></li>\n	{{/show_clear}}\n</ul>\n'}),_wAMD.define("site/editor/sections/SectionControlView",["jquery","underscore","backbone-all","editor-site-shared/relay","site/editor/sections/view/EditDialog","ui-framework/js/components/confirm","editor-site-shared/ui/constants","tpl!sections/sections-controller.tpl"],function(e,t,i,n,o,r,s,a){var l=i.Marionette.ItemView.extend({shouldShowNewLabels:!1,className:"section-controller-container",template:a,ui:{edit:".section-edit","delete":".section-delete",clear:".section-clear",move:".section-move",addLayout:".section-add-layout",changeLayout:".section-change-layout"},events:{"click @ui.edit":"edit","click @ui.delete":"delete","click @ui.clear":"clear","click @ui.move":"move","click @ui.addLayout":"addLayout","click @ui.changeLayout":"changeLayout"},templateHelpers:function(){return{prefer_bottom:this.options.preferBottom,show_edit:this.options.showEdit,show_delete:this.options.showDelete,show_clear:this.options.showClear,show_move:this.options.showMove,show_add_layout:this.options.showAddLayout&&!this.options.isHeaderSection,show_add_header_layout:this.options.showAddLayout&&this.options.isHeaderSection,show_change_header_layout:this.options.showChangeLayout&&this.options.isHeaderSection}},initialize:function(e){this.options=t.defaults(e||{},{showEdit:!0,showDelete:!0,showClear:!1,showMove:!0,showAddLayout:!1,showChangeLayout:!0,forceRepositionAbove:!1,forceRepositionBelow:!1,isSectionEmpty:!0}),this.determineIfShouldShowNewLabelsInEditDialog()},hide:function(){this.$el.hide()},show:function(){this.$el.show()},reposition:function(e,i,n){var o=e.offset(),r=e.height(),s=e.outerWidth();if(i=t.isUndefined(i)?this.options.forceRepositionBelow:i,n=t.isUndefined(n)?this.options.forceRepositionAbove:n,!t.isEqual(this.previousOffset,o)||this.previousHeight!==r||this.previousOuterWidth!==s||this.previousForceBelow!==i||this.previousForceAbove!==n){this.previousOffset=o,this.previousHeight=r,this.previousOuterWidth=s,this.previousForceBelow=i,this.previousForceAbove=n;var a=!0;i&&(a=!1);var l=this.$el.offsetParent().offset().top,c=o.top-this.constructor.CONTROL_HEIGHT-l;(!a||!n&&0>c)&&(a=!1,c+=this.constructor.CONTROL_HEIGHT+e.height()+this.constructor.CONTROL_ARROW_HEIGHT),this.options.preferTop=a,this.options.preferBottom=!a,this.render(),this.$el.css({top:c,left:o.left+e.outerWidth()/2})}},onClose:function(){t.result(this.confirm,"close"),t.result(this.editDialog,"close"),t.result(this.moveCopyDialog,"close")},edit:function(){var t=e(this.model.generateSelector()),i=t.closest("."+s.SECTION_WRAP_NAME);this.hide(),this.editDialog=new o({section:this.model,$sectionEl:t,pointAt:i,preferTop:this.options.preferTop,preferBottom:this.options.preferBottom,showAlignment:!this.options.isSectionEmpty,isHeaderSection:this.options.isHeaderSection,showSaveToPages:this.options.isHeaderSection,fallbackAlignment:this.options.fallbackAlignment,baseSetting:this.options.baseSetting,showNewLabels:this.shouldShowNewLabels}),this.shouldShowNewLabels&&n.execute("user:doEvent","seen_edit_background_dialog_tip"),this.listenTo(this.editDialog,{all:function(){this.trigger.apply(this,arguments)},"before:destroy":function(){this.show()}})},determineIfShouldShowNewLabelsInEditDialog:function(){n.request("user:hasDoneEvent","seen_edit_background_dialog_tip").done(function(e){this.shouldShowNewLabels=!e}.bind(this))},shiftUp:function(){this.trigger("section:control:shift",this.model.id,-1)},shiftDown:function(){this.trigger("section:control:shift",this.model.id,1)},"delete":function(){this.trigger("section:control:remove",this.model.id)},clear:function(){this.trigger("section:control:clear",this.model.id)},applyStyle:function(){this.trigger("section:control:style:apply",this.model.id),this.trigger("section:applyStyle",this.model.id)},move:function(){this.trigger("section:control:move",this.model.id)},addLayout:function(){this.trigger("section:control:layout:add",this.model.id)},changeLayout:function(){this.trigger("section:control:layout:change",this.model.id)},move:function(){this.trigger("section:control:move",this.model.id)}},{CONTROL_HEIGHT:50,CONTROL_ARROW_HEIGHT:15});return l}),_wAMD.define("tpl!sections/sections-edge.tpl",[],function(){return'<div class="section-edge-wrapper {{#handle}}ui-framework{{/handle}}">\n	{{#handle}}\n		<div class="section-edge-handle-wrapper ui-resizable-handle ui-resizable-s">\n			<div class="section-edge-handle"></div>\n		</div>\n		<div class="hover-tip hover-tip__section"></div>\n	{{/handle}}\n</div>'}),_wAMD.define("site/editor/sections/SectionEdge",["jquery","underscore","mustache","editor/build/themes/data","editor-site-shared/ui/constants","tpl!sections/sections-edge.tpl"],function(e,t,i,n,o,r){var s={attachEdgeToSection:function(e,n){t.defaults(n,{showResizeHandle:!0});var s=i.render(r,{handle:n.showResizeHandle});e.css("position","relative").append(s);var a=e.find("."+o.SECTION_EDGE_CLASS);return this.repositionEdge(a,e),a},destroyEdge:function(e){e.find("."+o.SECTION_EDGE_CLASS).remove();
},repositionEdge:function(e,t){var i=t.outerHeight(),n=t.offset().top;e.hasClass("edge-top")?e.css("top",n):e.css("top",i)}};return s}),_wAMD.define("site/editor/sections/SectionResize",["jquery","site/editor/sections/SectionEdge","editor/sections/utils","editor-site-shared/ui/constants","util/jquery-ui-resizable","legacy/jquery_utils"],function(e,t,i,n){var o={$edgeParent:null,initialize:function(n,o){if(!n.data("uiResizable")){var r,s=this,a=t.attachEdgeToSection(o.edgeParent,{showResizeHandle:o.showResizeHandle}),l=e(window),c=l.height(),d=a.find(".section-edge-handle-wrapper");this.$edgeParent=o.edgeParent,this.$edgeHoverTip=a.find(".hover-tip"),this.attachHoverTipListener(o.showResizeTipAbove);var u=!1,h=0,p=!1,f=null;n.resizable({handles:{s:d},start:function(){f=n.height(),"function"==typeof o.onStart&&o.onStart.apply(this,arguments),a.addClass("resize-active"),s.detachHoverTipListener(),r=n.find(".empty-element-message"),u="border-box"===n.css("box-sizing"),u&&(h=n.outerHeight()-n.height())},stop:function(e,t){t.saveAutoHeight=p,"function"==typeof o.onStop&&o.onStop.apply(this,arguments),a.removeClass("resize-active"),s.attachHoverTipListener(o.showResizeTipAbove),r=null,u=!1,f=null},resize:function(e,d){var m,g=i.getSectionInnerHeight(d.helper,d.size.height);r.height(0),u&&(d.size.height+=h),d.helper.css("height",d.size.height+"px");var v=d.helper.height();f===v?(m=_W.utl("javascript.site.editor.sections.SectionResize_2"),d.helper.css("height","auto"),p=!0):(m=d.size.height+"px",p=!1),r.length&&i.resizeEmptyMessage(n,g),s.$edgeHoverTip.text(m),t.repositionEdge(a,n),e.clientY>c-30&&l.scrollTop(l.scrollTop()+10),"function"==typeof o.onResize&&o.onResize.apply(this,arguments),f=d.helper.height()}})}},destroy:function(i){if(i.data("ui-resizable")){var n=i.children().find(".ui-resizable-handle").map(function(){var t=e(this),i={$handle:t,$previous:t.prev(),$parent:t.parent()};return t.detach(),i});i.resizable("destroy"),n.get().forEach(function(e){e.$previous.length?e.$previous.after(e.$handle):e.$parent.prepend(e.$handle)})}this.$edgeParent&&(t.destroyEdge(this.$edgeParent),this.$edgeParent=null)},attachHoverTipListener:function(t){this.$edgeHoverTip.text(_W.utl("javascript.site.editor.sections.SectionResize_1")),this.$edgeHoverTip.parent().on("mouseenter.hovertip",function(){var i=this.$edgeHoverTip.parent(),n=this.$edgeHoverTip.outerWidth(),o=i.offset(),r=(i.outerWidth(),e(window).width());this.$edgeParent.on("mousemove.hovertip",function(e){var i={};i.left=e.pageX+n+5>r?e.pageX-(e.pageX+n-r+5):e.pageX-o.left,t&&(i.top=-45),this.$edgeHoverTip.css(i)}.bind(this))}.bind(this)).on("mouseleave.hovertip",function(){this.$edgeParent.off("mousemove.hovertip")}.bind(this))},detachHoverTipListener:function(){this.$edgeHoverTip.parent().off(".hovertip"),this.$edgeParent.off("mousemove.hovertip")}};return o}),_wAMD.define("editor-site-shared/build/areas/AbstractSectionArea",["jquery","underscore","site/editor/app","site/editor/ui/beacon","site/editor/ui/spotlights","site/editor/sections/SectionControlView","site/editor/sections/SectionResize","editor-site-shared/relay","editor-site-shared/ui/constants","editor/sections/utils","site/published/sections/utils","editor-site-shared/build/areas/ElementArea"],function(e,t,i,n,o,r,s,a,l,c,d,u){var h="",p=null,f=Class.create(u,{control:null,afterRender:function($super){if(this.$sectionEl=e(this.section.generateSelector()),c.resizeEmptyMessage(this.$sectionEl,this.section.getHeight()),this.section.hasBackgroundEffects()){var t=this.section.getBackgroundEffects();d.applyBackgroundEffects(this.$sectionEl,t,!0)}this.attachListeners(),this.section.generateSelector()===h&&(this.showEditMode(),this.control.hide()),$super()},unrender:function($super){$super(),this.detachListeners()},getWrapperClassNames:function($super){var e=[$super()];return this.section&&(this.section.hasBackgroundVideo()?e.push(l.SECTION_BACKGROUND_VIDEO_CLASS_NAME):this.section.hasBackgroundImage()?e.push(l.SECTION_BACKGROUND_IMAGE_CLASS_NAME):this.section.hasBackgroundColor()&&e.push(l.SECTION_BACKGROUND_COLOR_CLASS_NAME)),e.join(" ")},initializeSpotlightResize:function(e){var t=e.parents("."+l.SECTION_WRAP_NAME);p=o.showSectionSpotlights(e),p.container.on("mouseup",".spotlight-bg",this.hideEditMode.bind(this)),i.vent.once("editor:spotlight:open",this.hideEditMode,this),s.destroy(e),s.initialize(e,{edgeParent:t,showResizeHandle:this.section.isBackgroundResizeable(),showResizeTipAbove:this.control&&this.control.options.preferBottom,onStart:function(){this.control&&this.control.hide()}.bind(this),onStop:function(e,n){var o;o=n.saveAutoHeight?{height:"auto"}:{height:n.size.height+"px"},this.section.setBaseStyle(o),this.control&&(this.control.show(),this.control.reposition(t)),i.vent.trigger("editor:elements:changed"),a.trigger("editor:elements:changed")}.bind(this),onResize:function(){p.reposition()}})},showEditMode:function(){h=this.section.generateSelector(),this.attachEditModeListeners(),this.initializeSpotlightResize(this.$sectionEl)},hideEditMode:function(){return this.section.generateSelector()!==h?e.Deferred().resolve():n.close("section:chooseSectionLayout").done(function(){this.section&&s.destroy(this.$sectionEl),clearInterval(this.controlPositioningInterval),i.sectionDialog&&(i.sectionDialog.close(),this.control=null),p&&(p.destroy(),p=null),this.moveCopyDialog&&(this.moveCopyDialog.close(),this.moveCopyDialog=null),this.boundInitResize&&i.vent.off("pageRendered",this.boundInitResize),h="",this.detachEditModeListeners()}.bind(this)).fail(function(){this.boundInitResize&&i.vent.off("pageRendered",this.boundInitResize),this.boundInitResize=function(){var t=e(this.section.generateSelector());this.initializeSpotlightResize(t),this.boundInitResize=null}.bind(this),i.vent.once("pageRendered",this.boundInitResize)}.bind(this))},attachListeners:function(){this.$sectionEl.on({"mouseup.section-area":function(e){n.close("section:chooseSectionLayout"),c.shouldShowEditMode(e)&&this.showEditMode()}.bind(this),"mouseenter.section-area":function(){this.$sectionEl.addClass("section-hover")}.bind(this),"mouseleave.section-area":function(){this.$sectionEl.removeClass("section-hover")}.bind(this)})},detachListeners:function(){this.$sectionEl.off("mouseup"),this.detachEditModeListeners()},attachEditModeListeners:function(){a.on({"site:overlays:hide":this.hideEditMode,"editor:updateList":this.hideEditMode},this),i.vent.on({"editor:element:resize":t.throttle(this.hideEditMode,300),"editor:element:dragStart":this.hideEditMode,"editor:element:text:modify":this.hideEditMode,"editor:element:delete:after":this.hideEditMode,"editor:elements:options:show":this.hideEditMode},this)},detachEditModeListeners:function(){a.off(["site:overlays:hide","editor:updateList"].join(" "),null,this),i.vent.off(["editor:element:resize","editor:element:dragStart","editor:element:text:modify","editor:element:delete:after","editor:elements:options:show"].join(" "),null,this)},setStyle:function(e,t){this.section.set(t,{silent:!0}),this.applyStyle(this.section)},applyStyle:function(){var e=this.section.getBackgroundContent(),t=this.section.getBaseStyle()||{};if(c.clearSectionStyling(this.$sectionEl),this.$sectionEl.css(t),this.section.hasBackgroundVideo()){var n=e.background_url,o=e.encoding_done===!1,r=c.generateVideoStillImage(n,o),s=Boolean(this.$sectionEl.data("in-preview"));d.applyBackgroundVideo(this.$sectionEl,e,s),this.applyVideoStillImage(r),this.$sectionEl.addClass(l.SECTION_BACKGROUND_VIDEO_CLASS_NAME),i.vent.trigger("section:background:video:render")}else this.section.hasBackgroundImage()?(this.$sectionEl.addClass(l.SECTION_BACKGROUND_IMAGE_CLASS_NAME),i.vent.trigger("section:background:image:render",this.$sectionEl.attr("class"))):this.section.hasBackgroundColor()&&this.$sectionEl.css(e).addClass(l.SECTION_BACKGROUND_COLOR_CLASS_NAME);if(this.section.hasBackgroundEffects()){var u=this.section.getBackgroundEffects();d.applyBackgroundEffects(this.$sectionEl,u,!0)}i.vent.trigger("editor:elements:changed"),a.trigger("editor:elements:changed")},clearSection:function(){this.removeAllElements()},initializeControlView:function(e){var t=new r(e);return t.on({"section:control:background:extend":this.onControlBackgroundExtend,"section:control:background:open":this.onControlBackgroundOpen,"section:control:layout:add":this.onControlLayoutAdd,"section:control:layout:change":this.onControlLayoutChange,"section:control:baseStyle:set":this.onControlBaseStyleSet,"section:control:remove":this.onControlRemove,"section:control:clear":this.onControlClear,"section:control:move":this.onControlMove},this),i.sectionDialog.show(t),t.reposition(this.$sectionEl),clearInterval(this.controlPositioningInterval),this.controlPositioningInterval=setInterval(function(){t.isClosed?clearInterval(this.controlPositioningInterval):t.reposition(this.$sectionEl)}.bind(this),l.SECTION_SPOTLIGHT_REPOSITION_INTERVAL),t},onControlBackgroundExtend:function(e){i.execute("themeBackground:extend",e)},onControlBaseStyleSet:function(e){this.section.setBaseStyle(e)},onControlLayoutAdd:function(){this.control.close(),this.chooseSectionLayout()},onControlLayoutChange:t.noop,onControlBackgroundOpen:t.noop,onControlRemove:t.noop,onControlClear:t.noop,onControlMove:t.noop});return f}),_wAMD.define("site/editor/sections/SectionRemoveConfirm",["ui-framework/js/components/confirm"],function(e){var t=e.extend({title:_W.utl("javascript.site.editor.sections.SectionControlView_4"),message:_W.utl("javascript.site.editor.sections.SectionControlView_5"),cancelText:_W.utl("javascript.site.editor.sections.SectionControlView_6"),proceedButton:{text:_W.utl("javascript.site.editor.sections.SectionControlView_3"),className:"is-destructive"},isTop:!1,isModal:!1,closeOnClickAway:!0,outerClassName:"section-delete-confirm",isPositionFixed:!0});return t}),_wAMD.define("editor/build/ui/panels/PageViewPanel",["underscore","ui-framework/js/components/combo-dialog","editor-site-shared/build/linker/item-views/StandardPageView"],function(e,t,i){var n=t.Panel.extend({hasContentLegacyStyles:!1,initialize:function(){this.pageView=new i({options:e.defaults(this.options,{disableNewWindow:!0,disableSearch:!0,disableContributors:!0,thisPageID:window.currentPage,hideThisPage:!1,disableThisPage:!1})})},destroy:function(){this.pageView.close(),t.Panel.prototype.destroy.apply(this,arguments)},setPageViewOption:function(e,t){this.pageView.options[e]=t},renderContent:function(e){this.pageView.render(),this.stopListening(this.pageView),this.listenTo(this.pageView,{"page:selected":this.onPageSelected}),e.html(this.pageView.$el)},onPageSelected:function(t){(e.isArray(t)||t.pageID)&&this.trigger("page:selected",t)}});return n}),_wAMD.define("tpl!editor/dialogs/move-copy-topbar.tpl",[],function(){return'<div class="btn-group">\n	<button class="btn--small js-move">{{#tl}}templates.editor.dialogs.move-copy-topbar.move_button{{/tl}}</button>\n	<button class="btn--small js-copy">{{#tl}}templates.editor.dialogs.move-copy-topbar.copy_button{{/tl}}</button>\n</div>'}),_wAMD.define("editor/build/ui/topbars/MoveCopyTopBar",["ui-framework/js/components/topbar","tpl!editor/dialogs/move-copy-topbar.tpl"],function(e,t){var i=e.extend({className:"topbar topbar--movecopy",template:t,activeClass:"is-active",events:{"click .js-copy":"onClickCopy","click .js-move":"onClickMove"},setActiveButton:function(e){e.addClass(this.activeClass).siblings().removeClass(this.activeClass)},setActiveCopy:function(){this.setActiveButton(this.$(".js-copy"))},setActiveMove:function(){this.setActiveButton(this.$(".js-move"))},onClickCopy:function(){this.setActiveCopy(),this.trigger("change:mode:copy")},onClickMove:function(){this.setActiveMove(),this.trigger("change:mode:move")}});return i}),_wAMD.define("editor/build/ui/panels/MoveCopyPanel",["editor/build/ui/panels/PageViewPanel","editor/build/ui/topbars/MoveCopyTopBar"],function(e,t){var i=e.extend({topbar:new t,initialize:function(){e.prototype.initialize.apply(this,arguments),this.mode=this.constructor.MODE_MOVE},renderContent:function(){e.prototype.renderContent.apply(this,arguments),this.delegateTopBarEvents(),this.mode===this.constructor.MODE_COPY?this.topbar.setActiveCopy():this.mode===this.constructor.MODE_MOVE&&this.topbar.setActiveMove()},delegateTopBarEvents:function(){this.stopListening(this.topbar),this.listenTo(this.topbar,{"change:mode:copy":this.setCopyMode,"change:mode:move":this.setMoveMode})},setCopyMode:function(){this.mode=this.constructor.MODE_COPY,this.setPageViewOption("disableThisPage",!1),this.renderContent(this.$contentInnerEl)},setMoveMode:function(){this.mode=this.constructor.MODE_MOVE,this.setPageViewOption("disableThisPage",!0),this.renderContent(this.$contentInnerEl)},onPageSelected:function(e){e.pageID&&this.trigger("page:selected",this.mode,e)}},{MODE_COPY:"copy",MODE_MOVE:"move"});return i}),_wAMD.define("editor/build/ui/dialogs/ComboDialogPanelEventsMixin",["editor-site-shared/eventSync"],function(e){var t={initialize:function(){this.panels.length&&e(this,[{events:this.panelEvents,from:this.panels[0],to:this}])},onPush:function(t,i){this.stopListening(i),e(this,[{events:this.panelEvents,from:t,to:this}])},onPop:function(t,i){this.stopListening(i),e(this,[{events:this.panelEvents,from:t,to:this}])}};return t}),_wAMD.define("editor/build/ui/dialogs/MoveCopyDialog",["underscore","ui-framework/js/components/combo-dialog","editor/build/ui/panels/MoveCopyPanel","editor/build/ui/dialogs/ComboDialogPanelEventsMixin"],function(e,t,i,n){var o=t.extend(e.extend({},n,{size:"small",height:300,isModal:!1,closeOnClickAway:!0,className:"dialog dialog--movecopy dialog-option-tip",panelEvents:["page:selected"],constructor:function(e){e=e||{},e.initialPanel||e.panels||(e.initialPanel=new i),t.prototype.constructor.call(this,e)},setIsLoading:function(e){this.currentPanel.setIsLoading(e)}}));return o}),_wAMD.define("tpl!editor/dialogs/section-shift.tpl",[],function(){return'<span class="form-control__label-text">{{#tl}}sections.movecopy.move_section_heading{{/tl}}</span>\n<div class="btn-group btn-group--section-shift">\n	<button class="btn--small js-up">{{#tl}}sections.movecopy.shift_up{{/tl}}</button>\n	<button class="btn--small js-down">{{#tl}}sections.movecopy.shift_down{{/tl}}</button>\n</div>'}),_wAMD.define("editor/build/ui/panels/SectionShiftPanel",["mustache","ui-framework/js/components/combo-dialog","tpl!editor/dialogs/section-shift.tpl"],function(e,t,i){var n=t.Panel.extend({disabledClass:"is-disabled",events:{"click .js-up":"onClickUp","click .js-down":"onClickDown"},initialize:function(e){this.listenTo(e.section.collection,"sort",function(){this.renderContent(this.$contentInnerEl),this.delegateEvents()})},renderContent:function(t){t.html(e.render(i)),this.isUpDisabled()&&this.setButtonDisabled(this.$(".js-up")),this.isDownDisabled()&&this.setButtonDisabled(this.$(".js-down"))},setButtonDisabled:function(e){e.addClass(this.disabledClass).prop("disabled",!0)},onClickUp:function(){this.trigger("section:shift:up")},onClickDown:function(){this.trigger("section:shift:down")},isUpDisabled:function(){return this.options.section.collection.at(0)===this.options.section},isDownDisabled:function(){return this.options.section.collection.last()===this.options.section}});return n}),_wAMD.define("tpl!editor/dialogs/section-move.tpl",[],function(){return'<span class="form-control__label-text">{{#tl}}sections.movecopy.move_section_heading{{/tl}}</span>\n<ul class="group group--flush group--hoverable">\n	<li class="group__item">\n		<button class="btn-control btn-control--borderless js-this">\n			{{#tl}}sections.movecopy.on_this_page_option{{/tl}}\n		</button>\n	</li>\n	<li class="group__item">\n		<button class="btn-control btn-control--borderless js-another">\n			{{#tl}}sections.movecopy.to_another_page_option{{/tl}}\n		</button>\n	</li>\n</ul>'}),_wAMD.define("editor/build/ui/panels/SectionMoveCopyPanel",["mustache","underscore","editor/build/ui/panels/MoveCopyPanel","editor/build/ui/panels/PageViewPanel","editor/build/ui/panels/SectionShiftPanel","tpl!editor/dialogs/section-move.tpl"],function(e,t,i,n,o,r){var s=i.extend({events:{"click .js-this":"onClickThisPage","click .js-another":"onClickAnotherPage"},renderContent:function(t){this.mode===this.constructor.MODE_COPY?i.prototype.renderContent.apply(this,arguments):this.mode===this.constructor.MODE_MOVE&&(this.delegateTopBarEvents(),this.topbar.setActiveMove(),t.html(e.render(r)))},onClickThisPage:function(){this.pushPanel(new o({section:this.options.section,title:_W.utl("sections.movecopy.on_this_page_title"),forwardLink:!1,backLink:{isDirectional:!0}}))},onClickAnotherPage:function(){var e=n.extend({onPageSelected:function(e){e.pageID&&this.trigger("page:selected",i.MODE_MOVE,e)}});this.pushPanel(new e(t.extend({},this.options,{selectorTitle:"",title:_W.utl("sections.movecopy.to_another_page_title"),forwardLink:!1,backLink:{isDirectional:!0},hideThisPage:!0})))}});return s}),_wAMD.define("editor/build/ui/dialogs/SectionMoveCopyDialog",["underscore","editor/build/ui/dialogs/MoveCopyDialog","editor/build/ui/panels/SectionMoveCopyPanel"],function(e,t,i){var n=t.extend({panelEvents:["page:selected","section:shift:up","section:shift:down"],constructor:function(n){n=e.extend({allowLeftRight:!1,positionRefresh:!1},n),n.initialPanel||(n.initialPanel=new i({section:n.section,selectorTitle:_W.utl("sections.movecopy.copy_selector_heading"),disablePageKinds:["store","blog"],disablePageLayouts:["splash"]})),t.prototype.constructor.call(this,n)}});return n}),_wAMD.define("tpl!sections/areas/section-area.tpl",[],function(){return'<div class="wsite-section-wrap">\n	<div class="wsite-section wsite-body-section{{#class_names}} {{class_names}}{{/class_names}}" {{#style}}style="{{style}}"{{/style}} {{#data}}data-{{key}}="{{value}}" {{/data}}>\n		{{{prefix_html}}}\n			<div class="wsite-section-elements">\n				{{{content}}}\n			</div>\n		{{{postfix_html}}}\n\n		{{#highlight_class_name}}\n			<div class="{{highlight_class_name}}"></div>\n		{{/highlight_class_name}}\n	</div>\n</div>\n'}),_wAMD.define("editor-site-shared/build/areas/SectionArea",["jquery","underscore","w-global","backbone","mustache","analytics/Tracking","site/editor/app","site/editor/ui/beacon","editor-site-shared/relay","editor-site-shared/build/areas/Area","editor-site-shared/build/areas/AbstractSectionArea","legacy/weebly_element_utils","site/editor/sections/SectionRemoveConfirm","site/editor/sections/SectionControlView","site/editor/ui/utils","site/published/sections/utils","editor/sections/utils","editor/build/ui/dialogs/SectionMoveCopyDialog","editor/build/ui/panels/SectionMoveCopyPanel","editor/build/themes/data","editor-site-shared/ui/constants","editor-site-shared/ui/context","tpl!sections/areas/section-area.tpl"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p,f,m,g,v,b,y,w,_,E){var T=Class.create(d,{isSection:!1,initialize:function($super,e,t){$super(e,t),e.section&&(this.section=e.section,this.isSection=!0),"secondlist"===this.elID&&(this.elID=c.getNewElID()),e.sections&&!e.elements?this.elements=t.loadElements(e.sections[0]||[]):this.elements=t.loadElements(e.elements)},afterNewSection:function(){this.afterRender(),f.scrollToElement(this.$sectionEl);var e=this.$sectionEl.parent(),t=this.$sectionEl.find(".wsite-section-content"),i=e.attr("style")||"";e.addClass("new-section"),e.css({"min-height":0}),t.slideUp(0).slideDown(500,"easeOutCubic",function(){g.resizeEmptyMessage(this.$sectionEl),e.attr("style",i).removeClass("new-section"),this.showEditMode(),this.chooseSectionLayout(),s.vent.trigger("editor:sections:newSectionRendered")}.bind(this))},attachEditModeListeners:function($super){$super(),l.commands.setHandlers({"section:hideEditBox":this.hideEditMode.bind(this),"section:clear":this.clearSection.bind(this)}),l.on({"section:set:properties:after":this.setStyle,"pageLayouts:gallery:show:after":this.hideEditMode},this)},detachEditModeListeners:function($super){$super(),l.commands.removeHandlers(["section:hideEditBox","section:clear"]),l.off(["section:set:properties:after","pageLayouts:gallery:show:after"].join(" "),null,this)},showEditMode:function($super){if(!this.control){var e=this.section.isCustomized(),t=0===this.elements.length,i=!e&&t,n=1===this.section.collection.length&&(!t||e);this.control=this.initializeControlView({model:this.section,showDelete:this.section.collection.length>1&&!n,showClear:n,showAddLayout:i,isSectionEmpty:t,fallbackAlignment:this.$sectionEl.css("vertical-align")});var o=p.CONTROL_HEIGHT+p.CONTROL_ARROW_HEIGHT;f.scrollToElement(this.$sectionEl,{paddingTop:this.control.options.preferTop?o:0,paddingBottom:this.control.options.preferTop?0:o}),$super()}},showMoveCopyDialog:function(){var e=this.moveCopyDialog=new v({section:this.section,parent:"._editor-ui__framework",pointAt:this.$sectionEl,preferTop:this.control.options.preferTop,preferBottom:this.control.options.preferBottom});e.open().on({"page:selected":function(t,n){var o,s;switch(t){case b.MODE_COPY:o="copyToPage",s="copy";break;case b.MODE_MOVE:o="moveToPage",s="move";break;default:return void(o=!1)}if(o){e.setIsLoading(!0);var a=n.pageID;i.Section.RPC.Section[o](a,this.section.id).always(function(){e.setIsLoading(!1)}).done(function(){r.trackEvent("section",s),e.close();var t="page:navigate"+(a===window.currentPage?"":":go");l.request(t,a)}).fail(function(){e.alert({title:i.utl("javascript.site.editor.sections.SectionControlView_movecopy_error_title"),message:i.utl("javascript.site.editor.sections.SectionControlView_movecopy_error_text")})})}},close:function(){this.control&&this.control.show()},"section:shift:up":function(){this.section.collection.shiftSections(this.section.id,-1)},"section:shift:down":function(){this.section.collection.shiftSections(this.section.id,1)}},this),e.listenTo(this.section,"sections:shifted",function(){e.updatePosition()})},chooseSectionLayout:function(){var e=this.section.id,t=this.section.generateSelector();return _.inEditorContext()||(e=window.userID+"-"+window.currentSite+"-"+e),this.control.close(),a.show("section:chooseSectionLayout",t,{sectionId:e}).done(function(){this.hideEditMode()}.bind(this))},confirmClearSection:function(t){var i=e.Deferred(),n=new h({parent:"._editor-ui__framework",onBeforeProceed:function(){return i.resolve().then(function(){return t})}});return n.open(),i.promise()},applyVideoStillImage:function(e){s.themeBackground.applyBackgroundToElement(e,"section-"+this.section.id)},removeEmptyColumns:function(){var t=this;e("#"+this.elID+" .wsite-multicol-li").each(function(){var i=e(this),n=i.prop("id").replace("inside_",""),o=u.getElementObject(n);o.removeEmptyColumns(t.getSectionId())})},removeElement:function(e){var t=this.context.deleteElement(e);this.spliceElement(t.id),this.afterRemoveElement()},moveBelow:function(t,i){var n=e("#inside_"+i.id),o=e("#inside_"+t);if(o.after(n),o.parent().hasClass("columnlist"))this.moveToColumn(i,t);else{for(var r=0,s=0;s<this.elements.length;s++){var a=this.elements[s];if(a.id==t){r=s;break}}this.elements.splice(r+1,0,i)}},moveAbove:function(t,i){var n=e("#inside_"+i.id),o=e("#inside_"+t);if(o.before(n),o.parent().hasClass("columnlist"))this.moveToColumn(i,t,!0);else{for(var r=0,s=0;s<this.elements.length;s++){var a=this.elements[s];if(a.id==t){r=s;break}}this.elements.splice(r,0,i)}},getClassNames:function(){return""},getSectionId:function(){return this.section.id},getHTML:function($super){var e=y.currentThemeData,t=e.page_type_templates[window.currentPageType],i=this.isSection?t.section_prefix_mustache:"",n=this.isSection?t.section_postfix_mustache:"",r=this.isSection?this.getInnerHTML():$super(),s={content:r,style:this.section.getSectionStyle(),class_names:this.getWrapperClassNames(),highlight_class_name:w.SECTION_HIGHLIGHT_CLASS_NAME,prefix_html:i,postfix_html:n,data:[{key:"section",value:this.section.id}]};return o.render(E,s)},getWrapperClassNames:function($super){var e=$super().split(" ");return e=t.without(e,"weebly-area","wsite-elements","wsite-not-footer"),e.push(w.SECTION_BACKGROUND_CLASS_NAME+this.section.id),e.join(" ")},onControlBackgroundOpen:function(e,t){var i=t?"editor:background:replace":"editor:background:open";this.hideEditMode(),l.execute(i,"section-"+e),f.scrollToElement(this.$sectionEl)},onControlRemove:function(t){var i=e.Deferred();this.control.hide(),this.confirmClearSection(i.promise()).then(function(){return this.hideEditMode(),this.section.collection.remove(t,!0)}.bind(this)).done(function(){i.resolve()}.bind(this)).fail(function(){this.control.show()}.bind(this))},onControlMove:function(e){this.showMoveCopyDialog(this.$sectionEl,e),this.control.hide()},onControlClear:function(){var t=e.Deferred();this.control.hide(),this.confirmClearSection(t.promise()).then(function(){return this.section.setEmptyBackground(),this.section.clearElements()}.bind(this)).done(function(){this.removeAllElements(),this.hideEditMode(),g.resizeEmptyMessage(this.$sectionEl),t.resolve()}.bind(this)).fail(function(){this.control.show()}.bind(this))}});return T}),_wAMD.define("site/editor/sections/model/Section",["underscore","backbone-all","editor-site-shared/relay","editor-site-shared/sections/SectionMixin","editor-site-shared/build/areas/SectionArea"],function(e,t,i,n,o){var r=t.Model.extend(n).extend({idAttribute:"section_id",MODEL_TYPE:"section",initialize:function(e,t){var t=t||{},i={silent:!0},n=new o({elements:this.get("elements")||[],section:this},t.context);this.set({elementArea:n},i),this.unset("elements",i),this.listenTo(this,{"change:properties":this.onChangeProperties})},onChangeProperties:function(e,t){i.execute("section:set:properties",e.id,e.toJSON().properties)},generateSelector:function(){return'.wsite-section[data-section="'+this.get("section_id")+'"]'},getHeight:function(){return parseInt(this.getBaseStyle().height,10)},set:function(e,i,n){var o;return null==e?this:("object"==typeof e?(o=e,n=i):(o={})[e]=i,"string"==typeof o.properties&&(o.properties=JSON.parse(o.properties)),t.Model.prototype.set.call(this,o,n))},clearElements:function(){return i.request("section:clear",this.id)}});return r}),_wAMD.define("site/editor/sections/collection/Sections",["backbone-all","site/editor/sections/model/Section","editor-site-shared/relay"],function(e,t,i){var n=e.Collection.extend({model:t,comparator:"section_order",initialize:function(){this.listenTo(this,"add",this.onAdd),i.commands.removeHandlers(["sections:properties:update"]),i.commands.setHandlers({"sections:properties:update":this.updateSectionProperties.bind(this)})},remove:function(t,i){if(i){var n=e.Collection.prototype.remove.call(this,t);this.onRemove(n,i)}},onAdd:function(e){this.updateSectionsOrder(e,1)},onRemove:function(e,t){i.execute("section:remove",e.id,t),this.updateSectionsOrder(e,-1)},updateSectionBackgroundImage:function(e,t){var i=this.get(e);i.setBackgroundImage(t),this.trigger("sections:updated")},shiftSections:function(e,t){var n=this.get(e),o=this.indexOf(n),r=o+t,s=this.at(r),a=s.get("section_id"),l=n.get("section_order"),c=s.get("section_order");n.set("section_order",c),s.set("section_order",l),this.sort(),i.request("section:shift",e,t).done(function(){this.trigger("section:shift",e,a,t)}.bind(this))},updateSectionsOrder:function(e,t){var i=this.indexOf(e);this.each(function(e,n){if(n>i){var o=e.get("section_order");e.set("section_order",o+t,{silent:!0})}})},updateSectionProperties:function(e){_.each(e,function(e,t){var i=this.get(t);i.set("properties",e)},this),this.trigger("sections:updated")},getImageEditorObject:function(){return this.reduce(function(e,t){return _.extend(e,t.getImageEditorObject())},{})}});return n}),_wAMD.define("tpl!sections/areas/editor-section-container.tpl",[],function(){return'{{! used within the editor }}\n\n<div id="{{elId}}" class="weebly-area wsite-elements {{containerClassName}}">\n	{{{sections}}}\n</div>\n'}),_wAMD.define("editor-site-shared/build/areas/ElementAreaCollection",["jquery","underscore","editor/app","site/editor/app","mustache","editor-site-shared/relay","editor-site-shared/ui/context","site/editor/ui/beacon","site/editor/areas/mixins/ElementAreaMixin","site/editor/sections/collection/Sections","editor/sections/utils","site/published/sections/utils","editor-site-shared/build/areas/Area","editor-site-shared/ui/constants","site/editor/ui/utils","editor/build/themes/data","tpl!sections/areas/editor-section-container.tpl"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p,f,m,g){var v=Class.create(h,l,{hasSectionsInTheme:!1,initialize:function($super,e,t){$super(e,t),this.sections=new c(e.sections,{context:t}),this.sections.on({"sections:updated":function(){n.execute("themeBackground:extend",this.sections.getImageEditorObject()),n.vent.trigger("section:background:image:render")},"section:shift":this.renderShiftedSections},this),this.context=t,this.hasSectionsInTheme=this.hasSections(),this.elID="",this.isMain()&&(this.elID="secondlist"),s.inEditorContext()&&i.vent.trigger("editor:elementareacollection:unrender").on({"section:add:after":this.addSection,"editor:elementareacollection:unrender":function(){i.vent.off(["section:add:after","editor:elementareacollection:unrender"].join(" "),null,this)}},this)},attachEventListeners:function(){this.detachAllEvents(),r.commands.setHandlers({"section:background:image:update":this.updateSectionBackgroundImage.bind(this)}),r.on({"section:add:after":this.addSection,"section:remove:after":this.removeSection},this)},detachAllEvents:function(){r.commands.removeHandlers(["section:background:image:update"]),r.off(["section:add:after","section:remove:after"].join(" "),null,this)},hasSections:function(){var e=window.getPageType(currentPage,currentThemeData,_W.view.isMobileView),t=m.currentThemeData.page_type_templates[e];return d.pageHasSectionsMarkup(t)&&this.isMain()},getHTML:function(){var e={elId:this.elID,containerClassName:"footer"==this.name||"footer"==this.type?" wsite-footer":" wsite-not-footer"};return e.sections=this.sections.reduce(function(e,t){return e+t.get("elementArea").getHTML()},""),o.render(g,e)},getInnerHTML:function(){return this.el.innerHTML},renderShiftedSections:function(e,t,i){var n=u.getSectionElement(t),o=u.getSectionElement(e),r=n.parent("."+p.SECTION_WRAP_NAME),s=o.parent("."+p.SECTION_WRAP_NAME);0>i?r.before(s):r.after(s),f.scrollToElement(s),this.afterRender(),this.sections.get(e).trigger("sections:shifted")},afterRender:function(){this.hasSectionsInTheme&&this.attachEventListeners(),this.sections.each(function(e){e.get("elementArea").afterRender()},this)},addSection:function(t){var i=t.section_order-1,n=this.sections.add(t,{at:i,context:this.context});if(!s.inEditorContext()){var o=n.get("elementArea"),r=o.getHTML(),a=e("#"+this.elID),l=a.children(),c=l.eq(i);if(c.length?c=c.before(r).prev():(a.append(r),c=u.getSectionElement(t.section_id)),1===l.length){var h=l.eq(0),p=h.find(".empty-element-message");p.length&&(p.height(0),d.resizeEmptyMessage(h))}o.afterNewSection()}},removeSection:function(e){if(!s.inEditorContext()&&(u.getSectionElement(e).parent().remove(),1===this.sections.length)){var t=u.getSectionElement(this.sections.first().id);d.resizeEmptyMessage(t)}},getAreaFromSectionId:function(e){return this.sections.get(e).get("elementArea")},getSectionFromElementId:function(e){var t;return this.sections.some(function(i){var n=i.get("elementArea").findElement(i.get("elementArea").elements,e);return n?(t=i,!0):void 0}),t},updateSectionBackgroundImage:function(e,t){this.sections.updateSectionBackgroundImage(e,t)},spliceElement:function(e){var t=this.getSectionFromElementId(e);return t?t.get("elementArea").spliceElement(e):null},moveAbove:function(e,t){var i=this.getSectionFromElementId(e);if(!i)throw"Target element: "+e+", does not exist in sections.";i.get("elementArea").moveAbove(e,t)},moveBelow:function(e,t){var i=this.getSectionFromElementId(e);if(!i)throw"Target element: "+e+", does not exist in sections.";i.get("elementArea").moveBelow(e,t)},moveToSection:function(e,t){var i=this.getAreaFromSectionId(t);if(!i)throw"Section: "+t+" does not exist in sections.";
i.relocateElement(e,0)},afterRemoveElement:function(){this.sections.each(function(e){e.get("elementArea").afterRemoveElement()})},getElements:function(e){return this.getAreaFromSectionId(e).elements},isMain:function(){return("content"===this.type||"blog"==this.context.kind&&currentBlog.postId)&&!this.name&&"store"!=this.context.kind},unrender:function(){this.detachAllEvents(),this.sections.each(function(e){e.get("elementArea").unrender()})}});return h.register(function(e){return"content"===e.type&&!e.name&&-1!==Object.keys(e).indexOf("sections")},v),v}),_wAMD.define("site/editor/sections/model/HeaderSection",["underscore","editor-site-shared/relay","editor-site-shared/sections/SectionMixin","editor-site-shared/sections/BaseHeaderSectionModel","editor-site-shared/ui/constants"],function(e,t,i,n,o){var r=n.extend({HEADER_SECTION_PROPERTIES:{BASE_SETTING_KEY:"base_setting",BASE_SETTING_PROPERTIES:["height","vertical-align"]},initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this.get("setting"),"headerSectionSetting:updated",function(){this.trigger("headerSection:updated")})},onChange:function(e){var i=Object.keys(e.changed);(1!==i.length||"header_setting_id"!==i[0])&&t.execute("headerSection:save",this.id,this.toJSON())},hasNewSetting:function(){return this.get("setting").isNew()},generateSelector:function(){return"."+o.HEADER_SECTION_CLASS_NAME},getBaseSetting:function(){var e=this.get(this.HEADER_SECTION_PROPERTIES.BASE_SETTING_KEY)||{};return this.get("setting").isBackgroundResizeable()||delete e.height,e},getBaseStyle:function(){return e.extend({},this.get("setting").getBaseStyle(),this.getBaseSetting())},getSectionStyle:i.getSectionStyle,setBaseStyle:function(t,i){var n=this.HEADER_SECTION_PROPERTIES.BASE_SETTING_KEY,o=this.HEADER_SECTION_PROPERTIES.BASE_SETTING_PROPERTIES,r=JSON.parse(JSON.stringify(this.get(n)))||{};r=e.extend(r,e.pick(t,o)),e.isEmpty(r)||this.set(n,r,i);var s=e.omit(t,o);e.isEmpty(s)||this.get("setting").setBaseStyle(s,i)},getHeight:function(){return parseInt(this.getBaseSetting().height,10)},hasBaseStyle:function(){return this.hasBaseSetting()||this.get("setting").hasBaseStyle()},hasBaseSetting:function(){return e.keys(this.get(this.HEADER_SECTION_PROPERTIES.BASE_SETTING_KEY)).length}});return r}),_wAMD.define("tpl!sections/areas/header-section-area.tpl",[],function(){return'<div class="wsite-section-wrap">\n	<div {{#el_id}}id="{{el_id}}"{{/el_id}} class="wsite-section wsite-header-section{{#class_names}} {{class_names}}{{/class_names}}" style="{{style}}" {{#data}}data-{{key}}="{{value}}" {{/data}}>\n		<div class="wsite-section-content">\n			{{{prefix_html}}}\n				<div class="wsite-section-elements">\n					{{{content}}}\n				</div>\n			{{{postfix_html}}}\n		</div>\n		<div class="{{highlight_class_name}}"></div>\n	</div>\n</div>\n'}),_wAMD.define("editor-site-shared/build/areas/HeaderSectionArea",["jquery","underscore","mustache","config","site/editor/app","site/editor/ui/beacon","editor-site-shared/relay","editor-site-shared/build/areas/AbstractSectionArea","editor/build/themes/data","site/editor/sections/model/HeaderSection","site/editor/sections/SectionControlView","editor/sections/utils","site/published/sections/utils","site/editor/ui/utils","tpl!sections/areas/header-section-area.tpl","tpl!sections/empty-messages/empty.tpl","tpl!sections/empty-messages/layouts.tpl","editor-site-shared/ui/constants","editor-site-shared/build/areas/Area"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p,f,m,g,v,b){var y=Class.create(a,{initialize:function($super,e,t){$super(e,t),this.parentString=e.parent_string,this.section=new c(e.header_section),this.containerID=v.HEADER_SECTION_AREA_ID,this.section.on("headerSection:updated",function(){o.execute("themeBackground:extend",this.section.getImageEditorObject()),o.vent.trigger("headerSection:background:image:render")},this),this.section.get("setting").on({"change:header_setting_id":function(e,t){this.updateBackgroundId(t)}},this)},afterRender:function($super){this.innerElID=this.innerElID||this.elID,this.elID=this.containerID,$super(),this.innerEl=e("#"+this.innerElID)[0]},insertEmptyMessage:function(){var t="";if(n.chromeless)t=i.render(m,{});else{var o={content_area:this.name,has_sections:!0,is_header_section:!0};t=i.render(g,o);var r=e(t);t=r[0].outerHTML}return t},getHTML:function(){var e=this.getInnerHTML(),t=l.currentThemeData,n=t.page_type_templates[window.currentPageType],o={el_id:this.containerID,style:this.section.getSectionStyle(),content:e,class_names:this.getWrapperClassNames(),highlight_class_name:v.SECTION_HIGHLIGHT_CLASS_NAME,prefix_html:n.header_prefix_mustache,postfix_html:n.header_postfix_mustache};return this.parentString&&(o.data=[{key:v.HEADER_SECTION_PARENT_STRING_NAME,value:this.parentString}]),i.render(f,o)},rerender:function(){var t=e(this.getHTML()).find("."+v.HEADER_SECTION_CLASS_NAME)[0];this.el.innerHTML=t.innerHTML,this.afterRender()},getWrapperClassNames:function($super){var e=[$super(),"wsite-header-elements"];if(this.name===v.HEADER_SECTION_TAG_NAME){var t=v.HEADER_SECTION_BACKGROUND_CLASS_NAME;this.section.hasNewSetting()||(t=t+"-"+this.section.get("setting").id),e.push(t)}return e.join(" ")},attachEditModeListeners:function($super){$super(),s.commands.setHandlers({"headerSection:hideEditBox":this.hideEditMode.bind(this),"headerSection:clear":this.clearSection.bind(this)}),s.on({"headerSection:layoutSave":this.onLayoutSave,"headerSection:set:properties:after":this.setStyle,"pageLayouts:headerSectionLayoutApplied":this.onLayoutApplied},this)},detachEditModeListeners:function($super){$super(),s.commands.removeHandlers(["headerSection:clear","headerSection:hideEditBox"]),s.off(["headerSection:layoutSave","headerSection:set:properties:after","pageLayouts:headerSectionLayoutApplied"].join(" "),null,this)},showEditMode:function($super){if(!this.control){var e=this.section.get("setting"),t=e.isCustomized(),i=this.section.isBackgroundEditable(),n=0===this.elements.length,o=!t&&n;this.control=this.initializeControlView({model:e,isHeaderSection:!0,isSectionEmpty:n,showEdit:i,showDelete:!1,showAddLayout:o,showChangeLayout:!o,showMove:!1,fallbackAlignment:this.$sectionEl.css("vertical-align"),baseSetting:this.section.getBaseSetting(),forceRepositionBelow:!0});var r=d.CONTROL_HEIGHT+d.CONTROL_ARROW_HEIGHT;p.scrollToElement(this.$sectionEl,{centerFallback:"bottom",paddingBottom:r}),$super()}},chooseSectionLayout:function(){var e=this.section.id,t=this.section.generateSelector();return r.show("section:chooseSectionLayout",t,{sectionId:e,parentString:this.parentString,isHeaderSection:!0,placement:"bottom"}).always(function(){r.close("section:chooseSectionLayout"),this.hideEditMode()}.bind(this))},applyVideoStillImage:function(e){o.themeBackground.applyBackgroundToElement(e,"header-section-"+this.section.id)},replaceArea:function(t){var i=e(this.getHTML());e(t).parents("."+v.SECTION_WRAP_NAME).replaceWith(i),this.el=i.find(".weebly-content-area")[0]},updateBackgroundId:function(t){var i=e(this.el),n=v.HEADER_SECTION_BACKGROUND_CLASS_NAME+"-"+t,o=new RegExp(v.HEADER_SECTION_BACKGROUND_CLASS_NAME+"-\\d+","ig");i.is("."+n)||(i.attr("class",function(e,t){return t.replace(o,"")}),i.addClass(n))},onLayoutSave:function(){if(t.result(this.section,"hasBackgroundVideo")){var i=e(this.el);h.destroyVideoBackground(i)}},onLayoutApplied:function(){if(t.result(this.section,"hasBackgroundVideo")){var i=e(this.el),n=this.section.getBackgroundContent();h.applyBackgroundVideo(i,n,!0)}this.hideEditMode()},onControlBackgroundOpen:function(e,t){var i=t?"editor:background:replace":"editor:background:open",n="header-section";this.section.hasNewSetting()||(n=n+"-"+this.section.get("setting").id),this.hideEditMode(),s.execute(i,n),p.scrollToElement(this.$sectionEl)},onControlLayoutChange:function(){var e={sectionId:this.section.id,isHeaderSection:!0};this.control.close(),r.show("section:confirmDeleteElements",this.section.generateSelector(),e).always(function(){r.close("section:confirmDeleteElements")}).fail(function(){this.hideEditMode()}.bind(this)).done(function(){this.chooseSectionLayout()}.bind(this))}});return b.register(function(e){return"content"===e.type&&e.name===v.HEADER_SECTION_TAG_NAME&&e.elements},y),y}),function(e){function t(e,t){this.scroll=e,this.options=t}e.fn.weeblyScroll=function(i){var n=Array.prototype.slice.call(arguments);return this.each(function(){var o=e(this),r=o.data("weeblyScroll");"string"==typeof i?(r&&r[i].apply(r,n.slice(1)),"destroy"==i&&o.removeData("weeblyScroll")):r?(r.destroy(),r.init()):(r=new t(o,i),r.init(),o.data("weeblyScroll",r))}),this},t.prototype.init=function(){var t=this;t.outer=t.scroll.parent().addClass("w-scroll-outer").append("<div class='w-scrollbar w-scrollbar-v'><div class='w-scrollbar-inner'><div class='w-scrollbar-handle'></div></div></div><div class='w-scrollbar w-scrollbar-h'><div class='w-scrollbar-inner'><div class='w-scrollbar-handle'></div></div></div><div class='w-scroll-corner'></div>"),t.scroll.addClass("w-scroll").on("scroll.weeblyScroll",t.updateScroll.bind(t)),t.content=t.scroll.find("> :first-child").addClass("w-scroll-content"),t.hbar=t.outer.find(".w-scrollbar-h"),t.hbarInner=t.hbar.find(".w-scrollbar-inner"),t.hbarHandle=t.hbar.find(".w-scrollbar-handle"),t.vbar=t.outer.find(".w-scrollbar-v"),t.vbarInner=t.vbar.find(".w-scrollbar-inner"),t.vbarHandle=t.vbar.find(".w-scrollbar-handle"),t.corner=t.outer.find(".w-scroll-corner"),e.each([t.vbarHandle,t.hbarHandle],function(t,i){e(i).attr("unselectable","on").on("selectstart",!1)}),t.vbarHandle.on("mousedown.weeblyScroll",t.vbarHandleMousedown.bind(t)),t.hbarHandle.on("mousedown.weeblyScroll",t.hbarHandleMousedown.bind(t)),t.update(),setTimeout(function(){t.update()},0)},t.prototype.update=function(){var e=this;if(e.scroll.is(":visible")){e.scroll.removeClass("w-has-native-scrollbars");var t=Math.ceil(e.scroll.outerWidth()-e.scroll[0].clientWidth),i=Math.ceil(e.scroll.outerHeight()-e.scroll[0].clientHeight);(t||i)&&e.scroll.addClass("w-has-native-scrollbars"),e.scroll.css({"padding-right":t,"padding-bottom":i,"margin-right":-t,"margin-bottom":-i}),e.content.css({"margin-right":-t,"margin-bottom":-i});var n,o=e.availableWidth=e.outer.width(),r=e.content.outerWidth();r>o&&i?(n=!0,e.hbar.show(),e.content.css("padding-bottom",e.hbar.outerHeight())):(n=!1,e.hbar&&e.hbar.hide(),e.content.css("padding-bottom",""));var s,a=e.availableHeight=e.outer.height(),l=e.content.outerHeight();if(l>a&&t?(s=!0,e.vbar.show(),e.content.css("padding-right",e.vbar.outerWidth())):(s=!1,e.vbar&&e.vbar.hide(),e.content.css("padding-right","")),n||s?e.scroll.addClass("w-has-scrollbars"):e.scroll.removeClass("w-has-scrollbars"),n&&s){var c=e.vbarInner.outerWidth(),d=e.hbarInner.outerHeight();e.hbar.css("right",c),e.vbar.css("bottom",d),e.corner.css({width:c,height:d}).show()}else e.vbar.css("bottom",""),e.hbar.css("right",""),e.corner.hide();e.overflowX=n,e.overflowY=s,n&&(e.contentWidth=e.content.outerWidth(),e.hbarLength=e.hbarInner.outerWidth()),s&&(e.contentHeight=e.content.outerHeight(),e.vbarLength=e.vbarInner.outerHeight()),e.updateScroll()}},t.prototype.updateScroll=function(){var e=this;e.overflowX&&e.hbarHandle.css({left:e.scroll.scrollLeft()/e.contentWidth*e.hbarLength,width:e.availableWidth/e.contentWidth*e.hbarLength}),e.overflowY&&e.vbarHandle.css({top:e.scroll.scrollTop()/e.contentHeight*e.vbarLength,height:e.availableHeight/e.contentHeight*e.vbarLength})},t.prototype.vbarHandleMousedown=function(t){function i(e){var t=e.pageY-r,i=t*o.content.outerHeight()/o.vbarInner.outerHeight();o.scroll.scrollTop(s+i)}function n(){o.outer.removeClass("w-scrolling"),e("body").removeClass("w-body-scrolling"),e(document).off("mousemove",i).off("mouseup",n)}var o=this,r=t.pageY,s=o.scroll.scrollTop();o.outer.addClass("w-scrolling"),e("body").addClass("w-body-scrolling"),e(document).on("mousemove",i).on("mouseup",n)},t.prototype.hbarHandleMousedown=function(t){function i(e){var t=e.pageX-r,i=t*o.content.outerWidth()/o.hbarInner.outerWidth();o.scroll.scrollLeft(s+i)}function n(){o.outer.removeClass("w-scrolling"),e("body").removeClass("w-body-scrolling"),e(document).off("mousemove",i).off("mouseup",n)}var o=this,r=t.pageX,s=o.scroll.scrollLeft();o.outer.addClass("w-scrolling"),e("body").addClass("w-body-scrolling"),e(document).on("mousemove",i).on("mouseup",n)},t.prototype.destroy=function(){var e=this;e.outer.removeClass("w-scroll-outer"),e.scroll.off("scroll.weeblyScroll").removeClass("w-scroll").removeClass("w-has-scrollbars").removeClass("w-has-native-scrollbars").css({"padding-right":"","padding-bottom":"","margin-right":"","margin-bottom":""}),e.content.removeClass("w-scroll-content").css({"margin-right":"","margin-bottom":""}),e.vbarHandle.off("mousedown.weeblyScroll"),e.hbarHandle.off("mousedown.weeblyScroll"),e.hbar.remove(),e.vbar.remove(),e.corner.remove(),e.hbar=null,e.hbarInner=null,e.hbarHandle=null,e.vbar=null,e.vbarInner=null,e.vbarHandle=null,e.corner=null}}(jQuery),_wAMD.define("legacy/jquery.weeblyscroll",function(){}),_wAMD.define("util/ui/HoverToolbar",["jquery","w-global","legacy/jquery.weeblyscroll"],function(e,t){function i(t){function i(e){v=$(e)}function n(e){b=$(e).observe("mouseover",r).observe("mouseout",s)}function o(){_++}function r(){T&&(u(),_++)}function s(){var e=++_;y=setTimeout(function(){e==_&&E&&c()},C)}function a(e){E=e}function l(e){C=e}function c(){clearTimeout(y),m&&m.visible()&&(m.hide(),t.overflow&&d(),w.afterHide())}function d(){e(m).removeClass("inner-overflow w-massless-scroll").find(".hover-toolbar-inner").css("height","").find(".hover-toolbar-inner2").weeblyScroll("destroy")}function u(){clearTimeout(y),m&&v&&w.beforeShow()!==!1&&(m.show(),p())}function h(){return"none"!=m.style.display}function p(){if(h()){var i,n,o,r,s=document.viewport.getWidth(),a=Math.max($(document.body).getHeight(),document.viewport.getHeight(),e(document).height()),l=safeCumulativeOffset(v),c=v.getWidth(),u=v.getHeight(),p=t.alignElement,f=m.down(".hover-toolbar-arrow"),g=f.getWidth(),b=(m.down(".hover-toolbar-inner"),m.getWidth()),y=m.getHeight(),w=m.getOffsetParent(),_=safeCumulativeOffset(w);if(r=t.forceAbove?!0:t.forceBelow?!1:t.preferAbove?l.top-y<0&&l.top+u+y<=a?!1:!0:l.top+u+y>a&&l.top-y>=0?!0:!1,r?(m.removeClassName("hover-toolbar-below").addClassName("hover-toolbar-above"),i=l.top-y):(m.removeClassName("hover-toolbar-above").addClassName("hover-toolbar-below"),i=l.top+u),n=l.left,"left"==t.align||(n+="right"==t.align?c-b:c/2-b/2),n=Math.max(n,2),n=Math.min(n,s-b-2),p){p=$(p);var E=safeCumulativeOffset(p),T=p.getWidth();s/2>n+b/2?(n=Math.min(n,E.left+T-b),n=Math.max(n,E.left)):(n=Math.max(n,E.left),n=Math.min(n,E.left+T-b))}i+=t.adjustY||0,n+=t.adjustX||0,t.overflow&&!m.hasClassName("inner-overflow")&&(i+y>a-10?e(m).addClass("inner-overflow w-massless-scroll").find(".hover-toolbar-inner").css("height",a-20-i).find(".hover-toolbar-inner2").weeblyScroll():d()),o=t.centerArrow?b/2-g/2:l.left+c/2-n-g/2,o=Math.max(o,5),o=Math.min(o,b-g-5),i-=_.top,n-=_.left,m.setStyle({top:i+"px",left:n+"px"}),e(".hover-toolbar-arrow").css({left:o+"px"})}}function f(){m.stopObserving("mouseover",o).stopObserving("mouseout",s),b.stopObserving("mouseover",r).stopObserving("mouseout",s),m.parentNode&&m.remove()}t=t||{};var m,g,v,b,y,w=this,_=0,E=!0,T=!0,C=t.hideDelay||100;this.setTargetElement=i,this.setHoverElement=n,this.show=u,this.hide=c,this.position=p,this.destroy=f,this.setHideDelay=l,this.setAutoHide=a,this.setAutoShow=function(e){T=e},this.getElement=function(){return m},this.getInnerElement=function(){return g},this.afterHide=t.afterHide||function(){},this.beforeShow=t.beforeShow||function(){},this.isShowing=h,m=new Element("div",{"class":"hover-toolbar hover-toolbar-above"}).setStyle({zIndex:t.zIndex||9998,display:"none"}).update("<div class='hover-toolbar-arrow hover-toolbar-arrow-border'></div><div class='hover-toolbar-arrow'></div><div class='hover-toolbar-inner'><div class='hover-toolbar-inner2'><div class='hover-toolbar-inner3'></div></div></div>"),g=m.down(".hover-toolbar-inner3"),$(t.parent||document.body).insert(m),m.observe("mouseover",o).observe("mouseout",s),i(t.targetElement),n(t.hoverElement||t.targetElement)}return i}),_wAMD.define("editor-site-shared/build/areas/ImageArea",["jquery","config","editor-site-shared/build/areas/Area","util/ui/HoverToolbar","site/editor/image-editor/module","site/editor/ui/images/tooltip","site/editor/ui/weebly_editbox","editor-site-shared/relay","editor-site-shared/ui/utils","editor-site-shared/image-editor/utils"],function(e,t,i,n,o,r,s,a){var l=Class.create(i,{tagName:"span",getInnerHTML:function(){var e=this.attrs;this.data||(this.data={});var t=this.data,i=t.isImage;if(t.type&&(i="image"===t.type&&t.image),i){var n=t.url;n&&!n.match("://")&&(n="/uploads/"+n);var o=t.link;t.type&&(n=t.image.editorUrl);var r="<img src='"+n+"' style='"+(e["max-width"]?"max-width:"+e["max-width"]+"px;":"")+(e["max-height"]?"max-height:"+e["max-height"]+"px;":"")+"'/>";return o&&(r="<a href='"+o+"' onclick='return false'>"+r+"</a>"),r}return"<table class='weebly-image-area-placeholder' style='width:"+(e["max-width"]||e["max-height"]||100)+"px;height:"+(e["max-height"]||e["max-width"]||100)+"px;'><tbody><tr><td><img src='/weebly/images/image_placeholder.png' /></td></tr></tbody></table>"},afterRender:function($super){$super();var e=this.el.down();"TABLE"==e.tagName?(e.observe("click",function(){r.hide(),this.chooseImage({type:"area",area_page_id:this.context.pageID||"",area_type:this.type,area_name:this.name,width:this.attrs["max-width"]||"",height:this.attrs["max-height"]||""})}.bind(this)),r.init(e,"Click to add image")):t.chromeless||this.renderToolbar()},chooseImage:function(e){a.request("chooseImage",e).done(function(e){this.data=e,this.rerender()}.bind(this))},renderToolbar:function(){var t=this,i=t.toolbar=new n({targetElement:t.el,parent:"_editor-ui"}),o=i.getInnerElement(),l=t.data;e(o).addClass("image-area-toolbar");var c=e("<span>",{"class":"hover-toolbar-link"+(l.link?" hover-toolbar-link-pressed":""),appendTo:o}).on("click",function(e){e.stopPropagation(),i.hide(),r.hide(),a.request("linker:open",{remove:!0,existing:s.parseLinkString(l.image.link)}).done(function(e){e?l.image.link=e:delete l.image.link,t.save(),t.rerender()})}),d=e("<span>",{"class":"hover-toolbar-remove",appendTo:o}).on("click",function(){r.hide(),t.data.type="text",t.save(),t.rerender()}),u=t.el,h=(u.down("img"),e("<span>",{"class":"hover-toolbar-edit",html:"Edit",prependTo:o}).on("click",function(){this.toolbar.hide(),r.hide();var e={mode:"area",imageEditorData:this.data,area:{page_id:this.context.pageID||"",type:this.type,name:this.name}};this.editImage(e)}.bind(this)));c=c[0],h=h[0],d=d[0],r.init(c,_W.utl("javascript.editor-site-shared.build.areas.ImageArea_2")),r.init(h,_W.utl("javascript.editor-site-shared.build.areas.ImageArea_3")),r.init(d,_W.utl("javascript.editor-site-shared.build.areas.ImageArea_4"))},editImage:function(e){o.edit(e).done(function(e){this.data=e,this.rerender()}.bind(this))},unrender:function($super){$super(),this.toolbar&&(this.toolbar.destroy(),delete this.toolbar)}});return Weebly.ImageArea=l,i.register("image",l),l}),_wAMD.define("editor/build/themes/partialsRenderer",["underscore","mustache"],function(e,t){var i={},n={};return i.setThemePartials=function(t){if(n!==t){for(var i in n)delete n[i];e.extend(n,t)}},i.render=function(o,r,s,a){var l=e.toArray(arguments).slice(1);return l[0]=i.getTemplate(o)||r,n.length&&(l[2]=e.extend(a||{},n)),t.render.apply(t,l)},i.getTemplate=function(e){return e+=".tpl","/"===e[0]&&(e=e.substring(1)),n[e]?n[e]:null},i}),_wAMD.define("tpl!platform/theme/core/shared/areas/logo.tpl",[],function(){return'<span class="wsite-logo">\n{{# max_height }}<table style="height:{{ max_height }}px"><tr><td>{{/ max_height }}\n{{# is_image }}\n	<a href="{{ link }}">\n		<img src="{{ image_url }}"{{# image_css }} style="{{ image_css }}"{{/ image_css }} />\n	</a>\n{{/ is_image }}\n{{^ is_image }}\n	{{^ is_hidden_text }}<a href="{{ link }}">{{/ is_hidden_text }}\n	{{# is_hidden_text }}<span class="wsite-title-placeholder">&nbsp;</span><span style="display:none">{{/ is_hidden_text }}\n	{{{ text }}}\n	{{# is_hidden_text }}</span>{{/ is_hidden_text }}\n	{{^ is_hidden_text }}</a>{{/ is_hidden_text }}\n{{/ is_image }}\n{{# max_height }}</td></tr></table>{{/ max_height }}\n</span>'}),_wAMD.define("site/editor/ui/marker",["jquery","underscore","editor-site-shared/ui/constants","editor-site-shared/relay"],function(e,t,i,n){function o(t,i,n,o){var r=e("#_editor-ui"),s=e("#sortableMarker");s.length||(s=e(l()),r.append(s)),s.css({top:i+"px",left:t+"px",width:n?n+"px":"",height:o?o+"px":""})}function r(e,t,n){var o,r,l=e.position===i.POSITION_LEFT,c=e.position===i.POSITION_RIGHT,d=e.position===i.POSITION_BOTTOM;if(s.call(e.$el,""),e.$el.is(".wsite-multicol-col")){if(l)r=e.$el,o=e.$el.prev();else{if(!c)return;o=e.$el,r=e.$el.next()}a.call(o,"right",n),a.call(r,"left",n)}else d&&t?s.call(e.$el,-(n/3)):a.call(e.$el,h[e.position],n)}function s(e){e?this.css("transform","translateY("+e+"px)"):this.css("transform","")}function a(e,t){if(0!==this.length){var i="padding-"+e,n=this.prop("style")[i];n=n?parseInt(n,10):0,this.css(i,n+t+"px")}}function l(){return e("<div>").attr("id","sortableMarker").addClass("sortableMarker")}var c={},d=null,u=!1,h={};return h[i.POSITION_TOP]="top",h[i.POSITION_RIGHT]="right",h[i.POSITION_BOTTOM]="bottom",h[i.POSITION_LEFT]="left",c.removeMarker=function(){d&&(d.$el&&r(d,u,-15),e("#sortableMarker").remove(),d=null,u=!1)},c.createMarkerFromEdge=function(t){d&&c.removeMarker();var n=e("#_editor-ui").offset().top;if(t.elementId){var s=e("#"+t.elementId);if(!s.length&&(s=e("#inside_"+t.elementId),!s.length))return;var a=s.is(".wsite-multicol-col:first-child"),l=s.is(".wsite-multicol-col:last-child"),h=s.is("li.inside:last-child:not(.wsite-multicol-col li)"),p=t.position===i.POSITION_LEFT,f=t.position===i.POSITION_RIGHT,m=t.position===i.POSITION_BOTTOM,g=0;if((a||l)&&(p||f)){var v=parseInt(s.closest(".wsite-multicol-table-wrap").css("margin-left"),10);a&&p?g=-v:l&&f&&(g=v)}o(t.x1+g,t.y1-n,t.x2-t.x1,t.y2-t.y1),t.$el=s,(p||f||h&&m)&&r(t,h,15),u=h}else o(t.x1,t.y1-n,t.x2-t.x1,t.y2-t.y1);d=t},t.extend(window,c),c}),_wAMD.define("editor-site-shared/ui/edges",["jquery","underscore","editor/app","editor-site-shared/ui/utils","editor-site-shared/ui/context","editor-site-shared/ui/constants","editor-site-shared/relay","site/editor/relay-constants","editor/build/ui/weebly_view"],function(e,t,i,n,o,r,s,a,l){function c(){T.length=0,C.length=0,d()}function d(){D.length=0}function u(e){return t.each(e,h),T}function h(e){if(!(!e||e.headerSection&&e.isBlogPost)){if(!e.empty||e.sections||e.headerSection){if(e.empty&&e.headerSection){var i=8,n=3;T.push({area:e,position:r.POSITION_TOP,x1:e.headerSection.left+n,y1:e.headerSection.top+i,x2:e.headerSection.left+e.headerSection.width-n,y2:e.headerSection.top+e.headerSection.height+i,_useElement:!0})}}else T.push({area:e,position:r.POSITION_TOP,x1:e.left,y1:e.top,x2:e.left+e.width,y2:e.top+e.height,_useElement:!0});e.sections?t.each(e.sections,function(t){p(t,e)}):t.each(e.elements,f)}}function p(e,i){e&&(e.elements.length?t.each(e.elements,f):T.push({area:i,section_id:e.section_id,position:r.POSITION_TOP,x1:e.left,y1:e.top,x2:e.left+e.width,y2:e.top+e.height,_useElement:!0}))}function f(e){var i;e.section_id?i=e.section_id:(e.parentColumn||e.parent)&&(i=b(e).section_id),T.push({area:e.area,el:e,section_id:i,position:r.POSITION_TOP,x1:e.left,y1:e.top,x2:e.left+e.width,y2:e.top,_useElement:!1}),l.isMobileView||e.columns||e.parentColumn&&1===e.parentColumn.elements.length||T.push({area:e.area,el:e,section_id:i,position:r.POSITION_RIGHT,x1:e.left+e.width,y1:e.top,x2:e.left+e.width,y2:e.top+e.height,_useElement:!1},{area:e.area,el:e,section_id:i,position:r.POSITION_LEFT,x1:e.left,y1:e.top,x2:e.left,y2:e.top+e.height,_useElement:!1});var n=e.platform_element_id?t.sortBy(e.children,"page_element_order"):e.children;t.each(n,function(e,t){e.element_id===r.CONTENT_AREA_ELEMENT_ID?m(e,i):f(e)}),t.each(e.columns,g),T.push({area:e.area,el:e,section_id:i,position:r.POSITION_BOTTOM,x1:e.left,y1:e.top+e.height,x2:e.left+e.width,y2:e.top+e.height,_useElement:!1})}function m(e,i){T.push({area:e.area,el:e,section_id:i,position:r.POSITION_TOP,x1:e.left,y1:e.top,x2:e.left+e.width,y2:e.top,_useElement:!1,insideContentAreaElement:!0}),t.each(e.children,function(e){e.element_id===r.CONTENT_AREA_ELEMENT_ID?m(e,i):f(e)}),t.each(T,function(t){t.el&&t.el.parentString&&t.el.parentString===e.content_field_id&&(t.insideContentAreaElement=!0)})}function g(e,i){T.push({area:e.el.area,section_id:b(e.el).section_id,column:e,column_id:e.el.content_field_id+"-col"+i,column_index:i,el:e.el,position:r.POSITION_LEFT,x1:e.left,y1:e.top,x2:e.left,y2:e.top+e.height,_useElement:!1}),t.each(e.elements,f),T.push({area:e.el.area,section_id:b(e.el).section_id,column:e,column_id:e.el.content_field_id+"-col"+i,column_index:i,el:e.el,position:r.POSITION_RIGHT,x1:e.left+e.width,y1:e.top,x2:e.left+e.width,y2:e.top+e.height,_useElement:!1})}function v(){return n.getSectionData().then(function(e){if(0===e.length)return[];e=t.sortBy(e,"section_order"),C=e.map(function(e){return{section_id:e.section_id,section_order:e.section_order,position:r.POSITION_TOP,x1:e.left,y1:e.top,x2:e.left+e.width,y2:e.top+e.height,_useElement:!0}});var i=e[e.length-1];return C.push({section_id:i.section_id,section_order:i.section_order+1,position:r.POSITION_BOTTOM,x1:i.left,y1:i.top+i.height,x2:i.left+i.width,y2:i.top+i.height,_useElement:!0}),C})}function b(e){return e.parentColumn?b(e.parentColumn.el):e.parent?b(e.parent):e}function y(e,i){var n=e.area,o=e.el;if(n&&n.spotlighted&&-1===i.indexOf(n))return!1;var r;return o&&o.parent&&(r=o.parent),o&&o.parentColumn&&(r=o.parentColumn.el),r&&r.spotlighted?!!t.findWhere(i,{element:r}):r?y({el:r,area:n},i):-1!==i.indexOf(n)}function w(){return e.when(n.getActiveContentAreas(),T.length?T:E.buildDroppableEdges()).then(function(e,i){return t.each(i,function(t){if(y(t,e)){var i,n=t.el;n&&(i=n.parent),(!i||!i.platform_element_id||n.element_id===r.CONTENT_AREA_ELEMENT_ID&&n.droppable)&&D.push(t)}}),D})}function _(e,i,n,o){var s=null;if(!i.length)return s;t.isNull(n)&&(n=2);var a=e.pageX,l=e.pageY;return t.each(i,function(e){if(e._useElement===!0&&(a>=e.x1&&a<=e.x2&&l>=e.y1&&l<=e.y2||o&&l<=e.y1&&e.section_order&&1===e.section_order)){switch(s=t.clone(e),e.position){case r.POSITION_LEFT:s.x2=s.x1;break;case r.POSITION_TOP:s.y2=s.y1;break;case r.POSITION_RIGHT:s.x1=s.x2;break;case r.POSITION_BOTTOM:s.y1=s.y2}return!1}e._d=null,e.y1===e.y2&&a>=e.x1&&a<=e.x2?e._d=Math.abs(l-e.y1)+.01*Math.abs(a-(e.x1+e.x2)/2):e.x1===e.x2&&l>=e.y1&&l<=e.y2&&(e._d=Math.abs(a-e.x1)/n+.01*Math.abs(l-(e.y1+e.y2)/2)),null!==e._d&&(!s||e._d<s._d)&&(s=e)}),s}var E={},T=[],C=[];i.vent.on({"editor:elements:changed viewChange":c,"section:add:after section:remove:after":c}),s.on({"editor:elements:changed pageRendered":c,"editor:spotlight:open editor:spotlight:close":d,"section:add:after section:remove:after":c}),s.on(a.EVENTS.DOCUMENT_RESIZED,c);var S;E.init=function(e){S||(S=e,S.vent.on("editor:spotlight:open editor:spotlight:close",d),n.init(S),o.inEditorContext()?s.on("editor:middle",c):S.vent.on("editor:middle",c))},E.buildDroppableEdges=function(){return c(),n.getAreasWhere().then(u)},E.buildSectionEdges=v,E.getEdge=function(i,n){return e.when(T.length?!0:E.buildDroppableEdges()).then(function(){var e=null;return T.length?(t.each(T,function(t){return n===t.position&&!t.area.empty&&t.el&&i.id===t.el.id?(e=t,!1):void 0}),e):e})};var D=[];return E.findClosestDroppableSectionEdge=function(t){return e.when(C.length?C:v()).then(function(e){var i=!0;return _(t,e,2,i)})},E.findClosestDroppableEdge=function(i){return e.when(n.getElements(),D.length?D:w()).then(function(e,n){var o=null;return t.each(e,function(e){return i.pageX>e.left&&i.pageY>e.top&&i.pageX<e.left+e.width&&i.pageY<e.top+e.height?(o=e.width/e.height*.9,!1):void 0}),_(i,n,o)})},E}),_wAMD.define("util/jquery-ui-draggable",["jquery","jquery-ui/draggable"],function(e){e.widget("ui.draggable",e.ui.draggable,{_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css({position:"absolute",zIndex:"1000"}).appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})}})}),_wAMD.define("editor-site-shared/ui/mouse-events",["jquery","underscore","editor/app","editor-site-shared/ui/utils","editor-site-shared/ui/context","site/editor/ui/images/controls","editor-site-shared/ui/edges","editor-site-shared/ui/constants","editor-site-shared/relay","util/jquery-ui-draggable"],function(e,t,i,n,o,r,s,a,l){function c(){return I||(I=e(document)),I}function d(){return k||(k=e("body")),k}function u(){return A?A:A=o.getScrollContainer()}function h(){return u()[0]===window?d():A}function p(i,o){window.isDraggingElement=!0,N=this,r.disable(),e(this).trigger("dragstart:before",o),S=o.originalPosition.top,D=o.originalPosition.left,h().addClass("no-hovering");var c=o.elementObject;c&&c.startDrag&&c.startDrag(i,o);var d=!1;t.each(Weebly.pageContext.elementsByID,function(e){e.eid==a.CONTENT_AREA_ELEMENT_ID&&(d=!0)}),t.each(Weebly.siteContext.elementsByID,function(e){e.eid==a.CONTENT_AREA_ELEMENT_ID&&(d=!0)}),d&&(n.clearPageDataCache(),s.buildDroppableEdges());var u=c?c.id||c.eid:null;l.trigger("dragstart",u),O.vent.trigger("dragstart",u)}function f(){var t={helper:this};return e(this).trigger("draghelper",t),C=t.helper}function m(e){(e.x||e.y)&&(P=setInterval(function(){O.vent.trigger("scrollBy",e.x,e.y,B),l.trigger("scrollBy",e.x,e.y,B)},10))}function g(){clearInterval(P),P=null}function v(t,i){var n=this,o=h().offset(),r=o.top,l=o.left,d=l+A.outerWidth(),u=r+A.outerHeight(),p={left:c().scrollLeft(),top:c().scrollTop()};g();var f={x:0,y:0},v=t.pageX-p.left,y=t.pageY-p.top,w=0;if(e("#_editor-ui").length&&(w=e("#_editor-ui").offset().top),l+M>v&&(f.x=v-l-M),r+M>y&&(f.y=y-r-M),v>d-M&&(f.x=v-d+M),y+w>u-M&&(f.y=y+w-u+M),m(f),e(this).trigger("drag:drag",[i,B]),t.pageX>l+p.left&&t.pageY>r+p.top&&t.pageX<d+p.left&&t.pageY<u+p.top){t.pageX-=l,t.pageY-=r,t.pageX+=j.left,t.pageY+=j.top;var _;_=i.elementObject.eid===a.SECTION_ELEMENT?s.findClosestDroppableSectionEdge(t):s.findClosestDroppableEdge(t),_.done(function(e){b.call(n,t,e,i)})}else b.call(n,t,null,i)}function b(i,n,o){var r=t.clone(o.originalPosition);o.originalPosition.top=o.originalPosition.left=Number.MAX_VALUE;var s=o.elementObject;s&&s.onDrag&&(n=s.onDrag(i,o,n));var a=h().offset();if(o.originalPosition.left+=a.left,o.originalPosition.top+=a.top,!n)return x=null,o.originalPosition.left===Number.MAX_VALUE&&o.originalPosition.top===Number.MAX_VALUE&&(o.originalPosition.left=D,o.originalPosition.top=S),R.execute("removeMarker"),void e(this).trigger("drag:edge:removed",o);if(n!==x){if(x=n,n.el)var l=n.column_id?n.column_id:n.el.id;var c={elementId:l,position:n.position,x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2};R.execute("createMarkerFromEdge",c);var d=j.left+o.helper.outerWidth()/2,u=j.top+o.helper.outerHeight()/2;if("absolute"===o.helper.css("position")){var p=o.helper.offsetParent().offset();d+=p.left,u+=p.top}else d+=o.offset.left-o.position.left,u+=o.offset.top-o.position.top;o.originalPosition.left=a.left,o.originalPosition.top=a.top,o.originalPosition.left+=(n.x1+n.x2)/2-d,o.originalPosition.top+=(n.y1+n.y2)/2-u,e(this).trigger("drag:edge:changed",[n,o])}else o.originalPosition.left=r.left,o.originalPosition.top=r.top}function y(t,i){window.isDraggingElement=!1,g(),h().removeClass("no-hovering"),A=null,B.left=0,B.top=0,C=null,r.enable(),R.execute("removeMarker"),e(this).trigger("dragstop:before",i);var n=i.elementObject;n&&n.stopDrag&&n.stopDrag(t,i,x),e(this).trigger("dragstop:after",i);var o;return!i.noDrop&&x&&(e(this).trigger("dragstop:drop",[i,x]),i.clearDOM===!1&&(o=!1)),l.trigger("dragstop"),O.vent.trigger("dragstop"),N=null,
o}function w(e){t.defer(_.bind(e.delegateTarget))}function _(){var t=e(this).draggable("instance").iframeBlocks;if(void 0!==t&&t.length){var i=h(),n=parseInt(i.css("z-index"),10)+1;t.insertAfter(i);var o=t.offsetParent().eq(0),r=o.offset();t.css({left:"-="+r.left+"px",top:"-="+r.top+"px","z-index":n})}}function E(){if(N){var t=e(N).data("ui-draggable"),i=null;x&&(i={left:(x.x1+x.x2)/2,top:(x.y1+x.y2)/2}),l.trigger("dragmouseup",{originalPosition:i,revert:t.options.revert,revertDuration:t.options.revertDuration})}}var T={isDraggingElement:!1};window.isDraggingElement=T.isDraggingElement;var C,S,D,I,k,O,R,x=null,A=null,P=null,M=50,N=null,L=e.fn.scrollParent;e.fn.scrollParent=function(){if(this.is(C)){var e=u();return e[0]===window&&(e=c()),e}return L.apply(this,arguments)},T.start=p;var B={left:0,top:0},j={left:0,top:0};return i.vent.on("setScroll",function(e,t){u()[0]!==window&&(j.left=e,j.top=t)}),T.drag=v,T.stop=y,T.cancelDrag=function(){if(window.isDraggingElement){var t=document.createEvent("MouseEvents"),i=-5e4;t.initMouseEvent("mousemove",!0,!1,window,1,i,i,i,i,!1,!1,!1,!1,0,null),document.dispatchEvent(t);var n=e(":data(ui-draggable)").filter(function(){var t=e(this);return e(".ui-draggable-dragging").is(t.add((t.data("ui-draggable")||{}).helper))}),o=n.draggable("option","revertDuration"),r=n.draggable("option","revert");n.draggable("option",{revert:!0,revertDuration:0}).trigger("mouseup").draggable("option",{revert:r,revertDuration:o})}},i.vent.on("editor:updateList",T.cancelDrag),e.fn.wDraggable=function(e){if("destroy"===e){c().off("mouseup",E);var i=this.draggable("option","handle");return this.draggable(e).off("mousedown",i||"",w)}return O=e.app,s.init(O),n.init(O),R=o.inEditorContext()?l:O,e=t.extend(e||{},{addClasses:!1,scroll:!1,helper:f,start:p,drag:v,stop:y,revert:!0,iframeFix:!0}),c().on("mouseup",E),this.draggable(e).on("mousedown",e.handle||"",w)},T}),_wAMD.define("site/editor/ui/images/dragging",["jquery","underscore","site/editor/app","site/editor/ui/marker","editor-site-shared/ui/mouse-events","site/editor/ui/images/tooltip","site/editor/ui/images/controls","editor-site-shared/build/elements/ImageElement","editor-site-shared/ui/constants","site/editor/ui/weebly_elements","editor-site-shared/relay","editor-site-shared/ui/utils","legacy/weebly_element_utils","editor-site-shared/build/AreaUtils","jquery-ui/draggable"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p){function f(){e(this).closest("li.inside").addClass("wsite-image-move").end().closest("a").removeAttr("title").on("click",!1)}function m(){window.xhrUploading=null}var g={},v=1e3,b=.3;return g.init=function(p,g,y,w,_,E,T){function C(e,t,i,n){var o,r=(e.left-i)/(n-S);o=y?.33>r?"left":.66>r?"center":"right":.5>r?"left":"right",N!==o&&w(t.helper,t.helper,o,L),N=o}if(p.closest(".platform-element-child").length>0)return function(){};u.init(i);var S,D,I,k,O,R,x,A,P,M,N,L,B,j,K,F=!1;return g.draggable({addClasses:!1,revert:!0,revertDuration:200,create:f,distance:10,helper:function(){var e=p.find("img").clone().attr("id","weebly_image_extras_helper").css({"z-index":v,margin:0,width:"auto","max-width":""}),t=h.getElementObject(p.closest("li.inside")[0]);return K=y?t:new a({eid:"0",li:t.li,imageText:!0,content_fields:[{ucfid:"0",cfid:"0",properties:[{cfpid:"0",ucfpid:"0",property_result:t.getPropertyResult("<!ALIGN!>"),initial_value_set:"",reference_property:"<!ALIGN!>"}]}]},Weebly.pageContext),p.parent().prepend(e),e},start:function(t,i){var n=e(this);r.disable(),s.disable();var o=p.closest(".element-box"),a=o.offset();S=n.width(),D=n.height(),I=p.outerHeight(),A=t.pageY,P=N=E(),M=L=T?T():0,k=a.left,O=a.top,R=o.outerWidth(),x=o.outerHeight(),B=y?null:p.next(),p.css("opacity",b).addClass("weebly-image-dragging"),c.unselectElement(),c.setCurrentElement(p[0]),s.hide(p[0],!0),K&&K.startDrag(t,i)},drag:function(e,i){i.noDrop=!0;var r=i.helper.offset(),s=10,a=h.getElementObject(p.closest("li.inside")[0]);if(a.eid!==l.CURRENT_PARAGRAPH_IMAGE_ELEMENT&&-1===l.STANDALONE_IMAGE_ELEMENTS.indexOf(a.eid)||!(r.left<k-s||r.top<O-s||r.left+S>k+R+s||r.top+D>O+x+s)){j=null,n.removeMarker(),i.helper.addClass("inside-hover"),p.css("visibility",""),i.helper.css("opacity",1);var c;y?c=0:(c=M+e.pageY-A,c=Math.min(c,B.outerHeight()-I),c=Math.max(c,0)),C(r,i,k,R),L!==c&&(L=c,w(i.helper,i.helper,N,L)),F&&(o.stop.call(this,e,i),F=!1)}else{F||(F=!0,i.helper.removeClass("inside-hover"),o.start.call(this,e,i)),p.css("visibility","hidden"),i.helper.css("opacity",b);var d=t.clone(i);y?d.helper=i.helper.closest("li.inside"):K.getContentField().getProperty("<!ALIGN!>").property_result=a.getPropertyResult("<!ALIGN!>"),d.elementObject=K,i.helper.closest(".inside").triggerHandler(e.originalEvent),o.drag.call(this,e,d),K&&K.combiner&&K.combiner.found&&(j=null,n.removeMarker(),C(r,i,K.combiner.found.offset().left,K.combiner.found.width()))}j||K&&K.combiner&&K.combiner.found||(r=p.find("img").offset(),i.originalPosition.top=r.top,i.originalPosition.left=r.left,r=i.helper.parent().offset(),i.originalPosition.top-=r.top,i.originalPosition.left-=r.left)},stop:function(e,t){r.enable(),n.removeMarker(),p.removeClass("weebly-image-dragging").css({opacity:1,visibility:""}),s.enable(),(N!==P||L!==M)&&_(N,L),F&&(t.elementObject=K,o.stop.call(this,e,t),F=!1)}}).on({"drag:edge:changed":function(e,t,i){if(j=t,y){var n=i.helper.closest("li.inside");i.originalPosition.left+=(n.outerWidth()-i.helper.outerWidth())/2,i.originalPosition.top+=(n.outerHeight()-i.helper.outerHeight())/2}},"drag:edge:removed":function(){j=null},"dragstop:drop":function(t,i){if(t.stopPropagation(),y)return void e(K.li).trigger("dragstop:drop",[i,j]);p.hide();var n=j.el,o=j.position,r=j.section_id,s={parent:n?n.parentString:null,content_area:j.area&&j.area.name};(o===l.POSITION_LEFT||o===l.POSITION_RIGHT)&&(s.columns=u.getColumnData(j,{element_id:"30621876"}));var a=p.closest(".inside")[0],c=a.id.replace(/[\D]/g,""),f=h.getElementObject(c).elData,g=f.area.name;window.xhrUploading=p[0].id,d.execute("loading:start","SiteEditorUiImagesDragging::drop"),Weebly.Editor.RPC.Elements.splitImageTextElement(window.currentPage,j.area.is_site_wide,g,c,f.parentString,s,r,n?n.id:null,o===l.POSITION_TOP?"before":"after").always(function(){d.execute("loading:stop","SiteEditorUiImagesDragging::drop"),m()}),d.request("page:navigate",window.currentPage)}}),g.parent().attr("title",""),function(){g.data("ui-draggable")&&g.draggable("destroy").off("drag:edge:changed drag:edge:removed dragstop:drop")}},g}),_wAMD.define("site/editor/ui/image_extras",["jquery","underscore","config","site/editor/app","editor-site-shared/relay","editor/build/utils","site/editor/ui/images/resizing","site/editor/ui/images/controls","site/editor/ui/images/dragging","site/editor/ui/images/tooltip","site/editor/ui/images/managers","site/editor/ui/images/utils","editor-site-shared/ui/constants","legacy/weebly_footer","site/editor/ui/weebly_elements","legacy/weebly_element_utils"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p,f,m){function g(){if(this.idfield){var t=(this.idfield.value||"").match(R);if(t){t=t[1];var i,n;-1!==h.STANDALONE_IMAGE_ELEMENTS.indexOf(t)?(i="div.element",n=v):-1!==h.PARAGRAPH_IMAGE_ELEMENTS.indexOf(t)?(i="span.element",n=b):-1!==h.SIMPLE_IMAGE_ELEMENTS.indexOf(t)&&(i="div.element, span.element",n=y);var o=e(this).parent().find(i);o.length&&!d.get(o[0].id)&&d.set(o[0].id,n(o))}}}function v(e){function t(t){c!==t&&(c=t,_(t,e))}function i(){var t=m.getContentFieldProperty(e[0].id,"<!DATA!>"),i=t?t.property_result:"";return i?JSON.parse(i):void 0}function n(){d(),u.destroy()}var o=e.children().eq(0);o.hasClass("hover-toolbar")&&(o=o.next());var s=e.find("img").eq(0),c=o.css("text-align"),d=l.init(e,s,!0,function(e,i,n){t(n)},function(){r.setProperty("<!ALIGN!>",c),f.saveProperties()},function(){return c}),u=a.init(e,s,i);return{type:"standalone",showControls:u.show,hideControls:u.hide,destroy:n}}function b(t){function i(e){if(e=Math.round(e),u!==e){u=e;var i,o;k>=e?(i=e,o=0):(i=k,o=e-k),r.setProperty("<!TOP!>",e),t.css("margin-top",i+"px"),p.css("height",o+"px"),n.vent.trigger("editor:elements:changed")}}function o(e){h!==e&&(h=e,p.css("float",e),t.css({"float":e,clear:e}),r.setProperty("<!ALIGN!>",h))}function s(){var e=m.getContentFieldProperty(t[0].id,"<!DATA!>"),i=e?e.property_result:"";return i?JSON.parse(i):null}function c(){g(),v.destroy()}var d=t.find("img").eq(0),u=0,h=t.css("float"),p=t.prev();p&&p.hasClass("imgPusher")?u=(parseInt(p.css("height"),10)||0)+(parseInt(t.css("margin-top"),10)||0):(p=t.find("span.imgPusher").eq(0),p?(i(parseInt(p.css("top"),10)||0),p.css("top",""),p.remove()):p=e("<span/>").css("float",h),p.css("float",h),t.css("clear",h).before(p));var g=l.init(t,d,!1,function(e,t,n,r){i(r),o(n)},function(){f.saveProperties()},function(){return h},function(){return u}),v=a.init(t,d,s);return{type:"paragraph",showControls:v.show,hideControls:v.hide,destroy:c}}function y(e){var t=s.init(e,e.find("img").eq(0),w);return{type:"simple",showControls:function(e,i){i||t.show(e)},hideControls:function(e){e||t.hide()},destroy:t.destroy}}function w(){return!0}function _(e,t){var i=t.children().eq(0);i.hasClass("hover-toolbar")&&(i=i.next()),i.css("text-align",e),r.setProperty("<!ALIGN!>",e)}function E(){window.imagePlaceholderTimeout=setInterval(function(){0==e(".platform-element-child-placeholder").length&&(clearInterval(window.imagePlaceholderTimeout),e(".element img").each(function(){if(u.isInitialImage(this)||u.isPageLayoutImage(this)){var t=e(this);if(t.closest("ul.imageGallery").length)t.parent(".galleryInnerImageHolder").off("click",C).on("click",C);else{var i=t.parent("a"),n=i.length>0?i:t;n.off("click",T).on("click",T)}}}))},100)}function T(t){var i=e(this),n=i;if(n.is("img")||(n=n.find("img").first()),u.isInitialImage(n[0])||u.isPageLayoutImage(n[0])){var r=S(n.closest(".element").attr("id")),s=u.isImageLiquid(n);o.request("chooseImage",{type:r.type,width:s?"":r.width,ucfid:r.ucfid,ucfpid:r.ucfpid,copyFlickr:!0}).done(function(e){D(e,r.ucfid,r.ucfpid,s),i.find(".wsite-image-placeholder-text").remove()}),t.stop()}}function C(){var t=e(this).children("img").first(),i=S(t.closest(".element").attr("id"));o.execute("determineUpload","gallery","thumbnail:333-250",i.ucfid,i.ucfpid)}function S(i){var n=e("#"+i).closest(".inside"),o=window.getContentFieldProperties(i),r="",s="",a=250;return t.each(o,function(e){if("<!VIDEOFILE!>"===e.reference_property)s="video",a="",r=e.ucfpid;else if("<!IMAGESET!>"===e.reference_property)r=e.ucfpid,s="gallery";else if("<!IMAGES!>"===e.reference_property)r=e.ucfpid,s="slideshow";else if((e.property_result&&u.isInitialImageSrc(e.property_result)||u.isPageLayoutImageSrc(e.property_result))&&(r=e.ucfpid,e.property_result.match(/(na|\/page-layouts-[^\.]*)\.(jpe?g|png)/)&&(s="image",n.down(".product-image")&&o[69650731])))switch(o[69650731].property_result){case"grid":a=164;break;case"large":a=225;break;case"small":a=125;break;case"long":a=175}}),{type:s,width:a,ucfid:i,ucfpid:r}}function D(t,i,o,r,s,a){i+="";var l=t.image.editorUrl;o=o?o:"<!SRC!>",m.setContentFieldProperty(i,o,t.image.publishedUrl);var c=!1,d="";s&&a&&(c={url:s,author:a},d=JSON.stringify(c)),m.setContentFieldProperty(i,"<!ATTRIBUTION!>",d)&&(p.setContentFieldAttribution(i,c),p.updateFooterAttribution()),m.setContentFieldProperty(i,"<!DATA!>",JSON.stringify(t));var u=e("#"+i),h=null;if(u.length){var g=u.closest("li.inside");g.length&&g.removeClass("wsite-initial-image"),h=u.find(".product-image")}if(h&&h.length)h[0].src=l;else try{var v=u.find("img");v[0].onload=function(){function t(){u=u[0],I.reinit(u),f.currentElement===u&&I.showControls(u,!0),n.vent.trigger("imageElementUpdated")}if(v[0].onload="",m.setContentFieldProperty(i,"<!WIDTH!>","auto"),m.setContentFieldProperty(i,"<!MAXWIDTH!>","100%"),r){var o=new Image;e(o).on("load",function(){v.css({"max-width":"100%",width:"auto",height:"auto"}),t()}),o.src=l}else v.css({width:"auto",height:"auto"}),t()},v[0].src=l}catch(b){}n.vent.trigger("editor:elements:changed")}var I={showControls:a.show,hideControls:a.hide,disableControls:a.disable,enableControls:a.enable,initTooltip:c.init,enableTooltips:c.enable,disableTooltips:c.disable,hideTooltips:c.hide},k=20,O=h.STANDALONE_IMAGE_ELEMENTS.concat(h.PARAGRAPH_IMAGE_ELEMENTS,h.SIMPLE_IMAGE_ELEMENTS),R="eid[:'\"\\s]*("+O.join("|")+")";return I.init=function(){c.hide(),a.hideAll(),d.each(function(e){e.destroy()}),d.clear(),e("form").each(g)},I.reinit=function(t){t=e(t);var i=t[0].id,n=d.get(i);if(n){n.destroy();var o=n.type;"standalone"===o?d.set(i,v(t)):"paragraph"===o?d.set(i,b(t)):"simple"===o&&d.set(i,y(t));var r=t.find("img").eq(0);r.off("click",T),r.on("click",T)}},n.vent.on({"pageRendered editor:elements:newElement":E,"editor:elements:newElement":I.init,"afterRender:LegacyElement":function(e){i.chromeless||(e?f.currentElement&&I.reinit(f.currentElement):I.init())}}),window.initialMediaInfo=S,window.updateImageElement=D,o.commands.setHandler("updateImageElement",D),I}),_wAMD.define("editor-site-shared/build/areas/logoResizer",["jquery","site/editor/ui/images/tooltip","util/jquery-ui-resizable"],function(e,t){return function(e,i){function n(){s.data("ui-resizable")||r(),a&&a.show()}function o(){a&&a.hide()}function r(){if(!s.length||s.data("ui-resizable")||s.width()<=0||s.height()<=0||!s[0].complete)return!1;var e=s.css("max-width")+"",n=s.css("max-height")+"";return e=e.match(/^(\d+)(?:px)?$/),e&&(e=parseInt(e[1],10)),n=n.match(/^(\d+)(?:px)?$/),n&&(n=parseInt(n[1],10)),s.resizable({handles:"se",aspectRatio:!0,maxWidth:e,maxHeight:n,start:i.startResize,stop:i.stopResize,resize:i.onResize}).closest(".ui-wrapper").css({display:"inline-block",overflow:"visible","vertical-align":s.css("vertical-align")}),a=s.siblings(".ui-resizable-handle").addClass("imageresizer"),t.init(a,window._W.utl("javascript.editor.build.images.resizing_1"),!0),!0}var s=e.find("img").eq(0),a=null,l={mouseover:n,mouseout:o};return e.on(l),function(){s.data("ui-resizable")&&(s.resizable("destroy"),a=null,e.off(l))}}}),_wAMD.define("editor-site-shared/build/areas/LogoArea",["jquery","underscore","editor/build/themes/data","editor/page-manager/pages","editor/build/themes/partialsRenderer","tpl!platform/theme/core/shared/areas/logo.tpl","editor-site-shared/build/areas/Area","util/ui/HoverToolbar","editor/build/ui/weebly_view","site/editor/ui/image_extras","editor-site-shared/relay","editor-site-shared/build/areas/logoResizer","editor-site-shared/build/areas/ImageArea","ui-framework/js/components/confirm"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p){var f=Class.create(h,{removeResizing:null,isImage:function(){return this.data.type?Boolean("image"===this.data.type&&this.data.image):this.data.isImage},setIsImage:function(e){this.data.type=e?"image":"text"},getInnerHTML:function(){var n,s,a,l=this.attrs,c=this.data,d=i.currentThemeData.logo_margin_top,u=i.currentThemeData.logo_margin_left,h=i.currentThemeData.logo_margin_right,p=!t.isUndefined(d)||!t.isUndefined(u)||!t.isUndefined(h),f=this.isImage(),m=!1;f?(n="cursor:pointer;",d&&(n+="margin-top:"+d+"px;"),u&&(n+="margin-left:"+u+"px;"),h&&(n+="margin-right:"+h+"px;"),s=l["max-width"]?l["max-width"]:i.currentThemeData.logo_max_width?i.currentThemeData.logo_max_width:!1,a=l["max-height"]?l["max-height"]-(d||0):i.currentThemeData.logo_max_height?i.currentThemeData.logo_max_height:!1,s!==!1&&(n+="max-width:"+s+"px;"),a!==!1&&(n+="max-height:"+a+"px;"),p&&(a=!1)):m=hideTitle||!e.trim(currentSiteTitle.replace(/<br[^>]*>/gi,""));var g="";f&&(c.image?g=c.image.editorUrl:(g=c.url,g&&!g.match("://")&&(g="/uploads/"+g)));var v=e(o.render("shared/areas/logo",r,{is_image:f,max_height:a,image_url:g,image_css:n,is_hidden_text:m,text:currentSiteTitle})),b=v.find("a").removeAttr("href").eq(0);return f?v.find("img").eq(0).attr("onload","refreshNavCondense()"):b.html(e("<span>",{html:b.html(),"class":"editable-text",attr:{contenteditable:"true",id:"wsite-title"}})),v=v[0].outerHTML},afterRender:function($super){$super();var t=(this.data,this.isImage()),i=e(this.el),o=n.getHomepage();if(!t&&l.isMobileView?i.css("display","inline"):(i.css("display","inline-block"),i.on("click",".wsite-logo",function(t){e(t.currentTarget).find("img").length&&d.request("page:navigate:go",o.id)})),t){var r=this;this.removeResizing=u(i,{startResize:function(){r.resizing=!0,r.toolbar.hide()},stopResize:function(e,t){d.execute("loading:start","logoArea:resized"),r.resizing=!1,Weebly.Editor.RPC.ImageEditor.resizeImageArea({page_id:0,type:r.type,name:r.name},r.data,t.size.width,t.size.height).done(function(e){r.data=e,r.rerender(),d.execute("loading:stop","logoArea:resized")})},onResize:function(){}})}},renderToolbar:function(){var t=this,n=t.toolbar=new a({targetElement:t.el,parent:"_editor-ui",align:"left",beforeShow:function(){return!t.resizing}}),o=n.getInnerElement(),r=this.data,s=this.attrs;e(o).addClass("logo-toolbar");var l=e("<span>",{"class":"hover-toolbar-logooff",html:_W.utl("html.weebly.libraries.classes.areas.LogoArea_1"),appendTo:o}).on("click",function(){t.setIsImage(!1);var e={};hideTitle=!0,e.hide_title=!0,t.save(e),t.rerender(),refreshNavCondense()}),d=e("<span>",{"class":"hover-toolbar-logotext",html:_W.utl("html.weebly.libraries.classes.areas.LogoArea_2"),appendTo:o}).on("click",function(){var i={};hideTitle=!1,i.show_title=!0,e.trim(currentSiteTitle.replace(/<br[^>]*>/gi,""))||(currentSiteTitle="Site Title"),t.setIsImage(!1),t.save(i),t.rerender(),refreshNavCondense()}),u=e("<span>",{"class":"hover-toolbar-logoimage",html:_W.utl("html.weebly.libraries.classes.areas.LogoArea_3"),appendTo:o}).on("click",function(){r.image&&r.image.editorUrl?(t.setIsImage(!0),t.save(),t.rerender(),refreshNavCondense()):(n.hide(),t.chooseImage({type:"area",area_type:"logo",area_name:t.name||"logo",disableStockMedia:!0,width:s["max-width"]||400,height:s["max-height"]||100}))});if(this.isImage())u.addClass("hover-toolbar-logoimage-pressed");else{var h=t.name?r.hideTitle||!1:hideTitle;h||!e.trim(currentSiteTitle.replace(/<br[^>]*>/gi,""))?l.addClass("hover-toolbar-logooff-pressed"):d.addClass("hover-toolbar-logotext-pressed")}if(this.isImage()){var f=e("<span>",{"class":"hover-toolbar-edit",html:_W.utl("html.weebly.libraries.classes.areas.LogoArea_4"),appendTo:o});t.initEditButton(f),e("<span>",{"class":"hover-toolbar-remove",appendTo:o}).on("click",function(){p.confirm({parent:"#_editor-ui ._editor-ui__framework",outerClassName:"modal--transparent",isModalLight:!1,title:_W.utl("html.weebly.libraries.classes.areas.LogoArea_5"),message:_W.utl("html.weebly.libraries.classes.areas.LogoArea_6"),proceedButton:{text:_W.utl("html.weebly.libraries.classes.areas.LogoArea_7"),className:"btn--destructive"},cancelButton:{text:_W.utl("html.weebly.libraries.classes.areas.LogoArea_8")},isModal:!0,isPositionFixed:!0}).done(function(){c.hideTooltips(),t.setIsImage(!1),delete t.data.image;var e={theme_id:currentTheme,remove_logo_margins:!0,logo_max_width:"",logo_max_height:"",show_title:!0};hideTitle=!1,e.show_title=!0,delete i.currentThemeData.logo_margin_top,delete i.currentThemeData.logo_margin_left,delete i.currentThemeData.logo_margin_right,delete i.currentThemeData.logo_max_width,delete i.currentThemeData.logo_max_height,t.save(e),t.rerender(),refreshNavCondense()})})}},initEditButton:function(e){e.on("click",function(){this.toolbar.hide();var e={mode:"area",imageEditorData:this.data,area:{page_id:this.context.pageID||"",type:this.type,name:this.name}};this.editImage(e)}.bind(this))},unrender:function($super){$super(),this.removeResizing&&this.removeResizing()}});return Weebly.LogoArea=f,s.register("logo",f),f}),_wAMD.define("editor-site-shared/build/areas/SearchArea",["jquery","config","editor-site-shared/relay","editor-site-shared/build/areas/Area","util/ui/HoverToolbar","editor/build/ui/weebly_view","shared/permissions/restrictions"],function(e,t,i,n,o,r,s){function a(e,t){t.select(".hover-toolbar-option-pressed").invoke("removeClassName","hover-toolbar-option-pressed"),e.addClassName("hover-toolbar-option-pressed")}var l=Class.create(n,{getHTML:function(){var e=s.hasAccess("show_settings_site_search");return e?"<span id='"+this.elID+"' class='weebly-area wsite-search'>"+this.getInnerHTML()+"</span>":"<span id='"+this.elID+"'></span>"},getInnerHTML:function(){return"<input type='text' class='wsite-search-input' autocomplete='off' placeholder='"+_W.utl("html.weebly.libraries.classes.areas.SearchArea_1")+"' /><span class='wsite-search-button'><span class='wsite-search-button-inner'></span></span>"},afterRender:function($super){var i=this;$super(),e(this.el).find("input").popover({content:_W.utl("javascript.editor-site-shared.build.areas.SearchArea_4"),trigger:"focus",placement:"bottom",container:"#_editor-ui",delay:{show:500,hide:100}}).on({"shown.bs.popover":function(){i.toolbar.hide()},mouseleave:function(){e(this).popover("hide")}}),this.toolbar&&this.toolbar.destroy(),t.chromeless||this.renderToolbar()},renderToolbar:function(){var e=this,t=new o({targetElement:e.el,afterHide:e.handleAfterHide.bind(e),parent:"_editor-ui"}),i=t.getInnerElement();i.addClassName("search-toolbar"),i.innerHTML='<span class="toolbar-show hover-toolbar-option hover-toolbar-option-left hover-toolbar-option-pressed">'+_W.utl("html.weebly.libraries.classes.areas.SearchArea_2")+'</span><span class="toolbar-hide hover-toolbar-option hover-toolbar-option-right">'+_W.utl("html.weebly.libraries.classes.areas.SearchArea_3")+"</span>",i.down(".toolbar-hide").observe("click",e.handleHideToolbar.bind(this)),e.showButton=i.down(".toolbar-show").observe("click",e.handleShowToolbar.bind(this)),this.toolbar=t},handleAfterHide:function(){a(this.showButton,this.toolbar.getInnerElement())},handleShowToolbar:function(e){e.target.className.match(/hover-toolbar-option-pressed/)||(this.show(),r.isMobileView?i.execute("mobile:area:setHidden",!1,this.type,this.name,this.context===Weebly.siteContext):i.execute("design:showSiteArea",!0,"search")),a(e.target,this.toolbar.getInnerElement())},handleHideToolbar:function(e){e.target.className.match(/hover-toolbar-option-pressed/)||(this.hide(),r.isMobileView?i.execute("mobile:area:setHidden",!0,this.type,this.name,this.context===Weebly.siteContext):i.execute("design:hideSiteArea",!0,"search")),a(e.target,this.toolbar.getInnerElement())},unrender:function(){this.toolbar&&this.toolbar.destroy()}});Weebly.SearchArea=l,n.register("search",l)}),_wAMD.define("tpl!platform/theme/core/shared/areas/text.tpl",[],function(){return'<span class="wsite-text{{#phone}} wsite-phone{{/phone}}{{#headline}} wsite-headline{{/headline}}{{#headline_paragraph}} wsite-headline-paragraph{{/headline_paragraph}}"{{^is_mobile}}{{#is_preview}} title="{{#esc_attr}}{{#tl}}templates.platform.theme.core.shared.areas.text_2{{/tl}}{{/esc_attr}}"{{/is_preview}}{{/is_mobile}}>\n	{{{text}}}{{^text}}{{#is_preview}}{{{preview_text}}}{{/is_preview}}{{/text}}\n</span>'}),_wAMD.define("editor-site-shared/build/areas/TextArea",["w-global","config","editor-site-shared/relay","editor-site-shared/build/areas/Area","site/editor/relay-constants","editor/build/themes/partialsRenderer","tpl!platform/theme/core/shared/areas/text.tpl"],function(e,t,i,n,o,r,s){var a=Class.create(n,{tagName:"span",getInnerHTML:function(){var e=this.data.text||"";return e=e.strip(),e=e||t.areaDefaultPlaceholderText[this.name]||t.defaultPlaceholderText,r.render("shared/areas/text",s,{phone:"phone"==this.name,headline:"headline"==this.name,headline_paragraph:"headline-paragraph"==this.name,text:e})},afterRender:function($super){$super();var e=this,n=e.el.down();n.id="wsite-"+e.name,n.style.minHeight="1em",n.style.paddingRight="1px",makeElementContentEditable(n,{richTextControls:"phone"!=e.name&&!t.chromeless,emptyText:t.areaDefaultPlaceholderText[e.name]||t.defaultPlaceholderText,saveCallback:function(t,i){e.data.text=i,e.save();var o=jQuery(n).closest("table");o.hide(),setTimeout(function(){o.css("display","")},0)},startedEditingCallback:function(){i.trigger(o.EVENTS.AREA_TEXT_EDITING_START,e.type,e.name)}})}});return e.TextArea=a,n.register("text",a),a}),_wAMD.define("editor-site-shared/build/areas/TitleArea",["w-global","config","editor-site-shared/build/areas/Area"],function(e,t,i){var n=window.Class.create(i,{elID:"wsite-title",getHTML:function(){return"<div id='"+this.elID+"' class='editable-text' contenteditable='true'>"+this.getInnerHTML()+"</div>"},getInnerHTML:function(){return window.currentSiteTitle},afterRender:function($super){$super(),window.hideTitle?this.el.style.visibility="hidden":this.el.style.visibility=""}});return e.TitleArea=n,i.register("title",n),n}),_wAMD.define("editor-site-shared/build/areas/SimpleFooterArea",["w-global","editor-site-shared/build/areas/Area","shared/permissions/restrictions"],function(e,t,i){var n='<div class="wsite-footer-separator"></div>',o='<div class="wsite-footer-version">'+e.utl("html.weebly.libraries.classes.areas.SimpleFooterArea_1")+' <span class="wsite-footer-version-text">'+e.utl("html.weebly.libraries.classes.areas.SimpleFooterArea_2")+' <span class="wsite-footer-vertical">|</span> <a class="wsite-version-web" href="#">'+e.utl("html.weebly.libraries.classes.areas.SimpleFooterArea_3")+"</a></span></div>",r=window.Class.create(t,{getHTML:function($super){var t=$super();return e.view.isMobileView?(t+='<div class="wsite-mobile-footer">',e.Reseller&&e.Reseller.isResellerUser?t+=o:(t+='<span id="weeblyfootertext"></span>',e.view.isNativeApp||(t+=n+o)),t+="</div>"):t+='<span id="weeblyfootertext"></span>',t}});return t.register(function(e){return("content"==e.type&&"footer"==e.name||"footer"==e.type)&&!(window.ENABLE_ADVANCED_FOOTER&&i.hasAccess("edit_footer"))},r),r}),_wAMD.define("legacy/mobile_navigation",["jquery","config"],function(e,t){var i,n,o,r="SLIDE_RIGHT",s="SLIDE_DOWN",a="SLIDE_STATIC",l=60,c=!1,d=!1,u=!1,h=null,p=navigator.userAgent.match(/(iPad|iPhone|iPod)/i)?!0:!1,f="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,m=0,g=a,v=function(e,t,i,n){i||(i=500),e.css({webkitTransitionDuration:i+"ms",webkitTransitionProperty:t,webkitTransitionTimingFunction:"linear"});var o=function(){e.off("webkitTransitionEnd",o),e.css({webkitTransitionDuration:"",webkitTransitionProperty:"",webkitTransitionTimingFunction:""}),n()};e.on("webkitTransitionEnd",o)},b=function(e,t,i,n,o){n||(n=500),f?(e.css({webkitTransitionDuration:"0ms"}),e.css(t),setTimeout(function(){v(e,"all",n,o);var t={};for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r]);e.css(t)},0)):(i.avoidCSSTransitions=!0,e.animate(i,{duration:n,complete:o}))},y=function(){var t,n,a,h,v=i.outerHeight();if(!d){c=!c,d=!0,c&&o.addClass("menu-open");var y=function(){d=!1,c||o.removeClass("menu-open")};if(g===s)c?(t=-v-10,n=0):(t=0,n=-v-10),a={"-webkit-transform":"translate3d( 0px, "+t+"px, 0)"},h={"-webkit-transform":"translate3d( 0px, "+n+"px, 0)"},f||(a={top:m+t+"px"},h={top:m+n+"px"}),b(i,a,h,300,y);else if(g===r){var w=e("#wsite-page-wrapper");y=function(){d=!1,c?w.one("click",R):(o.removeClass("menu-open"),i.hide(),o.css("overflow-x","visible"),e("#wsite-viewport").css({overflow:"visible",height:""}),w.css({background:"none",height:""})),T(),c||e(".wsite-background").show()};var _=0;if(c){t="0%",n="80%";var C=e(".wsite-background");0===C.length&&(C=o);var S=p?l:0,D=e(window);w.css({"background-color":C.css("background-color")||"white","background-image":C.css("background-image"),"background-position":C.css("background-position"),"background-size":C.css("background-size"),"background-repeat":C.css("background-repeat"),"background-clip":C.css("background-clip"),height:Math.max(C.height(),D.height()+S)+"px"}),C.css("background-image").length>0&&f&&u&&(_=260),C!==o&&C.hide(),o.css({"overflow-x":"hidden"}),setTimeout(function(){i.show()},_)}else t="80%",n="0%";a={"-webkit-transform":"translate3d("+t+", 0px, 0)"},h={"-webkit-transform":"translate3d("+n+", 0px, 0)"},f||(a={left:t},h={left:n}),setTimeout(function(){b(w,a,h,300,y)},_)}E()}},w=function(t,i,o){var r=e(".wsite-animation-wrap",n),s=o?1:-1;if(!d){d=!0;var a=Math.max(i.outerHeight(),t.outerHeight());n.css({height:a+"px"}),T();var l=n.width(),c=-s*l+"px",u={"-webkit-transform":"translate3d( 0, 0px, 0)"},h={"-webkit-transform":"translate3d("+c+", 0px, 0)"};f?i.css({"-webkit-transform":"translate3d("+s*l+"px, 0px, 0)"}):(i.css({left:s*l+"px"}),u={left:0},h={left:c}),i.show();var p=function(){t.hide();var e=i.outerHeight();n.css({height:e+"px"}),r.css(u),i.css(u),d=!1,T()};b(r,u,h,300,p)}},_=function(t,i){t.on("touchstart",i,function(){e(this).addClass("active")}),t.on("touchend",i,function(){e(this).removeClass("active")})},E=function(){var t=p?l:0,n=e(window);if(g==r&&c){i.height("auto");var o=Math.max(n.height()+t,i.outerHeight());e("#wsite-viewport").css({height:o+"px"}),e("#wsite-viewport").css({overflow:"visible"}),setTimeout(function(){e("#wsite-viewport").css({overflow:"hidden"})},150),i.height()<o&&i.css("height",o+"px"),e("#wsite-page-wrapper").css("height",o+"px")}if(!Weebly.EDITOR){var s=n.height()+t;e(".wsite-background").css({height:s+"px"})}},T=function(){var t=e(window).height();p&&(t+=l);var i=e(".wsite-mobile-footer");C(),E(),i.css({top:"0px"});var n=i.position();n&&(t-=n.top,t-=i.outerHeight(!0),t>0&&i.css({position:"relative",top:t+"px"}))},C=function(){if(n){var e=n.find(".wsite-menu-slide:visible").outerHeight();if(e>0&&n.css({height:e+"px"}),g===s){var t,o=i.outerHeight();t=c?0:-o-10,f?i.css({"-webkit-transform":"translate3d( 0px, "+t+"px, 0)","-webkit-backface-visibility":"hidden"}):i.css({top:m+t+"px"})}}},S=function(){o=e("body"),("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(o.removeClass("no-touch"),o.addClass("touch"),u=!0)},D=function(){var r=e(".wsite-menu-default");if(!r.closest(".wsite-mobile-menu").length){var s=e(".wsite-menu-wrap"),a=e(".wsite-menu-button");r.wrap('<div class="wsite-mobile-menu" />'),n=r.closest(".wsite-mobile-menu"),i=r.closest(".wsite-menu-wrapper"),i=i.length>0?i:n,c=!1,d=!1,t.chromeless||a.on("click",y);var l={position:"absolute",top:"0",left:"0",width:"100%"};r.addClass("wsite-menu-slide").css(l),s.addClass("wsite-menu-slide").css(l),r.css({left:"0"}),f&&r.css({"-webkit-transform":"translate3d( 0, 0px, 0)"}),n.append('<div class="wsite-animation-wrap"></div>');var h=e(".wsite-animation-wrap",n);h.css({position:"relative"}),f&&h.css({"-webkit-backface-visibility":"hidden"}),h.append(r),s.each(function(){var t=e(this),i=t.prev(),n=t.children("ul"),o=t.parents(".wsite-menu-slide"),r=e('<li class="wsite-menu-back-item"><a><span class="wsite-menu-mobile-arrow"></span><span class="wsite-menu-back">Back</span></a></li>');r.on("click",function(){w(t,o,!1)});var s=i.clone(!0),a=e('<li class="wsite-menu-master-item"></li>').html(s);n.prepend(a),n.prepend(r),i.removeAttr("href").removeAttr("onclick"),i.append('<span class="wsite-menu-mobile-arrow"></span>'),i.off("click").on("click",function(){w(o,t,!0)}),t.css({left:"0"}),f&&t.css({"-webkit-transform":"translate3d( 0, 0px, 0)"}),h.append(t)}),n.css({display:"block"}),i.css({display:"block"}),o.hasClass("wsite-menu-dropdown")?k():o.hasClass("wsite-menu-slideright")&&I(),C(),u&&(_(e(".wsite-home-link")),_(a),_(n,"a"))}},I=function(){g=r;var t=o.contents();o.prepend('<div id="wsite-viewport" ><div id="wsite-page-wrapper" /></div>');for(var n=e("#wsite-page-wrapper"),s=0;s<t.length;s++){var a=t[s];n[0].appendChild(a)}n.css({position:"relative",background:"none","z-index":"3",left:"0",top:"0"}),f&&n.css({"-webkit-backface-visibility":"hidden","-webkit-transform":"translate3d( 0, 0, 0)"}),i.css({top:"0",left:"0","min-height":"100%",width:"80%",position:"absolute"}),i.hide(),o.find("#wsite-viewport").css({height:"",width:"100%"}).append(i)},k=function(){g=s,i.css({position:"absolute",width:"100%","z-index":6});var e=i.position();m=e?e.top:0;var t=-i.outerHeight()-10;f?i.css({"-webkit-transform":"translate3d( 0px, "+t+"px, 0)","-webkit-backface-visibility":"hidden"}):i.css({top:m+t+"px"})},O=function(){var t=e(".wmap-container");t.find("iframe").css({height:h+"px"}),h=null},R=function(){
return c&&y(null),!1},x=function(){o=e("body"),o.hasClass("wsite-render3d")||(f=!1),D()};Weebly.EDITOR||(e(window).on("message",function(e){e.origin&&-1!==e.origin.indexOf("weebly.com")&&(h=e.data,document.loaded&&O())}),e(function(){S(),x(),window.FastClick&&(FastClick.attach(e(".wsite-menu-button")[0]),FastClick.attach(e(".wsite-mobile-menu")[0])),null!==h&&O(),e(window).on("resize",T),T(),window.scroll(0,1),e(window).load(T)})),window.Weebly||(window.Weebly={});var A={init:x,resizeScreen:T,resizeMenu:C,menuTap:y,closeMenu:R};return Weebly.mobile_navigation=A,A}),_wAMD.define("editor-site-shared/build/areas/AdvancedFooterArea",["jquery","config","legacy/mobile_navigation","editor-site-shared/build/areas/ElementArea","site/editor/ui/ElementSpotlight","editor-site-shared/build/areas/Area","shared/permissions/restrictions","editor/build/ui/weebly_view","editor-site-shared/relay"],function(e,t,i,n,o,r,s,a,l){var c='<div class="wsite-footer-separator"></div><div class="wsite-footer-version">'+_W.utl("javascript.editor-site-shared.build.areas.AdvancedFooterArea_15")+' <span class="wsite-footer-version-text">'+_W.utl("javascript.editor-site-shared.build.areas.AdvancedFooterArea_16")+' <span class="wsite-footer-vertical">|</span> <a class="wsite-version-web" href="#">'+_W.utl("javascript.editor-site-shared.build.areas.AdvancedFooterArea_17")+"</a></span></div>",d=Class.create(n,{listElID:"weebly-footer-list",afterRender:function($super){function n(){s.close()}$super();var r,s,u=this,h=a.isMobileView;t.chromeless||(s=u.spotlight=new o({area:{name:this.name},container:u.el,uid:"footer",zIndex:10,paddingHeight:h?10:15,paddingWidth:h?0:15,elementsPage:"footer",onOpen:function(){l.commands.setHandler("editor:spotlight:footer:close",n),s.isRefresh||u.showPageLayoutPicker(),u.removeAddFooterMessage(),d.isEditing=!0,r=e('<span class="btn btn-large btn-primary save-button">'+_W.utl("javascript.editor-site-shared.build.areas.AdvancedFooterArea_13")+"</span>"),s.getControlsInner().addClass("footer-controls").append(r.on("click",function(){s.close()})),u.ensureWithinScroll(),u.toggleEmptyMessage(),a.isMobileView&&i.resizeScreen()},onClose:function(){l.commands.removeHandler("editor:spotlight:footer:close"),l.execute("analytics:track:event","editor.elements","save_footer"),d.isEditing=!1,s.getControlsInner().empty(),u.removeEmptyMessage(),u.attachAddFooterMessage(),a.isMobileView&&i.resizeScreen()}}),s.cover.attr("title",_W.utl("html.weebly.libraries.classes.areas.AdvancedFooterArea_6")));var p=e(u.el);h&&0==p.parent(".wsite-mobile-footer").length&&(e(u.el).parent().addClass("wsite-mobile-footer"),e(u.el).after(c)),u.attachAddFooterMessage()},afterAddElement:function(){this.removeEmptyMessage()},attachAddFooterMessage:function(){var i,n=this;e(n.el).find("li.inside:not(.wsite-multicol-li)").length||(i=t.chromeless?Mustache.compile("<span class='weebly-empty-footer-message {{className}}'>"+_W.utl("html.weebly.libraries.classes.areas.AdvancedFooterArea_8")+"</span>"):Mustache.compile("<span class='weebly-empty-footer-message {{className}}'>"+_W.utl("html.weebly.libraries.classes.areas.AdvancedFooterArea_7")+"</span>"),e(n.el).append(i({className:"empty-element-message"})))},removeAddFooterMessage:function(){var t=this;e(t.el).find(".weebly-empty-footer-message").remove()},toggleEmptyMessage:function(){var t,i=this,n=e("#"+i.elID),o=this.name;i.elements.length?i.removeEmptyMessage():(t=a.isMobileView?'<div id="empty-message-footer-layouts" class="empty-element-message"><div class="w-ui"><button class="choose-a-layout btn-flat btn-flat-outline btn-flat-light" onclick="require(\'editor-site-shared/relay\').execute(\'pageLayouts:gallery:show\', \''+o+"', null);\">"+_W.utl("javascript.editor-site-shared.build.areas.AdvancedFooterArea_14")+'</button></div><div class="or-separator">'+_W.utl("html.weebly.libraries.classes.areas.AdvancedFooterArea_10")+'</div><div id="empty-message-inner">'+_W.utl("html.weebly.libraries.classes.areas.AdvancedFooterArea_11")+"</div></div>":'<div id="empty-message-footer" class="empty-element-message">'+_W.utl("html.weebly.libraries.classes.areas.AdvancedFooterArea_12")+"</div>",n.prepend(t).addClass("empty-footer"))},showPageLayoutPicker:function(){var e=this,t=this.name,i=!1;2==e.elements.length&&e.elements[0].columns&&"27280689"==e.elements[0].columns[0][0].eid&&"27280689"==e.elements[0].columns[1][0].eid&&"6942243"==e.elements[1].eid?i=!0:0==e.elements.length&&(i=!0),i&&!_W.view.isMobileView&&l.execute("pageLayouts:gallery:show",t,null)},removeElement:function($super,e){var t=this.context.deleteElement(e);this.spliceElement(t.id),this.removeEmptyColumns(),0==this.elements.length&&this.attachAddFooterMessage()},removeEmptyMessage:function(){var e=this,t=jQuery("#"+e.elID);t.removeClass("empty-footer").find("#empty-message-footer").remove(),t.find("#empty-message-footer-layouts").remove(),t.find(".empty-element-message").remove()},unrender:function($super){var e=this;$super(),e.spotlight&&(e.spotlight.destroy(),delete e.spotlight)},reposition:function($super){$super(),this.spotlight&&this.spotlight.resize()},ensureWithinScroll:function(){var t=this,i=e(t.el),n=e(window),o=i.offset().top+i.outerHeight()+30,r=n.outerHeight();o>r&&n.scrollTop(o-r)}});return l.reqres.setHandlers({"editor:footer:hasElement":function(){return 0!=e(".weebly-footer-list").find("li").length}}),Weebly.AdvancedFooterArea=d,r.register(function(e){return("content"==e.type&&"footer"==e.name||"footer"==e.type)&&ENABLE_ADVANCED_FOOTER&&s.hasAccess("edit_footer")},d),d}),_wAMD.define("editor-site-shared/build/areas/ProductArea",["jquery","underscore","w-global","editor-site-shared/build/areas/Area","editor-site-shared/build/areas/ElementArea"],function(e,t,i,n,o){var r=Class.create(n,{initialize:function($super,e,t){$super(e,t),this.elID="secondlist",this.template=e.template;var i=e.long_description_elements;i&&(this.descriptionArea=new o({elements:i},t))},getInnerHTML:function(){return"<ul>"+this.template+"</ul>"},afterRender:function(){var t=this.descriptionArea;if(t){var i=e(".wsite-com-long-description")[0];if(i){i.wrap("div");var n=i.up();n.id=i.id+"-up",t.elID=i.id,t.el=n,t.rerender(),$(i.id).className=i.className,$(i.id).style.position="relative"}}}});return t.each(["addColumn","addElement","removeEmptyColumns","removeElement","spliceExistingElements","replaceElement","spliceElement","findElement","moveBelow","moveAbove","moveToColumn"],function(e){r.prototype[e]=function(){return this.descriptionArea[e].apply(this.descriptionArea,arguments)}}),i.ProductArea=r,n.register(function(e){return"long_description_elements"in e},r),r}),_wAMD.define("editor-site-shared/build/areas/SingleElementArea",["w-global","editor-site-shared/build/areas/Area"],function(e,t){var i=Class.create(t,{initialize:function($super,e,t){$super(e,t),this.element=t.loadElement(e.element)},getInnerHTML:function(){return"<ul class='weebly-single-area'>"+this.element.renderHTML(!1)+"</ul>"},beforeRender:function($super){$super(),this.context.elementsByID[this.element.id].beforeRender()},afterRender:function($super){$super(),this.element.afterRender(this.el.down("#inside_"+this.element.id))}});return e.SingleElementArea=i,t.register(["social","button"],i),i}),_wAMD.define("editor-site-shared/build/areas/HomeButtonArea",["jquery","w-global","editor-site-shared/build/areas/Area","editor/page-manager/pages"],function(e,t,i,n){var o=Class.create(i,{getHTML:function($super){return t.view.isMobileView?"<span id='"+this.elID+"' class='weebly-area wsite-homepage'>"+this.getInnerHTML()+"</span>":"<span id='"+this.elID+"'></span>"},getInnerHTML:function(){return"<a class='wsite-home-link'><span class='wsite-home-link-inner disable-user-select'></span></a>"},afterRender:function($super){$super(),e(this.el).find(".wsite-home-link").on("click",function(e){var t=n.getHomepage();t&&window.goUpdateList(t.id,1),e.preventDefault()})}});return t.HomeButtonArea=o,i.register("homebutton",o),o}),_wAMD.define("editor-site-shared/build/areas/MenuButtonArea",["jquery","w-global","editor-site-shared/build/areas/Area"],function(e,t,i){var n=window.Class.create(i,{getHTML:function($super){return t.view.isMobileView?"<span id='"+this.elID+"' class='weebly-area wsite-menubutton'>"+this.getInnerHTML()+"</span>":"<span id='"+this.elID+"'></span>"},getInnerHTML:function(){return'<a class="wsite-menu-button"><span class="wsite-menu-button-text disable-user-select">Menu</span><div class="wsite-menu-button-bars"><span class="wsite-menu-button-bar"></span><span class="wsite-menu-button-bar"></span><span class="wsite-menu-button-bar"></span></div></a>'},afterRender:function($super){$super(),e(this.el).find(".wsite-menu-button").on("click",t.mobile_navigation.menuTap)}});return t.MenuButtonArea=n,i.register("menubutton",n),n}),_wAMD.define("editor-site-shared/build/areas/HeaderButtonArea",["jquery","editor-site-shared/build/areas/Area","editor/build/ui/weebly_view"],function(e,t,i){var n=Class.create(t,{getHTML:function(){return i.isMobileView?"<span id='"+this.elID+"' class='wsite-area wsite-buttonheader' >"+this.getInnerHTML()+"</span>":"<span id='"+this.elID+"'></span>"},getInnerHTML:function(){return"<a class='wsite-cart-link' href='#'><span class='wsite-cart-link-inner disable-user-select'></span></a>"},afterRender:function($super){$super(),e(this.el).find(".wsite-cart-link").on("click",function(){return!1});var t=Weebly.Commerce&&Weebly.Commerce.hasCart===!0;t&&void 0!==window.initCommerceModels||e(this.el).hide()}});Weebly.HeaderButtonArea=n,t.register("headerbutton",n)}),_wAMD.define("editor-site-shared/build/areas/MembershipArea",["w-global","editor-site-shared/build/areas/Area"],function(e,t){var i=window.Class.create(t,{elID:"wsite-nav-login-a",getHTML:function(){return"<span class='wsite-custom-membership-wrapper' id='member-login'><a href='#' id='"+this.elID+"'></a></span>"}});return e.CustomMembershipArea=i,t.register("membership",i),i}),_wAMD.define("editor-site-shared/build/areas/MinicartArea",["w-global","editor-site-shared/build/areas/Area"],function(e,t){var i=window.Class.create(t,{elID:"wsite-nav-cart-a",getHTML:function(){return"<span class='wsite-custom-cart-wrapper'><a href='#' id='"+this.elID+"'></a></span>"}});return e.CustomMinicartArea=i,t.register("minicart",i),i}),_wAMD.define("editor-site-shared/build/areas/AreaContext",["w-global","editor-site-shared/build/elements/ElementContext","editor-site-shared/build/areas/Area","editor-site-shared/build/AreaUtils","editor-site-shared/build/areas/BlogArea","editor-site-shared/build/areas/ElementArea","editor-site-shared/build/areas/ElementAreaCollection","editor-site-shared/build/areas/HeaderSectionArea","editor-site-shared/build/areas/ImageArea","editor-site-shared/build/areas/LogoArea","editor-site-shared/build/areas/SearchArea","editor-site-shared/build/areas/TextArea","editor-site-shared/build/areas/TitleArea","editor-site-shared/build/areas/SimpleFooterArea","editor-site-shared/build/areas/AdvancedFooterArea","editor-site-shared/build/areas/ProductArea","editor-site-shared/build/areas/SingleElementArea","editor-site-shared/build/areas/HomeButtonArea","editor-site-shared/build/areas/MenuButtonArea","editor-site-shared/build/areas/HeaderButtonArea","editor-site-shared/build/areas/MembershipArea","editor-site-shared/build/areas/MinicartArea"],function(e,t,i,n){function o(o){function s(){return g}function a(e,t){return r(g,e,t)}function l(e){var t;return g.some(function(i){if(i.el===e)return t=i,!0;if(i.sections){var n=i.sections.findWhere({el:e});if(n)return t=n.get("elementArea"),!0}}),t}function c(){g.each(function(e){e.beforeRender()})}function d(t,o,r){var s=a(t,o);if(s||"title"!=t||(s=new e.TitleArea({type:t,name:o}),g.push(s)),s)return s.attrs=r,s.getHTML();var l=i.getNewElID();return n.fetchNeededArea(!this.pageID,t,o,function(e){var t=i.load(e,m);t&&(g.push(t),t.attrs=r,t.elID=l,t.el=t.getHTML(),$(l).replace(t.el))}),"<span id='"+l+"'></span>"}function u(){g.each(function(e){var t=$(e.elID);t&&(e.el=t,e.afterRender())}),m.hasRendered=!0}function h(){g.each(function(e){e.el&&e.reposition()}),hashEach(this.elementsByID,function(e,t){t.li&&t.reposition()})}function p(){g.each(function(e){e.el&&e.unrender()}),hashEach(this.elementsByID,function(e,t){t.li&&t.unrender()})}function f(e){g.each(function(t){var i=r(e,t.type,t.name);if(i){var n=i.el;n&&n.parentNode&&(t.attrs=i.attrs,t.replaceArea(n),t.afterRender())}})}var m=this,g=[];t.call(m),m.getAreas=s,m.getArea=a,m.getAreaForElement=l,m.beforeRender=c,m.getAreaHTML=d,m.afterRender=u,m.reposition=h,m.unrender=p,m.renderAreas=f,m.hasRendered=!1,o.currentApp&&(this.currentApp=o.currentApp),$H(o).each(function(e){"areas"==e.key?e.value.each(function(e){var t=i.load(e,m);t&&g.push(t)}):m[e.key]=e.value})}function r(e,t,i){i=i||"";for(var n=0;n<e.length;n++)if(e[n].type==t&&e[n].name==i)return e[n]}return e.AreaContext=o,o}),_wAMD.define("tpl!elements/element-move-copy.tpl",[],function(){return'<div class="w-dialog element-move-copy" style="display: none;">\n	<div class="element-move-copy-arrow"></div>\n	<div class="element-move-copy-header">\n		<div class="switcher">\n			<div class="inner">\n				<div class="move">{{#tl}}Move{{/tl}}</div>\n				<div class="copy">{{#tl}}Copy{{/tl}}</div>\n			</div>\n		</div>\n	</div>\n	<div class="element-move-copy-content">\n		<ul></ul>\n	</div>\n</div>'}),_wAMD.define("site/editor/ui/weebly_element_movecopy",["jquery","mustache","editor-site-shared/relay","editor/page-manager/pages","site/editor/ui/weebly_elements","legacy/weebly_element_utils","site/editor/ajax/module","tpl!elements/element-move-copy.tpl","analytics/Tracking"],function(e,t,i,n,o,r,s,a,l){function c(l,c){function u(e){b=e,y.find(".move").toggleClass("selected",b),y.find(".copy").toggleClass("selected",!b),m()}function h(){i.on("site:overlays:hide",p),y.css("display","block"),setTimeout(function(){f(),y.addClass("active")},100),e(document).on("mouseup.move-copy",p)}function p(t){t&&e(t.target).closest(y).length||(i.off("site:overlays:hide",p),y.is(":visible")&&(y.removeClass("active"),setTimeout(function(){y.removeAttr("style").css("display","none")},200),e(document).off("mouseup.move-copy")))}function f(){var e=w.offset(),t=c.offset(),i=10,n=16;y.css({top:t.top+c.outerHeight()-e.top+i,left:t.left+c.outerWidth()/2-e.left-n})}function m(){var t=y.find(".element-move-copy-content ul");if(t.empty(),t.parent().scrollTop(0),!b){var i=e("<li/>").data("page-id",currentPage).append(e("<em/>").text(_W.tl("( This page )")));t.append(i)}g(n,t,0)}function g(t,i,n){t.each(function(t){var o=t.get("title"),r="",s=t.get("page_kind"),a=t.id===currentPage,l="blog"===s,c="link"===s||"nonclickable"===s,u=Boolean(t.get("children").length);l&&(r="move-copy-blog"),(a||c)&&(r="move-copy--disabled"),(!l&&!a||u)&&(e("<li/>").attr("class",r).append(d('<span class="indent"/>',n)).append(e("<span/>").html(o)).data("page-id",t.id).appendTo(i),g(t.get("children"),i,n+1))})}function v(e,t){var n=r.getElementObject(e),o=t?"move_element":"copy_element";i.execute("analytics:track:event","editor.elements",o,n.eid)}this.show=h,this.hide=p,this.position=f;var b,y=e(t.render(a)),w=c.offsetParent();w.append(y),u(!0),y.on("click",".move, .copy",function(){u(e(this).hasClass("move"))}),y.find(".element-move-copy-content ul").on("click","li",function(){var t=e(this);if(t.hasClass("move-copy-blog")||t.hasClass("move-copy--disabled"))return!1;var r=t.data("page-id"),a=e(o.currentElement),l=a.closest("li.inside").attr("id").replace(/\D/g,""),c=a.closest(".wsite-section[data-section]").data("section");Weebly.Editor.RPC.Elements.moveElement({page_element_id:l,page_id:r,section_id:c,copy:b?!1:!0}).done(function(e){var t=n.getPage(e.page_id);t&&(v(l,b),t.id===currentPage?i.request("page:navigate",t.id):i.request("page:navigate:go",t.id,1))}).fail(s.errFunc),p()})}function d(e,t){return new Array(t+1).join(e)}var u={};return u.open=function(e,t){var i=t.data("move-copy-popover");i||(i=new c(e,t),t.data("move-copy-popover",i)),i.show()},u});var SplitPane=Class.create();SplitPane.resizing=!1,SplitPane.cache=new Array,SplitPane.cacheIndex=0,SplitPane.handleWidth=4,SplitPane.prototype={initialize:function(e,t,i,n,o,r){this.options={onStart:Prototype.emptyFunction,onDrag:Prototype.emptyFunction,onEnd:Prototype.emptyFunction,active:!1},Object.extend(this.options,r||{}),this.div1=$(e),this.div2=$(i),this.container=this.div1.parentNode,this.div1_width=t>.5?t:.5,this.div2_left=n,this.div2_width=o>.5?o:.5,SplitPane.cache[SplitPane.cacheIndex]=this,SplitPane.cacheIndex=SplitPane.cacheIndex+1},set:function(){Element.makePositioned(this.container),this.div1.style.width=this.div1_width-.1+"%",this.div2.style.width=this.div2_width-.1+"%",this.div2.style.left=this.div2_left-.1+"%",this.div1_width<.1&&(this.div1.style.width="0.5%"),this.div2_width<.1&&(this.div2.style.width="0.5%"),this.divider=document.createElement("DIV"),this.container.appendChild(this.divider),this.divider.className="splitpane-divider",this.divider.style.position="absolute",this.divider.style.width=SplitPane.handleWidth+"px",this.divider.style.top="0px",this.divider.style.zIndex=4,this.containerWidth=this.getWidth(this.container),this.setDividerX(),this.setDividerHeight(),this.options.active&&(this.eventMouseDown=this.startDrag.bindAsEventListener(this),this.eventMouseUp=this.endDrag.bindAsEventListener(this),this.eventChangeCursor=this.cursor.bindAsEventListener(this),this.eventMouseMove=this.update.bindAsEventListener(this),Event.observe(this.divider,"mousedown",this.eventMouseDown),Event.observe(document,"mouseup",this.eventMouseUp),Event.observe(this.divider,"mousemove",this.eventChangeCursor),Event.observe(document,"mousemove",this.eventMouseMove))},serialize:function(){return"div1="+this.div1.id+"&div1_left="+this.getXPercent(this.div1)+"&div1_width="+this.getWidthPercent(this.div1)+"&div2="+this.div2.id+"&div2_left="+this.getXPercent(this.div2)+"&div2_width="+this.getWidthPercent(this.div2)},dispose:function(){Event.stopObserving(this.divider,"mousedown",this.eventMouseDown),Event.stopObserving(document,"mouseup",this.eventMouseUp),Event.stopObserving(this.divider,"mousemove",this.eventChangeCursor),Event.stopObserving(document,"mousemove",this.eventMouseMove)},cursor:function(e){this.divider.style.cursor="e-resize"},startDrag:function(e){if(Event.isLeftClick(e)){this.active=!0;var t=Position.cumulativeOffset(this.divider);this.start_pointer=[Event.pointerX(e),Event.pointerY(e)],this.inset=this.start_pointer[0]-t[0],this.containerWidth=this.getWidth(this.container),this.start_div1_width=this.getWidth(this.div1),this.start_div2_left=this.getX(this.div2),this.start_div2_width=this.getWidth(this.div2),this.start_divider_x=this.getX(this.divider),Event.stop(e),this.options.onStart(this,e),SplitPane.resizing=!0}},endDrag:function(e){this.active&&(this.active=!1,Event.stop(e),this.setDividerX(),this.setDividerHeight(),this.options.onEnd(this,e),SplitPane.resizing=!1,resizeAllColumns())},update:function(e){if(this.active){var t=[Event.pointerX(e),Event.pointerY(e)],i=t[0]-this.start_pointer[0],n=(100*i/this.containerWidth,this.start_div1_width+i);0>n&&(n=0,i=-this.start_div1_width);var o=this.start_div2_width-i;0>o&&(o=0,i=this.start_div2_width,n=this.start_div1_width+i),this.div1.style.width=100*n/this.containerWidth+"%",this.div2.style.left=100*(this.start_div2_left+i)/this.containerWidth+"%",this.div2.style.width=100*o/this.containerWidth+"%",this.divider.style.left=this.start_divider_x+i+"px",Event.stop(e),this.options.onDrag(this,e)}},setDividerX:function(){var e=this.getX(this.div1)+this.getWidth(this.div1),t=100*((this.getX(this.div2)-e-SplitPane.handleWidth)/2+e)/this.containerWidth+"%";this.divider.style.left=t},setDividerHeight:function(){var e=Math.max(this.getHeight(this.div1),this.getHeight(this.div2));this.divider.style.height=e+"px"},getX:function(e){return e.x?e.x:e.offsetLeft},getXPercent:function(e){var t="0";return t=Element.getStyle(e,"left"),t&&(t=t.replace("%","")),t?parseFloat(t):0},getWidthPercent:function(e){var t="0";return t=Element.getStyle(e,"width"),t&&(t=t.replace("%","")),t?parseFloat(t):0},getWidth:function(e){return e.offsetWidth},getHeight:function(e){return e.currentStyle?e.offsetHeight:Element.getStyle(e,"height").replace("px","")}},SplitPane.setAll=function(){for(i=0;i<SplitPane.cache.length;i++)resizeColumns(SplitPane.cache[i].div1.down("ul"))},Event.observe(window,"load",SplitPane.setAll),_wAMD.define("legacy/splitpane",function(e){return function(){var t;return t||e.SplitPane}}(this)),_wAMD.define("tpl!ui/element-ui-container.tpl",[],function(){return'{{!\n	Element UI Container; holds views that are interacting with the\n	editor iframe.\n}}\n\n<div id="element-ui-container">\n	<div id="beacon-container"></div>\n	<div class="ui-framework-container ui-framework">\n		{{!\n			General purpose orbit container that requires\n			the `ui-framework` classname\n		}}\n	</div>\n</div>\n\n'}),function(e){function t(t){var i=t||window.event,n=[].slice.call(arguments,1),o=0,r=0,s=0;return t=e.event.fix(i),t.type="mousewheel",i.wheelDelta&&(o=i.wheelDelta/120),i.detail&&(o=-i.detail/3),s=o,void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(s=0,r=-1*o),void 0!==i.wheelDeltaY&&(s=i.wheelDeltaY/120),void 0!==i.wheelDeltaX&&(r=-1*i.wheelDeltaX/120),n.unshift(t,o,r,s),(e.event.dispatch||e.event.handle).apply(this,n)}var i=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var n=i.length;n;)e.event.fixHooks[i[--n]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),_wAMD.define("legacy/jquery.mousewheel",function(){}),_wAMD.define("editor/build/ui/view",["jquery","mustache","editor/app","editor/build/frame/element","tpl!elements/element-controls.tpl","tpl!ui/element-ui-container.tpl","legacy/jquery.mousewheel"],function(e,t,i,n,o,r){var s,a,l=i.module("build.ui.view");return l.on("start",function(){s=e(t.render(r)).insertAfter(n.getElement()),a=e(t.render(o)).css({position:"absolute"}).appendTo(s),i.vent.trigger("build:view:ui:ready")}),l.on("stop",function(){s.remove(),s=null,a=null}),l.getContainer=function(){return s?s:e("body")},l.getControls=function(){return a?a:e("body")},l}),function(e){e.fn.touchit=function(i){return t[i]?t[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void e.error("Method "+i+" does not exist on touchit"):t.init.apply(this,arguments)};var t={init:function(t){return this.data("touchit",e.extend({doubleTapTimeout:500,doubleTapWaiting:!1,preTouchStart:!1,onTouchStart:function(e,t){},onTouchMove:function(e,t){},onTouchEnd:function(e,t){},onDoubleTap:function(e,t){},onPinch:function(e){}},t)),this.each(function(){function t(e){var t="ongesturestart"in e;t&&(e.addEventListener("gesturechange",i,!1),e.addEventListener("gestureend",n,!1));var r="ontouchstart"in e;r&&(e.addEventListener("touchstart",o,!1),e.addEventListener("touchmove",o,!0),e.addEventListener("touchend",o,!0),e.addEventListener("touchcancel",o,!0))}function i(t){var i=e(this);r=!0,i.data("touchit").onPinch.call(this,t.scale),i.data("touchit").preTouchStart=!0,t.preventDefault()}function n(e){r=!1,e.preventDefault()}function o(t){if(1!=r){var i=e(this),n=t.changedTouches,o=n[0],s="";switch(t.type){case"touchstart":s="mousedown",i.data("touchit").onTouchStart.call(this,o.screenX,o.screenY),i.data("touchit").preTouchStart=!0;break;case"touchmove":s="mousemove",i.data("touchit").onTouchMove.call(this,o.screenX,o.screenY),i.data("touchit").preTouchStart=!1,t.preventDefault();break;case"touchend":s="mouseup",i.data("touchit").onTouchEnd.call(this,o.screenX,o.screenY),1==i.data("touchit").doubleTapWaiting&&1==i.data("touchit").preTouchStart?i.data("touchit").onDoubleTap.call(this,o.screenX,o.screenY):(i.data("touchit").doubleTapWaiting=!0,i.data("touchit").onTouchEnd.call(this,o.screenX,o.screenY),window.setTimeout(function(){i.data("touchit").doubleTapWaiting=!1},i.data("touchit").doubleTapTimeout)),i.data("touchit").preTouchStart=!1;break;default:return}var a=document.createEvent("MouseEvent");a.initMouseEvent(s,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(a)}}t(this);var r=!1})},destroy:function(){return this.each(function(){var t=e(this),i=t.data("touchit");i&&t.removeData("touchit")})}}}(jQuery),_wAMD.define("legacy/jquery.touchit",function(){}),_wAMD.define("site/editor/ui/weebly_element_controls",["jquery","underscore","site/editor/app","editor-site-shared/build/elements/utils","site/editor/ui/weebly_element_movecopy","legacy/splitpane","editor-site-shared/build/elements/MultiColumnElement","site/editor/ui/ElementSpotlight","util/ui/HoverToolbar","editor-site-shared/ui/constants","site/editor/ui/marker","editor-site-shared/ui/edges","site/editor/ui/weebly_elements","site/editor/build/droppable","editor-site-shared/build/elements/Definitions","editor-site-shared/ui/utils","editor/build/ui/view","editor-site-shared/relay","site/editor/ui/images/resizing","legacy/weebly_element_utils","editor-site-shared/build/AreaUtils","element/editor/view/settings/BaseElementOptionsView","editor-site-shared/ui/mouse-events","legacy/jquery.touchit","legacy/weebly_utils"],function($,_,frameApp,ElementUtils,ElementMoveCopy,SplitPane,MultiColumnElement,ElementSpotlight,HoverToolbar,UICONST,Marker,Edges,Elements,Droppable,Definitions,UIUtils,UIView,Relay,ImageResizing,WElementUtils,AreaUtils,BaseElementOptionsView){function controlsLocked(e){var t=$(e);return t.find(".inside-hover").length||t.closest(".wsite-multicol-li.inside-active").length||window.isDraggingElement||ImageResizing.resizing||SplitPane.resizing||MultiColumnElement.isResizing||ElementSpotlight.isOutside(e)||t.closest(".platform-element-child").length&&!t.closest(".content-area-element").length}function initUserElementListSorting(e){$(e).children().touchit().wDraggable({app:frameApp,handle:".w-handle",revertDuration:50}).on(elementUIEvents).find(".w-handle").touchit()}function destroyUserElementListSorting(e){$(e).children().filter(":data(ui-draggable)").wDraggable("destroy").off(elementUIEvents)}function deleteElement(e,t,i,n){e.addClass("inside-inactive"),ElementUtils.deleteWeeblyElement(e[0],!i,n),t()}function showMove(){var moveButton=$(this),newInsideMove=moveButton.closest(".inside");if(!newInsideMove.is(insideMove)){frameApp.vent.trigger("element:options:dialog:close"),closeMove(),insideMove=newInsideMove;var value=insideMove.children("form").find("[name=idfield]").val(),idfield;try{idfield=eval("("+value+")")}catch(e){return void window.showError(window._W.utl("javascript.site.editor.ui.weebly_element_controls_4"))}Definitions.fetchDefinition(idfield.eid,function(e){ElementMoveCopy.open(e,moveButton)}),insideMove.addClass("inside-move-active"),Elements.setCurrentElement(insideMove.find(".element")[0]),moveButton.on("mouseup.move-copy-button click.element-control.move",function(e){e.stopPropagation()}),$(document).on("click.element-control.move",closeMove).on("mouseup.move-copy-button",closeMove)}}function closeMove(){if(insideMove){var e=insideMove;insideMove=void 0,$(document).off("click.element-control.move"),$(document).off("mouseup.move-copy-button"),$(".w-element-controls .w-move").off("mouseup.move-copy-button click.element-control.move"),setTimeout(function(){e.removeClass("inside-move-active")},200)}}function closeDeleteElement(){deleteElementInside&&(deleteElementActiveClass&&deleteElementInside.removeClass(deleteElementActiveClass),deleteElementInside=void 0,deleteElementToolbar.addClass("inactive"),setTimeout(function(){deleteElementToolbar.remove()},1e3),$(document).off("click.element-control.delete",closeDeleteElement))}function deleteImage(e,t){t();var i,n=e.closest(".weebly-area")[0],o=AreaUtils.getAreaInstanceForElement(n),r=window.getElementParentString(e[0]);i=(!$(".wsite-com-long-description").length||o&&o.name)&&o&&o.context.pageID?!1:!0;var s=e.find(".element");s.length&&(window.xhrUploading=s[0].id),Relay.execute("loading:start","SiteEditorUiElementControls::delete"),Weebly.Editor.RPC.Elements.removeImageTextImage(window.currentPage,i,o&&o.name||"",e[0].id.replace(/[^\d]/g,""),r).always(function(){Relay.execute("loading:stop","SiteEditorUiElementControls::delete"),afterRPC()}).done(deleteImageDone)}function deleteImageDone(){Relay.trigger("editor:element:delete:after")}function afterRPC(){window.xhrUploading=null}function setUIObjectProps(e){e.elementObject||(e.elementObject=elementObject)}function onBeforeDragStart(e,t){return originalHelperStyle=t.helper.attr("style")||"",elementObject=WElementUtils.getElementObject(this),setUIObjectProps(t),BaseElementOptionsView.isElementSettingsOpen()&&frameApp.vent.trigger("element:options:dialog:close"),Elements.saveProperties(),originalPositionTop=t.originalPosition.top,originalPositionLeft=t.originalPosition.left,Edges.getEdge(elementObject,UICONST.POSITION_TOP).done(function(e){originalPositionEdge=e}),t.helper.addClass("inside-dragging"),!1}function onDrag(e,t,i){return t.position.left-=i.left,t.position.top-=i.top,setUIObjectProps(t),!1}function onDragEdgeRemoved(e,t){return originalPositionEdge&&t.originalPosition.left===originalPositionLeft&&t.originalPosition.top===originalPositionTop&&Marker.createMarkerFromEdge(originalPositionEdge),!1}function onDragEdgeChanged(e,t,i){return i.elementObject&&i.elementObject.li&&(i.originalPosition.top+=$(i.elementObject.li).outerHeight()/2),!1}function onBeforeDragStop(e,t){return setUIObjectProps(t),t.helper.removeClass("inside-changed inside-dragging").attr("style",originalHelperStyle),originalHelperStyle=void 0,WElementUtils.repositionElements(),Weebly.Elements.unselectElement(),!1}function onDragDrop(e,t,i){if(i===originalPositionEdge)return elementObject=null,!1;window.isDraggingElement=!0,Relay.execute("destroyDragging");var n,o="",r=i.position,s=i.area,a=i.el?i.el.parentString:s.parentString,l=elementObject.id,c=i;i=_.clone(c),i.column=!!i.column,i.el?(n=i.el.section_id||i.section_id,i.el=_.clone(i.el),delete i.el.area,delete i.el.columns,delete i.el.children,i.el.parent?i.el.parent=i.el.parent.id:delete i.el.parent,i.el.parentColumn&&(i.el.parent=i.el.parentColumn.el.id),delete i.el.parentColumn,o=i.el.parent):n=i.section_id,i.area=_.clone(i.area),delete i.area.elements,i.area.sections&&_.each(i.area.sections,function(e){delete e.elements});var d=$(t.elementObject.li);if(r===UICONST.POSITION_LEFT||r===UICONST.POSITION_RIGHT){d.hide();var u={page_element_id:l},h=UIUtils.getColumnData(c,u);Relay.request("editor:element:reorder",i,l,h).always(function(){window.isDraggingElement=!1}).done(function(e){"boolean"!=typeof e&&Relay.request("page:navigate",window.currentPage)}).fail(function(){d.show(),Relay.execute("initDragging")})}else if(r===UICONST.POSITION_TOP||r===UICONST.POSITION_BOTTOM){var p,f=d.next(),m=d.find("img");if(f.length||(p=d.parent()),m.length>0&&d.hide(),i.el)$(WElementUtils.getElementObject(i.el.id).li)[r===UICONST.POSITION_BOTTOM?"after":"before"](d);else{var g=AreaUtils.getAreaInstance(i.area.is_site_wide,i.area.type,i.area.name);n&&(g=g.getAreaFromSectionId(n));var v=g.el;g.innerEl&&(v=g.innerEl),$(v)[r===UICONST.POSITION_BOTTOM?"append":"prepend"](d),g.removeEmptyMessage()}Relay.request("editor:element:reorder",i,l).done(function(e){i.insideContentAreaElement||(ElementUtils.moveElementObject(l,a,s,i.el?i.el.id:null,r===UICONST.POSITION_TOP?"before":"after",o,n),m.length>0&&ImageResizing.destroy(m)),frameApp.vent.trigger("editor:elements:changed")}).fail(function(){f.length?f.before(d):p.append(d)}).always(function(){window.isDraggingElement=!1,d.show(),d.find("iframe").length&&WElementUtils.getElementObject(l).afterRender(d[0],!0,!0),
Relay.execute("initDragging")})}return elementObject=null,!1}var exports={},insideMove,deleteBox,deleteElementActiveClass,deleteElementInside,deleteElementToolbar;exports.initElementControls=function(){exports.attachInitEventListeners(),Edges.init(frameApp),UIUtils.init(frameApp)},exports.attachInitEventListeners=function(){var e=null;$(document).on("mouseover","li.inside",function(){controlsLocked(this)||(e&&e.removeClass("inside-hover"),e=$(this).addClass("inside-hover"))}).on("mouseout","li.inside",function(){controlsLocked(this)||($(this).removeClass("inside-hover inside-handle-hover inside-delete-hover"),e=null)}),$(document).on("mouseover",".w-element-controls .w-upgrade",function(){$(this).closest(".inside").addClass("inside-upgrade-hover")}).on("mouseout",".w-element-controls .w-upgrade",function(){$(this).closest(".inside").removeClass("inside-upgrade-hover")}).on("mouseover",".w-element-controls .w-handle",function(){$(this).closest(".inside").addClass("inside-handle-hover")}).on("mouseout",".w-element-controls .w-handle",function(){$(this).closest(".inside").removeClass("inside-handle-hover")}).on("mouseover",".w-element-controls .w-move",function(){$(this).closest(".inside").addClass("inside-move-hover")}).on("mouseout",".w-element-controls .w-move",function(){$(this).closest(".inside").removeClass("inside-move-hover")}).on("click",".w-element-controls .w-move",showMove).on("mouseover",".w-element-controls .w-delete",function(){$(this).closest(".inside").addClass("inside-delete-hover")}).on("mouseout",".w-element-controls .w-delete",function(){$(this).closest(".inside").removeClass("inside-delete-hover")}).on("click",".w-element-controls .w-delete",function(e){exports.deleteGenericElement.call(this,e)}).on("click",".element > .w-delete-outer",function(e){exports.askDelete.call(this.firstChild,deleteImage,window._W.utl("javascript.site.editor.ui.weebly_element_controls_3"),"",e)})},frameApp.vent.on({"pageRendered editor:spotlight:open editor:spotlight:close editor:elements:newElement editor:sections:newSectionRendered":function(){$(Droppable.topLevelDroppables).removeClass("weebly-area-active"),_.each(Droppable.allDroppables,destroyUserElementListSorting),Droppable.buildTopLevelDroppables(),$(Droppable.topLevelDroppables).addClass("weebly-area-active"),_.each(Droppable.allDroppables,initUserElementListSorting)},attachControlEvents:function(){exports.attachInitEventListeners()}}),exports.deleteGenericElement=function(e){Weebly.Elements.hideElementSettings(),exports.askDelete.call(this,deleteElement,window._W.utl("javascript.site.editor.ui.weebly_element_controls_7"),"inside-delete-active",e)},exports.askDelete=function(e,t,i,n){deleteElementToolbar&&(n.stopPropagation(),deleteBox[0]!==this&&deleteBox.closest(".inside").removeClass("inside-delete-active"),deleteElementToolbar.remove()),deleteBox=$(this),deleteElementInside=deleteBox.closest(".inside"),deleteElementActiveClass=i;var o=!1,r="";deleteElementInside.hasClass("wsite-multicol-li")&&(o=!0,r=window._W.utl("javascript.site.editor.ui.weebly_element_controls_5",deleteElementInside.find("li.inside").length)),i&&deleteElementInside.addClass(i);var s=new HoverToolbar({targetElement:deleteBox[0],alignElement:deleteElementInside[0],parent:UIView.getContainer()[0],adjustX:26,preferAbove:!0});s.setAutoHide(!1),s.setAutoShow(!1),deleteElementToolbar=$(s.getElement()).addClass("w-element-delete-popup").addClass("inactive").on("click",function(){return!1}),$(s.getInnerElement()).addClass("w-ui").append("<p>"+t+"</p>").append($("<span class='btn btn-large btn-danger'>"+window._W.utl("javascript.site.editor.ui.weebly_element_controls_6")+"</span>").on("click",function(){deleteElementInside.attr("id").split("_").pop();e(deleteElementInside,closeDeleteElement,o,r)})),s.show(),deleteElementToolbar.removeClass("inactive"),$(document).on("click.element-control.delete",closeDeleteElement)},Relay.on({"iframe:overlays:hide":function(){closeMove(),closeDeleteElement()},"site:overlays:hide":function(){closeMove(),closeDeleteElement()}});var elementUIEvents={"dragstart:before":onBeforeDragStart,"drag:drag":onDrag,"drag:edge:removed":onDragEdgeRemoved,"drag:edge:changed":onDragEdgeChanged,"dragstop:before":onBeforeDragStop,"dragstop:drop":onDragDrop},originalPositionTop,originalPositionLeft,originalPositionEdge,elementObject=null,originalHelperStyle;return exports}),_wAMD.define("site/editor/ui/module",["jquery","underscore","site/editor/app","editor-site-shared/relay","site/editor/build/droppable","site/editor/ui/weebly_element_controls","site/editor/ui/weebly_editbox","editor-site-shared/ui/utils","editor-site-shared/ui/context","legacy/mobile_navigation","site/editor/ui/sitemask","site/editor/ui/spotlights","site/editor/ui/marker","editor-site-shared/ui/constants","legacy/flyout_menus_jq"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p){function f(){a.clearPageDataCache(),[Weebly.siteContext,Weebly.pageContext].forEach(a.setContextData)}function m(t,i){var n=e(document);null!==t&&n.scrollLeft(t),null!==i&&n.scrollTop(i)}function g(t,i,n){if(0!==t||0!==i){var o=e(document);if(n||(n={left:0,top:0}),null===_&&!T)return T=!0,void a.getPageData().done(y);var r=o.scrollLeft(),s=r;(0>t&&_>=r||t>0&&_>r)&&(s=r+t,s>=_?(n.left+=_-r,s=_):0>s?(n.left+=0-r,s=0):n.left+=t);var l=o.scrollTop(),c=l;(0>i&&E>=l||i>0&&E>l)&&(c=l+i,c>=E?(n.top+=E-l,c=E):0>c?(n.top+=0-l,c=0):n.top+=i),(s!==r||c!==l)&&m(s,c)}}function v(e){var t={};null===_&&a.getPageData().done(y),i.vent.trigger("editor:element:dragStart"),e===p.SECTION_ELEMENT&&(t.elements=[]),u.showContentAreaSpotlights(t)}function b(){u.hideContentAreaSpotlights(),i.vent.trigger("editor:element:dragStop")}function y(e){var t=l.getScrollContainer();_=e.scrollWidth-t.innerWidth(),E=e.scrollHeight-t.innerHeight(),T=!1}var w=i.module("ui",{startWithParent:!1}),_=null,E=null,T=!1,C={pageRendered:function(){E=null,_=null,f()},scrollBy:g,dragstart:v,dragstop:b,"editor:spotlight:open editor:spotlight:close":c.resizeScreen,"page:startRender viewChange":a.clearPageDataCache,"editor:elements:changed":f};w.resetScrollTop=function(t){if(window.resetScrollTop&&(window.resetScrollTop=null,m(null,0)),t){if("comments"==window.currentBlog.skipToComments){var i=e(window.currentBlog.skipToCommentId&&e("#"+window.currentBlog.skipToCommentId)?"#"+window.currentBlog.skipToCommentId:"#comments"),n=i.offset();m(null,n.top-150)}window.currentBlog.showPostSettings&&(e("#blogPostSettings").slideToggle(),window.currentBlog.showPostSettings=0)}};var S={dragstart:v,dragstop:b,scrollBy:g};n.commands.setHandlers({setScroll:m,guaranteeBestScroll:function(){if(o.topLevelDroppables.length){for(var t,i=e(window),n=i.scrollTop(),r=n+i.height(),s=0;s<o.topLevelDroppables.length;s++){t=e(o.topLevelDroppables[s]);var a=t.offset().top,l=a+t.outerHeight(),c=Math.max(0,Math.min(l,r)-Math.max(a,n));if(c>=100||l-a===c)return}t=e(o.topLevelDroppables[0]),e("html, body").animate({scrollTop:t.offset().top-25},800,"easeOutExpo")}},"site:set:title":function(t){e("#wsite-title").text(t)},"flyout:refreshNavCondense":window.refreshNavCondense,createMarkerFromEdge:h.createMarkerFromEdge,removeMarker:h.removeMarker});var D={scroll:function(){if(!window.isDraggingElement){var t=e(this);n.execute("setUIScroll",t.scrollLeft(),t.scrollTop())}},dragenter:function(){n.trigger("dnd:dragenter")}};return window.elementControlsEnabled=!1,w.on("start",function(){w.listenTo(e(document),D),w.listenTo(i.vent,C),w.listenTo(n,S),i.commands.setHandlers({createMarkerFromEdge:h.createMarkerFromEdge,removeMarker:h.removeMarker}),s.initEditBox(),m(0,0),r.initElementControls(),window.elementControlsEnabled=!0,a.init(i)}),w}),_wAMD.define("site/editor/build/page",["jquery","raven-js","mustache","underscore","config","site/editor/app","editor/page-manager/pages","editor/sections/collection/BaseSection","editor/sections/collection/HeaderSection","site/editor/theme-background/module","site/editor/build/site","site/editor/themes/main","editor-site-shared/build/areas/AreaContext","editor/build/themes/data","editor-site-shared/relay","editor-site-shared/image-editor/data","editor/build/ui/weebly_view","legacy/weebly_footer","tpl!platform/theme/core/shared/commerce/aspect-ratio-image.tpl","site/editor/relay-constants","site/editor/ui/weebly_header_image","editor/content/main","site/editor/ui/module","site/editor/ui/weebly_social_sharing","editor-site-shared/build/areas/AdvancedFooterArea","site/editor/ui/weebly_elements","editor/sections/utils","editor-site-shared/ui/constants","legacy/weebly_main","legacy/weebly_utils"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p,f,m,g,v,b,y,w,_,E,T,C,S,D,I){function k(){var t="http://"+ASSETS_BASE+"/images/util/",n=i.compile(b,{class_prefix:"wsite-product-image",image_source:"blank-product-w320.png",image_percent_width:100,image_percent_left:-25,image_percent_top:0}),o=e('.wsite-com-category-subcategory-image.wsite-imageaspectratio-image[src=""]');o.attr("src",t+"blank-category-w320.png");var r=[],s=e('.wsite-product-image-image.wsite-imageaspectratio-image[src=""]'),a=e('.wsite-com-category-product-featured-image.wsite-imageaspectratio-image[src=""]'),l=e('.wsite-com-category-product-image[src=""]');r.push(s),r.push(a),r.push(l),r.each(function(t){e(t).attr("src","blank-product-w320.png")}),e("a.wsite-product-image").each(function(){""===e(this).html().trim()&&e(this).html(n)});var c='<a title="Links active once published">$0.00</a>';e(".wsite-product-price").each(function(){""===e(this).text().trim()&&e(this).html(c)})}function O(e,t,i,o){if(e.pages){_.updatePageData(e.pages);var a=s.get(window.currentPage);a||window.showPageChooser("Choose a page to edit:","This page was deleted by another editor.",{load_page_locks:!0})}p.setCurrentTheme(t.theme_id,t.is_mobile),p.setCurrentThemeColor(t.current_theme_color),j.buildEditingArea(e,t,i,o),e.post_locked&&window.showWarning({title:_W.utl("javascript.site.editor.build.page_2"),message:'<div style="text-align:left">'+_W.utl("javascript.site.editor.build.page_3").replace(/{{email}}/,e.post_locked.email)+"</div>"+'<a href="#" onclick="window.goUpdateList({{currentPage}}, 1); window.hideWarning();">'.replace(/{{currentPage}}/,window.currentPage)+_W.utl("javascript.site.editor.build.page_4")+"</a>"},{closeFunction:function(){window.goUpdateList(window.currentPage,1),window.hideWarning()}}),v.updateFooterAttribution(),f.request("userEvent:hasDoneUserEvent",{"x-pages":!1,"x-elements":!0,"x-show-pages":!0}).done(function(e){e&&f.execute("userEvent:showEvent","x-pages")}),window.obtainedPage=window.currentPage,r.vent.trigger("editor:middle",e),f.trigger("editor:middle",n.omit(e,["currentApp"]))}function R(t){e(".tablet-placeholder").hide(),e("#empty-message-standard").hide(),e("#weebly-empty-footer").hide(),e('h2:contains("Double-tap to add headline")').hide(),e('p:contains("Double tap to add description. Lorem ipsum dolor sit amet, consectetur adipiscing elit.")').hide(),e('h2:contains("Click to add headline")').hide(),e('p:contains("Click tap to add description. Lorem ipsum dolor sit amet, consectetur adipiscing elit.")').hide();var i=Weebly.pageContext.elementsByID;n.each(i,function(t){var i=e(t.li).text().trim();("Double-tap to edit."===i||"Button Text"===i)&&e(t.li).hide()}),e(".wsite-spacer").css("border-color","rgba(0,0,0,0)"),e('.phone-number > span:contains("Add text")').hide(),t.site_is_free===!0&&(e(".wsite-video").hide(),e(".wsite-search-element-outer").hide(),e(".wsite-html5audio").hide())}function x(){e(document).off("focus",F,A).on("focus",F,A).off("blur",F,N).on("blur",F,N).off("click",H,P).on("click",H,P).off("click",W,M).on("click",W,M)}function A(){window.disableBackspaceExit=!1,f.trigger(y.EVENTS.EDITING_POST_TITLE)}function P(e){f.trigger(y.EVENTS.NAV_PREVIOUS_PAGE_CLICKED)}function M(){f.trigger(y.EVENTS.NAV_NEXT_PAGE_CLICKED)}function N(t){var i=e(t.target).closest(F);window.disableBackspaceExit=!0,f.trigger(y.EVENTS.EDITED_POST_TITLE,i.text())}function L(e,t){var i,o,s,c=new a.collection,d=D.isHeaderSectionSupported(e.areas);if(n(e.areas).each(function(e){n(e).has("sections")&&n(e.sections).each(function(e,t){"object"==typeof e.properties&&(e.properties=JSON.stringify(e.properties)),c.add({section_id:e.section_id,section_order:t+1,properties:e.properties})})}),void 0===e.backgrounds&&(e.backgrounds=[]),c.length&&(i=c.getBackgroundImages(),s=c.getBackgroundVideos(),e.backgrounds=D.mergeBackgroundData(e.backgrounds,i,"section"),e.backgrounds=D.mergeVideoBackgroundData(e.backgrounds,s,"section")),d){o=new l;var u=n.chain(e.areas).findWhere({name:I.HEADER_SECTION_TAG_NAME}).result("header_section").value();if(o.add(u),o.length&&(!t["header-section"]||t["header-section"]["editable-background"]!==!1)){var h=o.first();if(h.hasBackgroundImage()){var p={},f=h.id;p[f||""]=h.getBackgroundContent(),e.backgrounds=D.mergeBackgroundData(e.backgrounds,p,"header-section")}else if(h.hasBackgroundVideo()){var m={};m[h.id]=h.getBackgroundContent(),e.backgrounds=D.mergeVideoBackgroundData(e.backgrounds,m,"header-section")}}}r.execute("themeBackground:update",e)}var B,j={},K={};j.syncPages=function(e){s.reset(e)},f.commands.setHandler("pages:sync",j.syncPages),j.setPageHierarchy=function(e){s.reset(e),u.renderTheme(),n.isUndefined(K.template)===!1&&j.setAreaTemplate(K.template)},f.reqres.setHandler("page:setPageHierarchy",j.setPageHierarchy),j.renderPage=function(e,i,o,r){setTimeout(function(){try{g.isMobileView=g.isAdaptiveView=!p.currentThemeData.responsive&&o;var s,a;n.isUndefined(K.template)===!1&&delete K.template,g.isAdaptiveView?(s=p.adaptiveThemeDefinition,a=p.adaptiveThemeCSS):(s=p.primaryThemeDefinition,a=p.primaryThemeCSS),window.currentTheme=s.theme_id,j.renderPageSync(e,i,s,a,r)}catch(l){console.error(l.stack),t.captureException(l),f.trigger(y.EVENTS.PAGE_RENDER_FAIL,l)}},0)},f.commands.setHandler("page:renderPage",j.renderPage),j.renderPageSync=function(e,t,i,n,o){if(n?B=n:n=B,r.vent.trigger("page:startRender",e,t),t.backgrounds||(t.backgrounds=d.backgrounds),f.execute("setElementsPageType"),window.currentPage=e,window.currentPageKind=t.kind,window.currentBlog.editingBlog=0,i?(i&&"object"==typeof i&&p.setCurrentThemeData(i),O(t,i,n,o)):p.getCurrentThemeData(g.isMobileView).done(function(e){O(t,e,n,o)}),t.areas){for(var s=0;s<t.areas.length;s++){var a=t.areas[s];a&&a.template&&a.elements&&0===a.elements.length&&j.setAreaTemplate(a.template)}k()}},f.commands.setHandler("page:renderPageSync",j.renderPageSync),j.buildEditingArea=function(t,i,s,a){r.vent.trigger("processPageDataHook",t);var l=t.site_element_data||t.site_areas;if(l){var c=Weebly.siteContext;Weebly.siteContext=null,l.currentApp=r,Weebly.siteContext=new h(l),Weebly.siteContext._oldContext=c,delete t.site_element_data,delete t.site_areas}else Weebly.siteContext={};o.chromeless&&L(t,i),window.currentPagePublished=Boolean(t.isPagePublished);var d=Weebly.pageContext;Weebly.pageContext=null,t.currentApp=r,Weebly.pageContext=new h(t),Weebly.pageContext.pageID=window.currentPage,Weebly.pageContext._oldContext=d,m.setCurrentHeader(t.header_image),delete t.header_image;var f="blog"==t.kind;f&&x(),window.navFlyoutMenu&&window.navFlyoutMenu.hideSubmenus(),u.adaptiveThemeCSS&&(i.css=s,p.setCurrentThemeData(i),r.vent.trigger("forceThemeRerender")),g.isMobileView&&C.isEditing&&(r.vent.trigger("forceThemeRerender"),r.vent.once("themeRendered",function(){e(document).scrollTop(e(document).height())})),i||(i=p.currentThemeData),s||(s=p.currentThemeData.css),g.isMobileView?window.currentStandardTheme=t.theme:p.setCurrentTheme(t.theme,!1),u.renderPage(function(){r.execute("element:setHandlers"),t.is_preview===!0&&R(t)},i,s,t,a),r.vent.trigger("editorListUpdated",t,i,s),"blog"===t.kind&&T.init(),t.new_elements&&n.each(t.new_elements,function(t,i){if(t.platform_element&&t.autopop){var n=e("#inside_"+i).find(".element");S.selectElement(n[0])}}),window.externalLibariesLoaded||window.loadExternalLibraries(),E.resetScrollTop(f)};var F="#blog-post-title",H=".blog-page-nav-previous",W=".blog-page-nav-next";return j.setHeaderImage=function(t){var i=w.getCurrentHeaderElement();t&&(m.setCurrentHeader({url:t}),e(i).css("background-image","url("+t+")"))},f.commands.setHandler("page:setHeaderImage",j.setHeaderImage),j.setBackgroundImage=function(e){var t=c.getBackgroundElement(""),i=null;t&&e&&e.url&&(i={"":{image:{url:e.url},position:"fill"}},c.applyBackgrounds(i))},f.commands.setHandler("page:setBackgroundImage",j.setBackgroundImage),j.setAreaTemplate=function(t){1!==window.currentBlog.editingBlog&&e("ul.weebly-content-area").each(function(){return e(this.parentElement).hasClass("wsite-not-footer")?(e(this).first().html(t),void(K.template=t)):void 0})},f.commands.setHandler("page:setAreaTemplate",j.setAreaTemplate),j.hideNav=function(){if(window.navFlyoutMenu){if(window.navFlyoutMenu.mouseoverItems){for(var e=window.navFlyoutMenu.mouseoverItems.length-1;e>=0;e--)window.navFlyoutMenu.mouseoverItems[e].trigger("mouseout");window.navFlyoutMenu.mouseoverItems=[]}window.navFlyoutMenu.contract()}},f.commands.setHandler("page:hideNav",j.hideNav),j}),_wAMD.define("site/editor/build/dimensions",["jquery","underscore","site/editor/app","editor-site-shared/relay","editor-site-shared/ui/constants","site/editor/theme-background/module","editor/design/data","site/editor/ui/weebly_header_image","site/published/sections/utils","editor-site-shared/ui/utils"],function(e,t,i,n,o,r,s,a,l,c){function d(){var t=e(".wsite-com-category-subcategory"),i=e("#wsite-com-product-list .wsite-com-category-product-featured"),n=e("#wsite-com-category-product-group-pagelist a"),o=[],r=[],s=[],a={};if(i.each(function(t,i){var n=(e(i).data("id"),e(i).find("[href^=commerce-url]")),r=n.offset();o.push({left:r.left,top:r.top,width:n.outerWidth(),height:n.outerHeight(),product_id:e(i).data("id"),link:n.attr("href")})}),t.each(function(t,i){var n=e(i).data("id"),o=e(i).find(".wsite-com-category-subcategory-link"),s=o.offset();r.push({left:s.left,top:s.top,width:o.outerWidth(),height:o.outerHeight(),category_id:n,link:o.attr("href")})}),n.length>2){var l=n.toArray();l.shift(),l.pop();l.each(function(t){var i=e(t),n=i.data("page"),o=i.data("category"),r=i.text(),a=i.hasClass("wsite-selected"),l=i.offset();s.push({page:n,category_id:o,label:r,active:a,left:l.left,top:l.top,width:i.outerWidth(),height:i.outerHeight()})})}return a.products=o,a.categories=r,a.pagination=s,a}function u(){return e(s.DESIGN_OPTIONS_SELECTORS.navButton).length>0}function h(e){var t=e.offset(),i=e.outerHeight(),n=e.outerWidth(),o=t.left+n/2,r=t.top+i/2,s=Math.max(i,v.minMenuButtonSize),a=Math.max(n,v.minMenuButtonSize),l={height:s,width:a,top:r-s/2,left:o-a/2};return l}function p(e){var i=e.offset();return t.isObject(i)||(i={top:0,left:0}),{top:i.top,left:i.left,height:e.outerHeight(!1),width:e.outerWidth(!1)}}function f(){var t=e(".blog-page-nav-previous"),i=e(".blog-page-nav-next"),n={};return 0!==t.length&&(n.prev=p(t)),0!==i.length&&(n.next=p(i)),n}function m(){for(var t,i={},n=[],o=e("#blogTable .blog-post"),r=0;r<o.length;r++){var s=o[r],a=e(s);0!==a.length&&(t=a.offset(),t&&n.push({top:t.top,left:t.left,height:a.outerHeight(!1)||a.children().outerHeight(!1),width:a.outerWidth(!1)||a.children().outerWidth(!1),align:a.align,post_id:a.attr("id").slice("blog-post-".length)}))}return i.posts=n,i.nav=f(),i}function g(){var t=e(".blog-title");if(!t)return{};var i=t.offset();return{left:i.left,top:i.top,width:t.outerWidth(),height:t.outerHeight()}}var v={};return v.minAreaSize=15,v.minMenuButtonSize=44,v.getPageDimensions=function(){if(!Weebly.siteContext||!Weebly.pageContext)return null;for(var i,n,p,f,b,y,w,_,E,T={},C=Weebly.siteContext.getAreas(),S=Weebly.pageContext.getAreas().concat(C),D=Weebly.view.isAdaptiveView,I="blog"===Weebly.pageContext.kind,k=I&&!!Weebly.pageContext.getArea("content","").main,O=[],R=0;R<S.length;R++)if(n=p=f=b=null,E=[],y=S[R],w=e(y.innerEl||y.el||"#"+y.elID),_=w.children(),!(y.data&&(D?y.data.mobileHidden:y.data.hidden)===!0||0===w.length||w.is(":hidden")&&"headline"!==y.name||k&&"content"==y.type&&"footer"==y.name||"footer"==y.type&&"mobile"==y.name)){y.descriptionArea?(y=y.descriptionArea,y.type="content"):(y.main||y.sidebar)&&(y=y.main||y.sidebar,y.type="content",w=e(y.innerEl||y.el||"#"+y.elID)),"logo"===y.type&&w.has("img").length?(f=w.find(".wsite-logo img"),n=c.detectImageAlign(f[0]),p={offset:f.offset(),height:f.height(),innerHeight:f.innerHeight(),width:f.width(),innerWidth:f.innerWidth()}):"content"==y.type&&"footer"==y.name||"footer"==y.type&&"mobile"==y.name?w.outerHeight()<v.minAreaSize&&($new_footer_el=w.parents().filter(function(t,i){return/foot/.match(i.id+" "+i.className)&&e(i).outerHeight()>v.minAreaSize&&e(i).outerWidth()>v.minAreaSize}).first(),$new_footer_el.length>0&&(w=$new_footer_el)):"content"==y.type&&y.name==o.HEADER_SECTION_TAG_NAME&&(b=w.css("vertical-align"));var x="";w.find(".wsite-com-long-description").length?x=y.elID:w.attr("class")&&w.attr("class").match(/column-blog/)?x=w[0].id:w.attr("class")&&w.attr("class").match(/column/)?x=y.elID:w.hasClass("formlist")?x=y.elID:w.closest("[data-"+o.HEADER_SECTION_PARENT_STRING_NAME+"]").length&&(x=y.parentString);var A;A="context"in y&&y.context&&"pageID"in y.context&&("store"===y.context.kind&&y.name===o.HEADER_SECTION_TAG_NAME||"store"!=y.context.kind&&y.context.pageID)?!1:!0;var P=!1;y.spotlight&&y.spotlight.spotlight&&y.spotlight.spotlight.isShown&&(P=!0);var E=[],M=[],N={},L=0;if(I&&y.elements?(E=t.invoke(y.elements,"getDimensions").reject(t.isEmpty),i=w.offset()):y.sections?(y.sections.each(function(e){var i,n,o=t.invoke(e.get("elementArea").elements,"getDimensions").reject(t.isEmpty),r=l.getSectionElement(e.id),s={};if(r.length>0){if(n=e.get("elementArea").isEmpty()){var a=r.find(".empty-element-message");r=a.length>0?a:r}i=r.offset(),s={section_id:e.id,elements:o,top:i.top+(n?8:0),left:i.left+(n?10:0),height:r.outerHeight(!1),width:r.outerWidth(!1)-(n?20:0)},M.push(s),L+=e.get("elementArea").elements.length}}),i=w.offset()):(E=t.invoke(y.element?[y.element]:y.elements,"getDimensions").reject(t.isEmpty),_.outerHeight()*_.outerWidth()>w.outerHeight()*w.outerWidth()&&(w=_),i=w.offset()),t.isObject(i)&&t.isNumber(i.top)&&t.isNumber(i.left)){var B,j,K,F,H=w.find(".empty-element-message, .wsite-com-empty-long-description");if(y.name==o.HEADER_SECTION_TAG_NAME){var W=y.el?e(y.el):w,$=W.offset();B=$.top,j=$.left,K=W.outerWidth(!1),F=W.outerHeight(!1)}else B=i.top,j=i.left,K=w.outerWidth(!1),F=w.outerHeight(!1);if(0==E.length&&0==M.length&&H.length){var V=H.offset();B=V.top,"blog"==y.context.kind&&(K=H.outerWidth(),j=V.left)}if(N={name:y.name,type:y.type,top:B,left:j,height:F,width:K,position:p,align:n,verticalAlign:b,spotlighted:P,is_site_wide:A,parentString:x},y.sections?(N.sections=M,N.empty=0==L):(N.elements=E,N.empty=0==E.length),y.headerSection){var z=y.innerEl?e(y.innerEl):w,U=z.offset();N.isBlogPost=k,N.headerSection={top:U.top,left:U.left,height:z.outerHeight(!1),width:z.outerWidth(!1)}}O.push(N)}}T.areas=O;var q=e(a.getCurrentHeaderElement());q&&q.length&&(i=q.offset()||{},T.header={height:q.outerHeight(),width:q.outerWidth(),top:i.top,left:i.left});var G=r.getBackgroundElement("");G.length&&(i=G.offset()||null,T.background_image={height:G.outerHeight(),width:G.outerWidth(),top:i.top,left:i.left});var Y=e(s.DESIGN_OPTIONS_SELECTORS.navButton).not(":hidden").filter(function(t,i){i=e(i);var n=i.offset();return n.left>=-i.outerWidth()&&n.top>=-i.outerHeight()});Y.length&&(T.nav_button=h(Y));var X=e(s.DESIGN_OPTIONS_SELECTORS.navMenu).not(":hidden");if(!t.isObject(T.nav_button)&&X.length){var J=X.closest("ul");i=J.offset(),T.nav_menu={height:J.outerHeight(),width:J.outerWidth(),top:i.top,left:i.left},T.nav_menu.height<=10&&(T.nav_menu.height=J.children().children().height())}return T.scrollWidth=e(document).width(),T.scrollHeight=e(document).height(),T.commerce=d(),u()&&(T.menu={button:T.nav_button}),k?T.blog={post:{title:g()}}:I&&(T.blog=m()),T},n.reqres.setHandler("page:getDimensions",v.getPageDimensions),i.reqres.setHandler("page:getDimensions",v.getPageDimensions),v.getSectionDimensions=function(){return n.request("section:getCollection",{readOnly:!0}).then(function(i){var n=[];return t.each(i,function(t){var i,o=e('.wsite-section[data-section="'+t.section_id+'"]');o.length&&(i=o.offset(),n.push({section_id:t.section_id,section_order:t.section_order,top:i.top,left:i.left,height:o.outerHeight(!1),width:o.outerWidth(!1)}))}),n})},n.reqres.setHandler("page:getSectionDimensions",v.getSectionDimensions),i.reqres.setHandler("page:getSectionDimensions",v.geSectionDimensions),v}),_wAMD.define("site/editor/themes/api",["underscore","editor/design/weebly_design_options","site/editor/themes/main","editor/build/themes/data","editor-site-shared/relay"],function(e,t,i,n,o){var r={"site-title":"siteTitle","paragraph-title":"header","paragraph-text":"global",links:"a","navigation-menu-text":"navMenu","flyout-menu-text":"flyoutMenu","image-captions":"imageCaptions","photo-gallery-captions":"galleryCaptions","lightbox-gallery-captions":"lightboxGalleryCaptions","slideshow-captions":"slideshowCaptions","phone-number-field":"phone","landing-page-headline":"headline","landing-page-sub-headline":"subHeadline",button:"button","small-button":"smallButton",blockquote:"blockquote","footer-paragraph-title":"footerHeader","footer-paragraph-text":"footerGlobal","footer-links":"footerA","footer-blockquote":"footerBlockquote","blog-post-title":"blogPostTitle","product-title":"productTitle","product-price":"productPrice"},s={primaryThemeCSS:null,adaptiveThemeCSS:null};return s.renderTheme=function(e,o,r,s,a,l,c){l&&(t.setDesignOptions(l),t.applyDesignOptions()),Weebly.view.isMobileView=Weebly.view.isAdaptiveView=!n.currentThemeData.responsive&&c,Weebly.view.isAdaptiveView&&(o=s,r=a),i.renderTheme(e,null,o,r)},o.commands.setHandler("theme:renderTheme",s.renderTheme),s.setNavMore=function(e,t){window.DISABLE_NAV_MORE=e,t&&s.renderTheme()},o.commands.setHandler("theme:DISABLE_NAV_MORE",s.setNavMore),s.setThemeCSS=function(e,t){var n=t?"adaptive":"desktop",o=Weebly.view.isAdaptiveView?"adaptive":"desktop";if(t){if(s.adaptiveThemeCSS==e)return;s.adaptiveThemeCSS=e}else{if(s.primaryThemeCSS==e)return;s.primaryThemeCSS=e}var r=function(){n===o&&i.setThemeStyle(window.currentTheme,window.currentThemeColor,e)};Weebly.pageContext&&Weebly.pageContext.hasRendered?r():editorApp.vent.once("themeRendered",r)},o.commands.setHandler("theme:setThemeCSS",s.setThemeCSS),s.getCurrentFontSettings=function(e){var i=t.getCurrentStyles(e);return i&&i.font&&(i.font=i.font.replace(/'/g,"")),i},o.reqres.setHandler("theme:getCurrentFontSettings",s.getCurrentFontSettings),s.setFontSetting=function(e,i,n){setTimeout(function(){var o=i.charAt(0).toUpperCase()+i.slice(1),s=r[e]+o;t.setDesignOption(s,n),t.siteApplyDesignOptions()},0)},o.commands.setHandler("theme:setFontSetting",s.setFontSetting),s.setFontSettings=function(e){setTimeout(function(){t.setDesignOptions(e),t.siteApplyDesignOptions()},0)},o.commands.setHandler("theme:setFontSettings",s.setFontSettings),s.setThemeColor=function(e,t){setTimeout(function(){n.setCurrentThemeColor(e),s.renderTheme(null,t)},0)},o.commands.setHandler("theme:setThemeColor",s.setThemeColor),s}),_wAMD.define("tablet/util",["jquery","editor-site-shared/relay"],function(e,t){function i(){}var n={};return n.getImageDimensions=function(t){var i=e("#"+t).find("img");return{offset:i.offset(),height:i.height(),innerHeight:i.innerHeight(),width:i.width(),innerWidth:i.innerWidth()}},n.addPlaceholder=function(t){var i=e(t),n=i.outerWidth(!1),o=i.outerHeight(!1);e(".wsite-transparent-placeholder").remove();var r=e('<div class="wsite-transparent-placeholder"></div>');r.width(n),r.height(o),r.css("marginTop",i.css("marginTop")),r.css("marginBottom",i.css("marginBottom")),r.css("marginLeft",i.css("marginLeft")),r.css("marginRight",i.css("marginRight")),i.after(r),i.hide()},t.commands.setHandler("page:resizeHeaderImage",i),n.removePlaceholder=function(t){t&&e(t).show(),e(".wsite-transparent-placeholder").remove()},n.resizePlaceholder=function(t,i){var n=parseInt(t,10),o=parseInt(i,10),r=e(".wsite-transparent-placeholder");r.width(n+"px"),r.height(o+"px")},t.commands.setHandler("page:resizePlaceholder",n.resizePlaceholder),t.commands.setHandler("area:resizePlaceholder",n.resizePlaceholder),t.commands.setHandler("element:resizePlaceholder",n.resizePlaceholder),n.formatPHPDate=function(e,t){var i=["d","j","m","n","y","Y","a","A","g","h","G","H","i","s"],n=["DD","D","MM","M","YY","YYYY","a","A","hh","h","HH","H","mm","ss"];return _.each(i,function(e,i){t=t.replace(e,n[i])}),new Date(t).toString()},n}),_wAMD.define("site/editor/build/element",["jquery","underscore","mustache","backbone-all","site/editor/app","tablet/util","editor-site-shared/relay","editor-site-shared/ui/constants","legacy/weebly_element_utils","editor-site-shared/build/AreaUtils","editor/sections/utils","editor-site-shared/build/elements/Element","tpl!platform/theme/core/shared/commerce/aspect-ratio-image.tpl","editor-site-shared/ui/utils","site/editor/ui/weebly_elements","site/editor/commerce/module"],function(e,t,i,n,o,r,s,a,l,c,d,u,h,p,f,m){function g(e){p.init(o),p.setElementData(l.getElementObject(e),e)}function v(e){e.preventDefault()}function b(t,i){var n=e("#inside_"+t+" img"),o=window.getElementObject(t),r=new Weebly.CommerceProduct(o),s=m.storefrontSettings.getRatioAsNumber("product_image_ratio"),a=r.calculateProductImageAspectRatio(i,s);n.attr("src",i.path),n.width(a.width+"%"),n.css("top",a.top+"%"),n.css("left",a.left+"%")}function y(e,i,n,o){var r,s=l.getElementObject(e);if(s&&s.product_data){if(n&&o){var a=s.getContentField();a.getProperty("<!PRODUCTID!>")&&(a.getProperty("<!PRODUCTID!>").property_result=n,a.getProperty("<!PRODUCTSKUID!>").property_result=o)}t.keys(i).each(function(e){s.product_data[e]=i[e],"product_skus"===e&&(s.product_data.price=i[e][0].price,s.product_data.salePrice=i[e][0].sale_price)}),s.rerender(),r=i.image_order?i.image_order[0]:null,w.assignProductImageAttributes(e,i.product_images,r)}}var w={};return w.addElement=function(t,i,n,r,s,c){var d,h=e("#"+s);try{d=h.closest("li.inside").attr("id").replace("inside_","")}catch(p){}var m={type:t,name:i},v=l.newElement(s,n,r,m,d,c);if(v&&(o.vent.trigger("editor:elements:newElement"),o.vent.trigger("editor:elements:changed"),g(n.id),w.setHandlers(!0),u.globalAfterRender(),n.eid==a.PLATFORM_ELEMENT_ID)){var b=l.getElementObject(n.id),y=b.getContentField().getProperty("<!ELEMENTSETTINGS!>");if(y&&y.property_result){var _=JSON.parse(y.property_result);_&&_.config&&(_.config.autopop||b.tutorial_autopop)&&f.selectElement(e("#inside_"+n.id).find(".element")[0])}}return v},s.reqres.setHandler("element:addElement",w.addElement),w.setHandlers=function(){e("#secondlist .columnlist-blog").each(function(){0==this.childNodes.length?this.style.height="400px":this.style.height="auto"}),e(".formlist").each(function(){this.select(".show-element-options-image").invoke("remove")}),e("#secondlist").each(function(){prettyPrint()}),e("#createLink").each(function(){new Draggable("createLink")}),e(".weebly-content-area a, #weeblyfootertext a, #weeblyfooterattribution a").not('[href^="blog-url"]').each(function(){e(this).on("click",v),this.title=_W.utl("javascript.site.editor.build.element_2")}),e(".weebly-content-area .disable-link").each(function(){e(this).on("click",v),this.title=""}),e(".editable-text a").each(function(){this.title=""}),e(".product-old .product-title, .product-old .product-description").each(function(){var e=this;e.setAttribute("contentEditable","true"),e.addClassName("editable-text"),e.ondblclick=function(){showEditBox(e.id,null,{saveCallback:saveProductField,redrawOptions:!0,showOptions:!0})}}),e(".product-old .product-price").each(function(){var e=this;e.setAttribute("contentEditable","true"),e.addClassName("editable-text"),e.ondblclick=function(){showEditBox(e.id,null,{saveCallback:saveProductField,redrawOptions:!0,showOptions:!1})}})},s.commands.setHandler("element:setHandlers",w.setHandlers),
o.commands.setHandler("element:setHandlers",w.setHandlers),w.removeElement=function(t){var i=c.getAreaInstanceForElement(e("#inside_"+t).closest(".weebly-area")[0]);i.sections&&(i=i.getSectionFromElementId(t).get("elementArea")),i.removeElement(t),o.vent.trigger("editor:elements:changed")},s.commands.setHandler("element:removeElement",w.removeElement),w.updateColumnWidths=function(e,t){l.getElementObject(e).updateWidths(t),o.vent.trigger("editor:elements:changed")},s.reqres.setHandler("element:updateColumnWidths",w.updateColumnWidths),w.addColumn=function(t,i,n,r,s){var a=c.getAreaInstanceForElement(e("#inside_"+t).closest(".weebly-area")[0]);s&&(a=d.getElementAreaInstanceFromSectionId(s,a)),a.addColumn(t,i,n,null,r),a.removeEmptyColumns(),o.vent.trigger("editor:elements:changed"),g(t)},s.reqres.setHandler("element:addColumn",w.addColumn),w.setProperty=function(t,i,n,r){setTimeout(function(){var s=l.getElementObject(t),a=s.content_fields[i];l.setContentFieldProperty(i,n,r);var c=l.getContentFieldProperty(i,n);if(c&&"<!SRC!>"===c.reference_property&&""!==c.property_result){var d=a.getProperty("<!DATA!>"),u=d.property_result||"{}",h=JSON.parse(u);h.placeholder=!1,d.property_result=JSON.stringify(h)}var p=e("#"+i),f={};if(f[n]=r,s.rerenderContentField(a,p[0],function(){o.vent.trigger("forceDocumentSizeChange")},f),s.product_data){var m=s.product_data.image_order?s.product_data.image_order[0]:null;w.assignProductImageAttributes(t,s.product_data.product_images,m)}},0)},s.commands.setHandler("element:setProperty",w.setProperty),w.setProductElementImage=function(t,i){setTimeout(function(){e("#inside_"+t+" img").attr("src",i)},0)},s.commands.setHandler("element:setProductElementImage",w.setProductElementImage),w.assignProductImageAttributes=function(t,n,o){var r=i.render(h,{class_prefix:"wsite-product-image",image_source:"blank-product-w320.png",image_percent_width:100,image_percent_left:-25,image_percent_top:0});e("#inside_"+t+" .wsite-product-image").html(r);for(var s=null,n=n||[],a=0;a<n.length;a++)if(n[a].product_image_id===o){s=n[a];break}null!==s&&b(t,s)},s.commands.setHandler("element:assignProductImageAttributes",w.assignProductImageAttributes),w.setProductAttributes=function(e,t,i,n){y(e,n,t,i)},s.commands.setHandler("element:setProductAttributes",w.setProductAttributes),w.updateElementsForProduct=function(e,i){var n=Weebly.pageContext.elementsByID;t.each(n,function(t){t.product_data&&t.product_data.product_id===e&&y(t.id,i)})},s.commands.setHandler("element:updateElementsForProduct",w.updateElementsForProduct),w.setProperties=function(e,t,i){for(var n=0,o=i.length;o>n;n++)this.setProperty(e,t,i[n].ucfpid,i[n].property_result)},s.commands.setHandler("element:setProperties",w.setProperties),w.getProperty=function(e,t,i){var n=l.getElementObject(e);if(!n)return null;var o=n.getContentField(t);if(!o)return null;var r=o.getProperty(i);return r?r.property_result:null},s.reqres.setHandler("element:getProperty",w.getProperty),w.showElement=function(e){var t="#inside_"+e;r.removePlaceholder(t),o.vent.trigger("forceDocumentSizeChange")},s.commands.setHandler("element:showElement",w.showElement),w.getImageDimensions=function(e){return r.getImageDimensions(e)},s.reqres.setHandler("element:getImageDimensions",w.getImageDimensions),w.hideElement=function(e){var t="#inside_"+e;r.addPlaceholder(t)},s.commands.setHandler("element:hideElement",w.hideElement),w.blur=function(){e(":focus").blur()},s.commands.setHandler("element:blur",w.blur),w}),_wAMD.define("site/editor/build/area",["jquery","underscore","tablet/util","editor-site-shared/relay","editor-site-shared/build/AreaUtils"],function(e,t,i,n,o){function r(){return o.getAreaInstance(!0,"logo",Weebly.view.isAdaptiveView?"mobile":null)}var s={};return s.hideArea=function(e,i,n){t.isUndefined(n)&&(n=!0),setTimeout(function(){var t=o.getAreaInstance(n,e,i);t&&t.hide()},0)},n.commands.setHandler("area:hideArea",s.hideArea),s.showArea=function(e,i,n){t.isUndefined(n)&&(n=!0),setTimeout(function(){var t=o.getAreaInstance(n,e,i);t&&t.show()},0)},n.commands.setHandler("area:showArea",s.showArea),s.hideLogoArea=function(){setTimeout(function(){var e=r();e&&(e.data.hidden=!0,e.data.hideTitle=!0,window.hideTitle=!0,e.rerender())},0)},n.commands.setHandler("area:hideLogoArea",s.hideLogoArea),s.rerenderLogoArea=function(){setTimeout(function(){var e=r();e&&e.rerender()},0)},n.commands.setHandler("area:rerenderLogoArea",s.rerenderLogoArea),s.setSiteTitle=function(t,i){window.currentSiteTitle=t,e("#wsite-title").text(t),i?this.showArea("logo"):this.hideArea("logo")},n.commands.setHandler("area:setSiteTitle",s.setSiteTitle),s.showSiteTitle=function(){setTimeout(function(){var e=r();e&&(window.hideTitle=!1,e.data.hidden=!1,e.data.hideTitle=!1,e.data.isImage=!1,e.rerender())},0)},n.commands.setHandler("area:showSiteTitle",s.showSiteTitle),s.showLogoImage=function(e){setTimeout(function(){var t=r();t&&(i.removePlaceholder(),e&&(t.data.isImage=!0,t.data.url=e),t.data.url&&(t.data.hidden=!1,t.data.isImage=!0,t.rerender()))},0)},n.commands.setHandler("area:showLogoImage",s.showLogoImage),s.resizeLogoImage=function(){var e=".wsite-logo img";i.addPlaceholder(e)},n.commands.setHandler("area:resizeLogoImage",s.resizeLogoImage),s}),_wAMD.define("ui-framework/js/components/popover",["jquery","./base-view","./overlay","./utils"],function(e,t,i,n){function o(t){var i=e(t),o=n.getElDataAttributes(t,"data-popover-"),r=i.data("popover");if("object"!=typeof r){var s,l;o.content?(s=e('<div class="popover"><div class="popover__content">'+o.content+"</div></div>"),l=i.parent()):(s=o.selector?e(o.selector):i.closest(".popover-container").find(".popover"),l=s.parent()),r=new a({parent:l,el:s,pointAt:i}),i.data("popover",r)}r.toggle(o)}function r(e){e.preventDefault(),o(this)}function s(){e(document).off("click.popover","[data-popover]").on("click.popover","[data-popover]",r)}var a=t.extend(e.extend({},i.Mixin,{className:"popover",arrowClassName:"popover__arrow",arrowGap:-10,arrowSize:7,closeOnClickAway:!0,closeOnEsc:!0,constructor:function(i){t.call(this,i);var n=this.queryOption("el");n&&e(n).css("display","block").detach()},render:function(){t.prototype.render.apply(this,arguments);var i=this.queryOption("content");i&&this.$el.empty().append(e('<div class="popover__content">'+i+"</div>"))},toggle:function(e){this.$el.closest("body").length?this.close():(this.setElement(this.queryOption("el")),this.open(e))}}));return a.initialize=s,a.initPopover=o,a}),_wAMD.define("tpl!editor/updates/sections-tutorial-customizable-headers.tpl",[],function(){return'<div class="popover__title_container">\n	<h1 class="popover__title">\n		{{#tl}}templates.editor.updates.sections-tutorial_customizable-headers{{/tl}}\n	</h1>\n	<div class="new-icon">\n		{{#tl}}templates.editor.updates.sections-tutorial_new{{/tl}}\n	</div>\n</div>\n<span class="popover__text">\n	{{#tl}}templates.editor.updates.sections-tutorial_customizable-headers-text{{/tl}}\n</span>\n<div class="popover__button-container">\n	<button class="btn">\n		{{#tl}}templates.editor.updates.sections-tutorial_got-it{{/tl}}\n	</button>\n</div>'}),_wAMD.define("site/editor/build/update",["jquery","site/editor/app","editor-site-shared/relay","ui-framework/js/components/popover","tpl!editor/updates/sections-tutorial-customizable-headers.tpl","mustache","editor-site-shared/ui/constants"],function(e,t,i,n,o,r,s){i.once("tutorial:sections:start",function(){i.commands.setHandlers({"tutorial:show:customizable:headers":function(){var a=e("."+s.HEADER_SECTION_CLASS_NAME),l=new n({content:r.render(o),pointAt:a,allowLeftRight:!1,preferBottom:!0,closeOnClickAway:!0,closeOnClick:!1,closeOnEsc:!1,showPointAtArrow:!0,placement:"bottom",wrapClassName:"ui-framework sections-tutorial",arrowGap:2}),c=l.close.bind(l);t.vent.once("navClicked",c),t.vent.once("pageRendered",c),t.vent.once("editor:elements:newElement",c);var d=function(){t.vent.off("navClicked",c),t.vent.off("pageRendered",c),t.vent.off("editor:elements:newElement",c),i.trigger("tutorial:schedule")};l.on("close",d),l.on("open",function(){l.$el.find(".btn").on("click",c)}),l.open()}})})}),_wAMD.define("site/editor/mobile/main",["jquery","site/editor/app","legacy/mobile_navigation","editor-site-shared/relay","editor/build/mobile/data","editor/build/ui/weebly_view","site/published/general"],function(e,t,i,n,o,r){function s(){i.resizeScreen()}function a(){window.isThemeCSSLoaded()?l():window.whenThemeCSSLoaded(l),i.resizeScreen()}function l(){e(".wsite-mobile-menu").length>0||(e("#wmobile-menu").find("ul span.wsite-nav-handle").show(),i.init())}function c(){var t="//"+ASSETS_BASE+"/css/mobile-sites.css";e("head").append('<link id="mobile-css" rel="stylesheet" href="'+t+'">')}function d(){e("#mobile-css").remove()}var u=t.module("mobile"),h=e(window);return u.on("start",function(){n.commands.setHandlers({setMobileColor:u.setMobileColor,setSiteSettings:o.setSiteSettings}),u.listenTo(n,{setMobileView:u.setMobileView,setStandardView:u.setStandardView})}),u.setMobileView=function(){r.isMobileView||(t.vent.trigger("setMobileView"),o.getSiteSetting("allow_mobile")!==!1&&(c(),r.isMobileView=!0,window.ENABLE_PAGE_HIERARCHY=!1,window.navFlyoutMenu&&window.navFlyoutMenu.destroy(),e("body").addClass("wsite-mobile"),u.listenTo(h,{resize:i.resizeScreen}),u.listenTo(t.vent,{"editor:middle":s,"pageRendered themeRendered":a,navClicked:i.closeMenu})))},u.setMobileColor=function(t){e(".wmobile-bar,.wmobile-button,.wmobile-line").css("background-color",t)},u.setStandardView=function(){r.isMobileView&&(t.vent.trigger("setStandardView"),o.getSiteSetting("allow_mobile")!==!1&&(d(),r.isMobileView=!1,window.ENABLE_PAGE_HIERARCHY=!0,e("body").removeClass("wsite-mobile"),u.stopListening(h),u.stopListening(t.vent)))},u}),_wAMD.define("util/disqusSDK",[],function(){var e,t,i={};return i.getDisqusElement=function(){return document.getElementById("disqus_thread")},i.embed=function(t){if(i.getDisqusElement())if(e)i.reset(t);else{var n=t.shortname;t.identifier,t.url,t.config;e=document.createElement("script"),e.async=!0,e.type="text/javascript",e.src="//"+n+".disqus.com/embed.js",e.onload=function(){i.reset(t)},(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}},i.count=function(e){var i="",n=e.shortname;if(window.disqus_shortname=n,t&&t.parentNode){t.parentNode.removeChild(t),window.DISQUSWIDGETS=t=void 0,i="?_="+(new Date).getTime();for(var o,r=n+".disqus.com/count-data.js",s=document.getElementsByTagName("head")[0],a=s.childNodes,l=0;l<a.length;l++)o=a[l],"SCRIPT"===o.nodeName&&o.src.match(r)&&s.removeChild(o)}t=document.createElement("script"),t.async=!0,t.type="text/javascript",t.src="//"+n+".disqus.com/count.js"+i,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)},i.reset=function(e){var t=i.getDisqusElement();t&&(e.scheme&&(t.style.color="dark"===e.scheme?"#fff":"#000"),DISQUS.reset({reload:!0,config:function(){this.page.identifier=e.identifier,this.page.title=e.title,this.page.url=e.url}}))},i}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/wDatepicker",["jquery"],e):e(window.jQuery)}(function(e){function t(){return new Date(Date.UTC.apply(Date,arguments))}function i(t,i){var n,o=e(t).data(),r={},s=new RegExp("^"+i.toLowerCase()+"([A-Z])"),i=new RegExp("^"+i.toLowerCase());for(var a in o)i.test(a)&&(n=a.replace(s,function(e,t){return t.toLowerCase()}),r[n]=o[a]);return r}function n(t){var i={};if(d[t]||(t=t.split("-")[0],d[t])){var n=d[t];return e.each(c,function(e,t){t in n&&(i[t]=n[t])}),i}}var o=e(window),r=function(t,i){this._process_options(i),this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=e(u.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};r.prototype={constructor:r,_process_options:function(t){this._o=e.extend({},this._o,t);var i=this.o=e.extend({},this._o),n=i.language;switch(d[n]||(n=n.split("-")[0],d[n]||(n=l.language)),i.language=n,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var o=u.parseFormat(i.format);i.startDate!==-(1/0)&&(i.startDate?i.startDate instanceof Date?i.startDate=this._local_to_utc(this._zero_time(i.startDate)):i.startDate=u.parseDate(i.startDate,o,i.language):i.startDate=-(1/0)),i.endDate!==1/0&&(i.endDate?i.endDate instanceof Date?i.endDate=this._local_to_utc(this._zero_time(i.endDate)):i.endDate=u.parseDate(i.endDate,o,i.language):i.endDate=1/0),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],e.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=e.map(i.daysOfWeekDisabled,function(e){return parseInt(e,10)});var r=String(i.orientation).toLowerCase().split(/\s+/g),s=i.orientation.toLowerCase();if(r=e.grep(r,function(e){return/^auto|left|right|top|bottom$/.test(e)}),i.orientation={x:"auto",y:"auto"},s&&"auto"!==s)if(1===r.length)switch(r[0]){case"top":case"bottom":i.orientation.y=r[0];break;case"left":case"right":i.orientation.x=r[0]}else s=e.grep(r,function(e){return/^left|right$/.test(e)}),i.orientation.x=s[0]||"auto",s=e.grep(r,function(e){return/^top|bottom$/.test(e)}),i.orientation.y=s[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var t,i,n=0;n<e.length;n++)t=e[n][0],i=e[n][1],t.on(i)},_unapplyEvents:function(e){for(var t,i,n=0;n<e.length;n++)t=e[n][0],i=e[n][1],t.off(i)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{mousedown:e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,i){var n=i||this.date,o=this._utc_to_local(n);this.element.trigger({type:t,date:o,format:e.proxy(function(e){var t=e||this.o.format;return u.formatDate(n,t,this.o.language)},this)})},show:function(e){this.isInline||this.picker.appendTo(this.o.parentElement?this.o.parentElement:"body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),e&&e.preventDefault(),this._trigger("show")},hide:function(e){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue())},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())},_local_to_utc:function(e){return new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return this.date},setDate:function(e){this.setUTCDate(this._local_to_utc(e))},setUTCDate:function(e){this.date=e,this.setValue()},setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change()},getFormattedDate:function(e){return void 0===e&&(e=this.o.format),u.formatDate(this.date,e,this.o.language)},setStartDate:function(e){this._process_options({startDate:e}),this.update(),this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var t,i=this.picker.outerWidth(),n=this.picker.outerHeight(),r=10,s=o.width(),a=o.height(),l=o.scrollTop(),c=parseInt(this.element.parents().filter(function(){return"auto"!=e(this).css("z-index")}).first().css("z-index"))+10;t=this.component?this.component.parent().offset():this.element.parent().hasClass("input-prepend")?this.element.parent().offset():this.element.offset();var d=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),u=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),h=t.left-(this.o.parentElement?e(this.o.parentElement).offset().left:0),p=t.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(h-=i-u)):(this.picker.addClass("datepicker-orient-left"),t.left<0?h-=t.left-r:t.left+i>s&&(h=s-i-r));var f,m,g=this.o.orientation.y;"auto"===g&&(f=-l+t.top-n,m=l+a-(t.top+d+n),g=Math.max(f,m)===m?"top":"bottom"),this.picker.addClass("datepicker-orient-"+g),"top"===g?p+=d:p-=n+parseInt(this.picker.css("padding-top")),this.picker.css({top:p,left:h,zIndex:c})}},_allow_update:!0,update:function(){if(this._allow_update){var e,t=new Date(this.date),i=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(e=arguments[0],e instanceof Date&&(e=this._local_to_utc(e)),i=!0):(e=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=u.parseDate(e,this.o.format,this.o.language),i?this.setValue():e?t.getTime()!==this.date.getTime()&&this._trigger("changeDate"):this._trigger("clearDate"),this.date<this.o.startDate?(this.viewDate=new Date(this.o.startDate),this.date=new Date(this.o.startDate)):this.date>this.o.endDate?(this.viewDate=new Date(this.o.endDate),this.date=new Date(this.o.endDate)):(this.viewDate=new Date(this.date),this.date=new Date(this.date)),this.fill()}},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';t+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;e<this.o.weekStart+7;)t+='<th class="dow">'+d[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;12>t;)e+='<span class="month">'+d[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var i=[],n=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),r=this.date.valueOf(),s=new Date;return t.getUTCFullYear()<n||t.getUTCFullYear()==n&&t.getUTCMonth()<o?i.push("old"):(t.getUTCFullYear()>n||t.getUTCFullYear()==n&&t.getUTCMonth()>o)&&i.push("new"),this.o.todayHighlight&&t.getUTCFullYear()==s.getFullYear()&&t.getUTCMonth()==s.getMonth()&&t.getUTCDate()==s.getDate()&&i.push("today"),r&&t.valueOf()==r&&i.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),-1!=e.inArray(t.valueOf(),this.range)&&i.push("selected")),i},fill:function(){var i,n=new Date(this.viewDate),o=n.getUTCFullYear(),r=n.getUTCMonth(),s=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),a=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),l=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,c=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf();this.picker.find(".datepicker-days thead th.datepicker-switch").text(d[this.o.language].months[r]+" "+o),this.picker.find("tfoot th.today").text(d[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(d[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var h=t(o,r-1,28,0,0,0,0),p=u.getDaysInMonth(h.getUTCFullYear(),h.getUTCMonth());h.setUTCDate(p),h.setUTCDate(p-(h.getUTCDay()-this.o.weekStart+7)%7);var f=new Date(h);f.setUTCDate(f.getUTCDate()+42),f=f.valueOf();for(var m,g=[];h.valueOf()<f;){if(h.getUTCDay()==this.o.weekStart&&(g.push("<tr>"),this.o.calendarWeeks)){var v=new Date(+h+(this.o.weekStart-h.getUTCDay()-7)%7*864e5),b=new Date(+v+(11-v.getUTCDay())%7*864e5),y=new Date(+(y=t(b.getUTCFullYear(),0,1))+(11-y.getUTCDay())%7*864e5),w=(b-y)/864e5/7+1;g.push('<td class="cw">'+w+"</td>")}if(m=this.getClassNames(h),m.push("day"),this.o.beforeShowDay!==e.noop){var _=this.o.beforeShowDay(this._utc_to_local(h));void 0===_?_={}:"boolean"==typeof _?_={enabled:_}:"string"==typeof _&&(_={classes:_}),_.enabled===!1&&m.push("disabled"),_.classes&&(m=m.concat(_.classes.split(/\s+/))),_.tooltip&&(i=_.tooltip)}m=e.unique(m),g.push('<td class="'+m.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+h.getUTCDate()+"</td>"),h.getUTCDay()==this.o.weekEnd&&g.push("</tr>"),h.setUTCDate(h.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(g.join(""));var E=this.date&&this.date.getUTCFullYear(),T=this.picker.find(".datepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");E&&E==o&&T.eq(this.date.getUTCMonth()).addClass("active"),(s>o||o>l)&&T.addClass("disabled"),o==s&&T.slice(0,a).addClass("disabled"),o==l&&T.slice(c+1).addClass("disabled"),g="",o=10*parseInt(o/10,10);var C=this.picker.find(".datepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var S=-1;11>S;S++)g+='<span class="year'+(-1==S?" old":10==S?" new":"")+(E==o?" active":"")+(s>o||o>l?" disabled":"")+'">'+o+"</span>",o+=1;C.html(g)},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&t<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(i){i.preventDefault();var n=e(i.target).closest("span, td, th");if(1==n.length)switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var o=u.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,o),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,o),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var r=new Date;r=t(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0),this.showMode(-2);var s="linked"==this.o.todayBtn?null:"view";this._setDate(r,s);break;case"clear":var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){if(this.viewDate.setUTCDate(1),n.is(".month")){var l=1,c=n.parent().find("span").index(n),d=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(c),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(t(d,c,l,0,0,0,0))}else{var d=parseInt(n.text(),10)||0,l=1,c=0;this.viewDate.setUTCFullYear(d),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(t(d,c,l,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var l=parseInt(n.text(),10)||1,d=this.viewDate.getUTCFullYear(),c=this.viewDate.getUTCMonth();n.is(".old")?0===c?(c=11,d-=1):c-=1:n.is(".new")&&(11==c?(c=0,d+=1):c+=1),this._setDate(t(d,c,l,0,0,0,0))}}},_setDate:function(e,t){t&&"date"!=t||(this.date=new Date(e)),t&&"view"!=t||(this.viewDate=new Date(e)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change(),!this.o.autoclose||t&&"date"!=t||this.hide()},moveMonth:function(e,t){if(!t)return e;var i,n,o=new Date(e.valueOf()),r=o.getUTCDate(),s=o.getUTCMonth(),a=Math.abs(t);if(t=t>0?1:-1,1==a)n=-1==t?function(){return o.getUTCMonth()==s}:function(){return o.getUTCMonth()!=i},i=s+t,o.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var l=0;a>l;l++)o=this.moveMonth(o,t);i=o.getUTCMonth(),o.setUTCDate(r),n=function(){return i!=o.getUTCMonth()}}for(;n();)o.setUTCDate(--r),o.setUTCMonth(i);return o},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return void(27==e.keyCode&&this.show());var t,i,n,o=!1;switch(e.keyCode){case 27:this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=37==e.keyCode?-1:1,e.ctrlKey?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+t),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),o=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=38==e.keyCode?-1:1,e.ctrlKey?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+7*t),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+7*t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),o=!0);break;case 13:this.hide(),e.preventDefault();break;case 9:this.hide()}if(o){this._trigger("changeDate");var r;this.isInput?r=this.element:this.component&&(r=this.element.find("input")),r&&r.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+u.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var s=function(t,i){this.element=e(t),this.inputs=e.map(i.inputs,function(e){return e.jquery?e[0]:e}),delete i.inputs,e(this.inputs).datepicker(i).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};s.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.date}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,i){i.setRange(t)})},dateUpdated:function(t){var i=e(t.target).data("datepicker"),n=i.getUTCDate(),o=e.inArray(t.target,this.inputs),r=this.inputs.length;if(-1!=o){if(n<this.dates[o])for(;o>=0&&n<this.dates[o];)this.pickers[o--].setUTCDate(n);else if(n>this.dates[o])for(;r>o&&n>this.dates[o];)this.pickers[o++].setUTCDate(n);this.updateDates()}},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var a=e.fn.datepicker;e.fn.datepicker=function(t){var o=Array.apply(null,arguments);o.shift();var a;return this.each(function(){var c=e(this),d=c.data("datepicker"),u="object"==typeof t&&t;if(!d){var h=i(this,"date"),p=e.extend({},l,h,u),f=n(p.language),m=e.extend({},l,f,h,u);if(c.is(".input-daterange")||m.inputs){var g={inputs:m.inputs||c.find("input").toArray()};c.data("datepicker",d=new s(this,e.extend(m,g)))}else c.data("datepicker",d=new r(this,m))}return"string"==typeof t&&"function"==typeof d[t]&&(a=d[t].apply(d,o),void 0!==a)?!1:void 0}),void 0!==a?a:this};var l=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},c=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=r;var d=e.fn.datepicker.dates={ar:{days:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت","الأحد"],daysShort:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت","أحد"],daysMin:["ح","ن","ث","ع","خ","ج","س","ح"],months:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],monthsShort:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],today:"هذا اليوم",rtl:!0},bg:{days:["Неделя","Понеделник","Вторник","Сряда","Четвъртък","Петък","Събота","Неделя"],daysShort:["Нед","Пон","Вто","Сря","Чет","Пет","Съб","Нед"],daysMin:["Н","П","В","С","Ч","П","С","Н"],months:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],monthsShort:["Ян","Фев","Мар","Апр","Май","Юни","Юли","Авг","Сеп","Окт","Ное","Дек"],today:"днес"},ca:{days:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte","Diumenge"],daysShort:["Diu","Dil","Dmt","Dmc","Dij","Div","Dis","Diu"],daysMin:["dg","dl","dt","dc","dj","dv","ds","dg"],months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],monthsShort:["Gen","Feb","Mar","Abr","Mai","Jun","Jul","Ago","Set","Oct","Nov","Des"],
today:"Avui"},cs:{days:["Neděle","Pondělí","Úterý","Středa","Čtvrtek","Pátek","Sobota","Neděle"],daysShort:["Ned","Pon","Úte","Stř","Čtv","Pát","Sob","Ned"],daysMin:["Ne","Po","Út","St","Čt","Pá","So","Ne"],months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],monthsShort:["Led","Úno","Bře","Dub","Kvě","Čer","Čnc","Srp","Zář","Říj","Lis","Pro"],today:"Dnes"},da:{days:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag","Søndag"],daysShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør","Søn"],daysMin:["Sø","Ma","Ti","On","To","Fr","Lø","Sø"],months:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"I Dag"},de:{days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],daysShort:["Son","Mon","Die","Mit","Don","Fre","Sam","Son"],daysMin:["So","Mo","Di","Mi","Do","Fr","Sa","So"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],today:"Heute",weekStart:1,format:"dd.mm.yyyy"},el:{days:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο","Κυριακή"],daysShort:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ","Κυρ"],daysMin:["Κυ","Δε","Τρ","Τε","Πε","Πα","Σα","Κυ"],months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],monthsShort:["Ιαν","Φεβ","Μαρ","Απρ","Μάι","Ιουν","Ιουλ","Αυγ","Σεπ","Οκτ","Νοε","Δεκ"],today:"Σήμερα"},en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"},es:{days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],daysShort:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb","Dom"],daysMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa","Do"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],today:"Hoy"},et:{days:["Pühapäev","Esmaspäev","Teisipäev","Kolmapäev","Neljapäev","Reede","Laupäev","Pühapäev"],daysShort:["Püh","Esm","Tei","Kol","Nel","Ree","Lau","Sun"],daysMin:["P","E","T","K","N","R","L","P"],months:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],monthsShort:["Jaan","Veeb","Märts","Apr","Mai","Juuni","Juuli","Aug","Sept","Okt","Nov","Dets"],today:"Täna"},fi:{days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai","sunnuntai"],daysShort:["sun","maa","tii","kes","tor","per","lau","sun"],daysMin:["su","ma","ti","ke","to","pe","la","su"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],monthsShort:["tam","hel","maa","huh","tou","kes","hei","elo","syy","lok","mar","jou"],today:"tänään",weekStart:1,format:"d.m.yyyy"},fr:{days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],daysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],daysMin:["D","L","Ma","Me","J","V","S","D"],months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthsShort:["Jan","Fev","Mar","Avr","Mai","Jui","Jul","Aou","Sep","Oct","Nov","Dec"],today:"Aujourd'hui",clear:"Effacer",weekStart:1,format:"dd/mm/yyyy"},he:{days:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת","ראשון"],daysShort:["א","ב","ג","ד","ה","ו","ש","א"],daysMin:["א","ב","ג","ד","ה","ו","ש","א"],months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],monthsShort:["ינו","פבר","מרץ","אפר","מאי","יונ","יול","אוג","ספט","אוק","נוב","דצמ"],today:"היום",rtl:!0},hr:{days:["Nedjelja","Ponedjelja","Utorak","Srijeda","Četrtak","Petak","Subota","Nedjelja"],daysShort:["Ned","Pon","Uto","Srr","Čet","Pet","Sub","Ned"],daysMin:["Ne","Po","Ut","Sr","Če","Pe","Su","Ne"],months:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],monthsShort:["Sije","Velj","Ožu","Tra","Svi","Lip","Jul","Kol","Ruj","Lis","Stu","Pro"],today:"Danas"},hu:{days:["Vasárnap","Hétfő","Kedd","Szerda","Csütörtök","Péntek","Szombat","Vasárnap"],daysShort:["Vas","Hét","Ked","Sze","Csü","Pén","Szo","Vas"],daysMin:["Va","Hé","Ke","Sz","Cs","Pé","Sz","Va"],months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],monthsShort:["Jan","Feb","Már","Ápr","Máj","Jún","Júl","Aug","Sze","Okt","Nov","Dec"],today:"Ma",weekStart:1,format:"yyyy.mm.dd"},id:{days:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"],daysShort:["Mgu","Sen","Sel","Rab","Kam","Jum","Sab","Mgu"],daysMin:["Mg","Sn","Sl","Ra","Ka","Ju","Sa","Mg"],months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],monthsShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"],today:"Hari Ini",clear:"Kosongkan"},is:{days:["Sunnudagur","Mánudagur","Þriðjudagur","Miðvikudagur","Fimmtudagur","Föstudagur","Laugardagur","Sunnudagur"],daysShort:["Sun","Mán","Þri","Mið","Fim","Fös","Lau","Sun"],daysMin:["Su","Má","Þr","Mi","Fi","Fö","La","Su"],months:["Janúar","Febrúar","Mars","Apríl","Maí","Júní","Júlí","Ágúst","September","Október","Nóvember","Desember"],monthsShort:["Jan","Feb","Mar","Apr","Maí","Jún","Júl","Ágú","Sep","Okt","Nóv","Des"],today:"Í Dag"},it:{days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato","Domenica"],daysShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab","Dom"],daysMin:["Do","Lu","Ma","Me","Gi","Ve","Sa","Do"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthsShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],today:"Oggi",weekStart:1,format:"dd/mm/yyyy"},ja:{days:["日曜","月曜","火曜","水曜","木曜","金曜","土曜","日曜"],daysShort:["日","月","火","水","木","金","土","日"],daysMin:["日","月","火","水","木","金","土","日"],months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],today:"今日",format:"yyyy/mm/dd"},ka:{days:["კვირა","ორშაბათი","სამშაბათი","ოთხშაბათი","ხუთშაბათი","პარასკევი","შაბათი","კვირა"],daysShort:["კვი","ორშ","სამ","ოთხ","ხუთ","პარ","შაბ","კვი"],daysMin:["კვ","ორ","სა","ოთ","ხუ","პა","შა","კვ"],months:["იანვარი","თებერვალი","მარტი","აპრილი","მაისი","ივნისი","ივლისი","აგვისტო","სექტემბერი","ოქტომები","ნოემბერი","დეკემბერი"],monthsShort:["იან","თებ","მარ","აპრ","მაი","ივნ","ივლ","აგვ","სექ","ოქტ","ნოე","დეკ"],today:"დღეს",clear:"გასუფთავება"},kr:{days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일","일요일"],daysShort:["일","월","화","수","목","금","토","일"],daysMin:["일","월","화","수","목","금","토","일"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],monthsShort:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},lt:{days:["Sekmadienis","Pirmadienis","Antradienis","Trečiadienis","Ketvirtadienis","Penktadienis","Šeštadienis","Sekmadienis"],daysShort:["S","Pr","A","T","K","Pn","Š","S"],daysMin:["Sk","Pr","An","Tr","Ke","Pn","Št","Sk"],months:["Sausis","Vasaris","Kovas","Balandis","Gegužė","Birželis","Liepa","Rugpjūtis","Rugsėjis","Spalis","Lapkritis","Gruodis"],monthsShort:["Sau","Vas","Kov","Bal","Geg","Bir","Lie","Rugp","Rugs","Spa","Lap","Gru"],today:"Šiandien",weekStart:1},lv:{days:["Svētdiena","Pirmdiena","Otrdiena","Trešdiena","Ceturtdiena","Piektdiena","Sestdiena","Svētdiena"],daysShort:["Sv","P","O","T","C","Pk","S","Sv"],daysMin:["Sv","Pr","Ot","Tr","Ce","Pk","St","Sv"],months:["Janvāris","Februāris","Marts","Aprīlis","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],monthsShort:["Jan","Feb","Mar","Apr","Mai","Jūn","Jūl","Aug","Sep","Okt","Nov","Dec."],today:"Šodien",weekStart:1},mk:{days:["Недела","Понеделник","Вторник","Среда","Четврток","Петок","Сабота","Недела"],daysShort:["Нед","Пон","Вто","Сре","Чет","Пет","Саб","Нед"],daysMin:["Не","По","Вт","Ср","Че","Пе","Са","Не"],months:["Јануари","Февруари","Март","Април","Мај","Јуни","Јули","Август","Септември","Октомври","Ноември","Декември"],monthsShort:["Јан","Фев","Мар","Апр","Мај","Јун","Јул","Авг","Сеп","Окт","Ное","Дек"],today:"Денес"},ms:{days:["Ahad","Isnin","Selasa","Rabu","Khamis","Jumaat","Sabtu","Ahad"],daysShort:["Aha","Isn","Sel","Rab","Kha","Jum","Sab","Aha"],daysMin:["Ah","Is","Se","Ra","Kh","Ju","Sa","Ah"],months:["Januari","Februari","Mac","April","Mei","Jun","Julai","Ogos","September","Oktober","November","Disember"],monthsShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ogo","Sep","Okt","Nov","Dis"],today:"Hari Ini"},nb:{days:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag","Søndag"],daysShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør","Søn"],daysMin:["Sø","Ma","Ti","On","To","Fr","Lø","Sø"],months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],monthsShort:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],today:"I Dag"},nl:{days:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag","Zondag"],daysShort:["Zo","Ma","Di","Wo","Do","Vr","Za","Zo"],daysMin:["Zo","Ma","Di","Wo","Do","Vr","Za","Zo"],months:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"Vandaag"},no:{days:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],daysShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],daysMin:["Sø","Ma","Ti","On","To","Fr","Lø"],months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],monthsShort:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],today:"I dag",clear:"Nullstill",weekStart:0},pl:{days:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota","Niedziela"],daysShort:["Nie","Pn","Wt","Śr","Czw","Pt","So","Nie"],daysMin:["N","Pn","Wt","Śr","Cz","Pt","So","N"],months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],monthsShort:["Sty","Lu","Mar","Kw","Maj","Cze","Lip","Sie","Wrz","Pa","Lis","Gru"],today:"Dzisiaj",weekStart:1},ptBR:{days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado","Domingo"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],daysMin:["Do","Se","Te","Qu","Qu","Se","Sa","Do"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",clear:"Limpar"},pt:{days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado","Domingo"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],daysMin:["Do","Se","Te","Qu","Qu","Se","Sa","Do"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",clear:"Limpar"},ro:{days:["Duminică","Luni","Marţi","Miercuri","Joi","Vineri","Sâmbătă","Duminică"],daysShort:["Dum","Lun","Mar","Mie","Joi","Vin","Sâm","Dum"],daysMin:["Du","Lu","Ma","Mi","Jo","Vi","Sâ","Du"],months:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],monthsShort:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],today:"Astăzi",weekStart:1},rslatin:{days:["Nedelja","Ponedeljak","Utorak","Sreda","Četvrtak","Petak","Subota","Nedelja"],daysShort:["Ned","Pon","Uto","Sre","Čet","Pet","Sub","Ned"],daysMin:["N","Po","U","Sr","Č","Pe","Su","N"],months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],today:"Danas"},rs:{days:["Недеља","Понедељак","Уторак","Среда","Четвртак","Петак","Субота","Недеља"],daysShort:["Нед","Пон","Уто","Сре","Чет","Пет","Суб","Нед"],daysMin:["Н","По","У","Ср","Ч","Пе","Су","Н"],months:["Јануар","Фебруар","Март","Април","Мај","Јун","Јул","Август","Септембар","Октобар","Новембар","Децембар"],monthsShort:["Јан","Феб","Мар","Апр","Мај","Јун","Јул","Авг","Сеп","Окт","Нов","Дец"],today:"Данас"},ru:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],daysShort:["Вск","Пнд","Втр","Срд","Чтв","Птн","Суб","Вск"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб","Вс"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",weekStart:1},sk:{days:["Nedeľa","Pondelok","Utorok","Streda","Štvrtok","Piatok","Sobota","Nedeľa"],daysShort:["Ned","Pon","Uto","Str","Štv","Pia","Sob","Ned"],daysMin:["Ne","Po","Ut","St","Št","Pia","So","Ne"],months:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Máj","Jún","Júl","Aug","Sep","Okt","Nov","Dec"],today:"Dnes"},sl:{days:["Nedelja","Ponedeljek","Torek","Sreda","Četrtek","Petek","Sobota","Nedelja"],daysShort:["Ned","Pon","Tor","Sre","Čet","Pet","Sob","Ned"],daysMin:["Ne","Po","To","Sr","Če","Pe","So","Ne"],months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],today:"Danes"},sq:{days:["E Diel","E Hënë","E martē","E mërkurë","E Enjte","E Premte","E Shtunë","E Diel"],daysShort:["Die","Hën","Mar","Mër","Enj","Pre","Shtu","Die"],daysMin:["Di","Hë","Ma","Më","En","Pr","Sht","Di"],months:["Janar","Shkurt","Mars","Prill","Maj","Qershor","Korrik","Gusht","Shtator","Tetor","Nëntor","Dhjetor"],monthsShort:["Jan","Shk","Mar","Pri","Maj","Qer","Korr","Gu","Sht","Tet","Nën","Dhjet"],today:"Sot"},sv:{days:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag","Söndag"],daysShort:["Sön","Mån","Tis","Ons","Tor","Fre","Lör","Sön"],daysMin:["Sö","Må","Ti","On","To","Fr","Lö","Sö"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"I Dag",format:"yyyy-mm-dd",weekStart:1},sw:{days:["Jumapili","Jumatatu","Jumanne","Jumatano","Alhamisi","Ijumaa","Jumamosi","Jumapili"],daysShort:["J2","J3","J4","J5","Alh","Ij","J1","J2"],daysMin:["2","3","4","5","A","I","1","2"],months:["Januari","Februari","Machi","Aprili","Mei","Juni","Julai","Agosti","Septemba","Oktoba","Novemba","Desemba"],monthsShort:["Jan","Feb","Mac","Apr","Mei","Jun","Jul","Ago","Sep","Okt","Nov","Des"],today:"Leo"},th:{days:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัส","ศุกร์","เสาร์","อาทิตย์"],daysShort:["อา","จ","อ","พ","พฤ","ศ","ส","อา"],daysMin:["อา","จ","อ","พ","พฤ","ศ","ส","อา"],months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],monthsShort:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],today:"วันนี้"},tr:{days:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"],daysShort:["Pz","Pzt","Sal","Çrş","Prş","Cu","Cts","Pz"],daysMin:["Pz","Pzt","Sa","Çr","Pr","Cu","Ct","Pz"],months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],monthsShort:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],today:"Bugün",format:"dd.mm.yyyy"},uk:{days:["Неділя","Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота","Неділя"],daysShort:["Нед","Пнд","Втр","Срд","Чтв","Птн","Суб","Нед"],daysMin:["Нд","Пн","Вт","Ср","Чт","Пт","Сб","Нд"],months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],monthsShort:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],today:"Сьогодні"},zhCN:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今日",format:"yyyy年mm月dd日",weekStart:1},zhTW:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["週日","週一","週二","週三","週四","週五","週六","週日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今天",format:"yyyy年mm月dd日",weekStart:1}},u={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,u.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\x00").split("\x00"),i=e.match(this.validParts);if(!t||!t.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(i,n,o){if(i instanceof Date)return i;if("string"==typeof n&&(n=u.parseFormat(n)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){var s,a,l=/([\-+]\d+)([dmwy])/,c=i.match(/([\-+]\d+)([dmwy])/g);i=new Date;for(var h=0;h<c.length;h++)switch(s=l.exec(c[h]),a=parseInt(s[1]),s[2]){case"d":i.setUTCDate(i.getUTCDate()+a);break;case"m":i=r.prototype.moveMonth.call(r.prototype,i,a);break;case"w":i.setUTCDate(i.getUTCDate()+7*a);break;case"y":i=r.prototype.moveYear.call(r.prototype,i,a)}return t(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}var p,f,s,c=i&&i.match(this.nonpunctuation)||[],i=new Date,m={},g=["yyyy","yy","M","MM","m","mm","d","dd"],v={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;0>t;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!=t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};v.M=v.MM=v.mm=v.m,v.dd=v.d,i=t(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var b=n.parts.slice();if(c.length!=b.length&&(b=e(b).filter(function(t,i){return-1!==e.inArray(i,g)}).toArray()),c.length==b.length){for(var h=0,y=b.length;y>h;h++){if(p=parseInt(c[h],10),s=b[h],isNaN(p))switch(s){case"MM":f=e(d[o].months).filter(function(){var e=this.slice(0,c[h].length),t=c[h].slice(0,e.length);return e==t}),p=e.inArray(f[0],d[o].months)+1;break;case"M":f=e(d[o].monthsShort).filter(function(){var e=this.slice(0,c[h].length),t=c[h].slice(0,e.length);return e==t}),p=e.inArray(f[0],d[o].monthsShort)+1}m[s]=p}for(var w,_,h=0;h<g.length;h++)_=g[h],_ in m&&!isNaN(m[_])&&(w=new Date(i),v[_](w,m[_]),isNaN(w)||(i=w))}return i},formatDate:function(t,i,n){"string"==typeof i&&(i=u.parseFormat(i));var o={d:t.getUTCDate(),D:d[n].daysShort[t.getUTCDay()],DD:d[n].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:d[n].monthsShort[t.getUTCMonth()],MM:d[n].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m;for(var t=[],r=e.extend([],i.separators),s=0,a=i.parts.length;a>=s;s++)r.length&&t.push(r.shift()),t.push(o[i.parts[s]]);return t.join("")},headTemplate:'<thead><tr><th class="prev"><i class="w-icon-chevron-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="w-icon-chevron-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};u.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+u.headTemplate+"<tbody></tbody>"+u.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+u.headTemplate+u.contTemplate+u.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+u.headTemplate+u.contTemplate+u.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=u,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=a,this},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=e(this);i.data("datepicker")||(t.preventDefault(),i.datepicker("show"))}),e(function(){_W.siteContextData&&_W.siteContextData.jdateFormat&&(e.fn.datepicker.defaults.format=_W.siteContextData.jdateFormat),e('[data-provide="datepicker-inline"]').datepicker()})}),_wAMD.define("blog/frame/post/module",["jquery","moment","util/disqusSDK","util/facebookSDK","site/editor/app","editor-site-shared/relay","util/ui/wDatepicker","legacy/weebly_main"],function(e,t,i,n,o,r){return o.module("blogPost",function(o){function s(i){u.title.on({"focus.post-view":function(e){var t=u.title,i=t.text();t.data("default-value")===i&&t.text(""),a(t),window.disableBackspaceExit=!1},"blur.post-view":function(){var e=u.title;""===e.text()&&e.text(e.data("default-value")),r.execute("blogPost:set","post_title",a(e)),window.disableBackspaceExit=!0},"paste.post-view":function(){setTimeout(function(){a(u.title)},50)},"keydown.post-view":function(e){(13===e.keyCode||27===e.keyCode)&&this.blur()}}),h=e('<div class="w-ui"></div>').appendTo("body");var n=t(i.createdDateInSiteTz,_W.siteContext.mdateFormat).toDate();u.dateField.datepicker({format:_W.siteContext.jdateFormat,autoclose:!0,parentElement:h}).on("show",function(){if(u.dateText.length){var e=u.dateText.offset(),t=u.dateText.height(),i=u.dateText.width();u.dateField.data("datepicker").picker.css({top:e.top+t,left:Math.max(e.left-i-40,0)}),h.find(".datepicker").css("z-index","14")}}).datepicker("setDate",n).datepicker("fill"),u.dateText.on("click.post-view",function(e){u.dateField.datepicker("show")}),u.dateField.on({"change.post-view":function(){var e=u.dateField.val();u.dateText.text(e),r.execute("blogPost:set","createdDateInSiteTz",e)}})}function a(e){var t=e.text().replace(/[\n\r]+/g," ");return e.text(t),t}function l(e){var t=(new DOMParser).parseFromString(e,"text/html");return t.documentElement.textContent}function c(){var t=e("body").hasClass("wsite-theme-light");d.postUrl&&(i.embed({shortname:d.shortname,identifier:d.postId,url:d.postUrl,scheme:t?"light":"dark",config:function(){this.language="en"}}),i.count({shortname:shortname}))}o.startWithParent=!1;var d,u,h;o.on("start",function(t){d=t,e("#icontent, body").addClass("wsite-blog-post"),u={title:e("#blog-post-title"),dateText:e(".date-text"),dateField:e("#blog-date-field"),commentArea:e("#blogTable .blog-comment-area")},r.commands.setHandlers({"blogPost:date:update":function(e){u.dateText.text(e),u.dateField.val(e)},"blogPost:comments:hide":function(){u.commentArea.hide()}}),o.listenTo(r,{"blogPost:title:blur":function(){var e=u.title;e.is(":focus")&&e.trigger("blur")},"blogPost:publish:success":function(){resetBlogGlobals(),e("#secondlist-blog").remove()}}),r.request("blog:post:current").done(function(e){currentBlog.postId=void 0!==e?e:0}).fail(function(){}),d.postTitle&&u.title.text(l(d.postTitle)),d.hideComments?u.commentArea.hide():"facebook"===d.commentingSystem?n.parse():"disqus"===d.commentingSystem&&c(),s(d)}),o.on("stop",function(){e("#icontent, body").removeClass("wsite-blog-post"),h.remove(),u.title.off(".post-view"),u.dateText.off(".post-view"),u.dateField.off(".post-view"),r.commands.removeHandlers(["blogPost:date:update","blogPost:comments:hide"])})})}),_wAMD.define("blog/frame/module",["jquery","util/disqusSDK","util/facebookSDK","site/editor/app","editor-site-shared/relay","site/editor/ui/Spotlight","blog/frame/post/module","legacy/weebly_utils","legacy/weebly_main"],function($,disqusSDK,facebookSDK,frameApp,Relay,Spotlight,BlogPostModule){var module=frameApp.module("blog",function(blogModule){var blogContainer,spotlight={padding:10,current:void 0,open:function(){var e,t,i=this,n=$(".blog-body"),o=this.padding;i.current&&i.close(),i.current=new Spotlight({element:n,interval:100,light:!0,opacity:.3,padding:o,roundedCorners:!0,onReposition:function(){i.positionNav(n,e,t)}}),i.current.show(),e=$("#blog-navigation"),t=$(i.current.container[0]),t.append(e),i.positionNav(n,e,t)},positionNav:function(e,t,i){var n=i.offset(),o=e.offset(),r=this.padding;t.css({width:e.outerWidth()+2*r,top:o.top-t.outerHeight()-n.top-r-8,left:o.left-n.left-r})},close:function(){this.current&&this.current.destroy(),this.current=null}},relayCommands={"blog:index:init":function(){var e;$("#icontent, body").addClass("wsite-blog-index"),blogContainer=$("#blogTable"),e=blogContainer.find(".blog-post"),e.length?(blogContainer.on("click",'a[href^="blog-url"]',function(e){var t=this.href.split(":")[1];Relay.execute("blog:link:go",t),e.preventDefault()}),blogContainer.on("click.blog-index",".blog-post",function(e){var t=e.currentTarget.id;t&&3==t.split("-").length&&(t=t.split("-")[2],window.currentBlog.postId=t,Relay.execute("blog:post:edit",t))})):blogContainer.find(".blog-postlist").prepend('<div id="empty-blog-posts">'+_W.utl("javascript.blog.frame.module_2")+"</div>")},"blog:index:teardown":function(){$("#icontent, body").removeClass("wsite-blog-index")},"blog:spotlight:open":function(){spotlight.open()},"blog:spotlight:close":function(){spotlight.close()},"blog:facebook:init":function(){facebookSDK.parse()},"blog:disqus:init":function(e){disqusSDK.count({shortname:e})},"blog:post:teardown":function(){blogContainer&&(blogContainer.off(".blog-index"),blogContainer=void 0)},"blogPost:start":function(e){BlogPostModule.start(e)},"blog:platformElements:update":function(){setTimeout(function(){$("#content .blog-body").find(".element-script").each(function(index,script){eval(script.innerHTML)})},500)}};blogModule.on("start",function(){Relay.commands.setHandlers(relayCommands),Relay.reqres.setHandlers({"blogPost:stop":function(){resetBlogGlobals(),BlogPostModule.stop()}})})})}),_wAMD.define("tpl!page-layouts/editor/spotlight/preview-element-cover.tpl",[],function(){return'<div class="page-layout-element-cover"></div>'}),_wAMD.define("tpl!page-layouts/editor/spotlight/preview-tooltip.tpl",[],function(){return'<div class="spotlight-container">\n	<p class="title">{{#tl}}templates.page-layouts.editor.spotlight.preview-tooltip_1{{/tl}}</p>\n	<a class="cancel-btn min-btn" href="#">{{#tl}}templates.page-layouts.editor.spotlight.preview-tooltip_2{{/tl}}</a>\n	<a class="keep-btn min-btn" href="#">{{#tl}}templates.page-layouts.editor.spotlight.preview-tooltip_3{{/tl}}</a>\n	<div class="arrow_box"></div>\n	<div class="top_arrow_box"></div>\n</div>'}),_wAMD.define("site/editor/page-layouts/PageLayoutSpotlightView",["jquery","backbone-all","mustache","editor-site-shared/relay","site/editor/ui/spotlights","tpl!page-layouts/editor/spotlight/preview-element-cover.tpl","tpl!page-layouts/editor/spotlight/preview-tooltip.tpl"],function(e,t,i,n,o,r,s){var a=t.Marionette.ItemView.extend({template:i.compile(s),className:"page-layout-preview-tooltip",ui:{keepBtn:".keep-btn",cancelBtn:".cancel-btn"},events:{"click @ui.keepBtn":"keepLayout","click @ui.cancelBtn":"changeLayout"},onReady:function(){var t=this;o.showContentAreaSpotlights({opacity:.5,ants:!1,roundedCorners:!1,zIndex:100,element:e(t.options.contentAreaSelector)});var i=t.positionTooltip();if(e("#secondlist .weebly-content-area").append(r),t.$el.addClass("fade-in"),"footer"!=t.options.content_area){var n;n=i?t.$el.position().top-20:t.$el.position().top+t.$el.height()+20,e(window).animate({scrollTop:n},500)}t.saveButton=e(".spotlight-controls-inner").find(".save-button"),t.saveButton&&t.saveButton.hide()},positionTooltip:function(){var t=this,i=e(t.options.contentAreaSelector);t.options.sectionId&&(i=i.find(".wsite-section[data-section='"+t.options.sectionId+"']")),t.$el.css("left",i.offset().left+i.width()/2);var n=i.offset().top-t.$el.height()-20;return n>0?(t.$el.css("top",n),!0):(t.$el.addClass("top-arrow"),t.$el.css("top",i.offset().top+i.height()-10),!1)},closeView:function(){var t=this;n.execute("pageLayouts:spotlight:close"),o.hideContentAreaSpotlights(),t.saveButton&&t.saveButton.show(),t.remove(),t.unbind(),e(".page-layout-element-cover").remove()},keepLayout:function(t){var i=this;t&&t.preventDefault(),i.closeView(),i.saveButton&&i.saveButton.trigger("click"),n.execute("pageLayouts:spotlight:close",i.options),e(".page-layout-element-cover").remove()},changeLayout:function(e){var t=this;n.request("pageLayouts:revertLayout",t.options),e&&e.preventDefault(),t.closeView()}});return a}),_wAMD.define("site/editor/page-layouts/module",["jquery","editor-site-shared/relay","site/editor/app","site/editor/page-layouts/PageLayoutSpotlightView"],function(e,t,i,n){var o=null,r=i.module("pageLayouts");return r.on("start",function(){e(document).on("click.pageLayouts","#empty-message.layout-chooser",function(){var e=this.getAttribute("data-content-area"),i=this.getAttribute("data-layout-section-id");t.execute("pageLayouts:gallery:show",e,null,i)})}),r.on("stop",function(){e(document).off(".pageLayouts")}),t.commands.setHandlers({"pageLayouts:spotlight:show":function(t){o=new n(t),o.render(),e("#_editor-ui").append(o.$el),setTimeout(function(){o.onReady(),e(document).scrollTop(o.$el.parent().position().top+o.$el.position().top-20)},100)},"pageLayouts:confirmTooltip:position":function(){o&&o.positionTooltip()}}),r}),_wAMD.define("commerce/editor-site/collection/Category",["underscore","editor-site-shared/relay","commerce/editor/collection/Category"],function(e,t,i){var n=i.extend({fetch:function(i){var n=this;return i=i?e.clone(i):{},t.request("editor:commerce:categories:fetch",i).done(function(e){n.set(e)})}});return n}),_wAMD.define("commerce/editor/model/CategoryHierarchy",["jquery","underscore","editor-site-shared/relay","./_baseCommerceModel","./Category","../collection/Category"],function(e,t,i,n,o,r){function s(e,i){for(var n=e.length;n--;){var o=e[n],r=i.model.prototype._getNewId(t.defaults({site_category_id:o.id},i.model.prototype.defaults)),a=o.children,l=a?a.length:0;if(i.get(r))l&&s(a,i);else{var c=[n,1].concat(a||[]);e.splice.apply(e,c),n+=l}}}function a(e,t){var i=e.get("hierarchy");t&&i&&(t.length||(i=[]),s(i,t),e.set("hierarchy",i))}var l,c=n,d=c.prototype;n.vent.on("create:category delete:category",function(){l=!1});var u=c.extend({defaults:{hierarchy:[]},idAttribute:"site_id",fetch:function(t){var i=this;if(t=t||{},t.force&&(l=!1),l)l.done(function(e){i.set("hierarchy",e)});else{var n=new r;l=e.when(d.fetch.apply(this,arguments),n.fetch({force:t.force})).then(function(e){return e[0]}),l.done(function(){a(i,n),i.createSavepoint()}).fail(function(){l=!1})}return l},sync:function(e,t,i){var n,o=window.com_userID||window.userID,r=window.com_currentSite||window.currentSite;switch(e){case"update":
case"patch":l=!1,n=Weebly.Commerce.RPC.Category.saveHierarchy(o,r,t.get("hierarchy")).done(function(){i.success&&i.success()});break;case"read":n=Weebly.Commerce.RPC.Category.getHierarchy(o,r).done(function(e){i.success&&i.success({hierarchy:e})})}return n},find:function(e){for(var t,i=this.get("hierarchy"),n=[i[0]];n.length;){if(t=n.shift(),t.id==e)return t;n.push.apply(n,t.children)}return!1},addCategory:function(e,t){var i=this.find(t?t.get("site_category_id"):"1");i&&(i.children.push({id:e.get("site_category_id"),children:[]}),this.trigger("change:hierarchy"),this.trigger("change"))},removeCategory:function(e){var i=this.get("hierarchy"),n=function(e,i){e.children=t.reject(e.children,function(e){return e.id==i}),t.each(e.children,function(e){n(e,i)})};n(i[0],e.get("site_category_id")),this.trigger("change:hierarchy"),this.trigger("change")},getAncestors:function(e){var i,n,o,r,s=[],a=!1;for(t.each(this.get("hierarchy")[0].children,function(e){s.push([e])});s.length;){if(n=s.shift(),o=t.last(n),o.id==e){a=n;break}for(i=0;i<o.children.length;i++)r=t.clone(n),r.push(o.children[i]),s.push(r)}return a},ancestors:function(i){var n=this.getAncestors(i),o=e.Deferred(),s=[],a=new r;return a.fetch().done(function(){n&&t.each(n,function(e){var t=a.findWhere({site_category_id:e.id});s.push(t)}),s.length?o.resolve(new r(s)):o.reject()}),o.promise()},root:function(){return this.get("hierarchy")[0]}});return i.reqres.setHandlers({"editor:commerce:categoryHierarchy:fetch":function(e){var t=u.findOrCreate();return t.fetch(e).then(function(){return t.toJSON()})}}),i.commands.setHandlers({"editor:commerce:categoryHierarchy:force":function(){l=!1}}),u}),_wAMD.define("commerce/editor-site/model/CategoryHierarchy",["underscore","editor-site-shared/relay","site/editor/app","commerce/editor/model/CategoryHierarchy"],function(e,t,i,n){var o=n.extend({fetch:function(i){var n=this;return i=i?e.clone(i):{},t.request("editor:commerce:categoryHierarchy:fetch",i).done(function(e){n.set(e)})}});return i.vent.on("site:initialized",function(){n.prototype.defaults.owner_id=window.com_userID,n.prototype.defaults.site_id=window.com_currentSite}),o}),_wAMD.define("tpl!commerce/editor/general/popover.tpl",[],function(){return'<div id="commerce_editor_{{type}}_editchoices" class="button-popover w-ui">\n	<div class="button-popover-left"></div>\n	<div class="button-popover-content">\n		{{#buttons}}\n			<a id="{{id}}" href="javascript:;" class="btn btn-primary" role="button">{{text}}</a>\n		{{/buttons}}\n	</div>\n	<div class="button-popover-right"></div>\n</div>\n'}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("jquery-ui/sortable",["jquery","./core","./mouse","./widget"],e):e(jQuery)}(function(e){return e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var n=null,o=!1,r=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,r.widgetName+"-item")===r?(n=e(this),!1):void 0}),e.data(t.target,r.widgetName+"-item")===r&&(n=e(t.target)),n&&(!this.options.handle||i||(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(o=!0)}),o))?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,i,n){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,o,r,s=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-this.document.scrollTop()<s.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<s.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)),t.pageX-this.document.scrollLeft()<s.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<s.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],o=n.item[0],r=this._intersectsWithPointer(n),r&&n.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==o&&!e.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],o):!0)){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,r=e.left,s=r+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,d=this.offset.click.left,u="x"===this.options.axis||n+c>a&&l>n+c,h="y"===this.options.axis||t+d>r&&s>t+d,p=u&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:r<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),n=t&&i,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return n?this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:n&&("down"===n&&t||"up"===n&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){a.push(this)}var n,o,r,s,a=[],l=[],c=this._connectWith();if(c&&t)for(n=c.length-1;n>=0;n--)for(r=e(c[n],this.document[0]),o=r.length-1;o>=0;o--)s=e.data(r[o],this.widgetFullName),s&&s!==this&&!s.options.disabled&&l.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=l.length-1;n>=0;n--)l[n][0].each(i);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,o,r,s,a,l,c,d=this.items,u=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(i=h.length-1;i>=0;i--)for(o=e(h[i],this.document[0]),n=o.length-1;n>=0;n--)r=e.data(o[n],this.widgetFullName),r&&r!==this&&!r.options.disabled&&(u.push([e.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):e(r.options.items,r.element),r]),this.containers.push(r));for(i=u.length-1;i>=0;i--)for(s=u[i][1],a=u[i][0],n=0,c=a.length;c>n;n++)l=e(a[n]),l.data(this.widgetName+"-item",s),d.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,o,r;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=o.outerWidth(),n.height=o.outerHeight()),r=o.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)r=this.containers[i].element.offset(),this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),o=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===n?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(o)):"tr"===n?t._createTrPlaceholder(t.currentItem,o):"img"===n&&o.attr("src",t.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(e,o){(!i||n.forcePlaceholderSize)&&(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var n=this;t.children().each(function(){e("<td>&#160;</td>",n.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,n,o,r,s,a,l,c,d,u,h=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(h&&e.contains(this.containers[i].element[0],h.element[0]))continue;h=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(o=1e4,r=null,d=h.floating||this._isFloating(this.currentItem),s=d?"left":"top",a=d?"width":"height",u=d?"clientX":"clientY",n=this.items.length-1;n>=0;n--)e.contains(this.containers[p].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[s],c=!1,t[u]-l>this.items[n][a]/2&&(c=!0),Math.abs(t[u]-l)<o&&(o=Math.abs(t[u]-l),r=this.items[n],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],i=e(o.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*n}},_generatePosition:function(t){var i,n,o=this.options,r=t.pageX,s=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){function i(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}this.reverting=!1;var n,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&o.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||o.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(o.push(function(e){this._trigger("remove",e,this._uiHash())}),o.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||o.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(o.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(n=0;n<o.length;n++)o[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}),_wAMD.define("commerce/site/view/mobile/CategoryPageView",["jquery","legacy/mobile_navigation"],function(e,t){if(Weebly.Commerce){Weebly.Commerce.Site.Mobile||(Weebly.Commerce.Site.Mobile={}),Weebly.Commerce.Site.Mobile.Category||(Weebly.Commerce.Site.Mobile.Category={}),Weebly.Commerce.Site.Mobile.Category.View||(Weebly.Commerce.Site.Mobile.Category.View={});var i=Weebly.Commerce.Site.Mobile.Category.View;Weebly.Commerce.Site.Mobile.Category.initialize=function(){i.Hierarchy.initialize(),i.Pager.initialize()},i.Hierarchy={initialize:function(){var n=e("#wsite-com-hierarchy-dropdown");n.on("change",i.Hierarchy.handleDropdownChange),t.resizeScreen()},handleDropdownChange:function(t){return window.location.pathname=e(this).val(),!1}},i.Pager={categoryId:0,totalPages:1,currentPage:1,initialize:function(){var t=e("#wsite-com-pagination");i.Pager.categoryId=parseInt(t.attr("data-com-category")),i.Pager.totalPages=parseInt(t.attr("data-com-total")),i.Pager.currentPage=parseInt(t.attr("data-com-current"));var n=t.find(".wsite-com-pagination-left, .wsite-com-pagination-right");n.on("click",i.Pager.handleClick)},handleClick:function(t){var n=e(this),o=i.Pager.currentPage;if(n.is(".wsite-com-pagination-left")?o--:o++,o>=i.Pager.totalPages-1&&(o=i.Pager.totalPages-1),0>=o&&(o=0),o!=i.Pager.currentPage){i.Pager.currentPage=o;var r=e("#wsite-com-pagination .wsite-com-pagination-left"),s=e("#wsite-com-pagination .wsite-com-pagination-right");r.toggleClass("wsite-disabled",i.Pager.currentPage<=0),s.toggleClass("wsite-disabled",i.Pager.currentPage>=i.Pager.totalPages-1);var a=e("#wsite-com-pagination .wsite-com-current");a.html(i.Pager.currentPage+1);var l;l=Weebly.Commerce&&Weebly.Commerce.Editor?Weebly.Commerce.RPC.Category.generateMobileProductList(window.com_userID,window.com_currentSite,i.Pager.categoryId,i.Pager.currentPage):Weebly.Commerce.RPC.Category.generateMobileProductList(i.Pager.categoryId,i.Pager.currentPage),l.done(function(t){var i=e("#product-list");i.height(i.outerHeight()),i.empty(),i.height("auto"),i.html(t.content),Weebly.mobile_navigation.resizeScreen()})}}},e(document).ready(Weebly.Commerce.Site.Mobile.Category.initialize)}}),_wAMD.define("commerce/editor/view/elements/CategoryPageEdit",["jquery","config","mustache","editor/app","site/editor/app","editor-site-shared/relay","commerce/editor-site/collection/Category","commerce/editor-site/model/CategoryHierarchy","site/editor/commerce/module","tpl!commerce/editor/general/popover.tpl","jquery-ui/sortable","commerce/site/view/mobile/CategoryPageView"],function(e,t,i,n,o,r,s,a,l,c){function d(t,i){function n(){return t.find(i.items||"> *")}var o=e.extend({},i,{helper:"clone",start:function(){t.sortable("refreshPositions");var e=u(n());n().css("height",e),i.start&&i.start.apply(t[0],arguments)},stop:function(){i.stop&&i.stop.apply(t[0],arguments)}});t.sortable(o)}function u(t){var i=0;return t.each(function(){i=Math.max(i,e(this).height())}),i}var h=o.module("commerce.category");return h.on("start",function(){h.listenTo(o.vent,{pageRendered:function(){Weebly.Commerce&&Weebly.COMMERCE_ENABLED&&!t.chromeless&&h.onUpdateElementList()}}),h.listenTo(n,{"commerce:category:page:change":function(){Category.Page.onUpdateElementList()}})}),h.onUpdateElementList=function(){return Weebly.view.isMobileView?void Weebly.Commerce.Site.Mobile.Category.initialize():(e(".wsite-com-category-product, .wsite-com-category-product-featured, .wsite-com-category-subcategory").attr("title","Drag to reorder"),void(e("#wsite-com-area-category").length&&this.initialize()))},h.initialize=function(){var t=Weebly.Commerce.Site.Category.View.ProductList,n=e("#wsite-com-area-category");if(Weebly.Permissions.store_settings){var o=n.attr("data-id"),r=l.storefrontSettings.get("storefront_category_id"),s=o==r;n.append(i.render(c,{type:"category",buttons:[{id:"commerce_editor_category_editinstoretab",text:s?_W.utl("javascript.commerce.editor.view.elements.CategoryPageEdit_2"):_W.utl("javascript.commerce.editor.view.elements.CategoryPageEdit_3")},{id:"commerce_editor_add_product_by_category",text:_W.utl("javascript.commerce.editor.view.elements.CategoryPageEdit_4")}]}))}h.initializeEvents(),h.initializeCategories(),setTimeout(function(){t.clearHeights(),t.setHeights()},500),setTimeout(function(){t.clearHeights(),t.setHeights()},1250)},h.initializeCategories=function(){var t=Weebly.Commerce.Site.Category.View.ProductList,i=e("#wsite-com-area-category"),n=i.data("id"),o=new s,l=a.findOrCreate();o.fetch().then(function(){return l.fetch()}).done(function(){var s=i.find(".wsite-com-category-subcategory-group"),a=o.findWhere({site_category_id:n+""});d(s,{update:function(){var t=s.find("[data-id]").map(function(){
var t=e(this).attr("data-id"),i=l.find(t);return i}).toArray(),i=l.find(n);i.children=t,l.once("sync",function(){r.execute("editor:commerce:categoryHierarchy:force")}),l.save()}});var c=i.find(".wsite-com-category-product-featured-group");d(c,{items:".wsite-com-category-product-featured, .wsite-com-category-product",update:function(){var i=c.find("[data-id]").map(function(){return e(this).attr("data-id")}).toArray(),n=t.offset||0,o=a.get("preferred_order_product_ids");o.splice.apply(o,[n,i.length].concat(i)),a.set("preferred_order_product_ids",o),a.once("sync",function(){r.execute("editor:commerce:categories:force")}),a.save()}});var u=i.find(".wsite-com-category-product-group");d(u,{items:".wsite-com-category-product",update:function(){var t=u.find("[data-id]").map(function(){return e(this).attr("data-id")}).toArray(),i=Weebly.Commerce.Site.Category.View.ProductList.offset||0,n=a.get("preferred_order_product_ids");n.splice.apply(n,[i,t.length].concat(t)),a.set("preferred_order_product_ids",n),a.once("sync",function(){r.execute("editor:commerce:categories:force")}),a.save()}});var h=e("body").hasClass("wsite-theme-light")?"wsite-theme-light":"wsite-theme-dark",p=e("#wsite-com-empty-category");p.addClass(h),e.merge(p.find(".com-empty-action"),e("#commerce_editor_add_product_by_category")).on("click",function(){r.execute("store:product:addOrList",a.get("site_category_id"))})})},h.initializeEvents=function(){var t=e("#wsite-com-area-category"),i=Weebly.Commerce.Site.Category.View.ProductList;t.on({mouseenter:this.showCategoryEditToolbar,mouseleave:this.hideCategoryEditToolbar}),e("#commerce_editor_category_editinstoretab").on("click",this.editCategoryInStore),e("#wsite-com-category-product-group-pagelist").on("click","a",function(n){var s=window.userID,a=window.currentSite,l=t.data("id"),c=n.target.getAttribute("data-page"),d=e("#wsite-com-category-product-group-pagelimit").val();n.preventDefault(),n.stopPropagation(),r.execute("loading:start","CategoryPageEdit::pageListClick"),Weebly.Commerce.RPC.Category.generateProductList(s,a,l,c,d).always(function(){r.execute("loading:stop","CategoryPageEdit::pageListClick")}).done(function(t){e("#wsite-com-category-product-group").replaceWith(t.content),e("#wsite-com-category-product-group-pagelist").html(t.pagelist),o.execute("element:setHandlers"),i.total=t.total,i.offset=c*d,i.setHeights(),e(window).scrollTop(0),h.initializeCategories()})})},h.editCategoryInStore=function(t){var i=e("#wsite-com-area-category").attr("data-id");r.execute("store:category:edit",i)},h.showCategoryEditToolbar=function(t){if(0==e("#commerce_editor_category_saveheader").length){var i=e("#wsite-com-area-category").attr("data-id"),n=e("#"+currentSite+"c"+i).children().length;e("#commerce_editor_category_editheader > span").text(0==n?_W.utl("javascript.commerce.editor.view.elements.CategoryPageEdit_5"):_W.utl("javascript.commerce.editor.view.elements.CategoryPageEdit_6")),e("#commerce_editor_category_editchoices").show()}},h.hideCategoryEditToolbar=function(t){e("#commerce_editor_category_editchoices").hide()},h}),_wAMD.define("commerce/site/view/renderers/GenericRenderer",["jquery"],function(e){function t(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}var i=t(Object,{initialize:function(t){this.el=t.el,this.$el=e(this.el),this.onChange="function"==typeof t.onChange?t.onChange:function(){},this.initializeEvents(),this.render()},initializeEvents:function(){},render:function(){}});return i}),_wAMD.define("commerce/site/view/renderers/DropdownRenderer",["jquery","commerce/site/view/renderers/GenericRenderer","commerce/util/product-utils"],function(e,t,i){function n(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}var o=n(t,{initializeEvents:function(){var e=this;this.select=this.$el.find("select"),this.select.on("change",function(t){e.onChange.call(this,e)})},render:function(){},update:function(e){this.select.val(),this.select;this.select.children("option").each(function(t,n){if(""!==n.value){var o=i.filterOptionText(n.value);n.innerText=o+(e[n.value]?"":_W.stl("javascript.commerce.site.view.renderers.DropdownRenderer_1"))}})}});return o}),_wAMD.define("commerce/site/view/renderers/ColorRenderer",["jquery","mustache","commerce/site/view/renderers/GenericRenderer"],function(e,t,i){function n(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}var o=t.compile(['<div class="wsite-com-product-option-color-container {{^available}}wsite-com-product-option-color-unavailable{{/available}}">','<span class="wsite-com-product-option-color-select"></span>','<span class="wsite-com-product-option-color-swatch" style="background-color:{{color}}" title="{{name}}" data-value="{{value}}" tabindex="0"></span>',"</div>"].join("")),r=n(i,{initializeEvents:function(){var t=this;this.select=this.$el.find("select"),this.container=e(document.createElement("div")).addClass("wsite-com-product-option-swatches"),this.select.after(this.container),this.$el.on("click",".wsite-com-product-option-color-swatch",function(){t.setValue(this.getAttribute("data-value"))}),this.$el.on("keypress",".wsite-com-product-option-color-swatch",function(e){-1!==_.indexOf([32,13],e.which)&&(e.preventDefault(),e.stopPropagation(),t.setValue(e.target.getAttribute("data-value")))})},setValue:function(e){var t={};t[this.select.attr("name")]=e,this.select.val(e),this.onChange(t),this.highlight(e)},render:function(){var t,i,n,r,s=this;this.select.addClass("w-input-offscreen").attr("tabindex","-1"),this.select.children().each(function(a,l){return""===l.value?!0:(t=l.getAttribute("data-color-hex"),i=l.getAttribute("data-color-name"),n="1"===l.getAttribute("data-available"),r=e(o({available:n,color:t,name:n?i:i+"&nbsp;"+_W.stl("javascript.commerce.site.view.renderers.ColorRenderer_1"),value:l.value})),void s.container.append(r))}),this.highlight(this.select.val())},highlight:function(e){this.container.find(".wsite-selected").removeClass("wsite-selected"),e&&this.container.find(".wsite-com-product-option-color-swatch").filter('[data-value="'+e+'"]').addClass("wsite-selected")},update:function(t){var i,n;this.select.val();this.container.children(".wsite-com-product-option-color-container").each(function(o,r){i=e(r),n=i.find("[data-value]").attr("data-value"),""!==n&&i.toggleClass("wsite-com-product-option-color-unavailable",!t[n])})}});return r}),_wAMD.define("commerce/site/view/renderers/RadioRenderer",["jquery","commerce/site/view/renderers/GenericRenderer"],function(e,t){function i(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}var n=i(t,{initializeEvents:function(){var e,t=this;this.radios=this.$el.find("input[type=radio]"),this.radios.on("change",function(i){e={},e[this.name]=this.value,t.onChange.call(t,e)})},render:function(){},update:function(t){this.radios.val(),this.radios;this.radios.each(function(i,n){if(""!==n.value){var o=e(n),r=o.closest("label");r=0===r.length?o.siblings("label"):r,r.toggleClass("wsite-com-product-option-label-unavailable",!t[n.value]).find(".wsite-com-product-option-radio-availability").text(t[n.value]?"":_W.stl("javascript.commerce.site.view.renderers.RadioRenderer_1"))}})}});return n}),_wAMD.define("commerce/site/view/renderers/TextRenderer",["jquery","commerce/site/view/renderers/GenericRenderer","commerce/util/product-utils"],function(e,t,i){function n(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}var o=n(t,{initializeEvents:function(){var e=this;e.input=e.$el.find(".text-option-input"),e.input.val(""),e.errorMessageDiv=e.$el.find(".product-option-error-message"),e.input.on("keyup change blur",function(t){e.onChange.call(this,e),e.validate||(e.validate=e.validateTextOption)})},update:function(e){var t=this.input.val();t=t.replace(/\r?\n/g,"\r\n"),this.validate&&this.errorMessageDiv.text(this.validate(e[t].options,t))},validateTextOption:function(e,t){if(void 0===t||null===t);else{if(e.required&&0===t.length)return"Text input is required";if(e.max_length&&t.length>e.max_length)return"Maximum number of characters is "+e.max_length}return""}});return o}),_wAMD.define("commerce/site/view/product/ProductElement",["jquery"],function(e){var t={initialize:function(t){e(".wsite-product, .product").each(function(i,n){var o=e(n),r=o.find("[data-add-to-cart]"),s=o.find(".product-text-option");r.length&&Weebly.Commerce.RPC.Product.isInStock&&(Weebly.Commerce.RPC.Product.isInStock(r.data("site-product-id"),r.data("site-product-sku-id")).done(function(e){e||r.addClass("wsite-soldout-product-button")}),r.on({click:function(e){t(e,s)},keypress:function(e){(32===e.which||13===e.which)&&t(e)}}))})}};return t}),_wAMD.define("commerce/site/view/checkout/OrderItem/PaypalItem",["jquery","backbone","mustache","commerce/util/product-utils"],function(e,t,i,n){var o=t.View.extend({tagName:"div",initialize:function(e){this.options=e,this.render()},render:function(){var e='<input type="hidden" name="item_name_{{ itemNumber }}" value="{{ name }}"><input type="hidden" name="amount_{{ itemNumber }}" value="{{ price }}"><input type="hidden" name="quantity_{{ itemNumber }}" value="{{ quantity }}">',t=this.model.get("name");t||(t=this.model.get("short_description")?this.model.get("short_description").substring(0,60):_W.stl("javascript.commerce.site.view.checkout.OrderItem.PaypalItem_1"));var n={quantity:this.model.get("quantity"),name:t,price:this.model.get("discounted_price"),itemNumber:this.options.itemNumber+1};return e=i.render(e,n),e+=this.renderOptions(),this.$el.html(e),this},renderOptions:function(){var e=this,t="",o='<input type="hidden" name="on{{ index }}_{{ itemNumber }}" value="{{ name }}"><input type="hidden" name="os{{ index }}_{{ itemNumber }}" value="{{ value }}">';if(!_.isEmpty(this.model.get("options"))){var r=0;_.each(this.model.get("options"),function(s,a){context={itemNumber:e.options.itemNumber+1,value:n.filterOptionText(s),name:a,index:r++},t+=i.render(o,context)})}return t}});return o}),_wAMD.define("commerce/site/util/Tracking",["w-global","jquery","util/general-utils","underscore"],function(e,t,i,n){e.Analytics=e.Analytics||{trackers:{}};var o,r=window.ga,s=window.gaTrackingId,a=window[e.Analytics.trackers.wGA],l=window[e.Analytics.trackers.wSP],c=window.Keen,d=window.mixpanel&&window.mixpanel.wsite,u={getGA:function(){return"undefined"!=typeof s&&"undefined"!=typeof r?r:function(){}},getWeeblyGA:function(){return"undefined"!=typeof a?function(){a.push(Array.prototype.slice.call(arguments))}:function(){}},getSP:function(){return"undefined"!=typeof l?function(){l.apply(this,arguments)}:function(){}},getKeen:function(){return"undefined"!=typeof c?function(){c.addEvent.apply(c,arguments)}:function(){}},getMixpanel:function(){return"undefined"!=typeof d?function(){d.track.apply(d,arguments)}:function(){}},getIdPrefix:function(){return o?o:(o="",e.Analytics.user_id&&(o=e.Analytics.user_id),e.Analytics.site_id&&(o+=":"+e.Analytics.site_id),o)},fireTrackingCode:function(e,n){var o=t("#tracking-pixel-"+e);if(o.length){var r=t('<iframe src="about:blank" style="width: 0; height: 0; border: none; overflow: hidden;"/>').appendTo("body"),s=i.htmlDecode(o.html());n&&(s=s.replace(/{txid}/g,n.get("site_order_id")),s=s.replace(/{tax}/g,n.get("order_tax_total")),s=s.replace(/{shipping}/g,n.get("order_shipping_subtotal")),s=s.replace(/{subtotal}/g,n.get("order_subtotal")),s=s.replace(/{total}/g,n.get("order_total")));var a="<!DOCTYPE html><head></head><body>"+s+"</body></html>";setTimeout(function(){var e=r[0].contentDocument;e.open().write(a),e.close()},500)}},trackPageView:function(e,t){var i=this.getGA(),n=this.getWeeblyGA(),o=this.getSP(),r=this.getKeen(),s=this.getMixpanel();i("send","pageview",{page:e,title:t}),n("_trackPageview",e,t),o("trackPageView",t),r("wsite-views",{title:t}),s("wsite-views",{title:t})},trackTransaction:function(e){var t=this.getGA(),i=this.getSP(),n=this.getKeen(),o=this.getMixpanel(),r={id:e.get("site_order_id"),revenue:e.get("order_total"),shipping:e.get("order_shipping_total"),tax:e.get("order_tax_total")};t("require","ecommerce","ecommerce.js"),t("ecommerce:addTransaction",r),i("addTrans",r.id,null,r.revenue,r.tax,r.shipping),n("wsite-order",{order:r}),o("wsite-order",{order:r});var s=e.get("items");s.each(function(e){var r={id:e.get("site_order_id"),name:e.get("name"),sku:e.get("sku"),quantity:e.get("quantity"),price:e.get("total_price")/e.get("quantity")};t("ecommerce:addItem",r),i("addItem",e.get("site_order_id"),e.get("site_product_id")+"-"+e.get("site_product_sku_id"),e.get("name"),e.get("sku"),e.get("total_price")/e.get("quantity"),e.get("quantity")),n("wsite-order-items",{item:r}),o("wsite-order-items",{item:r})}),t("ecommerce:send"),i("trackTrans")},viewProductDetail:function(e){e.list="product_detail",this.addEnhancedImpressionContext(e),this.addEnhancedProductContext(e),this.trackEcommerceAction("detail",{list:"product_detail"})},trackAddToCart:function(e,t,i){this.trackCartModification("add",e,t,i)},trackRemoveFromCart:function(e,t,i){this.trackCartModification("remove",e,t,i)},trackCartModification:function(e,t,i,n){t&&(n.list=t,i.list=t),this.addEnhancedProductContext(i),this.trackEcommerceAction(e,n)},trackCheckoutProgress:function(e,t,i){this.addProductContextsForOrder(i),this.trackEcommerceAction("checkout",{site_order_id:i.get("site_order_id"),revenue:i.get("order_total"),tax:i.get("order_tax_total"),shipping:i.get("order_shipping_total"),step:e,list:t})},trackCheckoutOption:function(e,t,i,n){this.trackEcommerceAction("checkout_option",{site_order_id:n.get("site_order_id"),revenue:n.get("order_total"),tax:n.get("order_tax_total"),step:e,option:i,list:t})},addProductContextsForOrder:function(e){var t=this;e.get("items").each(function(e){t.addEnhancedProductContext({site_product_id:e.get("site_product_id"),site_product_sku_id:e.get("site_product_sku_id"),name:e.get("name"),optionshash:e.get("options"),price:e.get("current_price"),quantity:e.get("quantity")})})},addEnhancedImpressionContext:function(e){this.getSP()},trackEcommerceAction:function(e,t){var i=this.getSP(),o=["click","detail","add","remove","checkout","checkout_option","purchase","refund","promo_click","view"];n.contains(o,e)||(e="view"),t&&(t.site_order_id&&(t.id=this.getIdPrefix()+":"+t.site_order_id),i("addEnhancedEcommerceActionContext",t.id||"","",t.revenue||"",t.tax||"",t.shipping||"",t.coupon||"",t.list||"",t.step||"")),i("trackEnhancedEcommerceAction",e)},addEnhancedProductContext:function(e){var t=this.getSP();e.optionshash&&(e.variant=n.map(e.optionshash,function(e){return e}).join("/")),e.site_product_id&&(e.id=this.getIdPrefix()+":"+e.site_product_id),e.site_product_sku_id&&(e.id+=":"+e.site_product_sku_id),t("addEnhancedEcommerceProductContext",e.id||"",e.name||"",e.list||"",e.brand||"",e.category||"",e.variant||"",e.price||"",e.quantity||"",e.coupon||"",e.position||"")}};return u}),_wAMD.define("commerce/site/view/BaseProductPageView",["jquery","underscore","backbone","commerce/site/view/renderers/DropdownRenderer","commerce/site/view/renderers/ColorRenderer","commerce/site/view/renderers/RadioRenderer","commerce/site/view/renderers/TextRenderer","commerce/site/view/product/ProductElement","commerce/site/view/checkout/OrderItem/PaypalItem","commerce/site/util/Tracking","vendor/bootstrap/popover"],function(e,t,i,n,o,r,s,a,l,c){function d(t){return e("<div>",{id:"wsite-com-issue-overlay",append:function(){return[e("<div>",{"class":"close-overlay"}),e("<p>",{"class":"warning-message",html:t})]},appendTo:"body",click:function(){e(this).remove()}})}function u(e,t,i){return $popover=e.popover({content:t?t:_W.stl("javascript.commerce.site.view.ProductPageView_5"),trigger:"manual",placement:"top",container:"body"}).popover("show"),i&&window.setTimeout(function(){$popover.popover("hide")},i),$popover}var h={el:null,$el:null,selectors:{variationData:null,productElementContainer:null,productPageContainer:null,siteProductIdElement:null,productTitle:null},options:{salePriceClass:null,nonSalePriceClass:null,soldOutPriceClass:null,priceRangeClass:null,unavailablePriceClass:null},ui:{},variationData:[],initialize:function(){this.initializeUI(),a.initialize(this.buy.bind(this)),this.$el.length&&(this.initializeVariations(),this.variationData.length&&this.update(),c.viewProductDetail({site_product_id:e(this.selectors.siteProductIdElement).attr("data-id"),name:e(this.selectors.productTitle).eq(0).text().trim()}))},initializeUI:function(){this.$el=e(this.el),this.$el.length&&(this.el=this.$el[0],t.each(this.ui,function(e,t){this.ui[t]=this.$el.find(e)},this))},initializeVariations:function(){var t=this.$el.find(this.selectors.variationData)[0];this.variationData=t?JSON.parse(t.value):[];var i,a=this;this.ui["option-groups"].each(function(t,l){switch(l.getAttribute("data-type")){case"color":i=new o;break;case"radio":i=new r;break;case"text":i=new s;break;case"dropdown":default:i=new n}i.initialize({el:l,onChange:function(e){a.update.apply(a,arguments)}}),e(l).data("renderer",i)})},updateImage:function(){},update:function(e){e&&(this.ui["add-to-cart"]&&this.ui["add-to-cart"].popover("destroy"),e.$el?e.$el.popover("destroy"):t.each(e,function(e,t){this.$el.find('[data-option-name="'+t+'"]').popover("destroy")},this));var i=this.getValues(),n=this.getCurrentRecord(i),o=t.pluck(this.variationData,"options");if(this.updateAvailability(this.ui["option-groups"],o,i),n)return this.ui["price-area"].removeClass(),this.options.salePriceClass&&this.ui["price-area"].toggleClass(this.options.salePriceClass,!t.isNull(n.sale_price)),this.options.nonSalePriceClass&&this.ui["price-area"].toggleClass(this.options.nonSalePriceClass,t.isNull(n.sale_price)),this.ui["price-amount"].text(n.price.toFixed(2)),this.ui["price-sale-amount"].text(t.isNull(n.sale_price)?"":n.sale_price.toFixed(2)),0===n.inventory&&this.ui["price-area"].addClass(this.options.soldOutPriceClass),this.ui["add-to-cart"].toggleClass("wsite-com-product-disabled",0===n.inventory).attr("tabindex",0===n.inventory?-1:0),this.updateImage(n),n;var r=this.getAvailableOptions(i,this.variationData);if(0===r.length)this.ui["price-area"].removeClass().addClass(this.options.unavailablePriceClass),this.ui["inventory-message"]&&this.ui["inventory-message"].text(_W.stl("javascript.commerce.site.view.ProductPageView_4")),this.ui["price-amount"].empty(),this.ui["price-sale-amount"].empty();else{var s=t.find(r,function(e){return!t.isEmpty(e.image_order)});void 0!==s&&this.updateImage({image_order:s.image_order}),this.ui["price-area"].removeClass().addClass(this.options.priceRangeClass)}return null},buy:function(i,n){var o=e(i.currentTarget),r=this;i.stopPropagation(),i.preventDefault();var s=e.Deferred().reject().promise();if(window.inEditor&&window.inEditor())return s;var a=o.closest(this.selectors.productElementContainer),l=!0;if(a.length||(l=!1,a=o.closest(this.selectors.productPageContainer)),a.find(".wsite-com-product-option").popover("destroy"),o.popover("destroy"),o.hasClass("wsite-soldout-product-button"))return u(o),s;if(this.ui.options&&!l){var h=this.getAllValues(),p=this.getUnmatchedValues(h);p.forEach(function(e){a.find('[data-option-name="'+e+'"]').popover({content:_W.stl("javascript.commerce.site.view.ProductPageView_6",e),trigger:"manual",placement:r.placeOptionPopover,container:"body"}).popover("show")})}var f;if(l?(f={price:parseFloat(o.data("price")),sale_price:o.data("sale-price")?parseFloat(o.data("sale-price")):null,site_product_sku_id:o.data("site-product-sku-id"),site_product_id:o.data("site-product-id")},0===o.data("sale-price")&&(f.sale_price=0)):f=1===this.variationData.length?this.variationData[0]:this.getCurrentRecord(this.getValues(),this.variationData),!f)return s;if(0===f.inventory)return u(o),s;if(o.hasClass("wsite-com-product-disabled"))return s;var m=null!==f.sale_price&&void 0!==f.sale_price?f.sale_price:f.price;if(null===m||void 0===m)return s;f.site_product_id=f.site_product_id||e(this.selectors.siteProductIdElement).attr("data-id");var g;if(g=l?1:this.ui.quantity.val(),0>=g)return s;var v=!1;if(f.custom_options=f.custom_options||{},n&&n.length&&e.each(n,function(t,i){var n=r.validateTextInput(i);e(i).siblings(".text-option-error-message").text(n),n.length&&(v=!0),f.custom_options[i.getAttribute("name")]=i.value}),v)return s;var b=o.find(".wsite-button-inner"),y=b.html();return Weebly.Commerce.RPC.Checkout.addItem(f.site_product_id,f.site_product_sku_id,g,f.custom_options).then(function(i){if(!i.success)return i.data&&i.data.has_payment===!1?d(i.message):u(o,i.message,3e3),b.html(y),o.removeClass("wsite-disabled"),s;var n={};return t.each(f.options,function(e,t){n[t]=e.choices}),Weebly.Commerce.RPC.Checkout.getMiniCart().then(function(t){return c.trackAddToCart("product_detail",{site_product_id:f.site_product_id,site_product_sku_id:f.site_product_sku_id,name:e(r.selectors.productTitle).eq(0).text().trim(),optionshash:n,quantity:g,price:m},{site_order_id:t.data.order.site_order_id}),e.Deferred().resolve(i,!1,t).promise()})}).fail(function(t,i){var n=e.parseJSON(i.responseText);return-1!=n.error.code&&(d(t),b.html(y),o.removeClass("wsite-disabled")),s})},updateAvailability:function(i,n,o){var r,s,a,l=this;i.each(function(i,c){r={},a=c.getAttribute("data-option-name"),s=t.omit(o,a),t.each(n,function(e){l.objectContains(e,s)&&t.each(e,function(e,t){if(t===a){var i="text"===e.renderer?o[a]||"":e.choices;r[i]={available:!0,options:e}}})}),e(c).data("renderer").update(r)})},getValues:function(){var e;e=this.ui.options.is("form")?this.ui.options:this.ui.options.find("[name]");var i=e.serializeArray(),n={};return t.each(i,function(e){n[e.name]=e.value}),n},getAllValues:function(){var i={};this.ui.options.find("[name]").each(function(){i[this.name]||(i[this.name]=[]),i[this.name].push(this)});var n={};return t.each(i,function(t,i){n[i]=null;var o=e(t).serializeArray();o.length&&(n[i]=o[0].value)}),n},getCurrentRecord:function(e,i){var n;return this.variationData=i||this.variationData,t.each(this.variationData,function(i){var o={};return i.custom_options={},t.each(i.options,function(t,n){o[n]=t.choices,"text"!==t.renderer||s.prototype.validateTextOption(t,e[n]).length||(o[n]=i.custom_options[n]=e[n])}),t.isEqual(o,e)?(n=i,!1):void 0}),n},getUnmatchedValues:function(e){var i=Object.keys(e);return t.each(this.variationData,function(n){t.each(n.options,function(t,n){var o=i.indexOf(n);if(-1!==o){var r=t.choices;"text"!==t.renderer||s.prototype.validateTextOption(t,e[n]).length||(r=e[n]),e[n]===r&&i.splice(o,1)}})}),i},getAvailableOptions:function(e,i){this.variationData=i||this.variationData;var n=t.filter(this.variationData,function(i){return t.every(e,function(e,t){return"text"==i.options[t].renderer||""==e||e==i.options[t].choices})});return n},validateTextInput:function(e){var t=!!e.getAttribute("data-required"),i=e.getAttribute("data-max-length");if(void 0===e.value);else{if(t&&0===e.value.length)return _W.stl("javascript.commerce.site.view.BaseProductPageView_7");if(i&&e.value.length>i)return _W.stl("javascript.commerce.site.view.BaseProductPageView_8",i)}return""},objectContains:function(e,i){var n=!0;return t.each(e,function(e,t){i[t]&&"text"!==e.renderer&&i[t]!==e.choices&&(n=!1)}),n}};return h}),_wAMD.define("commerce/site/view/product/Images",["jquery"],function(e){var t={initialize:function(t){var i=t.find(".cloud-zoom, .cloud-zoom-gallery");i.CloudZoom&&i.CloudZoom(),e(document).off("keydown",this.navigateProductImages).on("keydown",this.navigateProductImages)},navigateProductImages:function(t){var i=["input","textarea"];if(0!==e.inArray(t.target.nodeName.toLowerCase(),i)&&e("#wsite-com-product-images-strip").children("a.wsite-com-product-images-secondary").length&&(!Weebly.Commerce.Editor||e("#wsite-com-product-area").length&&"true"!=t.target.contentEditable)){var n=e("#wsite-com-product-images-strip").children("a.wsite-com-product-images-secondary"),o=e("#zoom1")[0],r=n.filter(function(){return this.href==o.href});37!=t.keyCode||r.prev().click().length?39!=t.keyCode||r.next().click().length||n.first().click():n.last().click()}}};return t}),_wAMD.define("commerce/site/view/product/SocialIcons",["w-global","jquery"],function(e,t){var i={networks:{twitter:{height:440,width:585},pinterest:{height:340,width:765},facebook:{height:315,width:485},plus:{height:600,width:600}},initialize:function(t){if(!window.inEditor||!inEditor()){var n;t.find("#wsite-com-product-social-sharing").on("click","a",function(t){n=i.networks[t.currentTarget.getAttribute("data-network")],n=n?n:{height:500,width:500},window.open(t.currentTarget.href,e.utl("Share"),"height="+n.height+", width="+n.width+" scrollbars=no, resizeable=no"),t.preventDefault()})}}};return i}),_wAMD.define("commerce/site/model/OrderItem",["jquery","backbone"],function(e,t){var i=t.RelationalModel.extend(_.extend({},Weebly.Commerce.BackboneModelData.OrderItem));return i}),_wAMD.define("commerce/site/collection/OrderItems",["jquery","backbone","commerce/site/model/OrderItem"],function(e,t,i){var n=t.Collection.extend({model:i,sync:function(e,t,i){"read"===e&&Weebly.Commerce.RPC.Checkout.getCart().done(function(e){t.reset(e.data.order.items)})},subtotal:function(){for(var e=this.models,t=0,i=0;i<e.length;i++)t+=e[i].get("total_price");return t}});return n}),_wAMD.define("commerce/util/giftcard/GiftCardProductOptions",[],function(){return{AMOUNT:0,SENDER_NAME:1,RECIPIENT_NAME:2,RECIPIENT_EMAIL:3,GIFT_MESSAGE:4}}),_wAMD.define("commerce/site/view/mini-cart/CartItem",["w-global","jquery","underscore","backbone","mustache","util/ui/ImageAspectRatio","commerce/site/util/Tracking","commerce/util/product-utils","commerce/util/giftcard/GiftCardProductOptions"],function(e,t,i,n,o,r,s,a,l){var c=n.View.extend({tagName:"li",className:"wsite-product-item",events:{"click .wsite-remove-button":"handleDeleteButton"},initialize:function(e){this.options=e,this.render(),this.model.on("change",this.handleModelChange,this),this.model.on("remove",this.handleModelRemove,this)},render:function(){var t=this.options.template,n=this.model.get("discounted_price");n=Number(n).toFixed(2);var s=this.model.get("name"),c=this.model.get("product_type"),d=this.model.get("options"),u=this.model.get("currency_prefix"),h=this.model.get("currency_suffix"),p=i.map(d,function(e,t){var i=a.filterOptionText(e);return{name:t,value:i}});"giftcard"===c&&(p=[{name:e.stl("ecommerce.checkout.gift_card.for_email"),value:p[l.RECIPIENT_EMAIL].value}]);var f={thumbnail_html:r("wsite-list",this.model.get("image_info"),80,1),url:this.model.get("product_url"),title_html:s,options:p,price_number:n,quantity:this.model.get("quantity"),currency_prefix_html:u,currency_suffix_html:h};return this.template=o.render(t,f),this.$el.html(this.template),this},handleModelRemove:function(){this.$el.fadeOut(200,function(){t(this).remove()})},handleModelChange:function(){var e=this.model.changedAttributes();e&&0===e.quantity&&this.model.destroy()},handleDeleteButton:function(e){this.model.save({quantity:0,total_price:0});var i=t(e.currentTarget);this.updateQuantity(i,0)},updateQuantity:function(i,n){var o=t.isNumeric(n)?n:parseInt(i.val()),r=this.model.get("quantity"),a=this;return t("#wsite-com-checkout-cart .wsite-checkout-server-error").remove(),""===o||isNaN(o)?void i.val(this.model.get("quantity")):void e.Commerce.RPC.OrderItem.updateQuantity({site_order_id:this.model.get("site_order_id"),site_order_item_id:this.model.get("site_order_item_id"),quantity:o}).done(function(e){var t=e.data.quantity;if(e.success){a.model.save({quantity:t,total_price:a.model.get("discounted_price")*t});var n=t-r,o={site_product_id:a.model.get("site_product_id"),site_product_sku_id:a.model.get("site_product_sku_id"),name:a.model.get("name"),optionshash:a.model.get("options"),price:a.model.get("current_price")},l={site_order_id:a.model.get("site_order_id")};0>=n?(o.quantity=-1*n,s.trackRemoveFromCart("mini_cart",o,l)):(o.quantity=n,s.trackAddToCart("mini_cart",o,l))}else i.val(t).focus(),a.trigger("error",e.message)})}});return c}),_wAMD.define("commerce/site/view/mini-cart/CartItemEmpty",["backbone","mustache"],function(e,t){var i=e.View.extend({tagName:"li",initialize:function(e){var t=this;t.options=e,t.render()},render:function(){var e=this,i=e.options.template,n={};return e.template=t.render(i,n),e.$el.html(e.template),e}});return i}),_wAMD.define("commerce/site/view/mini-cart/CartList",["backbone","commerce/site/view/mini-cart/CartItem","commerce/site/view/mini-cart/CartItemEmpty"],function(e,t,i){var n=e.View.extend({tagName:"ul",className:"wsite-product-list",initialize:function(e){this.options=e,this.render(),this.collection.on("change",this.handleCollectionChange,this)},render:function(){var e,n=this,o=n.options;return this.collection.length?this.collection.each(function(i){e=new t({template:o.template,model:i,id:"item-"+i.get("site_product_id")+"-"+i.get("site_product_sku_id")}),n.$el.append(e.el)}):(e=new i({template:o.emptyTemplate}),n.$el.html(e.el)),n},handleCollectionChange:function(){0===this.collection.length&&this.render()}});return n}),_wAMD.define("commerce/site/view/mini-cart/MiniCart",["jquery","backbone","underscore","mustache","commerce/site/collection/OrderItems","commerce/site/view/mini-cart/CartList","legacy/flyout_menus_jq"],function(e,t,i,n,o,r){var s=t.View.extend({id:"wsite-mini-cart",className:"wsite-cart-contents",initialize:function(){e("body").append(this.$el),Weebly.Commerce.RPC.Checkout?Weebly.Commerce.RPC.Checkout.getMiniCart().done(this.populate.bind(this)):Weebly.Commerce.RPC.Order&&Weebly.Commerce.RPC.Order.getMiniCart().done(this.populate.bind(this)),this.$el.hide(),this.bindCartNav();var t=this;e(window).on("resize",function(){t.positionCart()})},populate:function(e){var t;if(e.success){this.cart_template=this.cart_template||e.data.cart_template,this.item_template=this.item_template||e.data.cart_item_template,this.currency_prefix=this.currency_prefix||e.data.currency_prefix,this.currency_suffix=this.currency_suffix||e.data.currency_suffix,e.data.checkout_url&&(this.checkout_url=e.data.checkout_url),this.item_empty_template=this.item_empty_template||e.data.cart_item_empty_template,this.order=e.data.order,this.OrderItems&&(t=i.reduce(e.data.order.items,function(e,t){return e+t.quantity},0),this.OrderItems.off(),_W.events.trigger("minicart:add",t),_W.events.trigger("minicart:change",t)),this.OrderItems=new o,this.OrderItems.on("reset",this.render,this),this.OrderItems.on("change",function(){this.render(),this.showCart(),t=window.getCartCount(),_W.events.trigger("minicart:remove",t),_W.events.trigger("minicart:change",t)},this);var n=this;window.getCartCount=function(){for(var e=0,t=0;t<n.OrderItems.length;t++)e+=n.OrderItems.at(t).get("quantity");return e},void 0!==window.refreshPublishedFlyoutMenus&&window.refreshPublishedFlyoutMenus();var r=i.map(e.data.order.items,function(e){return e.currency_prefix=this.currency_prefix,e.currency_suffix=this.currency_suffix,e},this);this.OrderItems.reset(r),this.positionCart()}},hideCart:function(){var t=e("#wsite-nav-cart-a").parents(".wsite-nav-cart");this.$el.fadeOut(200),t.attr("id",""),this.cartPinned=!1},showCart:function(t){var i=this;this.cartPinned=this.cartPinned||t;var n=e("#wsite-nav-cart-a").parents(".wsite-nav-cart");if(this.$el.fadeIn(200),this.setEllipsis(),n.attr("id","active"),i.positionCart(),this.cartPinned){var o=function(t){var n=e(t.target);0!==n.parents("#wsite-mini-cart").length||n.is(".wsite-remove-button")?e(document).one("click",o):i.hideCart()};e(document).one("click",o)}},scrollToCart:function(){var t=e(".wsite-nav-cart");e(window).scrollTop()>t.offset().top?e("html, body").animate({scrollTop:t.offset().top-25},"slow"):e(window).scrollTop()+e(window).height()<t.offset().top+t.height()&&e("html, body").animate({
scrollTop:t.offset().top+this.$el.height()+25},"slow")},positionCart:function(){var t=e("#wsite-nav-cart-a").parents(".wsite-nav-cart");if(t.length){var i=t.offset(),n=this.$el.offsetParent();if("undefined"!=typeof safeCumulativeOffset){var o=safeCumulativeOffset(n);i.left-=o.left,i.top-=o.top,i.top+=n.scrollTop(),i.left+=n.scrollLeft()}if(Weebly.Menus&&Weebly.Menus.inVerticalList(t,!0,"active")){this.$el.addClass("arrow-left");var r=i.top+t.outerHeight()/2-.2*this.$el.outerHeight(),s=i.left+t.outerWidth()+8;r=Math.max(r,0),s=Math.max(s,9)}else this.$el.addClass("arrow-top"),r=i.top+t.outerHeight()+8,t.offset().left+t.outerWidth()/2<.8*this.$el.outerWidth()?(this.$el.addClass("arrow-top-left"),s=i.left+t.outerWidth()/2-.2*this.$el.outerWidth()):(this.$el.removeClass("arrow-top-left"),s=i.left+t.outerWidth()/2-.8*this.$el.outerWidth()),r=Math.max(r,9),s=Math.max(s,0);this.$el.css({position:"absolute",left:s+"px",top:r+"px"})}},setEllipsis:function(){var e=this.$el,t=e.find(".wsite-product-description"),i=e.find(".wsite-product-option");i.hide();var n=t.width();t.width(n),i.show()},bindCartNav:function(){var t=this,i=window.getCartNavElement();if(!i)return void(window.reportCartNavElement=function(e){t.bindCartNav()});e(i).on("click",function(){return t.cartPinned?t.hideCart():t.showCart(!0),!1});var n=function(e){return"mouseleave"!==e.type||t.cartPinned?(window.clearTimeout(t.fadeTimeout),t.showCart()):(window.clearTimeout(t.fadeTimeout),t.fadeTimeout=window.setTimeout(function(){t.hideCart()},200)),!1};t.positionCart(),e(i).on("hover",n),this.$el.on("hover",n)},render:function(){e("#wsite-nav-cart-num").text(window.getCartCount()),this.$el.empty();var t=new r({collection:this.OrderItems,template:this.item_template,emptyTemplate:this.item_empty_template});this.$el.html(t.el);var i=this.checkout_url,o={price_number:Number(this.OrderItems.subtotal()).toFixed(2),checkout_url:i,currency_prefix_html:this.currency_prefix,currency_suffix_html:this.currency_suffix},s=n.render(this.cart_template,o);this.$el.append(s)}}),a={};return e(function(){window.inEditor&&window.inEditor()||window.inPreview||(t.$=e,a.cart=new s)}),a}),_wAMD.define("commerce/site/view/ProductPageView",["jquery","underscore","commerce/site/view/BaseProductPageView","commerce/site/view/product/Images","commerce/site/view/product/SocialIcons","commerce/site/view/mini-cart/MiniCart"],function(e,t,i,n,o,r){var s=function(){};return s.prototype=Object.create(i),s.prototype=t.extend(s.prototype,{el:"#wsite-com-product-gen",selectors:{variationData:"#wsite-com-product-view-variation-data",productElementContainer:".wsite-product, .product",productPageContainer:"#wsite-com-product-info",siteProductIdElement:"#wsite-com-product-gen",productTitle:"#wsite-com-product-title"},options:{salePriceClass:"wsite-com-product-show-price-on-sale",priceRangeClass:"wsite-com-product-show-price-range",unavailablePriceClass:"wsite-com-product-show-price-unavailable",nonSalePriceClass:""},initialize:function(){var e=this;i.initialize.apply(this,arguments);var t=this.$el.length;t&&(n.initialize(this.$el),o.initialize(this.$el),this.$el.find("#wsite-com-product-add-to-cart").on({click:this.buy.bind(this),keypress:function(t){(32===t.which||13===t.which)&&e.buy(t)}}))},ui:{"images-strip":"#wsite-com-product-images-strip",sku:"#wsite-com-product-sku","sku-value":"#wsite-com-product-sku-value",options:"#wsite-com-product-options","option-groups":"#wsite-com-product-options .wsite-com-product-option","price-area":"#wsite-com-product-price-area",price:"#wsite-com-product-price","price-sale":"#wsite-com-product-price-sale","price-unavailable":"#wsite-com-product-price-unavailable","price-amount":"#wsite-com-product-price .wsite-com-product-price-amount","price-sale-amount":"#wsite-com-product-price-sale .wsite-com-product-price-amount","inventory-message":"#wsite-com-product-inventory-message",quantity:"#wsite-com-product-quantity-input","add-to-cart":"#wsite-com-product-add-to-cart"},updateImage:function(e){var t=e.image_order?this.ui["images-strip"].find("#wsite-com-product-images-secondary-"+e.image_order[0]):this.ui["images-strip"].children(":first-child");t.trigger("click")},update:function(){var e=i.update.apply(this,arguments);if(e){var n="";0===e.inventory?n=_W.stl("javascript.commerce.site.view.ProductPageView_1"):e.inventory<=5&&(n=_W.stl("javascript.commerce.site.view.ProductPageView_2",e.inventory)),this.ui["inventory-message"].text(n);var o=this.ui.quantity.val(),r=o>e.inventory||0===e.inventory?e.inventory:parseInt(o)||1;this.ui.quantity.toggleClass("wsite-com-product-disabled",0===e.inventory).attr("max",e.inventory).attr("disabled",0===e.inventory).val(r),void 0===e.inventory&&this.ui.quantity.removeAttr("max"),this.ui.sku.toggleClass("wsite-com-product-sku-none",!e.sku),this.ui["sku-value"].text(e.sku)}else{this.ui.sku.toggleClass("wsite-com-product-sku-none",!0),this.ui["sku-value"].empty(),this.ui["add-to-cart"].toggleClass("wsite-com-product-disabled",!0),this.ui.quantity.toggleClass("wsite-com-product-disabled",!0).attr("max",0).attr("disabled",!0).val(0);var s=t.pluck(this.variationData,"price"),a=t.max(s),l=t.min(s),c=t.pluck(this.variationData,"sale_price");if(t.compact(c).length){var d=a==l&&a>t.max(c);d&&this.ui["price-area"].removeClass().addClass("wsite-com-product-show-price-range-on-sale")}}},placeOptionPopover:function(t,i){return i=e(i),t=e(t),t.appendTo(this.options.container),i.offset().left>=t.width()?"left":"bottom"},buy:function(){i.buy.apply(this,arguments).done(function(e,t,i){e.success&&(Weebly.Commerce.hasCart?(r.cart.populate(e.data.mini_cart),r.cart.showCart(!0),r.cart.scrollToCart()):window.location.href=i.data.checkout_url)})}}),e(document).ready(function(){window.inEditor&&window.inEditor()||window.inPreview||(new s).initialize()}),s});var Swiper=function(e,t){function i(e){return document.querySelectorAll?document.querySelectorAll(e):jQuery(e)}function n(){var e=D-O;return t.freeMode&&(e=D-O),t.slidesPerView>T.slides.length&&(e=0),0>e&&(e=0),e}function o(){function e(e){var i=new Image;i.onload=function(){T.imagesLoaded++,T.imagesLoaded==T.imagesToLoad.length&&(T.reInit(),t.onImagesReady&&t.onImagesReady(T))},i.src=e}if(T.browser.ie10?(T.h.addEventListener(T.wrapper,T.touchEvents.touchStart,p,!1),T.h.addEventListener(document,T.touchEvents.touchMove,f,!1),T.h.addEventListener(document,T.touchEvents.touchEnd,m,!1)):(T.support.touch&&(T.h.addEventListener(T.wrapper,"touchstart",p,!1),T.h.addEventListener(T.wrapper,"touchmove",f,!1),T.h.addEventListener(T.wrapper,"touchend",m,!1)),t.simulateTouch&&(T.h.addEventListener(T.wrapper,"mousedown",p,!1),T.h.addEventListener(document,"mousemove",f,!1),T.h.addEventListener(document,"mouseup",m,!1))),t.autoResize&&T.h.addEventListener(window,"resize",T.resizeFix,!1),r(),T._wheelEvent=!1,t.mousewheelControl){void 0!==document.onmousewheel&&(T._wheelEvent="mousewheel");try{WheelEvent("wheel"),T._wheelEvent="wheel"}catch(n){}T._wheelEvent||(T._wheelEvent="DOMMouseScroll"),T._wheelEvent&&T.h.addEventListener(T.container,T._wheelEvent,l,!1)}if(t.keyboardControl&&T.h.addEventListener(document,"keydown",a,!1),t.updateOnImagesReady){document.querySelectorAll?T.imagesToLoad=T.container.querySelectorAll("img"):window.jQuery&&(T.imagesToLoad=i(T.container).find("img"));for(var o=0;o<T.imagesToLoad.length;o++)e(T.imagesToLoad[o].getAttribute("src"))}}function r(){if(t.preventLinks){var e=[];document.querySelectorAll?e=T.container.querySelectorAll("a"):window.jQuery&&(e=i(T.container).find("a"));for(var n=0;n<e.length;n++)T.h.addEventListener(e[n],"click",u,!1)}if(t.releaseFormElements)for(var o=document.querySelectorAll?T.container.querySelectorAll("input, textarea, select"):i(T.container).find("input, textarea, select"),n=0;n<o.length;n++)T.h.addEventListener(o[n],T.touchEvents.touchStart,h,!0);if(t.onSlideClick)for(var n=0;n<T.slides.length;n++)T.h.addEventListener(T.slides[n],"click",c,!1);if(t.onSlideTouch)for(var n=0;n<T.slides.length;n++)T.h.addEventListener(T.slides[n],T.touchEvents.touchStart,d,!1)}function s(){if(t.onSlideClick)for(var e=0;e<T.slides.length;e++)T.h.removeEventListener(T.slides[e],"click",c,!1);if(t.onSlideTouch)for(var e=0;e<T.slides.length;e++)T.h.removeEventListener(T.slides[e],T.touchEvents.touchStart,d,!1);if(t.releaseFormElements)for(var n=document.querySelectorAll?T.container.querySelectorAll("input, textarea, select"):i(T.container).find("input, textarea, select"),e=0;e<n.length;e++)T.h.removeEventListener(n[e],T.touchEvents.touchStart,h,!0);if(t.preventLinks){var o=[];document.querySelectorAll?o=T.container.querySelectorAll("a"):window.jQuery&&(o=i(T.container).find("a"));for(var e=0;e<o.length;e++)T.h.removeEventListener(o[e],"click",u,!1)}}function a(e){var t=e.keyCode||e.charCode;if(37==t||39==t||38==t||40==t){for(var i=!1,n=T.h.getOffset(T.container),o=T.h.windowScroll().left,r=T.h.windowScroll().top,s=T.h.windowWidth(),a=T.h.windowHeight(),l=[[n.left,n.top],[n.left+T.width,n.top],[n.left,n.top+T.height],[n.left+T.width,n.top+T.height]],c=0;c<l.length;c++){var d=l[c];d[0]>=o&&d[0]<=o+s&&d[1]>=r&&d[1]<=r+a&&(i=!0)}if(!i)return}P?((37==t||39==t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1),39==t&&T.swipeNext(),37==t&&T.swipePrev()):((38==t||40==t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1),40==t&&T.swipeNext(),38==t&&T.swipePrev())}function l(e){var i,o=T._wheelEvent;if(e.detail?i=-e.detail:"mousewheel"==o?i=e.wheelDelta:"DOMMouseScroll"==o?i=-e.detail:"wheel"==o&&(i=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX:-e.deltaY),t.freeMode){var r,s;P?T.getWrapperTranslate("x"):T.getWrapperTranslate("y");P?(r=T.getWrapperTranslate("x")+i,s=T.getWrapperTranslate("y"),r>0&&(r=0),r<-n()&&(r=-n())):(r=T.getWrapperTranslate("x"),s=T.getWrapperTranslate("y")+i,s>0&&(s=0),s<-n()&&(s=-n())),T.setWrapperTransition(0),T.setWrapperTranslate(r,s,0)}else 0>i?T.swipeNext():T.swipePrev();return t.autoplay&&T.stopAutoplay(),e.preventDefault?e.preventDefault():e.returnValue=!1,!1}function c(e){T.allowSlideClick&&(T.clickedSlide=this,T.clickedSlideIndex=T.slides.indexOf(this),t.onSlideClick(T))}function d(e){T.clickedSlide=this,T.clickedSlideIndex=T.slides.indexOf(this),t.onSlideTouch(T)}function u(e){return T.allowLinks?void 0:(e.preventDefault?e.preventDefault():e.returnValue=!1,!1)}function h(e){return e.stopPropagation?e.stopPropagation():e.returnValue=!1,!1}function p(e){if(t.preventLinks&&(T.allowLinks=!0),T.isTouched||t.onlyExternal)return!1;if(t.noSwiping&&e.target&&e.target.className&&e.target.className.indexOf(t.noSwipingClass)>-1)return!1;if(V=!1,T.isTouched=!0,$="touchstart"==e.type,!$||1==e.targetTouches.length){t.loop&&T.fixLoop(),T.callPlugins("onTouchStartBegin"),$||(e.preventDefault?e.preventDefault():e.returnValue=!1);var i=$?e.targetTouches[0].pageX:e.pageX||e.clientX,n=$?e.targetTouches[0].pageY:e.pageY||e.clientY;T.touches.startX=T.touches.currentX=i,T.touches.startY=T.touches.currentY=n,T.touches.start=T.touches.current=P?i:n,T.setWrapperTransition(0),T.positions.start=T.positions.current=P?T.getWrapperTranslate("x"):T.getWrapperTranslate("y"),P?T.setWrapperTranslate(T.positions.start,0,0):T.setWrapperTranslate(0,T.positions.start,0),T.times.start=(new Date).getTime(),k=void 0,t.moveStartThreshold>0&&(F=!1),t.onTouchStart&&t.onTouchStart(T),T.callPlugins("onTouchStartEnd")}}function f(e){if(T.isTouched&&!t.onlyExternal&&(!$||"mousemove"!=e.type)){var i=$?e.targetTouches[0].pageX:e.pageX||e.clientX,o=$?e.targetTouches[0].pageY:e.pageY||e.clientY;if("undefined"==typeof k&&P&&(k=!!(k||Math.abs(o-T.touches.startY)>Math.abs(i-T.touches.startX))),"undefined"!=typeof k||P||(k=!!(k||Math.abs(o-T.touches.startY)<Math.abs(i-T.touches.startX))),k)return void(T.isTouched=!1);if(e.assignedToSwiper)return void(T.isTouched=!1);if(e.assignedToSwiper=!0,T.isMoved=!0,t.preventLinks&&(T.allowLinks=!1),t.onSlideClick&&(T.allowSlideClick=!1),t.autoplay&&T.stopAutoplay(),!$||1==e.touches.length){if(T.callPlugins("onTouchMoveStart"),e.preventDefault?e.preventDefault():e.returnValue=!1,T.touches.current=P?i:o,T.positions.current=(T.touches.current-T.touches.start)*t.touchRatio+T.positions.start,T.positions.current>0&&t.onResistanceBefore&&t.onResistanceBefore(T,T.positions.current),T.positions.current<-n()&&t.onResistanceBefore&&t.onResistanceAfter(T,Math.abs(T.positions.current+n())),t.resistance&&"100%"!=t.resistance){if(T.positions.current>0){var r=1-T.positions.current/O/2;.5>r?T.positions.current=O/2:T.positions.current=T.positions.current*r}if(T.positions.current<-n()){var s=(T.touches.current-T.touches.start)*t.touchRatio+(n()+T.positions.start),r=(O+s)/O,a=T.positions.current-s*(1-r)/2,l=-n()-O/2;l>a||0>=r?T.positions.current=l:T.positions.current=a}}if(t.resistance&&"100%"==t.resistance&&(T.positions.current>0&&(!t.freeMode||t.freeModeFluid)&&(T.positions.current=0),T.positions.current<-n()&&(!t.freeMode||t.freeModeFluid)&&(T.positions.current=-n())),!t.followFinger)return;return t.moveStartThreshold?Math.abs(T.touches.current-T.touches.start)>t.moveStartThreshold||F?(F=!0,P?T.setWrapperTranslate(T.positions.current,0,0):T.setWrapperTranslate(0,T.positions.current,0)):T.positions.current=T.positions.start:P?T.setWrapperTranslate(T.positions.current,0,0):T.setWrapperTranslate(0,T.positions.current,0),(t.freeMode||t.watchActiveIndex)&&T.updateActiveSlide(T.positions.current),t.grabCursor&&(T.container.style.cursor="move",T.container.style.cursor="grabbing",T.container.style.cursor="-moz-grabbin",T.container.style.cursor="-webkit-grabbing"),H||(H=T.touches.current),W||(W=(new Date).getTime()),T.velocity=(T.touches.current-H)/((new Date).getTime()-W)/2,Math.abs(T.touches.current-H)<2&&(T.velocity=0),H=T.touches.current,W=(new Date).getTime(),T.callPlugins("onTouchMoveEnd"),t.onTouchMove&&t.onTouchMove(T),!1}}}function m(e){if(k&&T.swipeReset(),!t.onlyExternal&&T.isTouched){T.isTouched=!1,t.grabCursor&&(T.container.style.cursor="move",T.container.style.cursor="grab",T.container.style.cursor="-moz-grab",T.container.style.cursor="-webkit-grab"),T.positions.current||0===T.positions.current||(T.positions.current=T.positions.start),t.followFinger&&(P?T.setWrapperTranslate(T.positions.current,0,0):T.setWrapperTranslate(0,T.positions.current,0)),T.times.end=(new Date).getTime(),T.touches.diff=T.touches.current-T.touches.start,T.touches.abs=Math.abs(T.touches.diff),T.positions.diff=T.positions.current-T.positions.start,T.positions.abs=Math.abs(T.positions.diff);var i=T.positions.diff,o=T.positions.abs,r=T.times.end-T.times.start;if(5>o&&300>r&&0==T.allowLinks&&(t.freeMode||0==o||T.swipeReset(),t.preventLinks&&(T.allowLinks=!0),t.onSlideClick&&(T.allowSlideClick=!0)),setTimeout(function(){t.preventLinks&&(T.allowLinks=!0),t.onSlideClick&&(T.allowSlideClick=!0)},100),!T.isMoved)return T.isMoved=!1,t.onTouchEnd&&t.onTouchEnd(T),void T.callPlugins("onTouchEnd");T.isMoved=!1;var s=n();if(T.positions.current>0)return T.swipeReset(),t.onTouchEnd&&t.onTouchEnd(T),void T.callPlugins("onTouchEnd");if(T.positions.current<-s)return T.swipeReset(),t.onTouchEnd&&t.onTouchEnd(T),void T.callPlugins("onTouchEnd");if(t.freeMode){if(t.freeModeFluid){var a,l=1e3*t.momentumRatio,c=T.velocity*l,d=T.positions.current+c,u=!1,h=20*Math.abs(T.velocity)*t.momentumBounceRatio;-s>d&&(t.momentumBounce&&T.support.transitions?(-h>d+s&&(d=-s-h),a=-s,u=!0,V=!0):d=-s),d>0&&(t.momentumBounce&&T.support.transitions?(d>h&&(d=h),a=0,u=!0,V=!0):d=0),0!=T.velocity&&(l=Math.abs((d-T.positions.current)/T.velocity)),P?T.setWrapperTranslate(d,0,0):T.setWrapperTranslate(0,d,0),T.setWrapperTransition(l),t.momentumBounce&&u&&T.wrapperTransitionEnd(function(){V&&(t.onMomentumBounce&&t.onMomentumBounce(T),P?T.setWrapperTranslate(a,0,0):T.setWrapperTranslate(0,a,0),T.setWrapperTransition(300))}),T.updateActiveSlide(d)}return(!t.freeModeFluid||r>=300)&&T.updateActiveSlide(T.positions.current),t.onTouchEnd&&t.onTouchEnd(T),void T.callPlugins("onTouchEnd")}I=0>i?"toNext":"toPrev","toNext"==I&&300>=r&&(30>o||!t.shortSwipes?T.swipeReset():T.swipeNext(!0)),"toPrev"==I&&300>=r&&(30>o||!t.shortSwipes?T.swipeReset():T.swipePrev(!0));var p=0;if("auto"==t.slidesPerView){for(var f,m=Math.abs(P?T.getWrapperTranslate("x"):T.getWrapperTranslate("y")),g=0,v=0;v<T.slides.length;v++)if(f=P?T.slides[v].getWidth(!0):T.slides[v].getHeight(!0),g+=f,g>m){p=f;break}p>O&&(p=O)}else p=S*t.slidesPerView;"toNext"==I&&r>300&&(o>=.5*p?T.swipeNext(!0):T.swipeReset()),"toPrev"==I&&r>300&&(o>=.5*p?T.swipePrev(!0):T.swipeReset()),t.onTouchEnd&&t.onTouchEnd(T),T.callPlugins("onTouchEnd")}}function g(e,i,n){function o(){s+=a,c="toNext"==l?s>e:e>s,c?(P?T.setWrapperTranslate(Math.round(s),0):T.setWrapperTranslate(0,Math.round(s)),T._DOMAnimating=!0,window.setTimeout(function(){o()},1e3/60)):(t.onSlideChangeEnd&&t.onSlideChangeEnd(T),P?T.setWrapperTranslate(e,0):T.setWrapperTranslate(0,e),T._DOMAnimating=!1)}if(T.support.transitions||!t.DOMAnimation){P?T.setWrapperTranslate(e,0,0):T.setWrapperTranslate(0,e,0);var r="to"==i&&n.speed>=0?n.speed:t.speed;T.setWrapperTransition(r)}else{var s=P?T.getWrapperTranslate("x"):T.getWrapperTranslate("y"),r="to"==i&&n.speed>=0?n.speed:t.speed,a=Math.ceil((e-s)/r*(1e3/60)),l=s>e?"toNext":"toPrev",c="toNext"==l?s>e:e>s;if(T._DOMAnimating)return;o()}T.updateActiveSlide(e),t.onSlideNext&&"next"==i&&t.onSlideNext(T,e),t.onSlidePrev&&"prev"==i&&t.onSlidePrev(T,e),t.onSlideReset&&"reset"==i&&t.onSlideReset(T,e),("next"==i||"prev"==i||"to"==i&&1==n.runCallbacks)&&v()}function v(){if(T.callPlugins("onSlideChangeStart"),t.onSlideChangeStart)if(t.queueStartCallbacks&&T.support.transitions){if(T._queueStartCallbacks)return;T._queueStartCallbacks=!0,t.onSlideChangeStart(T),T.wrapperTransitionEnd(function(){T._queueStartCallbacks=!1})}else t.onSlideChangeStart(T);if(t.onSlideChangeEnd)if(T.support.transitions)if(t.queueEndCallbacks){if(T._queueEndCallbacks)return;T._queueEndCallbacks=!0,T.wrapperTransitionEnd(t.onSlideChangeEnd)}else T.wrapperTransitionEnd(t.onSlideChangeEnd);else t.DOMAnimation||setTimeout(function(){t.onSlideChangeEnd(T)},10)}function b(){for(var e=T.paginationButtons,t=0;t<e.length;t++)T.h.removeEventListener(e[t],"click",w,!1)}function y(){for(var e=T.paginationButtons,t=0;t<e.length;t++)T.h.addEventListener(e[t],"click",w,!1)}function w(e){for(var t,i=e.target||e.srcElement,n=T.paginationButtons,o=0;o<n.length;o++)i===n[o]&&(t=o);T.swipeTo(t)}function _(){T.calcSlides(),t.loader.slides.length>0&&0==T.slides.length&&T.loadSlides(),t.loop&&T.createLoop(),T.init(),o(),t.pagination&&t.createPagination&&T.createPagination(!0),t.loop||t.initialSlide>0?T.swipeTo(t.initialSlide,0,!1):T.updateActiveSlide(0),t.autoplay&&T.startAutoplay()}if(document.body.__defineGetter__&&HTMLElement){var E=HTMLElement.prototype;E.__defineGetter__&&E.__defineGetter__("outerHTML",function(){return(new XMLSerializer).serializeToString(this)})}if(window.getComputedStyle||(window.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var i=/(\-([a-z]){1})/g;return"float"===t&&(t="styleFloat"),i.test(t)&&(t=t.replace(i,function(){return arguments[2].toUpperCase()})),e.currentStyle[t]?e.currentStyle[t]:null},this}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var i=t||0,n=this.length;n>i;i++)if(this[i]===e)return i;return-1}),(document.querySelectorAll||window.jQuery)&&"undefined"!=typeof e&&(e.nodeType||0!==i(e).length)){var T=this;T.touches={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,diff:0,abs:0},T.positions={start:0,abs:0,diff:0,current:0},T.times={start:0,end:0},T.id=(new Date).getTime(),T.container=e.nodeType?e:i(e)[0],T.isTouched=!1,T.isMoved=!1,T.activeIndex=0,T.activeLoaderIndex=0,T.activeLoopIndex=0,T.previousIndex=null,T.velocity=0,T.snapGrid=[],T.slidesGrid=[],T.imagesToLoad=[],T.imagesLoaded=0,T.wrapperLeft=0,T.wrapperRight=0,T.wrapperTop=0,T.wrapperBottom=0;var C,S,D,I,k,O,R={mode:"horizontal",touchRatio:1,speed:300,freeMode:!1,freeModeFluid:!1,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,slidesPerView:1,slidesPerGroup:1,simulateTouch:!0,followFinger:!0,shortSwipes:!0,moveStartThreshold:!1,autoplay:!1,onlyExternal:!1,createPagination:!0,pagination:!1,paginationElement:"span",paginationClickable:!1,paginationAsRange:!0,resistance:!0,scrollContainer:!1,preventLinks:!0,noSwiping:!1,noSwipingClass:"swiper-no-swiping",initialSlide:0,keyboardControl:!1,mousewheelControl:!1,useCSS3Transforms:!0,loop:!1,loopAdditionalSlides:0,calculateHeight:!1,updateOnImagesReady:!0,releaseFormElements:!0,watchActiveIndex:!1,visibilityFullFit:!1,offsetPxBefore:0,offsetPxAfter:0,offsetSlidesBefore:0,offsetSlidesAfter:0,centeredSlides:!1,queueStartCallbacks:!1,queueEndCallbacks:!1,autoResize:!0,resizeReInit:!1,DOMAnimation:!0,loader:{slides:[],slidesHTMLType:"inner",surroundGroups:1,logic:"reload",loadAllSlides:!1},slideElement:"div",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",wrapperClass:"swiper-wrapper",paginationElementClass:"swiper-pagination-switch",paginationActiveClass:"swiper-active-switch",paginationVisibleClass:"swiper-visible-switch"};t=t||{};for(var x in R)if(x in t&&"object"==typeof t[x])for(var A in R[x])A in t[x]||(t[x][A]=R[x][A]);else x in t||(t[x]=R[x]);T.params=t,t.scrollContainer&&(t.freeMode=!0,t.freeModeFluid=!0),t.loop&&(t.resistance="100%");var P="horizontal"===t.mode;T.touchEvents={touchStart:T.support.touch||!t.simulateTouch?"touchstart":T.browser.ie10?"MSPointerDown":"mousedown",touchMove:T.support.touch||!t.simulateTouch?"touchmove":T.browser.ie10?"MSPointerMove":"mousemove",touchEnd:T.support.touch||!t.simulateTouch?"touchend":T.browser.ie10?"MSPointerUp":"mouseup"};for(var M=T.container.childNodes.length-1;M>=0;M--)if(T.container.childNodes[M].className)for(var N=T.container.childNodes[M].className.split(" "),L=0;L<N.length;L++)N[L]===t.wrapperClass&&(C=T.container.childNodes[M]);T.wrapper=C,T._extendSwiperSlide=function(e){return e.append=function(){return t.loop?(e.insertAfter(T.slides.length-T.loopedSlides),T.removeLoopedSlides(),T.calcSlides(),T.createLoop()):T.wrapper.appendChild(e),T.reInit(),e},e.prepend=function(){return t.loop?(T.wrapper.insertBefore(e,T.slides[T.loopedSlides]),T.removeLoopedSlides(),T.calcSlides(),T.createLoop()):T.wrapper.insertBefore(e,T.wrapper.firstChild),T.reInit(),e},e.insertAfter=function(i){if("undefined"==typeof i)return!1;var n;return t.loop?(n=T.slides[i+1+T.loopedSlides],T.wrapper.insertBefore(e,n),T.removeLoopedSlides(),T.calcSlides(),T.createLoop()):(n=T.slides[i+1],T.wrapper.insertBefore(e,n)),T.reInit(),e},e.clone=function(){return T._extendSwiperSlide(e.cloneNode(!0))},e.remove=function(){T.wrapper.removeChild(e),T.reInit()},e.html=function(t){return"undefined"==typeof t?e.innerHTML:(e.innerHTML=t,e)},e.index=function(){for(var t,i=T.slides.length-1;i>=0;i--)e===T.slides[i]&&(t=i);return t},e.isActive=function(){return e.index()===T.activeIndex?!0:!1},e.swiperSlideDataStorage||(e.swiperSlideDataStorage={}),e.getData=function(t){return e.swiperSlideDataStorage[t]},e.setData=function(t,i){return e.swiperSlideDataStorage[t]=i,e},e.data=function(t,i){return i?(e.setAttribute("data-"+t,i),e):e.getAttribute("data-"+t)},e.getWidth=function(t){return T.h.getWidth(e,t)},e.getHeight=function(t){return T.h.getHeight(e,t)},e.getOffset=function(){return T.h.getOffset(e)},e},T.calcSlides=function(e){var i=T.slides?T.slides.length:!1;T.slides=[],T.displaySlides=[];for(var n=0;n<T.wrapper.childNodes.length;n++)if(T.wrapper.childNodes[n].className)for(var o=T.wrapper.childNodes[n].className,a=o.split(" "),l=0;l<a.length;l++)a[l]===t.slideClass&&T.slides.push(T.wrapper.childNodes[n]);for(n=T.slides.length-1;n>=0;n--)T._extendSwiperSlide(T.slides[n]);i&&(i!==T.slides.length||e)&&(s(),r(),T.updateActiveSlide(),t.createPagination&&T.params.pagination&&T.createPagination(),T.callPlugins("numberOfSlidesChanged"))},T.createSlide=function(e,i,n){var i=i||T.params.slideClass,n=n||t.slideElement,o=document.createElement(n);return o.innerHTML=e||"",o.className=i,T._extendSwiperSlide(o)},T.appendSlide=function(e,t,i){return e?e.nodeType?T._extendSwiperSlide(e).append():T.createSlide(e,t,i).append():void 0},T.prependSlide=function(e,t,i){return e?e.nodeType?T._extendSwiperSlide(e).prepend():T.createSlide(e,t,i).prepend():void 0},T.insertSlideAfter=function(e,t,i,n){return"undefined"==typeof e?!1:t.nodeType?T._extendSwiperSlide(t).insertAfter(e):T.createSlide(t,i,n).insertAfter(e)},T.removeSlide=function(e){if(T.slides[e]){if(t.loop){if(!T.slides[e+T.loopedSlides])return!1;T.slides[e+T.loopedSlides].remove(),T.removeLoopedSlides(),T.calcSlides(),T.createLoop()}else T.slides[e].remove();return!0}return!1},T.removeLastSlide=function(){return T.slides.length>0?(t.loop?(T.slides[T.slides.length-1-T.loopedSlides].remove(),T.removeLoopedSlides(),T.calcSlides(),T.createLoop()):T.slides[T.slides.length-1].remove(),!0):!1},T.removeAllSlides=function(){for(var e=T.slides.length-1;e>=0;e--)T.slides[e].remove()},T.getSlide=function(e){return T.slides[e]},T.getLastSlide=function(){return T.slides[T.slides.length-1]},T.getFirstSlide=function(){return T.slides[0]},T.activeSlide=function(){return T.slides[T.activeIndex]};var B=[];for(var j in T.plugins)if(t[j]){var K=T.plugins[j](T,t[j]);K&&B.push(K)}T.callPlugins=function(e,t){t||(t={});for(var i=0;i<B.length;i++)e in B[i]&&B[i][e](t)},T.browser.ie10&&!t.onlyExternal&&(P?T.wrapper.classList.add("swiper-wp8-horizontal"):T.wrapper.classList.add("swiper-wp8-vertical")),t.freeMode&&(T.container.className+=" swiper-free-mode"),T.initialized=!1,T.init=function(e,i){var n=T.h.getWidth(T.container),o=T.h.getHeight(T.container);if(n!==T.width||o!==T.height||e){T.width=n,T.height=o,O=P?n:o;var r=T.wrapper;if(e&&T.calcSlides(i),"auto"===t.slidesPerView){var s=0,a=0;t.slidesOffset>0&&(r.style.paddingLeft="",r.style.paddingRight="",r.style.paddingTop="",r.style.paddingBottom=""),r.style.width="",r.style.height="",t.offsetPxBefore>0&&(P?T.wrapperLeft=t.offsetPxBefore:T.wrapperTop=t.offsetPxBefore),t.offsetPxAfter>0&&(P?T.wrapperRight=t.offsetPxAfter:T.wrapperBottom=t.offsetPxAfter),t.centeredSlides&&(P?(T.wrapperLeft=(O-this.slides[0].getWidth(!0))/2,T.wrapperRight=(O-T.slides[T.slides.length-1].getWidth(!0))/2):(T.wrapperTop=(O-T.slides[0].getHeight(!0))/2,T.wrapperBottom=(O-T.slides[T.slides.length-1].getHeight(!0))/2)),P?(T.wrapperLeft>=0&&(r.style.paddingLeft=T.wrapperLeft+"px"),T.wrapperRight>=0&&(r.style.paddingRight=T.wrapperRight+"px")):(T.wrapperTop>=0&&(r.style.paddingTop=T.wrapperTop+"px"),T.wrapperBottom>=0&&(r.style.paddingBottom=T.wrapperBottom+"px"));var l=0,c=0;T.snapGrid=[],T.slidesGrid=[];for(var d=0,u=0;u<T.slides.length;u++){var h=T.slides[u].getWidth(!0),p=T.slides[u].getHeight(!0);t.calculateHeight&&(d=Math.max(d,p));var f=P?h:p;if(t.centeredSlides){var m=u===T.slides.length-1?0:T.slides[u+1].getWidth(!0),g=u===T.slides.length-1?0:T.slides[u+1].getHeight(!0),v=P?m:g;if(f>O){for(var b=0;b<=Math.floor(f/(O+T.wrapperLeft));b++)0===b?T.snapGrid.push(l+T.wrapperLeft):T.snapGrid.push(l+T.wrapperLeft+O*b);T.slidesGrid.push(l+T.wrapperLeft)}else T.snapGrid.push(c),T.slidesGrid.push(c);c+=f/2+v/2}else{if(f>O)for(var b=0;b<=Math.floor(f/O);b++)T.snapGrid.push(l+O*b);else T.snapGrid.push(l);T.slidesGrid.push(l)}l+=f,s+=h,a+=p}t.calculateHeight&&(T.height=d),P?(D=s+T.wrapperRight+T.wrapperLeft,r.style.width=s+"px",r.style.height=T.height+"px"):(D=a+T.wrapperTop+T.wrapperBottom,r.style.width=T.width+"px",r.style.height=a+"px")}else if(t.scrollContainer){r.style.width="",r.style.height="";var y=T.slides[0].getWidth(!0),w=T.slides[0].getHeight(!0);D=P?y:w,r.style.width=y+"px",r.style.height=w+"px",S=P?y:w}else{if(t.calculateHeight){var d=0,w=0;P||(T.container.style.height=""),r.style.height="";for(var u=0;u<T.slides.length;u++)T.slides[u].style.height="",d=Math.max(T.slides[u].getHeight(!0),d),P||(w+=T.slides[u].getHeight(!0));var p=d;if(P)var w=p;O=T.height=p,P||(T.container.style.height=O+"px")}else var p=P?T.height:T.height/t.slidesPerView,w=P?T.height:T.slides.length*p;var h=P?T.width/t.slidesPerView:T.width,y=P?T.slides.length*h:T.width;S=P?h:p,t.offsetSlidesBefore>0&&(P?T.wrapperLeft=S*t.offsetSlidesBefore:T.wrapperTop=S*t.offsetSlidesBefore),t.offsetSlidesAfter>0&&(P?T.wrapperRight=S*t.offsetSlidesAfter:T.wrapperBottom=S*t.offsetSlidesAfter),t.offsetPxBefore>0&&(P?T.wrapperLeft=t.offsetPxBefore:T.wrapperTop=t.offsetPxBefore),t.offsetPxAfter>0&&(P?T.wrapperRight=t.offsetPxAfter:T.wrapperBottom=t.offsetPxAfter),t.centeredSlides&&(P?(T.wrapperLeft=(O-S)/2,T.wrapperRight=(O-S)/2):(T.wrapperTop=(O-S)/2,T.wrapperBottom=(O-S)/2)),P?(T.wrapperLeft>0&&(r.style.paddingLeft=T.wrapperLeft+"px"),T.wrapperRight>0&&(r.style.paddingRight=T.wrapperRight+"px")):(T.wrapperTop>0&&(r.style.paddingTop=T.wrapperTop+"px"),T.wrapperBottom>0&&(r.style.paddingBottom=T.wrapperBottom+"px")),D=P?y+T.wrapperRight+T.wrapperLeft:w+T.wrapperTop+T.wrapperBottom,r.style.width=y+"px",r.style.height=w+"px";var l=0;T.snapGrid=[],T.slidesGrid=[];for(var u=0;u<T.slides.length;u++)T.snapGrid.push(l),T.slidesGrid.push(l),l+=S,T.slides[u].style.width=h+"px",T.slides[u].style.height=p+"px"}T.initialized?T.callPlugins("onInit"):T.callPlugins("onFirstInit"),T.initialized=!0}},T.reInit=function(e){T.init(!0,e)},T.resizeFix=function(e){if(T.callPlugins("beforeResizeFix"),T.init(t.resizeReInit||e),t.freeMode){var i=P?T.getWrapperTranslate("x"):T.getWrapperTranslate("y");if(i<-n()){var o=P?-n():0,r=P?0:-n();T.setWrapperTransition(0),T.setWrapperTranslate(o,r,0)}}else t.loop?T.swipeTo(T.activeLoopIndex,0,!1):T.swipeTo(T.activeIndex,0,!1);T.callPlugins("afterResizeFix")},T.destroy=function(e){T.browser.ie10?(T.h.removeEventListener(T.wrapper,T.touchEvents.touchStart,p,!1),T.h.removeEventListener(document,T.touchEvents.touchMove,f,!1),T.h.removeEventListener(document,T.touchEvents.touchEnd,m,!1)):(T.support.touch&&(T.h.removeEventListener(T.wrapper,"touchstart",p,!1),T.h.removeEventListener(T.wrapper,"touchmove",f,!1),T.h.removeEventListener(T.wrapper,"touchend",m,!1)),t.simulateTouch&&(T.h.removeEventListener(T.wrapper,"mousedown",p,!1),T.h.removeEventListener(document,"mousemove",f,!1),T.h.removeEventListener(document,"mouseup",m,!1))),t.autoResize&&T.h.removeEventListener(window,"resize",T.resizeFix,!1),s(),t.paginationClickable&&b(),t.mousewheelControl&&T._wheelEvent&&T.h.removeEventListener(T.container,T._wheelEvent,l,!1),t.keyboardControl&&T.h.removeEventListener(document,"keydown",a,!1),t.autoplay&&T.stopAutoplay(),T.callPlugins("onDestroy")},t.grabCursor&&(T.container.style.cursor="move",T.container.style.cursor="grab",T.container.style.cursor="-moz-grab",T.container.style.cursor="-webkit-grab"),T.allowSlideClick=!0,T.allowLinks=!0;var F,H,W,$=!1,V=!0;T.swipeNext=function(e){!e&&t.loop&&T.fixLoop(),T.callPlugins("onSwipeNext");var i=P?T.getWrapperTranslate("x"):T.getWrapperTranslate("y"),o=i;if("auto"==t.slidesPerView){for(var r=0;r<T.snapGrid.length;r++)if(-i>=T.snapGrid[r]&&-i<T.snapGrid[r+1]){o=-T.snapGrid[r+1];break}}else{var s=S*t.slidesPerGroup;o=-(Math.floor(Math.abs(i)/Math.floor(s))*s+s)}return o<-n()&&(o=-n()),o==i?!1:(g(o,"next"),!0)},T.swipePrev=function(e){!e&&t.loop&&T.fixLoop(),!e&&t.autoplay&&T.stopAutoplay(),T.callPlugins("onSwipePrev");var i,n=Math.ceil(P?T.getWrapperTranslate("x"):T.getWrapperTranslate("y"));if("auto"==t.slidesPerView){i=0;for(var o=1;o<T.snapGrid.length;o++){if(-n==T.snapGrid[o]){i=-T.snapGrid[o-1];break}if(-n>T.snapGrid[o]&&-n<T.snapGrid[o+1]){i=-T.snapGrid[o];break}}}else{var r=S*t.slidesPerGroup;i=-(Math.ceil(-n/r)-1)*r}return i>0&&(i=0),i==n?!1:(g(i,"prev"),!0)},T.swipeReset=function(){T.callPlugins("onSwipeReset");var e,i=P?T.getWrapperTranslate("x"):T.getWrapperTranslate("y"),o=S*t.slidesPerGroup;-n();if("auto"==t.slidesPerView){e=0;for(var r=0;r<T.snapGrid.length;r++){if(-i===T.snapGrid[r])return;if(-i>=T.snapGrid[r]&&-i<T.snapGrid[r+1]){e=T.positions.diff>0?-T.snapGrid[r+1]:-T.snapGrid[r];break}}-i>=T.snapGrid[T.snapGrid.length-1]&&(e=-T.snapGrid[T.snapGrid.length-1]),
i<=-n()&&(e=-n())}else e=0>i?Math.round(i/o)*o:0;return t.scrollContainer&&(e=0>i?i:0),e<-n()&&(e=-n()),t.scrollContainer&&O>S&&(e=0),e==i?!1:(g(e,"reset"),!0)},T.swipeTo=function(e,i,o){e=parseInt(e,10),T.callPlugins("onSwipeTo",{index:e,speed:i}),t.loop&&(e+=T.loopedSlides);var r=P?T.getWrapperTranslate("x"):T.getWrapperTranslate("y");if(!(e>T.slides.length-1||0>e)){var s;return s="auto"==t.slidesPerView?-T.slidesGrid[e]:-e*S,s<-n()&&(s=-n()),s==r?!1:(o=o===!1?!1:!0,g(s,"to",{index:e,speed:i,runCallbacks:o}),!0)}},T._queueStartCallbacks=!1,T._queueEndCallbacks=!1,T.updateActiveSlide=function(e){if(T.initialized&&0!=T.slides.length){if(T.previousIndex=T.activeIndex,e>0&&(e=0),"undefined"==typeof e&&(e=P?T.getWrapperTranslate("x"):T.getWrapperTranslate("y")),"auto"==t.slidesPerView){if(T.activeIndex=T.slidesGrid.indexOf(-e),T.activeIndex<0){for(var i=0;i<T.slidesGrid.length-1&&!(-e>T.slidesGrid[i]&&-e<T.slidesGrid[i+1]);i++);var n=Math.abs(T.slidesGrid[i]+e),o=Math.abs(T.slidesGrid[i+1]+e);o>=n?T.activeIndex=i:T.activeIndex=i+1}}else t.visibilityFullFit?T.activeIndex=Math.ceil(-e/S):T.activeIndex=Math.round(-e/S);if(T.activeIndex==T.slides.length&&(T.activeIndex=T.slides.length-1),T.activeIndex<0&&(T.activeIndex=0),T.slides[T.activeIndex]){T.calcVisibleSlides(e);for(var r=new RegExp("\\s*"+t.slideActiveClass),s=new RegExp("\\s*"+t.slideVisibleClass),i=0;i<T.slides.length;i++)T.slides[i].className=T.slides[i].className.replace(r,"").replace(s,""),T.visibleSlides.indexOf(T.slides[i])>=0&&(T.slides[i].className+=" "+t.slideVisibleClass);if(T.slides[T.activeIndex].className+=" "+t.slideActiveClass,t.loop){var a=T.loopedSlides;T.activeLoopIndex=T.activeIndex-a,T.activeLoopIndex>=T.slides.length-2*a&&(T.activeLoopIndex=T.slides.length-2*a-T.activeLoopIndex),T.activeLoopIndex<0&&(T.activeLoopIndex=T.slides.length-2*a+T.activeLoopIndex)}else T.activeLoopIndex=T.activeIndex;t.pagination&&T.updatePagination(e)}}},T.createPagination=function(e){t.paginationClickable&&T.paginationButtons&&b();var n="",o=T.slides.length,r=o;t.loop&&(r-=2*T.loopedSlides);for(var s=0;r>s;s++)n+="<"+t.paginationElement+' class="'+t.paginationElementClass+'"></'+t.paginationElement+">";T.paginationContainer=t.pagination.nodeType?t.pagination:i(t.pagination)[0],T.paginationContainer.innerHTML=n,T.paginationButtons=[],document.querySelectorAll?T.paginationButtons=T.paginationContainer.querySelectorAll("."+t.paginationElementClass):window.jQuery&&(T.paginationButtons=i(T.paginationContainer).find("."+t.paginationElementClass)),e||T.updatePagination(),T.callPlugins("onCreatePagination"),t.paginationClickable&&y()},T.updatePagination=function(e){if(!(T.slides.length<1)){if(document.querySelectorAll)var n=T.paginationContainer.querySelectorAll("."+t.paginationActiveClass);else if(window.jQuery)var n=i(T.paginationContainer).find("."+t.paginationActiveClass);if(n){for(var o=T.paginationButtons,r=0;r<o.length;r++)o[r].className=t.paginationElementClass;var s=t.loop?T.loopedSlides:0;if(t.paginationAsRange){T.visibleSlides||T.calcVisibleSlides(e);for(var a=[],r=0;r<T.visibleSlides.length;r++){var l=T.slides.indexOf(T.visibleSlides[r])-s;t.loop&&0>l&&(l=T.slides.length-2*T.loopedSlides+l),t.loop&&l>=T.slides.length-2*T.loopedSlides&&(l=T.slides.length-2*T.loopedSlides-l,l=Math.abs(l)),a.push(l)}for(r=0;r<a.length;r++)o[a[r]]&&(o[a[r]].className+=" "+t.paginationVisibleClass);t.loop?o[T.activeLoopIndex].className+=" "+t.paginationActiveClass:o[T.activeIndex].className+=" "+t.paginationActiveClass}else t.loop?o[T.activeLoopIndex].className+=" "+t.paginationActiveClass+" "+t.paginationVisibleClass:o[T.activeIndex].className+=" "+t.paginationActiveClass+" "+t.paginationVisibleClass}}},T.calcVisibleSlides=function(e){var i=[],n=0,o=0,r=0;P&&T.wrapperLeft>0&&(e+=T.wrapperLeft),!P&&T.wrapperTop>0&&(e+=T.wrapperTop);for(var s=0;s<T.slides.length;s++){n+=o,o="auto"==t.slidesPerView?P?T.h.getWidth(T.slides[s],!0):T.h.getHeight(T.slides[s],!0):S,r=n+o;var a=!1;t.visibilityFullFit?(n>=-e&&-e+O>=r&&(a=!0),-e>=n&&r>=-e+O&&(a=!0)):(r>-e&&-e+O>=r&&(a=!0),n>=-e&&-e+O>n&&(a=!0),-e>n&&r>-e+O&&(a=!0)),a&&i.push(T.slides[s])}0==i.length&&(i=[T.slides[T.activeIndex]]),T.visibleSlides=i};var z=void 0;T.startAutoplay=function(){return"undefined"!=typeof z?!1:(t.autoplay&&!t.loop&&(z=setInterval(function(){T.swipeNext(!0)||T.swipeTo(0)},t.autoplay)),t.autoplay&&t.loop&&(autoPlay=setInterval(function(){T.swipeNext()},t.autoplay)),void T.callPlugins("onAutoplayStart"))},T.stopAutoplay=function(){z&&clearInterval(z),z=void 0,T.callPlugins("onAutoplayStop")},T.loopCreated=!1,T.removeLoopedSlides=function(){if(T.loopCreated)for(var e=0;e<T.slides.length;e++)T.slides[e].getData("looped")===!0&&T.wrapper.removeChild(T.slides[e])},T.createLoop=function(){if(0!=T.slides.length){T.loopedSlides=t.slidesPerView+t.loopAdditionalSlides;for(var e="",i="",n=0;n<T.loopedSlides;n++)e+=T.slides[n].outerHTML;for(n=T.slides.length-T.loopedSlides;n<T.slides.length;n++)i+=T.slides[n].outerHTML;for(C.innerHTML=i+C.innerHTML+e,T.loopCreated=!0,T.calcSlides(),n=0;n<T.slides.length;n++)(n<T.loopedSlides||n>=T.slides.length-T.loopedSlides)&&T.slides[n].setData("looped",!0);T.callPlugins("onCreateLoop")}},T.fixLoop=function(){if(T.activeIndex<T.loopedSlides){var e=T.slides.length-3*T.loopedSlides+T.activeIndex;T.swipeTo(e,0,!1)}else if(T.activeIndex>T.slides.length-2*t.slidesPerView){var e=-T.slides.length+T.activeIndex+T.loopedSlides;T.swipeTo(e,0,!1)}},T.loadSlides=function(){var e="";T.activeLoaderIndex=0;for(var i=t.loader.slides,n=t.loader.loadAllSlides?i.length:t.slidesPerView*(1+t.loader.surroundGroups),o=0;n>o;o++)e+="outer"==t.loader.slidesHTMLType?i[o]:"<"+t.slideElement+' class="'+t.slideClass+'" data-swiperindex="'+o+'">'+i[o]+"</"+t.slideElement+">";T.wrapper.innerHTML=e,T.calcSlides(!0),t.loader.loadAllSlides||T.wrapperTransitionEnd(T.reloadSlides,!0)},T.reloadSlides=function(){var e=t.loader.slides,i=parseInt(T.activeSlide().data("swiperindex"),10);if(!(0>i||i>e.length-1)){T.activeLoaderIndex=i;var n=Math.max(0,i-t.slidesPerView*t.loader.surroundGroups),o=Math.min(i+t.slidesPerView*(1+t.loader.surroundGroups)-1,e.length-1);if(i>0){var r=-S*(i-n);P?T.setWrapperTranslate(r,0,0):T.setWrapperTranslate(0,r,0),T.setWrapperTransition(0)}if("reload"===t.loader.logic){T.wrapper.innerHTML="";for(var s="",a=n;o>=a;a++)s+="outer"==t.loader.slidesHTMLType?e[a]:"<"+t.slideElement+' class="'+t.slideClass+'" data-swiperindex="'+a+'">'+e[a]+"</"+t.slideElement+">";T.wrapper.innerHTML=s}else{for(var l=1e3,c=0,a=0;a<T.slides.length;a++){var d=T.slides[a].data("swiperindex");n>d||d>o?T.wrapper.removeChild(T.slides[a]):(l=Math.min(d,l),c=Math.max(d,c))}for(var a=n;o>=a;a++){if(l>a){var u=document.createElement(t.slideElement);u.className=t.slideClass,u.setAttribute("data-swiperindex",a),u.innerHTML=e[a],T.wrapper.insertBefore(u,T.wrapper.firstChild)}if(a>c){var u=document.createElement(t.slideElement);u.className=t.slideClass,u.setAttribute("data-swiperindex",a),u.innerHTML=e[a],T.wrapper.appendChild(u)}}}T.reInit(!0)}},_()}};Swiper.prototype={plugins:{},wrapperTransitionEnd:function(e,t){function i(){if(e(n),n.params.queueEndCallbacks&&(n._queueEndCallbacks=!1),!t)for(var s=0;s<r.length;s++)o.removeEventListener(r[s],i,!1)}var n=this,o=n.wrapper,r=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"];if(e)for(var s=0;s<r.length;s++)o.addEventListener(r[s],i,!1)},getWrapperTranslate:function(e){var t,i,n=this.wrapper;if(window.WebKitCSSMatrix){var o=new WebKitCSSMatrix(window.getComputedStyle(n,null).webkitTransform);t=o.toString().split(",")}else{var o=window.getComputedStyle(n,null).MozTransform||window.getComputedStyle(n,null).OTransform||window.getComputedStyle(n,null).MsTransform||window.getComputedStyle(n,null).msTransform||window.getComputedStyle(n,null).transform||window.getComputedStyle(n,null).getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,");t=o.toString().split(",")}return this.params.useCSS3Transforms?("x"==e&&(i=16==t.length?parseFloat(t[12]):window.WebKitCSSMatrix?o.m41:parseFloat(t[4])),"y"==e&&(i=16==t.length?parseFloat(t[13]):window.WebKitCSSMatrix?o.m42:parseFloat(t[5]))):("x"==e&&(i=parseFloat(n.style.left,10)||0),"y"==e&&(i=parseFloat(n.style.top,10)||0)),i||0},setWrapperTranslate:function(e,t,i){var n=this.wrapper.style;e=e||0,t=t||0,i=i||0,this.params.useCSS3Transforms?this.support.transforms3d?n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform="translate3d("+e+"px, "+t+"px, "+i+"px)":(n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform="translate("+e+"px, "+t+"px)",this.support.transforms||(n.left=e+"px",n.top=t+"px")):(n.left=e+"px",n.top=t+"px"),this.callPlugins("onSetWrapperTransform",{x:e,y:t,z:i})},setWrapperTransition:function(e){var t=this.wrapper.style;t.webkitTransitionDuration=t.MsTransitionDuration=t.msTransitionDuration=t.MozTransitionDuration=t.OTransitionDuration=t.transitionDuration=e/1e3+"s",this.callPlugins("onSetWrapperTransition",{duration:e})},h:{getWidth:function(e,t){var i=window.getComputedStyle(e,null).getPropertyValue("width"),n=parseFloat(i);return(isNaN(n)||i.indexOf("%")>0)&&(n=e.offsetWidth-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-left"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-right"))),t&&(n+=parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-left"))+parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-right"))),n},getHeight:function(e,t){if(t)return e.offsetHeight;var i=window.getComputedStyle(e,null).getPropertyValue("height"),n=parseFloat(i);return(isNaN(n)||i.indexOf("%")>0)&&(n=e.offsetHeight-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-top"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-bottom"))),t&&(n+=parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-top"))+parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-bottom"))),n},getOffset:function(e){var t=e.getBoundingClientRect(),i=document.body,n=e.clientTop||i.clientTop||0,o=e.clientLeft||i.clientLeft||0,r=window.pageYOffset||e.scrollTop,s=window.pageXOffset||e.scrollLeft;return document.documentElement&&!window.pageYOffset&&(r=document.documentElement.scrollTop,s=document.documentElement.scrollLeft),{top:t.top+r-n,left:t.left+s-o}},windowWidth:function(){return window.innerWidth?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:void 0},windowHeight:function(){return window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:void 0},windowScroll:function(){return"undefined"!=typeof pageYOffset?{left:window.pageXOffset,top:window.pageYOffset}:document.documentElement?{left:document.documentElement.scrollLeft,top:document.documentElement.scrollTop}:void 0},addEventListener:function(e,t,i,n){e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i)},removeEventListener:function(e,t,i,n){e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on"+t,i)}},setTransform:function(e,t){var i=e.style;i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=t},setTranslate:function(e,t){var i=e.style,n={x:t.x||0,y:t.y||0,z:t.z||0},o=this.support.transforms3d?"translate3d("+n.x+"px,"+n.y+"px,"+n.z+"px)":"translate("+n.x+"px,"+n.y+"px)";i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=o,this.support.transforms||(i.left=n.x+"px",i.top=n.y+"px")},setTransition:function(e,t){var i=e.style;i.webkitTransitionDuration=i.MsTransitionDuration=i.msTransitionDuration=i.MozTransitionDuration=i.OTransitionDuration=i.transitionDuration=t+"ms"},support:{touch:window.Modernizr&&Modernizr.touch===!0||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===!0||function(){var e=document.createElement("div");return"webkitPerspective"in e.style||"MozPerspective"in e.style||"OPerspective"in e.style||"MsPerspective"in e.style||"perspective"in e.style}(),transforms:window.Modernizr&&Modernizr.csstransforms===!0||function(){var e=document.createElement("div").style;return"transform"in e||"WebkitTransform"in e||"MozTransform"in e||"msTransform"in e||"MsTransform"in e||"OTransform"in e}(),transitions:window.Modernizr&&Modernizr.csstransitions===!0||function(){var e=document.createElement("div").style;return"transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"MsTransition"in e||"OTransition"in e}()},browser:{ie8:function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=i.exec(t)&&(e=parseFloat(RegExp.$1))}return-1!=e&&9>e}(),ie10:window.navigator.msPointerEnabled}},(window.jQuery||window.Zepto)&&!function(e){e.fn.swiper=function(t){var i=new Swiper(e(this)[0],t);return e(this).data("swiper",i),i}}(window.jQuery||window.Zepto),_wAMD.define("vendor/jquery.swiper",["jquery"],function(e){return function(){var t;return t||e.Swiper}}(this)),_wAMD.define("commerce/site/view/mobile/product/Slider",["jquery","vendor/jquery.swiper"],function(e){var t={indexMap:{},$slider:null,initialize:function(){var t=this;e("#wsite-com-product-slider .wsite-com-slide").each(function(){var i=e(this),n=i.data("image-id");t.indexMap[n]=i.index()}),this.$slider=e("#wsite-com-product-slider .wsite-com-product-images").swiper({pagination:"#wsite-com-product-slider .wsite-images-pager",slideClass:"wsite-com-slide",wrapperClass:"wsite-com-slides",paginationElementClass:"wsite-page-button",paginationVisibleClass:"wsite-page-button-visible",paginationActiveClass:"wsite-page-button-active",slideActiveClass:"wsite-slide-active",slideVisibleClass:"wsite-slide-visible",loop:!0,grabCursor:!0,paginationClickable:!0,calculateHeight:!0,resizeReInit:!0,centeredSlides:!1})}};return t}),_wAMD.define("commerce/site/view/mobile/ProductPageView",["jquery","underscore","commerce/site/view/BaseProductPageView","commerce/site/view/mobile/product/Slider"],function(e,t,i,n){var o=function(){};return o.prototype=Object.create(i),o.prototype=t.extend(o.prototype,{el:"#wsite-content",selectors:{variationData:"#wsite-product-variations",productElementContainer:".wsite-product, .product",productPageContainer:".wsite-product-selector",siteProductIdElement:"#wsite-product-area",productTitle:"#wsite-product-title"},ui:{"custom-inputs":".wsite-product-options .text-option-input",options:".wsite-product-options","option-groups":".wsite-product-options >","price-area":"#wsite-price-line","price-amount":"#wsite-product-price .wsite-price","price-sale-amount":"#wsite-product-sale-price .wsite-price",quantity:"#wsite-quantity","add-to-cart":"#wsite-com-product-add-to-cart"},options:{salePriceClass:"wsite-product-sale-price",nonSalePriceClass:"wsite-product-price",soldOutPriceClass:"wsite-product-sold-out",priceRangeClass:"wsite-product-price-range",unavailablePriceClass:"wsite-product-no-item"},initialize:function(){if(i.initialize.apply(this,arguments),this.$el.length){n.initialize();var e=this;this.$el.find(".wsite-buy-button").on("click",function(t){e.buy(t,e.ui["custom-inputs"])})}},placeOptionPopover:"bottom",buy:function(){i.buy.apply(this,arguments).done(function(e){if(e.success){var t=e.data.has_ssl_cert,i=e.data.token,n=e.data.host;t&&-1==n.indexOf("weebly")?window.location.href=n:window.location.href=n+"?view=mobile&cart="+i}})},updateImage:function(e){var t=e.image_order&&e.image_order[0],i=n.indexMap[t];void 0!==i&&n.$slider.swipeTo(i)},update:function(){var e=i.update.apply(this,arguments),t=e?e.inventory:0;t=void 0===t||t>20?20:t;for(var n="",o=1;t>=o;o++)n+="<option>"+o+"</option>";""===n&&(n="<option>0</option>"),this.ui.quantity.html(n)}}),e(document).ready(function(){window.inEditor&&window.inEditor()||(new o).initialize()}),o}),_wAMD.define("commerce/editor/view/elements/ProductPageEdit",["jquery","config","mustache","site/editor/app","editor-site-shared/relay","commerce/util/product-utils","site/editor/ui/weebly_editbox","tpl!commerce/editor/general/popover.tpl"],function(e,t,i,n,o,r,s,a){var l=n.module("commerce.product");return l.on("start",function(){l.listenTo(n.vent,{pageRendered:function(){Weebly.Commerce&&Weebly.COMMERCE_ENABLED&&!t.chromeless&&l.onUpdateElementList()}})}),l.onUpdateElementList=function(){var t=e("#wsite-com-product-area");if(t.length&&Weebly.Permissions.store_settings){e("#wsite-com-product-gen").bind("mouseover",function(){e("#commerce_editor_editproductinstore").length||(e(this).prepend(i.render(a,{type:"product",buttons:[{id:"commerce_editor_editproductinstore",text:_W.utl("javascript.commerce.editor.view.elements.ProductPageEdit_2")}]})),e("#commerce_editor_editproductinstore").bind("click",l.editProductInStoreTab)),e("#commerce_editor_product_editchoices").show()}).bind("mouseout",function(){e("#commerce_editor_product_editchoices").hide()});var n=e("#wsite-com-product-gen").attr("data-id"),o=t.find("#wsite-com-product-title"),c=t.find("#wsite-com-product-short-description").find(".paragraph"),d=_W.utl("javascript.commerce.editor.view.elements.ProductPageEdit_3");e("#wsite-com-product-add-to-cart").attr("data-content",_W.utl("javascript.commerce.editor.view.elements.ProductPageEdit_4")).popover({trigger:"hover",placement:"top",container:"#_editor-ui",delay:{show:500,hide:100}}).removeAttr("data-original-title"),o.attr("placeholder",""),s.makeElementContentEditable(o.get(0),{richTextControls:!1,saveCallback:function(){var e={productPage:!0,entryPoint:"productPageTitleEdit"};r.saveProductChanges("title",n,o,e)}}),c.attr("placeholder",d),s.makeElementContentEditable(c.get(0),{saveCallback:function(){r.saveProductChanges("description",n,c,{entryPoint:"productPageDescriptionEdit"})}})}_wAMD.require(["commerce/site/view/ProductPageView","commerce/site/view/mobile/ProductPageView"],function(t,i){(new t).initialize(),Weebly.view.isMobileView&&e("#wsite-com-area-product").length&&(new i).initialize()})},l.editProductInStoreTab=function(t){var i=e("#wsite-com-product-gen").attr("data-id");o.execute("store:product:edit",i,!0)},l}),_wAMD.define("util/platform/elements/PlatformElement",["backbone"],function(e){var t=e.View.prototype,i=e.View.extend({initialize:function(e){t.initialize.apply(this,arguments)},render:function(){window.inEditor&&window.inEditor()&&require("editor-site-shared/relay").request("page:navigate")},remove:function(){t.remove.apply(this,arguments)},setElement:function(){t.setElement.apply(this,arguments)},delegateEvents:function(){t.delegateEvents.apply(this,arguments)},undelegateEvents:function(){t.undelegateEvents.apply(this,arguments)}});return i}),_wAMD.define("util/platform/elements/PlatformElementSettings",["jquery","config","backbone"],function(e,t,i){var n=i.Model.extend({save:function(i,n,o){var r=this,s=this.attributes;if(null==i||"object"==typeof i?(s=i,o=n):(s={})[i]=n,s&&!this.set(s,o))return!1;if(window.inEditor&&window.inEditor()&&!t.chromeless)return _W.Editor.RPC.PlatformElementInstance.updateSettings(r.page_element_id,r.toJSON());var a=new e.Deferred;return a.resolve({success:!1,message:"You cannot update settings outside of the editor."}),a.promise()}});return n}),_wAMD.requirejs.config({paths:{config:"editor/config"}}),_wAMD.require(["jquery","util/Corax","site/editor/app","editor-site-shared/bridge","editor-site-shared/relay","site/editor/relay-constants","site/editor/build/page","site/editor/build/dimensions","site/editor/themes/api","site/editor/build/element","site/editor/build/site","site/editor/build/area","site/editor/build/update","site/editor/commerce/module","site/editor/themes/main","site/editor/mobile/main","site/editor/theme-background/module","site/editor/image-editor/module","site/editor/ui/module","site/editor/ajax/module","blog/frame/module","site/editor/page-layouts/module","commerce/editor/view/elements/CategoryPageEdit","commerce/editor/view/elements/ProductPageEdit","util/platform/elements/PlatformElement","util/platform/elements/PlatformElementSettings"],function(e,t,i,n,o,r){try{t.install({project:"editor-iframe",release:window.buildTime,shouldSendCallback:function(e){return o.execute("raven:message",e),!1}})}catch(s){console.warn("Raven failed to install")}e(function(){n.setup(o.incoming,window.parent,o.outgoing),i.start(),i.ui.start(),o.trigger(r.EVENTS.DOCUMENT_READY)}),window.inEditor=function(){return!0}}),_wAMD.define("site/editor/main",function(){});